<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Linux-文件传输</title>
    <url>/Linux/blogs/Linux-%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blueftp%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">ftp命令 </span></a></li>
<li><a href="#span-idinline-bluersync%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">rsync命令 </span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="ftp命令"><span id="inline-blue">ftp命令 </span></span></h2><p><strong>作用</strong><br>    本地和远程服务器之间上传和下载文件，实现两端服务通信。</p>
<p><strong>选项</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-d 开启debug模式</span><br><span class="line">-i 关闭交互模式（不再询问用户）</span><br><span class="line">-n 禁用自动登陆</span><br><span class="line">-v 显示详细操作信息</span><br><span class="line">-g 关闭文件名替换</span><br><span class="line">-t 激活数据包跟踪</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demomdn ~]# ftp 10.9.212.55</span><br><span class="line">Connected to 10.9.212.55.</span><br><span class="line">220 Microsoft FTP Service</span><br><span class="line">504 Security mechanism not implemented.</span><br><span class="line">Name (10.9.212.55:root): report_cd     </span><br><span class="line">331 Password required for report_cd.</span><br><span class="line">Password:</span><br><span class="line">230 User logged in.</span><br><span class="line">Remote system type is Windows_NT.</span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> dir</span></span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,83).</span><br><span class="line">125 Data connection already open; Transfer starting.</span><br><span class="line">03-15-22  05:18PM                27446 11479.jpg</span><br><span class="line">03-15-22  05:24PM                24242 11481.jpg</span><br><span class="line">03-15-22  05:29PM                57438 11597.jpg</span><br><span class="line">03-15-22  05:29PM                 3710 13683.jpg</span><br><span class="line">03-15-22  05:29PM                 9836 14716.jpg</span><br><span class="line">03-15-22  05:29PM                47496 15221.jpg</span><br><span class="line">03-15-22  05:29PM                29992 15475.jpg</span><br><span class="line">03-15-22  05:29PM                52790 16238.jpg</span><br><span class="line">03-15-22  05:29PM                52735 16393.jpg</span><br><span class="line">03-15-22  05:29PM                23356 16636.jpg</span><br><span class="line">04-22-22  09:23AM       &lt;DIR&gt;          aspnet_client</span><br><span class="line">08-02-20  09:41PM       &lt;DIR&gt;          oms-pic</span><br><span class="line">12-30-20  05:40PM       &lt;DIR&gt;          upload</span><br><span class="line">10-15-21  02:28PM       &lt;DIR&gt;          verms</span><br><span class="line">226 Transfer complete.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">下载文件，16636.jpg存放在登陆FTP的当前目录下</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> get 16636.jpg</span></span><br><span class="line">local: 16636.jpg remote: 16636.jpg</span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,96).</span><br><span class="line">125 Data connection already open; Transfer starting.</span><br><span class="line">WARNING! 70 bare linefeeds received in ASCII mode</span><br><span class="line">File may not have transferred correctly.</span><br><span class="line">226 Transfer complete.</span><br><span class="line">23356 bytes received in 0.05 seconds (4.6e+02 Kbytes/s)</span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> quit</span></span><br><span class="line">221 Goodbye.</span><br><span class="line">[root@demomdn ~]# ls</span><br><span class="line">16636.jpg        Downloads  Pictures         sda1.blktrace.2  sda1.blktrace.7  sda4.blktrace.4  Templates</span><br><span class="line">anaconda-ks.cfg  ftp        Public           sda1.blktrace.3  sda4.blktrace.0  sda4.blktrace.5  Videos</span><br><span class="line">boss.0.json      ISSClient  receiveMsg       sda1.blktrace.4  sda4.blktrace.1  sda4.blktrace.6  VirtualBox VMs</span><br><span class="line">Desktop          logs       sda1.blktrace.0  sda1.blktrace.5  sda4.blktrace.2  sda4.blktrace.7</span><br><span class="line">Documents        Music      sda1.blktrace.1  sda1.blktrace.6  sda4.blktrace.3  store</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">上传文件16637.jpg，16637.jpg文件位于登陆ftp的当前目录下</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> put 16637.jpg</span>     </span><br><span class="line">local: 16637.jpg remote: 16637.jpg</span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,149).</span><br><span class="line">125 Data connection already open; Transfer starting.</span><br><span class="line">226 Transfer complete.</span><br><span class="line">23425 bytes sent in 0.0021 seconds (1.1e+04 Kbytes/s)</span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> dir</span></span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,151).</span><br><span class="line">150 Opening ASCII mode data connection.</span><br><span class="line">03-15-22  05:18PM                27446 11479.jpg</span><br><span class="line">03-15-22  05:24PM                24242 11481.jpg</span><br><span class="line">03-15-22  05:29PM                57438 11597.jpg</span><br><span class="line">03-15-22  05:29PM                 3710 13683.jpg</span><br><span class="line">03-15-22  05:29PM                 9836 14716.jpg</span><br><span class="line">03-15-22  05:29PM                47496 15221.jpg</span><br><span class="line">03-15-22  05:29PM                29992 15475.jpg</span><br><span class="line">03-15-22  05:29PM                52790 16238.jpg</span><br><span class="line">03-15-22  05:29PM                52735 16393.jpg</span><br><span class="line">03-15-22  05:29PM                23356 16636.jpg</span><br><span class="line">01-29-23  04:48PM                23425 16637.jpg</span><br><span class="line">04-22-22  09:23AM       &lt;DIR&gt;          aspnet_client</span><br><span class="line">08-02-20  09:41PM       &lt;DIR&gt;          oms-pic</span><br><span class="line">12-30-20  05:40PM       &lt;DIR&gt;          upload</span><br><span class="line">10-15-21  02:28PM       &lt;DIR&gt;          verms</span><br><span class="line">226 Transfer complete.</span><br></pre></td></tr></table></figure>

<h2><span id="rsync命令"><span id="inline-blue">rsync命令 </span></span></h2><p><strong>作用</strong><br>    rsync命令来自于英文词组“remote sync”的缩写，其功能是用于远程数据同步。rsync命令能够基于网络（含局域网和互联网）快速的实现多台主机间的文件同步工作，并与scp或ftp发送完整文件不同，rsync有独立的文件内容差异算法，会在传送前对两个文件进行比较，只传送两者内容间的差异部分，因此速度更快。</p>
<p><strong>选项</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-v	详细模式输出</span><br><span class="line">-z	压缩文件</span><br><span class="line">-o	保留文件原始所有者身份</span><br><span class="line">-g	保留文件原始所有组身份</span><br><span class="line">-p	保留文件原始权限信息</span><br><span class="line">-b	备份目标文件</span><br><span class="line">-r	递归目录文件（传输目录内的子文件）</span><br><span class="line">-d	不递归目录文件（不传输目录内的子文件）</span><br><span class="line">-P	显示进度信息</span><br><span class="line">-q	精简输出模式</span><br><span class="line">-h	显示帮助信息</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看本地同步文件内容</span></span><br><span class="line">[root@lwdCSCDN /]rsync rsync_dir1</span><br><span class="line"><span class="meta">#</span><span class="bash">查看远程同步文件内容</span></span><br><span class="line">[root@lwdCSCDN /]rsync 10.9.216.12:/tmp</span><br><span class="line"><span class="meta">#</span><span class="bash">同步本地文件夹</span></span><br><span class="line">[root@lwdCSCDN /]rsync -r rsync_dir1 rsync_dir2</span><br><span class="line"><span class="meta">#</span><span class="bash">同步远程文件夹</span></span><br><span class="line">[root@lwdCSCDN /]rsync -r rsync_dir1 10.9.216.12:/rsync_dir2</span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux-系统管理</title>
    <url>/Linux/blogs/Linux-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluereboot%E5%91%BD%E4%BB%A4span"><span id="inline-blue">reboot命令</span></a></li>
<li><a href="#span-idinline-bluesleep%E5%91%BD%E4%BB%A4span"><span id="inline-blue">sleep命令</span></a></li>
<li><a href="#span-idinline-bluetop%E5%91%BD%E4%BB%A4span"><span id="inline-blue">top命令</span></a></li>
<li><a href="#span-idinline-bluewho%E5%91%BD%E4%BB%A4span"><span id="inline-blue">who命令</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="reboot命令"><span id="inline-blue">reboot命令</span></span></h2><p><strong>作用</strong><br>重启<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-n ：直接重启，不保存当前资料</span><br><span class="line">-w : 重启过程记录日志</span><br><span class="line">-d ：重启过程不记录日志</span><br><span class="line">-f : 强制重启</span><br><span class="line">-i : 关闭网络服务，然后重启</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN local]# reboot</span><br></pre></td></tr></table></figure>


<h2><span id="sleep命令"><span id="inline-blue">sleep命令</span></span></h2><p><strong>作用</strong><br>延迟当前命令执行<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--help ：帮助信息</span><br><span class="line">--version :版本信息</span><br><span class="line">-number ：时间长度后面可跟单位smhd</span><br><span class="line">-smhd : s秒 m分钟 h小时 d天</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示系统当前时间，休眠10秒钟，再次显示时间</span></span><br><span class="line">[root@lwdCSCDN local]# date;sleep 10s;date</span><br><span class="line">2022年 06月 02日 星期四 17:30:04 CST</span><br><span class="line">2022年 06月 02日 星期四 17:30:14 CST</span><br></pre></td></tr></table></figure>



<h2><span id="top命令"><span id="inline-blue">top命令</span></span></h2><p><strong>作用</strong><br>实时显示系统运行状态<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-d ：改变更新速度</span><br><span class="line">-c ：切换显示模式</span><br><span class="line">-s ：安全模式，不进行交互指令</span><br><span class="line">-i ：不显示任何闲置或僵死进程</span><br><span class="line">-n ：设置显示的次数，完成后退出</span><br><span class="line">-b ：批处理模式，不进行交互时显示</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安全模式下,批量处理每隔4秒输出一次统计结果</span></span><br><span class="line">[root@lwdCSCDN local]# top -d 4 -c -s -i -n 6 -b</span><br><span class="line">top - 17:39:17 up  8:42,  2 users,  load average: 0.06, 0.05, 0.01</span><br><span class="line">Tasks: 305 total,   1 running, 304 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Cpu(s):  0.7%us,  0.2%sy,  0.0%ni, 98.8%id,  0.2%wa,  0.0%hi,  0.0%si,  0.0%st</span><br><span class="line">Mem:  32693060k total, 12640504k used, 20052556k free,   580116k buffers</span><br><span class="line">Swap: 16777208k total,        0k used, 16777208k free,  3290016k cached</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                      </span><br><span class="line">12051 root      20   0 15272 1328  892 R  1.9  0.0   0:00.01 top -d 4 -c -s -i -n 6 -b                                                    </span><br><span class="line"> ***  Delay time Not changed  *** </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="who命令"><span id="inline-blue">who命令</span></span></h2><p><strong>作用</strong><br>查看当前登陆用户信息<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a ：全面信息</span><br><span class="line">-b : 系统启动时间</span><br><span class="line">-d ：已死掉进程</span><br><span class="line">-l : 系统登录进程</span><br><span class="line">-H :  带有列标题打印用户名、终端和时间</span><br><span class="line">-t : 上次锁定时间</span><br><span class="line">-u : 查看已登录用户</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看已登录用户</span></span><br><span class="line">[root@demomdn local]# who -u -H</span><br><span class="line">NAME     LINE         TIME             IDLE          PID COMMENT</span><br><span class="line">root     pts/0        2022-06-08 08:54 08:26       18361 (10.9.212.70)</span><br><span class="line">root     pts/1        2022-06-08 17:05 00:33       22909 (10.9.212.52)</span><br><span class="line">root     pts/2        2022-06-08 15:06   .         21935 (10.9.212.55)</span><br><span class="line"><span class="meta">#</span><span class="bash">查看系统启动时间</span></span><br><span class="line">[root@demomdn local]# who -b</span><br><span class="line">system boot  2022-06-07 09:00</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux-文档编辑</title>
    <url>/Linux/blogs/Linux-%E6%96%87%E6%A1%A3%E7%BC%96%E8%BE%91/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluevim%E5%91%BD%E4%BB%A4span"><span id="inline-blue">vim命令</span></a></li>
<li><a href="#span-idinline-bluehead%E5%91%BD%E4%BB%A4span"><span id="inline-blue">head命令</span></a></li>
<li><a href="#span-idinline-bluerm%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">rm命令 </span></a></li>
<li><a href="#span-idinline-bluecat%E5%91%BD%E4%BB%A4span"><span id="inline-blue">cat命令</span></a></li>
<li><a href="#span-idinline-bluetar%E5%91%BD%E4%BB%A4span"><span id="inline-blue">tar命令</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="vim命令"><span id="inline-blue">vim命令</span></span></h2><p><strong>作用</strong><br>vi命令是unix和类unix系统通用全屏幕文本编辑器，vim是vi的加强版，与vi完全兼容，并添加了很多增强功能。<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">crtl+u: 向文件首翻半屏。</span><br><span class="line">crtl+d: 此文件尾翻半屏。</span><br><span class="line">crtl+f: 向文件首翻一屏。</span><br><span class="line">crtl+b: 向文件尾翻一屏。</span><br><span class="line">ESC:从编辑模式切换到命令模式。</span><br><span class="line">:行号 :光标跳到指定行的行首。</span><br><span class="line">:$ :光标跳到文件尾。</span><br><span class="line">/字符串 :文本查找操作，从光标所在当前位置向文件尾部查找指定的字符串，查找到的字符串高亮显示。</span><br><span class="line">:wq :命令模式下，执行存盘并退出。</span><br><span class="line">:q :命令模式下，执行退出。</span><br><span class="line">:w! :命令模式下，强制执行存盘操作。</span><br><span class="line">:q! :命令模式下，强制执行退出vi命令。</span><br><span class="line">:set number :命令模式下，显示行号。</span><br><span class="line">:set nonumber :命令模式下，不显示行号。</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示行号</span></span><br><span class="line">  1 [20201203] 16:47:12 Begin</span><br><span class="line">  2 [20201203] 16:47:13 Import assetFileTask_0_20201203_010000_3</span><br><span class="line">  3 [20201203] 16:47:16 Import assetFileTask_0_20201203_010020_4</span><br><span class="line">  4 [20201203] 16:47:22 Import assetMapAssetTypeTask_0_20201203_010000_3</span><br><span class="line">  5 [20201203] 16:47:24 Import assetMapAssetTypeTask_0_20201203_010003_4</span><br><span class="line">  6 [20201203] 16:47:26 Import assetOrAssetFileTask_0_20201203_010000_9</span><br><span class="line">  7 [20201203] 16:47:28 Import assetOrAssetFileTask_0_20201203_010040_10</span><br><span class="line">  8 [20201203] 16:47:30 Import assetOrAssetFileTask_0_20201203_010047_11</span><br><span class="line">  9 [20201203] 16:47:32 Import assetOrAssetFileTask_0_20201203_010055_12</span><br><span class="line"> 10 [20201203] 16:47:34 Import assetTask_0_20201203_010000_3</span><br><span class="line"> 11 [20201203] 16:47:38 Import assetTask_0_20201203_010019_4</span><br><span class="line"> 12 [20201203] 16:47:41 Import assetTypeTask_0_20201203_010000_0</span><br><span class="line"> 13 [20201203] 16:47:43 Import cdrTask_0_20201203_020000_15</span><br><span class="line"> 14 [20201203] 16:47:46 Import cdrTask_0_20201203_021042_16</span><br><span class="line"> 15 [20201203] 16:47:52 Import cdrTask_0_20201203_021201_17</span><br><span class="line"> 16 [20201203] 16:47:59 Import cdrTask_0_20201203_021321_18</span><br><span class="line"> 17 [20201203] 16:48:06 Import cdrTask_0_20201203_021441_19</span><br><span class="line"> 18 [20201203] 16:48:14 Import cdrTask_0_20201203_021600_20</span><br><span class="line"> 19 [20201203] 16:48:20 Import channelTask_0_20201203_010000_0</span><br><span class="line"> 20 [20201203] 16:48:22 Import cmsDictTask_0_20201203_010000_0</span><br><span class="line"> 21 [20201203] 16:48:23 Import columnTask_0_20201203_010000_0</span><br><span class="line"> 22 [20201203] 16:48:25 Import orderTask_0_20201203_010000_0</span><br><span class="line"> 23 [20201203] 16:48:27 Import portalOrderInfoTask_0_20201203_010000_0</span><br><span class="line"> 24 [20201203] 16:48:28 Import productColumnTask_0_20201203_010000_0</span><br><span class="line"> 25 [20201203] 16:48:29 Import productResourceTask_0_20201203_010000_0</span><br><span class="line"> 26 [20201203] 16:48:30 Import productSpecMapTask_0_20201203_010000_0</span><br><span class="line"> 27 [20201203] 16:48:32 Import programGuideTask_0_20201203_010000_0</span><br><span class="line"> 28 [20201203] 16:48:33 Import providerTask_0_20201203_010000_0</span><br><span class="line"> 29 [20201203] 16:48:34 Import resColumnTask_0_20201203_010000_0</span><br><span class="line"> 30 [20201203] 16:48:38 Import resourcePkgTask_0_20201203_010000_0</span><br><span class="line"> 31 [20201203] 16:48:41 Import serviceProductInfo_0_20201203_010000_0</span><br><span class="line"> 32 [20201203] 16:48:42 Import serviceResourceInfo_0_20201203_010000_0</span><br><span class="line"> 33 [20201203] 16:48:44 Import userRelationTask_0_20201203_010000_0</span><br><span class="line"> 34 [20201203] 16:48:45 Import userTask_0_20201203_010000_69</span><br><span class="line"> 35 [20201203] 16:48:48 Import userTask_0_20201203_010117_70</span><br><span class="line">:set number   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找columnTask字符串对应的内容。</span></span><br><span class="line">  1 [20201203] 16:47:12 Begin</span><br><span class="line">  2 [20201203] 16:47:13 Import assetFileTask_0_20201203_010000_3</span><br><span class="line">  3 [20201203] 16:47:16 Import assetFileTask_0_20201203_010020_4</span><br><span class="line">  4 [20201203] 16:47:22 Import assetMapAssetTypeTask_0_20201203_010000_3</span><br><span class="line">  5 [20201203] 16:47:24 Import assetMapAssetTypeTask_0_20201203_010003_4</span><br><span class="line">  6 [20201203] 16:47:26 Import assetOrAssetFileTask_0_20201203_010000_9</span><br><span class="line">  7 [20201203] 16:47:28 Import assetOrAssetFileTask_0_20201203_010040_10</span><br><span class="line">  8 [20201203] 16:47:30 Import assetOrAssetFileTask_0_20201203_010047_11</span><br><span class="line">  9 [20201203] 16:47:32 Import assetOrAssetFileTask_0_20201203_010055_12</span><br><span class="line"> 10 [20201203] 16:47:34 Import assetTask_0_20201203_010000_3</span><br><span class="line"> 11 [20201203] 16:47:38 Import assetTask_0_20201203_010019_4</span><br><span class="line"> 12 [20201203] 16:47:41 Import assetTypeTask_0_20201203_010000_0</span><br><span class="line"> 13 [20201203] 16:47:43 Import cdrTask_0_20201203_020000_15</span><br><span class="line"> 14 [20201203] 16:47:46 Import cdrTask_0_20201203_021042_16</span><br><span class="line"> 15 [20201203] 16:47:52 Import cdrTask_0_20201203_021201_17</span><br><span class="line"> 16 [20201203] 16:47:59 Import cdrTask_0_20201203_021321_18</span><br><span class="line"> 17 [20201203] 16:48:06 Import cdrTask_0_20201203_021441_19</span><br><span class="line"> 18 [20201203] 16:48:14 Import cdrTask_0_20201203_021600_20</span><br><span class="line"> 19 [20201203] 16:48:20 Import channelTask_0_20201203_010000_0</span><br><span class="line"> 20 [20201203] 16:48:22 Import cmsDictTask_0_20201203_010000_0</span><br><span class="line"> 21 [20201203] 16:48:23 Import columnTask_0_20201203_010000_0</span><br><span class="line"> 22 [20201203] 16:48:25 Import orderTask_0_20201203_010000_0</span><br><span class="line"> 23 [20201203] 16:48:27 Import portalOrderInfoTask_0_20201203_010000_0</span><br><span class="line"> 24 [20201203] 16:48:28 Import productColumnTask_0_20201203_010000_0</span><br><span class="line"> 25 [20201203] 16:48:29 Import productResourceTask_0_20201203_010000_0</span><br><span class="line"> 26 [20201203] 16:48:30 Import productSpecMapTask_0_20201203_010000_0</span><br><span class="line"> 27 [20201203] 16:48:32 Import programGuideTask_0_20201203_010000_0</span><br><span class="line"> 28 [20201203] 16:48:33 Import providerTask_0_20201203_010000_0</span><br><span class="line"> 29 [20201203] 16:48:34 Import resColumnTask_0_20201203_010000_0</span><br><span class="line"> 30 [20201203] 16:48:38 Import resourcePkgTask_0_20201203_010000_0</span><br><span class="line"> 31 [20201203] 16:48:41 Import serviceProductInfo_0_20201203_010000_0</span><br><span class="line"> 32 [20201203] 16:48:42 Import serviceResourceInfo_0_20201203_010000_0</span><br><span class="line"> 33 [20201203] 16:48:44 Import userRelationTask_0_20201203_010000_0</span><br><span class="line"> 34 [20201203] 16:48:45 Import userTask_0_20201203_010000_69</span><br><span class="line"> 35 [20201203] 16:48:48 Import userTask_0_20201203_010117_70</span><br><span class="line">/columnTask</span><br></pre></td></tr></table></figure>

<h2><span id="head命令"><span id="inline-blue">head命令</span></span></h2><p><strong>作用</strong><br>    显示文件开头内容，默认显示前10行</p>
<p><strong>选项</strong></p>
<p>-n&lt;数字&gt; :指定显示的行数<br>-c&lt;数字&gt; :指定显示的字符数<br>-v :显示文件头部信息<br>-q :不显示文件头部信息</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示my.cnf.bak文件的前3行内容</span></span><br><span class="line">[root@dap mysql]# head -3 my.cnf.bak </span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示100个字符</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For advi[root@dap mysql]<span class="comment"># head -c 100 my.cnf.bak</span></span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-co</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示my.cnf.bak 文件头部信息</span></span><br><span class="line">[root@dap mysql]# head -v my.cnf.bak </span><br><span class="line">==&gt; my.cnf.bak &lt;==</span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span></span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># and set to the amount of RAM for the most important data</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cache <span class="keyword">in</span> MySQL. Start at 70% of total RAM <span class="keyword">for</span> dedicated server, <span class="keyword">else</span> 10%.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> innodb_buffer_pool_size = 128M</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># to turn on a very important data integrity option: logging</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">不显示my.cnf.bak文件头部信息</span></span><br><span class="line">[root@dap mysql]# head -q my.cnf.bak </span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span></span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># and set to the amount of RAM for the most important data</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cache <span class="keyword">in</span> MySQL. Start at 70% of total RAM <span class="keyword">for</span> dedicated server, <span class="keyword">else</span> 10%.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> innodb_buffer_pool_size = 128M</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># to turn on a very important data integrity option: logging</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="rm命令"><span id="inline-blue">rm命令 </span></span></h2><p><strong>作用</strong><br>    删除一个目录下的多个文件或目录，对于链接文件，只删除整个链接文件，而原有文件不变。</p>
<p><strong>选项</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-d 直接把目录的硬链接数删除为0，删除该目录。</span><br><span class="line">-f 强制删除该目录。</span><br><span class="line">-i 删除前先询问是否删除。</span><br><span class="line">-r 递归删除目录下的文件和子目录。</span><br><span class="line">-v 显示详细的删除信息</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 删除b.sh文件</span></span><br><span class="line">[root@demo_mdn script]# rm b.sh</span><br><span class="line">rm：是否删除普通空文件 &quot;b.sh&quot;？y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强制删除b.sh文件</span></span><br><span class="line">[root@demo_mdn script]# rm -f b.sh</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强制递归删除newDir目录，并显示详细信息</span></span><br><span class="line">[root@demo_mdn script]# rm -rfv newDir</span><br><span class="line">已删除&quot;newDir/1.txt&quot;</span><br><span class="line">已删除&quot;newDir/1.txt~&quot;</span><br><span class="line">已删除目录：&quot;newDir/oldDir&quot;</span><br><span class="line">已删除目录：&quot;newDir&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="cat命令"><span id="inline-blue">cat命令</span></span></h2><p><strong><em>作用</em></strong><br>    合并文件内容并显示</p>
<p><strong><em>选项</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-A //显示特殊字符	</span><br><span class="line">-n //对所有输出的行编号</span><br></pre></td></tr></table></figure>

<p><strong><em>实例</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示特殊字符</span></span><br><span class="line">[root@demo_mdn user]# cat -A jdbc1.properties</span><br><span class="line">dbSrc=mysql$</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">对输出行编号</span></span><br><span class="line">[root@demo_mdn user]# cat -n jdbc2.properties </span><br><span class="line"> 1	dbUrl=jdbc:mysql://10.9.216.14:3306/test?useUnicode=true&amp;amp;characterEncoding=UTF-8</span><br><span class="line"> 2	dbUserName=root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">合并jdbc1.properties、jdbc2.properties 文件内容到jdbc.properties并输出</span></span><br><span class="line">[root@demo_mdn user]# cat jdbc1.properties jdbc2.properties &gt;jdbc.properties</span><br><span class="line">dbSrc=mysql</span><br><span class="line">dbUrl=jdbc:mysql://10.9.216.14:3306/test?useUnicode=true&amp;amp;characterEncoding=UTF-8</span><br><span class="line">dbUserName=root</span><br></pre></td></tr></table></figure>

<h2><span id="tar命令"><span id="inline-blue">tar命令</span></span></h2><p>选项</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">运行tar时必须要有下列参数中的至少一个才可运行：</span><br><span class="line">-A | --catenate | --concatenate 将一存档与已有的存档合并</span><br><span class="line">-c | --create 建立新的存档</span><br><span class="line">-d | --diff, --compare 比较存档与当前文件的不同之处</span><br><span class="line">--delete 从存档中删除</span><br><span class="line">-r | --append 附加到存档结尾</span><br><span class="line">-t | --list 列出存档中文件的目录</span><br><span class="line">-u |--update 仅将较新的文件附加到存档中</span><br><span class="line">-x | --extract | --get 从存档展开文件</span><br><span class="line">-z | --gzip | --ungzip 用gzip对存档压缩或解压</span><br><span class="line">-f | --file [HOSTNAME:]F 指定存档或设备（缺省为 /dev/rmt0）</span><br><span class="line">-x | --extract | --get 从存档展开文件</span><br><span class="line">-v | --verbose 详细显示处理的文件</span><br></pre></td></tr></table></figure>
<p><strong><em>压缩</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">命令格式：tar -czf  压缩文件名.tar.gz  被压缩文件名</span><br><span class="line"></span><br><span class="line">可先切换到当前目录下。压缩文件名和被压缩文件名都可加入路径。</span><br><span class="line"></span><br><span class="line">示例：tar -czf etl.V300R002B042.tar.gz etl.V300R002B042/</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux-文件管理</title>
    <url>/Linux/blogs/Linux-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluestrings%E5%91%BD%E4%BB%A4span"><span id="inline-blue">strings命令</span></a></li>
<li><a href="#span-idinline-blueunlink%E5%91%BD%E4%BB%A4span"><span id="inline-blue">unlink命令</span></a></li>
<li><a href="#span-idinline-bluechown%E5%91%BD%E4%BB%A4span"><span id="inline-blue">chown命令</span></a></li>
<li><a href="#span-idinline-bluestat%E5%91%BD%E4%BB%A4span"><span id="inline-blue">stat命令</span></a></li>
<li><a href="#span-idinline-bluewhich%E5%91%BD%E4%BB%A4"><span id="inline-blue">which命令</span></a></li>
<li><a href="#span-idinline-bluefile%E5%91%BD%E4%BB%A4span"><span id="inline-blue">file命令</span></a></li>
<li><a href="#span-idinline-bluewhereis%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">whereis命令 </span></a></li>
<li><a href="#span-idinline-bluelocate%E5%91%BD%E4%BB%A4span"><span id="inline-blue">locate命令</span></a></li>
<li><a href="#span-idinline-blueln%E5%91%BD%E4%BB%A4span"><span id="inline-blue">ln命令</span></a></li>
<li><a href="#span-idinline-bluetouch%E5%91%BD%E4%BB%A4"><span id="inline-blue">touch命令</span></a></li>
<li><a href="#span-idinline-bluemv%E5%91%BD%E4%BB%A4span"><span id="inline-blue">mv命令</span></a></li>
<li><a href="#span-idinline-bluepwd%E5%91%BD%E4%BB%A4span"><span id="inline-blue">pwd命令</span></a></li>
<li><a href="#span-idinline-bluemkdir%E5%91%BD%E4%BB%A4span"><span id="inline-blue">mkdir命令</span></a></li>
<li><a href="#span-idinline-bluels%E5%91%BD%E4%BB%A4span"><span id="inline-blue">ls命令</span></a></li>
<li><a href="#span-idinline-bluesz%E5%91%BD%E4%BB%A4span"><span id="inline-blue">sz命令</span></a></li>
<li><a href="#span-idinline-bluerz%E5%91%BD%E4%BB%A4span"><span id="inline-blue">rz命令</span></a></li>
<li><a href="#span-idinline-bluetrue%E5%91%BD%E4%BB%A4span"><span id="inline-blue">true命令</span></a></li>
<li><a href="#span-idinline-bluetree%E5%91%BD%E4%BB%A4span"><span id="inline-blue">tree命令</span></a></li>
<li><a href="#span-idinline-bluelast%E5%91%BD%E4%BB%A4span"><span id="inline-blue">last命令</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="strings命令"><span id="inline-blue">strings命令</span></span></h2><p><strong>作用</strong><br>在对象或二进制文件中查找可打印的字符串，字符可以是由4个或者更多字符组成的字符序列，以换行符或空字符结束。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a 扫描整个文件内容而不是仅仅文件初始化和装载段。</span><br><span class="line">-f 显示查找到的字符串之前先打印文件名称。</span><br><span class="line">-n number 查找长度为number及以上的字符串序列。</span><br><span class="line">-t --radix=&#123;o,d,x&#125; ：输出字符的位置，基于八进制，十进制或者十六进制</span><br><span class="line">-o 等价于--radix=o</span><br><span class="line">-T --target= ：指定二进制文件格式</span><br><span class="line">-e --encoding=&#123;s,S,b,l,B,L&#125; ：选择字符大小和排列顺序:s = 7-bit, S = 8-bit, &#123;b,l&#125; = 16-bit, &#123;B,L&#125; = 32-bit</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">以10进制为偏移量，查找profile文件中长度大于60的字符串,输出字符所在文件名称。</span></span><br><span class="line">[root@demo_mdn ~]# strings -f -t o -60 /etc/profile</span><br><span class="line">/etc/profile:      20 # System wide environment and startup programs, for login setup</span><br><span class="line">/etc/profile:     173 # It&#x27;s NOT a good idea to change this file unless you know what you</span><br><span class="line">/etc/profile:     277 # are doing. It&#x27;s much better to create a custom.sh shell script in</span><br><span class="line">/etc/profile:     403 # /etc/profile.d/ to make custom changes to your environment, as this</span><br><span class="line">/etc/profile:    3100 # By default, we want umask to get set. This sets it for login shell</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">以16进制为偏移量，查找当前目录下jpg文件中长度大于50的字符串，输出所在文件名称。</span></span><br><span class="line">[root@demo_mdn user]# strings -f -t o -n 50 *.jpg</span><br><span class="line">20190605165252_529.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165255_799.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_156.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_210.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_391.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_561.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_354.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_551.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_574.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_668.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_74.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171506_75.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br></pre></td></tr></table></figure>


<h2><span id="unlink命令"><span id="inline-blue">unlink命令</span></span></h2><p><strong>作用</strong><br>删除指定的文件，功能和rm命令一样。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--version </span><br><span class="line">--help</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">a.txt  elasticsearch-2738171260560954631  erm_gd  jna-3246  mysql.sock  parentDir  pulse-24KvvDfOHjjf  report  v8-compile-cache-0</span><br><span class="line">[root@lwdCSCDN tmp]# unlink a.txt </span><br><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">elasticsearch-2738171260560954631  erm_gd  jna-3246  mysql.sock  parentDir  pulse-24KvvDfOHjjf  report  v8-compile-cache-0</span><br></pre></td></tr></table></figure>


<h2><span id="chown命令"><span id="inline-blue">chown命令</span></span></h2><p><strong>作用</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chown命令用于改变一个文件或目录的所有者或用户组，用户可以是用户名或者用户ID，群组可以是群组名或者群组ID，文件名可以是空格分割的文件列表，也可以是通配符描述的集合，只有文件主和超级用户才可以使用该命令。</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong></p>
<p>-c:与-v命令相似，仅显示变更的内容。<br>-f:不显示错误信息。<br>-h:只对符号链接文件做修改，不改变其对应的原始文件。<br>-R:递归处理，将命令目录下的所有文件和子目录一并处理。<br>-v:显示命令执行详细过程。<br>–reference=&lt;参考文件或目录&gt;：把指定文件或目录的拥有者与所属群组全部设成和参考文件或目录的拥有者与所属群组相同。<br>–help:在线帮助。<br>–version:显示版本信息。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将erm_gd目录下的文件和目录所属者更改为report_cd,群组修改为report_cd</span></span><br><span class="line">[root@lwdCSCDN tmp]# chown -R report_cd:report_cd erm_gd</span><br><span class="line">[root@lwdCSCDN tmp]# cd erm_gd/</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN erm_gd]# ll</span><br><span class="line">总用量 210608</span><br><span class="line">-rw-r--r-- 1 report_cd report_cd 214757130 1月   5 17:47 dg_erm_mysql.sql</span><br><span class="line">-rw-r--r-- 1 report_cd report_cd    681075 1月   5 17:47 dg_global.sql</span><br></pre></td></tr></table></figure>


<h2><span id="stat命令"><span id="inline-blue">stat命令</span></span></h2><p><strong>作用</strong><br>    显示文件状态信息，stat命令的输出信息比ls命令的输出信息要更详细。</p>
<p><strong>选项</strong></p>
<p>-L : 支持符号链接<br>-t : 以简洁方式显示输出信息。<br>-f : 显示文件系统状态而不是文件状态。<br>–version : 显示命令版本。<br>–help : 显示命令帮助信息。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示文件状态</span></span><br><span class="line">[root@lwdCSCDN log1]# stat ETL.log</span><br><span class="line">  File: &quot;ETL.log&quot;</span><br><span class="line">  Size: 7341608   	Blocks: 14352      IO Block: 4096   普通文件</span><br><span class="line">Device: 804h/2052d	Inode: 10495794    Links: 3</span><br><span class="line">Access: (0777/-rwxrwxrwx)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2020-12-28 11:06:47.226634512 +0800</span><br><span class="line">Modify: 2020-12-18 14:47:43.471294256 +0800</span><br><span class="line">Change: 2020-12-18 14:55:58.935352996 +0800</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示文件系统状态</span></span><br><span class="line">[root@lwdCSCDN log1]# stat -f ETL.log</span><br><span class="line">  File: &quot;ETL.log&quot;</span><br><span class="line">    ID: abb37a7c2e029036 Namelen: 255     Type: ext2/ext3</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 45356622   Free: 29156603   Available: 26852603</span><br><span class="line">Inodes: Total: 11526144   Free: 10551557</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">以简洁方式展现文件状态信息</span></span><br><span class="line">[root@lwdCSCDN log1]# stat -t ETL.log</span><br><span class="line">ETL.log 7341608 14352 81ff 0 0 804 10495794 3 0 0 1609124807 1608274063 1608274558 4096</span><br></pre></td></tr></table></figure>


<h2><span id="which命令"><span id="inline-blue">which命令</span></span></h2><p><strong>作用</strong><br>查找命令所在的绝对路径（包含命令别名）。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--version, -[vV] Print version and exit successfully.</span><br><span class="line">--help,          Print this help and exit successfully.</span><br><span class="line">--skip-dot       Skip directories in PATH that start with a dot.</span><br><span class="line">--skip-tilde     Skip directories in PATH that start with a tilde.</span><br><span class="line">--show-dot       Don&#x27;t expand a dot to current directory in output.</span><br><span class="line">--show-tilde     Output a tilde for HOME directory for non-root.</span><br><span class="line">--tty-only       Stop processing options on the right if not on tty.</span><br><span class="line">--all, -a        Print all matches in PATH, not just the first</span><br><span class="line">--read-alias, -i Read list of aliases from stdin.</span><br><span class="line">--skip-alias     Ignore option --read-alias; don&#x27;t read stdin.</span><br><span class="line">--read-functions Read shell functions from stdin.</span><br><span class="line">--skip-functions Ignore option --read-functions; don&#x27;t read stdin.</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查找ls命令的绝对路径</span></span><br><span class="line">[root@demo_mdn user]# which ls</span><br><span class="line">alias ls=&#x27;ls --color=auto&#x27;</span><br><span class="line">	/bin/ls</span><br></pre></td></tr></table></figure>


<h2><span id="file命令"><span id="inline-blue">file命令</span></span></h2><p><strong>作用</strong><br>    file命令用于探测文件类型，file命令分为文件系统、魔法幻数检查及语言检查3个过程.<br><strong>选项</strong></p>
<p>-b : 列出结果时，不显示文件名称。<br>-i : 探测文件结果以MIME字符串展示。<br>-L : 检测链接文件，并给出链接原始文件的类型。<br>-v : file命令版本信息。<br>-z : 尝试探测压缩类型文件。<br>-m : 指定魔法幻数文件。<br>-f : 指定文件，如果文件内容中有其他文件，依序辨识这些文件，输出格式为每列一个文件。<br>-c : 显示命令执行的详细过程。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示文件类型</span></span><br><span class="line">[root@lwdCSCDN log1]# file ETL.log</span><br><span class="line">ETL.log: ASCII English text, with very long lines</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不显示文件名称</span></span><br><span class="line">[root@lwdCSCDN log1]# file -b ETL.log</span><br><span class="line">ASCII English text, with very long lines</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">以MIME格式展现探测结果</span></span><br><span class="line">[root@lwdCSCDN log1]# file -b -i record.ini </span><br><span class="line">text/plain; charset=us-ascii</span><br></pre></td></tr></table></figure>


<h2><span id="whereis命令"><span id="inline-blue">whereis命令 </span></span></h2><p><strong>作用</strong><br>    定位二进制程序文件、man手册、源代码文件所在位置，搜索效率比find命令高，因为查找的是数据库索引文件，和locate命令同理，但索引内容不是实时更新。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-b 只搜索二进制文件</span><br><span class="line">-B 指定搜索的二进制文件所在的目录</span><br><span class="line">-m 只搜索man帮助文件</span><br><span class="line">-M 指定man文件所在的目录</span><br><span class="line">-f 定义搜索范围</span><br><span class="line">-s 只搜索源代码文件</span><br><span class="line">-S 指定搜索源代码文件所在的目录</span><br><span class="line">（-BMS 必须和-f 选项同时使用）</span><br></pre></td></tr></table></figure>
<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">搜索ls命令相关文件所在的位置</span></span><br><span class="line">[root@demo_mdn /]# whereis ls</span><br><span class="line">ls: /bin/ls /usr/share/man/man1/ls.1.gz /usr/share/man/man1p/ls.1p.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">只搜索指定路径下ls相关二进制文件所在位置,只搜索当前指定路径不进行递归搜索</span></span><br><span class="line">[root@demo_mdn /]# whereis -b -B /bin -f ls</span><br><span class="line">ls: /bin/ls</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">只搜索指定路径下的ls相关帮助文件,只搜索当前指定路径不进行递归搜索</span></span><br><span class="line">[root@demo_mdn /]# whereis -m -M /usr/share/man/man1 -f ls</span><br><span class="line">ls: /usr/share/man/man1/ls.1.gz</span><br></pre></td></tr></table></figure>


<h2><span id="locate命令"><span id="inline-blue">locate命令</span></span></h2><p><strong>作用</strong><br>    查找文件或目录所在位置（locate 命令实际是查找的/var/lib/mlocate/mlocate.db 文件，所以查找速度比find命令快的多）</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-V 显示版本信息</span><br><span class="line">-d dir 指定搜索的数据库文件所在位置</span><br></pre></td></tr></table></figure>

<p> <strong>实例</strong><br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash">指定mlocate.db 文件目录，查找portalOrderInfoTask_0_20201110_010000_0 文件所在位置</span></span><br><span class="line"> [root@demo_mdn mlocate]# locate -d /var/lib/mlocate/mlocate.db portalOrderInfoTask_0_20201110_010000_0</span><br><span class="line"> /home/report_cd/dhm/portalOrderInfoTask/2020/11/10/portalOrderInfoTask_0_20201110_010000_0</span><br><span class="line"></span><br><span class="line"><span class="meta"> #</span><span class="bash">显示locate 命令版本信息</span></span><br><span class="line"> [root@demo_mdn mlocate]# locate -V</span><br><span class="line">mlocate 0.22.2</span><br><span class="line">Copyright (C) 2007 Red Hat, Inc. All rights reserved.</span><br><span class="line">This software is distributed under the GPL v.2.</span><br><span class="line"></span><br><span class="line">This program is provided with NO WARRANTY, to the extent permitted by law.</span><br></pre></td></tr></table></figure></p>
<h2><span id="ln命令"><span id="inline-blue">ln命令</span></span></h2><p><strong>作用</strong><br>    为指定文件创建链接文件，链接类型分为硬链接和符号链接，默认是硬链接，如果要添加符号链接需要加上-s 选项。<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-b或--backup：删除，覆盖目标文件之前的备份；</span><br><span class="line">-d或-F或——directory：建立目录的硬连接；</span><br><span class="line">-f或——force：强行建立文件或目录的连接，不论文件或目录是否存在；</span><br><span class="line">-i或——interactive：覆盖既有文件之前先询问用户；</span><br><span class="line">-n或--no-dereference：把符号连接的目的目录视为一般文件；</span><br><span class="line">-s或——symbolic：对源文件建立符号连接，而非硬连接；</span><br><span class="line">-S&lt;字尾备份字符串&gt;或--suffix=&lt;字尾备份字符串&gt;：用&quot;-b&quot;参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，预设的备份字符串是符号“~”，用户可通过“-S”参数来改变它；</span><br><span class="line">-v或——verbose：显示指令执行过程；</span><br><span class="line">-V&lt;备份方式&gt;或--version-control=&lt;备份方式&gt;：用“-b”参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，这个字符串不仅可用“-S”参数变更，当使用“-V”参数&lt;备份方式&gt;指定不同备份方式时，也会产生不同字尾的备份字符串；</span><br><span class="line">--help：在线帮助；</span><br><span class="line">--version：显示版本信息。</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 给文件建立软链接</span></span><br><span class="line">[root@lwdCSCDN tmp]# ln -s readme.txt  readme.log</span><br><span class="line">[root@lwdCSCDN tmp]# ll</span><br><span class="line">总用量 292</span><br><span class="line">drwx------  2 elasticsearch elasticsearch   4096 11月 19 10:02 elasticsearch-2738171260560954631</span><br><span class="line">srwxrwxrwx  1 mysql         mysql              0 12月 23 2019 mysql.sock</span><br><span class="line">-rw-r--r--  1 root          root              64 12月 16 16:00 patch.sql</span><br><span class="line">drwx------. 2 root          root            4096 10月 19 2017 pulse-24KvvDfOHjjf</span><br><span class="line">lrwxrwxrwx  1 root          root              10 12月 16 18:00 readme.log -&gt; readme.txt</span><br><span class="line">-rw-r--r--  1 root          root             744 12月 16 16:00 readme.txt</span><br><span class="line">-rw-r--r--  1 root          root          133889 12月 10 12:22 scs1.sql</span><br><span class="line">drwxr-xr-x  4 root          root            4096 12月 16 16:00 sql</span><br><span class="line">-rw-rw----  1 mysql         mysql           8602 12月 16 17:58 #sqla5f_879_0.frm</span><br><span class="line">-rw-rw----  1 mysql         mysql         114688 12月 16 17:58 #sqla5f_879_0.ibd</span><br><span class="line">-rw-r--r--  1 root          root              98 12月 16 16:00 update.sql</span><br><span class="line">drwxr-xr-x  3 root          root            4096 1月  21 2020 v8-compile-cache-0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给文件建立硬链接</span></span><br><span class="line">[root@lwdCSCDN tmp]# ln  readme.txt log.txt</span><br><span class="line">[root@lwdCSCDN tmp]# ll</span><br><span class="line">总用量 611180</span><br><span class="line">drwx------  2 elasticsearch elasticsearch      4096 11月 19 10:02 elasticsearch-2738171260560954631</span><br><span class="line">-rw-r--r--  2 root          root                744 12月 16 16:00 log.txt</span><br><span class="line">srwxrwxrwx  1 mysql         mysql                 0 12月 23 2019 mysql.sock</span><br><span class="line">-rw-r--r--  1 root          root                 64 12月 16 16:00 patch.sql</span><br><span class="line">drwx------. 2 root          root               4096 10月 19 2017 pulse-24KvvDfOHjjf</span><br><span class="line">lrwxrwxrwx  1 root          root                 10 12月 16 18:00 readme.log -&gt; readme.txt</span><br><span class="line">-rw-r--r--  2 root          root                744 12月 16 16:00 readme.txt</span><br><span class="line">-rw-r--r--  1 root          root             133889 12月 10 12:22 scs1.sql</span><br><span class="line">drwxr-xr-x  4 root          root               4096 12月 16 16:00 sql</span><br><span class="line">-rw-rw----  1 mysql         mysql          32473128 12月 16 18:04 #sql_a5f_0.MYD</span><br><span class="line">-rw-rw----  1 mysql         mysql              1024 12月 16 18:04 #sql_a5f_0.MYI</span><br><span class="line">-rw-rw----  1 mysql         mysql         592436800 12月 16 18:04 #sql_a5f_1.MYD</span><br><span class="line">-rw-rw----  1 mysql         mysql              1024 12月 16 18:04 #sql_a5f_1.MYI</span><br><span class="line">-rw-rw----  1 mysql         mysql              8602 12月 16 17:58 #sqla5f_879_0.frm</span><br><span class="line">-rw-rw----  1 mysql         mysql            114688 12月 16 17:58 #sqla5f_879_0.ibd</span><br><span class="line">-rw-r--r--  1 root          root                 98 12月 16 16:00 update.sql</span><br><span class="line">drwxr-xr-x  3 root          root               4096 1月  21 2020 v8-compile-cache-0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 建立硬链接前询问用户是否覆盖已有链接，并创建备份</span></span><br><span class="line">[root@lwdCSCDN etl]# ln -b -i logs/ETL.log log/a.log </span><br><span class="line">ln：是否替换&quot;log/a.log&quot;？ y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成的备份文件，文件后缀默认为~</span></span><br><span class="line">[root@lwdCSCDN log]# ls</span><br><span class="line">a.log  a.log~</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 为logs目录下的record.ini文件在<span class="built_in">log</span>目录下建立record.ini文件硬链接 强制执行</span></span><br><span class="line">[root@lwdCSCDN etl]# ln -f -d  logs/record.ini log1/record.ini</span><br><span class="line">[root@lwdCSCDN etl]# ls</span><br><span class="line">common  config  log  log1  logs  script  tmp</span><br><span class="line">[root@lwdCSCDN etl]# cd log1</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN log1]# ll</span><br><span class="line">总用量 7188</span><br><span class="line">-rwxrwxrwx 3 root root 7341608 12月 18 14:47 ETL.log</span><br><span class="line">-rwxrwxrwx 2 root root    8505 12月 18 14:23 record.ini</span><br></pre></td></tr></table></figure>

<h2><span id="touch命令"><span id="inline-blue">touch命令</span></span></h2><p><strong>作用</strong><br>更改已存在文件的时间戳为当前时间戳，或创建新的文件<br><strong>选项</strong><br>-a :只变更访问时间<br>-m :只变更修改时间<br>-c :不创建新的文件<br>-r :更新指定文件或目录下的所有文件的时间戳。<br>-d :指定更新的时间戳字符串<br>-t :指定时间戳格式，MMDDhhmm<br><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建新的文件</span></span><br><span class="line">[root@lwdCSCDN bin]# touch b.txt</span><br><span class="line">[root@lwdCSCDN bin]# ll</span><br><span class="line">总用量 3080</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:53 a.txt</span><br><span class="line">drwxr-xr-x 4 root root    4096 12月 21 14:40 bi_common</span><br><span class="line">-rw-r--r-- 1 root root   32279 10月  6 2016 bootstrap.jar</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:58 b.txt</span><br><span class="line">-rw-r--r-- 1 root root   15026 10月  6 2016 catalina.bat</span><br><span class="line">-rwxr-xr-x 1 root root   22443 10月  6 2016 catalina.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d指定更新的时间戳</span></span><br><span class="line">[root@lwdCSCDN bin]# touch -d 2020-12-21 b.txt</span><br><span class="line">[root@lwdCSCDN bin]# ll</span><br><span class="line">总用量 3084</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:02 12211621</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:00 2020-12-21</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:53 a.txt</span><br><span class="line">drwxr-xr-x 4 root root    4096 12月 21 14:40 bi_common</span><br><span class="line">-rw-r--r-- 1 root root   32279 10月  6 2016 bootstrap.jar</span><br><span class="line">-rw-r--r-- 1 root root       5 12月 21 00:00 b.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -t指定更新时间</span></span><br><span class="line">[root@lwdCSCDN bin]# touch -t 12211630 b.txt</span><br><span class="line">[root@lwdCSCDN bin]# ll</span><br><span class="line">总用量 3084</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:02 12211621</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:00 2020-12-21</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:53 a.txt</span><br><span class="line">drwxr-xr-x 4 root root    4096 12月 21 14:40 bi_common</span><br><span class="line">-rw-r--r-- 1 root root   32279 10月  6 2016 bootstrap.jar</span><br><span class="line">-rw-r--r-- 1 root root       5 12月 21 16:30 b.txt</span><br></pre></td></tr></table></figure>


<h2><span id="mv命令"><span id="inline-blue">mv命令</span></span></h2><p><strong>作用</strong><br>    移动文件或将文件改名</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-b 为每个已存在的目标文件创建备份</span><br><span class="line">-f 覆盖前不询问</span><br><span class="line">-i 覆盖前询问</span><br><span class="line">-u 只更新源文件时间戳比目标文件时间戳新的文件或者目标文件不存在才覆盖更新</span><br><span class="line">-v 显示详细进行的步骤</span><br></pre></td></tr></table></figure>
<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将a.sh更名为new.sh</span></span><br><span class="line">[root@demo_mdn script]# mv a.sh new.sh</span><br><span class="line">[root@demo_mdn script]# ll</span><br><span class="line">总用量 68</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 b.sh</span><br><span class="line">-rw-r--r-- 1 root root   112 12月 10 16:12 etlD.sh</span><br><span class="line">-rw-r--r-- 1 root root   246 12月 10 16:12 etlP.sh</span><br><span class="line">-rw-r--r-- 1 root root 34622 12月 10 16:12 etl.sh</span><br><span class="line">-rw-r--r-- 1 root root    78 12月 10 16:12 etlS.sh</span><br><span class="line">-rw-r--r-- 1 root root   513 12月 10 16:12 isFileExists.sh</span><br><span class="line">-rw-r--r-- 1 root root   366 12月 10 16:12 mysqld_kill_sleep.sh</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 new.sh</span><br><span class="line">-rw-r--r-- 1 root root    94 12月 10 16:12 reportSource.sh</span><br><span class="line">-rw-r--r-- 1 root root   642 12月 10 16:12 stat.sh</span><br><span class="line">-rw-r--r-- 1 root root   157 12月 10 16:12 stop.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将oldDir目录移动到newDir目录</span></span><br><span class="line">[root@demo_mdn script]# mv oldDir/ newDir/</span><br><span class="line">[root@demo_mdn script]# ll</span><br><span class="line">总用量 72</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 b.sh</span><br><span class="line">-rw-r--r-- 1 root root   112 12月 10 16:12 etlD.sh</span><br><span class="line">-rw-r--r-- 1 root root   246 12月 10 16:12 etlP.sh</span><br><span class="line">-rw-r--r-- 1 root root 34622 12月 10 16:12 etl.sh</span><br><span class="line">-rw-r--r-- 1 root root    78 12月 10 16:12 etlS.sh</span><br><span class="line">-rw-r--r-- 1 root root   513 12月 10 16:12 isFileExists.sh</span><br><span class="line">-rw-r--r-- 1 root root   366 12月 10 16:12 mysqld_kill_sleep.sh</span><br><span class="line">drwxr-xr-x 3 root root  4096 12月 10 16:37 newDir</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 new.sh</span><br><span class="line">-rw-r--r-- 1 root root    94 12月 10 16:12 reportSource.sh</span><br><span class="line">-rw-r--r-- 1 root root   642 12月 10 16:12 stat.sh</span><br><span class="line">-rw-r--r-- 1 root root   157 12月 10 16:12 stop.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印文件移动的详细信息</span></span><br><span class="line">[root@demo_mdn script]# mv -v *.sh newDir/</span><br><span class="line">&quot;b.sh&quot; -&gt; &quot;newDir/b.sh&quot;</span><br><span class="line">&quot;etlD.sh&quot; -&gt; &quot;newDir/etlD.sh&quot;</span><br><span class="line">&quot;etlP.sh&quot; -&gt; &quot;newDir/etlP.sh&quot;</span><br><span class="line">&quot;etl.sh&quot; -&gt; &quot;newDir/etl.sh&quot;</span><br><span class="line">&quot;etlS.sh&quot; -&gt; &quot;newDir/etlS.sh&quot;</span><br><span class="line">&quot;isFileExists.sh&quot; -&gt; &quot;newDir/isFileExists.sh&quot;</span><br><span class="line">&quot;mysqld_kill_sleep.sh&quot; -&gt; &quot;newDir/mysqld_kill_sleep.sh&quot;</span><br><span class="line">&quot;new.sh&quot; -&gt; &quot;newDir/new.sh&quot;</span><br><span class="line">&quot;reportSource.sh&quot; -&gt; &quot;newDir/reportSource.sh&quot;</span><br><span class="line">&quot;stat.sh&quot; -&gt; &quot;newDir/stat.sh&quot;</span><br><span class="line">&quot;stop.sh&quot; -&gt; &quot;newDir/stop.sh&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -i 交互模式 确认是否覆盖同名文件</span></span><br><span class="line">[root@demo_mdn script]# mv -i  new.sh newDir</span><br><span class="line">mv：是否覆盖&quot;newDir/new.sh&quot;？ y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -f 强制覆盖，不进行提示</span></span><br><span class="line">[root@demo_mdn script]# mv -f  new.sh newDir</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不覆盖同名文件，new.sh在newDir目录已存在，没有覆盖</span></span><br><span class="line">[root@demo_mdn script]# mv -nv *.sh newDir</span><br><span class="line">&quot;b.sh&quot; -&gt; &quot;newDir/b.sh&quot;</span><br><span class="line">&quot;etlD.sh&quot; -&gt; &quot;newDir/etlD.sh&quot;</span><br><span class="line">&quot;etlP.sh&quot; -&gt; &quot;newDir/etlP.sh&quot;</span><br><span class="line">&quot;etl.sh&quot; -&gt; &quot;newDir/etl.sh&quot;</span><br><span class="line">&quot;etlS.sh&quot; -&gt; &quot;newDir/etlS.sh&quot;</span><br><span class="line">&quot;isFileExists.sh&quot; -&gt; &quot;newDir/isFileExists.sh&quot;</span><br><span class="line">&quot;mysqld_kill_sleep.sh&quot; -&gt; &quot;newDir/mysqld_kill_sleep.sh&quot;</span><br><span class="line">&quot;reportSource.sh&quot; -&gt; &quot;newDir/reportSource.sh&quot;</span><br><span class="line">&quot;stat.sh&quot; -&gt; &quot;newDir/stat.sh&quot;</span><br><span class="line">&quot;stop.sh&quot; -&gt; &quot;newDir/stop.sh&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -u 只覆盖源文件比目标文件时间戳新的文件, newDir目录已经存在1.txt文件且时间戳晚于源文件，所以没有操作</span></span><br><span class="line">[root@demo_mdn script]# mv -uv *.txt newDir</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -b 对目标文件进行备份，目标目录生成1.txt~文件备份</span></span><br><span class="line">[root@demo_mdn script]# mv -bv *.txt newDir</span><br><span class="line">mv：是否覆盖&quot;newDir/1.txt&quot;？ y</span><br><span class="line">&quot;1.txt&quot; -&gt; &quot;newDir/1.txt&quot; (备份：&quot;newDir/1.txt~&quot;)</span><br><span class="line">[root@demo_mdn newDir]# ls</span><br><span class="line">1.txt  1.txt~  oldDir</span><br></pre></td></tr></table></figure>




<h2><span id="pwd命令"><span id="inline-blue">pwd命令</span></span></h2><p><strong>作用</strong><br>    以绝对路径显示当前用户的所在目录<br><strong>选项</strong><br>-L :打印逻辑上的工作目录<br>-P :打印物理上的工作目录<br><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示当前工作目录</span></span><br><span class="line">[root@lwdCSCDN bin]# pwd</span><br><span class="line">/usr/local/BI/hrb_BI/v300r002b210/apache-tomcat-8.0.38/bin</span><br></pre></td></tr></table></figure>


<h2><span id="mkdir命令"><span id="inline-blue">mkdir命令</span></span></h2><p><strong>作用</strong><br>mkdir用来创建dirname指定的目录。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-Z：设置安全上下文，当使用SELinux时有效；</span><br><span class="line">-m&lt;目标属性&gt;或--mode&lt;目标属性&gt;建立目录的同时设置目录的权限；</span><br><span class="line">-p或--parents 若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录；</span><br><span class="line">--version 显示版本信息。</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 不指定目录的情况下，默认当前目录</span></span><br><span class="line">[root@lwdCSCDN tmp]# mkdir report</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 父级目录不存在，创建多级目录报错</span></span><br><span class="line">[root@lwdCSCDN tmp]# mkdir ./parentDir/newDir</span><br><span class="line">mkdir: 无法创建目录&quot;./parentDir/newDir&quot;: 没有那个文件或目录</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定-p选项，创建多级目录</span></span><br><span class="line">[root@lwdCSCDN tmp]# mkdir -p ./parentDir/newDir</span><br><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">elasticsearch-2738171260560954631  erm_gd  jna-3246  mysql.sock  parentDir  pulse-24KvvDfOHjjf  report  v8-compile-cache-0</span><br></pre></td></tr></table></figure>


<h2><span id="ls命令"><span id="inline-blue">ls命令</span></span></h2><p><strong>作用</strong><br>显示目标文件列表</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a：显示所有文件和目录（ls内定将档案名或目录名称为“.”的视为影藏，不会列出）；</span><br><span class="line">-A：显示除影藏文件“.”和“..”以外的所有文件列表；</span><br><span class="line">-C：多列显示输出结果。这是默认选项；</span><br><span class="line">-l：与“-C”选项功能相反，所有输出信息用单列格式输出，不输出为多列；</span><br><span class="line">-F：在每个输出项后追加文件的类型标识符，具体含义：“*”表示具有可执行权限的普通文件，“/”表示目录，“@”表示符号链接，“|”表示命令管道FIFO，“=”表示sockets套接字。当文件为普通文件时，不输出任何标识符；</span><br><span class="line">-b：将文件中的不可输出的字符以反斜线“”加字符编码的方式输出；</span><br><span class="line">-c：与“-lt”选项连用时，按照文件状态时间排序输出目录内容，排序的依据是文件的索引节点中的ctime字段。与“-l”选项连用时，则排序的一句是文件的状态改变时间；</span><br><span class="line">-d：仅显示目录名，而不显示目录下的内容列表。显示符号链接文件本身，而不显示其所指向的目录列表；</span><br><span class="line">-f：此参数的效果和同时指定“aU”参数相同，并关闭“lst”参数的效果；</span><br><span class="line">-i：显示文件索引节点号（inode）。一个索引节点代表一个文件；</span><br><span class="line">--file-type：与“-F”选项的功能相同，但是不显示“*”；</span><br><span class="line">-k：以KB（千字节）为单位显示文件大小；</span><br><span class="line">-l：以长格式显示目录下的内容列表。输出的信息从左到右依次包括文件名，文件类型、权限模式、硬连接数、所有者、组、文件大小和文件的最后修改时间等；</span><br><span class="line">-m：用“,”号区隔每个文件和目录的名称；</span><br><span class="line">-n：以用户识别码和群组识别码替代其名称；</span><br><span class="line">-r：以文件名反序排列并输出目录内容列表；</span><br><span class="line">-s：显示文件和目录的大小，以区块为单位；</span><br><span class="line">-t：用文件和目录的更改时间排序；</span><br><span class="line">-L：如果遇到性质为符号链接的文件或目录，直接列出该链接所指向的原始文件或目录；</span><br><span class="line">-R：递归处理，将指定目录下的所有文件及子目录一并处理；</span><br><span class="line">--full-time：列出完整的日期与时间；</span><br><span class="line">--color[=WHEN]：使用不同的颜色高亮显示不同类型的。</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示当前目录下的非隐藏文件和目录</span></span><br><span class="line">[root@lwdCSCDN usr]# ls</span><br><span class="line">aaalog  bin  etc  games  include  lib  lib64  libexec  local  lost+found  man  sbin  share  src  tmp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示当前目录下的文件和目录，包含隐藏文件</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -a</span><br><span class="line">.  ..  aaalog  bin  etc  games  include  lib  lib64  libexec  local  lost+found  man  sbin  share  src  tmp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 按文件修改时间倒序显示，单列格式输出展示</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -lt</span><br><span class="line">总用量 320</span><br><span class="line">drwxr-xr-x.  59 root root   4096 12月 16 09:49 local</span><br><span class="line">dr-xr-xr-x. 159 root root 126976 10月 23 10:14 lib64</span><br><span class="line">drwxr-xr-x    3 root root   4096 10月 13 16:55 aaalog</span><br><span class="line">drwxr-xr-x.   2 root root  90112 12月 16 2019 bin</span><br><span class="line">drwxr-xr-x    3 root root   4096 12月  6 2019 man</span><br><span class="line">dr-xr-xr-x.  32 root root   4096 12月  6 2019 lib</span><br><span class="line">dr-xr-xr-x.   2 root root  20480 8月  10 2019 sbin</span><br><span class="line">drwxr-xr-x. 293 root root  12288 8月   9 2019 share</span><br><span class="line">drwxr-xr-x. 143 root root  12288 8月   9 2019 include</span><br><span class="line">drwxr-xr-x.  33 root root  12288 11月 25 2017 libexec</span><br><span class="line">lrwxrwxrwx.   1 root root     10 10月 18 2017 tmp -&gt; ../var/tmp</span><br><span class="line">drwxr-xr-x.   4 root root   4096 10月 18 2017 src</span><br><span class="line">drwx------.   2 root root  16384 10月 18 2017 lost+found</span><br><span class="line">drwxr-xr-x.   2 root root   4096 6月  28 2011 etc</span><br><span class="line">drwxr-xr-x.   2 root root   4096 6月  28 2011 games</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 按照特殊字符对文件进行分类</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -F</span><br><span class="line">aaalog/  bin/  etc/  games/  include/  lib/  lib64/  libexec/  local/  lost+found/  man/  sbin/  share/  src/  tmp@</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">仅显示目录名，不显示目录下的内容列表</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -ld aaalog</span><br><span class="line">drwxr-xr-x 3 root root 4096 10月 13 16:55 aaalog</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示文件索引节点</span></span><br><span class="line">[root@lwdCSCDN script]# ls -i</span><br><span class="line">10495811 etlD.sh  10495809 etl.sh   10495840 isFileExists.sh       10496106 reportSource.sh  10496118 stop.sh</span><br><span class="line">10495812 etlP.sh  10495822 etlS.sh  10495887 mysqld_kill_sleep.sh  10496112 stat.sh</span><br></pre></td></tr></table></figure>




<h2><span id="sz命令"><span id="inline-blue">sz命令</span></span></h2><p><strong>作用</strong><br>基于zmodern协议实现远程文件下载<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a : 以文本形式传输</span><br><span class="line">-b : 以二进制传输</span><br><span class="line">-e ：控制字符转义</span><br><span class="line">-i ：接收端执行命令</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 以文本格式下载服务器上app-info.log文件到本地</span></span><br><span class="line">[root@lwdCSCDN info]# sz -a app-info.log  </span><br></pre></td></tr></table></figure>



<h2><span id="rz命令"><span id="inline-blue">rz命令</span></span></h2><p><strong>作用</strong><br>基于zmodern协议实现本地文件上传<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-B : 设备缓冲大小</span><br><span class="line">-D : 测试模式，</span><br><span class="line">-e ：控制字符转义</span><br><span class="line">-y ：重名文件直接覆盖</span><br><span class="line">-p : 重名文件不覆盖</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 上传本地文件到当前服务器目录</span></span><br><span class="line">[root@lwdCSCDN info]# rz</span><br></pre></td></tr></table></figure>



<h2><span id="true命令"><span id="inline-blue">true命令</span></span></h2><p><strong>作用</strong><br>清空文件内容、不删除文件</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">清空app-info.log文件</span></span><br><span class="line">[root@lwdCSCDN info]# true &gt; app-info.log </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="tree命令"><span id="inline-blue">tree命令</span></span></h2><p><strong>作用</strong><br>以树形结构展现当前目录的文件</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a ：所有文件</span><br><span class="line">-t : 用文件和目录的更改时间排序</span><br><span class="line">-f : 在每个文件或目录之前，显示完整的相对路径名称</span><br><span class="line">-s : 列出文件或目录大小</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash">[root@lwdCSCDN info]<span class="comment"># tree</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2><span id="last命令"><span id="inline-blue">last命令</span></span></h2><p><strong>作用</strong><br>显示最近终端登录信息</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-R ：省略hostname栏位</span><br><span class="line">-username : 展示username登入信息</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash">[root@lwdCSCDN info]<span class="comment"># last</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>每天一个linux命令</title>
    <url>/Linux/blogs/%E6%AF%8F%E5%A4%A9%E4%B8%80%E4%B8%AAlinux%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86-span"><span id="inline-blue">文件和目录管理 </span></a><ul>
<li><a href="#span-idinline-bluechgrp%E5%91%BD%E4%BB%A4span"><span id="inline-blue">chgrp命令</span></a></li>
<li><a href="#span-idinline-bluechattr%E5%91%BD%E4%BB%A4span"><span id="inline-blue">chattr命令</span></a></li>
<li><a href="#span-idinline-bluemore%E5%91%BD%E4%BB%A4span"><span id="inline-blue">more命令</span></a></li>
<li><a href="#span-idinline-bluefind%E5%91%BD%E4%BB%A4span"><span id="inline-blue">find命令</span></a></li>
<li><a href="#span-idinline-bluedirname%E5%91%BD%E4%BB%A4"><span id="inline-blue">dirname命令</span></a></li>
<li><a href="#span-idinline-blueiconv%E5%91%BD%E4%BB%A4span"><span id="inline-blue">iconv命令</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="文件和目录管理"><span id="inline-blue">文件和目录管理 </span></span></h1><h2><span id="chgrp命令"><span id="inline-blue">chgrp命令</span></span></h2><p><strong>作用</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chgrp用来变更文件或目录的所属群组。</span><br><span class="line">组名可以是用户组的id,也可以是用户组的名称，文件名可以是空格分割的文件列表，也可以是通配符描述的集合，只有文件主和超级用户才可以使用该命令。</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong><br>-c:与-v命令像相似，仅显示变更的部分。<br>-f:不显示错误信息。<br>-h:只对符号链接文件做修改，不改变其对应的原始文件。<br>-R:递归处理，对指令目录下的文件及目录一并处理。<br>-v:显示命令执行的详细过程。<br>–reference=&lt;参考文件或目录&gt;:把指定文件或目录设置成参考文件或目录相同的群组。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将erm_gd目录的群组递归更改为report_hrb,显示详细的处理过程。</span></span><br><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">elasticsearch-2738171260560954631  erm_gd  mysql.sock  pulse-24KvvDfOHjjf  v8-compile-cache-0</span><br><span class="line">[root@lwdCSCDN tmp]# chgrp -vR report_hrb erm_gd</span><br><span class="line">&quot;erm_gd/dg_global.sql&quot; 的所属组已更改为report_hrb</span><br><span class="line">&quot;erm_gd/dg_erm_mysql.sql&quot; 的所属组已更改为report_hrb</span><br><span class="line">&quot;erm_gd&quot; 的所属组已更改为report_hrb</span><br></pre></td></tr></table></figure>
<h2><span id="chattr命令"><span id="inline-blue">chattr命令</span></span></h2><p><strong>作用</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chattr命令用来更改文件属性，这项指令可更改ext32文件系统文件或目录属性，属性一共以下8种模式：</span><br><span class="line">a:限制文件或目录仅提供附加用途。</span><br><span class="line">b:不更新文件或目录的最后存取时间。</span><br><span class="line">c:将文件和目录压缩后存放。</span><br><span class="line">d:将文件或目录排除在倾倒操作之外。</span><br><span class="line">i:不得更改文件和目录。</span><br><span class="line">s:保密性删除文件或目录。</span><br><span class="line">S:及时更新文件或目录。</span><br><span class="line">u:预防意外性删除。</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong></p>
<p>-R:将命令目录下的所有文件和子目录一并处理。<br>-v&lt;版本号&gt;:指定文件或目录的版本信息。<br>+属性：开启文件或目录的该项属性。<br>-属性：关闭文件或目录的该项属性。<br>=属性：指定文件或目录的该项属性。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 防止系统中某个文件系统内容被更改。</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# chattr +i a.txt </span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN erm_gd]# rm -rf a.txt </span><br><span class="line">rm: 无法删除&quot;a.txt&quot;: 不允许的操作</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 限制a.txt文件只能进行附加操作</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# chattr +a a.txt </span><br><span class="line">[root@lwdCSCDN erm_gd]# echo &quot;cover the file a.txt&quot; &gt; a.txt</span><br><span class="line">-bash: a.txt: 不允许的操作</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 采用附加方式添加内容</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# echo &quot;append content to file a.txt&quot; &gt;&gt; a.txt</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN erm_gd]# vim a.txt </span><br><span class="line"></span><br><span class="line">:ewewqfdsf</span><br><span class="line">append content to file a.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不可随意更动文件或目录</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# chattr +i a.txt</span><br><span class="line">[root@lwdCSCDN erm_gd]# rename a.txt aa.txt a.txt </span><br><span class="line">rename: renaming a.txt to aa.txt failed: 不允许的操作</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br></pre></td></tr></table></figure>



<h2><span id="more命令"><span id="inline-blue">more命令</span></span></h2><p><strong>作用</strong><br>    基于vi编辑文本过滤器，以全屏幕分页显示文件内容，支持vi模式下关键字定位操作。<br>    快捷键功能<br>    enter :显示文本下一行内容<br>    space : 显示下一屏文本<br>    q:退出more命令<br>    b:返回上一屏文本内容<br>    h:显示帮助命令<br>    按斜线符/:接着输入一个模式，可以在文本中寻找下一个相匹配的模式。</p>
<p><strong>选项</strong><br>-d :输出帮助信息<br>-c :不进行滚屏，每次刷新这个屏幕。<br>-s :合并多余的空白行。<br>-u :禁止下划线<br>-n ：n代表每一屏展示的文本行数。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 一屏显示10行文本内容，文本空白行合并，显示提示信息，不进行滚屏，每次刷新整个屏幕。</span></span><br><span class="line">[root@lwdCSCDN conf]# more -dsc -10 nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">user  nobody;</span></span><br><span class="line">user root;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"><span class="meta">--More--(5%</span><span class="bash">)[Press space to <span class="built_in">continue</span>, <span class="string">&#x27;q&#x27;</span> to quit.]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 搜索字符串‘<span class="built_in">limit</span>’所在位置，按键盘上n键，可定位到下一个位置。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">user  nobody;</span></span><br><span class="line">user root;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line">/limit</span><br></pre></td></tr></table></figure>





<h2><span id="find命令"><span id="inline-blue">find命令</span></span></h2><p><strong>作用</strong><br>    find命令用来在指定目录下查找对应的文件，如果不设置任何参数的话，则在当前目录下查找，并将结果全部显示。<br><strong>语法</strong><br>find path -option [   -print ]   [ -exec   -ok   command ]   {} ;<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find 根据下列规则判断 path 和 expression，在命令列上第一个 - ( ) , ! 之前的部份为 path，之后的是 expression。如果 path 是空字串则使用目前路径，如果 expression 是空字串则使用 -print 为预设 expression。</span><br><span class="line"></span><br><span class="line">expression 中可使用的选项有二三十个之多，在此只介绍最常用的部份。</span><br><span class="line"></span><br><span class="line">-mount, -xdev : 只检查和指定目录在同一个文件系统下的文件，避免列出其它文件系统中的文件</span><br><span class="line"></span><br><span class="line">-amin n : 在过去 n 分钟内被读取过</span><br><span class="line"></span><br><span class="line">-anewer file : 比文件 file 更晚被读取过的文件</span><br><span class="line"></span><br><span class="line">-atime n : 在过去n天内被读取过的文件</span><br><span class="line"></span><br><span class="line">-cmin n : 在过去 n 分钟内被修改过</span><br><span class="line"></span><br><span class="line">-cnewer file :比文件 file 更新的文件</span><br><span class="line"></span><br><span class="line">-ctime n : 在过去n天内被修改过的文件</span><br><span class="line"></span><br><span class="line">-empty : 空的文件-gid n or -group name : gid 是 n 或是 group 名称是 name</span><br><span class="line"></span><br><span class="line">-ipath p, -path p : 路径名称符合 p 的文件，ipath 会忽略大小写</span><br><span class="line"></span><br><span class="line">-name name, -iname name : 文件名称符合 name 的文件。iname 会忽略大小写</span><br><span class="line"></span><br><span class="line">-size n : 文件大小 是 n 单位，b 代表 512 位元组的区块，c 表示字元数，k 表示 kilo bytes，w 是二个位元组。</span><br><span class="line"></span><br><span class="line">-type c : 文件类型是 c 的文件。</span><br><span class="line"></span><br><span class="line">d: 目录</span><br><span class="line"></span><br><span class="line">c: 字型装置文件</span><br><span class="line"></span><br><span class="line">b: 区块装置文件</span><br><span class="line"></span><br><span class="line">p: 具名贮列</span><br><span class="line"></span><br><span class="line">f: 一般文件</span><br><span class="line"></span><br><span class="line">l: 符号连结</span><br><span class="line"></span><br><span class="line">s: socket</span><br><span class="line"></span><br><span class="line">-pid n : process id 是 n 的文件</span><br><span class="line"></span><br><span class="line">你可以使用 ( ) 将运算式分隔，并使用下列运算。</span><br><span class="line"></span><br><span class="line">exp1 -and exp2</span><br><span class="line"></span><br><span class="line">! expr</span><br><span class="line"></span><br><span class="line">-not expr</span><br><span class="line"></span><br><span class="line">exp1 -or exp2</span><br><span class="line"></span><br><span class="line">exp1, exp2	</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/etc、/root 目录下查找passwd字符串，不区分大小写</span></span><br><span class="line">[root@demo_mdn ~]# find /etc /root -iname passwd</span><br><span class="line">/etc/pam.d/passwd</span><br><span class="line">/etc/passwd</span><br><span class="line">/root/.vnc/passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">/etc目录下查找passwd字符串，？代表通配单个字符</span></span><br><span class="line">[root@demo_mdn ~]# find /etc -name &quot;passwd?&quot;</span><br><span class="line">/etc/passwd-</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">/etc目录下查找passwd字符串，[]代表通配任意字符</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script -name &quot;[ab].sh&quot;</span><br><span class="line">/BI/hrb_BI/etl/script/a.sh</span><br><span class="line">/BI/hrb_BI/etl/script/b.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">-a 连接两个不同的条件（两个条件必须同时满足）</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script -name &quot;*S.sh&quot; -a -user root</span><br><span class="line">/BI/hrb_BI/etl/script/etlS.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/tmp下一般类型文件</span></span><br><span class="line">[root@demo_mdn script]# find /tmp -type f</span><br><span class="line">/tmp/pulse-ft3VHPly7Wmg/pid</span><br><span class="line">/tmp/orbit-gdm/bonobo-activation-register-914f9f817ba337d787f3493d0000001b.lock</span><br><span class="line">/tmp/orbit-gdm/bonobo-activation-server-914f9f817ba337d787f3493d0000001b-ior</span><br><span class="line">/tmp/.X0-lock</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下超过30天没有访问过的文件，&#123;&#125; 代表查找到的文件，&#123;&#125;和\之间有空格</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script -atime +30 -exec ls &#123;&#125; \;</span><br><span class="line">/BI/hrb_BI/etl/script/mysqld_kill_sleep.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlP.sh</span><br><span class="line">/BI/hrb_BI/etl/script/reportSource.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlD.sh</span><br><span class="line">/BI/hrb_BI/etl/script/isFileExists.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlS.sh</span><br><span class="line">/BI/hrb_BI/etl/script/stop.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下等于2k的文件</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script/  -size 2M</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下大于2k的文件</span> </span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script/  -size +2k</span><br><span class="line">/BI/hrb_BI/etl/script/</span><br><span class="line">/BI/hrb_BI/etl/script/etl.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下小于2k的文件</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script/  -size -2k</span><br><span class="line">/BI/hrb_BI/etl/script/mysqld_kill_sleep.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlP.sh</span><br><span class="line">/BI/hrb_BI/etl/script/reportSource.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlD.sh</span><br><span class="line">/BI/hrb_BI/etl/script/a.sh</span><br><span class="line">/BI/hrb_BI/etl/script/b.sh</span><br><span class="line">/BI/hrb_BI/etl/script/isFileExists.sh</span><br><span class="line">/BI/hrb_BI/etl/script/ab.sh</span><br><span class="line">/BI/hrb_BI/etl/script/stat.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlS.sh</span><br><span class="line">/BI/hrb_BI/etl/script/stop.sh</span><br></pre></td></tr></table></figure>



<h2><span id="dirname命令"><span id="inline-blue">dirname命令</span></span></h2><p><strong><em>作用</em></strong><br>去除参数里面非目录部分<br>特殊情况1 最后一个字符是”/“,则截断到倒数第二个”/“,并忽略之后的全部字符。<br>特殊情况2 如果参数没有目录对应则返回当前目录。</p>
<p><strong><em>实例</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demo_mdn user]# dirname /a/b/file1.txt</span><br><span class="line">/a/b</span><br><span class="line"></span><br><span class="line">[root@demo_mdn user]# dirname /a/b</span><br><span class="line">/a </span><br><span class="line"></span><br><span class="line">[root@demo_mdn user]# dirname /a/b/</span><br><span class="line">/a</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">没有目录对应的情况下，返回当前目录。</span></span><br><span class="line">[root@demo_mdn user]# dirname a</span><br><span class="line">. </span><br></pre></td></tr></table></figure>

<h2><span id="iconv命令"><span id="inline-blue">iconv命令</span></span></h2><p><strong><em>作用</em></strong><br>    转换文件编码</p>
<p><strong><em>选项</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-f 源文件编码方式</span><br><span class="line">-t 目的文件编码方式</span><br><span class="line">-s 忽略告警信息，但不包括错误信息</span><br><span class="line">-o 指明编码后的输出文件</span><br><span class="line">-c 忽略非法字符</span><br><span class="line">-l 列出当前支持的编码方式</span><br></pre></td></tr></table></figure>
<p><strong><em>实例</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">列出所有支持的编码方式</span></span><br><span class="line">[root@demo_mdn user]# iconv -l</span><br><span class="line"></span><br><span class="line">The following list contain all the coded character sets known.  This does</span><br><span class="line">not necessarily mean that all combinations of these names can be used for</span><br><span class="line">the FROM and TO command line parameters.  One coded character set can be</span><br><span class="line">listed with several different names (aliases).</span><br><span class="line"></span><br><span class="line">  437, 500, 500V1, 850, 851, 852, 855, 856, 857, 860, 861, 862, 863, 864, 865,</span><br><span class="line">  866, 866NAV, 869, 874, 904, 1026, 1046, 1047, 8859_1, 8859_2, 8859_3, 8859_4,</span><br><span class="line">  8859_5, 8859_6, 8859_7, 8859_8, 8859_9, 10646-1:1993, 10646-1:1993/UCS4</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将文件file.txt 由gbk2312编码转换为UTF-8，并输出到file2.txt</span></span><br><span class="line">[root@demo_mdn user]# icon file1.txt -f gbk2312 -t UTF-8 -o file2.txt </span><br></pre></td></tr></table></figure>








<p><strong><em>解压缩</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">　命令格式：tar -zxvf  压缩文件名.tar.gz</span><br><span class="line">　</span><br><span class="line">　解压缩后的文件只能放在当前的目录。</span><br><span class="line"></span><br><span class="line">示例：tar -zxvf etl.V300R002B042.tar.gz </span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>WildFly请求过滤重写实现</title>
    <url>/WildFly/blogs/WildFly%E8%AF%B7%E6%B1%82%E8%BF%87%E6%BB%A4%E9%87%8D%E5%86%99%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluewildfly%E8%BF%87%E6%BB%A4%E5%99%A8%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">WildFly过滤器实现</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AEundertow%E5%AD%90%E7%B3%BB%E7%BB%9Fspan"><span id="inline-blue">配置undertow子系统</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>WildFly容器部署项目偶现400 Bad request请求，在排查环境没有结果的情况下希望通过记录wildFly的请求，分析请求内容处理这一异常请求。</p>
<h1><span id="wildfly过滤器实现"><span id="inline-blue">WildFly过滤器实现</span></span></h1><p>初始化maven项目custom-filter<br>pom.xml文件定义如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;name&gt;custom-undertow-filter&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.coship.wildfly.undertow.custom.filter&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;custom-undertow-filter&lt;/artifactId&gt;</span><br><span class="line">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">    &lt;version&gt;1.0&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;slf4j-version&gt;1.7.12&lt;/slf4j-version&gt;</span><br><span class="line">        &lt;undertow-core-version&gt;2.2.16.Final&lt;/undertow-core-version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            We want to exclude module.xml from the artifact, it does not belong there.</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;resources&gt;</span><br><span class="line">            &lt;resource&gt;</span><br><span class="line">                &lt;directory&gt;src/main/resources&lt;/directory&gt;</span><br><span class="line">                &lt;excludes&gt;</span><br><span class="line">                    &lt;exclude&gt;module.xml&lt;/exclude&gt;</span><br><span class="line">                &lt;/excludes&gt;</span><br><span class="line">            &lt;/resource&gt;</span><br><span class="line">        &lt;/resources&gt;</span><br><span class="line">        &lt;pluginManagement&gt;</span><br><span class="line">            &lt;plugins&gt;</span><br><span class="line">                &lt;plugin&gt;</span><br><span class="line">                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br><span class="line">                    &lt;configuration&gt;</span><br><span class="line">                        &lt;source&gt;1.8&lt;/source&gt;</span><br><span class="line">                        &lt;target&gt;1.8&lt;/target&gt;</span><br><span class="line">                    &lt;/configuration&gt;</span><br><span class="line">                &lt;/plugin&gt;</span><br><span class="line">                &lt;plugin&gt;</span><br><span class="line">                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;</span><br><span class="line">                    &lt;executions&gt;</span><br><span class="line">                        &lt;execution&gt;</span><br><span class="line">                            &lt;id&gt;attach-sources&lt;/id&gt;</span><br><span class="line">                            &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">                            &lt;goals&gt;</span><br><span class="line">                                &lt;goal&gt;jar&lt;/goal&gt;</span><br><span class="line">                            &lt;/goals&gt;</span><br><span class="line">                        &lt;/execution&gt;</span><br><span class="line">                    &lt;/executions&gt;</span><br><span class="line">                &lt;/plugin&gt;</span><br><span class="line">            &lt;/plugins&gt;</span><br><span class="line">        &lt;/pluginManagement&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;slf4j-version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;slf4j-version&#125;&lt;/version&gt;</span><br><span class="line">                &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;io.undertow&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;undertow-core&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;undertow-core-version&#125;&lt;/version&gt;</span><br><span class="line">                &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">        &lt;/dependencies&gt;</span><br><span class="line">    &lt;/dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;io.undertow&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;undertow-core&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;commons-lang&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.4&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<p>项目只包含一个java类RewriteRequestURLHandler,实现如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.wildfly.undertow.custom.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.undertow.server.HttpHandler;</span><br><span class="line"><span class="keyword">import</span> io.undertow.server.HttpServerExchange;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang.StringEscapeUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RewriteRequestURLHandler</span> <span class="keyword">implements</span> <span class="title">HttpHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(RewriteRequestURLHandler.class);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">private</span> HttpHandler next;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Illegal whitespace encoding at the beginning and end of the URL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span>  String escapedCharactersInUrl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">getEscapedCharactersInUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> escapedCharactersInUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">setEscapedCharactersInUrl</span><span class="params">(String param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.escapedCharactersInUrl = param;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RewriteRequestURLHandler</span><span class="params">(HttpHandler next)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(HttpServerExchange exchange)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        String requestURI = exchange.getRequestURI();</span><br><span class="line">        String requestPath = exchange.getRequestPath();</span><br><span class="line">        String relativePath = exchange.getRelativePath();</span><br><span class="line">        log.info(<span class="string">&quot;rewrite before: requestURI&quot;</span>+requestURI+<span class="string">&quot;,length:&quot;</span>+requestURI.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite before: requestPath&quot;</span>+requestPath+<span class="string">&quot;,length:&quot;</span>+requestPath.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite before: relativePath&quot;</span>+relativePath+<span class="string">&quot;,length:&quot;</span>+relativePath.length());</span><br><span class="line">        <span class="keyword">if</span>(!isEmpty(escapedCharactersInUrl))&#123;</span><br><span class="line">            String [] escapedCharacters   = escapedCharactersInUrl.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(String escapedCharacter : escapedCharacters)&#123;</span><br><span class="line">                <span class="keyword">if</span>(requestURI.indexOf(escapedCharacter) == <span class="number">0</span> || requestURI.lastIndexOf(escapedCharacter) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    requestURI = trim(requestURI,escapedCharacter);</span><br><span class="line">                    exchange.setRequestURI(requestURI);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(requestPath.indexOf(escapedCharacter) == <span class="number">0</span> || requestPath.lastIndexOf(escapedCharacter) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    requestPath = trim(requestPath,escapedCharacter);</span><br><span class="line">                    exchange.setRequestPath(requestPath);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(relativePath.indexOf(escapedCharacter) == <span class="number">0</span> || relativePath.lastIndexOf(escapedCharacter) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    relativePath = trim(relativePath,escapedCharacter);</span><br><span class="line">                    exchange.setRelativePath(relativePath);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;rewrite after: requestURI&quot;</span>+requestURI+<span class="string">&quot;,length:&quot;</span>+requestURI.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite after: requestPath&quot;</span>+requestPath+<span class="string">&quot;,length:&quot;</span>+requestPath.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite after: relativePath&quot;</span>+relativePath+<span class="string">&quot;,length:&quot;</span>+relativePath.length());</span><br><span class="line">        next.handleRequest(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Remove illegal characters that appear at the beginning and end of the request URL</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> substr</span></span><br><span class="line"><span class="comment">     * example http://10.9.212.55:28080/GettItemData%20 -&gt;  http://10.9.212.55:28080/GettItemData</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">trim</span><span class="params">(String str, String substr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> beginIndexFlag;</span><br><span class="line">        <span class="keyword">boolean</span> endIndexFlag;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> beginIndex = str.indexOf(substr) == <span class="number">0</span> ? substr.length() : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> endIndex = str.lastIndexOf(substr) + substr.length() == str.length() ? str.lastIndexOf(substr) : str.length();</span><br><span class="line">            str = str.substring(beginIndex, endIndex);</span><br><span class="line">            beginIndexFlag = (str.indexOf(substr) == <span class="number">0</span>);</span><br><span class="line">            endIndexFlag = (str.lastIndexOf(substr) + substr.length() == str.length());</span><br><span class="line">        &#125; <span class="keyword">while</span> (beginIndexFlag || endIndexFlag);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * determine if the string is empty</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">isEmpty</span><span class="params">(String str)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (str == <span class="keyword">null</span> || str.isEmpty());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>项目配置文件module.xml如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">module</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:module:1.6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;com.coship.wildfly.undertow.custom.filter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource-root</span> <span class="attr">path</span>=<span class="string">&quot;custom-undertow-filter-1.0.jar&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;io.undertow.core&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;org.slf4j&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上就是自定义过滤器的实现，但是想要让WildFly加载自定义过滤器还需要做一下准备工作。<br>1、将custom-filter项目通过maven install打包后生成custom-filter-1.0.jar和module.xml文件上传服务器，在WildFly的主目录下module子目录下创建custom-filter项目的包目录,并创建子目录main,上传刚才打包的jar包和module.xml到main目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/fujian_sdp/wildfly26-portal/modules</span><br><span class="line">mkdir com/coship/wildfly/undertow/custom/filter/main</span><br></pre></td></tr></table></figure>
<p>custom-filter项目的包目录：com.coship.wildfly.undertow.custom.filter<br>WIldFly的module目录：/usr/local/fujian_sdp/wildfly26-portal/modules<br>如下图所示：<br><img src="/images/WildFly/WildFly_20230728_001.png" alt="WildFly过滤器重写"></p>
<h1><span id="配置undertow子系统"><span id="inline-blue">配置undertow子系统</span></span></h1><p>在undertow子系统声明filter,文件所在路径参考：/usr/local/fujian_sdp/wildfly26-portal/standalone/configuration/standalone.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:undertow:3.0&quot;</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line">   <span class="tag">&lt;<span class="name">filters</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">      <span class="tag">&lt;<span class="name">filter</span> <span class="attr">name</span>=<span class="string">&quot;response-time&quot;</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">module</span>=<span class="string">&quot;com.novaordis.playground.wildfly.undertow.customfilter:1&quot;</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">class-name</span>=<span class="string">&quot;com.novaordis.playground.wildfly.undertow.customfilter.ResponseTimeHandler&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>配置filter额外参数</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;value1&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>为明确主机请求声明过滤器引用</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:undertow:3.0&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">      <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">location</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">           ...</span><br><span class="line">           <span class="tag">&lt;<span class="name">filter-ref</span> <span class="attr">name</span>=<span class="string">&quot;response-time&quot;</span>/&gt;</span></span><br><span class="line">           ...</span><br><span class="line">      <span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>WildFly</category>
      </categories>
      <tags>
        <tag>WildFly</tag>
      </tags>
  </entry>
  <entry>
    <title>tcpdump抓包</title>
    <url>/Linux/blogs/tcpdump%E6%8A%93%E5%8C%85/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-bluetcpdump%E5%91%BD%E4%BB%A4span"><span id="inline-blue">tcpdump命令</span></a></li>
<li><a href="#span-idinline-blue%E7%A4%BA%E4%BE%8Bspan"><span id="inline-blue">示例</span></a></li>
<li><a href="#span-idinline-blue%E5%85%B3%E9%94%AE%E5%AD%97%E6%90%9C%E7%B4%A2span"><span id="inline-blue">关键字搜索</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><pre><code>抓取Linux服务器上来自某一特定IP地址和端口的请求信息</code></pre>
<h1><span id="tcpdump命令"><span id="inline-blue">tcpdump命令</span></span></h1><p>选项<br> -i  # 指定监听网络接口<br> -w  # 将捕获到的信息保存到文件中，且不分析和打印在屏幕<br> -r  # 从文件中读取数据<br> -n  # 不把 ip 转化成域名<br> -t  # 在每行的输出中不显示时间<br> -v  # 产生详细的输出<br> -vv # 产生比-v选项更为详细的输出<br> -c  #  指定收取数据包的次数<br> -C  # 与 -w FILE 选项配合使用<br> -Q  #  选择是入方向还是出方向的数据包<br> -q  # 简洁地打印输出<br> -s  # 指定每个包捕获的长度<br> -A   # 以 ASCII 格式打印出所有的分组并且读取此文件<br> -e  # 在输出行打印出数据链路层的头部信息<br> -F  # 指定使用哪个文件的过滤表达式抓包<br> -l  # 对标准输出进行行缓冲</p>
<h1><span id="示例"><span id="inline-blue">示例</span></span></h1><p> 抓取源地址10.9212.55请求目的地址10.9.219.31对应8080端口请求信息<br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tcpdump -i eth1 port 8080 and src host 10.9.212.55 and dst host 10.9.219.31 -s 0 -vv -w /tmp/1.cap</span><br></pre></td></tr></table></figure></p>
<h1><span id="关键字搜索"><span id="inline-blue">关键字搜索</span></span></h1><p> 报文通过wireshark打开后点击下图中的搜索图标，将搜索类型修改为字符串，在搜索框填写关键字，点击查找即开始查找。<br> <img src="/images/linux/Linux_20230728_001.png" alt="wireshark分析"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker容器实现自定义IP</title>
    <url>/Docker/blogs/Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89IP/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%B7%A5%E5%85%B7span"><span id="inline-blue">工具</span></a></li>
<li><a href="#span-idinline-bluebridge-util%E5%AE%89%E8%A3%85span"><span id="inline-blue">bridge-util安装</span></a></li>
<li><a href="#span-idinline-bluepipework%E5%AE%89%E8%A3%85span"><span id="inline-blue">pipework安装</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%B9%E5%99%A8%E8%87%AA%E5%AE%9A%E4%B9%89ipspan"><span id="inline-blue">容器自定义IP</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>应用使用docker容器化后，需要跨宿主机访问，实现要求是宿主机和内部容器可以互通，且外部主机可以直接访问容器服务</p>
<h2><span id="工具"><span id="inline-blue">工具</span></span></h2><p>bridge-util : linux系统网桥管理工具<br>pipework : Docker 网络增强插件</p>
<h2><span id="bridge-util安装"><span id="inline-blue">bridge-util安装</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum搜索bridge-util所在源</span><br><span class="line">[root@S21614 ~]# yum search bridge</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">==================================================================== N/S matched: bridge ====================================================================</span><br><span class="line">bridge-utils.x86_64 : Utilities for configuring the linux ethernet bridge</span><br><span class="line">cockpit-bridge.x86_64 : Cockpit bridge server-side component</span><br><span class="line">at-spi2-atk.x86_64 : A GTK+ module that bridges ATK to D-Bus at-spi</span><br><span class="line">at-spi2-atk-devel.x86_64 : A GTK+ module that bridges ATK to D-Bus at-spi</span><br><span class="line">ebtables.x86_64 : Ethernet Bridge frame table administration tool</span><br><span class="line">kaccessible.x86_64 : An accessibility bridge plugin</span><br><span class="line"></span><br><span class="line">  Name and summary matches only, use &quot;search all&quot; for everything.</span><br><span class="line"><span class="meta">  #</span><span class="bash">独立安装bridge-utils.x86_64</span></span><br><span class="line">[root@S21614 ~]# yum -y install bridge-utils.x86_64</span><br></pre></td></tr></table></figure>
<p>如果没有yum环境可以使用离线安装方式，离线安装包地址：<br><a href="https://www.linuxfromscratch.org/blfs/view/svn/basicnet/bridge-utils.html">https://www.linuxfromscratch.org/blfs/view/svn/basicnet/bridge-utils.html</a></p>
<h2><span id="pipework安装"><span id="inline-blue">pipework安装</span></span></h2><p><a id="download" href="/images/docker/pipwork/pipework"><i class="fa fa-download"></i><span>pipework下载</span> </a><br>上传至服务器/usr/bin/目录下，并执行一下命令赋予可执行权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod a+x /usr/bin/pipework</span><br></pre></td></tr></table></figure>

<h2><span id="容器自定义ip"><span id="inline-blue">容器自定义IP</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">拉取nginx镜像</span></span><br><span class="line">docker pull centos</span><br><span class="line"><span class="meta">#</span><span class="bash">生成容器centos7_1、centos7_2</span></span><br><span class="line">docker run -itd --name centos7_1 --net=none eeb6ee3f44bd /bin/bash</span><br><span class="line">docker run -itd --name centos7_2 --net=none eeb6ee3f44bd /bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash">生成网桥，并将容器ip与网桥添加关联，为容器设置自定义IP 10.9.216.101对应设置IP地址,10.9.216.254是网关</span></span><br><span class="line">pipework br0 centos7_1 10.9.216.101/24@10.9.216.254</span><br><span class="line">pipework br0 centos7_2 10.9.216.102/24@10.9.216.254</span><br><span class="line">[root@S21614 ~]# ifconfig</span><br><span class="line">br0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.9.216.14  netmask 255.255.255.0  broadcast 0.0.0.0</span><br><span class="line">        inet6 fe80::cd2:b8ff:fe65:6480  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        inet6 10:9:216:0:10a5:faff:fe02:85b9  prefixlen 64  scopeid 0x0&lt;global&gt;</span><br><span class="line">        ether 12:a5:fa:02:85:b9  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 66482  bytes 3751391 (3.5 MiB)</span><br><span class="line">        RX errors 0  dropped 490  overruns 0  frame 0</span><br><span class="line">        TX packets 64499  bytes 87368127 (83.3 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">docker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line">        ether 02:42:66:bb:45:a6  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">eno1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet6 10:9:216:0:42f2:e9ff:fe0d:cfb4  prefixlen 64  scopeid 0x0&lt;global&gt;</span><br><span class="line">        inet6 fe80::42f2:e9ff:fe0d:cfb4  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 40:f2:e9:0d:cf:b4  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 72999  bytes 5265597 (5.0 MiB)</span><br><span class="line">        RX errors 0  dropped 8  overruns 0  frame 0</span><br><span class="line">        TX packets 92671  bytes 93048588 (88.7 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line">        device memory 0xa9a60000-a9a7ffff  </span><br><span class="line"><span class="meta">#</span><span class="bash">将eno1网卡的ip地址移植到bro网桥,添加bro和eno1网关关联，为bro网桥和网关添加路由，以下命令必须在一行执行，否则会出现ssh断掉不能连接的情况</span></span><br><span class="line">ip addr add 10.9.216.14/24 dev br0; \</span><br><span class="line">ip addr del 10.9.216.14/24 dev eno1; \</span><br><span class="line">brctl addif br0 eno1; \</span><br><span class="line">route del default; \</span><br><span class="line">route add default gw 10.9.216.254 dev br0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除网桥和网卡eno1关联(如果ssh断掉的情况下需要执行以下命令删除网卡和网桥关联，这一步需要机房登陆服务器操作)</span></span><br><span class="line">brctl delif br0 eno1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">brctl 相关命令</span></span><br><span class="line"></span><br><span class="line">参数	说明	示例</span><br><span class="line">addbr &lt;bridge&gt;	创建网桥	brctl addbr br10</span><br><span class="line">delbr &lt;bridge&gt;	删除网桥	brctl delbr br10</span><br><span class="line">addif &lt;bridge&gt; &lt;device&gt;	将网卡接口接入网桥	brctl addif br10 eth0</span><br><span class="line">delif &lt;bridge&gt; &lt;device&gt;	删除网桥接入的网卡接口	brctl delif br10 eth0</span><br><span class="line">show &lt;bridge&gt;	查询网桥信息	brctl show br10</span><br><span class="line">stp &lt;bridge&gt; &#123;on|off&#125;	启用禁用 STP	brctl stp br10 off/on</span><br><span class="line">showstp &lt;bridge&gt;	查看网桥 STP 信息	brctl showstp br10</span><br><span class="line">setfd &lt;bridge&gt; &lt;time&gt;	设置网桥延迟	brctl setfd br10 10</span><br><span class="line">showmacs &lt;bridge&gt;	查看 mac 信息	brctl showmacs br10</span><br></pre></td></tr></table></figure>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>宿主机访问容器centos7_1: 10.9.216.101</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21614 ~]# ping 10.9.216.101</span><br><span class="line">PING 10.9.216.101 (10.9.216.101) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=1 ttl=64 time=0.162 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=2 ttl=64 time=0.047 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=3 ttl=64 time=0.048 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=4 ttl=64 time=0.048 ms</span><br><span class="line">^X64 bytes from 10.9.216.101: icmp_seq=5 ttl=64 time=0.067 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=6 ttl=64 time=0.048 ms</span><br></pre></td></tr></table></figure>

<p>宿主机访问容器centos7_2: 10.9.216.102</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21614 ~]# ping 10.9.216.102</span><br><span class="line">PING 10.9.216.102 (10.9.216.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=1 ttl=64 time=0.160 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=2 ttl=64 time=0.052 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=3 ttl=64 time=0.048 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=4 ttl=64 time=0.048 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=5 ttl=64 time=0.048 ms</span><br></pre></td></tr></table></figure>

<p>容器centos7_1访问宿主机10.9.216.14</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入容器centos7_1内部</span></span><br><span class="line">[root@S21614 ~]# docker exec -it centos7_1 /bin/bash</span><br><span class="line">[root@f843b5d71fdb /]# ping 10.9.216.14</span><br><span class="line">PING 10.9.216.14 (10.9.216.14) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=1 ttl=64 time=0.109 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=2 ttl=64 time=0.059 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=3 ttl=64 time=0.056 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=4 ttl=64 time=0.058 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=5 ttl=64 time=0.056 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=6 ttl=64 time=0.056 ms</span><br></pre></td></tr></table></figure>
<p>容器centos7_1(10.9.216.101)访问容器centos7_2(10.9.216.102)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@f843b5d71fdb /]# ping 10.9.216.102</span><br><span class="line">PING 10.9.216.102 (10.9.216.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=1 ttl=64 time=0.197 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=2 ttl=64 time=0.075 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=3 ttl=64 time=0.070 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=4 ttl=64 time=0.069 ms</span><br></pre></td></tr></table></figure>
<p>容器centos7_2访问宿主机10.9.216.14</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@9210f0ab69fe /]# ping 10.9.216.14 </span><br><span class="line">PING 10.9.216.14 (10.9.216.14) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=1 ttl=64 time=0.088 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=2 ttl=64 time=0.060 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=3 ttl=64 time=0.057 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=4 ttl=64 time=0.070 ms</span><br></pre></td></tr></table></figure>
<p>容器centos7_2(10.9.216.101)访问容器centos7_1(10.9.216.102)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入容器centos7_2内部</span></span><br><span class="line">[root@S21614 ~]# docker exec -it centos7_2 /bin/bash</span><br><span class="line">[root@9210f0ab69fe /]# ping 10.9.216.101</span><br><span class="line">PING 10.9.216.101 (10.9.216.101) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=1 ttl=64 time=0.114 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=2 ttl=64 time=0.082 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=3 ttl=64 time=0.072 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=4 ttl=64 time=0.070 ms</span><br></pre></td></tr></table></figure>
<p>服务器重启之后网桥信息会丢失，需要重新配置</p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署minio，分享地址为Docker内ip地址问题</title>
    <url>/Minio/blogs/Docker%E9%83%A8%E7%BD%B2minio%EF%BC%8C%E5%88%86%E4%BA%AB%E5%9C%B0%E5%9D%80%E4%B8%BADocker%E5%86%85ip%E5%9C%B0%E5%9D%80%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>通过Docker拉取minio镜像，生成容器访问后发现分享的地址是docker容器内部的ip地址，导致无法访问</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>拉取minio镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull minio/minio</span><br></pre></td></tr></table></figure>
<p>生成容器并后台启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 9000:9000 -p 9091:9091 --name=minio --restart=always -e &quot;MINIO_SERVER_URL=http://192.168.99.100:9000&quot; -e &quot;MINIO_ACCESS_KEY=admin&quot; -e &quot;MINIO_SECRET_KEY=admin123&quot; -v /d/minio/upload/data:/data -v /d/minio/upload/data:/root/.minio  minio/minio server /data --console-address &quot;:9091&quot; --address &quot;:9000&quot;</span><br></pre></td></tr></table></figure>

<p>-e “MINIO_SERVER_URL=<a href="http://192.168.99.100:9000&quot;">http://192.168.99.100:9000&quot;</a>  参数指定生成minio应用程序分享地址环境变量</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>再次上传文件并分享后分享图片链接地址</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http://192.168.99.100:9000/test/logo.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=YLMFB2ERQR4GQDRZ0IRA%2F20230718%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20230718T081006Z&amp;X-Amz-Expires=604800&amp;X-Amz-Security-Token=eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NLZXkiOiJZTE1GQjJFUlFSNEdRRFJaMElSQSIsImV4cCI6MTY4OTY3MTI1MSwicGFyZW50IjoiYWRtaW4ifQ.hiSBI9bahX8crhponMuIglPWArfm5Y4-PcW5MTdPsKdXnWJeyiIDumvCTh9Pg1eNsnHkKxNQnx-yOeWfUgIU1g&amp;X-Amz-SignedHeaders=host&amp;versionId=null&amp;X-Amz-Signature=139e32da7c2541b2cc16d01d2157256196711f24afb8034046eebbccf6e728ef</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Minio</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Minio</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx反向代理导致接口响应超时</title>
    <url>/nginx/blogs/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AF%BC%E8%87%B4%E6%8E%A5%E5%8F%A3%E5%93%8D%E5%BA%94%E8%B6%85%E6%97%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84span"><span id="inline-blue">代理访问路径</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E8%AF%A6%E6%83%85span"><span id="inline-blue">配置详情</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="代理访问路径"><span id="inline-blue">代理访问路径</span></span></h2><p>接口真实访问地址：<a href="http://10.26.0.19:9001/prodtest/admin/user/getCaptcha?width=140&amp;height=50">http://10.26.0.19:9001/prodtest/admin/user/getCaptcha?width=140&amp;height=50</a></p>
<p>接口代理访问地址：<a href="http://10.26.0.19:8080/prodtest/admin/user/getCaptcha?width=140&amp;height=50">http://10.26.0.19:8080/prodtest/admin/user/getCaptcha?width=140&amp;height=50</a></p>
<h2><span id="配置详情"><span id="inline-blue">配置详情</span></span></h2><p>前端访问接口耗时接近10秒，nginx代理超时配置配置多少都是等待超时然后请求报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">		client_max_body_size 1024m; </span><br><span class="line">        listen       8080;</span><br><span class="line">        server_name  10.26.0.19;</span><br><span class="line">		try_files $uri $uri/ /index.html;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line"><span class="meta">			#</span><span class="bash">gzip_static on; <span class="comment"># 开启后查找.gz结尾的文件直接返回，不进行压缩</span></span></span><br><span class="line">			gzip_min_length 1k; # 文件大于1K才进行压缩</span><br><span class="line">			gzip_http_version 1.1; # 设置gzip针对的http协议版本</span><br><span class="line">			gzip_comp_level 9; # 压缩级别，1-9，数字越大压缩越好，越占用cpu</span><br><span class="line">			gzip_types  text/css application/javascript; # 进行压缩的文件类型</span><br><span class="line">			autoindex on;</span><br><span class="line">            root   /home/prodtest/dist-protest;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">			try_files $uri $uri/ /index.html;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 反向代理</span></span><br><span class="line">        location /prodtest &#123;</span><br><span class="line">			 #gzip_static on; # 开启后查找.gz结尾的文件直接返回，不进行压缩</span><br><span class="line">			 gzip_min_length 1k; # 文件大于1K才进行压缩</span><br><span class="line">			 gzip_http_version 1.1; # 设置gzip针对的http协议版本</span><br><span class="line">			 gzip_comp_level 9; # 压缩级别，1-9，数字越大压缩越好，越占用cpu</span><br><span class="line">			 gzip_types  text/css application/javascript; # 进行压缩的文件类型</span><br><span class="line">             proxy_pass http://10.26.0.19:9001/prodtest;</span><br><span class="line">             proxy_set_header Host 10.26.0.19;</span><br><span class="line">             proxy_connect_timeout 10;</span><br><span class="line">             proxy_send_timeout 10;</span><br><span class="line">             proxy_read_timeout 10;</span><br><span class="line">             send_timeout 10;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="原因"><span id="inline-blue">原因</span></span></h2><p>域名解析导致<br> 文件/etc/resolv.conf配置内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">; generated by /usr/sbin/dhclient-script</span></span><br><span class="line">search openstacklocal novalocal</span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 114.114.114.114</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 8.8.8.8</span></span><br><span class="line">nameserver 10.26.0.2</span><br><span class="line">nameserver 10.26.0.1</span><br><span class="line">nameserver 10.26.0.3</span><br></pre></td></tr></table></figure>
<p>search openstacklocal novalocal<br>search 的作用：<br>当访问的域名不能被DNS解析时，resolver会将该域名加上search后面指定的参数，重新请求DNS，直到被正确解析或试完search指定的列表为止。<br>示例：主机名为app1.novalocal，请求主机名对应的服务nacos，端口连接变成app1.novalocal.novalocal</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@app1.novalocal etc]# lsof -i:9848</span><br><span class="line">COMMAND   PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME</span><br><span class="line">java     5579 root   73u  IPv6 37126139      0t0  TCP app1.novalocal.novalocal:51446-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java     5579 root   76u  IPv6 37130258      0t0  TCP app1.novalocal.novalocal:51452-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java     9071 root    9u  IPv6 32331770      0t0  TCP app1.novalocal:58587-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java     9071 root   72u  IPv6 32329519      0t0  TCP app1.novalocal:58598-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    28503 root   25u  IPv6 37128402      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:51446 (ESTABLISHED)</span><br><span class="line">java    28503 root  200u  IPv6 31969988      0t0  TCP *:9848 (LISTEN)</span><br><span class="line">java    28503 root  284u  IPv6 32242521      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:57686 (ESTABLISHED)</span><br><span class="line">java    28503 root  287u  IPv6 37128424      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:51452 (ESTABLISHED)</span><br><span class="line">java    28503 root  289u  IPv6 32126224      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56532 (ESTABLISHED)</span><br><span class="line">java    28503 root  290u  IPv6 32329520      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:58598 (ESTABLISHED)</span><br><span class="line">java    28503 root  292u  IPv6 32242558      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:57700 (ESTABLISHED)</span><br><span class="line">java    28503 root  295u  IPv6 32128146      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56550 (ESTABLISHED)</span><br><span class="line">java    28503 root  296u  IPv6 32331775      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:58587 (ESTABLISHED)</span><br><span class="line">java    28503 root  299u  IPv6 32125133      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56558 (ESTABLISHED)</span><br><span class="line">java    28503 root  303u  IPv6 32125156      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56582 (ESTABLISHED)</span><br><span class="line">java    28503 root  304u  IPv6 32121662      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56572 (ESTABLISHED)</span><br><span class="line">java    28503 root  306u  IPv6 32127363      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56598 (ESTABLISHED)</span><br><span class="line">java    28503 root  307u  IPv6 32125183      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56587 (ESTABLISHED)</span><br><span class="line">java    28503 root  317u  IPv6 32123270      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56614 (ESTABLISHED)</span><br><span class="line">java    28551 root   10u  IPv6 32242520      0t0  TCP app1.novalocal:57686-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    28551 root   24u  IPv6 32238089      0t0  TCP app1.novalocal:57700-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32458 root    6u  IPv6 32124384      0t0  TCP app1.novalocal:56532-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32458 root   77u  IPv6 32121614      0t0  TCP app1.novalocal:56550-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32542 root    7u  IPv6 32125129      0t0  TCP app1.novalocal:56558-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32542 root   76u  IPv6 32125155      0t0  TCP app1.novalocal:56582-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32580 root    7u  IPv6 32125151      0t0  TCP app1.novalocal:56572-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32580 root   76u  IPv6 32123269      0t0  TCP app1.novalocal:56614-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32627 root   77u  IPv6 32122582      0t0  TCP app1.novalocal:56598-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32627 root   78u  IPv6 32124395      0t0  TCP app1.novalocal:56587-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br></pre></td></tr></table></figure>


<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>修改/etc/resolv.conf配置内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">; generated by /usr/sbin/dhclient-script</span></span><br><span class="line"><span class="meta">#</span><span class="bash">search openstacklocal novalocal</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 114.114.114.114</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 8.8.8.8</span></span><br><span class="line">nameserver 10.26.0.2</span><br><span class="line">nameserver 10.26.0.1</span><br><span class="line">nameserver 10.26.0.3</span><br></pre></td></tr></table></figure>

<p>修改/etc/hosts配置内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">60.190.232.46 open.ys7.com</span></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">10.26.0.19 app1</span><br></pre></td></tr></table></figure>
<p>重新请求恢复正常。</p>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud微服务打包排除指定配置文件</title>
    <url>/Maven/blogs/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%89%93%E5%8C%85%E6%8E%92%E9%99%A4%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>Maven: 3.5.4<br>微服务打成jar通过nacos下发配置，本地配置文件配置项冲突导致nacos配置中心配置被覆盖</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>排除项目src/main/resources路径下application-${spring.profiles.active}.properties文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">finalName</span>&gt;</span>ffcs-admin-biz<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>application-*.properties<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL数据文件迁移</title>
    <url>/MySQL/blogs/MySQL%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E8%BF%81%E7%A7%BB/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%BF%81%E7%A7%BB%E6%AD%A5%E9%AA%A4span"><span id="inline-blue">迁移步骤</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>一次更新服务器内核之后导致服务器挂掉，在多次尝试无法恢复的情况下选择重装系统，但服务器上的安装的服务MySQL数据需要进行备份，数据文件通过镜像挂载的方式备份到本地，包括MySQL配置文件/etc/my.cnf<br>原始MySQL版本: 5.5.60<br>重装MySQL版本: 5.7.33</p>
<p>原始数据目录所在位置/home/mysql/data<br>重装数据目录所在位置/home/mysql/data</p>
<h1><span id="迁移步骤"><span id="inline-blue">迁移步骤</span></span></h1><ol>
<li><p>数据文件上传至重装后的MySQL数据目录<br>采用/bin/cp原生命令可避免cp命令别名导致的交互式确认删除的问题。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/bak/mysql</span><br><span class="line">/bin/cp -rf * /home/mysql/data</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新给拷贝后的数据文件目录赋予MySQL用户权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /home/mysql/data</span><br><span class="line">chown -R mysql:mysql mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启MySQL服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Dokcer常用命令</title>
    <url>/Docker/blogs/Dokcer%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8Bdocker%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">查看Docker版本信息</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8Bdocker%E8%AF%A6%E6%83%85span"><span id="inline-blue">查看Docker详情</span></a></li>
<li><a href="#span-idinline-blue%E6%93%8D%E4%BD%9C%E9%95%9C%E5%83%8Fspan"><span id="inline-blue">操作镜像</span></a></li>
<li><a href="#span-idinline-blue%E6%93%8D%E4%BD%9C%E5%AE%B9%E5%99%A8span"><span id="inline-blue">操作容器</span></a></li>
<li><a href="#span-idinline-bluedocker-compose%E5%B7%A5%E5%85%B7span"><span id="inline-blue">docker-compose工具</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Windows7
DockerToolbox-18.03.0-ce.exe</code></pre>
<h1><span id="查看docker版本信息"><span id="inline-blue">查看Docker版本信息</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker version </span><br></pre></td></tr></table></figure>
<h1><span id="查看docker详情"><span id="inline-blue">查看Docker详情</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker info </span><br></pre></td></tr></table></figure>
<h1><span id="操作镜像"><span id="inline-blue">操作镜像</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看镜像</span></span><br><span class="line">docker image ls </span><br><span class="line"><span class="meta">#</span><span class="bash">列出镜像列表</span></span><br><span class="line">docker image list</span><br><span class="line"><span class="meta">#</span><span class="bash">拉取镜像  docker pull mysql:5.7</span></span><br><span class="line">docker pull 镜像:标签  </span><br><span class="line"><span class="meta">#</span><span class="bash">删除镜像 docker rmi mysql-5.7(镜像名或image ID 前四位)</span></span><br><span class="line">docker rmi 镜像名</span><br><span class="line"><span class="meta">#</span><span class="bash">批量删除镜像</span></span><br><span class="line">docker rmi -f $(docker images -a -q)</span><br><span class="line"><span class="meta">#</span><span class="bash">删除虚悬镜像</span></span><br><span class="line">docker image prune</span><br></pre></td></tr></table></figure>

<h1><span id="操作容器"><span id="inline-blue">操作容器</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看正在运行容器</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="meta">#</span><span class="bash">查看所有容器</span></span><br><span class="line">docker ps -a </span><br><span class="line"><span class="meta">#</span><span class="bash">批量删除所有镜像</span></span><br><span class="line">docker rm -vf $(docker ps -a -q)</span><br><span class="line"><span class="meta">#</span><span class="bash">删除镜像 docker rmi mysql-5.7(镜像名或image ID 前四位)</span></span><br><span class="line">docker rmi 镜像名</span><br><span class="line"><span class="meta">#</span><span class="bash">批量删除镜像</span></span><br><span class="line">docker rmi -f $(docker images -a -q)</span><br><span class="line"><span class="meta">#</span><span class="bash">停止容器 docker stop mysql5.7(容器名或容器ID)</span></span><br><span class="line">docker stop 容器名</span><br><span class="line"><span class="meta">#</span><span class="bash">查看容器日志 docker logs 容器名或容器ID</span></span><br><span class="line">docker logs mysql5.7</span><br><span class="line"><span class="meta">#</span><span class="bash">进入容器内部</span></span><br><span class="line">docker exec -it mysql5.7 /bin/bash</span><br></pre></td></tr></table></figure>

<h1><span id="docker-compose工具"><span id="inline-blue">docker-compose工具</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">启动容器  -d:后台启动 --build:重建镜像 容器名可跟多个,docker-compose半拍工具需要结合docker-compose.yml使用</span></span><br><span class="line">docker-compose up -d --build 容器名</span><br><span class="line"><span class="meta">#</span><span class="bash">停止所有容器</span></span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dokcer镜像导入导出</title>
    <url>/Docker/blogs/Dokcer%E9%95%9C%E5%83%8F%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%87%BAspan"><span id="inline-blue">导出</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%85%A5span"><span id="inline-blue">导入</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Windows7
DockerToolbox-18.03.0-ce.exe</code></pre>
<h1><span id="导出"><span id="inline-blue">导出</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">rm -rf  images</span><br><span class="line">docker images &gt; images.txt</span><br><span class="line">awk &#x27;&#123;print $1&#125;&#x27; images.txt &gt; REPOSITORY.txt</span><br><span class="line">sed -i &#x27;1d&#x27; REPOSITORY.txt</span><br><span class="line">mkdir images</span><br><span class="line">touch tarname.txt</span><br><span class="line">while read LINE</span><br><span class="line">do</span><br><span class="line">docker save $LINE &gt; ./images/$&#123;LINE//\//_&#125;.tar</span><br><span class="line">echo &quot;$&#123;LINE//\//_&#125;.tar&quot; &gt;&gt; tarname.txt</span><br><span class="line">done &lt; REPOSITORY.txt</span><br><span class="line">rm -rf images.txt REPOSITORY.txt</span><br><span class="line">cp import.sh ./images/</span><br><span class="line">echo &quot;images export finish&quot;</span><br></pre></td></tr></table></figure>
<h1><span id="导入"><span id="inline-blue">导入</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">while read LINE</span><br><span class="line">do</span><br><span class="line">docker  load -i ./images/$LINE</span><br><span class="line">echo ok</span><br><span class="line">done &lt; tarname.txt</span><br><span class="line">echo finish</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>docker pull错误 Error response from</title>
    <url>/Docker/blogs/docker%20pull%E9%94%99%E8%AF%AF%20Error%20response%20from/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Windows7
DockerToolbox-18.03.0-ce.exe</code></pre>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>执行以下命令拉取nginx镜像提示</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull nginx </span><br></pre></td></tr></table></figure>
<p>Error response from daemon: Get <a href="https://registry-1.docker.io/v2/">https://registry-1.docker.io/v2/</a>: dial tcp: look<br>up registry-1.docker.io on 10.0.2.3:53: read udp 10.0.2.15:54424-&gt;10.0.2.3:53: i</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>这类错误，因为虚拟机启动后默认使用10.0.2.3作为dns首选解析地址，这个地址在虚拟机肯定是不能识别的，得用8.8.8.8和114.114.114.114。在这里被坑了好久，对于Docker Toolbox来说，需要修改的是DNS域名解析，具体文件是/etc/resolv.conf，但是修改的是哪个resolv.conf文件需要明确。<br>使用Docker Quickstart Terminal启动的是VirtualBox。VirtualBox是一个开源的虚拟机软件，可在其上启动更多操作系统。在VirtualBox的目录下，也有/etc/resolv.conf这个文件，但是在VirtualBox启动一个新的操作系统后，若操作系统内部也有/etc/resolv.conf，就会覆盖VirtualBox目录下的有/etc/resolv.conf。，之前一直在修改VirtualBox目录下的/etc/resolv.conf，导致dns解析一直失败。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>使用docker-machine ssh  命令进入自建的操作系统，因为resolv.conf是只读的，因此需要输入sudo vi /etc/resolv.conf开始修改。修改完成后，按ESC输入 :wq 保存。<br><img src="/images/docker/docker_20230630_001.png" alt="Docker镜像"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven本地jar包注册</title>
    <url>/Maven/blogs/Maven%E6%9C%AC%E5%9C%B0jar%E5%8C%85%E6%B3%A8%E5%86%8C/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>maven项目加载依赖出现jar在中央仓库访问正常，但本地下载失败，导致项目一直爆红。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn install:install-file -Dfile&#x3D;C:\Users\909754\Downloads\maven_jar\spring-boot-configuration-processor-2.2.6.RELEASE.jar    -DgroupId&#x3D;org.springframework.boot -DartifactId&#x3D;spring-boot-configuration-processor  -Dversion&#x3D;2.2.6.RELEASE -Dpackaging&#x3D;jar</span><br></pre></td></tr></table></figure>
<p>参数说明：<br>install:install-file：jar包注册命令<br>-Dfile: 指定主车道本地仓库的绝对路径地址<br>-DgroupId：groupId<br>-DartifactId：artifactId<br>-Dversion：版本号<br>-Dpackaging：打包方式(pom、war、jar)</p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>解决syntax error near unexpected token `checkEnv问题</title>
    <url>/Linux/blogs/%E8%A7%A3%E5%86%B3syntax%20error%20near%20unexpected%20token%20%60checkEnv%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>windows环境下编辑修改了setup.sh脚本文件，重新打包放到linux环境安装提示syntax error near unexpected token `</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">: command not found</span><br><span class="line">&#x27;setup.sh: line 38: syntax error near unexpeted token `checkEnv</span><br></pre></td></tr></table></figure>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>windows里写的shell脚本放到linux系统里运行就会提示上述错误,两个平台的系统换行符不一致导致<br>notepad++编辑器打开后，点击上方菜单栏视图-&gt;显示符号-&gt;显示所有符号<br><img src="/images/linux/Linux_20230505_001.png" alt="Linux脚本编辑"></p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>点击上方菜单栏编辑-&gt;文档格式转换-&gt;转为unix(LF)<br><img src="/images/linux/Linux_20230505_002.png" alt="Linux脚本编辑"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>WildFly日志设置</title>
    <url>/JAXB/blogs/WildFly%E6%97%A5%E5%BF%97%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%AE%9A%E4%B9%89handlerspan"><span id="inline-blue">定义handler</span></a></li>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E5%88%9B%E5%BB%BA%E7%9A%84handlerspan"><span id="inline-blue">使用创建的handler</span></a></li>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E5%88%9B%E5%BB%BA%E7%9A%84handlerspan-1"><span id="inline-blue">使用创建的handler</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="定义handler"><span id="inline-blue">定义handler</span></span></h1><p>/usr/local/wildfly26-portal/standalone/configuration/standalone.xml文件添加handler</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">periodic-size-rotating-file-handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">autoflush</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">formatter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">named-formatter</span> <span class="attr">name</span>=<span class="string">&quot;PATTERN&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">file</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.log.dir&quot;</span> <span class="attr">path</span>=<span class="string">&quot;server.log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">suffix</span> <span class="attr">value</span>=<span class="string">&quot;.yyyy-MM-dd&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rotate-size</span> <span class="attr">value</span>=<span class="string">&quot;100m&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">max-backup-index</span> <span class="attr">value</span>=<span class="string">&quot;65535&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">periodic-size-rotating-file-handler</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>standalone.xml完整内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:19.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.clustering.infinispan&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.connector&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.deployment-scanner&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.ee&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.ejb3&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jaxrs&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jdr&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jmx&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jpa&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jsf&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.logging&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.mail&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.naming&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.pojo&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.remoting&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.sar&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.transactions&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.webservices&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.weld&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.batch.jberet&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.bean-validation&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.clustering.web&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.core-management&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.discovery&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.ee-security&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.elytron&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.elytron-oidc-client&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.health&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.io&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.metrics&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.microprofile.config-smallrye&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.request-controller&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.security.manager&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.undertow&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">management</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">audit-log</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formatters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">json-formatter</span> <span class="attr">name</span>=<span class="string">&quot;json-formatter&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">formatters</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">file-handler</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">formatter</span>=<span class="string">&quot;json-formatter&quot;</span> <span class="attr">path</span>=<span class="string">&quot;audit-log.log&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.data.dir&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">log-boot</span>=<span class="string">&quot;true&quot;</span> <span class="attr">log-read-only</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enabled</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">handler</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">audit-log</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">management-interfaces</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http-interface</span> <span class="attr">http-authentication-factory</span>=<span class="string">&quot;management-http-authentication&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-upgrade</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">sasl-authentication-factory</span>=<span class="string">&quot;management-sasl-authentication&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">http</span>=<span class="string">&quot;management-http&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">http-interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">management-interfaces</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">access-control</span> <span class="attr">provider</span>=<span class="string">&quot;simple&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">role-mapping</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span> <span class="attr">name</span>=<span class="string">&quot;SuperUser&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">user</span> <span class="attr">name</span>=<span class="string">&quot;$local&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">role</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">role-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">access-control</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">management</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:logging:8.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">console-handler</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">formatter</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">named-formatter</span> <span class="attr">name</span>=<span class="string">&quot;COLOR-PATTERN&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">console-handler</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">periodic-size-rotating-file-handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">autoflush</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">formatter</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">named-formatter</span> <span class="attr">name</span>=<span class="string">&quot;PATTERN&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">file</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.log.dir&quot;</span> <span class="attr">path</span>=<span class="string">&quot;server.log&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">suffix</span> <span class="attr">value</span>=<span class="string">&quot;.yyyy-MM-dd&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">rotate-size</span> <span class="attr">value</span>=<span class="string">&quot;100m&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">max-backup-index</span> <span class="attr">value</span>=<span class="string">&quot;65535&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">append</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">periodic-size-rotating-file-handler</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;com.arjuna&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;io.jaegertracing.Configuration&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;org.jboss.as.config&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;org.jboss.stdio&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;ERROR&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;sun.rmi&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">root-logger</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">root-logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formatter</span> <span class="attr">name</span>=<span class="string">&quot;PATTERN&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern-formatter</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; %-5p [%c] (%t) %s%e%n&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formatter</span> <span class="attr">name</span>=<span class="string">&quot;COLOR-PATTERN&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern-formatter</span> <span class="attr">pattern</span>=<span class="string">&quot;%K&#123;level&#125;%d&#123;HH:mm:ss,SSS&#125; %-5p [%c] (%t) %s%e%n&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:batch-jberet:2.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-job-repository</span> <span class="attr">name</span>=<span class="string">&quot;in-memory&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-thread-pool</span> <span class="attr">name</span>=<span class="string">&quot;batch&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">job-repository</span> <span class="attr">name</span>=<span class="string">&quot;in-memory&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">in-memory</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">job-repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thread-pool</span> <span class="attr">name</span>=<span class="string">&quot;batch&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;30&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thread-pool</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:bean-validation:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:core-management:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:datasources:6.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">datasources</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">datasource</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/datasources/ExampleDS&quot;</span> <span class="attr">pool-name</span>=<span class="string">&quot;ExampleDS&quot;</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">use-java-context</span>=<span class="string">&quot;true&quot;</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;$&#123;wildfly.datasources.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-url</span>&gt;</span>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE<span class="tag">&lt;/<span class="name">connection-url</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">security</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">user-name</span>&gt;</span>sa<span class="tag">&lt;/<span class="name">user-name</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">password</span>&gt;</span>sa<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">security</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">datasource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">drivers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&quot;h2&quot;</span> <span class="attr">module</span>=<span class="string">&quot;com.h2database.h2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">xa-datasource-class</span>&gt;</span>org.h2.jdbcx.JdbcDataSource<span class="tag">&lt;/<span class="name">xa-datasource-class</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">drivers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">datasources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:deployment-scanner:2.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">deployment-scanner</span> <span class="attr">path</span>=<span class="string">&quot;deployments&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.base.dir&quot;</span> <span class="attr">scan-interval</span>=<span class="string">&quot;5000&quot;</span> <span class="attr">runtime-failure-causes-rollback</span>=<span class="string">&quot;$&#123;jboss.deployment.scanner.rollback.on.failure:false&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:discovery:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:distributable-web:2.0&quot;</span> <span class="attr">default-session-management</span>=<span class="string">&quot;default&quot;</span> <span class="attr">default-single-sign-on-management</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">infinispan-session-management</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">cache-container</span>=<span class="string">&quot;web&quot;</span> <span class="attr">granularity</span>=<span class="string">&quot;SESSION&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-affinity</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">infinispan-session-management</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">infinispan-single-sign-on-management</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">cache-container</span>=<span class="string">&quot;web&quot;</span> <span class="attr">cache</span>=<span class="string">&quot;sso&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">local-routing</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:ee:6.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">spec-descriptor-property-replacement</span>&gt;</span>false<span class="tag">&lt;/<span class="name">spec-descriptor-property-replacement</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">concurrent</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">context-services</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">context-service</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/context/default&quot;</span> <span class="attr">use-transaction-setup-provider</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">context-services</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">managed-thread-factories</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">managed-thread-factory</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/factory/default&quot;</span> <span class="attr">context-service</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">managed-thread-factories</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">managed-executor-services</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">managed-executor-service</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/executor/default&quot;</span> <span class="attr">context-service</span>=<span class="string">&quot;default&quot;</span> <span class="attr">hung-task-termination-period</span>=<span class="string">&quot;0&quot;</span> <span class="attr">hung-task-threshold</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">keepalive-time</span>=<span class="string">&quot;5000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">managed-executor-services</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">managed-scheduled-executor-services</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">managed-scheduled-executor-service</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/scheduler/default&quot;</span> <span class="attr">context-service</span>=<span class="string">&quot;default&quot;</span> <span class="attr">hung-task-termination-period</span>=<span class="string">&quot;0&quot;</span> <span class="attr">hung-task-threshold</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">keepalive-time</span>=<span class="string">&quot;3000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">managed-scheduled-executor-services</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">concurrent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-bindings</span> <span class="attr">context-service</span>=<span class="string">&quot;java:jboss/ee/concurrency/context/default&quot;</span> <span class="attr">datasource</span>=<span class="string">&quot;java:jboss/datasources/ExampleDS&quot;</span> <span class="attr">managed-executor-service</span>=<span class="string">&quot;java:jboss/ee/concurrency/executor/default&quot;</span> <span class="attr">managed-scheduled-executor-service</span>=<span class="string">&quot;java:jboss/ee/concurrency/scheduler/default&quot;</span> <span class="attr">managed-thread-factory</span>=<span class="string">&quot;java:jboss/ee/concurrency/factory/default&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:ee-security:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:ejb3:9.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">session-bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">stateless</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean-instance-pool-ref</span> <span class="attr">pool-name</span>=<span class="string">&quot;slsb-strict-max-pool&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">stateless</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">stateful</span> <span class="attr">default-access-timeout</span>=<span class="string">&quot;5000&quot;</span> <span class="attr">cache-ref</span>=<span class="string">&quot;simple&quot;</span> <span class="attr">passivation-disabled-cache-ref</span>=<span class="string">&quot;simple&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">singleton</span> <span class="attr">default-access-timeout</span>=<span class="string">&quot;5000&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">session-bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pools</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean-instance-pools</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strict-max-pool</span> <span class="attr">name</span>=<span class="string">&quot;mdb-strict-max-pool&quot;</span> <span class="attr">derive-size</span>=<span class="string">&quot;from-cpu-count&quot;</span> <span class="attr">instance-acquisition-timeout</span>=<span class="string">&quot;5&quot;</span> <span class="attr">instance-acquisition-timeout-unit</span>=<span class="string">&quot;MINUTES&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strict-max-pool</span> <span class="attr">name</span>=<span class="string">&quot;slsb-strict-max-pool&quot;</span> <span class="attr">derive-size</span>=<span class="string">&quot;from-worker-pools&quot;</span> <span class="attr">instance-acquisition-timeout</span>=<span class="string">&quot;5&quot;</span> <span class="attr">instance-acquisition-timeout-unit</span>=<span class="string">&quot;MINUTES&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean-instance-pools</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">pools</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">caches</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">&quot;simple&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">&quot;distributable&quot;</span> <span class="attr">passivation-store-ref</span>=<span class="string">&quot;infinispan&quot;</span> <span class="attr">aliases</span>=<span class="string">&quot;passivating clustered&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">caches</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">passivation-stores</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">passivation-store</span> <span class="attr">name</span>=<span class="string">&quot;infinispan&quot;</span> <span class="attr">cache-container</span>=<span class="string">&quot;ejb&quot;</span> <span class="attr">max-size</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">passivation-stores</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">async</span> <span class="attr">thread-pool-name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timer-service</span> <span class="attr">thread-pool-name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">default-data-store</span>=<span class="string">&quot;default-file-store&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data-stores</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">file-data-store</span> <span class="attr">name</span>=<span class="string">&quot;default-file-store&quot;</span> <span class="attr">path</span>=<span class="string">&quot;timer-service-data&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.data.dir&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">data-stores</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timer-service</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote</span> <span class="attr">cluster</span>=<span class="string">&quot;ejb&quot;</span> <span class="attr">connectors</span>=<span class="string">&quot;http-remoting-connector&quot;</span> <span class="attr">thread-pool-name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">channel-creation-options</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">&quot;MAX_OUTBOUND_MESSAGES&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1234&quot;</span> <span class="attr">type</span>=<span class="string">&quot;remoting&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">channel-creation-options</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">remote</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thread-pools</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thread-pool</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;60&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thread-pool</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thread-pools</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-security-domain</span> <span class="attr">value</span>=<span class="string">&quot;other&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">application-security-domain</span> <span class="attr">name</span>=<span class="string">&quot;other&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-missing-method-permissions-deny-access</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">statistics</span> <span class="attr">enabled</span>=<span class="string">&quot;$&#123;wildfly.ejb3.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">log-system-exceptions</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:elytron:15.0&quot;</span> <span class="attr">final-providers</span>=<span class="string">&quot;combined-providers&quot;</span> <span class="attr">disallowed-providers</span>=<span class="string">&quot;OracleUcrypto&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">providers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aggregate-providers</span> <span class="attr">name</span>=<span class="string">&quot;combined-providers&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">providers</span> <span class="attr">name</span>=<span class="string">&quot;elytron&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">providers</span> <span class="attr">name</span>=<span class="string">&quot;openssl&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">aggregate-providers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-loader</span> <span class="attr">name</span>=<span class="string">&quot;elytron&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.security.elytron&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-loader</span> <span class="attr">name</span>=<span class="string">&quot;openssl&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.openssl&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">providers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">audit-logging</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">file-audit-log</span> <span class="attr">name</span>=<span class="string">&quot;local-audit&quot;</span> <span class="attr">path</span>=<span class="string">&quot;audit.log&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.log.dir&quot;</span> <span class="attr">format</span>=<span class="string">&quot;JSON&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">audit-logging</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">security-domains</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">security-domain</span> <span class="attr">name</span>=<span class="string">&quot;ManagementDomain&quot;</span> <span class="attr">default-realm</span>=<span class="string">&quot;ManagementRealm&quot;</span> <span class="attr">permission-mapper</span>=<span class="string">&quot;default-permission-mapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;ManagementRealm&quot;</span> <span class="attr">role-decoder</span>=<span class="string">&quot;groups-to-roles&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span> <span class="attr">role-mapper</span>=<span class="string">&quot;super-user-mapper&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">security-domain</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">security-domain</span> <span class="attr">name</span>=<span class="string">&quot;ApplicationDomain&quot;</span> <span class="attr">default-realm</span>=<span class="string">&quot;ApplicationRealm&quot;</span> <span class="attr">permission-mapper</span>=<span class="string">&quot;default-permission-mapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;ApplicationRealm&quot;</span> <span class="attr">role-decoder</span>=<span class="string">&quot;groups-to-roles&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">security-domain</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">security-domains</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">security-realms</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">identity-realm</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span> <span class="attr">identity</span>=<span class="string">&quot;$local&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">properties-realm</span> <span class="attr">name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">users-properties</span> <span class="attr">path</span>=<span class="string">&quot;application-users.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span> <span class="attr">digest-realm-name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groups-properties</span> <span class="attr">path</span>=<span class="string">&quot;application-roles.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">properties-realm</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">properties-realm</span> <span class="attr">name</span>=<span class="string">&quot;ManagementRealm&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">users-properties</span> <span class="attr">path</span>=<span class="string">&quot;mgmt-users.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span> <span class="attr">digest-realm-name</span>=<span class="string">&quot;ManagementRealm&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groups-properties</span> <span class="attr">path</span>=<span class="string">&quot;mgmt-groups.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">properties-realm</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">security-realms</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">simple-permission-mapper</span> <span class="attr">name</span>=<span class="string">&quot;default-permission-mapper&quot;</span> <span class="attr">mapping-mode</span>=<span class="string">&quot;first&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission-mapping</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">principal</span> <span class="attr">name</span>=<span class="string">&quot;anonymous&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;default-permissions&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">permission-mapping</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission-mapping</span> <span class="attr">match-all</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;login-permission&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;default-permissions&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">permission-mapping</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">simple-permission-mapper</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constant-realm-mapper</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span> <span class="attr">realm-name</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">simple-role-decoder</span> <span class="attr">name</span>=<span class="string">&quot;groups-to-roles&quot;</span> <span class="attr">attribute</span>=<span class="string">&quot;groups&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constant-role-mapper</span> <span class="attr">name</span>=<span class="string">&quot;super-user-mapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">role</span> <span class="attr">name</span>=<span class="string">&quot;SuperUser&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">constant-role-mapper</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">permission-sets</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;login-permission&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.wildfly.security.auth.permission.LoginPermission&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">permission-set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;default-permissions&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.wildfly.extension.batch.jberet.deployment.BatchPermission&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.batch.jberet&quot;</span> <span class="attr">target-name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.wildfly.transaction.client.RemoteTransactionPermission&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.transaction.client&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.jboss.ejb.client.RemoteEJBPermission&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.ejb-client&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">permission-set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">permission-sets</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;management-http-authentication&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ManagementDomain&quot;</span> <span class="attr">http-server-mechanism-factory</span>=<span class="string">&quot;global&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;DIGEST&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ManagementRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">http-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;application-http-authentication&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span> <span class="attr">http-server-mechanism-factory</span>=<span class="string">&quot;global&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;BASIC&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">http-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-http-server-mechanism-factory</span> <span class="attr">name</span>=<span class="string">&quot;global&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">http</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sasl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sasl-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;management-sasl-authentication&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;configured&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ManagementDomain&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;JBOSS-LOCAL-USER&quot;</span> <span class="attr">realm-mapper</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;DIGEST-MD5&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ManagementRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">sasl-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sasl-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;application-sasl-authentication&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;configured&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;JBOSS-LOCAL-USER&quot;</span> <span class="attr">realm-mapper</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;DIGEST-MD5&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">sasl-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configurable-sasl-server-factory</span> <span class="attr">name</span>=<span class="string">&quot;configured&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;elytron&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wildfly.sasl.local-user.default-user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$local&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wildfly.sasl.local-user.challenge-path&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.server.temp.dir&#125;/auth&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configurable-sasl-server-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mechanism-provider-filtering-sasl-server-factory</span> <span class="attr">name</span>=<span class="string">&quot;elytron&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;global&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">filters</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">provider-name</span>=<span class="string">&quot;WildFlyElytron&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">filters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">mechanism-provider-filtering-sasl-server-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-sasl-server-factory</span> <span class="attr">name</span>=<span class="string">&quot;global&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">sasl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tls</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-store</span> <span class="attr">name</span>=<span class="string">&quot;applicationKS&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;Coship7000?&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">implementation</span> <span class="attr">type</span>=<span class="string">&quot;JKS&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">file</span> <span class="attr">path</span>=<span class="string">&quot;coship_pair.jks&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-store</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-manager</span> <span class="attr">name</span>=<span class="string">&quot;applicationKM&quot;</span> <span class="attr">key-store</span>=<span class="string">&quot;applicationKS&quot;</span> <span class="attr">generate-self-signed-certificate-host</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;Coship7000?&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-manager</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">server-ssl-context</span> <span class="attr">name</span>=<span class="string">&quot;applicationSSC&quot;</span> <span class="attr">key-manager</span>=<span class="string">&quot;applicationKM&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tls</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:elytron-oidc-client:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:health:1.0&quot;</span> <span class="attr">security-enabled</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:infinispan:13.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;ejb&quot;</span> <span class="attr">default-cache</span>=<span class="string">&quot;passivation&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;PROTOSTREAM&quot;</span> <span class="attr">aliases</span>=<span class="string">&quot;sfsb&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.wildfly.clustering.ejb.infinispan&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;passivation&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">file-store</span> <span class="attr">passivation</span>=<span class="string">&quot;true&quot;</span> <span class="attr">purge</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;web&quot;</span> <span class="attr">default-cache</span>=<span class="string">&quot;passivation&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;PROTOSTREAM&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.wildfly.clustering.web.infinispan&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;passivation&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">file-store</span> <span class="attr">passivation</span>=<span class="string">&quot;true&quot;</span> <span class="attr">purge</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;sso&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;server&quot;</span> <span class="attr">default-cache</span>=<span class="string">&quot;default&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;PROTOSTREAM&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.wildfly.clustering.server&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;hibernate&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;JBOSS&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.infinispan.hibernate-cache&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;entity&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">heap-memory</span> <span class="attr">size</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">max-idle</span>=<span class="string">&quot;100000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;local-query&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">heap-memory</span> <span class="attr">size</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">max-idle</span>=<span class="string">&quot;100000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;timestamps&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;pending-puts&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">max-idle</span>=<span class="string">&quot;60000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:io:3.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">worker</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">buffer-pool</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jaxrs:2.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jca:5.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">archive-validation</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">fail-on-error</span>=<span class="string">&quot;true&quot;</span> <span class="attr">fail-on-warn</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean-validation</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-workmanager</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">short-running-threads</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">core-threads</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">queue-length</span> <span class="attr">count</span>=<span class="string">&quot;500&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;1000&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;30&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">short-running-threads</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">long-running-threads</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">core-threads</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">queue-length</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;10&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">long-running-threads</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">default-workmanager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cached-connection-manager</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jdr:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jmx:1.3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">expose-resolved-model</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">expose-expression-model</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remoting-connector</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jpa:1.1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jpa</span> <span class="attr">default-extended-persistence-inheritance</span>=<span class="string">&quot;DEEP&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jsf:1.1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:mail:4.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mail-session</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/mail/Default&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">smtp-server</span> <span class="attr">outbound-socket-binding-ref</span>=<span class="string">&quot;mail-smtp&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">mail-session</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:metrics:1.0&quot;</span> <span class="attr">security-enabled</span>=<span class="string">&quot;false&quot;</span> <span class="attr">exposed-subsystems</span>=<span class="string">&quot;*&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;$&#123;wildfly.metrics.prefix:wildfly&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:microprofile-config-smallrye:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:microprofile-jwt-smallrye:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:microprofile-opentracing-smallrye:3.0&quot;</span> <span class="attr">default-tracer</span>=<span class="string">&quot;jaeger&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jaeger-tracer</span> <span class="attr">name</span>=<span class="string">&quot;jaeger&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sampler-configuration</span> <span class="attr">sampler-type</span>=<span class="string">&quot;const&quot;</span> <span class="attr">sampler-param</span>=<span class="string">&quot;1.0&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">jaeger-tracer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:naming:2.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote-naming</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:pojo:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:remoting:4.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http-connector</span> <span class="attr">name</span>=<span class="string">&quot;http-remoting-connector&quot;</span> <span class="attr">connector-ref</span>=<span class="string">&quot;default&quot;</span> <span class="attr">sasl-authentication-factory</span>=<span class="string">&quot;application-sasl-authentication&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:request-controller:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:resource-adapters:6.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:sar:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:security-manager:1.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">deployment-permissions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maximum-set</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class</span>=<span class="string">&quot;java.security.AllPermission&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">maximum-set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">deployment-permissions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:transactions:6.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">core-environment</span> <span class="attr">node-identifier</span>=<span class="string">&quot;$&#123;jboss.tx.node.id:1&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">process-id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">uuid</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">process-id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">core-environment</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">recovery-environment</span> <span class="attr">socket-binding</span>=<span class="string">&quot;txn-recovery-environment&quot;</span> <span class="attr">status-socket-binding</span>=<span class="string">&quot;txn-status-manager&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">coordinator-environment</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;$&#123;wildfly.transactions.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">object-store</span> <span class="attr">path</span>=<span class="string">&quot;tx-object-store&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.data.dir&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:undertow:12.0&quot;</span> <span class="attr">default-server</span>=<span class="string">&quot;default-server&quot;</span> <span class="attr">default-virtual-host</span>=<span class="string">&quot;default-host&quot;</span> <span class="attr">default-servlet-container</span>=<span class="string">&quot;default&quot;</span> <span class="attr">default-security-domain</span>=<span class="string">&quot;other&quot;</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;$&#123;wildfly.undertow.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">buffer-cache</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">&quot;default-server&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-listener</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">socket-binding</span>=<span class="string">&quot;http&quot;</span> <span class="attr">redirect-socket</span>=<span class="string">&quot;https&quot;</span> <span class="attr">enable-http2</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">https-listener</span> <span class="attr">name</span>=<span class="string">&quot;https&quot;</span> <span class="attr">socket-binding</span>=<span class="string">&quot;https&quot;</span> <span class="attr">ssl-context</span>=<span class="string">&quot;applicationSSC&quot;</span> <span class="attr">enable-http2</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&quot;default-host&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- &lt;location name=&quot;/&quot; handler=&quot;welcome-content&quot;/&gt; --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">http-invoker</span> <span class="attr">http-authentication-factory</span>=<span class="string">&quot;application-http-authentication&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">servlet-container</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">jsp-config</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">websockets</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">servlet-container</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;handlers&gt;</span></span><br><span class="line"><span class="comment">                &lt;file name=&quot;welcome-content&quot; path=&quot;$&#123;jboss.home.dir&#125;/welcome-content&quot;/&gt;</span></span><br><span class="line"><span class="comment">            &lt;/handlers&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">application-security-domain</span> <span class="attr">name</span>=<span class="string">&quot;other&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;subsystem xmlns=&quot;urn:jboss:domain:webservices:2.0&quot; statistics-enabled=&quot;$&#123;wildfly.webservices.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;&gt;</span></span><br><span class="line"><span class="comment">            &lt;wsdl-host&gt;$&#123;jboss.bind.address:127.0.0.1&#125;&lt;/wsdl-host&gt;</span></span><br><span class="line"><span class="comment">            &lt;endpoint-config name=&quot;Standard-Endpoint-Config&quot;/&gt;</span></span><br><span class="line"><span class="comment">            &lt;endpoint-config name=&quot;Recording-Endpoint-Config&quot;&gt;</span></span><br><span class="line"><span class="comment">                &lt;pre-handler-chain name=&quot;recording-handlers&quot; protocol-bindings=&quot;##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM&quot;&gt;</span></span><br><span class="line"><span class="comment">                    &lt;handler name=&quot;RecordingHandler&quot; class=&quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;/&gt;</span></span><br><span class="line"><span class="comment">                &lt;/pre-handler-chain&gt;</span></span><br><span class="line"><span class="comment">            &lt;/endpoint-config&gt;</span></span><br><span class="line"><span class="comment">            &lt;client-config name=&quot;Standard-Client-Config&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;/subsystem&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:weld:4.0&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interfaces</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;any&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">any-address</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;management&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inet-address</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.bind.address.management:127.0.0.1&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;public&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inet-address</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.bind.address:127.0.0.1&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interfaces</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">socket-binding-group</span> <span class="attr">name</span>=<span class="string">&quot;standard-sockets&quot;</span> <span class="attr">default-interface</span>=<span class="string">&quot;any&quot;</span> <span class="attr">port-offset</span>=<span class="string">&quot;$&#123;jboss.socket.binding.port-offset:8&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;socket-binding name=&quot;ajp&quot; port=&quot;$&#123;jboss.ajp.port:8009&#125;&quot;/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;http&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.http.port:18888&#125;&quot;</span> <span class="attr">fixed-port</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;https&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.https.port:8443&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-http&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.http.port:9990&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-https&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.https.port:9993&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-recovery-environment&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4712&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-status-manager&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4713&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">outbound-socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;mail-smtp&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote-destination</span> <span class="attr">host</span>=<span class="string">&quot;$&#123;jboss.mail.server.host:localhost&#125;&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.mail.server.port:25&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">outbound-socket-binding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">socket-binding-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1><span id="使用创建的handler"><span id="inline-blue">使用创建的handler</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">root-logger</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">root-logger</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="使用创建的handler"><span id="inline-blue">使用创建的handler</span></span></h1><p><img src="/images/WildFly/WildFly_20230427_001.png" alt="wildFly日志优化"></p>
]]></content>
      <categories>
        <category>JAXB</category>
      </categories>
      <tags>
        <tag>WildFly</tag>
      </tags>
  </entry>
  <entry>
    <title>JAXB性能优化</title>
    <url>/JAXB/blogs/JAXB%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%A7%8Bjaxbutilspan"><span id="inline-blue">原始JAXBUtil</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-bluejaxb%E4%BC%98%E5%8C%96span"><span id="inline-blue">JAXB优化</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>接口并发压力测试下，RPS耗时非常严重，使用jstack命令抓取堆栈，发现线程在JAXBUtil.jaxbStreamToBean(JAXBUtil.java:314)方法耗时特别严重。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;http-0.0.0.0-8080-472&quot;</span> daemon prio=<span class="number">10</span> tid=<span class="number">0x00007f4a00371000</span> nid=<span class="number">0x11891</span> runnable [<span class="number">0x00007f46c003d000</span>]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at java.util.zip.ZipFile.getEntry(Native Method)</span><br><span class="line">	at java.util.zip.ZipFile.getEntry(ZipFile.java:<span class="number">162</span>)</span><br><span class="line">	- locked &lt;<span class="number">0x0000000744023910</span>&gt; (a java.util.jar.JarFile)</span><br><span class="line">	at java.util.jar.JarFile.getEntry(JarFile.java:<span class="number">208</span>)</span><br><span class="line">	at java.util.jar.JarFile.getJarEntry(JarFile.java:<span class="number">191</span>)</span><br><span class="line">	at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:<span class="number">757</span>)</span><br><span class="line">	at sun.misc.URLClassPath.getResource(URLClassPath.java:<span class="number">169</span>)</span><br><span class="line">	at sun.misc.URLClassPath.getResource(URLClassPath.java:<span class="number">221</span>)</span><br><span class="line">	at java.lang.ClassLoader.getBootstrapResource(ClassLoader.java:<span class="number">1151</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResource(ClassLoader.java:<span class="number">1000</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResource(ClassLoader.java:<span class="number">998</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResource(ClassLoader.java:<span class="number">998</span>)</span><br><span class="line">	at org.jboss.classloader.plugins.loader.ClassLoaderToLoaderAdapter.getResource(ClassLoaderToLoaderAdapter.java:<span class="number">117</span>)</span><br><span class="line">	at org.jboss.classloader.spi.ClassLoaderDomain.getResourceFromParent(ClassLoaderDomain.java:<span class="number">475</span>)</span><br><span class="line">	at org.jboss.classloader.spi.ClassLoaderDomain.beforeGetResource(ClassLoaderDomain.java:<span class="number">431</span>)</span><br><span class="line">	at org.jboss.classloader.spi.base.BaseClassLoaderDomain.getResource(BaseClassLoaderDomain.java:<span class="number">418</span>)</span><br><span class="line">	at org.jboss.classloader.spi.base.BaseClassLoaderDomain.getResource(BaseClassLoaderDomain.java:<span class="number">1136</span>)</span><br><span class="line">	at org.jboss.classloader.spi.base.BaseClassLoader.getResource(BaseClassLoader.java:<span class="number">473</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:<span class="number">1193</span>)</span><br><span class="line">	at org.apache.xerces.parsers.SecuritySupport$<span class="number">6.</span>run(Unknown Source)</span><br><span class="line">	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at org.apache.xerces.parsers.SecuritySupport.getResourceAsStream(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.ObjectFactory.findJarServiceProvider(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.jaxp.SAXParserImpl.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(Unknown Source)</span><br><span class="line">	at javax.xml.bind.helpers.AbstractUnmarshallerImpl.getXMLReader(AbstractUnmarshallerImpl.java:<span class="number">86</span>)</span><br><span class="line">	at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:<span class="number">137</span>)</span><br><span class="line">	at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:<span class="number">184</span>)</span><br><span class="line">	at com.coship.dhm.usm.util.JAXBUtil.jaxbStreamToBean(JAXBUtil.java:<span class="number">269</span>)</span><br><span class="line">	at com.coship.dhm.usm.util.JAXBUtil.jaxbStreamToBean(JAXBUtil.java:<span class="number">314</span>)</span><br><span class="line">	at com.longvision.adapter.ngod.a7.getfoldercontents.action.GetRootContentsAction.getRootContents(GetRootContentsAction.java:<span class="number">77</span>)</span><br><span class="line">	at sun.reflect.GeneratedMethodAccessor437.invoke(Unknown Source)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">25</span>)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Method.java:<span class="number">597</span>)</span><br><span class="line">	at ognl.OgnlRuntime.invokeMethod(OgnlRuntime.java:<span class="number">892</span>)</span><br><span class="line">	at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:<span class="number">1294</span>)</span><br><span class="line">	at ognl.ObjectMethodAccessor.callMethod(ObjectMethodAccessor.java:<span class="number">68</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethodWithDebugInfo(XWorkMethodAccessor.java:<span class="number">117</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethod(XWorkMethodAccessor.java:<span class="number">108</span>)</span><br><span class="line">	at ognl.OgnlRuntime.callMethod(OgnlRuntime.java:<span class="number">1370</span>)</span><br><span class="line">	at ognl.ASTMethod.getValueBody(ASTMethod.java:<span class="number">91</span>)</span><br><span class="line">	at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:<span class="number">212</span>)</span><br><span class="line">	at ognl.SimpleNode.getValue(SimpleNode.java:<span class="number">258</span>)</span><br><span class="line">	at ognl.Ognl.getValue(Ognl.java:<span class="number">467</span>)</span><br><span class="line">	at ognl.Ognl.getValue(Ognl.java:<span class="number">431</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.OgnlUtil$<span class="number">3.</span>execute(OgnlUtil.java:<span class="number">352</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.OgnlUtil.compileAndExecuteMethod(OgnlUtil.java:<span class="number">404</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.OgnlUtil.callMethod(OgnlUtil.java:<span class="number">350</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:<span class="number">430</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:<span class="number">290</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">251</span>)</span><br><span class="line">	at com.longvision.adapter.ngod.interceptor.InterfaceMonitor.doService(InterfaceMonitor.java:<span class="number">220</span>)</span><br><span class="line">	at com.longvision.adapter.ngod.interceptor.InterfaceMonitor.intercept(InterfaceMonitor.java:<span class="number">147</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.DeprecationInterceptor.intercept(DeprecationInterceptor.java:<span class="number">41</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:<span class="number">256</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:<span class="number">168</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:<span class="number">265</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:<span class="number">76</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:<span class="number">138</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:<span class="number">229</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:<span class="number">229</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:<span class="number">191</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:<span class="number">73</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.DateTextFieldInterceptor.intercept(DateTextFieldInterceptor.java:<span class="number">125</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:<span class="number">91</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:<span class="number">253</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:<span class="number">100</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:<span class="number">141</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:<span class="number">145</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:<span class="number">171</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:<span class="number">140</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:<span class="number">164</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:<span class="number">193</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:<span class="number">189</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:<span class="number">54</span>)</span><br><span class="line">	at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:<span class="number">575</span>)</span><br><span class="line">	at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:<span class="number">434</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">206</span>)</span><br><span class="line">	at com.coship.system.filter.SystemFilter.doFilter(SystemFilter.java:<span class="number">57</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">206</span>)</span><br><span class="line">	at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:<span class="number">96</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">206</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:<span class="number">191</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:<span class="number">190</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:<span class="number">92</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:<span class="number">126</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:<span class="number">70</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:<span class="number">127</span>)</span><br><span class="line">	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:<span class="number">102</span>)</span><br><span class="line">	at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:<span class="number">158</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:<span class="number">109</span>)</span><br><span class="line">	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:<span class="number">330</span>)</span><br><span class="line">	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:<span class="number">829</span>)</span><br><span class="line">	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:<span class="number">598</span>)</span><br><span class="line">	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:<span class="number">447</span>)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:<span class="number">662</span>)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="原始jaxbutil"><span id="inline-blue">原始JAXBUtil</span></span></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.JAXBContext;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.JAXBException;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Marshaller;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Unmarshaller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.exception.AAAException;</span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.util.StringUtil;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JAXB工具类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 903889</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JAXBUtil</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Object</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String ENCODING = <span class="string">&quot;UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = Logger.getLogger(JAXBUtil.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, JAXBContext&gt; JAXBContextMap = <span class="keyword">new</span> Hashtable&lt;String, JAXBContext&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t 待转换为XML格式的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">String <span class="title">jaxbBeanToStr</span><span class="params">(T t)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Marshaller marshaller = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        String xmlString = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream outs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            outs = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            JAXBContext context = getJAXBContext(t.getClass());</span><br><span class="line">            marshaller = context.createMarshaller();</span><br><span class="line"></span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_ENCODING, ENCODING);<span class="comment">// UTF-8</span></span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, <span class="keyword">true</span>);</span><br><span class="line">            marshaller.marshal(t, outs);</span><br><span class="line">            xmlString = <span class="keyword">new</span> String(outs.toByteArray(), ENCODING);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//修改为非chunked格式响应</span></span><br><span class="line">                    <span class="comment">//outs.flush();</span></span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e1)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> xmlString;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用JAXB处理从Bean到流的过程，此方法供写XML使用</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t</span></span><br><span class="line"><span class="comment">     *            包含内容的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outs</span></span><br><span class="line"><span class="comment">     *            一个干净的输出流，经过处理后，内容会注入到该流中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> JAXBException</span></span><br><span class="line"><span class="comment">     *             当包含内容的对象和JAXB模板class不匹配时抛出，实际此处不会抛出该异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">jaxbBeanToStream</span><span class="params">(T t, OutputStream outs)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            String xmlString = jaxbBeanToStr(t);</span><br><span class="line">            outs.write(xmlString.getBytes(ENCODING));</span><br><span class="line"></span><br><span class="line">            log.info(<span class="string">&quot;\n==================================&quot;</span> + t.getClass().getName()</span><br><span class="line">                    + <span class="string">&quot;===返回结果=======================================\n&quot;</span> + xmlString);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//修改为非chunked格式响应</span></span><br><span class="line">                    <span class="comment">//outs.flush();</span></span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable ex)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, String requestXML)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Unmarshaller um = <span class="keyword">null</span>;</span><br><span class="line">        T result = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayInputStream ins = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            JAXBContext context = getJAXBContext(clazz);</span><br><span class="line">            um = context.createUnmarshaller();</span><br><span class="line">            ins = <span class="keyword">new</span> ByteArrayInputStream(requestXML.getBytes(ENCODING));</span><br><span class="line">            <span class="comment">// 输出流内容</span></span><br><span class="line">            result = (T) um.unmarshal(ins);<span class="comment">// 编码问题再前面已经处理，只需要按JVM的编码处理即可</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;解析XML文件出错,请检查发送报文！&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (ins != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    ins.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable ex)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, InputStream inputStream)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String requestXML;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            requestXML = convertStreamToString(inputStream);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (log.isInfoEnabled())</span><br><span class="line">            &#123;</span><br><span class="line">                log.info(<span class="string">&quot;---requestXML---&quot;</span> + requestXML);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;解析XML文件出错,请检查发送报文！&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jaxbStreamToBean(clazz, requestXML);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 简单创建实例,缓存</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> JAXBException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JAXBContext <span class="title">getJAXBContext</span><span class="params">(Class&lt;?&gt; clazz)</span> <span class="keyword">throws</span> JAXBException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        JAXBContext context = JAXBContextMap.get(clazz.getName());</span><br><span class="line">        <span class="keyword">if</span> (context == <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            context = JAXBContext.newInstance(clazz);</span><br><span class="line">            JAXBContextMap.put(clazz.getName(), context);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">convertStreamToString</span><span class="params">(InputStream is)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e1)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        String line = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sb.append(line + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (IOException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(String errorCode, String errorMessage, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(errorCode) &amp;&amp; StringUtil.isNil(errorMessage))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line"></span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(Exception e, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            String errorCode = <span class="keyword">null</span>;</span><br><span class="line">            String errorMessage = <span class="keyword">null</span>;</span><br><span class="line">            NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">            <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AAAException)</span><br><span class="line">            &#123;</span><br><span class="line">                AAAException iepgRuntimeException = (AAAException) e;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(iepgRuntimeException.getErrCode()) &amp;&amp; StringUtil.isNil(e.getMessage()))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = iepgRuntimeException.getErrCode();</span><br><span class="line">                    errorMessage = e.getMessage();</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (AAAException e1)</span><br><span class="line">            &#123;</span><br><span class="line">                log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>main方法多线程执行的情况下缓存几乎没有作用，耗时特别严重。<br><img src="/images/JAXB/JAXB_20230421_001.png" alt="JAXB性能优化"></p>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>JAXBContent类是线程安全的、Unmarshal、Marshal是非线程安全的。<br>JAXBContent采用单例进行实例化，map缓存class对应的JAXBContent实例。<br>多线程的情况下执行发现缓存的JAXBContent没有作用，在jaxbBeanToStr和jaxbStreamToBean添加synchorized修饰的情况下，性能有很大提升，但在接口高并发的情况下，两个方法都有获取同步锁的消耗。同时Unmarshal、Marshal的编码和解码有一定耗时，综合考虑之下，决定采用官方推荐用法，将JAXBContent实例交由spring管理，unmarshal,marshall采用线程池实现,jaxb对应的spring文件如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;    </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Pool (un)marshallers to improve performance --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jaxbContext&quot;</span> <span class="attr">class</span>=<span class="string">&quot;javax.xml.bind.JAXBContext&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">factory-method</span>=<span class="string">&quot;newInstance&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.SessionStop<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.request.RequestPlaylist<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.request.RequestSecret<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.UsmDcssDelete<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.response.ContentRef<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.response.PhysicalPlaylist<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.response.RespSecret<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;marshallerTarget&quot;</span> <span class="attr">class</span>=<span class="string">&quot;javax.xml.bind.Marshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">factory-bean</span>=<span class="string">&quot;jaxbContext&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;createMarshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	 </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;unmarshallerTarget&quot;</span> <span class="attr">class</span>=<span class="string">&quot;javax.xml.bind.Unmarshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">factory-bean</span>=<span class="string">&quot;jaxbContext&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;createUnmarshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;poolTargetSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.target.CommonsPoolTargetSource&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;marshallerTarget&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	 </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;unmarshallerPoolTargetSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.target.CommonsPoolTargetSource&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;unmarshallerTarget&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;marshaller&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">value</span>=<span class="string">&quot;marshaller&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;poolTargetSource&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	 </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;unmarshaller&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">value</span>=<span class="string">&quot;unmarshaller&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;unmarshallerPoolTargetSource&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>applicationContext-jaxb.xml文件放在/src/main/resources目录下即可。<br>constructor-arg节点配置的是由@XmlRootElement注解的xml根节点类路径，多个接口的情况下需要都配置上。</p>
<h1><span id="jaxb优化"><span id="inline-blue">JAXB优化</span></span></h1><p>JAXB.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.JAXBException;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Marshaller;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Unmarshaller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.exception.AAAException;</span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.util.StringUtil;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JAXB工具类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JAXBUtil</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Object</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String ENCODING = <span class="string">&quot;UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = Logger.getLogger(JAXBUtil.class);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Unmarshaller unmarshaller = (Unmarshaller) SpringContextUtil.getBean(<span class="string">&quot;unmarshaller&quot;</span>);;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Marshaller marshaller = (Marshaller) SpringContextUtil.getBean(<span class="string">&quot;marshaller&quot;</span>);;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t 待转换为XML格式的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  &lt;T&gt;   <span class="function">String <span class="title">jaxbBeanToStr</span><span class="params">(T t)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String xmlString = <span class="keyword">null</span>;</span><br><span class="line">        Date startTime = <span class="keyword">new</span> Date();</span><br><span class="line">        ByteArrayOutputStream outs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            outs = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_ENCODING, ENCODING);<span class="comment">// UTF-8</span></span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, <span class="keyword">true</span>);</span><br><span class="line">            marshaller.marshal(t, outs);</span><br><span class="line">            xmlString = <span class="keyword">new</span> String(outs.toByteArray(), ENCODING);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(e.getMessage(),e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    outs.flush();</span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e1)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Date endTime = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(<span class="string">&quot;marshaller耗时：&quot;</span>+(endTime.getTime()-startTime.getTime())+<span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> xmlString;       </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, String requestXML)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        </span><br><span class="line">        T result = <span class="keyword">null</span>;</span><br><span class="line">        Date startTime = <span class="keyword">new</span> Date();</span><br><span class="line">        ByteArrayInputStream ins = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;	</span><br><span class="line">                ins = <span class="keyword">new</span> ByteArrayInputStream(requestXML.getBytes(ENCODING));</span><br><span class="line">                <span class="comment">// 输出流内容</span></span><br><span class="line">                result = (T) unmarshaller.unmarshal(ins);<span class="comment">// 编码问题再前面已经处理，只需要按JVM的编码处理即可   </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;JAXBUtil.jaxbStreamToBean(): Error parsing XML file, please check the sending message!&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (ins != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    ins.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable egnoreEx)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Date endTime = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(<span class="string">&quot;unmarshaller耗时：&quot;</span>+(endTime.getTime()-startTime.getTime())+<span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用JAXB处理从Bean到流的过程，此方法供写XML使用</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t</span></span><br><span class="line"><span class="comment">     *            包含内容的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outs</span></span><br><span class="line"><span class="comment">     *            一个干净的输出流，经过处理后，内容会注入到该流中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> JAXBException</span></span><br><span class="line"><span class="comment">     *             当包含内容的对象和JAXB模板class不匹配时抛出，实际此处不会抛出该异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">jaxbBeanToStream</span><span class="params">(T t, OutputStream outs)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            String xmlString = jaxbBeanToStr(t);</span><br><span class="line">            outs.write(xmlString.getBytes(ENCODING));</span><br><span class="line"></span><br><span class="line">            log.info(<span class="string">&quot;\n==================================&quot;</span> + t.getClass().getName()</span><br><span class="line">                    + <span class="string">&quot;===返回结果=======================================\n&quot;</span> + xmlString);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//修改为非chunked格式响应</span></span><br><span class="line">                    <span class="comment">//outs.flush();</span></span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable ex)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, InputStream inputStream)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String requestXML;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            requestXML = convertStreamToString(inputStream);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (log.isInfoEnabled())</span><br><span class="line">            &#123;</span><br><span class="line">                log.info(<span class="string">&quot;---requestXML---&quot;</span> + requestXML);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;解析XML文件出错,请检查发送报文！&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jaxbStreamToBean(clazz, requestXML);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">convertStreamToString</span><span class="params">(InputStream is)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e1)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        String line = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sb.append(line + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (IOException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(String errorCode, String errorMessage, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(errorCode) &amp;&amp; StringUtil.isNil(errorMessage))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line"></span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(Exception e, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            String errorCode = <span class="keyword">null</span>;</span><br><span class="line">            String errorMessage = <span class="keyword">null</span>;</span><br><span class="line">            NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">            <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AAAException)</span><br><span class="line">            &#123;</span><br><span class="line">                AAAException iepgRuntimeException = (AAAException) e;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(iepgRuntimeException.getErrCode()) &amp;&amp; StringUtil.isNil(e.getMessage()))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = iepgRuntimeException.getErrCode();</span><br><span class="line">                    errorMessage = e.getMessage();</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (AAAException e1)</span><br><span class="line">            &#123;</span><br><span class="line">                log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SpringContextUtil.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Unmarshaller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringContextUtil</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> ClassPathXmlApplicationContext context;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span></span><br><span class="line">        &#123;</span><br><span class="line">            context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;spring/*.xml&quot;</span>);    </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ApplicationContext <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Holder.context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getBean</span><span class="params">(String name)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (T) Holder.context.getBean(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	Unmarshaller unmarshaller =(Unmarshaller)  SpringContextUtil.getBean(<span class="string">&quot;unmarshaller&quot;</span>);</span><br><span class="line">        System.out.println(unmarshaller.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>JAXBTest.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.base;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coship.usm.action.bean.request.RequestPlaylist;</span><br><span class="line"><span class="keyword">import</span> com.coship.usm.action.bean.response.PhysicalPlaylist;</span><br><span class="line"><span class="keyword">import</span> com.coship.usm.util.JAXBUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JAXBTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;num;i++)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">				</span><br><span class="line">				<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					<span class="keyword">try</span> </span><br><span class="line">					&#123;</span><br><span class="line">						RequestPlaylist requestPlaylist = <span class="keyword">new</span> RequestPlaylist();</span><br><span class="line">						requestPlaylist.setDeviceID(<span class="string">&quot;111&quot;</span>);</span><br><span class="line">						requestPlaylist.setPT(<span class="string">&quot;11&quot;</span>);</span><br><span class="line">						requestPlaylist.setSessionID(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">						requestPlaylist.setSMName(<span class="string">&quot;name111&quot;</span>);</span><br><span class="line">						requestPlaylist.setUsage(<span class="string">&quot;50&quot;</span>);</span><br><span class="line">						JAXBUtil.jaxbBeanToStr(requestPlaylist);</span><br><span class="line">						</span><br><span class="line">						</span><br><span class="line">				    	String requestXML = <span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot; standalone=\&quot;yes\&quot;?&gt;\r\n&quot;</span> + </span><br><span class="line">				    			<span class="string">&quot;&lt;RequestPlaylist deviceID=\&quot;111\&quot; PT=\&quot;11\&quot; sessionID=\&quot;111\&quot; SMName=\&quot;name111\&quot; useage=\&quot;50\&quot;/&gt;&quot;</span>;</span><br><span class="line">						</span><br><span class="line">				    	JAXBUtil.jaxbStreamToBean(PhysicalPlaylist.class, requestXML);</span><br><span class="line">				    	</span><br><span class="line">					&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;).start();		</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/images/JAXB/JAXB_20230421_002.png" alt="JAXB性能优化验证"></p>
]]></content>
      <categories>
        <category>JAXB</category>
      </categories>
      <tags>
        <tag>JAXB</tag>
      </tags>
  </entry>
  <entry>
    <title>Locust接口压力性能问题</title>
    <url>/Locust/blogs/Locust%E6%8E%A5%E5%8F%A3%E5%8E%8B%E5%8A%9B%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%84%9A%E6%9C%AC%E5%86%85%E5%AE%B9span"><span id="inline-blue">脚本内容</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a><ul>
<li><a href="#span-idinline-blue%E5%8D%95%E6%9C%BA%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8Fspan"><span id="inline-blue">单机主从模式</span></a></li>
<li><a href="#span-idinline-blue%E5%A4%9A%E6%9C%BA%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8Fspan"><span id="inline-blue">多机主从模式</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>使用locust做接口压力测试，发现RPS在550个用户的并发压力下急剧下降，查看接口所在服务器的cpu、内存、IO、网络传输状态都是正常。<br>查看cpu使用情况命令：top<br>多核的情况下使用mpstat -P ALL 2 1000 可以查看具体每个核上的压力<br>查看内存使用情况命令：free -g<br>查看IO使用情况命令：iostat<br>查看磁盘使用情况命令：dstat<br>查看网络连接、路由表信息命令：netstat</p>
<p>locust的启动命令：locust -f getprograms.py -P 8888<br>-P:指定启动端口<br>-f:指定压测脚本<br>上述命令在压测脚本所在目录执行。</p>
<h1><span id="脚本内容"><span id="inline-blue">脚本内容</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">from locust import task, between</span><br><span class="line">from locust.contrib.fasthttp import FastHttpUser</span><br><span class="line">from locust.user import HttpUser</span><br><span class="line">import datetime</span><br><span class="line">import uuid</span><br><span class="line">import hashlib</span><br><span class="line">import queue</span><br><span class="line">import random</span><br><span class="line">import time</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">class httpResponse(HttpUser):</span><br><span class="line">    network_timeout = 5.0</span><br><span class="line">    connection_timeout = 5.0</span><br><span class="line">    wait_time = between(0.9, 1.1)</span><br><span class="line"></span><br><span class="line">    @task</span><br><span class="line">    def GetPrograms(self):</span><br><span class="line">        #put_data =&quot;&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27; standalone=&#x27;yes&#x27;?&gt;&lt;GetPrograms client=&#x27;8350110822716631&#x27; portalId=&#x27;1&#x27; account=&#x27;8350110822716631&#x27; languageCode=&#x27;Zh-CN&#x27; regionCode=&#x27;1&#x27; profile=&#x27;1.0&#x27; startDateTime=&#x27;20230406060000&#x27; days=&#x27;0&#x27; serviceType=&#x27;BTV&#x27; channelIds=&#x27;103301311&#x27;/&gt;\n&quot;</span><br><span class="line">        put_data =&quot;&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27; standalone=&#x27;yes&#x27;?&gt;&lt;GetPrograms client=&#x27;8350110822716631&#x27; portalId=&#x27;1&#x27; account=&#x27;8350110822716631&#x27; languageCode=&#x27;Zh-CN&#x27; regionCode=&#x27;1&#x27; profile=&#x27;1.0&#x27; startDateTime=&#x27;20230415120000&#x27; days=&#x27;0&#x27; serviceType=&#x27;BTV&#x27; channelIds=&#x27;105523956&#x27;/&gt;\n&quot;</span><br><span class="line">        headers = &#123;</span><br><span class="line">           &quot;Content-Type&quot;: &quot;application/xml&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        url = &#x27;GetPrograms&#x27;</span><br><span class="line">    #     # try:</span><br><span class="line">    #     #     self.client.get(url, name=&quot;layoutScheduleList&quot;)</span><br><span class="line">    #     # except Exception as e:</span><br><span class="line">    #     #     time.sleep(3)</span><br><span class="line">    #     #     raise e</span><br><span class="line">        self.client.post(url, data=put_data, headers=headers, name=&quot;GetPrograms&quot;)</span><br></pre></td></tr></table></figure>

<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>locust对多核系统支持不是很好，常规启动的情况下locust会把所有的压力给到一个cpu核心，导致单核cpu占用过高后，RPS急剧下降。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>采用单机主从模式或则多机主从模式</p>
<h2><span id="单机主从模式"><span id="inline-blue">单机主从模式</span></span></h2><p>启动主节点命令： locust -f getprograms.py -P 8888 –master<br>启动从节点命令： locust -f getprograms.py -P 8888 –worker<br>上述命令可以打开多个linux窗口，针对同一个脚本执行，不需要拷贝多份脚本。</p>
<h2><span id="多机主从模式"><span id="inline-blue">多机主从模式</span></span></h2><p>启动主节点命令： locust -f getprograms.py -P 8888 –master<br>启动从节点命令： locust -f getprograms.py -P 8888 -master-host=10.9.217.33<br>上述命令可以打开多个linux窗口，针对同一个脚本执行，不需要拷贝多份脚本。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Locust/Locust_20230421_001.png" alt="Jboss容器自启动"></p>
]]></content>
      <categories>
        <category>Locust</category>
      </categories>
      <tags>
        <tag>Locust</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux查看当前目录空间占用</title>
    <url>/Linux/blogs/Linux%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E7%A9%BA%E9%97%B4%E5%8D%A0%E7%94%A8/</url>
    <content><![CDATA[<h2><span id="查看空间占用"><span id="inline-blue">查看空间占用</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN elasticsearch-2.4.4]# ls</span><br><span class="line">bin  config  data  EsToolNew  jdk1.7.0_67  lib  LICENSE.txt  logs  modules  NOTICE.txt  pid  plugins  README.textile</span><br><span class="line"><span class="meta">#</span><span class="bash">查看当前目录占用情况</span></span><br><span class="line">[root@lwdCSCDN elasticsearch-2.4.4]# du -sh *</span><br><span class="line">336K	bin</span><br><span class="line">16K	config</span><br><span class="line">31G	data</span><br><span class="line">20M	EsToolNew</span><br><span class="line">285M	jdk1.7.0_67</span><br><span class="line">25M	lib</span><br><span class="line">12K	LICENSE.txt</span><br><span class="line">229M	logs</span><br><span class="line">5.0M	modules</span><br><span class="line">4.0K	NOTICE.txt</span><br><span class="line">4.0K	pid</span><br><span class="line">21M	plugins</span><br><span class="line">12K	README.textile</span><br></pre></td></tr></table></figure>
<h2><span id="查看指定层级空间占用"><span id="inline-blue">查看指定层级空间占用</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN elasticsearch-2.4.4]# du -h --max-depth=2</span><br><span class="line">6.7M	./EsToolNew/logs</span><br><span class="line">4.0K	./EsToolNew/json</span><br><span class="line">4.0K	./EsToolNew/arthas-output</span><br><span class="line">20M	./EsToolNew</span><br><span class="line">31G	./data/recommend</span><br><span class="line">31G	./data</span><br><span class="line">142M	./jdk1.7.0_67/jre</span><br><span class="line">1.8M	./jdk1.7.0_67/man</span><br><span class="line">756K	./jdk1.7.0_67/bin</span><br><span class="line">208K	./jdk1.7.0_67/include</span><br><span class="line">116M	./jdk1.7.0_67/lib</span><br><span class="line">5.0M	./jdk1.7.0_67/db</span><br><span class="line">285M	./jdk1.7.0_67</span><br><span class="line">336K	./bin</span><br><span class="line">229M	./logs</span><br><span class="line">25M	./lib</span><br><span class="line">92K	./modules/reindex</span><br><span class="line">512K	./modules/lang-expression</span><br><span class="line">4.4M	./modules/lang-groovy</span><br><span class="line">5.0M	./modules</span><br><span class="line">9.3M	./plugins/sql</span><br><span class="line">9.5M	./plugins/ik</span><br><span class="line">964K	./plugins/bigdesk</span><br><span class="line">216K	./plugins/marvel-agent</span><br><span class="line">164K	./plugins/license</span><br><span class="line">21M	./plugins</span><br><span class="line">4.0K	./config/scripts</span><br><span class="line">16K	./config</span><br><span class="line">31G	.</span><br></pre></td></tr></table></figure>
<p>参数说明：<br>    -a或-all 显示目录中个别文件的大小。<br>-b或-bytes 显示目录或文件大小时，以byte为单位。<br>-c或–total 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。<br>-D或–dereference-args 显示指定符号连接的源文件大小。<br>-h或–human-readable 以K，M，G为单位，提高信息的可读性。<br>-H或–si 与-h参数相同，但是K，M，G是以1000为换算单位。<br>-k或–kilobytes 以1024 bytes为单位。<br>-l或–count-links 重复计算硬件连接的文件。<br>-L&lt;符号连接&gt;或–dereference&lt;符号连接&gt; 显示选项中所指定符号连接的源文件大小。<br>-m或–megabytes 以1MB为单位。<br>-s或–summarize 仅显示总计。<br>-S或–separate-dirs 显示个别目录的大小时，并不含其子目录的大小。<br>-x或–one-file-xystem 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。<br>-X&lt;文件&gt;或–exclude-from=&lt;文件&gt; 在&lt;文件&gt;指定目录或文件。<br>–exclude=&lt;目录或文件&gt; 略过指定的目录或文件。<br>–max-depth=&lt;目录层数&gt; 超过指定层数的目录后，予以忽略。<br>–help 显示帮助。<br>–version 显示版本信息。</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux文件清空操作</title>
    <url>/Linux/blogs/Linux%E6%96%87%E4%BB%B6%E6%B8%85%E7%A9%BA%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h2><span id="文件清空"><span id="inline-blue">文件清空</span></span></h2><p>windows7 64</p>
<h3><span id="使用重定向的方法"><span id="inline-blue">使用重定向的方法</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> test.txt</span> </span><br></pre></td></tr></table></figure>

<h3><span id="使用true命令重定向清空文件"><span id="inline-blue">使用true命令重定向清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">true &gt; test.txt</span><br></pre></td></tr></table></figure>

<h3><span id="使用catcpdd命令及devnull设备来清空文件"><span id="inline-blue">使用cat/cp/dd命令及/dev/null设备来清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /dev/null &gt;  test.txt</span><br><span class="line">cp -f /dev/null test.txt </span><br><span class="line">dd if=/dev/null of=test.txt</span><br></pre></td></tr></table></figure>
<h3><span id="使用echo命令清空文件"><span id="inline-blue">使用echo命令清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo -n &quot;&quot; &gt; test.txt    ==&gt;要加上&quot;-n&quot;参数，默认情况下会&quot;\n&quot;，也就是回车符</span><br></pre></td></tr></table></figure>

<h3><span id="使用truncate命令清空文件"><span id="inline-blue">使用truncate命令清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">truncate -s 0 test.txt   -s参数用来设定文件的大小，清空文件，就设定为0；</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux环境查看class文件编译版本信息</title>
    <url>/Linux/blogs/Linux%E7%8E%AF%E5%A2%83%E6%9F%A5%E7%9C%8Bclass%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<h2><span id="查看class文件编译版本信息"><span id="inline-blue">查看class文件编译版本信息</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN common]# javap -v CommonContent.class </span><br><span class="line">Classfile /usr/local/moui_nanjing/V242/coship-oms/webapps/oms/WEB-INF/classes/com/coship/oms/common/CommonContent.class</span><br><span class="line">  Last modified 2021-11-16; size 474 bytes</span><br><span class="line">  MD5 checksum def74d7189fc3d20401e9070e4c8ad37</span><br><span class="line">  Compiled from &quot;CommonContent.java&quot;</span><br><span class="line">public class com.coship.oms.common.CommonContent</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 52</span><br><span class="line"><span class="meta">#</span><span class="bash"> major version: 52  代表是java编译版本为1.8</span></span><br></pre></td></tr></table></figure>
<h2><span id="java编译器版本对应关系"><span id="inline-blue">Java编译器版本对应关系</span></span></h2><pre><code>Unsupported major.minor version 52.0 对应于 JDK1.8（JRE1.8） </code></pre>
<p>　　Unsupported major.minor version 51.0 对应于 JDK1.7（JRE1.7） </p>
<p>　　Unsupported major.minor version 50.0 对应于 JDK1.6（JRE1.6） </p>
<p>　　Unsupported major.minor version 49.0 对应于 JDK1.5（JRE1.5）</p>
<h2><span id="兼容关系"><span id="inline-blue">兼容关系</span></span></h2><p>Java低版本编译的jar包，可以在高版本Java编译环境下运行，反之，Java高版本编译的jar包不能在低版本Java环境运行</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Ant从Maven的pom.xml文件获取内容</title>
    <url>/Maven/blogs/Ant%E4%BB%8EMaven%E7%9A%84pom.xml%E6%96%87%E4%BB%B6%E8%8E%B7%E5%8F%96%E5%86%85%E5%AE%B9/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluebuildxml%E8%AF%BB%E5%8F%96pomxml%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">build.xml读取pom.xml版本信息</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="buildxml读取pomxml版本信息"><span id="inline-blue">build.xml读取pom.xml版本信息</span></span></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#引入pom.xml文件，以xml方式读取文件内容，节点属性以pom.project开始</span><br><span class="line">&lt;xmlproperty file&#x3D;&quot;pom.xml&quot; prefix&#x3D;&quot;pom&quot; &#x2F;&gt;</span><br><span class="line">&lt;echo&gt;The version is $&#123;pom.project.version&#125;&lt;&#x2F;echo&gt;</span><br></pre></td></tr></table></figure>
<p>读取pom.xml文件中properties节点下的log4j-version信息<br>pom.xml文件中的内容如下</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="name">java-version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java-version</span>&gt;</span></span><br><span class="line">  		<span class="comment">&lt;!-- maven打包忽略 test目录编译、不执行测试用例--&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="name">maven.test.skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">maven.test.skip</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">org.springframework-version</span>&gt;</span>3.0.5.RELEASE<span class="tag">&lt;/<span class="name">org.springframework-version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">org.apache.struts-version</span>&gt;</span>2.3.32<span class="tag">&lt;/<span class="name">org.apache.struts-version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">log4j-version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">log4j-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ant的构建文件build.xml用法如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xmlproperty</span> <span class="attr">file</span>=<span class="string">&quot;pom.xml&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;pom&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">echo</span>&gt;</span>The version is $&#123;pom.project.properties.log4j-version&#125;<span class="tag">&lt;/<span class="name">echo</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Maven/Maven_20230303_001.png" alt="ant读取pom文件信息"></p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows删除文件失败解决办法</title>
    <url>/Windows/blogs/Windows%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>远程工具向日葵采用复制粘贴方式拷贝文件至远程vpn环境卡死，取消一直不能成功的情况下在系统进程结束相关的进程，结果eclipse开发工具编译相关的项目文件提示之前拷贝文件的目录在执行mvn clean命令过程中无法删除，在工具外部执行强制删除也是一样的现象，无法修改文件的属性（不能变更文件夹的所有者和权限信息）</p>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>文件夹被远程工具占用<br>定位方法：<br>windows任务栏右键启动任务管理器，打开资源监视器<br>搜索框填写被占用的文件夹名称，查找出对应的句柄，右键结束占用即可。<br><img src="/images/Windows/Windows_20230302_001.png" alt="任务管理器"><br><img src="/images/Windows/Windows_20230302_002.png" alt="资源监视器"></p>
]]></content>
      <categories>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>aapt_linux_64解析apk异常</title>
    <url>/Java/blogs/aapt_linux_64%E8%A7%A3%E6%9E%90apk%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>./aapt_linux_64 d badging qMGFk7zYMWcN.apk<br>参数b标识dump<br>参数badging标识输出详细信息，执行提示如下错误</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./aapt_linux_64 d badging qMGFk7zYMWcN.apk</span><br><span class="line">./aapt_linux_64: error while loading shared libraries: libstdc++.so.6: wrong ELF class: ELFCLASS64</span><br></pre></td></tr></table></figure>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>aapt_linux_64工具是32位，目前系统普遍是64位，导致调用32位的库函数失败<br>64位库函数所在目录/usr/lib64<br>32为库函数所在目录/usr/lib</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>将/usr/lib目录下libstdc++.so.6指向32为库函数文件<br>准备一个32位libstdc++.so.6文件，例如libstdc++.so.6.0.13<br>将原始/usr/lib目录下libstdc++.so.6删除，并创建软连接指向libstdc++.so.6.0.13</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/lib</span><br><span class="line"><span class="meta">#</span><span class="bash">删除原始软连接</span> </span><br><span class="line">rm -f libstdc++.so.6</span><br><span class="line"><span class="meta">#</span><span class="bash">创建软连接</span></span><br><span class="line">ln -s libstdc++.so.6.0.13 libstdc++.so.6</span><br></pre></td></tr></table></figure>
<p>查看一个库函数是32位还是64位</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">file libstdc++.so.6.0.13</span><br><span class="line">libstdc++.so.6.0.13: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, stripped</span><br></pre></td></tr></table></figure>
<p>定位一个库函数所在目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">locate命令从数据库文件内查找，效率比find高</span></span><br><span class="line">locate libstdc++.so.6</span><br><span class="line">/usr/lib/libstdc++.so.6</span><br><span class="line">/usr/lib/libstdc++.so.6.0.13</span><br><span class="line">/usr/lib/libstdc++.so.6.0.26</span><br><span class="line">/usr/lib/libstdc++.so.6.bak</span><br><span class="line">/usr/lib64/libstdc++.so.6</span><br><span class="line">/usr/lib64/libstdc++.so.6.0.13</span><br><span class="line">/usr/lib64/libstdc++.so.6.0.26</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN home]# ./aapt_linux_64 d  badging qMGFk7zYMWcN.apk</span><br><span class="line">./aapt_linux_64: /usr/lib/libz.so.1: no version information available (required by ./aapt_linux_64)</span><br><span class="line">package: name=&#x27;com.goke.lmm&#x27; versionCode=&#x27;20220721&#x27; versionName=&#x27;1.29&#x27;</span><br><span class="line">sdkVersion:&#x27;19&#x27;</span><br><span class="line">targetSdkVersion:&#x27;25&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.GET_TASKS&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.READ_EXTERNAL_STORAGE&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.WRITE_EXTERNAL_STORAGE&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.INTERNET&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.GOKE_SYSTEM_MANAGER_SERVICE&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.SYSTEM_ALERT_WINDOW&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.ACCESS_NETWORK_STATE&#x27;</span><br><span class="line">application-label:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ca:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-da:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fa:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ja:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-nb:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-de:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-af:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-bg:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-th:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fi:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hi:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-vi:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sk:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-uk:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-el:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-nl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-tl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-am:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-in:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ko:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ro:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ar:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-tr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-cs:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-es:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-it:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-lt:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pt:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hu:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ru:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zu:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-lv:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sv:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-iw:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sw:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-bs_BA:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fr_CA:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-lo_LA:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-en_GB:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-bn_BD:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-et_EE:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ka_GE:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ky_KG:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-km_KH:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zh_HK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-si_LK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-mk_MK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ur_PK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sq_AL:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hy_AM:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-my_MM:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zh_CN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pa_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ta_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-te_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ml_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-en_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-kn_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-mr_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-gu_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-mn_MN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ne_NP:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pt_BR:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-gl_ES:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-eu_ES:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-is_IS:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-es_US:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pt_PT:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-en_AU:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zh_TW:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-be_BY:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ms_MY:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-az_AZ:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-kk_KZ:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-uz_UZ:&#x27;媒体中心&#x27;</span><br><span class="line">application-icon-120:&#x27;res/mipmap-mdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-160:&#x27;res/mipmap-mdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-240:&#x27;res/mipmap-hdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-320:&#x27;res/mipmap-xhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-480:&#x27;res/mipmap-xxhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-640:&#x27;res/mipmap-xxxhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-65534:&#x27;res/mipmap-xxxhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application: label=&#x27;媒体中心&#x27; icon=&#x27;res/mipmap-mdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-debuggable</span><br><span class="line">launchable-activity: name=&#x27;com.goke.lmm.MainActivity&#x27;  label=&#x27;&#x27; icon=&#x27;&#x27;</span><br><span class="line">uses-feature:&#x27;android.hardware.touchscreen&#x27;</span><br><span class="line">uses-implied-feature:&#x27;android.hardware.touchscreen&#x27;,&#x27;assumed you require a touch screen unless explicitly made optional&#x27;</span><br><span class="line">uses-feature:&#x27;android.hardware.screen.landscape&#x27;</span><br><span class="line">uses-implied-feature:&#x27;android.hardware.screen.landscape&#x27;,&#x27;one or more activities have specified a landscape orientation&#x27;</span><br><span class="line">main</span><br><span class="line">other-activities</span><br><span class="line">supports-screens: &#x27;small&#x27; &#x27;normal&#x27; &#x27;large&#x27; &#x27;xlarge&#x27;</span><br><span class="line">supports-any-density: &#x27;true&#x27;</span><br><span class="line">locales: &#x27;--_--&#x27; &#x27;ca&#x27; &#x27;da&#x27; &#x27;fa&#x27; &#x27;ja&#x27; &#x27;nb&#x27; &#x27;de&#x27; &#x27;af&#x27; &#x27;bg&#x27; &#x27;th&#x27; &#x27;fi&#x27; &#x27;hi&#x27; &#x27;vi&#x27; &#x27;sk&#x27; &#x27;uk&#x27; &#x27;el&#x27; &#x27;nl&#x27; &#x27;pl&#x27; &#x27;sl&#x27; &#x27;tl&#x27; &#x27;am&#x27; &#x27;in&#x27; &#x27;ko&#x27; &#x27;ro&#x27; &#x27;ar&#x27; &#x27;</span><br><span class="line">fr&#x27; &#x27;hr&#x27; &#x27;sr&#x27; &#x27;tr&#x27; &#x27;cs&#x27; &#x27;es&#x27; &#x27;it&#x27; &#x27;lt&#x27; &#x27;pt&#x27; &#x27;hu&#x27; &#x27;ru&#x27; &#x27;zu&#x27; &#x27;lv&#x27; &#x27;sv&#x27; &#x27;iw&#x27; &#x27;sw&#x27; &#x27;bs_BA&#x27; &#x27;fr_CA&#x27; &#x27;lo_LA&#x27; &#x27;en_GB&#x27; &#x27;bn_BD&#x27; &#x27;et_EE&#x27; &#x27;ka_GE&#x27; &#x27;ky_KG&#x27; &#x27;km_KH&#x27; &#x27;zh_HK&#x27; &#x27;si_LK&#x27; &#x27;mk_MK&#x27; &#x27;ur_PK&#x27; &#x27;sq_AL&#x27; &#x27;hy_AM&#x27; &#x27;my_MM&#x27; &#x27;zh_CN&#x27; &#x27;pa_IN&#x27; &#x27;ta_IN&#x27; &#x27;te_IN&#x27; &#x27;ml_IN&#x27; &#x27;en_IN&#x27; &#x27;kn_IN&#x27; &#x27;mr_IN&#x27; &#x27;gu_IN&#x27; &#x27;mn_MN&#x27; &#x27;ne_NP&#x27; &#x27;pt_BR&#x27; &#x27;gl_ES&#x27; &#x27;eu_ES&#x27; &#x27;is_IS&#x27; &#x27;es_US&#x27; &#x27;pt_PT&#x27; &#x27;en_AU&#x27; &#x27;zh_TW&#x27; &#x27;be_BY&#x27; &#x27;ms_MY&#x27; &#x27;az_AZ&#x27; &#x27;kk_KZ&#x27; &#x27;uz_UZ&#x27;densities: &#x27;120&#x27; &#x27;160&#x27; &#x27;240&#x27; &#x27;320&#x27; &#x27;480&#x27; &#x27;640&#x27; &#x27;65534&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>排查二维码接口访问异常</title>
    <url>/Java/blogs/%E6%8E%92%E6%9F%A5%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%8E%A5%E5%8F%A3%E8%AE%BF%E9%97%AE%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>请求获取二维码接口异常，异常信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">The server encountered an internal error () that prevented it from fulfilling this request.&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;exception&lt;/b&gt; &lt;pre&gt;java.lang.IllegalStateException: getOutputStream() has already been called for this response</span><br><span class="line">	org.apache.catalina.connector.Response.getWriter(Response.java:619)</span><br><span class="line">	org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)</span><br><span class="line">	org.apache.velocity.tools.view.VelocityViewServlet.mergeTemplate(VelocityViewServlet.java:315)</span><br><span class="line">	org.apache.velocity.tools.view.VelocityViewServlet.doRequest(VelocityViewServlet.java:220)</span><br><span class="line">	org.apache.velocity.tools.view.VelocityViewServlet.doGet(VelocityViewServlet.java:182)</span><br><span class="line">	javax.servlet.http.HttpServlet.service(HttpServlet.java:617)</span><br><span class="line">	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)</span><br><span class="line">	org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:164)</span><br><span class="line">	org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:191)</span><br><span class="line">	com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:372)</span><br><span class="line">	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:276)</span><br><span class="line">	org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)</span><br><span class="line">	org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:575)</span><br><span class="line">	org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:81)</span><br><span class="line">	org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:99)</span><br><span class="line">	com.coship.system.filter.SystemFilter.doFilter(SystemFilter.java:59)</span><br><span class="line">	org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)</span><br></pre></td></tr></table></figure>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>1、接口之前一直是正常的，最近修改了访问的jsp页面，但逻辑没怎么变动，按照道理应该是没问题的，网上查询对应的错误信息，都表示与同时response.getWriter()与response.getOutputStream() 冲突有关，但排查代码后发现并没有使用上的冲突，并且之前一直是好的。<br>2、服务部署在jboss容器/usr/local/portal/wildfly26-portal/standalone/deployments/portal.war目录，其中替换了部分逻辑页面<br>3、日志目录bin/portal/log/info下莫名生成名为NotifyGetPaymentAction文件，打开发现是jsp文件，与替换页面的时间点一致，猜测问题可能是由于这个文件引起的，删除后重启，接口访问正常。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL树形结构辅助函数</title>
    <url>/MySQL/blogs/MySQL%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A1%A8%E7%BB%93%E6%9E%84span"><span id="inline-blue">表结构</span></a></li>
<li><a href="#span-idinline-bluequerychildrenspan"><span id="inline-blue">queryChildren</span></a></li>
<li><a href="#span-idinline-bluegetparentlistspan"><span id="inline-blue">getParentList</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="表结构"><span id="inline-blue">表结构</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_iepg_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 16:39:42</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `area`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `area`  (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `parentId` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `remark` <span class="type">varchar</span>(<span class="number">256</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;025&#x27;</span>, <span class="string">&#x27;南京市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南京各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;1502&#x27;</span>, <span class="string">&#x27;江宁&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;江宁布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;1503&#x27;</span>, <span class="string">&#x27;六合&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;1504&#x27;</span>, <span class="string">&#x27;浦口&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1053&#x27;</span>, <span class="string">&#x27;1505&#x27;</span>, <span class="string">&#x27;雨花&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;1506&#x27;</span>, <span class="string">&#x27;高淳&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;1509&#x27;</span>, <span class="string">&#x27;溧水&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;0516&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;徐州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1058&#x27;</span>, <span class="string">&#x27;3202&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;0518&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;连云港各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;3209&#x27;</span>, <span class="string">&#x27;东海&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1061&#x27;</span>, <span class="string">&#x27;3212&#x27;</span>, <span class="string">&#x27;赣榆&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1062&#x27;</span>, <span class="string">&#x27;3025&#x27;</span>, <span class="string">&#x27;灌南&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1063&#x27;</span>, <span class="string">&#x27;3023&#x27;</span>, <span class="string">&#x27;灌云&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1064&#x27;</span>, <span class="string">&#x27;3201&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;0513&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南通各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1066&#x27;</span>, <span class="string">&#x27;3310&#x27;</span>, <span class="string">&#x27;如东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1067&#x27;</span>, <span class="string">&#x27;3305&#x27;</span>, <span class="string">&#x27;通州&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1068&#x27;</span>, <span class="string">&#x27;3308&#x27;</span>, <span class="string">&#x27;启东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1069&#x27;</span>, <span class="string">&#x27;3307&#x27;</span>, <span class="string">&#x27;海门&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1070&#x27;</span>, <span class="string">&#x27;3301&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;0515&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;盐城各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1072&#x27;</span>, <span class="string">&#x27;3022&#x27;</span>, <span class="string">&#x27;阜宁&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1073&#x27;</span>, <span class="string">&#x27;3096&#x27;</span>, <span class="string">&#x27;射阳&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1074&#x27;</span>, <span class="string">&#x27;3054&#x27;</span>, <span class="string">&#x27;滨海&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1075&#x27;</span>, <span class="string">&#x27;3053&#x27;</span>, <span class="string">&#x27;建湖&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1076&#x27;</span>, <span class="string">&#x27;3061&#x27;</span>, <span class="string">&#x27;大丰&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1077&#x27;</span>, <span class="string">&#x27;3052&#x27;</span>, <span class="string">&#x27;东台&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1078&#x27;</span>, <span class="string">&#x27;3055&#x27;</span>, <span class="string">&#x27;响水&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1079&#x27;</span>, <span class="string">&#x27;3051&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;0519&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;常州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1081&#x27;</span>, <span class="string">&#x27;3316&#x27;</span>, <span class="string">&#x27;金坛&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1082&#x27;</span>, <span class="string">&#x27;3065&#x27;</span>, <span class="string">&#x27;溧阳&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1084&#x27;</span>, <span class="string">&#x27;3032&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1085&#x27;</span>, <span class="string">&#x27;0000&#x27;</span>, <span class="string">&#x27;默认布局&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1086&#x27;</span>, <span class="string">&#x27;3204&#x27;</span>, <span class="string">&#x27;丰县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1087&#x27;</span>, <span class="string">&#x27;3095&#x27;</span>, <span class="string">&#x27;贾汪&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;3203&#x27;</span>, <span class="string">&#x27;新沂&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;3024&#x27;</span>, <span class="string">&#x27;铜山&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;3210&#x27;</span>, <span class="string">&#x27;邳州&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1091&#x27;</span>, <span class="string">&#x27;3211&#x27;</span>, <span class="string">&#x27;睢宁&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1092&#x27;</span>, <span class="string">&#x27;3213&#x27;</span>, <span class="string">&#x27;沛县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;0527&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;宿迁各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;3103&#x27;</span>, <span class="string">&#x27;泗阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1095&#x27;</span>, <span class="string">&#x27;3102&#x27;</span>, <span class="string">&#x27;泗洪&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1096&#x27;</span>, <span class="string">&#x27;3064&#x27;</span>, <span class="string">&#x27;沭阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;3101&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;0514&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;扬州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;3205&#x27;</span>, <span class="string">&#x27;仪征&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1100&#x27;</span>, <span class="string">&#x27;3206&#x27;</span>, <span class="string">&#x27;江都&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1101&#x27;</span>, <span class="string">&#x27;3207&#x27;</span>, <span class="string">&#x27;高邮&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;3208&#x27;</span>, <span class="string">&#x27;宝应&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;0517&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;淮安市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1104&#x27;</span>, <span class="string">&#x27;3020&#x27;</span>, <span class="string">&#x27;涟水&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1105&#x27;</span>, <span class="string">&#x27;3021&#x27;</span>, <span class="string">&#x27;淮安区&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1106&#x27;</span>, <span class="string">&#x27;3031&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1107&#x27;</span>, <span class="string">&#x27;3036&#x27;</span>, <span class="string">&#x27;淮阴&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1108&#x27;</span>, <span class="string">&#x27;3037&#x27;</span>, <span class="string">&#x27;洪泽&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1109&#x27;</span>, <span class="string">&#x27;3038&#x27;</span>, <span class="string">&#x27;金湖&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1110&#x27;</span>, <span class="string">&#x27;3063&#x27;</span>, <span class="string">&#x27;盱眙&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;0511&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;镇江市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1112&#x27;</span>, <span class="string">&#x27;3001&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;3004&#x27;</span>, <span class="string">&#x27;扬中&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1114&#x27;</span>, <span class="string">&#x27;3006&#x27;</span>, <span class="string">&#x27;句容&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1116&#x27;</span>, <span class="string">&#x27;3011&#x27;</span>, <span class="string">&#x27;丹徒&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;0523&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1118&#x27;</span>, <span class="string">&#x27;3002&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州分公司&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1119&#x27;</span>, <span class="string">&#x27;3005&#x27;</span>, <span class="string">&#x27;兴化&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州兴化广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1120&#x27;</span>, <span class="string">&#x27;3035&#x27;</span>, <span class="string">&#x27;泰兴&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州泰兴广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1121&#x27;</span>, <span class="string">&#x27;3034&#x27;</span>, <span class="string">&#x27;靖江&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州靖江广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1122&#x27;</span>, <span class="string">&#x27;3033&#x27;</span>, <span class="string">&#x27;姜堰&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州姜堰广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;3317&#x27;</span>, <span class="string">&#x27;武进&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1124&#x27;</span>, <span class="string">&#x27;3056&#x27;</span>, <span class="string">&#x27;盐都&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;3329&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;1510&#x27;</span>, <span class="string">&#x27;栖霞&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;南京市-栖霞区&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;0555&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1130&#x27;</span>, <span class="string">&#x27;3302&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1131&#x27;</span>, <span class="string">&#x27;3113&#x27;</span>, <span class="string">&#x27;丹阳&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;最新修改的区域码&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1133&#x27;</span>, <span class="string">&#x27;0666&#x27;</span>, <span class="string">&#x27;测试布局-单引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1134&#x27;</span>, <span class="string">&#x27;0777&#x27;</span>, <span class="string">&#x27;测试布局-双引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;0510&#x27;</span>, <span class="string">&#x27;无锡市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1136&#x27;</span>, <span class="string">&#x27;199000000001&#x27;</span>, <span class="string">&#x27;用直镇&#x27;</span>, <span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1137&#x27;</span>, <span class="string">&#x27;100000000012&#x27;</span>, <span class="string">&#x27;智慧会龙&#x27;</span>, <span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1142&#x27;</span>, <span class="string">&#x27;3304&#x27;</span>, <span class="string">&#x27;海安&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;1002&#x27;</span>, <span class="string">&#x27;南京&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1144&#x27;</span>, <span class="string">&#x27;100000000236&#x27;</span>, <span class="string">&#x27;江苏有线南京分公司镇名测试&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;南京一镇一屏测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1147&#x27;</span>, <span class="string">&#x27;100000000296&#x27;</span>, <span class="string">&#x27;江苏省公安厅视频会议&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1148&#x27;</span>, <span class="string">&#x27;100000000317&#x27;</span>, <span class="string">&#x27;雪堰镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1149&#x27;</span>, <span class="string">&#x27;100000000318&#x27;</span>, <span class="string">&#x27;前黄镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1150&#x27;</span>, <span class="string">&#x27;100000000319&#x27;</span>, <span class="string">&#x27;礼嘉镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1151&#x27;</span>, <span class="string">&#x27;100000000320&#x27;</span>, <span class="string">&#x27;南夏墅街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1152&#x27;</span>, <span class="string">&#x27;100000000321&#x27;</span>, <span class="string">&#x27;湖塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1153&#x27;</span>, <span class="string">&#x27;100000000322&#x27;</span>, <span class="string">&#x27;牛塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1154&#x27;</span>, <span class="string">&#x27;100000000323&#x27;</span>, <span class="string">&#x27;洛阳镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1155&#x27;</span>, <span class="string">&#x27;100000000324&#x27;</span>, <span class="string">&#x27;横林镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1156&#x27;</span>, <span class="string">&#x27;100000000325&#x27;</span>, <span class="string">&#x27;遥观镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1157&#x27;</span>, <span class="string">&#x27;100000000326&#x27;</span>, <span class="string">&#x27;横山桥镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1158&#x27;</span>, <span class="string">&#x27;100000000327&#x27;</span>, <span class="string">&#x27;郑陆镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1159&#x27;</span>, <span class="string">&#x27;100000000328&#x27;</span>, <span class="string">&#x27;奔牛镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1160&#x27;</span>, <span class="string">&#x27;100000000329&#x27;</span>, <span class="string">&#x27;邹区镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1161&#x27;</span>, <span class="string">&#x27;100000000330&#x27;</span>, <span class="string">&#x27;嘉泽镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1162&#x27;</span>, <span class="string">&#x27;100000000331&#x27;</span>, <span class="string">&#x27;湟里镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1163&#x27;</span>, <span class="string">&#x27;100000000332&#x27;</span>, <span class="string">&#x27;西湖街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1164&#x27;</span>, <span class="string">&#x27;200000000571&#x27;</span>, <span class="string">&#x27;邗江区西湖镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1165&#x27;</span>, <span class="string">&#x27;200000000570&#x27;</span>, <span class="string">&#x27;邗江区杨寿镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1166&#x27;</span>, <span class="string">&#x27;200000000572&#x27;</span>, <span class="string">&#x27;邗江区沙头镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1167&#x27;</span>, <span class="string">&#x27;3062&#x27;</span>, <span class="string">&#x27;如皋&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1169&#x27;</span>, <span class="string">&#x27;100000000336&#x27;</span>, <span class="string">&#x27;溧水本地&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;溧水一镇一屏&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1170&#x27;</span>, <span class="string">&#x27;100000000356&#x27;</span>, <span class="string">&#x27;高淳本地&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1173&#x27;</span>, <span class="string">&#x27;100000000376&#x27;</span>, <span class="string">&#x27;溧水石湫镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1174&#x27;</span>, <span class="string">&#x27;100000000380&#x27;</span>, <span class="string">&#x27;溧水晶桥镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1175&#x27;</span>, <span class="string">&#x27;100000000381&#x27;</span>, <span class="string">&#x27;溧水柘塘镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1176&#x27;</span>, <span class="string">&#x27;100000000378&#x27;</span>, <span class="string">&#x27;溧水白马镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1177&#x27;</span>, <span class="string">&#x27;100000000382&#x27;</span>, <span class="string">&#x27;溧水东屏镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1178&#x27;</span>, <span class="string">&#x27;100000000377&#x27;</span>, <span class="string">&#x27;溧水洪蓝镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1179&#x27;</span>, <span class="string">&#x27;100000000379&#x27;</span>, <span class="string">&#x27;溧水和凤镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1180&#x27;</span>, <span class="string">&#x27;00010&#x27;</span>, <span class="string">&#x27;多屏同看测试组&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1181&#x27;</span>, <span class="string">&#x27;1000000002777&#x27;</span>, <span class="string">&#x27;邳州铁富&#x27;</span>, <span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1182&#x27;</span>, <span class="string">&#x27;100000000396&#x27;</span>, <span class="string">&#x27;石湖乡石湖村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1183&#x27;</span>, <span class="string">&#x27;100000000422&#x27;</span>, <span class="string">&#x27;大彭镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1184&#x27;</span>, <span class="string">&#x27;100000000420&#x27;</span>, <span class="string">&#x27;柳新镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1185&#x27;</span>, <span class="string">&#x27;200000000860&#x27;</span>, <span class="string">&#x27;邗江区瓜洲镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1186&#x27;</span>, <span class="string">&#x27;100000000432&#x27;</span>, <span class="string">&#x27;柳泉镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1188&#x27;</span>, <span class="string">&#x27;15111&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1189&#x27;</span>, <span class="string">&#x27;100000000520&#x27;</span>, <span class="string">&#x27;石湖乡团池村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1190&#x27;</span>, <span class="string">&#x27;100000000524&#x27;</span>, <span class="string">&#x27;石湖乡廖塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1191&#x27;</span>, <span class="string">&#x27;100000000523&#x27;</span>, <span class="string">&#x27;石湖乡池庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1192&#x27;</span>, <span class="string">&#x27;100000000522&#x27;</span>, <span class="string">&#x27;石湖乡乔团村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1193&#x27;</span>, <span class="string">&#x27;100000000521&#x27;</span>, <span class="string">&#x27;石湖乡尤庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1194&#x27;</span>, <span class="string">&#x27;100000000525&#x27;</span>, <span class="string">&#x27;石湖乡驻地&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1195&#x27;</span>, <span class="string">&#x27;100000000518&#x27;</span>, <span class="string">&#x27;石湖乡水库村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1196&#x27;</span>, <span class="string">&#x27;100000000516&#x27;</span>, <span class="string">&#x27;石湖乡大娄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1197&#x27;</span>, <span class="string">&#x27;100000000476&#x27;</span>, <span class="string">&#x27;石湖乡尤塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1198&#x27;</span>, <span class="string">&#x27;100000000517&#x27;</span>, <span class="string">&#x27;石湖乡黄塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1199&#x27;</span>, <span class="string">&#x27;100000000519&#x27;</span>, <span class="string">&#x27;石湖乡贺庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1200&#x27;</span>, <span class="string">&#x27;100000000616&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1201&#x27;</span>, <span class="string">&#x27;200000765252&#x27;</span>, <span class="string">&#x27;宿迁龙河镇1&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1202&#x27;</span>, <span class="string">&#x27;200000775202&#x27;</span>, <span class="string">&#x27;宿迁新庄&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1203&#x27;</span>, <span class="string">&#x27;200000000063&#x27;</span>, <span class="string">&#x27;大仪镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1204&#x27;</span>, <span class="string">&#x27;200000000069&#x27;</span>, <span class="string">&#x27;十二圩镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1206&#x27;</span>, <span class="string">&#x27;200000000900&#x27;</span>, <span class="string">&#x27;广陵区李典镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1207&#x27;</span>, <span class="string">&#x27;200000000920&#x27;</span>, <span class="string">&#x27;邗江区甘泉街道&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1208&#x27;</span>, <span class="string">&#x27;200000000940&#x27;</span>, <span class="string">&#x27;甘泉街道双塘村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1209&#x27;</span>, <span class="string">&#x27;200000782202&#x27;</span>, <span class="string">&#x27;宝应射阳湖&#x27;</span>, <span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1210&#x27;</span>, <span class="string">&#x27;200000784202&#x27;</span>, <span class="string">&#x27;山左口乡北古寨村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1213&#x27;</span>, <span class="string">&#x27;200000787202&#x27;</span>, <span class="string">&#x27;新安街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1214&#x27;</span>, <span class="string">&#x27;200000762204&#x27;</span>, <span class="string">&#x27;zyh603&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;流化测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;200000789208&#x27;</span>, <span class="string">&#x27;草桥&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1216&#x27;</span>, <span class="string">&#x27;200000788203&#x27;</span>, <span class="string">&#x27;高场&#x27;</span>, <span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1217&#x27;</span>, <span class="string">&#x27;200000787203&#x27;</span>, <span class="string">&#x27;钟吾街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1218&#x27;</span>, <span class="string">&#x27;200000789202&#x27;</span>, <span class="string">&#x27;北沟街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1219&#x27;</span>, <span class="string">&#x27;200000789203&#x27;</span>, <span class="string">&#x27;墨河街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1220&#x27;</span>, <span class="string">&#x27;200000789204&#x27;</span>, <span class="string">&#x27;唐店街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1221&#x27;</span>, <span class="string">&#x27;200000789205&#x27;</span>, <span class="string">&#x27;瓦窑镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1222&#x27;</span>, <span class="string">&#x27;200000789206&#x27;</span>, <span class="string">&#x27;港头镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1223&#x27;</span>, <span class="string">&#x27;200000789207&#x27;</span>, <span class="string">&#x27;合沟镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1224&#x27;</span>, <span class="string">&#x27;200000789209&#x27;</span>, <span class="string">&#x27;窑湾镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1225&#x27;</span>, <span class="string">&#x27;200000789210&#x27;</span>, <span class="string">&#x27;棋盘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1226&#x27;</span>, <span class="string">&#x27;200000789211&#x27;</span>, <span class="string">&#x27;马陵山镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1227&#x27;</span>, <span class="string">&#x27;200000789212&#x27;</span>, <span class="string">&#x27;新店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1228&#x27;</span>, <span class="string">&#x27;200000789213&#x27;</span>, <span class="string">&#x27;邵店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1229&#x27;</span>, <span class="string">&#x27;200000789214&#x27;</span>, <span class="string">&#x27;时集镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1230&#x27;</span>, <span class="string">&#x27;200000789215&#x27;</span>, <span class="string">&#x27;高流镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1231&#x27;</span>, <span class="string">&#x27;200000789216&#x27;</span>, <span class="string">&#x27;阿湖镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1232&#x27;</span>, <span class="string">&#x27;200000789217&#x27;</span>, <span class="string">&#x27;双塘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1233&#x27;</span>, <span class="string">&#x27;200000788202&#x27;</span>, <span class="string">&#x27;人民医院&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1235&#x27;</span>, <span class="string">&#x27;200000793202&#x27;</span>, <span class="string">&#x27;西岗街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1236&#x27;</span>, <span class="string">&#x27;200000793203&#x27;</span>, <span class="string">&#x27;八卦洲街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1237&#x27;</span>, <span class="string">&#x27;200000795202&#x27;</span>, <span class="string">&#x27;临河镇&#x27;</span>, <span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1238&#x27;</span>, <span class="string">&#x27;200000800202&#x27;</span>, <span class="string">&#x27;桠溪镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1239&#x27;</span>, <span class="string">&#x27;200000800203&#x27;</span>, <span class="string">&#x27;漆桥镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1240&#x27;</span>, <span class="string">&#x27;200000800204&#x27;</span>, <span class="string">&#x27;砖墙镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1241&#x27;</span>, <span class="string">&#x27;200000802202&#x27;</span>, <span class="string">&#x27;横溪街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1242&#x27;</span>, <span class="string">&#x27;200000802203&#x27;</span>, <span class="string">&#x27;秣陵街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1243&#x27;</span>, <span class="string">&#x27;200000804202&#x27;</span>, <span class="string">&#x27;竹镇镇&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1244&#x27;</span>, <span class="string">&#x27;200000802204&#x27;</span>, <span class="string">&#x27;桥林镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1245&#x27;</span>, <span class="string">&#x27;200000802205&#x27;</span>, <span class="string">&#x27;汤泉镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1246&#x27;</span>, <span class="string">&#x27;200000802206&#x27;</span>, <span class="string">&#x27;星甸镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1247&#x27;</span>, <span class="string">&#x27;200000804203&#x27;</span>, <span class="string">&#x27;雄州街道&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1248&#x27;</span>, <span class="string">&#x27;200000805202&#x27;</span>, <span class="string">&#x27;蒋王街道四联村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1249&#x27;</span>, <span class="string">&#x27;200000805203&#x27;</span>, <span class="string">&#x27;蒋王街道悦来村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="querychildren"><span id="inline-blue">queryChildren</span></span></h1><p>查询当前节点的孩子节点集合(包含自身节点)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_oms_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 17:36:07</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Function structure for queryChildren</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> `queryChildren`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> `queryChildren`(<span class="keyword">parameter</span> <span class="type">INT</span>)</span><br><span class="line"> <span class="keyword">RETURNS</span> <span class="type">varchar</span>(<span class="number">4000</span>) CHARSET utf8</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> sTemp TEXT(<span class="number">60000</span>);</span><br><span class="line">    <span class="keyword">DECLARE</span> sTempChd TEXT(<span class="number">30000</span>);</span><br><span class="line">    <span class="keyword">SET</span> sTemp <span class="operator">=</span> <span class="string">&#x27;-1&#x27;</span>;</span><br><span class="line">    <span class="keyword">SET</span> sTempChd <span class="operator">=</span><span class="built_in">CAST</span>(<span class="keyword">parameter</span> <span class="keyword">AS</span> <span class="type">CHAR</span>);</span><br><span class="line">    WHILE (sTempChd <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>) DO</span><br><span class="line">        <span class="keyword">SET</span> sTemp <span class="operator">=</span> CONCAT(sTemp,<span class="string">&#x27;,&#x27;</span>,sTempChd);</span><br><span class="line">        <span class="keyword">SELECT</span> GROUP_CONCAT(id) <span class="keyword">INTO</span> sTempChd <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> FIND_IN_SET(PARENTID,sTempChd)<span class="operator">&gt;</span><span class="number">0</span>;				</span><br><span class="line">    <span class="keyword">END</span> WHILE;</span><br><span class="line">    <span class="keyword">RETURN</span> sTemp;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>调用示例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> queryChildren(<span class="number">1048</span>);<span class="operator">/</span><span class="operator">/</span>待查询节点ID</span><br></pre></td></tr></table></figure>
<h1><span id="getparentlist"><span id="inline-blue">getParentList</span></span></h1><p>查询当前节点的父级节点(包含自身节点)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_oms_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 17:36:45</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Function structure for getParentList</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> `getParentList`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> `getParentList`(rootId <span class="type">varchar</span>(<span class="number">100</span>))</span><br><span class="line"> <span class="keyword">RETURNS</span> <span class="type">varchar</span>(<span class="number">1000</span>) CHARSET utf8</span><br><span class="line"><span class="keyword">BEGIN</span>   </span><br><span class="line"><span class="keyword">DECLARE</span> fid <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>;   </span><br><span class="line"><span class="keyword">DECLARE</span> str <span class="type">varchar</span>(<span class="number">1000</span>) <span class="keyword">default</span> rootId;   </span><br><span class="line">  </span><br><span class="line">WHILE rootId <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>  do   </span><br><span class="line">    <span class="keyword">SET</span> fid <span class="operator">=</span>(<span class="keyword">SELECT</span> parentId <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> id <span class="operator">=</span> rootId);   </span><br><span class="line">    IF fid <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">THEN</span>   </span><br><span class="line">        <span class="keyword">SET</span> str <span class="operator">=</span> concat(str, <span class="string">&#x27;,&#x27;</span>, fid);   </span><br><span class="line">        <span class="keyword">SET</span> rootId <span class="operator">=</span> fid;   </span><br><span class="line">    <span class="keyword">ELSE</span>   </span><br><span class="line">        <span class="keyword">SET</span> rootId <span class="operator">=</span> fid;   </span><br><span class="line">    <span class="keyword">END</span> IF;   </span><br><span class="line"><span class="keyword">END</span> WHILE;   </span><br><span class="line"><span class="keyword">return</span> str;  </span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>调用SQL示例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> getParentList(<span class="number">1048</span>)<span class="operator">/</span><span class="operator">/</span>待查询节点ID</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL多级区域递归统计实现</title>
    <url>/MySQL/blogs/MySQL%E5%A4%9A%E7%BA%A7%E5%8C%BA%E5%9F%9F%E9%80%92%E5%BD%92%E7%BB%9F%E8%AE%A1%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A6%81%E6%B1%82span"><span id="inline-blue">要求</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="要求"><span id="inline-blue">要求</span></span></h1><p>按照一级城市统计单引擎、双引擎、总数来统计盒子的数量<br>appType:0 单引擎<br>appType:1 双引擎<br>原始数据表结构</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#区域表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `area` (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `parentId` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `remark` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;	</span><br><span class="line"></span><br><span class="line">#上报表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `smartcard_district_relation` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `smartCardId` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;智能卡号&#x27;</span>,</span><br><span class="line">  `statusCode` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;状态码&#x27;</span>,</span><br><span class="line">  `districtCode` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;分公司编码&#x27;</span>,</span><br><span class="line">  `appType` <span class="type">varchar</span>(<span class="number">5</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;盒子类型：0为传统盒子，1为智能盒子&#x27;</span>,</span><br><span class="line">  `factoryName` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;厂商名称&#x27;</span>,</span><br><span class="line">  `createTime` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建/更新时间&#x27;</span>,</span><br><span class="line">  `queryEndTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `queryStartTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `sn` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `idx_smartCardId` (`smartCardId`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">1462231</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;智能卡和分公司编码关联表&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>创建caculateTVboxTotal存储过程及辅助函数queryChildren</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Procedure structure for caculateTVboxTotal</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> `caculateTVboxTotal`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> `caculateTVboxTotal`()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">		</span><br><span class="line">			<span class="comment">/*  游标异常停止标识  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_clear_stop_flag <span class="type">INT</span>(<span class="number">13</span>);</span><br><span class="line">		<span class="comment">/* 区域ID  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_areaId <span class="type">INT</span>(<span class="number">13</span>);		</span><br><span class="line">		<span class="comment">/* 区域码  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_areaCode <span class="type">VARCHAR</span>(<span class="number">60</span>);		</span><br><span class="line">		<span class="comment">/* 任务完成标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_done <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">FALSE</span> ; </span><br><span class="line">		<span class="comment">/*  定义游标 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_cursor <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> (<span class="keyword">SELECT</span> <span class="keyword">distinct</span> areaId,areaCode <span class="keyword">FROM</span> first_level_area );</span><br><span class="line">		<span class="comment">/* 循环结束标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> CONTINUE HANDLER <span class="keyword">FOR</span> <span class="keyword">NOT</span> FOUND <span class="keyword">SET</span> out_done <span class="operator">=</span> <span class="literal">TRUE</span> ; </span><br><span class="line">		</span><br><span class="line">		<span class="comment">/*区域临时表 */</span></span><br><span class="line">		<span class="keyword">DROP</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> t_area;</span><br><span class="line">		<span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> `t_area` (</span><br><span class="line">		`id` <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">		`areaCode` <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">		`areaName` <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">		`parentId` <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">		`remark` <span class="type">varchar</span>(<span class="number">256</span>),</span><br><span class="line">		 KEY `id`(id),</span><br><span class="line">		 KEY `areaCode`(areaCode)</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/* 一级区域临时表，存储一级区域*/</span></span><br><span class="line">		<span class="keyword">DROP</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> first_level_area;</span><br><span class="line">		<span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> first_level_area </span><br><span class="line">			(</span><br><span class="line">			 areaId <span class="type">INT</span>(<span class="number">13</span>),</span><br><span class="line">			 areaCode <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 KEY `areaId` (areaId)</span><br><span class="line">			);</span><br><span class="line">			<span class="comment">/* 一级区域子区域关联表，存储一级区域及子区域集合的关联关系，包含一级区域名称*/</span></span><br><span class="line">			<span class="keyword">DROP</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> first_level_area_relation;</span><br><span class="line">		  <span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> first_level_area_relation </span><br><span class="line">			(</span><br><span class="line">			 currentAreaCode <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 childAreaCode <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 currentAreaName <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 KEY `relation_currentAreaCode` (currentAreaCode),</span><br><span class="line">			  KEY `relation_childAreaCode` (childAreaCode)</span><br><span class="line">			);</span><br><span class="line">			REPLACE <span class="keyword">INTO</span> t_area <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> AREA;</span><br><span class="line">			REPLACE <span class="keyword">INTO</span> first_level_area  <span class="keyword">SELECT</span> ID,areaCode <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> parentId <span class="operator">=</span> <span class="number">-1</span>;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">			</span><br><span class="line">		<span class="comment">/* 遍历游标 */</span></span><br><span class="line">		<span class="keyword">OPEN</span> out_cursor ; </span><br><span class="line">		WHILE <span class="keyword">NOT</span> out_done DO </span><br><span class="line">				<span class="keyword">FETCH</span> out_cursor <span class="keyword">INTO</span> v_areaId,v_areaCode; </span><br><span class="line">				IF <span class="keyword">NOT</span> out_done <span class="keyword">THEN</span> 	</span><br><span class="line">						REPLACE <span class="keyword">INTO</span> first_level_area_relation</span><br><span class="line">						<span class="keyword">SELECT</span> w.areaCode,h.areaCode childAreaCode,w.areaName <span class="keyword">FROM</span> </span><br><span class="line">						(</span><br><span class="line">							<span class="comment">/* 生成一级区域和子区域集合的关联关系 */</span></span><br><span class="line">							<span class="keyword">SELECT</span> q.areaCode,t.childAreaId,q.areaName</span><br><span class="line">							<span class="keyword">FROM</span></span><br><span class="line">							(</span><br><span class="line">								<span class="keyword">SELECT</span> v_areaId <span class="keyword">AS</span> current_areaId,substring_index(substring_index(a.childs,<span class="string">&#x27;,&#x27;</span>,b.help_topic_id<span class="operator">+</span><span class="number">1</span>),<span class="string">&#x27;,&#x27;</span>,<span class="number">-1</span>) childAreaId</span><br><span class="line">								<span class="keyword">FROM</span> </span><br><span class="line">								(<span class="keyword">SELECT</span> queryChildren(v_areaId) childs) a</span><br><span class="line">								<span class="keyword">JOIN</span></span><br><span class="line">								mysql.help_topic b</span><br><span class="line">								<span class="keyword">ON</span> b.help_topic_id <span class="operator">&lt;</span> (length(a.childs) <span class="operator">-</span> length(REPLACE(a.childs,<span class="string">&#x27;,&#x27;</span>,<span class="string">&#x27;&#x27;</span>))<span class="operator">+</span><span class="number">1</span>)</span><br><span class="line">							) t,area q</span><br><span class="line">							<span class="keyword">WHERE</span> t.current_areaId <span class="operator">=</span> q.id</span><br><span class="line">							<span class="keyword">AND</span> t.childAreaId <span class="operator">&lt;&gt;</span> <span class="string">&#x27;-1&#x27;</span></span><br><span class="line">							) w,area h</span><br><span class="line">						<span class="keyword">WHERE</span> w.childAreaId <span class="operator">=</span> h.id;</span><br><span class="line">				<span class="keyword">END</span> IF; </span><br><span class="line">		<span class="keyword">END</span> WHILE; </span><br><span class="line">		<span class="keyword">CLOSE</span> out_cursor ;</span><br><span class="line">		<span class="comment">/* 统计SQL ,利用中间表first_level_area_relation*/</span></span><br><span class="line">		<span class="keyword">SELECT</span></span><br><span class="line">		tq.currentAreaName <span class="keyword">AS</span> &quot;所属地区&quot;,</span><br><span class="line">		tq.currentAreaCode <span class="keyword">AS</span> &quot;区域码&quot;,</span><br><span class="line">		tq.currentAreaName <span class="keyword">AS</span> &quot;区域名称&quot;,</span><br><span class="line">		<span class="built_in">sum</span>(</span><br><span class="line">			<span class="keyword">CASE</span></span><br><span class="line">			<span class="keyword">WHEN</span> appType <span class="operator">=</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">				<span class="number">1</span></span><br><span class="line">			<span class="keyword">ELSE</span></span><br><span class="line">				<span class="number">0</span></span><br><span class="line">			<span class="keyword">END</span></span><br><span class="line">		) <span class="keyword">AS</span> &quot;单引擎数量&quot;,</span><br><span class="line">		<span class="built_in">sum</span>(</span><br><span class="line">			<span class="keyword">CASE</span></span><br><span class="line">			<span class="keyword">WHEN</span> appType <span class="operator">=</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">				<span class="number">1</span></span><br><span class="line">			<span class="keyword">ELSE</span></span><br><span class="line">				<span class="number">0</span></span><br><span class="line">			<span class="keyword">END</span></span><br><span class="line">		) <span class="keyword">AS</span> &quot;双引擎数量&quot;,</span><br><span class="line">		<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">AS</span> &quot;该地区盒子总数量&quot;</span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		smartcard_district_relation s,t_area a,first_level_area_relation tq</span><br><span class="line">		<span class="keyword">WHERE</span> s.districtCode <span class="operator">=</span> tq.childAreaCode</span><br><span class="line">		<span class="keyword">AND</span> tq.childAreaCode <span class="operator">=</span> a.areaCode</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> tq.currentAreaCode</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span>  tq.currentAreaName,tq.currentAreaCode;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Function structure for queryChildren</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> `queryChildren`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> `queryChildren`(<span class="keyword">parameter</span> <span class="type">INT</span>)</span><br><span class="line"> <span class="keyword">RETURNS</span> <span class="type">varchar</span>(<span class="number">4000</span>) CHARSET utf8</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> sTemp TEXT(<span class="number">60000</span>);</span><br><span class="line">    <span class="keyword">DECLARE</span> sTempChd TEXT(<span class="number">30000</span>);</span><br><span class="line">    <span class="keyword">SET</span> sTemp <span class="operator">=</span> <span class="string">&#x27;-1&#x27;</span>;</span><br><span class="line">    <span class="keyword">SET</span> sTempChd <span class="operator">=</span><span class="built_in">CAST</span>(<span class="keyword">parameter</span> <span class="keyword">AS</span> <span class="type">CHAR</span>);</span><br><span class="line">    WHILE (sTempChd <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>) DO</span><br><span class="line">        <span class="keyword">SET</span> sTemp <span class="operator">=</span> CONCAT(sTemp,<span class="string">&#x27;,&#x27;</span>,sTempChd);</span><br><span class="line">        <span class="keyword">SELECT</span> GROUP_CONCAT(id) <span class="keyword">INTO</span> sTempChd <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> FIND_IN_SET(PARENTID,sTempChd)<span class="operator">&gt;</span><span class="number">0</span>;				</span><br><span class="line">    <span class="keyword">END</span> WHILE;</span><br><span class="line">    <span class="keyword">RETURN</span> sTemp;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">call</span> caculateTVboxTotal;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL列转行实现</title>
    <url>/MySQL/blogs/MySQL%E5%88%97%E8%BD%AC%E8%A1%8C%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A6%81%E6%B1%82span"><span id="inline-blue">要求</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="要求"><span id="inline-blue">要求</span></span></h1><p>将字段存储的规则信息拆分为多行<br><img src="/images/mysql/mysql_20230109_003.png" alt="原始表"><br><img src="/images/mysql/mysql_20230109_004.png" alt="新表"></p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>借助mysql.help_topic辅助表实现</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.help_topic_id<span class="operator">+</span><span class="number">1</span>,substring_index(substring_index(a.parentId,<span class="string">&#x27;,&#x27;</span>,b.help_topic_id<span class="operator">+</span><span class="number">1</span>),<span class="string">&#x27;,&#x27;</span>,<span class="number">-1</span>) parentId</span><br><span class="line">								<span class="keyword">FROM</span> </span><br><span class="line">								(<span class="keyword">SELECT</span> <span class="string">&#x27;0516,0518,0523,0513,0511,0527,0515,0519,0000,0514,025,0510,0555,0517&#x27;</span> <span class="keyword">AS</span> parentId) a</span><br><span class="line">								<span class="keyword">JOIN</span></span><br><span class="line">								mysql.help_topic b</span><br><span class="line">								</span><br><span class="line">								<span class="keyword">ON</span> b.help_topic_id <span class="operator">&lt;</span> (length(a.parentId) <span class="operator">-</span> length(REPLACE(a.parentId,<span class="string">&#x27;,&#x27;</span>,<span class="string">&#x27;&#x27;</span>))<span class="operator">+</span><span class="number">1</span>)	</span><br></pre></td></tr></table></figure>
<p>关键点：<br>b.help_topic_id &lt; (length(a.parentId) - length(REPLACE(a.parentId,’,’,’’))+1)<br>限制help_topic表的连接查询行数与需要拆分字段信息一致<br>substring_index(substring_index(a.parentId,’,’,b.help_topic_id+1),’,’,-1)<br>help_topic_id递增依次取到对应位置截取的数据信息<br>substring_index函数<br>作用：<br>    返回第 count 次出现的分隔符 delim 之前的 expr 的子字符串<br>参数：<br>    expr：一个 STRING 或 BINARY 表达式。<br>    delim：一个与 expr 类型（指定分隔符）匹配的表达式。<br>    count：用于统计分隔符数量的 INTEGER 表达式。<br>返回：<br>    结果与类型 expr 匹配。<br>    如果 count 为正，则返回最终的分隔符左侧的所有内容（从左侧开始计算）。<br>    如果 count 为负，则返回最终的分隔符右侧的所有内容（从右侧开始计算）。<br>用法示例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> substring_index(<span class="string">&#x27;1,2,3,4&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="number">1</span>,<span class="number">2</span></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL行转列实现</title>
    <url>/MySQL/blogs/MySQL%E8%A1%8C%E8%BD%AC%E5%88%97%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A6%81%E6%B1%82span"><span id="inline-blue">要求</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="要求"><span id="inline-blue">要求</span></span></h1><p>原始表数据：</p>
<p><img src="/images/mysql/mysql_20230109_001.png" alt="原表"><br>新表数据：<br><img src="/images/mysql/mysql_20230109_002.png" alt="新表"><br>将父级区域对应的子区域集合合并展现</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>通过group_concat函数实现行转列<br>原始表结构</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_iepg_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 16:39:42</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `area`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `area`  (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `parentId` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `remark` <span class="type">varchar</span>(<span class="number">256</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;025&#x27;</span>, <span class="string">&#x27;南京市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南京各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;1502&#x27;</span>, <span class="string">&#x27;江宁&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;江宁布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;1503&#x27;</span>, <span class="string">&#x27;六合&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;1504&#x27;</span>, <span class="string">&#x27;浦口&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1053&#x27;</span>, <span class="string">&#x27;1505&#x27;</span>, <span class="string">&#x27;雨花&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;1506&#x27;</span>, <span class="string">&#x27;高淳&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;1509&#x27;</span>, <span class="string">&#x27;溧水&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;0516&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;徐州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1058&#x27;</span>, <span class="string">&#x27;3202&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;0518&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;连云港各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;3209&#x27;</span>, <span class="string">&#x27;东海&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1061&#x27;</span>, <span class="string">&#x27;3212&#x27;</span>, <span class="string">&#x27;赣榆&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1062&#x27;</span>, <span class="string">&#x27;3025&#x27;</span>, <span class="string">&#x27;灌南&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1063&#x27;</span>, <span class="string">&#x27;3023&#x27;</span>, <span class="string">&#x27;灌云&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1064&#x27;</span>, <span class="string">&#x27;3201&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;0513&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南通各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1066&#x27;</span>, <span class="string">&#x27;3310&#x27;</span>, <span class="string">&#x27;如东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1067&#x27;</span>, <span class="string">&#x27;3305&#x27;</span>, <span class="string">&#x27;通州&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1068&#x27;</span>, <span class="string">&#x27;3308&#x27;</span>, <span class="string">&#x27;启东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1069&#x27;</span>, <span class="string">&#x27;3307&#x27;</span>, <span class="string">&#x27;海门&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1070&#x27;</span>, <span class="string">&#x27;3301&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;0515&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;盐城各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1072&#x27;</span>, <span class="string">&#x27;3022&#x27;</span>, <span class="string">&#x27;阜宁&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1073&#x27;</span>, <span class="string">&#x27;3096&#x27;</span>, <span class="string">&#x27;射阳&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1074&#x27;</span>, <span class="string">&#x27;3054&#x27;</span>, <span class="string">&#x27;滨海&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1075&#x27;</span>, <span class="string">&#x27;3053&#x27;</span>, <span class="string">&#x27;建湖&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1076&#x27;</span>, <span class="string">&#x27;3061&#x27;</span>, <span class="string">&#x27;大丰&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1077&#x27;</span>, <span class="string">&#x27;3052&#x27;</span>, <span class="string">&#x27;东台&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1078&#x27;</span>, <span class="string">&#x27;3055&#x27;</span>, <span class="string">&#x27;响水&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1079&#x27;</span>, <span class="string">&#x27;3051&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;0519&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;常州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1081&#x27;</span>, <span class="string">&#x27;3316&#x27;</span>, <span class="string">&#x27;金坛&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1082&#x27;</span>, <span class="string">&#x27;3065&#x27;</span>, <span class="string">&#x27;溧阳&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1084&#x27;</span>, <span class="string">&#x27;3032&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1085&#x27;</span>, <span class="string">&#x27;0000&#x27;</span>, <span class="string">&#x27;默认布局&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1086&#x27;</span>, <span class="string">&#x27;3204&#x27;</span>, <span class="string">&#x27;丰县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1087&#x27;</span>, <span class="string">&#x27;3095&#x27;</span>, <span class="string">&#x27;贾汪&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;3203&#x27;</span>, <span class="string">&#x27;新沂&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;3024&#x27;</span>, <span class="string">&#x27;铜山&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;3210&#x27;</span>, <span class="string">&#x27;邳州&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1091&#x27;</span>, <span class="string">&#x27;3211&#x27;</span>, <span class="string">&#x27;睢宁&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1092&#x27;</span>, <span class="string">&#x27;3213&#x27;</span>, <span class="string">&#x27;沛县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;0527&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;宿迁各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;3103&#x27;</span>, <span class="string">&#x27;泗阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1095&#x27;</span>, <span class="string">&#x27;3102&#x27;</span>, <span class="string">&#x27;泗洪&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1096&#x27;</span>, <span class="string">&#x27;3064&#x27;</span>, <span class="string">&#x27;沭阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;3101&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;0514&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;扬州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;3205&#x27;</span>, <span class="string">&#x27;仪征&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1100&#x27;</span>, <span class="string">&#x27;3206&#x27;</span>, <span class="string">&#x27;江都&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1101&#x27;</span>, <span class="string">&#x27;3207&#x27;</span>, <span class="string">&#x27;高邮&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;3208&#x27;</span>, <span class="string">&#x27;宝应&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;0517&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;淮安市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1104&#x27;</span>, <span class="string">&#x27;3020&#x27;</span>, <span class="string">&#x27;涟水&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1105&#x27;</span>, <span class="string">&#x27;3021&#x27;</span>, <span class="string">&#x27;淮安区&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1106&#x27;</span>, <span class="string">&#x27;3031&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1107&#x27;</span>, <span class="string">&#x27;3036&#x27;</span>, <span class="string">&#x27;淮阴&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1108&#x27;</span>, <span class="string">&#x27;3037&#x27;</span>, <span class="string">&#x27;洪泽&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1109&#x27;</span>, <span class="string">&#x27;3038&#x27;</span>, <span class="string">&#x27;金湖&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1110&#x27;</span>, <span class="string">&#x27;3063&#x27;</span>, <span class="string">&#x27;盱眙&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;0511&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;镇江市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1112&#x27;</span>, <span class="string">&#x27;3001&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;3004&#x27;</span>, <span class="string">&#x27;扬中&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1114&#x27;</span>, <span class="string">&#x27;3006&#x27;</span>, <span class="string">&#x27;句容&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1116&#x27;</span>, <span class="string">&#x27;3011&#x27;</span>, <span class="string">&#x27;丹徒&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;0523&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1118&#x27;</span>, <span class="string">&#x27;3002&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州分公司&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1119&#x27;</span>, <span class="string">&#x27;3005&#x27;</span>, <span class="string">&#x27;兴化&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州兴化广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1120&#x27;</span>, <span class="string">&#x27;3035&#x27;</span>, <span class="string">&#x27;泰兴&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州泰兴广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1121&#x27;</span>, <span class="string">&#x27;3034&#x27;</span>, <span class="string">&#x27;靖江&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州靖江广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1122&#x27;</span>, <span class="string">&#x27;3033&#x27;</span>, <span class="string">&#x27;姜堰&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州姜堰广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;3317&#x27;</span>, <span class="string">&#x27;武进&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1124&#x27;</span>, <span class="string">&#x27;3056&#x27;</span>, <span class="string">&#x27;盐都&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;3329&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;1510&#x27;</span>, <span class="string">&#x27;栖霞&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;南京市-栖霞区&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;0555&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1130&#x27;</span>, <span class="string">&#x27;3302&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1131&#x27;</span>, <span class="string">&#x27;3113&#x27;</span>, <span class="string">&#x27;丹阳&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;最新修改的区域码&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1133&#x27;</span>, <span class="string">&#x27;0666&#x27;</span>, <span class="string">&#x27;测试布局-单引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1134&#x27;</span>, <span class="string">&#x27;0777&#x27;</span>, <span class="string">&#x27;测试布局-双引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;0510&#x27;</span>, <span class="string">&#x27;无锡市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1136&#x27;</span>, <span class="string">&#x27;199000000001&#x27;</span>, <span class="string">&#x27;用直镇&#x27;</span>, <span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1137&#x27;</span>, <span class="string">&#x27;100000000012&#x27;</span>, <span class="string">&#x27;智慧会龙&#x27;</span>, <span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1142&#x27;</span>, <span class="string">&#x27;3304&#x27;</span>, <span class="string">&#x27;海安&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;1002&#x27;</span>, <span class="string">&#x27;南京&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1144&#x27;</span>, <span class="string">&#x27;100000000236&#x27;</span>, <span class="string">&#x27;江苏有线南京分公司镇名测试&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;南京一镇一屏测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1147&#x27;</span>, <span class="string">&#x27;100000000296&#x27;</span>, <span class="string">&#x27;江苏省公安厅视频会议&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1148&#x27;</span>, <span class="string">&#x27;100000000317&#x27;</span>, <span class="string">&#x27;雪堰镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1149&#x27;</span>, <span class="string">&#x27;100000000318&#x27;</span>, <span class="string">&#x27;前黄镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1150&#x27;</span>, <span class="string">&#x27;100000000319&#x27;</span>, <span class="string">&#x27;礼嘉镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1151&#x27;</span>, <span class="string">&#x27;100000000320&#x27;</span>, <span class="string">&#x27;南夏墅街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1152&#x27;</span>, <span class="string">&#x27;100000000321&#x27;</span>, <span class="string">&#x27;湖塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1153&#x27;</span>, <span class="string">&#x27;100000000322&#x27;</span>, <span class="string">&#x27;牛塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1154&#x27;</span>, <span class="string">&#x27;100000000323&#x27;</span>, <span class="string">&#x27;洛阳镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1155&#x27;</span>, <span class="string">&#x27;100000000324&#x27;</span>, <span class="string">&#x27;横林镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1156&#x27;</span>, <span class="string">&#x27;100000000325&#x27;</span>, <span class="string">&#x27;遥观镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1157&#x27;</span>, <span class="string">&#x27;100000000326&#x27;</span>, <span class="string">&#x27;横山桥镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1158&#x27;</span>, <span class="string">&#x27;100000000327&#x27;</span>, <span class="string">&#x27;郑陆镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1159&#x27;</span>, <span class="string">&#x27;100000000328&#x27;</span>, <span class="string">&#x27;奔牛镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1160&#x27;</span>, <span class="string">&#x27;100000000329&#x27;</span>, <span class="string">&#x27;邹区镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1161&#x27;</span>, <span class="string">&#x27;100000000330&#x27;</span>, <span class="string">&#x27;嘉泽镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1162&#x27;</span>, <span class="string">&#x27;100000000331&#x27;</span>, <span class="string">&#x27;湟里镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1163&#x27;</span>, <span class="string">&#x27;100000000332&#x27;</span>, <span class="string">&#x27;西湖街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1164&#x27;</span>, <span class="string">&#x27;200000000571&#x27;</span>, <span class="string">&#x27;邗江区西湖镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1165&#x27;</span>, <span class="string">&#x27;200000000570&#x27;</span>, <span class="string">&#x27;邗江区杨寿镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1166&#x27;</span>, <span class="string">&#x27;200000000572&#x27;</span>, <span class="string">&#x27;邗江区沙头镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1167&#x27;</span>, <span class="string">&#x27;3062&#x27;</span>, <span class="string">&#x27;如皋&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1169&#x27;</span>, <span class="string">&#x27;100000000336&#x27;</span>, <span class="string">&#x27;溧水本地&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;溧水一镇一屏&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1170&#x27;</span>, <span class="string">&#x27;100000000356&#x27;</span>, <span class="string">&#x27;高淳本地&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1173&#x27;</span>, <span class="string">&#x27;100000000376&#x27;</span>, <span class="string">&#x27;溧水石湫镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1174&#x27;</span>, <span class="string">&#x27;100000000380&#x27;</span>, <span class="string">&#x27;溧水晶桥镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1175&#x27;</span>, <span class="string">&#x27;100000000381&#x27;</span>, <span class="string">&#x27;溧水柘塘镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1176&#x27;</span>, <span class="string">&#x27;100000000378&#x27;</span>, <span class="string">&#x27;溧水白马镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1177&#x27;</span>, <span class="string">&#x27;100000000382&#x27;</span>, <span class="string">&#x27;溧水东屏镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1178&#x27;</span>, <span class="string">&#x27;100000000377&#x27;</span>, <span class="string">&#x27;溧水洪蓝镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1179&#x27;</span>, <span class="string">&#x27;100000000379&#x27;</span>, <span class="string">&#x27;溧水和凤镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1180&#x27;</span>, <span class="string">&#x27;00010&#x27;</span>, <span class="string">&#x27;多屏同看测试组&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1181&#x27;</span>, <span class="string">&#x27;1000000002777&#x27;</span>, <span class="string">&#x27;邳州铁富&#x27;</span>, <span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1182&#x27;</span>, <span class="string">&#x27;100000000396&#x27;</span>, <span class="string">&#x27;石湖乡石湖村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1183&#x27;</span>, <span class="string">&#x27;100000000422&#x27;</span>, <span class="string">&#x27;大彭镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1184&#x27;</span>, <span class="string">&#x27;100000000420&#x27;</span>, <span class="string">&#x27;柳新镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1185&#x27;</span>, <span class="string">&#x27;200000000860&#x27;</span>, <span class="string">&#x27;邗江区瓜洲镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1186&#x27;</span>, <span class="string">&#x27;100000000432&#x27;</span>, <span class="string">&#x27;柳泉镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1188&#x27;</span>, <span class="string">&#x27;15111&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1189&#x27;</span>, <span class="string">&#x27;100000000520&#x27;</span>, <span class="string">&#x27;石湖乡团池村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1190&#x27;</span>, <span class="string">&#x27;100000000524&#x27;</span>, <span class="string">&#x27;石湖乡廖塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1191&#x27;</span>, <span class="string">&#x27;100000000523&#x27;</span>, <span class="string">&#x27;石湖乡池庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1192&#x27;</span>, <span class="string">&#x27;100000000522&#x27;</span>, <span class="string">&#x27;石湖乡乔团村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1193&#x27;</span>, <span class="string">&#x27;100000000521&#x27;</span>, <span class="string">&#x27;石湖乡尤庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1194&#x27;</span>, <span class="string">&#x27;100000000525&#x27;</span>, <span class="string">&#x27;石湖乡驻地&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1195&#x27;</span>, <span class="string">&#x27;100000000518&#x27;</span>, <span class="string">&#x27;石湖乡水库村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1196&#x27;</span>, <span class="string">&#x27;100000000516&#x27;</span>, <span class="string">&#x27;石湖乡大娄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1197&#x27;</span>, <span class="string">&#x27;100000000476&#x27;</span>, <span class="string">&#x27;石湖乡尤塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1198&#x27;</span>, <span class="string">&#x27;100000000517&#x27;</span>, <span class="string">&#x27;石湖乡黄塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1199&#x27;</span>, <span class="string">&#x27;100000000519&#x27;</span>, <span class="string">&#x27;石湖乡贺庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1200&#x27;</span>, <span class="string">&#x27;100000000616&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1201&#x27;</span>, <span class="string">&#x27;200000765252&#x27;</span>, <span class="string">&#x27;宿迁龙河镇1&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1202&#x27;</span>, <span class="string">&#x27;200000775202&#x27;</span>, <span class="string">&#x27;宿迁新庄&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1203&#x27;</span>, <span class="string">&#x27;200000000063&#x27;</span>, <span class="string">&#x27;大仪镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1204&#x27;</span>, <span class="string">&#x27;200000000069&#x27;</span>, <span class="string">&#x27;十二圩镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1206&#x27;</span>, <span class="string">&#x27;200000000900&#x27;</span>, <span class="string">&#x27;广陵区李典镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1207&#x27;</span>, <span class="string">&#x27;200000000920&#x27;</span>, <span class="string">&#x27;邗江区甘泉街道&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1208&#x27;</span>, <span class="string">&#x27;200000000940&#x27;</span>, <span class="string">&#x27;甘泉街道双塘村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1209&#x27;</span>, <span class="string">&#x27;200000782202&#x27;</span>, <span class="string">&#x27;宝应射阳湖&#x27;</span>, <span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1210&#x27;</span>, <span class="string">&#x27;200000784202&#x27;</span>, <span class="string">&#x27;山左口乡北古寨村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1213&#x27;</span>, <span class="string">&#x27;200000787202&#x27;</span>, <span class="string">&#x27;新安街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1214&#x27;</span>, <span class="string">&#x27;200000762204&#x27;</span>, <span class="string">&#x27;zyh603&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;流化测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;200000789208&#x27;</span>, <span class="string">&#x27;草桥&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1216&#x27;</span>, <span class="string">&#x27;200000788203&#x27;</span>, <span class="string">&#x27;高场&#x27;</span>, <span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1217&#x27;</span>, <span class="string">&#x27;200000787203&#x27;</span>, <span class="string">&#x27;钟吾街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1218&#x27;</span>, <span class="string">&#x27;200000789202&#x27;</span>, <span class="string">&#x27;北沟街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1219&#x27;</span>, <span class="string">&#x27;200000789203&#x27;</span>, <span class="string">&#x27;墨河街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1220&#x27;</span>, <span class="string">&#x27;200000789204&#x27;</span>, <span class="string">&#x27;唐店街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1221&#x27;</span>, <span class="string">&#x27;200000789205&#x27;</span>, <span class="string">&#x27;瓦窑镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1222&#x27;</span>, <span class="string">&#x27;200000789206&#x27;</span>, <span class="string">&#x27;港头镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1223&#x27;</span>, <span class="string">&#x27;200000789207&#x27;</span>, <span class="string">&#x27;合沟镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1224&#x27;</span>, <span class="string">&#x27;200000789209&#x27;</span>, <span class="string">&#x27;窑湾镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1225&#x27;</span>, <span class="string">&#x27;200000789210&#x27;</span>, <span class="string">&#x27;棋盘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1226&#x27;</span>, <span class="string">&#x27;200000789211&#x27;</span>, <span class="string">&#x27;马陵山镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1227&#x27;</span>, <span class="string">&#x27;200000789212&#x27;</span>, <span class="string">&#x27;新店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1228&#x27;</span>, <span class="string">&#x27;200000789213&#x27;</span>, <span class="string">&#x27;邵店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1229&#x27;</span>, <span class="string">&#x27;200000789214&#x27;</span>, <span class="string">&#x27;时集镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1230&#x27;</span>, <span class="string">&#x27;200000789215&#x27;</span>, <span class="string">&#x27;高流镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1231&#x27;</span>, <span class="string">&#x27;200000789216&#x27;</span>, <span class="string">&#x27;阿湖镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1232&#x27;</span>, <span class="string">&#x27;200000789217&#x27;</span>, <span class="string">&#x27;双塘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1233&#x27;</span>, <span class="string">&#x27;200000788202&#x27;</span>, <span class="string">&#x27;人民医院&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1235&#x27;</span>, <span class="string">&#x27;200000793202&#x27;</span>, <span class="string">&#x27;西岗街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1236&#x27;</span>, <span class="string">&#x27;200000793203&#x27;</span>, <span class="string">&#x27;八卦洲街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1237&#x27;</span>, <span class="string">&#x27;200000795202&#x27;</span>, <span class="string">&#x27;临河镇&#x27;</span>, <span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1238&#x27;</span>, <span class="string">&#x27;200000800202&#x27;</span>, <span class="string">&#x27;桠溪镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1239&#x27;</span>, <span class="string">&#x27;200000800203&#x27;</span>, <span class="string">&#x27;漆桥镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1240&#x27;</span>, <span class="string">&#x27;200000800204&#x27;</span>, <span class="string">&#x27;砖墙镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1241&#x27;</span>, <span class="string">&#x27;200000802202&#x27;</span>, <span class="string">&#x27;横溪街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1242&#x27;</span>, <span class="string">&#x27;200000802203&#x27;</span>, <span class="string">&#x27;秣陵街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1243&#x27;</span>, <span class="string">&#x27;200000804202&#x27;</span>, <span class="string">&#x27;竹镇镇&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1244&#x27;</span>, <span class="string">&#x27;200000802204&#x27;</span>, <span class="string">&#x27;桥林镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1245&#x27;</span>, <span class="string">&#x27;200000802205&#x27;</span>, <span class="string">&#x27;汤泉镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1246&#x27;</span>, <span class="string">&#x27;200000802206&#x27;</span>, <span class="string">&#x27;星甸镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1247&#x27;</span>, <span class="string">&#x27;200000804203&#x27;</span>, <span class="string">&#x27;雄州街道&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1248&#x27;</span>, <span class="string">&#x27;200000805202&#x27;</span>, <span class="string">&#x27;蒋王街道四联村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1249&#x27;</span>, <span class="string">&#x27;200000805203&#x27;</span>, <span class="string">&#x27;蒋王街道悦来村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>查询SQL：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> parentId,GROUP_CONCAT(<span class="keyword">DISTINCT</span> areaCode) </span><br><span class="line"><span class="keyword">FROM</span> AREA</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> parentId</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> parentId</span><br><span class="line"><span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Jsp页面访问异常</title>
    <url>/JSP/blogs/Jsp%E9%A1%B5%E9%9D%A2%E8%AE%BF%E9%97%AE%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-bluejsp%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9Fspan"><span id="inline-blue">Jsp声明周期</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-bluejsp%E7%BC%96%E8%AF%91%E6%96%87%E4%BB%B6%E7%94%9F%E6%88%90%E4%BD%8D%E7%BD%AEspan"><span id="inline-blue">Jsp编译文件生成位置</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>后台管理页面请求Jsp异常，报错信息如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP ERROR 500 javax.servlet.ServletException: org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">URI:	&#x2F;oms&#x2F;manager&#x2F;mould&#x2F;listpage</span><br><span class="line">STATUS:	500</span><br><span class="line">MESSAGE:	javax.servlet.ServletException: org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">SERVLET:	spring-front-controller</span><br><span class="line">CAUSED BY:	javax.servlet.ServletException: org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">CAUSED BY:	org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">CAUSED BY:	java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br></pre></td></tr></table></figure>
<h1><span id="jsp声明周期"><span id="inline-blue">Jsp声明周期</span></span></h1><p>1、第一次访问JSP，会验证一下是否第一次访问，然后把JSP转化成java(Servlet),再编译成class文件。</p>
<p>2、生成的class文件中会自动生成几个方法：jspInit()、jspDestroy()、jspService().Tomcat仅仅在第一次请求时，调用jspInit()方法，然后调用jspService()进行处理。</p>
<p>3、之后的每个请求，都会分配一个线程调用jspService()方法。</p>
<p>4、如果页面被销毁或者关闭，都会调用jspDestroy由于该文件是常驻内存的，又是多线程调用，所以访问的效率和速度都会很快。</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>Jsp文件编译失败导致访问失败，对比之前正常的版本发现Jsp文件内容缺失。</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">String path =request.getContextPath();</span><br><span class="line">String userLanguage = com.coship.oms.tools.config.ConfigService.getLanguageCode();</span><br><span class="line">String userLanguage2 = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;&quot;</span>==userLanguage || <span class="keyword">null</span>==userLanguage)&#123;</span><br><span class="line">	  userLanguage2 = <span class="string">&quot;-zh_CN&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	  <span class="keyword">if</span>(<span class="string">&quot;-en_US&quot;</span>.equalsIgnoreCase(userLanguage))&#123;</span><br><span class="line">		  userLanguage2 = <span class="string">&quot;-en_US&quot;</span>;</span><br><span class="line">	  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		  userLanguage2 = userLanguage;</span><br><span class="line">	  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/jetty/Jsp/Jetty_Jsp_2023_01_06_001.png" alt="下拉联动验证"></p>
<h1><span id="jsp编译文件生成位置"><span id="inline-blue">Jsp编译文件生成位置</span></span></h1><p>Tomcat:<br>    Linux: /usr/local/AMS/apache-tomcat-8.0.18/work/Catalina/localhost/myAM/org/apache/jsp<br>    windows:<br>        windows环境下eclipse对应tomcat部署位置映射有三种情况<br>        Use workspace metadata<br>            工作空间下,例如:F:workspace.metadata.pluginsorg.eclipse.wst.server.coretmp0<br>　　    Use Tomcat installation<br>            Tomcat安装路径下,例如：D:\Tomcat\BI_WH_WORK\apache-tomcat-7.0.20\apache-tomcat-7.0.20\work\Catalina\localhost\biPortal\org\apache\jsp<br>　　    Use custom location<br>            自定义安装路径下,例如：D:\Tomcat\BI_WH_WORK\apache-tomcat-7.0.20\apache-tomcat-7.0.20\work\Catalina\localhost\biPortal\org\apache\jsp<br>Jetty：<br>    Linux：<br>        /usr/local/moui_tianjin/oms/coship-oms/work/jetty-0_0_0_0-18080-oms-_oms-any-/jsp/org/apache/jsp</p>
]]></content>
      <categories>
        <category>JSP</category>
      </categories>
      <tags>
        <tag>Jetty</tag>
        <tag>Jsp</tag>
      </tags>
  </entry>
  <entry>
    <title>RFC 7230 and RFC 3986</title>
    <url>/Tomcat/blogs/RFC%207230%20and%20RFC%203986/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>tomcat由版本8.0.38升级为8.5.41，请求接口报错，错误信息如下：<br><a href="http://10.9.212.55:8080/SPSmartCMS/json/content_list.jspx?channelIds%5B%5D=156&amp;first=0&amp;count=7">http://10.9.212.55:8080/SPSmartCMS/json/content_list.jspx?channelIds[]=156&amp;first=0&amp;count=7</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP Status 400 – Bad Request</span><br><span class="line">Type Exception Report</span><br><span class="line"></span><br><span class="line">Message Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986</span><br><span class="line"></span><br><span class="line">Description The server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).</span><br><span class="line"></span><br><span class="line">Exception</span><br><span class="line"></span><br><span class="line">java.lang.IllegalArgumentException: Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986</span><br><span class="line">	org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:483)</span><br><span class="line">	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:684)</span><br><span class="line">	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)</span><br><span class="line">	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)</span><br><span class="line">	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)</span><br><span class="line">	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)</span><br><span class="line">	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)</span><br><span class="line">	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)</span><br><span class="line">	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	java.lang.Thread.run(Thread.java:745)</span><br></pre></td></tr></table></figure>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>参考<a href="https://www.cnblogs.com/DDgougou/p/11668073.html">https://www.cnblogs.com/DDgougou/p/11668073.html</a><br>大致原因是因为tomcat版本版本升级之后对url请求特殊字符有严格的编码要求,[]字符不符合编码规范。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>D:\Tomcat\smartCMS_GZ\apache-tomcat-8.5.41\conf\server.xml，修改connector节点，增加配置内容如下：<br>relaxedQueryChars=”[,]”</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> <span class="attr">relaxedQueryChars</span>=<span class="string">&quot;[,]&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>重启Tomcat服务，接口请求正常。</p>
]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>checkbox控件置灰导致form表单提交失败</title>
    <url>/JSP/blogs/checkbox%E6%8E%A7%E4%BB%B6%E7%BD%AE%E7%81%B0%E5%AF%BC%E8%87%B4form%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E5%A4%B1%E8%B4%A5/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>checkbox置灰后提交获取对应的值失败<br>置灰代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//遍历checkbox，对应权限ID为7、71、7101、7102不置灰</span></span><br><span class="line">$(<span class="string">&quot;:checkbox&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value == <span class="number">7</span> || <span class="built_in">this</span>.value == <span class="number">71</span> || <span class="built_in">this</span>.value == <span class="number">7101</span> || <span class="built_in">this</span>.value == <span class="number">7102</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">this</span>.checked) &#123;</span><br><span class="line">                <span class="built_in">this</span>.checked = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">this</span>.disabled = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>测试之后发现后台拿不到默认选中的checkbox参数值。</p>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>form表单提交之前恢复checkbox的disabled属性，再进行表单提交</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumbit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//恢复checkbox状态disabled</span></span><br><span class="line">    $(<span class="string">&quot;:checkbox&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.disabled) &#123;</span><br><span class="line">            <span class="built_in">this</span>.disabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">&quot;AssignPrivileges&quot;</span>).submit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>JSP</category>
      </categories>
      <tags>
        <tag>JSP</tag>
      </tags>
  </entry>
  <entry>
    <title>Jboss应用接口无响应</title>
    <url>/Jboss/blogs/Jboss%E5%BA%94%E7%94%A8%E6%8E%A5%E5%8F%A3%E6%97%A0%E5%93%8D%E5%BA%94/</url>
    <content><![CDATA[<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>java应用程序接口请求数据无响应，抓取堆栈日志如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">2022-11-15 13:37:15</span><br><span class="line">Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.131-b11 mixed mode):</span><br><span class="line"></span><br><span class="line">&quot;Attach Listener&quot; #174 daemon prio=9 os_prio=0 tid=0x0000000013c90000 nid=0x2c5e waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DestroyJavaVM&quot; #173 prio=5 os_prio=0 tid=0x00000000135ec800 nid=0x3f64 waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;pool-3-thread-80&quot; #171 prio=5 os_prio=0 tid=0x0000000015635000 nid=0x4012 runnable [0x000000004c29a000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000f4b008f0&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000f4b008e0&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000f4b00900&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)</span><br><span class="line">	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)</span><br><span class="line">	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000f4b009d0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line">	</span><br></pre></td></tr></table></figure>


<p>搜索了下堆栈关键字信息,网上解释说这个问题是由于jdk的漏洞导致，但这个问题是最近才发现，所以继续查找对应的可能信息</p>
<h1><span id="分析"><span id="inline-blue">分析</span></span></h1><p>查看文件打开数设置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -a</span><br></pre></td></tr></table></figure>
<p><img src="/images/Jboss/20221117_Jboss_001.png" alt="Jboss接口无响应"><br>尝试更改/etc/profile,/etc/security/limits.conf文件,添加ulimit -HSn 65535<br>发现更改之后即使重启也没法生效，参考网上的解决方案：<a href="https://blog.csdn.net/Daphnisz/article/details/124079757">https://blog.csdn.net/Daphnisz/article/details/124079757</a><br>大概意思是PAM选项没有开启的情况下导致修改不生效(PAM，Pluggable Authentication Modules，可插拔认证模块)</p>
<p>添加参数支持<br>1、修改openssh配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在文件末尾添加：UsePAM yes</span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2、重启ssh服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure>
<p>3、验证</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -n</span><br></pre></td></tr></table></figure>

<p>发现无法生效，继续排查原因发现在系统日志目录下/var/log/messages,打印错误信息，提示UsePAM参数不支持，参考网上解决方案<a href="https://www.jianshu.com/p/db918237644a%EF%BC%8C">https://www.jianshu.com/p/db918237644a，</a><br>意思是说openssh模块开始安装的时候没有添加–with-pam 选项，导致PAM参数无法更改。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>在不重装openssh模块的前提下：<br>应用程序的文件打开数实际是由/proc/pid/limits文件控制，如果能修改为65535，那也能规避这个问题。通过将应用重启命令加入到自启动(rc.local),添加命令内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -HSn 65535</span><br><span class="line">cd /usr/local/ulms/jboss/bin;</span><br><span class="line">sh start.sh;</span><br></pre></td></tr></table></figure>

<p>这样修改之后如果重启jboss，则参数恢复到1024,将ulimit -HSn 65535添加到start.sh文件开始位置,<br>保证即使重启也能生效，避免应用程序接口响应现象不一致的问题。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>20601为应用程序进程号</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /proc/20601/limits</span><br></pre></td></tr></table></figure>

<p><img src="/images/Jboss/20221117_Jboss_002.png" alt="验证"></p>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven项目插件使用</title>
    <url>/Maven/blogs/Maven%E9%A1%B9%E7%9B%AE%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1><span id="maven生成war包包含空文件"><span id="inline-blue">maven生成war包包含空文件</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">includeEmptyDirectories</span>&gt;</span>true<span class="tag">&lt;/<span class="name">includeEmptyDirectories</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="maven生成war包包含子模块资源文件"><span id="inline-blue">maven生成war包包含子模块资源文件</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>process-sources<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">	           <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;basedir&#125;/target/classes/<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;pom.basedir&#125;/../action.portal.operators/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;basedir&#125;/../bss.common/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/*.src<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;basedir&#125;/../bss.dao.oracle/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">resource</span>&gt;</span> </span><br><span class="line">				<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="maven生成war包子模块jar包依赖以class文件呈现"><span id="inline-blue">maven生成war包子模块jar包依赖以class文件呈现</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>unpack<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>prepare-package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>unpack<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactItems</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj.sme<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bss.common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span>&gt;</span>**/*.class<span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">overWrite</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWrite</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/classes<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj.sme<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bss.dao.oracle<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span>&gt;</span>**/*.class<span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">overWrite</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWrite</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/classes<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">artifactItems</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="解决本地依赖导致模块之间传递依赖失效"><span id="inline-blue">解决本地依赖导致模块之间传递依赖失效</span></span></h1><p>pom.xml文件内正常使用依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdp-cbb-rights<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>V300R003B065<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加maven-install-plugin实现本地jar注册</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">		        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">id</span>&gt;</span>install-sdp-cbb-rights<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>clean<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;pom.basedir&#125;/../bss.parent/lib/sdp-cbb-rights-V300R003B065.jar<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">repositoryLayout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">repositoryLayout</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		    			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdp-cbb-rights<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">version</span>&gt;</span>V300R003B065<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">generatePom</span>&gt;</span>true<span class="tag">&lt;/<span class="name">generatePom</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>install-file<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">		        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加完成之后执行如下命令</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">mvn clean</span><br></pre></td></tr></table></figure>
<p>右键项目maven-&gt;update project,勾选Force update Snapshots/Release</p>
<h1><span id="war包生成指定忽略指定目录"><span id="inline-blue">war包生成指定忽略指定目录</span></span></h1><p>添加maven-war-plugin插件,指定忽略/WEB-INF/lib_bak目录下的jar包</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">warSourceExcludes</span>&gt;</span></span><br><span class="line">					   	**/WEB-INF/lib_bak/*.jar</span><br><span class="line">					<span class="tag">&lt;/<span class="name">warSourceExcludes</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>eclipse还原Maven依赖</title>
    <url>/Maven/blogs/eclipse%E8%BF%98%E5%8E%9FMaven%E4%BE%9D%E8%B5%96/</url>
    <content><![CDATA[<h2><span id="现象"><span id="inline-blue">现象</span></span></h2><p>eclipse移除项目Maven依赖之后发现无法添加</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>打开项目下.classpath文件<br><img src="/images/Maven/20221025_Maven_001.png" alt="Maven依赖恢复"><br>添加如下内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">classpathentry</span> <span class="attr">kind</span>=<span class="string">&quot;con&quot;</span> <span class="attr">path</span>=<span class="string">&quot;org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">attributes</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;maven.pomderived&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;org.eclipse.jst.component.dependency&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/lib&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">classpathentry</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加后内容如下：<br><img src="/images/Maven/20221025_Maven_002.png" alt="Maven依赖恢复"></p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/Maven/20221025_Maven_003.png" alt="Maven依赖恢复"></p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
        <tag>Eclipse</tag>
      </tags>
  </entry>
  <entry>
    <title>js实现下拉框联动回显功能</title>
    <url>/JSP/blogs/js%E5%AE%9E%E7%8E%B0%E4%B8%8B%E6%8B%89%E6%A1%86%E8%81%94%E5%8A%A8%E5%9B%9E%E6%98%BE%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluejsp%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E9%A1%B9span"><span id="inline-blue">jsp页面添加依赖项</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8B%E6%8B%89%E6%A1%86%E5%AE%9A%E4%B9%89span"><span id="inline-blue">下拉框定义</span></a></li>
<li><a href="#span-idinline-bluejs%E8%81%94%E5%8A%A8%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">js联动实现</span></a></li>
<li><a href="#span-idinline-blue%E6%95%B0%E6%8D%AE%E5%9B%9E%E6%98%BEspan"><span id="inline-blue">数据回显</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="jsp页面添加依赖项"><span id="inline-blue">jsp页面添加依赖项</span></span></h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;s&quot;</span> uri=<span class="string">&quot;/struts-tags&quot;</span>%&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;s:url value=&#x27;js/cdnmanage.pagination.js&#x27;/&gt;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1><span id="下拉框定义"><span id="inline-blue">下拉框定义</span></span></h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;label&gt;&lt;s:text name=&quot;grmmanage.log.moduleName&quot; /&gt;&lt;/label&gt;</span><br><span class="line">&lt;select name=<span class="string">&quot;logBean.moduleName&quot;</span> id=<span class="string">&quot;moduleName&quot;</span> onchange=<span class="string">&quot;setAction(this.options[this.selectedIndex].text);&quot;</span>  onselect=<span class="string">&quot;setAction(this.options[this.selectedIndex].text);&quot;</span> style=<span class="string">&quot;width:120px&quot;</span>&gt;</span><br><span class="line">	&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;全部&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;21&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==21&#125;&quot;&gt;selected&lt;/s:if&gt; &gt;角色管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;22&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==22&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;用户管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;31&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==31&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;IPQAM导入管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;32&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==32&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;IPQAM管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;33&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==33&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;规则管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;34&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==34&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;设备类型管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;41&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==41&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;区域管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;42&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==42&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;区域导入管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;51&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==51&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;推流导入管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;52&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==52&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;推流管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;53&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==53&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;VSGROUP管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;54&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==54&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;vs分配管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;71&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==71&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;修改密码&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;label&gt;&lt;s:text name=&quot;grmmanage.log.actionType&quot; /&gt;&lt;/label&gt;</span><br><span class="line">&lt;select name=<span class="string">&quot;logBean.actionType&quot;</span> id=<span class="string">&quot;actionType&quot;</span> style=<span class="string">&quot;width:120px&quot;</span>&gt;</span><br><span class="line">	&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;全部&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h1><span id="js联动实现"><span id="inline-blue">js联动实现</span></span></h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">	<span class="comment">//下拉选项数组定义</span></span><br><span class="line">	<span class="keyword">var</span> actionArr = [];</span><br><span class="line">	<span class="keyword">var</span> moduleArr =</span><br><span class="line">		[</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;角色管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;21&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;用户管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;22&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;IPQAM导入管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;31&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;IPQAM管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;32&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;规则管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;33&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;设备类型管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;34&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;区域管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;41&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;区域导入管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;42&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;推流导入管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;51&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;推流管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;52&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;VSGROUP管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;53&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs分配管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;54&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改密码&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;71&quot;</span>&#125;</span><br><span class="line">			];</span><br><span class="line">	<span class="keyword">var</span> actionArrInitial = [];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;角色管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;211&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;212&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;更新角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;213&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;分配用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;216&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;分配权限&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;217&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">	];</span><br><span class="line">	actionArr[<span class="string">&#x27;用户管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;221&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;222&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;重置密码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;223&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;修改用户&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;224&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;更新用户角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;225&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;锁定用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;226&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;解锁用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;227&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">actionArr[<span class="string">&#x27;IPQAM导入管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;导入数据&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3101&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;IPQAM管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;QAM新增&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3201&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;QAM删除&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3202&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;数据下载&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3203&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;频点新增&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3205&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;频点修改&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3206&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除频点&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3207&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;规则管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增规则&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3301&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除规则&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3302&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	 actionArr[<span class="string">&#x27;设备类型管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增设备类型&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3401&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除设备类型&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3402&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;区域管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4101&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;批量删除区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4102&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4103&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4104&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;区域码下载&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4105&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;批量修改Vs区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4106&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">actionArr[<span class="string">&#x27;区域导入管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;导入数据&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4201&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">actionArr[<span class="string">&#x27;推流导入管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;导入数据&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5101&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	  actionArr[<span class="string">&#x27;推流管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增推流服务&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5201&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;批量上线&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5202&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;批量下线&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5203&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改推流服务&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5204&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除推流服务&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5205&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;批量修改端口组&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5206&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增流输出&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5209&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;修改流输出&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5210&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;删除流输出&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5211&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增卷标信息&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5212&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改卷标信息&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5213&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除卷标信息&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5214&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	   actionArr[<span class="string">&#x27;VSGROUP管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs群组下线&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5301&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs群组修改&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5302&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs群组删除&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5303&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	   actionArr[<span class="string">&#x27;vs分配管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;SM新增vs关联&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5401&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;SM取消vs关联&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5402&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	   actionArr[<span class="string">&#x27;修改密码&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;修改&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;7101&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;重置&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;7102&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化操作行为</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setAction</span>(<span class="params">moduleName</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (actionArr[moduleName] != <span class="literal">null</span> &amp;&amp; actionArr[moduleName] != <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; actionArr[moduleName] != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">		setSelectOption(<span class="string">&#x27;actionType&#x27;</span>, actionArr[moduleName], <span class="string">&#x27;全部&#x27;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		setSelectOption(<span class="string">&#x27;actionType&#x27;</span>, actionArrInitial, <span class="string">&#x27;全部&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//移除下拉选项</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeOptions</span>(<span class="params">selectObj</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> selectObj != <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">		selectObj = <span class="built_in">document</span>.getElementById(selectObj);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 原有选项计数</span></span><br><span class="line">	<span class="keyword">var</span> len = selectObj.options.length;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">		<span class="comment">// 移除当前选项</span></span><br><span class="line">		selectObj.options[<span class="number">0</span>] = <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据moduleId设置actionId下拉项</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setSelectOption</span>(<span class="params">selectObj, optionList, firstOption</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> selectObj != <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">		selectObj = <span class="built_in">document</span>.getElementById(selectObj);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 清空选项</span></span><br><span class="line">	removeOptions(selectObj);</span><br><span class="line">	<span class="comment">// 选项计数</span></span><br><span class="line">	<span class="keyword">var</span> start = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 如果需要添加第一个选项</span></span><br><span class="line">	<span class="keyword">if</span> (firstOption) &#123;</span><br><span class="line">		selectObj.options[<span class="number">0</span>] = <span class="keyword">new</span> Option(firstOption, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">		<span class="comment">// 选项计数从 1 开始</span></span><br><span class="line">		start++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> len = optionList.length;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">		<span class="comment">// 设置 option</span></span><br><span class="line">		selectObj.options[start] = <span class="keyword">new</span> Option(optionList[i].txt, optionList[i].val);</span><br><span class="line">		<span class="comment">// 计数加 1</span></span><br><span class="line">		start++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="数据回显"><span id="inline-blue">数据回显</span></span></h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">jQuery(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; moduleArr.length; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (moduleArr[i].val == <span class="string">&#x27;&lt;s:property value=&quot;logBean.moduleName&quot;/&gt;&#x27;</span>) &#123;</span><br><span class="line">			setAction(moduleArr[i].txt);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> count = $(<span class="string">&quot;#actionType option&quot;</span>)</span><br><span class="line">		.length;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> ($(<span class="string">&quot;#actionType&quot;</span>)</span><br><span class="line">			.get(<span class="number">0</span>)</span><br><span class="line">			.options[i].value == <span class="string">&#x27;&lt;s:property value=&quot;logBean.actionType&quot;/&gt;&#x27;</span>) &#123;</span><br><span class="line">			$(<span class="string">&quot;#actionType&quot;</span>)</span><br><span class="line">				.get(<span class="number">0</span>)</span><br><span class="line">				.options[i].selected = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/js/js_2022_09_27_001.png" alt="下拉联动验证"></p>
]]></content>
      <categories>
        <category>JSP</category>
      </categories>
      <tags>
        <tag>JSP</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven打包项目编译跳过测试类</title>
    <url>/Maven/blogs/Maven%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE%E7%BC%96%E8%AF%91%E8%B7%B3%E8%BF%87%E6%B5%8B%E8%AF%95%E7%B1%BB/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%BC%96%E8%AF%91%E5%BF%BD%E7%95%A5%E6%B5%8B%E8%AF%95%E7%B1%BBspan"><span id="inline-blue">编译忽略测试类</span></a><ul>
<li><a href="#%E6%8F%92%E4%BB%B6%E4%BE%9D%E8%B5%96%E9%80%89%E9%A1%B9%E6%8E%A7%E5%88%B6">插件依赖选项控制</a></li>
<li><a href="#properties%E9%85%8D%E7%BD%AE%E9%A1%B9">properties配置项</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="编译忽略测试类"><span id="inline-blue">编译忽略测试类</span></span></h1><h2><span id="插件依赖选项控制">插件依赖选项控制</span></h2><p>编译插件依赖项添加<skiptests>true</skiptests>条目</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">source</span>&gt;</span>$&#123;java-version&#125;<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">target</span>&gt;</span>$&#123;java-version&#125;<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">encoding</span>&gt;</span>$&#123;project.encoding&#125;<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此方法不执行测试用例，但会编译测试用例类，生成的class文件保存在target/test-classes下。</p>
<h2><span id="properties配置项">properties配置项</span></h2><p><properties>节点新增&lt;maven.test.skip&gt;true&lt;/maven.test.skip&gt;条目</properties></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">java-version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java-version</span>&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!-- maven打包忽略 test目录编译、不执行测试用例--&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">maven.test.skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">maven.test.skip</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">org.springframework-version</span>&gt;</span>3.0.5.RELEASE<span class="tag">&lt;/<span class="name">org.springframework-version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">org.apache.struts-version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">org.apache.struts-version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">log4j-version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">log4j-version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此方法不执行测试用例，也不编译测试用例类。</p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>gc日志回收设置</title>
    <url>/Jboss/blogs/gc%E6%97%A5%E5%BF%97%E5%9B%9E%E6%94%B6%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluegc%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">gc参数设置</span></a><ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">配置信息</a></li>
</ul>
</li>
<li><a href="#span-idinline-bluegc%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BAspan"><span id="inline-blue">gc日志输出</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="gc参数设置"><span id="inline-blue">gc参数设置</span></span></h1><p>文件名称：run.conf<br>文件路径：/usr/local/sdp_trunk/usm/jboss5/bin</p>
<h2><span id="配置信息">配置信息</span></h2> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span></span><br><span class="line"><span class="bash">d=`date  <span class="string">&#x27;+%Y%m%d&#x27;</span>`</span></span><br><span class="line">if [ &quot;x$JAVA_OPTS&quot; = &quot;x&quot; ]; then</span><br><span class="line">   JAVA_OPTS=&quot;-Xms4G -Xmx4G -Xmn1400M -XX:PermSize=512M -XX:MaxPermSize=512M</span><br><span class="line">        -XX:+PrintGCDetails</span><br><span class="line">        -XX:+PrintGCDateStamps</span><br><span class="line">        -XX:+PrintTenuringDistribution</span><br><span class="line">        -XX:+PrintHeapAtGC</span><br><span class="line">        -XX:+PrintReferenceGC</span><br><span class="line">        -XX:+PrintGCApplicationStoppedTime</span><br><span class="line">        -XX:+PrintSafepointStatistics</span><br><span class="line">        -XX:PrintSafepointStatisticsCount=1</span><br><span class="line">        -Xloggc:/usr/local/sdp_trunk/usm/jboss5/server/default/log/gc-$d.log</span><br><span class="line">    -XX:SurvivorRatio=20 -XX:MaxTenuringThreshold=5 -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:CMSFul</span><br><span class="line">lGCsBeforeCompaction=0 -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled -XX:+CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=85 -XX:SoftRefLRUPolicyMSPerMB=0 -XX:-ReduceInitialCardMarks -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h1><span id="gc日志输出"><span id="inline-blue">gc日志输出</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Total time for which application threads were stopped: 0.0002160 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002200 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002860 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0004960 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002400 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0006370 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002700 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002550 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001760 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001270 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000820 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001410 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001400 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001320 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000810 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001170 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000880 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002370 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000780 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0007060 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000590 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000560 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000480 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001760 seconds</span><br><span class="line">&#123;Heap before GC invocations=0 (full 0):</span><br><span class="line"> par new generation   total 1368448K, used 443248K [0x00000006e0000000, 0x0000000737800000, 0x0000000737800000)</span><br><span class="line">  eden space 1303296K,  34% used [0x00000006e0000000, 0x00000006fb0dc230, 0x000000072f8c0000)</span><br><span class="line">  from space 65152K,   0% used [0x000000072f8c0000, 0x000000072f8c0000, 0x0000000733860000)</span><br><span class="line">  to   space 65152K,   0% used [0x0000000733860000, 0x0000000733860000, 0x0000000737800000)</span><br><span class="line"> concurrent mark-sweep generation total 2760704K, used 0K [0x0000000737800000, 0x00000007e0000000, 0x00000007e0000000)</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>Jboss启动加载异常处理</title>
    <url>/Jboss/blogs/Jboss%E5%90%AF%E5%8A%A8%E5%8A%A0%E8%BD%BD%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90span"><span id="inline-blue">原因分析</span></a><ul>
<li><a href="#%E5%BC%82%E5%B8%B8%E5%86%85%E5%AE%B9">异常内容</a></li>
<li><a href="#%E6%AD%A3%E5%B8%B8%E5%86%85%E5%AE%B9">正常内容</a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2022-08-11 11:01:09,709 INFO  [org.quartz.core.QuartzScheduler] (main) Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.</span><br><span class="line">2022-08-11 11:01:09,981 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Start: name=jboss:database=localDB,service=Hypersonic state=Create mode=Manual requiredState=Installed</span><br><span class="line">java.sql.SQLException: error in script file line: 1 Unexpected token: TP in statement [tp]</span><br><span class="line">	at org.hsqldb.jdbc.Util.sqlException(Unknown Source)</span><br><span class="line">	at org.hsqldb.jdbc.jdbcConnection.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.hsqldb.jdbcDriver.getConnection(Unknown Source)</span><br><span class="line">	at org.hsqldb.jdbcDriver.connect(Unknown Source)</span><br><span class="line">	at java.sql.DriverManager.getConnection(DriverManager.java:582)</span><br><span class="line">	at java.sql.DriverManager.getConnection(DriverManager.java:185)</span><br><span class="line">	at org.jboss.jdbc.HypersonicDatabase.getConnection(HypersonicDatabase.java:777)</span><br><span class="line">	at org.jboss.jdbc.HypersonicDatabase.startStandaloneDatabase(HypersonicDatabase.java:625)</span><br><span class="line">	at org.jboss.jdbc.HypersonicDatabase.startService(HypersonicDatabase.java:568)</span><br><span class="line">	at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:376)</span><br><span class="line">	at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:322)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Method.java:597)</span><br><span class="line">	at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)</span><br><span class="line">	at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)</span><br><span class="line">	at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)</span><br><span class="line">	at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)</span><br><span class="line">	at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)</span><br><span class="line">	at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:189)</span><br><span class="line">	at $Proxy38.start(Unknown Source)</span><br><span class="line">	at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)</span><br><span class="line">	at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)</span><br><span class="line">	at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)</span><br><span class="line">	at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)</span><br><span class="line">	at org.jboss.system.ServiceController.doChange(ServiceController.java:688)</span><br><span class="line">	at org.jboss.system.ServiceController.start(ServiceController.java:460)</span><br><span class="line">	at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)</span><br><span class="line">	at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)</span><br><span class="line">	at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)</span><br><span class="line">	at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)</span><br><span class="line">	at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)</span><br><span class="line">	at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)</span><br><span class="line">	at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)</span><br><span class="line">	at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)</span><br><span class="line">	at org.jboss.Main.boot(Main.java:221)</span><br><span class="line">	at org.jboss.Main$1.run(Main.java:556)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:662)</span><br><span class="line">2022-08-11 11:01:09,986 ERROR </span><br></pre></td></tr></table></figure>
<h1><span id="原因分析"><span id="inline-blue">原因分析</span></span></h1><p>根据报错信息跟踪Jboss默认加载hsqldb数据库信息，查看/usr/local/sdp_trunk/usm/jboss5/server/default/data/hypersonic对应路径数据库文件，发现localDB.script文件内容输出异常。</p>
<h2><span id="异常内容">异常内容</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">7993&amp;weekday=7&amp;forward=programJson&amp;pageSize=8&amp;curPage=3&amp;checkFavorite=Y jump to：/data/btv_programJson.htm takes time:12ms</span><br><span class="line">2015-11-22 20:21:39,791 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 107]---TvProgramAction-- start userId=7305766,forward=programJson,channelId=102800</span><br><span class="line">2015-11-22 20:21:39,791 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 243]---TvProgramAction-- 节目单查询时间weekday=6,startTime:Fri Nov 20 00:00:00 CST 2015----toTime:Sat Nov 21 00:00:00 CST 2015</span><br><span class="line">2015-11-22 20:21:39,792 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 253]---TvProgramAction-- The number of queries to the program46</span><br><span class="line">2015-11-22 20:21:39,792 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 286]---TvProgramAction-- after removed the program which does not meet the time conditions,PageInfo pageSize=8,countPage=6</span><br><span class="line">2015-11-22 20:21:39,801 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 346]-Single-channel video programming background to use the time to take=10ms</span><br><span class="line">2015-11-22 20:21:39,802 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 356]---TvProgramAction-- end ,forward=programJson</span><br><span class="line">2015-11-22 20:21:39,802 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.BaseAction execute 74]---------------/iPG/T-nsp/TvProgram.do?userId=7305766&amp;channelId=102800&amp;weekday=6&amp;forward=programJson&amp;pageSize=8&amp;curPage=1&amp;checkFavorite=Y jump to：/data/btv_programJson.htm takes time:11ms</span><br><span class="line">2015-11-22 20:21:39,821 [http-0.0.0.0-80-92] [INFO]-[com.coship.ws.client.ClientProxy getAuthorizationProxy 45]-getAuthorizationProxy:userId:6790927aaa:http://10.80.0.80:8080/AAA/AuthorizationService</span><br><span class="line">2015-11-22 20:21:39,824 [http-0.0.0.0-80-92] [INFO]-[com.coship.epg.service.mod.impl.AuthorityServiceImpl productAuthorizationBat 329]-productAuthorizationBat:com.coship.authorize.service.ProductAuthoReq@51040d1e[productId=100008,userId=6790927,__equalsCalc=&lt;null&gt;,__hashCodeCalc=false]</span><br><span class="line">2015-11-22 20:21:39,827 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.mod.CheckBuyAction exec 105]-Authentication sateType 2: userId7435005 catalogResource ID:176964</span><br><span class="line">2015-11-22 20:21:39,827 [http-0.0.0.0-80-12] [INFO]-[com.coship.ws.client.ClientProxy getAuthorizationProxy 45]-getAuthorizationProxy:userId:7435005aaa:http://10.80.0.44:8080/AAA/AuthorizationService</span><br><span class="line">2015-11-22 20:21:39,830 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.service.mod.impl.AuthorityServiceImpl productAuthorizationBat 329]-productAuthorizationBat:com.coship.authorize.service.ProductAuthoReq@60f9561f[productId=100008,userId=7435005,__equalsCalc=&lt;null&gt;,__hashCodeCalc=false]</span><br><span class="line">2015-11-22 20:21:39,831 [http-0.0.0.0-80-92] [INFO]-[com.coship.epg.service.mod.impl.AuthorityServiceImpl productAuthorizationBat 334]-pro</span><br></pre></td></tr></table></figure>
<h2><span id="正常内容">正常内容</span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE SCHEMA PUBLIC AUTHORIZATION DBA</span><br><span class="line">CREATE MEMORY TABLE JBM_DUAL(DUMMY INTEGER NOT NULL PRIMARY KEY)</span><br><span class="line">CREATE MEMORY TABLE JBM_MSG_REF(MESSAGE_ID BIGINT NOT NULL,CHANNEL_ID BIGINT NOT NULL,TRANSACTION_ID BIGINT,STATE CHAR(1),ORD BIGINT,PAGE_ORD BIGINT,DELIVERY_COUNT INTEGER,SCHED_DELIVERY BIGINT,PRIMARY KEY(MESSAGE_ID,CHANNEL_ID))</span><br><span class="line">CREATE INDEX JBM_MSG_REF_TX ON JBM_MSG_REF(TRANSACTION_ID,STATE)</span><br><span class="line">CREATE MEMORY TABLE JBM_MSG(MESSAGE_ID BIGINT NOT NULL PRIMARY KEY,RELIABLE CHAR(1),EXPIRATION BIGINT,TIMESTAMP BIGINT,PRIORITY TINYINT,TYPE TINYINT,HEADERS LONGVARBINARY,PAYLOAD LONGVARBINARY)</span><br><span class="line">CREATE MEMORY TABLE JBM_TX(NODE_ID INTEGER,TRANSACTION_ID BIGINT NOT NULL PRIMARY KEY,BRANCH_QUAL VARBINARY(254),FORMAT_ID INTEGER,GLOBAL_TXID VARBINARY(254))</span><br><span class="line">CREATE MEMORY TABLE JBM_COUNTER(NAME VARCHAR(255) NOT NULL PRIMARY KEY,NEXT_ID BIGINT)</span><br><span class="line">CREATE MEMORY TABLE JBM_ID_CACHE(NODE_ID INTEGER NOT NULL,CNTR INTEGER NOT NULL,JBM_ID VARCHAR(255),PRIMARY KEY(NODE_ID,CNTR))</span><br><span class="line">CREATE MEMORY TABLE JBM_USER(USER_ID VARCHAR(32) NOT NULL PRIMARY KEY,PASSWD VARCHAR(32) NOT NULL,CLIENTID VARCHAR(128))</span><br><span class="line">CREATE MEMORY TABLE JBM_ROLE(ROLE_ID VARCHAR(32) NOT NULL,USER_ID VARCHAR(32) NOT NULL,PRIMARY KEY(USER_ID,ROLE_ID))</span><br><span class="line">CREATE MEMORY TABLE JBM_POSTOFFICE(POSTOFFICE_NAME VARCHAR(255) NOT NULL,NODE_ID INTEGER NOT NULL,QUEUE_NAME VARCHAR(255) NOT NULL,CONDITION VARCHAR(1023),SELECTOR VARCHAR(1023),CHANNEL_ID BIGINT,CLUSTERED CHAR(1),ALL_NODES CHAR(1),PRIMARY KEY(POSTOFFICE_NAME,NODE_ID,QUEUE_NAME))</span><br><span class="line">CREATE MEMORY TABLE TIMERS(TIMERID VARCHAR(80) NOT NULL,TARGETID VARCHAR(250) NOT NULL,INITIALDATE TIMESTAMP NOT NULL,TIMERINTERVAL BIGINT,INSTANCEPK VARBINARY,INFO VARBINARY,CONSTRAINT TIMERS_PK PRIMARY KEY(TIMERID,TARGETID))</span><br><span class="line">CREATE USER SA PASSWORD &quot;&quot;</span><br><span class="line">GRANT DBA TO SA</span><br><span class="line">SET WRITE_DELAY 10</span><br><span class="line">SET SCHEMA PUBLIC</span><br><span class="line">INSERT INTO JBM_DUAL VALUES(1)</span><br><span class="line">INSERT INTO JBM_COUNTER VALUES(&#39;CHANNEL_ID&#39;,120)</span><br><span class="line">INSERT INTO JBM_COUNTER VALUES(&#39;MESSAGE_ID&#39;,49152)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;dynsub&#39;,&#39;dynsub&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;guest&#39;,&#39;guest&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;j2ee&#39;,&#39;j2ee&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;john&#39;,&#39;needle&#39;,&#39;DurableSubscriberExample&#39;)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;nobody&#39;,&#39;nobody&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;durpublisher&#39;,&#39;dynsub&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;publisher&#39;,&#39;dynsub&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;guest&#39;,&#39;guest&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;j2ee&#39;,&#39;guest&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;john&#39;,&#39;guest&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;durpublisher&#39;,&#39;john&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;publisher&#39;,&#39;john&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;subscriber&#39;,&#39;john&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;noacc&#39;,&#39;nobody&#39;)</span><br><span class="line">INSERT INTO JBM_POSTOFFICE VALUES(&#39;JMS post office&#39;,0,&#39;DLQ&#39;,&#39;queue.DLQ&#39;,NULL,1,&#39;N&#39;,&#39;N&#39;)</span><br><span class="line">INSERT INTO JBM_POSTOFFICE VALUES(&#39;JMS post office&#39;,0,&#39;ExpiryQueue&#39;,&#39;queue.ExpiryQueue&#39;,NULL,0,&#39;N&#39;,&#39;N&#39;)</span><br></pre></td></tr></table></figure>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>cd /usr/local/sdp_trunk/usm/jboss5/server/default/data/hypersonic 拷贝一份正常文件localDB.script，覆盖启动异常文件<br>重新启动Jboss</p>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>WildFly容器配置</title>
    <url>/WildFly/blogs/WildFly%E5%AE%B9%E5%99%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">下载</span></a></li>
<li><a href="#span-idinline-blue%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">目录说明</span></a></li>
<li><a href="#span-idinline-blue%E6%A8%A1%E5%BC%8F%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">模式说明</span></a><ul>
<li><a href="#domain%E6%A8%A1%E5%BC%8F">domain模式</a></li>
<li><a href="#standalone%E6%A8%A1%E5%BC%8F">standalone模式</a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E6%B3%A8%E5%86%8Cmysql%E6%95%B0%E6%8D%AE%E6%BA%90%E6%A8%A1%E5%9D%97%E9%A9%B1%E5%8A%A8span"><span id="inline-blue">注册MySQL数据源模块驱动</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AEjndi%E6%95%B0%E6%8D%AE%E6%BA%90span"><span id="inline-blue">配置项目JNDI数据源</span></a></li>
<li><a href="#span-idinline-blue%E5%BC%80%E5%90%AF%E5%A4%96%E9%83%A8%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AEspan"><span id="inline-blue">开启外部主机访问</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AEsslspan"><span id="inline-blue">配置SSL</span></a><ul>
<li><a href="#%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6%E5%91%BD%E4%BB%A4">生成证书命令</a></li>
<li><a href="#%E5%AF%BC%E5%87%BA%E8%AF%81%E4%B9%A6%E5%91%BD%E4%BB%A4">导出证书命令</a></li>
<li><a href="#keytool%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0">keyTool命令参数</a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AEsslspan"><span id="inline-blue">应用配置SSL</span></a></li>
<li><a href="#span-idinline-blue%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E9%85%8D%E7%BD%AEsslspan"><span id="inline-blue">管理后台配置SSL</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E7%AE%A1%E7%90%86%E5%91%98span"><span id="inline-blue">添加管理员</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a><ul>
<li><a href="#google%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E5%85%A5%E8%AF%81%E4%B9%A6">Google浏览器导入证书</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="下载"><span id="inline-blue">下载</span></span></h1><p>官网下载地址：<a href="https://www.wildfly.org/downloads/">https://www.wildfly.org/downloads/</a></p>
<p>容器版本：wildfly-26.1.0.Final</p>
<h1><span id="目录说明"><span id="inline-blue">目录说明</span></span></h1><p>appclient – application client 客户端<br>bin – 各种脚本的位置<br>docs – 各种文档信息和配置例子<br>domain – domain mode 的专门目录<br>standalone – standalone server 的专门目录<br>modules – server中的各种模块<br>welcome-content – 默认的欢迎页面<br>WildFly启动分为单机和域模式，启动脚本对应bin目录下standalone.sh和domain.sh</p>
<h1><span id="模式说明"><span id="inline-blue">模式说明</span></span></h1><h2><span id="domain模式">domain模式</span></h2><pre><code>configuration – 配置文件目录
content – Host Controller工作时候的内部区域
lib – server运行时依赖的lib
log – 日志目录
tmp – 临时文件
servers – 要部署的程序目录</code></pre>
<h2><span id="standalone模式">standalone模式</span></h2><pre><code>configuration – 配置文件目录
data – server运行时的持久化存储信息
deployments – 要部署的程序目录
lib – server运行时依赖的lib
log – 日志目录
tmp – 临时文件</code></pre>
<h1><span id="注册mysql数据源模块驱动"><span id="inline-blue">注册MySQL数据源模块驱动</span></span></h1><p>创建mysql模块依赖文件目录及相应文件内容<br>cd /usr/local/WildFly/modules/system/layers/base/com<br>#创建mysql模块所在目录<br>mkdir -p  mysql/main<br>cd mysql/main<br>#创建module.xml文件，内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  ~ JBoss, Home of Professional Open Source.</span></span><br><span class="line"><span class="comment">  ~ Copyright 2010, Red Hat, Inc., and individual contributors</span></span><br><span class="line"><span class="comment">  ~ as indicated by the @author tags. See the copyright.txt file in the</span></span><br><span class="line"><span class="comment">  ~ distribution for a full listing of individual contributors.</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~ This is free software; you can redistribute it and/or modify it</span></span><br><span class="line"><span class="comment">  ~ under the terms of the GNU Lesser General Public License as</span></span><br><span class="line"><span class="comment">  ~ published by the Free Software Foundation; either version 2.1 of</span></span><br><span class="line"><span class="comment">  ~ the License, or (at your option) any later version.</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~ This software is distributed in the hope that it will be useful,</span></span><br><span class="line"><span class="comment">  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span><br><span class="line"><span class="comment">  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span></span><br><span class="line"><span class="comment">  ~ Lesser General Public License for more details.</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~ You should have received a copy of the GNU Lesser General Public</span></span><br><span class="line"><span class="comment">  ~ License along with this software; if not, write to the Free</span></span><br><span class="line"><span class="comment">  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA</span></span><br><span class="line"><span class="comment">  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;com.mysql&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:module:1.9&quot;</span> &gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jboss.api&quot;</span> <span class="attr">value</span>=<span class="string">&quot;private&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">     <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">resource-root</span> <span class="attr">path</span>=<span class="string">&quot;mysql-connector-java-5.1.12.jar&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;javax.api&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;javax.transaction.api&quot;</span>/&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;javax.servlet.api&quot;</span> <span class="attr">optional</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>mysql 驱动jar包名称，根据项目可自行更改。<br>将mysql-connector-java-5.1.12.jar文件上传到目录/usr/local/WildFly/modules/system/layers/base/com/mysql/main</p>
<h1><span id="配置项目jndi数据源"><span id="inline-blue">配置项目JNDI数据源</span></span></h1><p>cd /usr/local/WildFly/standalone/configuration<br>vim standalone.xml<br>在datasources节点下新增如下内容:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">datasource</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:/grm&quot;</span> <span class="attr">pool-name</span>=<span class="string">&quot;grm&quot;</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-url</span>&gt;</span>jdbc:mysql://10.9.212.55:3306/global_fj<span class="tag">&lt;/<span class="name">connection-url</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver-class</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">driver-class</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-property</span> <span class="attr">name</span>=<span class="string">&quot;databaseName&quot;</span>&gt;</span></span><br><span class="line">                        global_fj</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">connection-property</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-property</span> <span class="attr">name</span>=<span class="string">&quot;useUnicode&quot;</span>&gt;</span></span><br><span class="line">                        true</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">connection-property</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span>&gt;</span></span><br><span class="line">                        utf8</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">connection-property</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">pool</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">min-pool-size</span>&gt;</span>30<span class="tag">&lt;/<span class="name">min-pool-size</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">initial-pool-size</span>&gt;</span>30<span class="tag">&lt;/<span class="name">initial-pool-size</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">max-pool-size</span>&gt;</span>50<span class="tag">&lt;/<span class="name">max-pool-size</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">use-strict-min</span>&gt;</span>false<span class="tag">&lt;/<span class="name">use-strict-min</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">pool</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">security</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">user-name</span>&gt;</span>root<span class="tag">&lt;/<span class="name">user-name</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">password</span>&gt;</span>coship<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">security</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">validation</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">valid-connection-checker</span> <span class="attr">class-name</span>=<span class="string">&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">check-valid-connection-sql</span>&gt;</span>select 1 from dual<span class="tag">&lt;/<span class="name">check-valid-connection-sql</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">validate-on-match</span>&gt;</span>true<span class="tag">&lt;/<span class="name">validate-on-match</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exception-sorter</span> <span class="attr">class-name</span>=<span class="string">&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">validation</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">datasource</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更改JDNI名称，连接池名称，数据库IP、数据库名称、用户名、密码<br>配置mysql驱动，在drivers节点下新增driver节点，内容如下 :</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&quot;mysql&quot;</span> <span class="attr">module</span>=<span class="string">&quot;com.mysql&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">driver-class</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">driver-class</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">xa-datasource-class</span>&gt;</span>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource<span class="tag">&lt;/<span class="name">xa-datasource-class</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="开启外部主机访问"><span id="inline-blue">开启外部主机访问</span></span></h1><p>Interfaces节点下修改配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">interfaces</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;any&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">any-address</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;management&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">any-address</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;public&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inet-address</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.bind.address:127.0.0.1&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interfaces</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">socket-binding-group</span> <span class="attr">name</span>=<span class="string">&quot;standard-sockets&quot;</span> <span class="attr">default-interface</span>=<span class="string">&quot;any&quot;</span> <span class="attr">port-offset</span>=<span class="string">&quot;$&#123;jboss.socket.binding.port-offset:0&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;ajp&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.ajp.port:8009&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;http&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.http.port:8080&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;https&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.https.port:8443&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-http&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.http.port:9990&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-https&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.https.port:9993&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-recovery-environment&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4712&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-status-manager&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4713&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">outbound-socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;mail-smtp&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote-destination</span> <span class="attr">host</span>=<span class="string">&quot;$&#123;jboss.mail.server.host:localhost&#125;&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.mail.server.port:25&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">outbound-socket-binding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">socket-binding-group</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="配置ssl"><span id="inline-blue">配置SSL</span></span></h1><p>通过jdk工具keyTool生成证书</p>
<h2><span id="生成证书命令">生成证书命令</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd  /home</span><br><span class="line">keytool -genkey -alias coship  -keyalg RSA -keysize 2048 -validity 3650 -ext SAN=dns:www.grm.com,ip:10.9.216.12  -keystore /home/certificate.jks -storepass coshipOk698 -dname &quot;CN=www.grm.com, OU=www.grm.com, O=www.grm.com, L=wuhan, ST=wuhan, C=cn&quot;</span><br></pre></td></tr></table></figure>

<h2><span id="导出证书命令">导出证书命令</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -export -trustcacerts -alias coship -file /home/cas.crt -keystore /home/certificate.jks -storepass coshipOk698</span><br></pre></td></tr></table></figure>
<h2><span id="keytool命令参数">keyTool命令参数</span></h2><p>-genkey      在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书<br>(在没有指定生成位置的情况下,keystore会存在用户系统默认目录，如：对于window xp系统，会生成在系统的C:/Documents and Settings/UserName/文件名为“.keystore”)<br>-alias       产生别名<br>-keystore    指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg      指定密钥的算法 (如 RSA  DSA（如果不指定默认采用DSA）)<br>-validity    指定创建的证书有效期多少天<br>-keysize     指定密钥长度<br>-storepass   指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass     指定别名条目的密码(私钥的密码)<br>-dname       指定证书拥有者信息 例如：  “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list        显示密钥库中的证书信息      keytool -list -v -keystore 指定keystore -storepass 密码<br>-v           显示密钥库中的证书详细信息<br>-export      将别名指定的证书导出到文件  keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file        参数指定导出到文件的文件名<br>-delete      删除密钥库中某条目          keytool -delete -alias 指定需删除的别  -keystore 指定keystore  -storepass 密码<br>-printcert   查看导出的证书信息          keytool -printcert -file yushan.crt<br>-keypasswd   修改密钥库中指定条目口令    keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new  新密码  -storepass keystore密码  -keystore sage<br>-storepasswd 修改keystore口令      keytool -storepasswd -keystore e:/yushan.keystore(需修改口令的keystore) -storepass 123456(原始密码) -new yushan(新密码)<br>-import      将已签名数字证书导入密钥库  keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>
<p>/home路径下生成两个文件certificate.jks、cas.crt，将certificate.jks文件拷贝至/usr/local/WildFly/standalone/configuration目录下，浏览器访问后台需要导入cas.crt证书文件（导入到受信任的根证书颁发机构）</p>
<h1><span id="应用配置ssl"><span id="inline-blue">应用配置SSL</span></span></h1><p>cd /usr/local/GRM/WildFly/standalone/configuration/<br>standalone.xml文件tls节点更改如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tls</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-store</span> <span class="attr">name</span>=<span class="string">&quot;applicationKS&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;coshipOk698&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">implementation</span> <span class="attr">type</span>=<span class="string">&quot;JKS&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">file</span> <span class="attr">path</span>=<span class="string">&quot;certificate.jks&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-store</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-manager</span> <span class="attr">name</span>=<span class="string">&quot;applicationKM&quot;</span> <span class="attr">key-store</span>=<span class="string">&quot;applicationKS&quot;</span> <span class="attr">generate-self-signed-certificate-host</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;coshipOk698&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-manager</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">server-ssl-context</span> <span class="attr">name</span>=<span class="string">&quot;applicationSSC&quot;</span> <span class="attr">key-manager</span>=<span class="string">&quot;applicationKM&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tls</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="管理后台配置ssl"><span id="inline-blue">管理后台配置SSL</span></span></h1><p>cd /usr/local/GRM/WildFly/standalone/configuration/ standalone.xml文件management-interfaces节点更新内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">management-interfaces</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http-interface</span> <span class="attr">http-authentication-factory</span>=<span class="string">&quot;management-http-authentication&quot;</span> <span class="attr">ssl-context</span>=<span class="string">&quot;applicationSSC&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-upgrade</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">sasl-authentication-factory</span>=<span class="string">&quot;management-sasl-authentication&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">http</span>=<span class="string">&quot;management-http&quot;</span> <span class="attr">https</span>=<span class="string">&quot;management-https&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">http-interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">management-interfaces</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="添加管理员"><span id="inline-blue">添加管理员</span></span></h1><p>cd /usr/local/GRM/WildFly/bin<br> sh add-user.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">What type of user do you wish to add? </span><br><span class="line"> a) Management User (mgmt-users.properties) //管理域用户</span><br><span class="line"> b) Application User (application-users.properties) //应用程序域用户（目前没有使用）</span><br><span class="line">(a): a</span><br><span class="line"></span><br><span class="line">Enter the details of the new user to add. //设置用户名</span><br><span class="line">Using realm &#x27;ManagementRealm&#x27; as discovered from the existing property files.</span><br><span class="line">Username : system</span><br><span class="line">Password recommendations are listed below. To modify these restrictions edit the add-user.properties configuration file.</span><br><span class="line"> - The password should be different from the username</span><br><span class="line"> - The password should not be one of the following restricted values &#123;root, admin, administrator&#125;</span><br><span class="line"> - The password should contain at least 8 characters, 1 alphabetic character(s), 1 digit(s), 1 non-alphanumeric symbol(s)//密码要求至少长度为8位，至少包含一个字母、一个数字、一个特殊字符</span><br><span class="line">Password : </span><br><span class="line">Re-enter Password : </span><br><span class="line">What groups do you want this user to belong to? (Please enter a comma separated list, or leave blank for none)[  ]: </span><br><span class="line">About to add user &#x27;system&#x27; for realm &#x27;ManagementRealm&#x27;</span><br><span class="line">Is this correct yes/no? y //添加在管理控制域</span><br><span class="line">Added user &#x27;system&#x27; to file &#x27;/usr/local/GRM/WildFly/standalone/configuration/mgmt-users.properties&#x27;</span><br><span class="line">Added user &#x27;system&#x27; to file &#x27;/usr/local/GRM/WildFly/domain/configuration/mgmt-users.properties&#x27;</span><br><span class="line">Added user &#x27;system&#x27; with groups  to file &#x27;/usr/local/GRM/WildFly/standalone/configuration/mgmt-groups.properties&#x27;</span><br><span class="line">Added user &#x27;system&#x27; with groups  to file &#x27;/usr/local/GRM/WildFly/domain/configuration/mgmt-groups.properties&#x27;</span><br><span class="line">Is this new user going to be used for one AS process to connect to another AS process? </span><br><span class="line">e.g. for a slave host controller connecting to the master or for a Remoting connection for server to server Jakarta Enterprise Beans calls</span><br><span class="line">.yes/no? no //不需要主从模式设置为no</span><br></pre></td></tr></table></figure>

<p>默认管理员添加完成后，重启即可通过管理员访问管理后台。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>SSL配置完成后<br>服务器配置域名：<br>新增条目 10.9.216.12 <a href="http://www.grm.com/">www.grm.com</a><br>vim /etc/hosts  </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4 12.erm.com</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">10.9.212.49 1.erm.com</span><br><span class="line">140.82.113.3 github.com</span><br><span class="line">10.9.216.12 www.grm.com</span><br></pre></td></tr></table></figure>
<p>Windows客户端域名配置：<br>新增条目 10.9.216.12 <a href="http://www.grm.com/">www.grm.com</a><br>vim C:\Windows\System32\drivers\etc\hosts</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">GitHub  start</span></span><br><span class="line"><span class="meta">#</span><span class="bash">192.30.255.112 github.com</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">202.160.130.66 github.global.ssl.fastly.net</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Github end</span></span><br><span class="line">185.199.108.153 vanishke.github.io</span><br><span class="line">185.199.109.153 vanishke.github.io</span><br><span class="line">185.199.110.153 vanishke.github.io</span><br><span class="line">185.199.111.153 vanishke.github.io</span><br><span class="line">140.82.113.3 github.com</span><br><span class="line">185.199.108.153 eclipse-jetty.github.io</span><br><span class="line">185.199.108.153 xzer.github.io</span><br><span class="line">140.82.112.4 github.com</span><br><span class="line">104.21.50.214 www.onlinedoctranslator.com127.0.0.1       activate.navicat.com</span><br><span class="line">162.159.152.4 medium.com</span><br><span class="line">10.9.216.12 www.grm.com</span><br></pre></td></tr></table></figure>

<h2><span id="google浏览器导入证书">Google浏览器导入证书</span></h2><p>谷歌浏览器访问chrome://settings/privacy<br><img src="/images/WildFly/WildFly_2022_08_26_001.png" alt="导入证书"></p>
<p>启动WildFly<br>cd /usr/local/GRM/WildFly/bin<br>sh standalone.xml &amp; </p>
<p>访问WildFly管理后台</p>
<p><a href="https://www.grm.com:9993/console/index.html">https://www.grm.com:9993/console/index.html</a><br><img src="/images/WildFly/WildFly_2022_08_26_002.png" alt="WildFly容器配置"></p>
]]></content>
      <categories>
        <category>WildFly</category>
      </categories>
      <tags>
        <tag>WildFly</tag>
        <tag>Https</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux查找指定class文件所在位置</title>
    <url>/Linux/blogs/Linux%E6%9F%A5%E6%89%BE%E6%8C%87%E5%AE%9Aclass%E6%96%87%E4%BB%B6%E6%89%80%E5%9C%A8%E4%BD%8D%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AFspan"><span id="inline-blue">使用场景</span></a></li>
<li><a href="#span-idinline-blue%E5%91%BD%E4%BB%A4%E8%B0%83%E7%94%A8span"><span id="inline-blue">命令调用</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9Cspan"><span id="inline-blue">查询结果</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="使用场景"><span id="inline-blue">使用场景</span></span></h1><p>线上应用异常日志打印信息关联某个class文件，但不确定具体存在那个jar包</p>
<h1><span id="命令调用"><span id="inline-blue">命令调用</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls *.jar | while read jarfile; do</span><br><span class="line">    echo &quot;$jarfile&quot;</span><br><span class="line">    jar -tf $jarfile | grep &quot;Integer.class&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h1><span id="查询结果"><span id="inline-blue">查询结果</span></span></h1><p><img src="/images/linux/Linux_20220715_001.png" alt="Jboss容器自启动"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>基于Jboss容器自动启动脚本工具</title>
    <url>/Jboss/blogs/%E5%9F%BA%E4%BA%8EJboss%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E8%84%9A%E6%9C%AC%E5%86%85%E5%AE%B9span"><span id="inline-blue">脚本内容</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><p>解决服务器同级目录下,多个模块使用Jboss容器自动启动脚本设置。</p>
<h1><span id="脚本内容"><span id="inline-blue">脚本内容</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">搜索jboss start.sh&amp;stop.sh脚本所在目录，先执行stop.sh,两秒之后执行start.sh启动</span></span><br><span class="line">function restart_module()&#123;</span><br><span class="line">   cd $1</span><br><span class="line">   sh stop.sh &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">   sleep 2</span><br><span class="line">   sh start.sh &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p_path=`pwd`</span><br><span class="line"><span class="meta">#</span><span class="bash"> 去掉BAK、soft和depg目录</span></span><br><span class="line">start_loction=`find $p_path \( -path $p_path/BAK -o -path $p_path/soft  -o -path $p_path/depg \) -prune -o -name start.sh`</span><br><span class="line">for i in $start_loction; do</span><br><span class="line">    if [ -f $i ]; then</span><br><span class="line">       start_path=`dirname $i`</span><br><span class="line">       echo $start_path</span><br><span class="line">       restart_module $start_path</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>将脚本上传至需要设置自动启动的项目同级目录下，执行 chmod a+x *.sh<br><img src="/images/Jboss/Jboss_20220712_001.png" alt="Jboss容器自启动"></p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">startsdp.sh脚本</span></span><br><span class="line">sh startsdp.sh</span><br></pre></td></tr></table></figure>
<p>命令执行之后会打印启动执行的脚本所在位置。<br><img src="/images/Jboss/Jboss_20220712_002.png" alt="Jboss容器自启动"></p>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>Jetty访问jsp失败原因分析</title>
    <url>/Jetty/blogs/Jetty%E8%AE%BF%E9%97%AEjsp%E5%A4%B1%E8%B4%A5%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90span"><span id="inline-blue">原因分析</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">HTTP ERROR 404</span><br><span class="line"></span><br><span class="line">Problem accessing /cache/cosole.jsp. Reason:</span><br><span class="line"></span><br><span class="line">Not Found</span><br></pre></td></tr></table></figure>
<h1><span id="原因分析"><span id="inline-blue">原因分析</span></span></h1><p>应用部署到Jetty之后，因为jetty没有work目录的原因，导致jetty使用的是/tmp目录<br>对应jetty配置文件内容如下：<br>文件路径：/usr/local/iepg-jetty/bin/jetty.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">209 ##################################################</span><br><span class="line">210 # Set tmp if not already set.</span><br><span class="line">211 ##################################################</span><br><span class="line">212 TMPDIR=$&#123;TMPDIR:-/tmp&#125;</span><br><span class="line">213 </span><br></pre></td></tr></table></figure>

<p>从以上脚本文件设置得知jetty确实使用的是系统临时文件目录,查看对应目录缺失没有jsp编译生成的class文件，猜测可能是系统定时任务会自动清理对应的临时文件目录。<br>查看系统对应的定时任务设置，查找到对应的内容信息。<br>系统临时目录清除任务路径：/etc/cron.daily/<br>系统临时目录清除任务名称：tmpwatch</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/sh</span></span><br><span class="line">flags=-umc</span><br><span class="line">/usr/sbin/tmpwatch &quot;$flags&quot; -x /tmp/.X11-unix -x /tmp/.XIM-unix \</span><br><span class="line">        -x /tmp/.font-unix -x /tmp/.ICE-unix -x /tmp/.Test-unix \</span><br><span class="line">        -X &#x27;/tmp/hsperfdata_*&#x27; 10d /tmp</span><br><span class="line">/usr/sbin/tmpwatch &quot;$flags&quot; 30d /var/tmp</span><br><span class="line">for d in /var/&#123;cache/man,catman&#125;/&#123;cat?,X11R6/cat?,local/cat?&#125;; do</span><br><span class="line">    if [ -d &quot;$d&quot; ]; then</span><br><span class="line">        /usr/sbin/tmpwatch &quot;$flags&quot; -f 30d &quot;$d&quot;</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>tmpwatch脚本作用是根据创建时间清除/tmp目录下指定时间没有被访问过的文件(10天)<br>命令参数详情如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-u, --atime		基于访问时间来删除文件，默认的。</span><br><span class="line">-m, --mtime		基于修改时间来删除文件。</span><br><span class="line">-c, --ctime		基于创建时间来删除文件，对于目录，基于mtime。</span><br><span class="line">-M, --dirmtime	删除目录基于目录的修改时间而不是访问时间。</span><br><span class="line">-a, --all		删除所有的文件类型，不只是普通文件，符号链接和目录。</span><br><span class="line">-d, --nodirs	不尝试删除目录，即使是空目录。</span><br><span class="line">-d, --nosymlinks	不尝试删除符号链接。</span><br><span class="line">-f, --force		强制删除。</span><br><span class="line">-q, --quiet		只报告错误信息。</span><br><span class="line">-s, --fuser		如果文件已经是打开状态在删除前，尝试使用“定影”命令。默认不启用。</span><br><span class="line">-t, --test		仅作测试，并不真的删除文件或目录。</span><br><span class="line">-U, --exclude-user=user	不删除属于谁的文件。</span><br><span class="line">-v, --verbose	打印详细信息。</span><br><span class="line">-x, --exclude=path	排除路径，如果路径是一个目录，它包含的所有文件被排除了。如果路径不存在，它必须是一个绝对路径不包含符号链接。</span><br><span class="line">-X, --exclude-pattern=pattern	排除某规则下的路径。</span><br></pre></td></tr></table></figure>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p><strong><em>方案1</em></strong><br>jetty主目录下新建work目录<br><img src="/images/jetty/jetty_2022_07_06_001.png" alt="Jetty临时目录设置"></p>
<p><strong><em>方案2</em></strong><br>重新指定jetty临时文件目录<br>编辑bin目录下jetty.sh文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">TMPDIR=$&#123;TMPDIR:-/tmp&#125;</span><br><span class="line">改为</span><br><span class="line">TMPDIR=$&#123;TMPDIR:-/usr/local/tmp&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Jetty</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>jboss-5.1.0.GA启动报错解决</title>
    <url>/Jboss/blogs/jboss-5.1.0.GA%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">10:13:23,908 INFO  [JMXKernel] Legacy JMX core initialized</span><br><span class="line">10:13:24,590 ERROR [AbstractKernelController] Error installing to Instantiated: name=AttachmentStore state=Described</span><br><span class="line">java.lang.IllegalArgumentException: Wrong arguments. new for target java.lang.reflect.Constructor expected=[java.net.URI] actual=[java.io.</span><br><span class="line">File]	at org.jboss.reflect.plugins.introspection.ReflectionUtils.handleErrors(ReflectionUtils.java:395)</span><br><span class="line">	at org.jboss.reflect.plugins.introspection.ReflectionUtils.newInstance(ReflectionUtils.java:153)</span><br><span class="line">	at org.jboss.reflect.plugins.introspection.ReflectConstructorInfoImpl.newInstance(ReflectConstructorInfoImpl.java:106)</span><br><span class="line">	at org.jboss.joinpoint.plugins.BasicConstructorJoinPoint.dispatch(BasicConstructorJoinPoint.java:80)</span><br><span class="line">	at org.jboss.aop.microcontainer.integration.AOPConstructorJoinpoint.createTarget(AOPConstructorJoinpoint.java:282)</span><br><span class="line">	at org.jboss.aop.microcontainer.integration.AOPConstructorJoinpoint.dispatch(AOPConstructorJoinpoint.java:103)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.KernelControllerContextAction$JoinpointDispatchWrapper.execute(KernelControllerContextActio</span><br><span class="line">n.java:241)	at org.jboss.kernel.plugins.dependency.ExecutionWrapper.execute(ExecutionWrapper.java:47)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchExecutionWrapper(KernelControllerContextAction.java:1</span><br><span class="line">09)	at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchJoinPoint(KernelControllerContextAction.java:70)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.InstantiateAction.installActionInternal(InstantiateAction.java:66)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42)</span><br><span class="line">	at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)</span><br><span class="line">	at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:774)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:540)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deployBean(AbstractKernelDeployer.java:319)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deployBeans(AbstractKernelDeployer.java:297)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deploy(AbstractKernelDeployer.java:130)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.BasicKernelDeployer.deploy(BasicKernelDeployer.java:76)</span><br><span class="line">	at org.jboss.bootstrap.microcontainer.TempBasicXMLDeployer.deploy(TempBasicXMLDeployer.java:91)</span><br><span class="line">	at org.jboss.bootstrap.microcontainer.TempBasicXMLDeployer.deploy(TempBasicXMLDeployer.java:161)</span><br><span class="line">	at org.jboss.bootstrap.microcontainer.ServerImpl.doStart(ServerImpl.java:138)</span><br><span class="line">	at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:450)</span><br><span class="line">	at org.jboss.Main.boot(Main.java:221)</span><br><span class="line">	at org.jboss.Main$1.run(Main.java:556)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Failed to boot JBoss:</span><br><span class="line">java.lang.IllegalStateException: Incompletely deployed:</span><br><span class="line"></span><br></pre></td></tr></table></figure>










<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>修改以下文件对应节点内容：/usr/local/GRM/jboss-5.1.0.GA/server/default/conf/bootstrap/profile.xml<br>修改前：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;!-- The attachment store --&gt;</span><br><span class="line">        &lt;bean name=&quot;AttachmentStore&quot; class=&quot;org.jboss.system.server.profileservice.repository.AbstractAttachmentStore&quot;&gt;</span><br><span class="line">                &lt;constructor&gt;&lt;parameter&gt;&lt;inject bean=&quot;BootstrapProfileFactory&quot; property=&quot;attachmentStoreRoot&quot; /&gt;&lt;/parameter&gt;&lt;/constructor&gt;</span><br><span class="line">                &lt;property name=&quot;mainDeployer&quot;&gt;&lt;inject bean=&quot;MainDeployer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;serializer&quot;&gt;&lt;inject bean=&quot;AttachmentsSerializer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;persistenceFactory&quot;&gt;&lt;inject bean=&quot;PersistenceFactory&quot; /&gt;&lt;/property&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;!-- The attachment store --&gt;</span><br><span class="line">        &lt;bean name=&quot;AttachmentStore&quot; class=&quot;org.jboss.system.server.profileservice.repository.AbstractAttachmentStore&quot;&gt;</span><br><span class="line">                &lt;constructor&gt;&lt;parameter class=&quot;java.io.File&quot;&gt;&lt;inject bean=&quot;BootstrapProfileFactory&quot; property=&quot;attachmentStoreRoot&quot; /&gt;&lt;/parameter&gt;&lt;/constructor&gt;</span><br><span class="line">                &lt;property name=&quot;mainDeployer&quot;&gt;&lt;inject bean=&quot;MainDeployer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;serializer&quot;&gt;&lt;inject bean=&quot;AttachmentsSerializer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;persistenceFactory&quot;&gt;&lt;inject bean=&quot;PersistenceFactory&quot; /&gt;&lt;/property&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>freemarker宏模板实现ztree栏目树</title>
    <url>/Ztree/blogs/freemarker%E5%AE%8F%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0ztree%E6%A0%8F%E7%9B%AE%E6%A0%91/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">版本信息</span></a></li>
<li><a href="#span-idinline-blue%E5%85%B3%E9%94%AE%E7%82%B9span"><span id="inline-blue">关键点</span></a></li>
<li><a href="#span-idinline-blue%E9%A1%B5%E9%9D%A2%E5%AE%9E%E7%8E%B0%E7%BB%86%E8%8A%82span"><span id="inline-blue">页面实现细节</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="版本信息"><span id="inline-blue">版本信息</span></span></h1><p>Freemarker: 2.3.24<br>Ztree：JQuery zTree core v3.5.17-beta.2</p>
<h1><span id="关键点"><span id="inline-blue">关键点</span></span></h1><blockquote>
<p>因为使用hibernate的缘故，栏目节点的parent为对象，而非简单数据类型，这里将影响到ztree初始化节点key设置，pIdKey设置为parentNode.id。<br>栏目模板的递归调用,后台返回的节点存在children节点，可以递归得到所有数据节点。</p>
</blockquote>
<h1><span id="页面实现细节"><span id="inline-blue">页面实现细节</span></span></h1><p>页面引入ztree依赖资源文件：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;base&#125;/res/ztree/css/ztree.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;base&#125;/res/ztree/js/jquery.ztree.all-3.5.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ztree初始化:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> settingss = </span><br><span class="line">				 &#123;</span><br><span class="line">		                data: </span><br><span class="line">		                &#123;</span><br><span class="line">		                    simpleData: </span><br><span class="line">		                    &#123;</span><br><span class="line">		                        enable: <span class="literal">true</span>,  </span><br><span class="line">		                        idKey: <span class="string">&quot;id&quot;</span>,  <span class="comment">//节点标识,对应后台返回数据节点ID</span></span><br><span class="line">		                        pIdKey: <span class="string">&quot;parent.id&quot;</span>, <span class="comment">//父节点对象关联，对应后台返回数据节点parentId  </span></span><br><span class="line">		                        rootPId: -<span class="number">1</span>  <span class="comment">//父节点不存在情况下使用根节点适配</span></span><br><span class="line">		                     &#125;,</span><br><span class="line">		                    key: </span><br><span class="line">		                    &#123;</span><br><span class="line">		                        name: <span class="string">&quot;name&quot;</span>  <span class="comment">//节点显示名称</span></span><br><span class="line">		                     &#125;</span><br><span class="line">		                       </span><br><span class="line">		                &#125;,</span><br><span class="line">			           check:</span><br><span class="line">			            &#123;</span><br><span class="line">			                enable:<span class="literal">true</span>,  <span class="comment">//开启节点checkbox选项</span></span><br><span class="line">			                nocheckInherit:<span class="literal">false</span>  <span class="comment">//是否有级联，当前节点受到父节点和子节点状态影响 </span></span><br><span class="line">			            &#125;</span><br><span class="line">		            &#125;;</span><br><span class="line">				 $.ajax(&#123;</span><br><span class="line">		                    type:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">		                    url:<span class="string">&quot;v_tree_channels.do&quot;</span>, <span class="comment">//请求后台方法获取数据</span></span><br><span class="line">		                    <span class="keyword">async</span>:<span class="literal">false</span>,</span><br><span class="line">		                    success:<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span></span><br><span class="line"><span class="function">		                    </span>&#123;   </span><br><span class="line">			                     <span class="keyword">var</span>  zTreeObj = $.fn.zTree.init($(<span class="string">&quot;#channels&quot;</span>), settingss, res); </span><br><span class="line">			                     <span class="comment">//默认不展开所有栏目</span></span><br><span class="line">			                     zTreeObj.expandAll(<span class="literal">false</span>);  </span><br><span class="line">		                     &#125;</span><br><span class="line">	                    &#125;);</span><br></pre></td></tr></table></figure>
<p>页面元素设置：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;channels&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ztree&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:150px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ztree调用初始化<br>模板如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;#macro channelTree list&gt;</span><br><span class="line">[</span><br><span class="line">&lt;#list list as channel&gt;</span><br><span class="line">		&#123;</span><br><span class="line">		&quot;id&quot;: $&#123;channel.id&#125;,</span><br><span class="line">		&quot;name&quot;: &quot;$&#123;channel.name&#125;&quot;,</span><br><span class="line">		&quot;open&quot;: &lt;#if channel.child?size gt 0&gt;true&lt;#else&gt;false&lt;/#if&gt;,</span><br><span class="line">		&lt;#if channel.child?size gt 0&gt;</span><br><span class="line">		&quot;children&quot;:</span><br><span class="line">				&lt;@channelTree list = channel.child /&gt;</span><br><span class="line">		&lt;#else&gt;</span><br><span class="line">		&quot;children&quot;:[]</span><br><span class="line">		&lt;/#if&gt;</span><br><span class="line">		&#125;&lt;#if channel_has_next&gt;,&lt;/#if&gt;</span><br><span class="line">	&lt;/#list&gt;</span><br><span class="line">	]</span><br><span class="line">&lt;/#macro&gt;</span><br><span class="line">&lt;@channelTree list = channelList /&gt;</span><br></pre></td></tr></table></figure>

<p>tree模板数据展现json格式:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">			&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;156&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;今日高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;217&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;161&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;新闻公告&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;162&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;部门动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;163&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;市长信箱&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;164&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;乡镇园区&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;165&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;办事大厅&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;166&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;政务公开&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;167&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;企业风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;168&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;最新院线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;169&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;学霸宝盒&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;170&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;热播追剧&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;222&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文明实践&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;258&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;259&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文明创建&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;260&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文化高邮&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;261&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;志愿服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;262&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;变废为宝&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;263&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;曝光台&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;264&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文旅在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;265&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;266&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;医疗服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;267&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;智慧残联&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;223&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;清风高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;229&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;230&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;一线传真&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;231&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;派驻监督&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;232&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;监督曝光&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;233&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;党纪法规&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;234&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;三务公开&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;235&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;236&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;医疗服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;237&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;三农在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;238&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;乡镇风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;224&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;智慧党建&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;239&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;240&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;组工动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;241&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;秦邮英才&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;242&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;党员培训&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;243&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;红色教育&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;244&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;最新院线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;245&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;246&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;企业风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;247&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;部门动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;248&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;乡镇风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;225&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;法治高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;279&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;280&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;法治动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;281&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;普法在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;282&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;以案释法&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;283&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;司法救助&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;284&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;三农在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;472&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;有事好商量&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;226&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文旅在线&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;249&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;250&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;A级景区&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;251&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;景区慧眼&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;252&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;清水潭&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;253&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;运河西堤&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;254&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;高邮美食&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;255&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;温馨住宿&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;256&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;珠湖小镇&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;257&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;好事成双伴手礼&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;227&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;慧眼高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		[]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;228&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;百姓生活&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;268&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;最新院线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;269&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;热播剧&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;270&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;学霸宝盒&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;271&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;物价公示&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;272&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;精品农园&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;273&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;医疗服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;274&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;275&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;公交出行&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">                []</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;276&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;高邮美食&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;277&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;孝乐神州&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;278&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;应急常识&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">                []</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Freemarker/Freemarker_20220701_001.png" alt="Freemarker宏模板实现ztree栏目树01"></p>
]]></content>
      <categories>
        <category>Ztree</category>
      </categories>
      <tags>
        <tag>Freemarker</tag>
        <tag>Ztree</tag>
      </tags>
  </entry>
  <entry>
    <title>C3p0连接池泄漏分析</title>
    <url>/MySQL/blogs/C3p0%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%B3%84%E6%BC%8F%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%88%86%E6%9E%90span"><span id="inline-blue">分析</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>线上环境接口突然访问异常，cpu和内存占用率都很低，但出现大量端口close_wait状态。</p>
<h1><span id="分析"><span id="inline-blue">分析</span></span></h1><p>通过jstack命令抓取了当时故障点的堆栈日志。借助IBM Thread and Monitor Dump Analyzer for Java工具查看当时接口请求状态详情。</p>
<p>工具下载地址：链接：<a href="https://pan.baidu.com/s/108SB4IywcpspqPrSAwmpEw">https://pan.baidu.com/s/108SB4IywcpspqPrSAwmpEw</a><br>提取码：3bnk</p>
<p><img src="/images/linux/LM_20220602_001.png" alt="堆栈工具使用"><br><img src="/images/linux/LM_20220602_002.png" alt="堆栈工具使用"><br><img src="/images/linux/LM_20220602_003.png" alt="堆栈工具使用"></p>
<p>堆栈日志显示调用链一直在等待dasource可用,检查c3p0配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://10.9.216.12:3306/nanjing_iepg_xw?createDatabaseIfNotExist=true&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeB</span><br><span class="line">ehavior=convertToNull&amp;transformedBitIsBoolean=true&amp;pinGlobalTxToPhysicalConnection=true&amp;autoReconnect=truejdbc.username=root</span><br><span class="line">jdbc.password=coship</span><br><span class="line"></span><br><span class="line">c3p0.acquireIncrement=1</span><br><span class="line">c3p0.initialPoolSize=5</span><br><span class="line">c3p0.idleConnectionTestPeriod=3600</span><br><span class="line">c3p0.minPoolSize=5</span><br><span class="line">c3p0.maxPoolSize=5</span><br><span class="line">c3p0.maxStatements=100</span><br><span class="line">c3p0.numHelperThreads=10</span><br><span class="line">c3p0.maxIdleTime=60</span><br><span class="line">c3p0.testConnectionOnCheckout=false</span><br><span class="line">c3p0.preferredTestQuery=SELECT 1 FROM DUAL </span><br><span class="line">c3p0.breakAfterAcquireFailure=false</span><br><span class="line">c3p0.acquireRetryAttempts=30</span><br><span class="line"><span class="meta">#</span><span class="bash">c3p0.checkoutTimeout=3000</span></span><br><span class="line"><span class="meta">#</span><span class="bash">c3p0.unreturnedConnectionTimeout=100</span></span><br><span class="line"><span class="meta">#</span><span class="bash">c3p0.debugUnreturnedConnectionStackTraces=<span class="literal">true</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nodeType: beijing=1;wuhan=2</span></span><br><span class="line">sync.sequenceGeneratorDao.nodeType=1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">schedule task timer int [0~23]</span> </span><br><span class="line">cacheRefreshHour=3</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>配置连接池最大连接20，最小为5,初始化大小5,正常来说应该没有问题。猜测可能程序调用存在连接泄漏<br>通过添加unreturnedConnectionTimeout、debugUnreturnedConnectionStackTraces参数追踪可能出现连接泄漏的程序调用点。应用程序重启后发现日志打印泄漏点。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[INFO][2022-05-30 20:16:42,011][resourcepool.BasicResourcePool][Logging the stack trace by which the overdue resource was checked-out.]</span><br><span class="line">java.lang.Exception: DEBUG STACK TRACE: Overdue resource check-out stack trace.</span><br><span class="line">	at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:588)</span><br><span class="line">	at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutAndMarkConnectionInUse(C3P0PooledConnectionPool.java:758)</span><br><span class="line">	at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:685)</span><br><span class="line">	at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:140)</span><br><span class="line">	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)</span><br><span class="line">	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:35)</span><br><span class="line">	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:106)</span><br><span class="line">	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:136)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:50)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:149)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:151)</span><br><span class="line">	at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:2082)</span><br><span class="line">	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2012)</span><br><span class="line">	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1990)</span><br><span class="line">	at org.hibernate.loader.Loader.doQuery(Loader.java:949)</span><br><span class="line">	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:351)</span><br><span class="line">	at org.hibernate.loader.Loader.doList(Loader.java:2787)</span><br><span class="line">	at org.hibernate.loader.Loader.doList(Loader.java:2770)</span><br><span class="line">	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2604)</span><br><span class="line">	at org.hibernate.loader.Loader.list(Loader.java:2599)</span><br><span class="line">	at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:109)</span><br><span class="line">	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1979)</span><br><span class="line">	at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:370)</span><br><span class="line">	at org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:392)</span><br><span class="line">	at com.coship.core.dal.base.DalScheduleJob.isDbOnline(DalScheduleJob.java:61)</span><br><span class="line">	at com.coship.core.dal.base.DalScheduleJob.executeInternal(DalScheduleJob.java:24)</span><br><span class="line">	at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:75)</span><br><span class="line">	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)</span><br><span class="line">	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)</span><br><span class="line">[INFO][2022-05-30 20:18:00,010][base.DalScheduleJob][开始刷新缓存数据]</span><br></pre></td></tr></table></figure>

<p>发现泄漏点存在于DalScheduleJob.isDbOnline()方法内部，查看对应代码记录，发现确实是因为hibernate的session使用之后未关闭导致，在调小数据库连接池大小和接口请求一段时间之后很快复现异常情况。修改代码解决连接溢出。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDbOnline</span><span class="params">()</span></span>&#123;</span><br><span class="line">		</span><br><span class="line">		Session session = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			session = sessionFactory.openSession();</span><br><span class="line">			Criteria criteria = session.createCriteria(Asset.class);</span><br><span class="line">			criteria.add(Restrictions.eq(<span class="string">&quot;resourceCode&quot;</span>, <span class="keyword">new</span> Long(<span class="number">10008</span>)));</span><br><span class="line">			criteria.uniqueResult();</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			logger.error(<span class="string">&quot;刷新缓存前检测数据库连接出错&quot;</span>, e);</span><br><span class="line">		&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">			<span class="comment">//故障点，未关闭连接</span></span><br><span class="line">			<span class="keyword">if</span>(session != <span class="keyword">null</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				session.close();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>后续应用接口请求正常，没有再出现相应情况。</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>C3p0</tag>
        <tag>MySQL</tag>
        <tag>Hibernate</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL数据丢失原因</title>
    <url>/MySQL/blogs/MySQL%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E5%8E%9F%E5%9B%A0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>线上数据使用mysqldump命令导出的脚本，导入本地MySQL数据库，发现重命名后的数据库名称居然将原始数据库删除，导出命令如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>p <span class="comment">--single-transaction  --add-drop-database --databases iepg  &gt; iepg.sql</span></span><br></pre></td></tr></table></figure>
<p>导出后的脚本文件内容如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*!40101 SET NAMES utf8 */</span>;</span><br><span class="line"><span class="comment">/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */</span>;</span><br><span class="line"><span class="comment">/*!40103 SET TIME_ZONE=&#x27;+00:00&#x27; */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE=&#x27;NO_AUTO_VALUE_ON_ZERO&#x27; */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Position to start replication or point-in-time recovery from</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- CHANGE MASTER TO MASTER_LOG_FILE=&#x27;mysql-bin.000114&#x27;, MASTER_LOG_POS=146667627;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Current Database: `iepg`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40000 DROP DATABASE IF EXISTS `iepg`*/</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE <span class="comment">/*!32312 IF NOT EXISTS*/</span> `iepg_xw` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8 */</span>;</span><br><span class="line"></span><br><span class="line">USE `iepg_xw`;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Table structure for table `apkupdatedatetimerange`</span></span><br><span class="line"><span class="comment">--</span></span><br></pre></td></tr></table></figure>
<p>将/*!40101 SET NAMES utf8 */放到MySQL控制到执行，发现居然执行成功了。<br><img src="/images/Linux//Linux_MySQL_20220527_001.png" alt="MySQL数据丢失"></p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>/*! MySQL-specific code */ 这种注释是mysql注释中的特殊一种,通过使用叹号在注释中,注释中的代码就会被执行.</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Visio反向生成数据库模型图</title>
    <url>/MySQL/blogs/visio%E5%8F%8D%E5%90%91%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%9E%8B%E5%9B%BE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85mysql-odbc%E9%A9%B1%E5%8A%A8span"><span id="inline-blue">安装MySQL ODBC驱动</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90span"><span id="inline-blue">配置数据源</span></a></li>
<li><a href="#span-idinline-bluevisio%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%9E%8B%E5%9B%BEspan"><span id="inline-blue">Visio生成数据库模型图</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="安装mysql-odbc驱动"><span id="inline-blue">安装MySQL ODBC驱动</span></span></h1><p>官网地址: <a href="https://dev.mysql.com/downloads/connector/odbc/5.1.html">https://dev.mysql.com/downloads/connector/odbc/5.1.html</a><br>选择对应操作系统版本,类型安装包下载(msi格式)，下载完按照提示安装。</p>
<h1><span id="配置数据源"><span id="inline-blue">配置数据源</span></span></h1><p>打开 开始菜单-&gt;控制面板-》管理工具-》数据源配置<br>配置详情如下图<br><img src="/images/Windows/MySQL/WM_20220620_001.png" alt="MySQL系统数据源配置01"></p>
<p>数据库连接信息，信息填完之后测试一下连接是否可用，检查参数是否正常。<br><img src="/images/Windows/MySQL/WM_20220620_002.png" alt="MySQL系统数据源配置02"></p>
<h1><span id="visio生成数据库模型图"><span id="inline-blue">Visio生成数据库模型图</span></span></h1><p>创建对应类型visio文件,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_003.png" alt="MySQL系统数据源配置03"></p>
<p>新增数据源,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_004.png" alt="MySQL系统数据源配置04"></p>
<p>选择数据源连接驱动类型,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_005.png" alt="MySQL系统数据源配置05"></p>
<p>数据库连接详情配置,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_006.png" alt="MySQL系统数据源配置06"></p>
<p>校验用户名和密码,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_007.png" alt="MySQL系统数据源配置07"></p>
<p>选择数据库反向导出设置,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_008.png" alt="MySQL系统数据源配置08"></p>
<p>选择需要生成关系的数据库表项,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_009.png" alt="MySQL系统数据源配置09"></p>
<p>导出表项在当前文件生成数据对象,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_010.png" alt="MySQL系统数据源配置10"></p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Windows/MySQL/WM_20220620_011.png" alt="MySQL系统数据源配置11"></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Windows</tag>
        <tag>Visio</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL注册为Windows服务</title>
    <url>/MySQL/blogs/MySQL%E6%B3%A8%E5%86%8C%E4%B8%BAwindows%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fspan"><span id="inline-blue">配置环境变量</span></a></li>
<li><a href="#span-idinline-blue%E6%B3%A8%E5%86%8C%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">注册服务</span></a></li>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81span"><span id="inline-blue">修改密码</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="配置环境变量"><span id="inline-blue">配置环境变量</span></span></h1><p>新建系统变量名：MySQL_HOME:<br>路径：D:\MySQL5.6\mysql-5.6.41-winx64\mysql-5.6.41-winx64<br><img src="/images/Windows/MySQL/WM_20220523_001.png" alt="MySQL注册服务"></p>
<h1><span id="注册服务"><span id="inline-blue">注册服务</span></span></h1><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">#<span class="built_in">cd</span>命令进入MySQL bin目录，执行以下命令</span><br><span class="line">#MySQL为注册的服务名称</span><br><span class="line">#--defaults-file参数指定对应启动配置文件</span><br><span class="line">#注意生成的默认密码</span><br><span class="line">mysqld install MySQL --defaults-file=&quot;D:\MySQL5.<span class="number">6</span>\mysql-<span class="number">5</span>.<span class="number">6</span>.<span class="number">41</span>-winx64\mysql-<span class="number">5</span>.<span class="number">6</span>.<span class="number">41</span>-winx64\my-default.ini&quot;</span><br></pre></td></tr></table></figure>

<h1><span id="修改密码"><span id="inline-blue">修改密码</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#方式一</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> password <span class="keyword">for</span> 用户名<span class="variable">@localhost</span> <span class="operator">=</span> password(<span class="string">&#x27;新密码&#x27;</span>);</span><br><span class="line">#方式二</span><br><span class="line">mysql<span class="operator">&gt;</span> mysqladmin <span class="operator">-</span>u用户名 <span class="operator">-</span>p旧密码 password 新密码;</span><br><span class="line">#方式三</span><br><span class="line">mysql<span class="operator">&gt;</span> use mysql;</span><br><span class="line">mysql<span class="operator">&gt;</span> update <span class="keyword">user</span> <span class="keyword">set</span> password<span class="operator">=</span>password(<span class="string">&#x27;123456&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> host<span class="operator">=</span><span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> flush privileges;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>ElasticSearch开机自启动</title>
    <url>/ElasticSearch/blogs/elasticsearch%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAelasticsearch%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6span"><span id="inline-blue">创建elasticsearch启动配置文件</span></a></li>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90span"><span id="inline-blue">修改文件权限</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4%E8%87%AA%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">添加和删除自启动服务</span></a></li>
<li><a href="#span-idinline-blue%E5%BC%80%E5%90%AF%E5%92%8C%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">开启和关闭服务</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8span"><span id="inline-blue">设置服务开启自启动</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="创建elasticsearch启动配置文件"><span id="inline-blue">创建elasticsearch启动配置文件</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 系统自启动服务目录</span></span><br><span class="line">cd /etc/init.d </span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建服务文件</span></span><br><span class="line">vim elasticsearch</span><br></pre></td></tr></table></figure>
<p>脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">chkconfig: 345 63 37</span></span><br><span class="line"><span class="meta">#</span><span class="bash">description: elasticsearch</span></span><br><span class="line"><span class="meta">#</span><span class="bash">processname: elasticsearch-2.4.4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> elasticsearch目录</span></span><br><span class="line">export ES_HOME=/usr/local/elasticsearch-2.4.4</span><br><span class="line"><span class="meta">#</span><span class="bash">java目录</span></span><br><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_171</span><br><span class="line"><span class="meta">#</span><span class="bash">需要创建对应es用户</span></span><br><span class="line">case $1 in</span><br><span class="line">start)</span><br><span class="line">    su es&lt;&lt;!</span><br><span class="line">    cd $ES_HOME</span><br><span class="line">    ./bin/elasticsearch -d -p pid</span><br><span class="line">    exit</span><br><span class="line">!</span><br><span class="line">    echo &quot;elasticsearch is started&quot;</span><br><span class="line">    ;;</span><br><span class="line">stop)</span><br><span class="line">    pid=`cat $ES_HOME/pid`</span><br><span class="line">    kill -9 $pid</span><br><span class="line">    echo &quot;elasticsearch is stopped&quot;</span><br><span class="line">    ;;</span><br><span class="line">restart)</span><br><span class="line">    pid=`cat $ES_HOME/pid`</span><br><span class="line">    kill -9 $pid</span><br><span class="line">    echo &quot;elasticsearch is stopped&quot;</span><br><span class="line">    sleep 1</span><br><span class="line">    su es&lt;&lt;!</span><br><span class="line">    cd $ES_HOME</span><br><span class="line">    ./bin/elasticsearch -d -p pid</span><br><span class="line">    exit</span><br><span class="line">!</span><br><span class="line">    echo &quot;elasticsearch is started&quot;</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    echo &quot;start|stop|restart&quot;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line">exit 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="修改文件权限"><span id="inline-blue">修改文件权限</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod 777 elasticsearch</span><br></pre></td></tr></table></figure>

<h1><span id="添加和删除自启动服务"><span id="inline-blue">添加和删除自启动服务</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">添加服务</span></span><br><span class="line">chkconfig --add elasticsearch</span><br><span class="line"><span class="meta">#</span><span class="bash">删除服务</span></span><br><span class="line">chkconfig --del elasticsearch</span><br></pre></td></tr></table></figure>
<h1><span id="开启和关闭服务"><span id="inline-blue">开启和关闭服务</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动</span></span><br><span class="line">service elasticsearch start</span><br><span class="line"><span class="meta">#</span><span class="bash">关闭</span></span><br><span class="line">service elasticsearch stop</span><br><span class="line"><span class="meta">#</span><span class="bash">查看状态</span></span><br><span class="line">service elasticsearch status</span><br></pre></td></tr></table></figure>
<h1><span id="设置服务开启自启动"><span id="inline-blue">设置服务开启自启动</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">开启</span></span><br><span class="line">chkconfig elasticsearch  on</span><br><span class="line"><span class="meta">#</span><span class="bash">关闭</span></span><br><span class="line">chkconfig elasticsearch  off</span><br><span class="line"><span class="meta">#</span><span class="bash">查看自启动服务状态</span></span><br><span class="line">chkconfig  --list</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
        <tag>NoSQL</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo大文件推送github失败</title>
    <url>/hexo/blogs/hexo%E5%A4%A7%E6%96%87%E4%BB%B6%E6%8E%A8%E9%80%81github%E5%A4%B1%E8%B4%A5/</url>
    <content><![CDATA[<h2><span id="问题现象"><span id="inline-blue">问题现象</span></span></h2><p>hexo站点根目录目录下执行hexo d命令报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">remote: Resolving deltas: 100% (405/405), done.</span><br><span class="line">    remote: error: GH001: Large files detected. You may want to try Git Large File Storage - https://vanishke.github.com.</span><br><span class="line">    remote: error: Trace: 09c8c1ad5d3478b3692c72197ee5a8c6e76e583e0b76a35add8ac329b445be02</span><br><span class="line">    remote: error: See http://git.io/iEPt8g for more information.</span><br><span class="line">    remote: error: File images/mysql/test.sql is 108.72 MB; this exceeds GitHub’s file size limit of 100.00 MB</span><br></pre></td></tr></table></figure>

<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>删除对应位置上的文件，发现部署之后仍然报错，该问题需要清空hexo根目录下.deploy_git文件夹，重新部署成功</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/hexo/github/hexo_github_2022_05_19_001.png" alt="分享"></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>空字符&#39;&#39;和0比较问题</title>
    <url>/JavaScript/blogs/%E7%A9%BA%E5%AD%97%E7%AC%A6&#39;&#39;%E4%B8%8E0%E7%9A%84%E6%AF%94%E8%BE%83%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2><span id="实例"><span id="inline-blue">实例</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var a&#x3D;&#39;0&#39;,b&#x3D;&#39;&#39;;</span><br><span class="line">console.log(a,b.a&#x3D;&#x3D;b);</span><br><span class="line">var c&#x3D;0,d&#x3D;&#39;&#39;;</span><br><span class="line">console.log(c,d,c&#x3D;&#x3D;d);</span><br></pre></td></tr></table></figure>
<p>输出结果<br><img src="/images/js/js_2021_02_01_001.png" alt="比较结果"></p>
<h2><span id="问题分析"><span id="inline-blue">问题分析</span></span></h2><ul>
<li>当a,b都是string类型时，比较a,b字符序列、长度是否一致，显然’0’ != ‘’</li>
<li>当a,b有一个是number类型时，先将另外一个转换为number，空字符串转换为number = 0，故 0=0成立</li>
</ul>
<h2><span id="解决方案"><span id="inline-blue">解决方案</span></span></h2><p>采用隐式转换，将数字转换成字符再进行比较。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var a&#x3D;&#39;0&#39;,b&#x3D;&#39;&#39;;</span><br><span class="line">console.log(a,b,&#39;&#39;+a&#x3D;&#x3D;b+&#39;&#39;);</span><br><span class="line">var c&#x3D;0,d&#x3D;&#39;&#39;;</span><br><span class="line">console.log(c,d,c+&#39;&#39;&#x3D;&#x3D;d+&#39;&#39;);</span><br></pre></td></tr></table></figure>
<p>输出结果<br><img src="/images/js/js_2021_02_01_002.png" alt="比较结果"></p>
<h2><span id="实践"><span id="inline-blue">实践</span></span></h2><p>下拉框状态回显</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;select id=<span class="string">&quot;serverStatus&quot;</span> name=<span class="string">&quot;serverStatus&quot;</span> value=<span class="string">&quot;$&#123;serverStatus&#125;&quot;</span>  &gt;</span><br><span class="line">	&lt;option value=&quot;&quot; &gt;全部&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;0&quot; &lt;s:if test=&quot;%&#123;serverStatus+&#x27; &#x27; == 0+&#x27; &#x27;&#125;&quot;&gt;selected&lt;/s:if&gt; &gt;不可服务&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;1&quot; &lt;s:if test=&quot;%&#123;serverStatus == 1&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;可服务&lt;/option&gt;   </span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>微信公众号爬虫工具</title>
    <url>/%E5%B7%A5%E5%85%B7/blogs/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E7%88%AC%E8%99%AB%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<h1><span id="功能说明"><span id="inline-blue">功能说明</span></span></h1><p>批量下载微信公众号里面的历史文章</p>
<h1><span id="下载地址"><span id="inline-blue">下载地址</span></span></h1><p><a href="https://pan.baidu.com/s/1AfG-ell55NVScfTJhUam3g">https://pan.baidu.com/s/1AfG-ell55NVScfTJhUam3g</a> 提取码：hq6v</p>
<h1><span id="使用教程"><span id="inline-blue">使用教程</span></span></h1><ul>
<li>解压工具压缩包，运行工具<br><img src="/images/tools/tools_2021_03_24_001.png" alt="工具目录"></li>
<li>设置文件保存方式，可选下载文章的时间范围<br><img src="/images/tools/tools_2021_03_24_002.png" alt="下载设置"></li>
<li>微信电脑端访问公众号，等待文章下载完成。<br><img src="/images/tools/tools_2021_03_24_003.png" alt="下载详情"></li>
</ul>
<p><img src="/images/tools/tools_2021_03_24_004.png" alt="文件下载预览"></p>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue项目实战</title>
    <url>/vue/blogs/Vue%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[<h1><span id="vue项目实战movieserver"><span id="inline-blue">Vue项目实战movieServer</span></span></h1><h2><span id="项目环境"><span id="inline-blue">项目环境</span></span></h2><p>vue 2.9.6<br>node 12.18.3<br>npm 6.14.6<br>MongoDB 4.0.10</p>
<h2><span id></span></h2><h2><span id="说明"><span id="inline-blue">说明</span></span></h2><p>book_service 后台接口</p>
<p>book_view 前端页面</p>
<p>项目地址：<a href="https://github.com/vanishke/movieServer.git">https://github.com/vanishke/movieServer.git</a></p>
<h2><span id="后端启动"><span id="inline-blue">后端启动</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd book_service </span><br><span class="line">set DEBUG=book_service &amp; npm start</span><br></pre></td></tr></table></figure>
<h2><span id="mongodb安装包下载"><span id="inline-blue">mongoDB安装包下载</span></span></h2><p>下载地址：<a href="https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg">https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg</a><br>提取码：zs5e<br>安装包说明：<br>mongodb-win32-x86_64-2008plus-ssl-4.0.10-signed.msi MongoDB安装包<br>mongodb-compass-1.19.12-win32-x64.msi MongoDB可视化工具</p>
<h2><span id="接口测试工具"><span id="inline-blue">接口测试工具</span></span></h2><p>下载地址：<a href="https://pan.baidu.com/s/1JmO94M6iCLpeNDIjtxxi-Q">https://pan.baidu.com/s/1JmO94M6iCLpeNDIjtxxi-Q</a> 提取码：zi8w<br>Insomnia.Core-2021.1.0.exe ：目前使用的最新版本<br>xdowns.com_Insomnia_Setup_4.2.5.exe： 历史版本<br>Insomnia_2021-03-11.json: 接口测试数据样例</p>
<h3><span id="导入接口样例"><span id="inline-blue">导入接口样例</span></span></h3><p><img src="/images/vue/vue_20210311_001.gif" alt="导入"></p>
<h2><span id="前端启动"><span id="inline-blue">前端启动</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd book_view</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h2><span id="访问"><span id="inline-blue">访问</span></span></h2><p><a href="http://localhost:8000/#/">http://localhost:8000/#/</a><br><img src="/images/vue/vue_20210311_002.png" alt="首页"></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vercel托管hexo博客</title>
    <url>/hexo/Next/blogs/vercel%E6%89%98%E7%AE%A1hexo%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h2><span id="背景"><span id="inline-blue">背景<span></span></span></span></h2><p>hexo发布的静态文件推送到了github pages，直接访问页面非常慢，使用vercel代理github pages，访问页面加载速度有明显提升。</p>
<h2><span id="注册vercel"><span id="inline-blue">注册vercel<span></span></span></span></h2><p><a href="https://vercel.com/">vercel官网地址</a></p>
<p>绑定github账号：<br><img src="/images/hexo/vercel/hexo_vercel_20210115_001.png" alt="账号绑定"><br>注意github用户验证的邮箱账号，qq邮箱验证无法通过，网易邮箱亲测可行。</p>
<h2><span id="导入仓库"><span id="inline-blue">导入仓库<span></span></span></span></h2><p><img src="/images/hexo/vercel/hexo_vercel_20210115_002.png" alt="导入仓库"><br>这里导入的是hexo通过hexo d 部署同步到github pages上的public文件夹下的静态文件。<br>找到github pages上hexo博客，切换到setting选项，找到github pages 选项。<br><img src="/images/hexo/vercel/hexo_vercel_20210115_003.png" alt="博客代理设置"><br><img src="/images/hexo/vercel/hexo_vercel_20210115_004.png" alt="博客代理设置"></p>
<h2><span id="验证"><span id="inline-blue">验证<span></span></span></span></h2><p><img src="/images/hexo/vercel/hexo_vercel_20210115_005.png" alt="验证"><br><img src="/images/hexo/vercel/hexo_vercel_20210115_006.png" alt="验证"></p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>Next</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL导入报错解决</title>
    <url>/MySQL/blogs/MySQL%E5%AF%BC%E5%85%A5%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p><img src="/images/mysql/mysql_20211022_001.png" alt="导入报错"></p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>脚本内容如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">01</span>_create_table_squence.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">02</span>_create_table_operate.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">03</span>_create_table_sysinit.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">04</span>_init_data.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">05</span>_urm_data.sql;</span><br></pre></td></tr></table></figure>
<p>source 命令将分号作为文件名称解析导致导入报错，调整后导入正常</p>
<p>source命令记录<br>导入脚本所在路径与执行脚本位置在同一路径(绝对路径和相对路径均可，引用正确即可)<br>source命令后不可有分号，否则导入失败</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>mongoDB安装</title>
    <url>/mongoDB/blogs/mongoDB%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h2><span id="安装环境"><span id="inline-blue">安装环境</span></span></h2><p>windows7 64位<br>MongoDB 4.0.10</p>
<h2><span id="安装包下载"><span id="inline-blue">安装包下载</span></span></h2><p>下载地址：<a href="https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg">https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg</a><br>提取码：zs5e</p>
<p>安装包说明：<br>mongodb-win32-x86_64-2008plus-ssl-4.0.10-signed.msi MongoDB安装包<br>mongodb-compass-1.19.12-win32-x64.msi MongoDB可视化工具</p>
<h2><span id="路径配置"><span id="inline-blue">路径配置</span></span></h2><p>选择”custom”自定义模式下安装，指定安装路径<br><img src="/images/mongoDB/mongoDB_2021_02_20_001.png" alt="安装路径"></p>
<p>取消可视化工具安装，后面单独安装<br><img src="/images/mongoDB/mongoDB_2021_02_20_002.png" alt="安装路径"></p>
<h2><span id="安装mongodb可视化工具"><span id="inline-blue">安装mongoDB可视化工具</span></span></h2><p><img src="/images/mongoDB/mongoDB_2021_02_20_003.png" alt="可视化工具安装配置"><br>设置安装路径，安装完成。</p>
<h2><span id="mongodb配置"><span id="inline-blue">mongoDB配置</span></span></h2><p>mongoDB安装路径下手动创建data、log目录<br><img src="/images/mongoDB/mongoDB_2021_02_20_004.png" alt="目录设置"><br>更改默认IP设置，解决远程连接问题<br>路径：D:\mongoDB\bin\mongod.cfg<br><img src="/images/mongoDB/mongoDB_2021_02_20_005.png" alt="安装路径"></p>
<h2><span id="设置mongodb环境配置"><span id="inline-blue">设置mongoDB环境配置</span></span></h2><p>MONGODB_HOME：D:\mongoDB<br><img src="/images/mongoDB/mongoDB_2021_02_20_006.png" alt="环境变量MONGODB_HOME设置"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Path: %JAVA_HOME%\bin;%JRE_HOME%\jre\bin;C:\Program Files (x86)\Common Files\NetSarang;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;E:\st-android\android-sdk\platform-tools;%ANT_HOME%\bin;%MAVEN_HOME%/bin;%MySQL_HOME%/bin;D:\sqlite-tools;D:\redis_3.2.100\Redis-x64-3.2.100;D:\ffmpeg\bin;D:\nodeJs\;H:\Git\bin;%MONGODB_HOME%\bin;</span><br></pre></td></tr></table></figure>
<p><img src="/images/mongoDB/mongoDB_2021_02_20_007.png" alt="环境变量PATH设置"></p>
<h2><span id="注册mongodb服务"><span id="inline-blue">注册mongoDB服务</span></span></h2><p>安装过程中将mongoDB注册为windows服务失败，手动注册<br>修改mongoDB配置文件，将以下内容注释掉。<br><img src="/images/mongoDB/mongoDB_2021_02_20_008.png" alt="mongoDB服务注册"></p>
<p>管理员模式下执行cmd命令模式，执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mongod --install -f &quot;D:\mongoDB\bin\mongod.cfg&quot;</span><br></pre></td></tr></table></figure>
<p><img src="/images/mongoDB/mongoDB_2021_02_20_009.png" alt="mongoDB服务注册"><br>mongoDB 配置文件位置自行修改。</p>
<h2><span id="连接异常处理"><span id="inline-blue">连接异常处理</span></span></h2><p>mongoDB服务确认启动的情况下，cmd命令下连接异常，提示以下信息<br><img src="/images/mongoDB/mongoDB_2021_02_20_010.png" alt="mongoDB连接异常"></p>
<p>修改配置文件监听IP地址，本地环回地址127.0.0.1改为0.0.0.0(监听所有IP请求)<br>修改前：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># network interfaces</span><br><span class="line">net:</span><br><span class="line">  port: 27017 </span><br><span class="line">  bindIp: 127.0.0.1</span><br></pre></td></tr></table></figure>
<p>修改后</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># network interfaces</span><br><span class="line">net:</span><br><span class="line">  port: 27017 </span><br><span class="line">  bindIp: 0.0.0.0</span><br></pre></td></tr></table></figure>

<h2><span id="服务验证"><span id="inline-blue">服务验证</span></span></h2><p><img src="/images/mongoDB/mongoDB_2021_02_20_011.png" alt="mongoDB服务验证"></p>
<h2><span id="mongodb-compass验证"><span id="inline-blue">mongoDB compass验证</span></span></h2><p>compass安装目录下，双击MongoDBCompass.exe运行<br>连接信息配置如下：<br><img src="/images/mongoDB/mongoDB_2021_02_20_012.png" alt="compass连接配置"></p>
<p>连接成功：<br><img src="/images/mongoDB/mongoDB_2021_02_20_013.png" alt="compass测试"></p>
]]></content>
      <categories>
        <category>mongoDB</category>
      </categories>
      <tags>
        <tag>mongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>markdown流程图</title>
    <url>/markdown/blogs/markdown%E6%B5%81%E7%A8%8B%E5%9B%BE/</url>
    <content><![CDATA[<h1><span id="语法"><span id="inline-blue">语法</span></span></h1><ol>
<li>定义元素<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">元素ID-&gt;元素类型: 描述</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>元素类型<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#冒号后跟空格</span><br><span class="line">startID&#x3D;&gt;start: 开始</span><br><span class="line">inputoutputID&#x3D;&gt;inputoutput: 输入输出描述</span><br><span class="line">conditionID&#x3D;&gt;condition: 条件描述</span><br><span class="line">subroutineID&#x3D;&gt;subroutine: 子流程描述</span><br><span class="line">endID&#x3D;&gt;end: 结束</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>条件判断<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">condition(yes)-&gt;inputoutput</span><br><span class="line">#条件判断控制方向,left、right、bottom、top</span><br><span class="line">condition(yes,left)-&gt;inputoutputID</span><br><span class="line">condition(no,top)-&gt;subroutineID</span><br></pre></td></tr></table></figure></li>
<li>元素连接<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#方式1</span><br><span class="line">startID-&gt;inputoutputID-&gt;conditionID-&gt;subroutineID-&gt;endID</span><br><span class="line"></span><br><span class="line">#方式2</span><br><span class="line">startID-&gt;inputoutputID</span><br><span class="line">inputoutputID-&gt;conditionID</span><br><span class="line">conditionID-&gt;subroutineID</span><br><span class="line">subroutineID-&gt;endID</span><br><span class="line">以上两种连接方式均可</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1><span id="示例"><span id="inline-blue">示例</span></span></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">startID&#x3D;&gt;start: 开始</span><br><span class="line">inputoutputID1&#x3D;&gt;inputoutput: 输入X</span><br><span class="line">conditionID&#x3D;&gt;condition: x&gt;0</span><br><span class="line">inputoutputID2&#x3D;&gt;inputoutput: x是一个正数</span><br><span class="line">inputoutputID3&#x3D;&gt;inputoutput: x是一个负数</span><br><span class="line">endID&#x3D;&gt;end: 结束</span><br><span class="line"></span><br><span class="line">startID-&gt;inputoutputID1</span><br><span class="line">inputoutputID1-&gt;conditionID</span><br><span class="line">conditionID(yes,left)-&gt;inputoutputID2</span><br><span class="line">conditionID(no,right)-&gt;inputoutputID3</span><br><span class="line">inputoutputID2-&gt;endID</span><br><span class="line">inputoutputID3-&gt;endID</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux查看cpu配置信息</title>
    <url>/Linux/blogs/linux%E6%9F%A5%E7%9C%8Bcpu%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<h2><span id="cpu信息"><span id="inline-blue">cpu信息</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#查看cpu信息(配置)</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo | grep name | cut -f2 -d: | uniq -c</span><br><span class="line">      8  Intel(R) Xeon(R) CPU E5-2609 0 @ 2.40GHz</span><br><span class="line">	  </span><br><span class="line">#查看物理cpu个数</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line"># 查看每个物理CPU中core的个数(即核数)</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo| grep &quot;cpu cores&quot;| uniq</span><br><span class="line">cpu cores	: 4</span><br><span class="line"></span><br><span class="line"># 查看逻辑CPU的个数</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo| grep &quot;processor&quot;| wc -l</span><br><span class="line">8</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ项目文件同步</title>
    <url>/IntelliJ/blogs/intelliJ%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5/</url>
    <content><![CDATA[<h2><span id="文件同步"><span id="inline-blue">文件同步</span></span></h2><p>选中项目需要同步的文件，File工具栏选择synchronize同步操作<br><img src="/images/intelliJ/intelliJ_2021_02_18_001.png" alt="同步"></p>
]]></content>
      <categories>
        <category>IntelliJ</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ推送git失败</title>
    <url>/IntelliJ/blogs/Intellij%E6%8E%A8%E9%80%81git%E5%A4%B1%E8%B4%A5/</url>
    <content><![CDATA[<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>Push failed<br>            Fatal: HttpRequestException encountered.<br>            unable to access ‘<a href="https://github.com/vanishke/DataStructure-Algorithm.git/&#39;">https://github.com/vanishke/DataStructure-Algorithm.git/&#39;</a>: Unknown SSL protocol error in connection to github.com:443</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><ol>
<li><p>访问<a href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com/</a> 查找到github公网IP地址<br><img src="/images/intelliJ/intelliJ_2021_04_29_001.png" alt="查找结果"></p>
</li>
<li><p>将github网站IP地址映射添加到C:\Windows\System32\drivers\etc目录下的hosts文件中，文件末尾添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">140.82.114.4 github.com</span><br></pre></td></tr></table></figure></li>
<li><p>刷新本地DNS缓存<br>cmd命令模式下执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ipconfig /flushdns</span><br></pre></td></tr></table></figure>






</li>
</ol>
]]></content>
      <categories>
        <category>IntelliJ</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ插件lombok离线安装</title>
    <url>/IntelliJ/blogs/Intelij%E6%8F%92%E4%BB%B6lombok%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h1><span id="官网下载地址"><span id="inline-blue">官网下载地址</span></span></h1><p><a href="http://plugins.jetbrains.com/plugin/6317-lombok-plugin">http://plugins.jetbrains.com/plugin/6317-lombok-plugin</a><br><img src="/images/intelliJ/inteliJ_2021_03_25_001.png" alt="下载地址"><br><img src="/images/intelliJ/inteliJ_2021_03_25_002.png" alt="版本选择"><br>自行根据Intelij版本下载对应的安装包，intelij版本和lombok保持一致即可。</p>
<p>提供Intelij2018.2.1版本对应的离线安装包<br><a href="https://pan.baidu.com/s/1kBg_t-75859dIOnRLYe_jg">https://pan.baidu.com/s/1kBg_t-75859dIOnRLYe_jg</a> 提取码：0hn4</p>
<h1><span id="离线安装"><span id="inline-blue">离线安装</span></span></h1><p><img src="/images/intelliJ/inteliJ_2021_03_25_003.png" alt="lombok离线安装"><br>加载对应版本的zip格式的安装包，重启intelij生效</p>
]]></content>
      <categories>
        <category>IntelliJ</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo集成gitalk</title>
    <url>/hexo/Next/blogs/hexo%E9%9B%86%E6%88%90gitalk/</url>
    <content><![CDATA[<h2><span id="注册应用"><span id="inline-blue">注册应用<span></span></span></span></h2><p>注册地址：<a href="https://github.com/settings/applications/new">https://github.com/settings/applications/new</a><br><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_001.png" alt="应用注册"></p>
<p>参数说明：<br>Application name //应用名称，随便填<br>Homepage URL //可以填自己的博客地址<br>Application description //应用描述<br>Authorization callback URL //填自己要使用Gitalk的博客地址</p>
<p>应用注册成功后会生成Client ID和Client Secret，记下这两个参数值，后面配置文件会用到。</p>
<h2><span id="创建仓库"><span id="inline-blue">创建仓库<span></span></span></span></h2><p>github创建一个仓库用于保存评论<br><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_002.png" alt="评论仓库设置"></p>
<h2><span id="集成gitalk"><span id="inline-blue"> 集成gitalk<span></span></span></span></h2><ol>
<li>新建gitalk.swig</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 文件目录：themes\next\layout_third-party\comments</span><br><span class="line"># 内容如下：</span><br><span class="line">&#123;% if page.comments &amp;&amp; theme.gitalk.enable %&#125;</span><br><span class="line"></span><br><span class="line">  &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;gitalk&#x2F;dist&#x2F;gitalk.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;gitalk&#x2F;dist&#x2F;gitalk.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">   &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">        var gitalk &#x3D; new Gitalk(&#123;</span><br><span class="line">          clientID: &#39;&#123;&#123; theme.gitalk.ClientID &#125;&#125;&#39;,</span><br><span class="line">          clientSecret: &#39;&#123;&#123; theme.gitalk.ClientSecret &#125;&#125;&#39;,</span><br><span class="line">          repo: &#39;&#123;&#123; theme.gitalk.repo &#125;&#125;&#39;,</span><br><span class="line">          owner: &#39;&#123;&#123; theme.gitalk.owner &#125;&#125;&#39;,</span><br><span class="line">          admin: &#123;&#123; theme.gitalk.adminUser &#125;&#125;,</span><br><span class="line">          id: &#123;&#123; theme.gitalk.ID &#125;&#125;,</span><br><span class="line">          labels: &#123;&#123; theme.gitalk.labels &#125;&#125;,</span><br><span class="line">          perPage: &#123;&#123; theme.gitalk.perPage &#125;&#125;,</span><br><span class="line">          pagerDirection: &#39;&#123;&#123; theme.gitalk.pagerDirection &#125;&#125;&#39;,</span><br><span class="line">          createIssueManually: &#123;&#123; theme.gitalk.createIssueManually &#125;&#125;,</span><br><span class="line">          distractionFreeMode: &#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        gitalk.render(&#39;gitalk-container&#39;)           </span><br><span class="line">       &lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在gitalk.swig的同级目录下找到index.swig，在文件末尾添加<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include &#39;gitalk.swig&#39; %&#125;</span><br></pre></td></tr></table></figure></li>
<li>打开\hexo\themes\next\layout\_partials\comments.swig,添加以下内容，图中所示位置<br><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_003.png" alt="gitalk评论设置"></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class="line">&lt;div id&#x3D;&quot;gitalk-container&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改hexo根目录_config.xml配置文件<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># 以下内容配置时注释需要去掉，否则会引起报错</span><br><span class="line">gitalk:</span><br><span class="line">enable: true #是否开启Gitalk</span><br><span class="line">  ClientID: xxxxxx #创建应用生成的Client ID </span><br><span class="line">  ClientSecret: xxxxxxxxxxxx #创建应用生成的Client Secret</span><br><span class="line">  repo: gitalk #创建的评论仓库</span><br><span class="line">  owner: iosite #这个项目名的拥有者（GitHub账号或组织）</span><br><span class="line">  adminUser: &quot;[&#x27;iosite&#x27;]&quot; #管理员用户</span><br><span class="line">  ID: location.pathname #页面ID，不知道默认就行</span><br><span class="line">  labels: &quot;[&#x27;Gitalk&#x27;]&quot; #GitHub issues的标签</span><br><span class="line">  perPage: 15 #每页多少个评论</span><br><span class="line">  pagerDirection: last #排序方式是从旧到新（first）还是从新到旧（last）</span><br><span class="line">  createIssueManually: true #如果当前页面没有相应的 isssue ，且登录的用户属于 admin，则会自动创建 issue。如果设置为 true，则显示一个初始化页面，创建 issue 需要点击 init 按钮。</span><br><span class="line">  distractionFreeMode: false #是否启用快捷键(cmd|ctrl + enter) 提交评论.</span><br></pre></td></tr></table></figure>
<h2><span id="验证"><span id="inline-blue">验证<span></span></span></span></h2><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_004.png" alt="gitalk评论验证"></li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
        <category>Next</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Next</tag>
        <tag>gitalk</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo阅读全文配置</title>
    <url>/hexo/blogs/hexo%E9%98%85%E8%AF%BB%E5%85%A8%E6%96%87%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2><span id="修改阅读全文前显示文字数量"><span id="inline-blue">修改[阅读全文]前显示文字数量</span></span></h2><p>第一种方式：<br>打开 themes/next/_config.yml，搜索关键字 auto_excerpt，开启配置项； 修改length即可修改阅读全文前显示文字数量</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Automatically Excerpt. Not recommend.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Please use &lt;!-- more --&gt; <span class="keyword">in</span> the post to control excerpt accurately.</span></span><br><span class="line">auto_excerpt:</span><br><span class="line">  enable: true</span><br><span class="line">  length: 150</span><br></pre></td></tr></table></figure>

<p>第二种方式：<br>文章任意位置添加</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;!-- more --&gt;</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo近期文章设置</title>
    <url>/hexo/blogs/hexo%E8%BF%91%E6%9C%9F%E6%96%87%E7%AB%A0%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h2><span id="近期文章设置"><span id="inline-blue">近期文章设置</span></span></h2><p>新建 source/_data/sidebar.njk 文件(如没有对应目录则自行创建)，内容如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;# RecentPosts #&#125;</span><br><span class="line">&#123;%- if theme<span class="selector-class">.recent_posts</span> %&#125;</span><br><span class="line">  &lt;div class=&quot;links-of-recent-posts motion-element&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;links-of-recent-posts-title&quot;&gt;</span><br><span class="line">      &#123;%- if theme<span class="selector-class">.recent_posts</span><span class="selector-class">.icon</span> %&#125;</span><br><span class="line">      &lt;i class=&quot;&#123;&#123; theme.recent_posts.icon &#125;&#125; fa-fw&quot;&gt;&lt;/i&gt;</span><br><span class="line">      &#123;%- endif %&#125;</span><br><span class="line">      &#123;&#123; theme<span class="selector-class">.recent_posts</span><span class="selector-class">.title</span> &#125;&#125;</span><br><span class="line">    &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;ul class=&quot;links-of-recent-posts-list&quot;&gt;</span><br><span class="line">      &#123;%- set posts = site.posts.sort(&#x27;date&#x27;, &#x27;desc&#x27;).toArray() %&#125;</span><br><span class="line">      &#123;%- for post in posts.slice(&#x27;0&#x27;, theme.recent_posts.max_count) %&#125;</span><br><span class="line">        &lt;li class=&quot;links-of-recent-posts-item&quot;&gt;</span><br><span class="line">          &#123;&#123; next_url(post<span class="selector-class">.path</span>, post<span class="selector-class">.title</span>, &#123;title: post.path&#125;) &#125;&#125;</span><br><span class="line">        &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">      &#123;%- endfor %&#125;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line">  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改next主题下_config.yml配置文件,取消 custom_file_path 中的 sidebar 和 style 两个注释，并新增 recent_posts 内容。variable 应该是设置另外的功能时打开的，和此处无关。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="string">source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br><span class="line"></span><br><span class="line"><span class="attr">recent_posts:</span></span><br><span class="line"><span class="comment"># 块标题</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">最近文章</span></span><br><span class="line"><span class="comment"># 图标</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-history</span></span><br><span class="line"><span class="comment"># 最多多少文章链接</span></span><br><span class="line">  <span class="attr">max_count:</span> <span class="number">5</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在 next主题目录下source/_data/styles.styl 文件中添加以下内容(文件不存在新建即可):</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 近期文章</span><br><span class="line"><span class="selector-class">.links-of-recent-posts</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8125em</span></span><br><span class="line">  margin-top: <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">.links-of-recent-posts-title</span><br><span class="line">  font-size: <span class="number">1.03em</span></span><br><span class="line">  font-weight: <span class="number">600</span></span><br><span class="line">  margin-top: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">.links-of-recent-posts-list</span><br><span class="line">  list-style: none</span><br><span class="line">  margin: <span class="number">0</span></span><br><span class="line">  padding: <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo统计功能</title>
    <url>/hexo/blogs/hexo%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure>

<p>修改themes/next/_config.yml主题配置文件，搜索关键字post_wordcount,修改如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">post_wordcount:</span><br><span class="line">  item_text: true</span><br><span class="line">  wordcount: true #单篇文章字数</span><br><span class="line">  min2read: true #单篇阅读时长</span><br><span class="line">  totalcount: true #站点总字数</span><br><span class="line">  separated_meta: true</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo添加分享功能</title>
    <url>/hexo/blogs/hexo%E6%B7%BB%E5%8A%A0%E5%88%86%E4%BA%AB%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><p>hexo站点根目录目录下执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/theme-next/theme-next-needmoreshare2 themes/next/source/lib/needsharebutton</span><br></pre></td></tr></table></figure>

<h2><span id="修改next主题配置文件"><span id="inline-blue">修改Next主题配置文件</span></span></h2><p>打开themes/next/_config.yml 搜索关键字needmoreshare2 修改为下面设置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">needmoreshare2:</span><br><span class="line">  enable: true</span><br><span class="line">  postbottom:</span><br><span class="line">    enable: true #开启底部分享按钮</span><br><span class="line">    options:</span><br><span class="line">      iconStyle: box</span><br><span class="line">      boxForm: horizontal</span><br><span class="line">      position: bottom</span><br><span class="line">      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span><br><span class="line">  float:</span><br><span class="line">    enable: false #左侧分享不开启</span><br><span class="line">    options:</span><br><span class="line">      iconStyle: box</span><br><span class="line">      boxForm: horizontal</span><br><span class="line">      position: Left</span><br><span class="line">      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/hexo/next/hexo_next_2021_01_19_001.png" alt="分享"></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo新建404</title>
    <url>/hexo/blogs/hexo%E6%96%B0%E5%BB%BA404/</url>
    <content><![CDATA[<h2><span id="新建404"><span id="inline-blue">新建404</span></span></h2><p>在站点根目录下,输入 hexo new page 404,默认在Hexo 站点下/source/404/index.md<br>打开新建的404界面，在顶部插入一行，写上permalink: /404，这表示指定该页固定链接为 http://“主页”/404.html</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">permalink: /404</span><br><span class="line">---</span><br><span class="line">title: #404 Not Found：该页无法显示</span><br><span class="line">date: 2017-09-06 15:37:18</span><br><span class="line">comments: false</span><br><span class="line">permalink: /404</span><br><span class="line">---</span><br></pre></td></tr></table></figure>









]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo文章置顶功能</title>
    <url>/hexo/blogs/hexo%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="移除默认安装的插件"><span id="inline-blue">移除默认安装的插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br></pre></td></tr></table></figure>

<h2><span id="安装新插件"><span id="inline-blue">安装新插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure>

<h2><span id="置顶操作"><span id="inline-blue">置顶操作</span></span></h2><p>文章开头分割部分添加</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">top: true</span><br></pre></td></tr></table></figure>
<p>多篇文章置顶，控制顺序，数值较大的排在前面</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">top:n</span><br></pre></td></tr></table></figure>

<h2><span id="设置置顶图标"><span id="inline-blue">设置置顶图标</span></span></h2><p>打开 /themes/next/layout/_macro/post.swig文件，在&lt;div class=&quot;post-meta&quot;&gt;下方，插入如下代码：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">    &amp;lt;i class=&amp;quot;fa fa-thumb-tack&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;</span><br><span class="line">    &amp;lt;font color=7D26CD&amp;gt;置顶&amp;lt;/font&amp;gt;</span><br><span class="line">   &amp;lt;span class=&amp;quot;post-meta-divider&amp;quot;&amp;gt;|&amp;lt;/span&amp;gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>如下图所示位置：</p>
<p><img src="/images/hexo/next/hexo_next_2021_01_10_002.png" alt="hexo文章置顶图标"></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo文章添加阴影效果</title>
    <url>/hexo/blogs/hexo%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E9%98%B4%E5%BD%B1%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<h2><span id="文章添加阴影效果"><span id="inline-blue">文章添加阴影效果</span></span></h2><p>打开themes/next/source/css/_custom/custom.styl文件添加:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">  -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>










]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo文章添加样式</title>
    <url>/hexo/blogs/hexo%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="标题添加背景色"><span id="inline-blue">标题添加背景色</span></span></h2><p>打开themes/next/source/css/_custom 下的 custom.styl 文件,添加属性样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 颜色块-黄</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-yellow</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#f0ad4e</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 颜色块-绿</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-green</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 颜色块-蓝</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-blue</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#2780e3</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 颜色块-紫</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-purple</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#9954bb</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在你需要编辑的文章地方。放置如下代码</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;span id=&quot;inline-blue&quot;&gt; 站点配置文件 &lt;/span&gt;</span><br><span class="line">&lt;span id=&quot;inline-purple&quot;&gt; 主题配置文件 &lt;/span&gt;</span><br><span class="line">&lt;span id=&quot;inline-yellow&quot;&gt; 站点配置文件 &lt;/span&gt;</span><br><span class="line">&lt;span id=&quot;inline-green&quot;&gt; 主题配置文件 &lt;/span&gt;</span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo彩色标签云</title>
    <url>/hexo/blogs/hexo%E5%BD%A9%E8%89%B2%E6%A0%87%E7%AD%BE%E4%BA%91/</url>
    <content><![CDATA[<h2><span id="彩色标签云"><span id="inline-blue">彩色标签云</span></span></h2><p>在/themes/next/layout/目录下，新增tag-color.swig文件，加入下方代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">     var alltags = document.getElementsByClassName(&#x27;tag-cloud-tags&#x27;);</span><br><span class="line">     var tags = alltags[0].getElementsByTagName(&#x27;a&#x27;);</span><br><span class="line">     for (var i = tags.length - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">       var r=Math.floor(Math.random()*75+130);</span><br><span class="line">       var g=Math.floor(Math.random()*75+100);</span><br><span class="line">       var b=Math.floor(Math.random()*75+80);</span><br><span class="line">       tags[i].style.background = &quot;rgb(&quot;+r+&quot;,&quot;+g+&quot;,&quot;+b+&quot;)&quot;;</span><br><span class="line">     &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span>&#123;</span><br><span class="line">    <span class="comment">/*font-family: Helvetica, Tahoma, Arial;*/</span></span><br><span class="line">    <span class="comment">/*font-weight: 100;*/</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">counter-reset</span>: tags;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">5px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span>:before&#123;</span><br><span class="line">    content: <span class="string">&quot;?&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">     <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">5px</span> <span class="number">15px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">4</span>);</span><br><span class="line">     <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">     <span class="comment">/*box-shadow: 10px 10px 15px 2px rgba(0,0,0,.12), 0 0 6px 0 rgba(104, 104, 105, 0.1);*/</span></span><br><span class="line">     <span class="attribute">transition-duration</span>: <span class="number">0.15s</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>在/themes/next/layout/page.swig/中引入tag-color.swig：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">在下方加上 &#123;% include &#x27;tag-color.swig&#x27; %&#125; 代码</span><br><span class="line">&lt;div class=&quot;tag-cloud&quot;&gt;</span><br><span class="line">          &lt;!--    &lt;div class=&quot;tag-cloud-title&quot;&gt;</span><br><span class="line">                &#123;&#123; _p(&#x27;counter.tag_cloud&#x27;, site.tags.length) &#125;&#125;</span><br><span class="line">            &lt;/<span class="selector-tag">div</span>&gt;  --&gt;</span><br><span class="line">             &lt;div class=&quot;tag-cloud-tags&quot; id=&quot;tags&quot;&gt;</span><br><span class="line">			  &#123;&#123; tagcloud(&#123;min_font: <span class="number">16</span>, max_font: <span class="number">16</span>, amount: <span class="number">300</span>, color: true, start_color: <span class="string">&#x27;#FFF&#x27;</span>, end_color: <span class="string">&#x27;#FFF&#x27;</span>&#125;) &#125;&#125;            </span><br><span class="line">		  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">		&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">     &#123;% include &#x27;tag-color.swig&#x27; %&#125;	</span><br></pre></td></tr></table></figure>
<p>或者将上方代码直接添加到下方</p>
<h2><span id="将标签云放到首页"><span id="inline-blue">将标签云放到首页</span></span></h2><p>在路径：/themes/next/layout/index.swig 中</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;% block <span class="attribute">content</span> %&#125;下面添加下方代码</span><br><span class="line">&#123;% block <span class="attribute">content</span> %&#125;</span><br><span class="line"></span><br><span class="line">	&lt;div class=&quot;tag-cloud&quot;&gt;</span><br><span class="line">	  &lt;div class=&quot;tag-cloud-tags&quot; id=&quot;tags&quot;&gt;</span><br><span class="line">		&#123;&#123; tagcloud(&#123;min_font: <span class="number">16</span>, max_font: <span class="number">16</span>, amount: <span class="number">300</span>, color: true, start_color: <span class="string">&#x27;#fff&#x27;</span>, end_color: <span class="string">&#x27;#fff&#x27;</span>&#125;) &#125;&#125;</span><br><span class="line">	  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">	&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">	&lt;br&gt;</span><br><span class="line">&#123;% include &#x27;tag-color.swig&#x27; %&#125;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo归档页优化</title>
    <url>/hexo/blogs/hexo%E5%BD%92%E6%A1%A3%E9%A1%B5%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h2><span id="hexo归档页优化"><span id="inline-blue">hexo归档页优化<span></span></span></span></h2><p>修改/themes/next/layout/_macro/post-collapse.swig后的代码如下：</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo安装渲染引擎</title>
    <url>/hexo/blogs/hexo%E5%AE%89%E8%A3%85%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/</url>
    <content><![CDATA[<h2><span id="卸载默认引擎"><span id="inline-blue">卸载默认引擎</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked –save</span><br></pre></td></tr></table></figure>



<h2><span id="安装新渲染引擎和katex引擎"><span id="inline-blue">安装新渲染引擎和katex引擎</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-markdown-it --save</span><br><span class="line">npm install markdown-it-katex --save</span><br></pre></td></tr></table></figure>

<h2><span id="引擎设置"><span id="inline-blue">引擎设置</span></span></h2><p>修改hexo根目录下_config.xml</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Markdown-it config</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki/</span></span></span><br><span class="line">markdown:</span><br><span class="line">  render:</span><br><span class="line">    html: true</span><br><span class="line">    xhtmlOut: false</span><br><span class="line">    breaks: true</span><br><span class="line">    linkify: true</span><br><span class="line">    typographer: true</span><br><span class="line">    quotes: &#x27;“”‘’&#x27;</span><br><span class="line">  plugins:</span><br><span class="line">  anchors:</span><br><span class="line">    level: 2</span><br><span class="line">    collisionSuffix: &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">math:</span><br><span class="line">  engine: &#x27;katex&#x27;   </span><br><span class="line">  katex:</span><br><span class="line">    css: https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css</span><br><span class="line">    js: https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js</span><br><span class="line">    config:</span><br><span class="line">      # KaTeX config</span><br><span class="line">      throwOnError: false</span><br><span class="line">      errorColor: &quot;#cc0000&quot;   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="开启next主题math支持"><span id="inline-blue">开启NexT主题math支持</span></span></h2><p>修改next主题下_config.xml</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Math Formulas Render Support</span></span><br><span class="line">math:</span><br><span class="line"><span class="meta">  #</span><span class="bash"> Default (<span class="literal">true</span>) will load mathjax / katex script on demand.</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> That is it only render those page <span class="built_in">which</span> has `mathjax: <span class="literal">true</span>` <span class="keyword">in</span> Front-matter.</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> If you <span class="built_in">set</span> it to <span class="literal">false</span>, it will load mathjax / katex srcipt EVERY PAGE.</span></span><br><span class="line">  per_page: true</span><br><span class="line"></span><br><span class="line"><span class="meta">  #</span><span class="bash"> hexo-renderer-pandoc (or hexo-renderer-kramed) required <span class="keyword">for</span> full MathJax support.</span></span><br><span class="line">  mathjax:</span><br><span class="line">    enable: false</span><br><span class="line">    # See: https://mhchem.github.io/MathJax-mhchem/</span><br><span class="line">    mhchem: false</span><br><span class="line"></span><br><span class="line"><span class="meta">  #</span><span class="bash"> hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin) required <span class="keyword">for</span> full Katex support.</span></span><br><span class="line">  katex:</span><br><span class="line">    enable: true</span><br><span class="line">    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span><br><span class="line">    copy_tex: false</span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo安装本地搜索功能</title>
    <url>/hexo/blogs/hexo%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>



<h2><span id="新增配置"><span id="inline-blue">新增配置</span></span></h2><p>修改hexo/_config.yml站点配置文件，新增以下内容到任意位置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">path: search.xml</span><br><span class="line">field: post</span><br><span class="line">format: html</span><br><span class="line">limit: 10000</span><br></pre></td></tr></table></figure>

<h2><span id="修改主题配置文件开启本地搜索功能"><span id="inline-blue">修改主题配置文件，开启本地搜索功能</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Local search</span></span><br><span class="line">local_search:</span><br><span class="line">enable: true  </span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo安装next问题</title>
    <url>/hexo/blogs/hexo%E5%AE%89%E8%A3%85next%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2><span id="问题描述"><span id="inline-blue">问题描述</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Cloning into &#x27;themes/next&#x27;...</span><br><span class="line">remote: Enumerating objects: 12037, done.</span><br><span class="line">error: RPC failed; curl 18 transfer closed with outstanding read data remaining</span><br><span class="line">error: 1285 bytes of body are still expected</span><br><span class="line">fetch-pack: unexpected disconnect while reading sideband packet</span><br><span class="line">fatal: early EOF</span><br><span class="line">fatal: index-pack failed</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="问题原因"><span id="inline-blue">问题原因</span></span></h2><p>curl的postBuffer的默认值太小，我们需要调整它的大小，在终端重新配置大小</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --global http.postBuffer 524288000  //设置为500M</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看参数配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --list</span></span><br><span class="line">diff.astextplain.textconv=astextplain</span><br><span class="line">filter.lfs.clean=git-lfs clean -- %f</span><br><span class="line">filter.lfs.smudge=git-lfs smudge -- %f</span><br><span class="line">filter.lfs.process=git-lfs filter-process</span><br><span class="line">filter.lfs.required=true</span><br><span class="line">http.sslbackend=openssl</span><br><span class="line">http.sslcainfo=D:/Git/mingw64/ssl/certs/ca-bundle.crt</span><br><span class="line">core.autocrlf=true</span><br><span class="line">core.fscache=true</span><br><span class="line">core.symlinks=false</span><br><span class="line">pull.rebase=false</span><br><span class="line">credential.helper=manager-core</span><br><span class="line">credential.https://dev.azure.com.usehttppath=true</span><br><span class="line">init.defaultbranch=master</span><br><span class="line">user.name=vanishke</span><br><span class="line">user.email=18685129726@163.com</span><br><span class="line">http.postbuffer=524288000</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo安装GitHub插件</title>
    <url>/hexo/blogs/hexo%E5%AE%89%E8%A3%85GitHub%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="上传配置"><span id="inline-blue">上传配置</span></span></h2><p>hexo配置和文件文件添加如下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/userName/repoName.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>



<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><p>安装GitHub部署插件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h2><span id="测试部署"><span id="inline-blue">测试部署</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo d   </span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo头像设置</title>
    <url>/hexo/blogs/hexo%E5%A4%B4%E5%83%8F%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h2><span id="hexo头像设置"><span id="inline-blue">hexo头像设置</span></span></h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"># 修改themes\next\source\css\_common\components\sidebar\sidebar-author<span class="selector-class">.styl</span>,新增以下代码:</span><br><span class="line">.site-author-image &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: $site-author-image-padding;</span><br><span class="line">  <span class="attribute">max-width</span>: $site-author-image-width;</span><br><span class="line">  <span class="attribute">height</span>: $site-author-image-height;</span><br><span class="line">  <span class="attribute">border</span>: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line">  //设置圆形</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span> all;</span><br><span class="line">&#125;</span><br><span class="line">   //旋转</span><br><span class="line"> <span class="selector-class">.site-author-image</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">   <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2><span id="添加头像"><span id="inline-blue">添加头像</span></span></h2><p>打开themes/next下的_config.yml文件，搜索 Sidebar Avatar关键字，去掉avatar前面的#</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line"># in theme directory(source/images): /images/avatar.jpg</span><br><span class="line"># in site  <span class="built_in">directory</span>(source/uploads): /uploads/avatar.jpg</span><br><span class="line">avatar: /images/avatar.png</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo博客源文档备份</title>
    <url>/hexo/Next/blogs/hexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<h2><span id="实现原理"><span id="inline-blue">实现原理</span></span></h2><p>通过监听hexo事件完成博客源码备份，hexo主要事件如下表</p>
<table>
<thead>
<tr>
<th align="center">事件名称</th>
<th align="center">时间发生时间</th>
</tr>
</thead>
<tbody><tr>
<td align="center">deployBefore</td>
<td align="center">在部署完成前发布</td>
</tr>
<tr>
<td align="center">deployAfter</td>
<td align="center">在部署成功后发布</td>
</tr>
<tr>
<td align="center">exit</td>
<td align="center">在 Hexo 结束前发布</td>
</tr>
<tr>
<td align="center">generateBefore</td>
<td align="center">在静态文档生成前发布</td>
</tr>
<tr>
<td align="center">generateAfter</td>
<td align="center">在静态文档生成后发布</td>
</tr>
<tr>
<td align="center">new</td>
<td align="center">在文章文档建立后发布</td>
</tr>
</tbody></table>
<p>监听deployAfter事件，hexo上传文件到github之后自动运行git备份命令，完成博客备份。</p>
<h2><span id="hexo源码添加git仓库"><span id="inline-blue">hexo源码添加Git仓库</span></span></h2><ol>
<li><p>github仓库新建repository,命名为hexoBackup</p>
</li>
<li><p>进入本地hexo目录，执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure></li>
<li><p>设置远程仓库地址，并更新。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:XXX/hexoBackup.git //设置需要同步的远程仓库地址</span><br><span class="line">git pull origin master //将本地代码上传到远程仓库</span><br></pre></td></tr></table></figure></li>
<li><p>修改 .gitignore文档（如果没有请手动创建一个），在里面加入*.log(同步日志) 和 public/ (hexo生成的html文件)以及.deploy*/。因为每次执行hexo generate命令时，上述目录都会被重写更新。因此忽略这两个目录下的文档更新，加快 push速度。</p>
</li>
<li><p>执行以下命令，完成本地源码提交。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add . // 提交当前路径下的源码</span><br><span class="line">git commit -m &quot;添加hexo源码文档作为备份&quot; // 提交日志</span><br></pre></td></tr></table></figure></li>
<li><p>推送到远程仓库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<h2><span id="安装shelljs模块"><span id="inline-blue">安装shelljs模块</span></span></h2></li>
<li><p>要实现这个自动备份功能，需要依赖 Node.js的一个 shelljs 模块,该模块重新包装了child_process,调用系统命令更加的方便。该模块需要安装后使用。</p>
<p>在命令中键入以下命令，完成shelljs模块的安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save shelljs</span><br></pre></td></tr></table></figure></li>
<li><p>编写自动备份脚本<br>待到模块安装完成，在Hexo根目录的scripts文档夹下新建一个js文档，文档名随意取。<br>然后在脚本中，写入以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;shelljs/global&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    hexo.on(<span class="string">&#x27;deployAfter&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        run();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;产生了一个错误&lt;(￣3￣)&gt; !，错误详情为：&quot;</span> + e.toString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!which(<span class="string">&#x27;git&#x27;</span>)) &#123;</span><br><span class="line">        echo(<span class="string">&#x27;Sorry, this script requires git&#x27;</span>);</span><br><span class="line">        exit(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        echo(<span class="string">&quot;======================Auto Backup Begin===========================&quot;</span>);</span><br><span class="line">        cd(<span class="string">&#x27;H:/hexo&#x27;</span>);    </span><br><span class="line">        <span class="keyword">if</span> (exec(<span class="string">&#x27;git add --all&#x27;</span>).code !== <span class="number">0</span>) &#123;</span><br><span class="line">            echo(<span class="string">&#x27;Error: Git add failed&#x27;</span>);</span><br><span class="line">            exit(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (exec(<span class="string">&#x27;git commit -am &quot;Form auto backup script&#x27;</span>s commit<span class="string">&quot;&#x27;).code !== 0) &#123;</span></span><br><span class="line"><span class="string">            echo(&#x27;Error: Git commit failed&#x27;);</span></span><br><span class="line"><span class="string">            exit(1);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (exec(&#x27;git push origin master&#x27;).code !== 0) &#123;</span></span><br><span class="line"><span class="string">            echo(&#x27;Error: Git push failed&#x27;);</span></span><br><span class="line"><span class="string">            exit(1);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        echo(&quot;</span>==================Auto Backup Complete============================<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>修改脚本中路径，替换为对应源码路径，注意仓库分支是否为master,保存脚本并退出。</p>
<p>，</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>执行 hexo d 命令，执行结果如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo d</span></span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying files from public folder...</span><br><span class="line">INFO  Copying files from extend dirs...</span><br><span class="line">[master 383dcf1] Site updated: 2021-01-14 16:43:22</span><br><span class="line"> 110 files changed, 3704 insertions(+), 32 deletions(-)</span><br><span class="line">Fatal: HttpRequestException encountered.</span><br><span class="line">Username for &#x27;https://github.com&#x27;: vanishke</span><br><span class="line">Counting objects: 253, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (137/137), done.</span><br><span class="line">Writing objects: 100% (253/253), 84.53 KiB | 0 bytes/s, done.</span><br><span class="line">Total 253 (delta 109), reused 0 (delta 0)</span><br><span class="line">remote: Resolving deltas: 100% (109/109), completed with 38 local objects.</span><br><span class="line">To https://github.com/vanishke/hexo.git</span><br><span class="line">   55364f0..383dcf1  HEAD -&gt; master</span><br><span class="line">Branch master set up to track remote branch master from https://github.com/vanishke/hexo.git.</span><br><span class="line">INFO  Deploy done: git</span><br><span class="line">======================Auto Backup Begin===========================</span><br><span class="line">[master 9f9c64d] blog auto backup script&#x27;s commit</span><br><span class="line"> 36 files changed, 1133 insertions(+), 11 deletions(-)</span><br><span class="line">To git@github.com:vanishke/hexoBackup.git</span><br><span class="line">   b6ccffd..9f9c64d  master -&gt; master</span><br><span class="line">==================Auto Backup Complete============================</span><br><span class="line"></span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>hexo</category>
        <category>Next</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo修改链接文字样式</title>
    <url>/hexo/blogs/hexo%E4%BF%AE%E6%94%B9%E9%93%BE%E6%8E%A5%E6%96%87%E5%AD%97%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="修改链接文字样式"><span id="inline-blue">修改链接文字样式</span></span></h2><p>打开themes\next\source\css\_common\components\post\post.styl添加以下代码:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line"> <span class="attribute">border-bottom</span>: none;</span><br><span class="line"> &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">   <span class="attribute">color</span>: <span class="number">#ff106c</span>;</span><br><span class="line">   <span class="attribute">text-decoration</span>: underline;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>










]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo修改加载特效</title>
    <url>/hexo/blogs/hexo%E4%BF%AE%E6%94%B9%E5%8A%A0%E8%BD%BD%E7%89%B9%E6%95%88/</url>
    <content><![CDATA[<h2><span id="修改加载特效"><span id="inline-blue">修改加载特效</span></span></h2><p>搜索pace，找到如下代码：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 页面顶部加载条</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Progress bar <span class="keyword">in</span> the top during page loading.</span></span><br><span class="line">pace: true</span><br><span class="line"><span class="meta">#</span><span class="bash"> Themes list:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-big-counter</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-bounce</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-barber-shop</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-atom</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-circle</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-radar</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-simple</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-corner-indicator</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-fill-left</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-flash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-loading-bar</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-mac-osx</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-minimal</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For example</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pace_theme: pace-theme-center-simple</span></span><br><span class="line">pace_theme: pace-theme-minimal  #默认设置，可以修改为上述任何一个</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo修改[read more]按钮样式</title>
    <url>/hexo/blogs/hexo%E4%BF%AE%E6%94%B9%5Bread%20more%5D%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><p>修改themes\next\source\css_custom\custom.styl文件，加入自定义样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">// <span class="selector-attr">[Read More]</span>按钮样式</span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">transition-property</span>: unset;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#a166ab</span> <span class="number">0%</span>, <span class="number">#ef4e7b</span> <span class="number">25%</span>, <span class="number">#f37055</span> <span class="number">50%</span>, <span class="number">#ef4e7b</span> <span class="number">75%</span>, <span class="number">#a166ab</span> <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>










]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo使用next主题异常</title>
    <url>/hexo/blogs/hexo%E4%BD%BF%E7%94%A8next%E4%B8%BB%E9%A2%98%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<h2><span id="问题描述"><span id="inline-blue">问题描述<span></span></span></span></h2><p>访问hexo ,出现以下提示</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;% extends &#x27;_layout.swig&#x27; %&#125; &#123;% import &#x27;_macro/post.swig&#x27; as post_template %&#125; &#123;% import &#x27;_macro/sidebar.swig&#x27; as sidebar_template %&#125; &#123;% block title %&#125;&#123;&#123; config.title &#125;&#125;&#123;% if theme.index_with_subtitle and config.subtitle %&#125; - &#123;&#123;config.subtitle &#125;&#125;&#123;% endif %&#125;&#123;% endblock %&#125; &#123;% block page_class %&#125; &#123;% if is_home() %&#125;page-home&#123;% endif -%&#125; &#123;% endblock %&#125; &#123;% block content %&#125;</span><br><span class="line">&#123;% for post in page<span class="selector-class">.posts</span> %&#125; &#123;&#123; post_template<span class="selector-class">.render</span>(post, true) &#125;&#125; &#123;% endfor %&#125;</span><br><span class="line">&#123;% include &#x27;_partials/pagination.swig&#x27; %&#125; &#123;% endblock %&#125; &#123;% block sidebar %&#125; &#123;&#123; sidebar_template.render(false) &#125;&#125; &#123;% endblock %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="问题原因"><span id="inline-blue">问题原因</span></span></h2><p>hexo在5.0之后把swig给删除了需要自己手动安装</p>
<h2><span id="解决办法">解决办法</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i hexo-renderer-swig</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo主题代码块自定义样式</title>
    <url>/hexo/blogs/hexo%E4%B8%BB%E9%A2%98%E4%BB%A3%E7%A0%81%E5%9D%97%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="代码块自定义样式"><span id="inline-blue">代码块自定义样式</span></span></h2><p>打开themes/next/source/css/_custom/下的custom.styl,向里面加代码(颜色可以自己定义)</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ff7600</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fbf7f8</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 边框的自定义样式</span><br><span class="line"><span class="selector-class">.highlight</span>, pre &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span>, <span class="selector-tag">code</span>, pre &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d6d6d6</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo主题next翻页不正常</title>
    <url>/hexo/blogs/hexo%E4%B8%BB%E9%A2%98next%E7%BF%BB%E9%A1%B5%E4%B8%8D%E6%AD%A3%E5%B8%B8/</url>
    <content><![CDATA[<h2><span id="修改文件"><span id="inline-blue">修改文件</span></span></h2><p>themes\next\layout_partials\pagination.swig</p>
<p>修改前</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;% if page<span class="selector-class">.prev</span> or page<span class="selector-class">.next</span> %&#125;</span><br><span class="line">  &amp;lt;nav class=&amp;quot;pagination&amp;quot;&amp;gt;</span><br><span class="line">    &#123;&#123;</span><br><span class="line">      paginator(&#123;</span><br><span class="line">        prev_text: &amp;#x27;&amp;lt;i class=&amp;quot;fa fa-angle-left&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;#x27;,</span><br><span class="line">        next_text: &amp;#x27;&amp;lt;i class=&amp;quot;fa fa-angle-right&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;#x27;,</span><br><span class="line">        mid_size: <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &amp;lt;/<span class="selector-tag">nav</span>&amp;gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>修改后</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;% if page<span class="selector-class">.prev</span> or page<span class="selector-class">.next</span> %&#125;</span><br><span class="line">  &amp;lt;nav class=&amp;quot;pagination&amp;quot;&amp;gt;</span><br><span class="line">    &#123;&#123;</span><br><span class="line">      paginator(&#123;</span><br><span class="line">        prev_text: &amp;#x27;&amp;lt;&amp;<span class="selector-id">#x27</span>;,</span><br><span class="line">        next_text: &amp;#x27;&amp;gt;&amp;<span class="selector-id">#x27</span>;,</span><br><span class="line">        mid_size: <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &amp;lt;/<span class="selector-tag">nav</span>&amp;gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo修改主题文章底部标签</title>
    <url>/hexo/blogs/hexo%E4%B8%BB%E9%A2%98next%E4%BF%AE%E6%94%B9%E6%96%87%E7%AB%A0%E6%A0%87%E7%AD%BE/</url>
    <content><![CDATA[<h2><span id="修改模板"><span id="inline-blue">修改模板</span></span></h2><p>/themes/next/layout/_macro/post.swig</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">搜索 rel=“tag”&gt;#，将 # 换成&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</span><br></pre></td></tr></table></figure>

<p>效果如图：</p>
<p><img src="/images/hexo/next/hexo_next_2021_01_10_001.png" alt="hexo修改文章底部标签"></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>git仓库初始化导入</title>
    <url>/git/blogs/git%E4%BB%93%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%BC%E5%85%A5/</url>
    <content><![CDATA[<h1><span id="创建本地仓库"><span id="inline-blue">创建本地仓库</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git init  //当前目录初始化版本库</span><br><span class="line"></span><br><span class="line">git add . //将当前路径下的所有文件添加到版本库</span><br><span class="line"></span><br><span class="line">git commit -m &quot;first commit&quot; //文件提交到版本库，并添加备注</span><br></pre></td></tr></table></figure>
<h1><span id="远程仓库推送"><span id="inline-blue">远程仓库推送</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git remote add origin &quot;远程仓库地址&quot; //关联远程仓库</span><br><span class="line"></span><br><span class="line"> git add -u origin master //首次推送需要加-u参数，其他情况不需要</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="推送报错解决"><span id="inline-blue">推送报错解决</span></span></h1><p>推送报错信息如下：<br>git push error: failed to push some refs to</p>
<p>问题原因： 远程仓库增加了README.md文件在本地仓库下不存在，需要先将远程仓库的内容更新下来，在执行推送</p>
<p>解决方案：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git pull --rebase origin master</span><br></pre></td></tr></table></figure>
<p>再次提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>elasticsearch导入导出</title>
    <url>/ElasticSearch/blogs/elasticsearch%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>linux </p>
<h2><span id="部署"><span id="inline-blue">部署</span></span></h2><p>下载工具压缩包<br>下载地址：<a href="https://pan.baidu.com/s/1V3If_94FJZRx-004ycLIaQ">https://pan.baidu.com/s/1V3If_94FJZRx-004ycLIaQ</a><br>提取码：qlpg</p>
<p>EsToolNew.zip上传服务器,解压</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demo_mdn EsToolNew]#unzip EsToolNew.zip</span><br></pre></td></tr></table></figure>

<p><img src="/images/elasticsearch/es_20210226_001.png" alt="部署目录"></p>
<p>config:配置需要访问的elasticsearch实际地址<br>start.sh: 启动脚本<br>stop.sh: 停止脚本<br>json: 需要导入的数据脚本<br>默认访问端口：8056</p>
<h3><span id="启动方式"><span id="inline-blue">启动方式</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demo_mdn EsToolNew]# sh start.sh</span><br></pre></td></tr></table></figure>
<h2><span id="访问"><span id="inline-blue">访问</span></span></h2><p><img src="/images/elasticsearch/es_20210226_002.png" alt="访问"></p>
<h2><span id="导入"><span id="inline-blue">导入</span></span></h2><p><img src="/images/elasticsearch/es_20210226_003.png" alt="导入"></p>
<h2><span id="导入"><span id="inline-blue">导入</span></span></h2><p><img src="/images/elasticsearch/es_20210226_004.png" alt="导出"></p>
]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
        <tag>EsTool</tag>
      </tags>
  </entry>
  <entry>
    <title>ElasticSearch基本操作</title>
    <url>/ElasticSearch/blogs/elasticsearch%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%B4%A2%E5%BC%95%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">查看所有索引信息</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95span"><span id="inline-blue">创建索引</span></a></li>
<li><a href="#span-idinline-blue%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95span"><span id="inline-blue">删除索引</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95mappingspan"><span id="inline-blue">创建索引mapping</span></a><ul>
<li><a href="#span-idinline-blue24%E7%89%88%E6%9C%ACspan"><span id="inline-blue">2.4版本</span></a></li>
<li><a href="#span-idinline-blue50-%E7%89%88%E6%9C%ACspan"><span id="inline-blue">5.0 版本</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E6%A8%A1%E6%9D%BFspan"><span id="inline-blue">创建模板</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="查看所有索引信息"><span id="inline-blue">查看所有索引信息</span></span></h1><p><a href="http://10.9.217.3:9200/_cat/indices">http://10.9.217.3:9200/_cat/indices</a></p>
<h1><span id="创建索引"><span id="inline-blue">创建索引</span></span></h1><p>POST <a href="http://10.9.217.3:9200/coseelog">http://10.9.217.3:9200/coseelog</a></p>
<h1><span id="删除索引"><span id="inline-blue">删除索引</span></span></h1><p>DELETE <a href="http://10.9.217.3:9200/coseelog">http://10.9.217.3:9200/coseelog</a></p>
<h1><span id="创建索引mapping"><span id="inline-blue">创建索引mapping</span></span></h1><h2><span id="24版本"><span id="inline-blue">2.4版本</span></span></h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">POST http://10.9.217.3:9200/coseelog/doc/_mapping?pretty</span><br><span class="line">&#123;<span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line">	<span class="attr">&quot;properties&quot;</span>:  &#123;</span><br><span class="line">		<span class="attr">&quot;logId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;logTime&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;ip&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;userName&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;moduleId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;actionId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;content&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;orgId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="50-版本"><span id="inline-blue">5.0 版本</span></span></h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">mapping POST http://10.9.217.3:9200/coseelog/doc/_mapping?pretty</span><br><span class="line">&#123;<span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line">	<span class="attr">&quot;properties&quot;</span>:  &#123;</span><br><span class="line">		<span class="attr">&quot;logId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;logTime&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;ip&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;userName&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;moduleId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;actionId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;content&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;orgId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1><span id="创建模板"><span id="inline-blue">创建模板</span></span></h1><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">POST http://120.77.8.170:9200/_template/vistors_flow_total/</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;template&quot;</span> : <span class="string">&quot;vistors_flow_total_*&quot;</span>,</span><br><span class="line">  	<span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;index&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;number_of_shards&quot;</span> : <span class="string">&quot;3&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;number_of_replicas&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;translog.flush_threshold_size&quot;</span> : <span class="string">&quot;1024mb&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line">				<span class="attr">&quot;_all&quot;</span>: &#123; <span class="attr">&quot;enabled&quot;</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">				<span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">					<span class="attr">&quot;deviceKey&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;productKey&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;deviceName&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;statisticNum&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;</span><br><span class="line">					<span class="string">&quot;statisticTime&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">						<span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">					&#125;</span><br><span class="line">					</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch,NoSQL</tag>
      </tags>
  </entry>
  <entry>
    <title>eclipse安装Jetty插件</title>
    <url>/eclipse/blogs/eclipse%E5%AE%89%E8%A3%85Jetty%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h1><span id="插件下载地址连接失败解决办法"><span id="inline-blue">插件下载地址连接失败解决办法</span></span></h1><ol>
<li><p>访问<a href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com/</a> 查找到github公网IP地址<br><img src="/images/intelliJ/intelliJ_2021_04_29_001.png" alt="查找结果"></p>
</li>
<li><p>将github网站IP地址映射添加到C:\Windows\System32\drivers\etc目录下的hosts文件中，文件末尾添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">140.82.114.4 github.com</span><br></pre></td></tr></table></figure></li>
<li><p>刷新本地DNS缓存<br>cmd命令模式下执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ipconfig /flushdns</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1><span id="在线安装"><span id="inline-blue">在线安装</span></span></h1><p>eclipse菜单栏依次点击  Help&gt;eclipse Marketplace<br>安装版本选择第一项(可以切换不同的版本),安装之后重启eclispe,jetty插件才能生效<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_001.png" alt="安装步骤1"><br>选中项目可直接右键jetty启动<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_002.png" alt="安装步骤2"><br>配置jetty启动选项<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_003.png" alt="安装步骤3"><br>设置项目启动端口、jetty版本、访问项目名称<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_004.png" alt="安装步骤4"><br>配置jvm启动参数,项目对应启动配置文件所在位置、jrebel插件参数配置<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_005.png" alt="安装步骤5"><br>配置项目部署class文件以及依赖jar包,主要解决子项目依赖导致jar包冲突<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_006.png" alt="安装步骤6"></p>
]]></content>
      <categories>
        <category>eclipse</category>
      </categories>
      <tags>
        <tag>Jetty</tag>
        <tag>eclipse</tag>
      </tags>
  </entry>
  <entry>
    <title>easyui-tree三级区域树回显</title>
    <url>/easyui/blogs/easyui-tree%E4%B8%89%E7%BA%A7%E5%8C%BA%E5%9F%9F%E6%A0%91%E5%9B%9E%E6%98%BE/</url>
    <content><![CDATA[<h2><span id="多层级区域树加载"><span id="inline-blue">多层级区域树加载</span></span></h2><h3><span id="树的数据格式tree-data-format">树的数据格式（Tree Data Format）</span></h3><p>每个节点可以包括下列属性：</p>
<ul>
<li>id：节点的 id，它对于加载远程数据很重要。</li>
<li>text：要显示的节点文本。</li>
<li>state：节点状态，’open’ 或 ‘closed’，默认是 ‘open’。当设置为 ‘closed’ 时，该节点有子节点，并且将从远程站点加载它们。</li>
<li>checked：指示节点是否被选中。</li>
<li>attributes：给一个节点添加的自定义属性。</li>
<li>children：定义了一些子节点的节点数组。</li>
</ul>
<p>接口返回tree初始化数据json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">	<span class="attr">&quot;select&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">&quot;children&quot;</span>: [&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1175</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;区域测试(10110)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;open&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1172</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;区域测试2(11111)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;open&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1135</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;无锡市(0510)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1129</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;马鞍山市(0555)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1117</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;泰州市(0523)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1111</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;镇江市(0511)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1103</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;淮安市(0517)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1098</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;扬州市(0514)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1093</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宿迁市(0527)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1085</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;默认布局(0000)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;open&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1080</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;常州市(0519)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1071</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;盐城市(0515)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1065</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;南通市(0513)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1059</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;连云港市(0518)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1057</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;徐州市(0516)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1048</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;南京市(025)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;],</span><br><span class="line">	<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;-1&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;根区域(-1)&quot;</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>选择三层叶子结点，返回回显指定区域加载异常，提示错误信息如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jquery-1.8.3.min.js:2 Uncaught TypeError: Cannot read property &#39;target&#39; of null</span><br><span class="line">    at doSelectAppoint (listpage?areaId&#x3D;1147:2453)</span><br><span class="line">    at Object.success (listpage?areaId&#x3D;1147:2088)</span><br><span class="line">    at l (jquery-1.8.3.min.js:2)</span><br><span class="line">    at Object.fireWith [as resolveWith] (jquery-1.8.3.min.js:2)</span><br><span class="line">    at T (jquery-1.8.3.min.js:2)</span><br><span class="line">    at r (jquery-1.8.3.min.js:2)</span><br><span class="line">    at Object.send (jquery-1.8.3.min.js:2)</span><br><span class="line">    at Function.ajax (jquery-1.8.3.min.js:2)</span><br><span class="line">    at expandArea (listpage?areaId&#x3D;1147:2060)</span><br><span class="line">    at HTMLUListElement.onLoadSuccess (listpage?areaId&#x3D;1147:1922)</span><br></pre></td></tr></table></figure>

<h4><span id="原因分析">原因分析</span></h4><p>初始化区域数据默认只给到二级节点，三级叶子节点未生成，导致调用异常，后面通过tree对应官方api文档里面append方法递归生成对应父节点集合的叶子结点，发现在叶子节点为多节点情况下递归调用发生死循环导致页面加载页面。</p>
<h4><span id="解决方案">解决方案</span></h4><p>后台提供findById()方法，返回对应节点父节点集合，通过递归从二级节点开始加载对应的子节点集合，生成节点方法改为expandAll(),从二级节点一直加载到其对应的叶子节点，判断当前回显的叶子节点是否选中。</p>
<p>findById方法返回数据如下显示</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;id&quot;</span>: <span class="number">1147</span>,</span><br><span class="line">	<span class="attr">&quot;createTime&quot;</span>: <span class="string">&quot;2020-11-25 14:36:24&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;lastUpdateTime&quot;</span>: <span class="string">&quot;2021-01-05 01:27:12&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;lastUpdateTimeStart&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;lastUpdateTimeEnd&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;createTimeStart&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;createTimeEnd&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;idList&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;queryGroupId&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;queryGroupIds&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;notCompareId&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;areaName&quot;</span>: <span class="string">&quot;江苏省公安厅视频会议&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;areaCode&quot;</span>: <span class="string">&quot;100000000296&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;remark&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;pubState&quot;</span>: <span class="string">&quot;online&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;relateState&quot;</span>: <span class="string">&quot;online&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;parentId&quot;</span>: <span class="number">1143</span>,</span><br><span class="line">	<span class="attr">&quot;codeList&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;locateNameList&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;isLeaf&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;江苏省公安厅视频会议(100000000296)&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;state&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;right&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;search&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;parentIds&quot;</span>: <span class="string">&quot;1147,1143,1048,-1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>parentIds:返回当前选中节点的父节点集合（包括自身）。</p>
<h4><span id="加载实现">加载实现</span></h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 区域树初始化加载</span></span><br><span class="line">onLoadSuccess:<span class="function"><span class="keyword">function</span>(<span class="params">node,data</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(areaId!=<span class="string">&quot;&quot;</span> &amp;&amp; areaId!=<span class="literal">null</span>)&#123;</span><br><span class="line">				</span><br><span class="line">				expandArea(areaId);</span><br><span class="line">                <span class="comment">//doSelectAppoint(areaId);</span></span><br><span class="line">                <span class="comment">//setTimeout(doSelectAppoint(areaId),2000);</span></span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">var</span> nodeThis=$(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;find&#x27;</span>,cId);</span><br><span class="line">				<span class="keyword">if</span>(nodeThis==<span class="string">&quot;&quot;</span>||nodeThis==<span class="literal">undefined</span>)&#123;<span class="comment">//节点找不到的情况下默认根节点</span></span><br><span class="line">					cId=-<span class="number">1</span>;</span><br><span class="line">					nodeThis=$(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;find&#x27;</span>,-<span class="number">1</span>)</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(nodeThis == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">var</span> first = $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;getChildren&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">                    $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;select&#x27;</span>,first.target);</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;select&#x27;</span>,nodeThis.target);</span><br><span class="line">                &#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//setTimeout(function()&#123;doRight(node,data);&#125;, 500);</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//节点递归加载实现</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * easyui-tree 区域树回显实现</span></span><br><span class="line"><span class="comment"> * 默认异常情况下显示根节点</span></span><br><span class="line"><span class="comment"> * 借助parentIds父节点记录集合，currentNode、parentNode实现自动扩展加载三层叶子结点</span></span><br><span class="line"><span class="comment"> * expandAll 扩展当前节点下的所有叶子节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">expandArea</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = globalWebAppURL+<span class="string">&quot;/manager/area/findById?id=&quot;</span>+areaId;</span><br><span class="line">    <span class="keyword">var</span> parentNode = <span class="literal">null</span>;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        url: url,</span><br><span class="line">        <span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> fatherId = data.parentId;</span><br><span class="line">            <span class="keyword">if</span>(fatherId)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="keyword">var</span> parentIds =<span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    			<span class="keyword">if</span>(data.parentIds != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">    				parentIds = data.parentIds.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    			&#125;</span><br><span class="line">    			<span class="comment">//父节点记录集合升序排序，目的是初始化区域树按照原有顺序加载</span></span><br><span class="line">				parentIds.sort(compare);</span><br><span class="line">				<span class="keyword">var</span> len=parentIds.length;</span><br><span class="line">                <span class="comment">//从二层节点开始</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">var</span> index = <span class="number">1</span>;index&lt;len; index++) </span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">var</span> currentNode = $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;find&#x27;</span>,parentIds[index]);</span><br><span class="line">                      <span class="comment">//父节点为空</span></span><br><span class="line">					<span class="keyword">if</span> (currentNode == <span class="literal">null</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						 currentNode = parentNode;</span><br><span class="line">                        	<span class="comment">//父节点找不到的情况下默认初始化根节点</span></span><br><span class="line">						 <span class="keyword">if</span>(currentNode == <span class="literal">null</span>)</span><br><span class="line">							 &#123;</span><br><span class="line">								 areaId = <span class="literal">null</span>;</span><br><span class="line">				                 doSelectAppoint(-<span class="number">1</span>);</span><br><span class="line">				                 <span class="keyword">break</span>;</span><br><span class="line">							 &#125;</span><br><span class="line">						 <span class="keyword">else</span></span><br><span class="line">							 &#123;</span><br><span class="line">                                 <span class="comment">//如果当前节点为空说明，说明当前节点未加载，需要借助父节点expandAll()方法加载对应的子节点集合</span></span><br><span class="line">				                $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;expandAll&#x27;</span>,currentNode.target);</span><br><span class="line">							 &#125;</span><br><span class="line">		                 </span><br><span class="line">					&#125;</span><br><span class="line">                     <span class="comment">//父节点存在，进行下一层遍历</span></span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						 parentNode = currentNode;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;expand&#x27;</span>,parentNode.target);</span><br><span class="line">    <span class="keyword">var</span> selectNode =  $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;getSelected&#x27;</span>);</span><br><span class="line">    <span class="comment">//父节点展开导致当前节点选中效果失效，没有选中的节点的情况下，回显历史记录节点</span></span><br><span class="line">    <span class="keyword">if</span>(selectNode== <span class="literal">null</span>)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;doSelectAppoint(id);&#125;, <span class="number">2000</span>);</span><br><span class="line">    	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>easyui</category>
      </categories>
      <tags>
        <tag>easyui</tag>
      </tags>
  </entry>
  <entry>
    <title>chrome加载postman插件</title>
    <url>/%E6%8F%92%E4%BB%B6/blogs/chrome%E5%8A%A0%E8%BD%BDpostman%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="安装环境"><span id="inline-blue">安装环境</span></span></h2><p>windows7 64</p>
<h2><span id="下载插件"><span id="inline-blue">下载插件</span></span></h2><p><a href="https://pan.baidu.com/s/1R_KgYR3-QK3e8tufvBlcNQ">https://pan.baidu.com/s/1R_KgYR3-QK3e8tufvBlcNQ</a><br>提取码：pvc4</p>
<h2><span id="加载插件"><span id="inline-blue">加载插件</span></span></h2><p>chrome地址栏访问chrome://extensions/,打开chrome扩展程序<br><img src="/images/chrome/chrome_2021_02_22_001.png" alt="扩展程序"></p>
<p>解压下载的插件压缩包，开启开发者模式，加载Postman_v4.1.3插件文件夹<br><img src="/images/chrome/chrome_2021_02_22_002.png" alt="扩展程序"></p>
<p>加载之后，提示报错，报错信息如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Ignored insecure CSP value &quot;https://ssl.google-analytics.com/ga.js&quot; in directive &#x27;script-src&#x27;.</span><br></pre></td></tr></table></figure>
<p>找到插件解压后根目录下的manifest.json文件，打开找到sandbox节点<br>修改前：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;sandbox&quot;: &#123;</span><br><span class="line">      &quot;pages&quot;: [&quot;html/tester_sandbox.html&quot;, &quot;snippet_sandbox.html&quot;],</span><br><span class="line">      &quot;content_security_policy&quot;: &quot;sandbox allow-scripts allow-popups; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; https://ssl.google-analytics.com/ga.js;&quot;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>修改后</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;sandbox&quot;: &#123;</span><br><span class="line">     &quot;pages&quot;: [&quot;html/tester_sandbox.html&quot;, &quot;snippet_sandbox.html&quot;],</span><br><span class="line">     &quot;content_security_policy&quot;: &quot;sandbox allow-scripts allow-popups; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; &quot;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>加载<a href="https://ssl.google-analytics.com/ga.js%E6%8A%A5%E9%94%99%EF%BC%8C%E5%8E%BB%E6%8E%89%E5%B0%B1%E5%8F%AF%E4%BB%A5">https://ssl.google-analytics.com/ga.js报错，去掉就可以</a></p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>chrome左上角点击应用，找到postman插件点击运行，成功运行如下图<br><img src="/images/chrome/chrome_2021_02_22_003.png" alt="验证"><br><img src="/images/chrome/chrome_2021_02_22_004.png" alt="验证"></p>
]]></content>
      <categories>
        <category>插件</category>
      </categories>
      <tags>
        <tag>chrome</tag>
        <tag>postman</tag>
      </tags>
  </entry>
  <entry>
    <title>chrome加载JSONView插件</title>
    <url>/%E6%8F%92%E4%BB%B6/blogs/chrome%E5%8A%A0%E8%BD%BDJSONView%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="安装环境"><span id="inline-blue">安装环境</span></span></h2><p>windows7 64</p>
<h2><span id="下载插件"><span id="inline-blue">下载插件</span></span></h2><p><a href="https://pan.baidu.com/s/1S7LpYl2kWuermDK1aZ6_Ag">https://pan.baidu.com/s/1S7LpYl2kWuermDK1aZ6_Ag</a><br>提取码：4lt1</p>
<h2><span id="加载插件"><span id="inline-blue">加载插件</span></span></h2><p>chrome地址栏访问chrome://extensions/,打开chrome扩展程序<br><img src="/images/chrome/chrome_2021_02_22_001.png" alt="扩展程序"></p>
<p>解压下载的插件压缩包，开启开发者模式，加载JSONView插件文件夹WebContent<br>插件加载路径示例</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">D:\谷歌浏览器jsonView插件\JSONView-for-Chrome-master\WebContent</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>插件加载成功，菜单栏显示如下：<br><img src="/images/chrome/chrome_jsonview_2021_02_22_001.png" alt="验证"><br>请求接口样例：<a href="https://jsonview.com/example.json">https://jsonview.com/example.json</a><br><img src="/images/chrome/chrome_jsonview_2021_02_22_002.png" alt="验证"></p>
]]></content>
      <categories>
        <category>插件</category>
      </categories>
      <tags>
        <tag>chrome</tag>
        <tag>JSONView</tag>
      </tags>
  </entry>
  <entry>
    <title>vsftpd同时监听ipv4和ipv6</title>
    <url>/FTP/blogs/vsftpd%E5%90%8C%E6%97%B6%E7%9B%91%E5%90%ACipv4%E5%92%8Cipv6/</url>
    <content><![CDATA[<h2><span id="vsftpd配置文件说明"><span id="inline-blue">vsftpd配置文件说明</span></span></h2><p>文件名称：vsftpd.conf<br>文件路径：/etc/vsftpd/vsftpd.conf<br>配置说明：<br>不监听ipv6<br>listen_ipv6=NO<br>监听ipv4<br>listen_ipv4=YES<br>listen_ipv6和listen_ipv4配置项不能同时启用，需要配置两份配置文件vsftpd.conf和vsftpd_ipv6.conf(直接拷贝一份vsftpd.conf并改名,修改对应配置项放在同级目录即可)</p>
<p>vsftpd.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#不监听ipv6</span></span></span><br><span class="line">listen_ipv6=NO</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#监听ipv4</span></span></span><br><span class="line">listen_ipv4=YES</span><br></pre></td></tr></table></figure>
<p>vsftpd_ipv6.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#监听ipv6</span></span></span><br><span class="line">listen_ipv6=YES</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#不监听ipv4</span></span></span><br><span class="line">listen_ipv4=NO</span><br></pre></td></tr></table></figure>
<h2><span id="重启vsftpd服务"><span id="inline-blue">重启vsftpd服务</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN vsftpd]# service vsftpd restart</span><br><span class="line">关闭 vsftpd：                                              [确定]</span><br><span class="line">为 vsftpd 启动 vsftpd：                                    [确定]</span><br><span class="line">为 vsftpd_ipv6 启动 vsftpd：                               [确定]</span><br></pre></td></tr></table></figure>
<h2><span id="ipv4格式"><span id="inline-blue">ipv4格式</span></span></h2><p><a href="ftp://oracle:oracle@10.9.216.12/">ftp://oracle:oracle@10.9.216.12:21</a><br><img src="/images/linux/LF_20220422_001.png" alt="ipv4格式访问"></p>
<h2><span id="ipv6格式"><span id="inline-blue">ipv6格式</span></span></h2><p>ipv6格式访问xftp需要xftp5版本支持<br><a href="ftp://oracle:oracle@[10:9:216::12]/">ftp://oracle:oracle@[10:9:216::12]:21</a><br><img src="/images/linux/LF_20220422_002.png" alt="ipv6格式访问"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>FTP</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL存储过程</title>
    <url>/MySQL/blogs/MySQL%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<h2><span id="存储过程"><span id="inline-blue">存储过程</span></span></h2><p>存储过程使用游标清理过期布局数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Navicat MySQL Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment">Source Server Version : 50560</span></span><br><span class="line"><span class="comment">Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment">Source Database       : nanjing_iepg</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Target Server Type    : MYSQL</span></span><br><span class="line"><span class="comment">Target Server Version : 50599</span></span><br><span class="line"><span class="comment">File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Date: 2022-04-12 09:59:53</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Procedure structure for `clearPubCell`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> `clearPubCell`;</span><br><span class="line">DELIMITER ;;</span><br><span class="line"><span class="keyword">CREATE</span> DEFINER<span class="operator">=</span>`root`@`<span class="operator">%</span>` <span class="keyword">PROCEDURE</span> `clearPubCell`()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">		<span class="comment">/* 存储过程使用游标清理过期发布布局Plan</span></span><br><span class="line"><span class="comment">		*	pubareaversion表同一area和version条件下只保留两个最新发布布局</span></span><br><span class="line"><span class="comment">		*	借助临时表暂存需要清理的布局planId(解决由于select查询结果为空导致游标异常退出)</span></span><br><span class="line"><span class="comment">		*	通过查询出的planId清理pubareaversion、pubcell</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">/*  游标异常停止标识  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_clear_stop_flag <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">		<span class="comment">/* 区域码  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_areaCode <span class="type">VARCHAR</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;</span><br><span class="line">		<span class="comment">/* 版本信息 */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_version <span class="type">VARCHAR</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;</span><br><span class="line">		<span class="comment">/* 任务完成标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_done <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">FALSE</span> ; </span><br><span class="line">		<span class="comment">/*  定义游标 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_cursor <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> (<span class="keyword">SELECT</span> <span class="keyword">distinct</span> areaCode,version <span class="keyword">FROM</span> pubareaversion);</span><br><span class="line">		<span class="comment">/* 循环结束标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> CONTINUE HANDLER <span class="keyword">FOR</span> <span class="keyword">NOT</span> FOUND <span class="keyword">SET</span> out_done <span class="operator">=</span> <span class="literal">TRUE</span> ; </span><br><span class="line">		<span class="comment">/* 创建临时表  记录需要清理的布局planId*/</span></span><br><span class="line">		<span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> temp_planId;</span><br><span class="line">		 <span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> temp_planId </span><br><span class="line">			(</span><br><span class="line">			 planId <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span></span><br><span class="line">			);</span><br><span class="line">		<span class="comment">/* 遍历游标 */</span></span><br><span class="line">		<span class="keyword">OPEN</span> out_cursor ; </span><br><span class="line">		WHILE <span class="keyword">NOT</span> out_done DO </span><br><span class="line">				<span class="keyword">FETCH</span> out_cursor <span class="keyword">INTO</span> v_areaCode,v_version; </span><br><span class="line">				IF <span class="keyword">NOT</span> out_done <span class="keyword">THEN</span> 	</span><br><span class="line">						REPLACE <span class="keyword">INTO</span> temp_planId</span><br><span class="line">						<span class="keyword">SELECT</span> planId</span><br><span class="line">						<span class="keyword">FROM</span> pubareaversion</span><br><span class="line">						<span class="keyword">WHERE</span> areaCode <span class="operator">=</span> v_areaCode</span><br><span class="line">						<span class="keyword">AND</span> version <span class="operator">=</span> v_version </span><br><span class="line">						<span class="keyword">ORDER</span> <span class="keyword">BY</span> updateTime</span><br><span class="line">						<span class="keyword">DESC</span> </span><br><span class="line">						LIMIT <span class="number">2</span>,<span class="number">2000</span>; <span class="comment">/* 查询从第二条记录开始的2000记录，发布布局超出2000的情况下需要做修改(limit 2,-1 这种语言高级版本MySQL已修复 ,-1表示无穷) */</span></span><br><span class="line">				<span class="keyword">END</span> IF; </span><br><span class="line">		<span class="keyword">END</span> WHILE; </span><br><span class="line">		<span class="keyword">CLOSE</span> out_cursor ;</span><br><span class="line">		<span class="comment">/* 清理pubcell、pubareaversion对应记录 */</span></span><br><span class="line">		<span class="keyword">DELETE</span> <span class="keyword">FROM</span> pubcell <span class="keyword">where</span> pubcell.planId <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> planId <span class="keyword">from</span> temp_planId );</span><br><span class="line">		<span class="keyword">DELETE</span> <span class="keyword">FROM</span> pubareaversion <span class="keyword">where</span> pubareaversion.planId <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> planId <span class="keyword">from</span> temp_planId );</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a id="download" href="/images/mysql/test.sql"><i class="fa fa-download"></i><span>测试数据脚本</span> </a></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows环境下FTP常用命令</title>
    <url>/FTP/blogs/Windows%E7%8E%AF%E5%A2%83%E4%B8%8BFTP%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blueftp%E7%99%BB%E9%99%86span"><span id="inline-blue">FTP登陆</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6span"><span id="inline-blue">上传文件</span></a><ul>
<li><a href="#span-idinline-blue%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0span"><span id="inline-blue">单个文件上传</span></a></li>
<li><a href="#span-idinline-blue%E6%89%B9%E9%87%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0span"><span id="inline-blue">批量文件上传</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6span"><span id="inline-blue">下载文件</span></a><ul>
<li><a href="#span-idinline-blue%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">单个文件下载</span></a></li>
<li><a href="#span-idinline-blue%E6%89%B9%E9%87%8F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">批量文件下载</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%88%87%E6%8D%A2%E7%9B%AE%E5%BD%95span"><span id="inline-blue">切换目录</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">查看目录信息</span></a></li>
<li><a href="#span-idinline-blue%E6%8C%87%E5%AE%9A%E6%9C%AC%E5%9C%B0%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95span"><span id="inline-blue">指定本地工作目录</span></a></li>
<li><a href="#span-idinline-blue%E8%BF%9E%E6%8E%A5%E5%92%8C%E5%85%B3%E9%97%AD%E5%91%BD%E4%BB%A4span"><span id="inline-blue">连接和关闭命令</span></a></li>
<li><a href="#span-idinline-blue%E9%80%80%E5%87%BAftp%E5%91%BD%E4%BB%A4span"><span id="inline-blue">退出FTP命令</span></a></li>
<li><a href="#span-idinline-blueftp%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">FTP命令帮助信息</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="ftp登陆"><span id="inline-blue">FTP登陆</span></span></h2><p>FTP地址:10.9.212.55<br>FTP用户名:report_cd<br>FTP密码:report_cd</p>
<p>用于上传和下载的本地工作目录:E:\program</p>
<p>运行命令行工具cmd.exe(C:\Windows\System32\cmd.exe)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">切换目录为本地工作目录(先切盘符，再<span class="built_in">cd</span>到具体路径)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">e:</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"><span class="built_in">cd</span> program</span></span><br><span class="line"><span class="meta">#</span><span class="bash">FTP登陆 IP地址或域名</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ftp 10.9.212.55</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_001.png" alt="FTP登陆"></p>
<h2><span id="上传文件"><span id="inline-blue">上传文件</span></span></h2><h3><span id="单个文件上传"><span id="inline-blue">单个文件上传</span></span></h3><p>put命令或send均可实现单个文件上传</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> put 11479.jpg</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> send 11481.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_002.png" alt="FTP上传"><br><img src="/images/Windows/FTP/WF_20220315_003.png" alt="FTP上传"></p>
<h3><span id="批量文件上传"><span id="inline-blue">批量文件上传</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将批量上传用户提示关闭(prompt命令自动切换用户提示状态)</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> prompt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">支持通配符格式</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">mput *.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_004.png" alt="FTP上传"></p>
<h2><span id="下载文件"><span id="inline-blue">下载文件</span></span></h2><h3><span id="单个文件下载"><span id="inline-blue">单个文件下载</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> get 101614000t5m.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_005.png" alt="FTP下载"></p>
<h3><span id="批量文件下载"><span id="inline-blue">批量文件下载</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> mget *.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_006.png" alt="FTP下载"></p>
<h2><span id="切换目录"><span id="inline-blue">切换目录</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">directory为对应的目录名称</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"><span class="built_in">cd</span> directory</span></span><br></pre></td></tr></table></figure>

<h2><span id="查看目录信息"><span id="inline-blue">查看目录信息</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash">ls</span></span><br></pre></td></tr></table></figure>
<h2><span id="指定本地工作目录"><span id="inline-blue">指定本地工作目录</span></span></h2><p>lcd命令可指定FTP用户的本地工作目录(上传和下载的文件均放置在这个目录)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">本地工作目录为绝对路径</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">lcd E:\program</span></span><br></pre></td></tr></table></figure>
<h2><span id="连接和关闭命令"><span id="inline-blue">连接和关闭命令</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打开连接</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">open 10.9.212.55</span></span><br><span class="line"><span class="meta">#</span><span class="bash">关闭连接</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">close 10.9.212.55</span></span><br></pre></td></tr></table></figure>

<h2><span id="退出ftp命令"><span id="inline-blue">退出FTP命令</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"><span class="built_in">bye</span></span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">quit</span></span><br></pre></td></tr></table></figure>

<h2><span id="ftp命令帮助信息"><span id="inline-blue">FTP命令帮助信息</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"><span class="built_in">help</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_007.png" alt="FTP命令帮助信息"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>FTP</tag>
      </tags>
  </entry>
  <entry>
    <title>ELK环境搭建实践</title>
    <url>/ElasticSearch/blogs/ELK%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%AE%9E%E8%B7%B5/</url>
    <content><![CDATA[<h2><span id="工具安装包下载"><span id="inline-blue">工具安装包下载</span></span></h2><p><a id="download" href="https://www.elastic.co/cn/what-is/elk-stack"><i class="fa fa-download"></i><span>elasticsearch官方地址</span> </a><br><a id="download" href="https://pan.baidu.com/s/1oaa1tRrbKokXyE1ZqEHpSg"><i class="fa fa-download"></i><span>百度云地址</span> </a>  提取码：op7h</p>
<p>Elasticsearch、logstash、kibana 三者使用同一版本7.15.1</p>
<h2><span id="elasticsearch"><span id="inline-blue">Elasticsearch</span></span></h2><pre><code>上传安装包到指定的目录 /usr/local/ELK/ </code></pre>
<p><img src="/images/elasticsearch/es_20211009_001.png" alt="ELK安装目录">    </p>
<p>解压elasticsearch安装包，cd命令进入解压目录/usr/local/ELK/elasticsearch-7.15.1</p>
<p>ElasticSearch 配置文件实例</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ======================== Elasticsearch Configuration =========================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> Elasticsearch comes with reasonable defaults for most settings.</span></span><br><span class="line"><span class="comment">#       Before you set out to tweak and tune the configuration, make sure you</span></span><br><span class="line"><span class="comment">#       understand what are you trying to accomplish and the consequences.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The primary way of configuring a node is via this file. This template lists</span></span><br><span class="line"><span class="comment"># the most important settings you may want to configure for a production cluster.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please consult the documentation for further information on configuration options:</span></span><br><span class="line"><span class="comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Cluster -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for your cluster:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-application</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ------------------------------------ Node ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node-1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Add custom attributes to the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#node.attr.rack: r1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Paths ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to directory where to store the data (separate multiple locations by comma):</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.data:</span> <span class="string">/usr/local/ELK/elasticsearch-7.15.1/data/</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to log files:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.logs:</span> <span class="string">/usr/local/ELK/elasticsearch-7.15.1/logs</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Memory -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Lock the memory on startup:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#bootstrap.memory_lock: true</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Make sure that the heap size is set to about half the memory available</span></span><br><span class="line"><span class="comment"># on the system and that the owner of the process is allowed to use this</span></span><br><span class="line"><span class="comment"># limit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Elasticsearch performs poorly when the system is swapping the memory.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Network -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch is only accessible on localhost. Set a different</span></span><br><span class="line"><span class="comment"># address here to expose this node on the network:</span></span><br><span class="line"><span class="comment">#绑定访问IP地址  </span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">10.9</span><span class="number">.216</span><span class="number">.12</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch listens for HTTP traffic on the first free port it</span></span><br><span class="line"><span class="comment"># finds starting at 9200. Set a specific HTTP port here:</span></span><br><span class="line"><span class="comment"># 访问端口</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the network module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># --------------------------------- Discovery ----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Pass an initial list of hosts to perform discovery when this node is started:</span></span><br><span class="line"><span class="comment"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span></span><br><span class="line"><span class="comment"># 集群节点IP地址</span></span><br><span class="line"><span class="attr">discovery.seed_hosts:</span> [<span class="string">&quot;10.9.216.12&quot;</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span></span><br><span class="line"><span class="comment">#节点名称</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;node-1&quot;</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the discovery and cluster formation module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Various -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Require explicit names when deleting indices:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#action.destructive_requires_name: true</span></span><br><span class="line"><span class="comment"># 解决 system call filters failed to install; check the logs and fix your configuration or disable system call filters at your own risk</span></span><br><span class="line"><span class="attr">bootstrap.system_call_filter:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># 是否支持跨域，默认为false</span></span><br><span class="line"><span class="attr">http.cors.enabled:</span> <span class="literal">true</span> </span><br><span class="line"><span class="comment"># 当设置允许跨域，默认为*,表示支持所有域名，如果我们只是允许某些网站能访问，那么可以使用正则表达式。比如只允许本地地址。 /https?:\/\/localhost(:[0-9]+)?/</span></span><br><span class="line"><span class="attr">http.cors.allow-origin:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="comment"># kibana页面警告 x设置为true则在节点上启用X-Pack安全特性，false表示禁用X-Pack安全特性。（PS：推荐明确设置这个值）</span></span><br><span class="line"><span class="attr">pack.security.enabled:</span> <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="安装head插件"><span id="inline-blue">安装head插件</span></span></h2><p>head插件地址：git://github.com/mobz/elasticsearch-head.git<br>下载之后将插件上传到Elasticsearch目录，创建一个自定义目录（放在原有plugins目录启动会报错）<br>global_plugins为自行创建目录，plugins为原有目录<br><img src="/images/elasticsearch/es_20211009_002.png" alt="head插件目录"><br>head插件启动需要nodeJs环境，没有的情况下安装一下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN global_plugins]# node -v</span><br><span class="line">v10.15.3</span><br></pre></td></tr></table></figure>

<p>ElasticSearch不能以Root用户启动，创建指定ElasticSearch用户</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加群组</span></span><br><span class="line">groupadd es</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加用户指定群组和密码</span></span><br><span class="line">useradd es -g es -p es</span><br><span class="line"><span class="meta">#</span><span class="bash"> 给对应目录赋予权限</span></span><br><span class="line">chown -R es:es /usr/local/ELK/elasticsearch-7.15.1/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到es用户</span></span><br><span class="line">su es</span><br></pre></td></tr></table></figure>

<p>更改es用户默认文件数配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/security/limits.conf </span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加如下内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> max open files config <span class="keyword">for</span> elasticsearch</span></span><br><span class="line"></span><br><span class="line">es soft noproc 65536</span><br><span class="line">es hard noproc 131072</span><br><span class="line">es soft nofile 65536</span><br><span class="line">es hard nofile 65536</span><br><span class="line"></span><br><span class="line"> vim /etc/security/limits.d/90-nproc.conf</span><br><span class="line"> </span><br><span class="line">es soft noproc 65536</span><br><span class="line">es hard noproc 131072</span><br><span class="line">es soft nofile 65536</span><br><span class="line">es hard nofile 65536</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改完上述文件重启服务器才能生效，使用ulimit -a 命令查看对应用户的参数是否生效</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-bash-4.1$ ulimit -a</span><br><span class="line">core file size          (blocks, -c) 0</span><br><span class="line">data seg size           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) 255258</span><br><span class="line">max locked memory       (kbytes, -l) 64</span><br><span class="line">max memory size         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) 65535</span><br><span class="line">pipe size            (512 bytes, -p) 8</span><br><span class="line">POSIX message queues     (bytes, -q) 819200</span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) unlimited</span><br><span class="line">cpu time               (seconds, -t) unlimited</span><br><span class="line">max user processes              (-u) 10000</span><br><span class="line">virtual memory          (kbytes, -v) unlimited</span><br><span class="line">file locks                      (-x) unlimited</span><br></pre></td></tr></table></figure>

<p>如果上述修改没有生效，可能/etc/profile 内部有做特殊指定,修改对应配置后执行source /etc/profile命令后生效(只能在当前窗口生效，之前打开的窗口没有作用)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /etc/profile</span><br><span class="line">export REDIS_HOME=/usr/local/bin/redis</span><br><span class="line">export PATH=$PATH:$REDIS_HOME/bin</span><br><span class="line"></span><br><span class="line">ulimit -u 10000</span><br><span class="line">ulimit -n 65535</span><br><span class="line">ulimit -d unlimited</span><br><span class="line">ulimit -m unlimited</span><br><span class="line">ulimit -s unlimited</span><br><span class="line">ulimit -t unlimited</span><br><span class="line">ulimit -v unlimited </span><br></pre></td></tr></table></figure>
<p>提供临时设置的命令(当前窗口生效)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -HSn 65535</span><br></pre></td></tr></table></figure>

<p>修改ElasticSearch启动jdk配置，7.15.1版本默认自带jDK，修改启动脚本，指定JDK路径ES_JAVA_HOME(必须为ES_JAVA_HOME,JAVA_HOME Elasticsearch不识别)<br>cd /usr/local/ELK/elasticsearch-7.15.1/bin</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# vim elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> CONTROLLING STARTUP:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This script relies on a few environment variables to determine startup</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> behavior, those variables are:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   ES_PATH_CONF -- Path to config directory</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   ES_JAVA_OPTS -- External Java Opts on top of the defaults <span class="built_in">set</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Optionally, exact memory values can be set using the `ES_JAVA_OPTS`. Example</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> values are <span class="string">&quot;512m&quot;</span>, and <span class="string">&quot;10g&quot;</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   ES_JAVA_OPTS=&quot;-Xms8g -Xmx8g&quot; ./bin/elasticsearch</span></span></span><br><span class="line"></span><br><span class="line">export ES_JAVA_HOME=&quot;/usr/local/ELK/elasticsearch-7.15.1/jdk&quot;</span><br><span class="line">source &quot;`dirname &quot;$0&quot;`&quot;/elasticsearch-env</span><br></pre></td></tr></table></figure>

<p>启动elsaticsearch</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-bash-4.1$ ./elasticsearch</span><br><span class="line">WARNING: A terminally deprecated method in java.lang.System has been called</span><br><span class="line">WARNING: System::setSecurityManager has been called by org.elasticsearch.bootstrap.Elasticsearch (file:/usr/local/ELK/elasticsearch-7.15.1/lib/elasticsearch-7.15.1.jar)</span><br><span class="line">WARNING: Please consider reporting this to the maintainers of org.elasticsearch.bootstrap.Elasticsearch</span><br><span class="line">WARNING: System::setSecurityManager will be removed in a future release</span><br><span class="line">/usr/local/ELK/elasticsearch-7.15.1/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libz.so.1: no version information available (required by /usr/local/ELK/elasticsearch-7.15.1/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)</span><br><span class="line">WARNING: A terminally deprecated method in java.lang.System has been called</span><br><span class="line">WARNING: System::setSecurityManager has been called by org.elasticsearch.bootstrap.Security (file:/usr/local/ELK/elasticsearch-7.15.1/lib/elasticsearch-7.15.1.jar)</span><br><span class="line">WARNING: Please consider reporting this to the maintainers of org.elasticsearch.bootstrap.Security</span><br><span class="line">WARNING: System::setSecurityManager will be removed in a future release</span><br><span class="line">[2021-11-09T11:04:38,343][INFO ][o.e.n.Node               ] [node-1] version[7.15.1], pid[24509], build[default/tar/83c34f456ae29d60e94d886e455e6a3409bba9ed/2021-10-07T21:56:19.031608185Z], OS[Linux/2.6.32-279.el6.x86_64/amd64], JVM[Eclipse Adoptium/OpenJDK 64-Bit Server VM/17/17+35]</span><br><span class="line">[2021-11-09T11:04:38,345][INFO ][o.e.n.Node               ] [node-1] JVM home [/usr/local/ELK/elasticsearch-7.15.1/jdk], using bundled JDK [true]</span><br><span class="line">[2021-11-09T11:04:38,345][INFO ][o.e.n.Node               ] [node-1] JVM arguments [-Xshare:auto, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -XX:+ShowCodeDetailsInExceptionMessages, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dio.netty.allocator.numDirectArenas=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.locale.providers=SPI,COMPAT, --add-opens=java.base/java.io=ALL-UNNAMED, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-11155009717091530414, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -Xms15963m, -Xmx15963m, -XX:MaxDirectMemorySize=8371830784, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=25, -Des.path.home=/usr/local/ELK/elasticsearch-7.15.1, -Des.path.conf=/usr/local/ELK/elasticsearch-7.15.1/config, -Des.distribution.flavor=default, -Des.distribution.type=tar, -Des.bundled_jdk=true]</span><br><span class="line">[2021-11-09T11:04:41,505][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [aggs-matrix-stats]</span><br><span class="line">[2021-11-09T11:04:41,506][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [analysis-common]</span><br></pre></td></tr></table></figure>

<p>访问验证<br><img src="/images/elasticsearch/es_20211009_003.png" alt="ElasticSearch启动验证"></p>
<p>Head插件配置，修改Elasticsearch地址<br>文件所在位置：/usr/local/ELK/elasticsearch-7.15.1/global_plugins/elasticsearch-head/_site/app.js<br>搜索localhost:9200，将其改为对应地址即可</p>
<p>Head插件启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span>/usr/<span class="built_in">local</span>/ELK/elasticsearch-7.15.1/global_plugins/elasticsearch-head</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> npm install</span></span><br><span class="line">-bash-4.1$ npm run start</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> elasticsearch-head@0.0.0 start /usr/<span class="built_in">local</span>/ELK/elasticsearch-7.15.1/global_plugins/elasticsearch-head</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> grunt server</span></span><br><span class="line"></span><br><span class="line">Running &quot;connect:server&quot; (connect) task</span><br><span class="line">Waiting forever...</span><br><span class="line">Started connect web server on http://localhost:9100</span><br></pre></td></tr></table></figure>

<p><img src="/images/elasticsearch/es_20211009_004.png" alt="head插件访问"></p>
<h2><span id="logstash安装"><span id="inline-blue">logstash安装</span></span></h2><p>解压安装包，进入对应的目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN ELK]# tar -zxvf logstash-7.15.1-linux-x86_64.tar.gz</span><br><span class="line">[root@lwdCSCDN ELK]# cd logstash-7.15.1</span><br><span class="line"><span class="meta">#</span><span class="bash">指定JDK地址</span></span><br><span class="line">[root@lwdCSCDN bin]# vim logstash</span><br><span class="line">[root@lwdCSCDN bin]# vim logstash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Run logstash</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Usage:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   bin/logstash &lt;<span class="built_in">command</span>&gt; [arguments]</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># See &#x27;bin/logstash --help&#x27; for a list of commands.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Supported environment variables:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   LS_JAVA_OPTS=<span class="string">&quot;xxx&quot;</span> to append extra options to the JVM options provided by logstash</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Development environment variables:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   DEBUG=1 to output debugging information</span></span><br><span class="line">export JAVA_HOME=&quot;/usr/local/ELK/logstash-7.15.1/jdk&quot;</span><br></pre></td></tr></table></figure>
<p>在/usr/local/ELK/logstash-7.15.1/config对应目录下，创建logstash.conf配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">input&#123;</span><br><span class="line">    file&#123;</span><br><span class="line">        path =&gt;&quot;/usr/local/ELK/logstash-7.15.1/logs/test.log&quot;</span><br><span class="line">        start_position=&gt;&quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">filter&#123;</span><br><span class="line">    grok&#123;</span><br><span class="line">        match=&gt;&#123;</span><br><span class="line">            &quot;message&quot;=&gt;&quot;%&#123;DATA:clientIp&#125; - - \[%&#123;HTTPDATE:accessTime&#125;\] \&quot;%&#123;DATA:method&#125; %&#123;DATA:requestPath&#125; %&#123;DATA:httpversion&#125;\&quot; %&#123;DATA:retcode&#125; %&#123;DATA:size&#125; \&quot;%&#123;DATA:fromHtml&#125;\&quot; \&quot;%&#123;DATA:useragent&#125;\&quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        remove_field=&gt;&quot;message&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    date&#123;</span><br><span class="line">        match=&gt;[&quot;accessTime&quot;,&quot;dd/MMM/yyyy:HH:mm:ss Z&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output&#123;</span><br><span class="line">    stdout&#123;</span><br><span class="line">        codec=&gt;rubydebug</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">input &#123;</span><br><span class="line">    stdin&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">                  hosts =&gt; [&quot;10.9.216.12:9200&quot;]</span><br><span class="line">                  index =&gt; &quot;test_index&quot;</span><br><span class="line">          &#125;</span><br><span class="line">          stdout &#123; codec =&gt; rubydebug&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建测试日志文件，与配置文件指定一致/usr/local/ELK/logstash-7.15.1/logs，日志内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ot@cdh4 test]# vim access_log.2018-04-10.log</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/css/component.css HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/EasePack.min.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/TweenLite.min.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/rAF.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/demo-1.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/img/demo-1-bg.jpg HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:30 +0800] &quot;GET / HTTP/1.1&quot; 302 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:30 +0800] &quot;GET /login HTTP/1.1&quot; 200 3271</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:36 +0800] &quot;POST /login HTTP/1.1&quot; 302 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11776</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:36 +0800] &quot;GET /static/css/font-awesome.min.css?v=4.4.0 HTTP/1.1&quot; 304 -</span><br></pre></td></tr></table></figure>

<p>logstash启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# ./logstash -f ../config/logstash.conf</span><br><span class="line">Using JAVA_HOME defined java: /usr/local/ELK/logstash-7.15.1/jdk</span><br><span class="line">WARNING, using JAVA_HOME while Logstash distribution comes with a bundled JDK</span><br><span class="line">OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.</span><br><span class="line">Sending Logstash logs to /usr/local/ELK/logstash-7.15.1/logs which is now configured via log4j2.properties</span><br><span class="line">[2021-11-09T14:48:34,143][INFO ][logstash.runner          ] Log4j configuration path used is: /usr/local/ELK/logstash-7.15.1/config/log4j2.properties</span><br><span class="line">[2021-11-09T14:48:34,188][INFO ][logstash.runner          ] Starting Logstash &#123;&quot;logstash.version&quot;=&gt;&quot;7.15.1&quot;, &quot;jruby.version&quot;=&gt;&quot;jruby 9.2.19.0 (2.5.8) 2021-06-15 55810c552b OpenJDK 64-Bit Server VM 11.0.12+7 on 11.0.12+7 +indy +jit [linux-x86_64]&quot;&#125;</span><br><span class="line">[2021-11-09T14:48:34,571][WARN ][logstash.config.source.multilocal] Ignoring the &#x27;pipelines.yml&#x27; file because modules or command line options are specified</span><br><span class="line">[2021-11-09T14:48:36,409][INFO ][logstash.agent           ] Successfully started Logstash API endpoint &#123;:port=&gt;9600&#125;</span><br><span class="line">[2021-11-09T14:48:37,287][INFO ][org.reflections.Reflections] Reflections took 138 ms to scan 1 urls, producing 120 keys and 417 values </span><br><span class="line">[2021-11-09T14:48:39,422][INFO ][logstash.outputs.elasticsearch][main] New Elasticsearch output &#123;:class=&gt;&quot;LogStash::Outputs::ElasticSearch&quot;, :hosts=&gt;[&quot;//10.9.216.12:9200&quot;]&#125;</span><br><span class="line">[2021-11-09T14:48:39,926][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch pool URLs updated &#123;:changes=&gt;&#123;:removed=&gt;[], :added=&gt;[http://10.9.216.12:9200/]&#125;&#125;</span><br><span class="line">[2021-11-09T14:48:40,123][WARN ][logstash.outputs.elasticsearch][main] Restored connection to ES instance &#123;:url=&gt;&quot;http://10.9.216.12:9200/&quot;&#125;</span><br><span class="line">[2021-11-09T14:48:40,184][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch version determined (7.15.1) &#123;:es_version=&gt;7&#125;</span><br><span class="line">[2021-11-09T14:48:40,186][WARN ][logstash.outputs.elasticsearch][main] Detected a 6.x and above cluster: the `type` event field won&#x27;t be used to determine the document _type &#123;:es_version=&gt;7&#125;</span><br><span class="line">[2021-11-09T14:48:40,414][INFO ][logstash.outputs.elasticsearch][main] Using a default mapping template &#123;:es_version=&gt;7, :ecs_compatibility=&gt;:disabled&#125;</span><br><span class="line">[2021-11-09T14:48:40,616][INFO ][logstash.javapipeline    ][main] Starting pipeline &#123;:pipeline_id=&gt;&quot;main&quot;, &quot;pipeline.workers&quot;=&gt;8, &quot;pipeline.batch.size&quot;=&gt;125, &quot;pipeline.batch.delay&quot;=&gt;50, &quot;pipeline.max_inflight&quot;=&gt;1000, &quot;pipeline.sources&quot;=&gt;[&quot;/usr/local/ELK/logstash-7.15.1/config/logstash.conf&quot;], :thread=&gt;&quot;#&lt;Thread:0xc0227a3 run&gt;&quot;&#125;</span><br><span class="line">[2021-11-09T14:48:42,101][INFO ][logstash.javapipeline    ][main] Pipeline Java execution initialization time &#123;&quot;seconds&quot;=&gt;1.48&#125;</span><br><span class="line">[2021-11-09T14:48:42,199][INFO ][logstash.inputs.file     ][main] No sincedb_path set, generating one based on the &quot;path&quot; setting &#123;:sincedb_path=&gt;&quot;/usr/local/ELK/logstash-7.15.1/data/plugins/inputs/file/.sincedb_564ad11bfc2bcd7fe5ec10ca0ee07d07&quot;, :path=&gt;[&quot;/usr/local/ELK/logstash-7.15.1/logs/test.log&quot;]&#125;</span><br><span class="line">WARNING: An illegal reflective access operation has occurred</span><br><span class="line">WARNING: Illegal reflective access by com.jrubystdinchannel.StdinChannelLibrary$Reader (file:/usr/local/ELK/logstash-7.15.1/vendor/bundle/jruby/2.5.0/gems/jruby-stdin-channel-0.2.0-java/lib/jruby_stdin_channel/jruby_stdin_channel.jar) to field java.io.FilterInputStream.in</span><br><span class="line">WARNING: Please consider reporting this to the maintainers of com.jrubystdinchannel.StdinChannelLibrary$Reader</span><br><span class="line">WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations</span><br><span class="line">WARNING: All illegal access operations will be denied in a future release</span><br><span class="line">[2021-11-09T14:48:42,292][INFO ][logstash.javapipeline    ][main] Pipeline started &#123;&quot;pipeline.id&quot;=&gt;&quot;main&quot;&#125;</span><br><span class="line">The stdin plugin is now waiting for input:</span><br><span class="line">[2021-11-09T14:48:42,375][INFO ][logstash.agent           ] Pipelines running &#123;:count=&gt;1, :running_pipelines=&gt;[:main], :non_running_pipelines=&gt;[]&#125;</span><br><span class="line">[2021-11-09T14:48:42,381][INFO ][filewatch.observingtail  ][main][9a1656b2353e9b2608f8d58d6e356237ac498ca7b95fbed910c53ba565f0606a] START, creating Discoverer, Watch with file and sincedb collections</span><br></pre></td></tr></table></figure>
<p>-f 参数指定启动配置文件<br>启动成功后，logstash监控控制台输出，在控制台随意输入一些信息，logstash会将信息存入Elasticsearch,可以通过Head插件查看</p>
<h2><span id="kibana安装"><span id="inline-blue">kibana安装</span></span></h2><p>解压对应安装包，进入对应目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN ELK]# tar -zxvf kibana-7.15.1-linux-x86_64.tar.gz</span><br><span class="line">[root@lwdCSCDN ELK]# cd kibana-7.15.1-linux-x86_64</span><br><span class="line"><span class="meta">#</span><span class="bash">编辑配置文件，配置ElasticSearch地址、修改语言配置、启用默认端口</span></span><br><span class="line">[root@lwdCSCDN config]# vim /usr/local/ELK/kibana-7.15.1-linux-x86_64/config/kibana.yml</span><br><span class="line"><span class="meta">#</span><span class="bash"> Kibana is served by a back end server. This setting specifies the port to use.</span></span><br><span class="line">server.port: 5601</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies the address to <span class="built_in">which</span> the Kibana server will <span class="built_in">bind</span>. IP addresses and host names are both valid values.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> The default is <span class="string">&#x27;localhost&#x27;</span>, <span class="built_in">which</span> usually means remote machines will not be able to connect.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To allow connections from remote users, <span class="built_in">set</span> this parameter to a non-loopback address.</span></span><br><span class="line">server.host: &quot;0.0.0.0&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enables you to specify a path to mount Kibana at <span class="keyword">if</span> you are running behind a proxy.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Use the `server.rewriteBasePath` setting to tell Kibana <span class="keyword">if</span> it should remove the basePath</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> from requests it receives, and to prevent a deprecation warning at startup.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This setting cannot end <span class="keyword">in</span> a slash.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.basePath: <span class="string">&quot;&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies whether Kibana should rewrite requests that are prefixed with</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> `server.basePath` or require that they are rewritten by your reverse proxy.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This setting was effectively always `<span class="literal">false</span>` before Kibana 6.3 and will</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> default to `<span class="literal">true</span>` starting <span class="keyword">in</span> Kibana 7.0.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.rewriteBasePath: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies the public URL at <span class="built_in">which</span> Kibana is available <span class="keyword">for</span> end users. If</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> `server.basePath` is configured this URL should end with the same basePath.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.publicBaseUrl: <span class="string">&quot;&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The maximum payload size <span class="keyword">in</span> bytes <span class="keyword">for</span> incoming server requests.</span></span><br><span class="line">server.maxPayload: 1048576</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The Kibana server<span class="string">&#x27;s name.  This is used for display purposes.</span></span></span><br><span class="line">server.name: &quot;kibana&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The URLs of the Elasticsearch instances to use <span class="keyword">for</span> all your queries.</span></span><br><span class="line">elasticsearch.hosts: [&quot;http://10.9.216.12:9200&quot;]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Kibana uses an index <span class="keyword">in</span> Elasticsearch to store saved searches, visualizations and</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> dashboards. Kibana creates a new index <span class="keyword">if</span> the index doesn<span class="string">&#x27;t already exist.</span></span></span><br><span class="line">kibana.index: &quot;.kibana&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The default application to load.</span></span><br><span class="line">kibana.defaultAppId: &quot;home&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> If your Elasticsearch is protected with basic authentication, these settings provide</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the username and password that the Kibana server uses to perform maintenance on the Kibana</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> index at startup. Your Kibana users still need to authenticate with Elasticsearch, <span class="built_in">which</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is proxied through the Kibana server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.username: <span class="string">&quot;kibana_system&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.password: <span class="string">&quot;pass&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Kibana can also authenticate to Elasticsearch via <span class="string">&quot;service account tokens&quot;</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> If may use this token instead of a username/password.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> elasticsearch.serviceAccountToken: <span class="string">&quot;my_token&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enables SSL and paths to the PEM-format SSL certificate and SSL key files, respectively.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> These settings <span class="built_in">enable</span> SSL <span class="keyword">for</span> outgoing requests from the Kibana server to the browser.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.ssl.enabled: <span class="literal">false</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.ssl.certificate: /path/to/your/server.crt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.ssl.key: /path/to/your/server.key</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Optional settings that provide the paths to the PEM-format SSL certificate and key files.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> These files are used to verify the identity of Kibana to Elasticsearch and are required when</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> xpack.security.http.ssl.client_authentication <span class="keyword">in</span> Elasticsearch is <span class="built_in">set</span> to required.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.certificate: /path/to/your/client.crt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.key: /path/to/your/client.key</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Optional setting that enables you to specify a path to the PEM file <span class="keyword">for</span> the certificate</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> authority <span class="keyword">for</span> your Elasticsearch instance.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.certificateAuthorities: [ <span class="string">&quot;/path/to/your/CA.pem&quot;</span> ]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> To disregard the validity of SSL certificates, change this setting<span class="string">&#x27;s value to &#x27;</span>none<span class="string">&#x27;.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.verificationMode: full</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Time <span class="keyword">in</span> milliseconds to <span class="built_in">wait</span> <span class="keyword">for</span> Elasticsearch to respond to pings. Defaults to the value of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the elasticsearch.requestTimeout setting.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.pingTimeout: 1500</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Time <span class="keyword">in</span> milliseconds to <span class="built_in">wait</span> <span class="keyword">for</span> responses from the back end or Elasticsearch. This value</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> must be a positive <span class="built_in">integer</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.requestTimeout: 30000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> List of Kibana client-side headers to send to Elasticsearch. To send *no* client-side</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> headers, <span class="built_in">set</span> this value to [] (an empty list).</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.requestHeadersWhitelist: [ authorization ]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Header names and values that are sent to Elasticsearch. Any custom headers cannot be overwritten</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by client-side headers, regardless of the elasticsearch.requestHeadersWhitelist configuration.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.customHeaders: &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Time <span class="keyword">in</span> milliseconds <span class="keyword">for</span> Elasticsearch to <span class="built_in">wait</span> <span class="keyword">for</span> responses from shards. Set to 0 to <span class="built_in">disable</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.shardTimeout: 30000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Logs queries sent to Elasticsearch. Requires logging.verbose <span class="built_in">set</span> to <span class="literal">true</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.logQueries: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies the path <span class="built_in">where</span> Kibana creates the process ID file.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pid.file: /run/kibana/kibana.pid</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enables you to specify a file <span class="built_in">where</span> Kibana stores <span class="built_in">log</span> output.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.dest: stdout</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the value of this setting to <span class="literal">true</span> to suppress all logging output.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.silent: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the value of this setting to <span class="literal">true</span> to suppress all logging output other than error messages.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.quiet: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the value of this setting to <span class="literal">true</span> to <span class="built_in">log</span> all events, including system usage information</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and all requests.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.verbose: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the interval <span class="keyword">in</span> milliseconds to sample system and process performance</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> metrics. Minimum is 100ms. Defaults to 5000.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ops.interval: 5000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies locale to be used <span class="keyword">for</span> all localizable strings, dates and number formats.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Supported languages are the following: English - en , by default , Chinese - zh-CN .</span></span><br><span class="line">i18n.locale: &quot;zh-CN&quot;</span><br></pre></td></tr></table></figure>
<p>启动kibana </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# cd /usr/local/ELK/kibana-7.15.1-linux-x86_64/bin</span><br><span class="line">[root@lwdCSCDN bin]# ./kibana</span><br><span class="line">启动报错，提示缺失文件</span><br><span class="line">![kibana启动报错](/images/elasticsearch/es_20211009_005.png)</span><br><span class="line">glibc版本升级到glibc-2.17</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">cd</span>到该路径下</span></span><br><span class="line">cd /usr/local</span><br><span class="line"><span class="meta">#</span><span class="bash">下载</span></span><br><span class="line">wget https://ftp.gnu.org/gnu/glibc/glibc-2.17.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">解压</span></span><br><span class="line">tar -zxvf glibc-2.17.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">进入到解压文件中</span></span><br><span class="line"><span class="meta">#</span><span class="bash">创建路径</span></span><br><span class="line">mkdir build  </span><br><span class="line"><span class="meta">#</span><span class="bash">进入到build路径下</span></span><br><span class="line">../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin</span><br><span class="line"><span class="meta">#</span><span class="bash">安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>验证</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN lib64stdc]# strings /lib64/libc.so.6|grep GLIBC</span><br><span class="line">GLIBC_2.2.5</span><br><span class="line">GLIBC_2.2.6</span><br><span class="line">GLIBC_2.3</span><br><span class="line">GLIBC_2.3.2</span><br><span class="line">GLIBC_2.3.3</span><br><span class="line">GLIBC_2.3.4</span><br><span class="line">GLIBC_2.4</span><br><span class="line">GLIBC_2.5</span><br><span class="line">GLIBC_2.6</span><br><span class="line">GLIBC_2.7</span><br><span class="line">GLIBC_2.8</span><br><span class="line">GLIBC_2.9</span><br><span class="line">GLIBC_2.10</span><br><span class="line">GLIBC_2.11</span><br><span class="line">GLIBC_2.12</span><br><span class="line">GLIBC_2.13</span><br><span class="line">GLIBC_2.14</span><br><span class="line">GLIBC_2.15</span><br><span class="line">GLIBC_2.16</span><br><span class="line">GLIBC_2.17</span><br><span class="line">GLIBC_PRIVATE</span><br></pre></td></tr></table></figure>
<p>lib64stdc++升级到gcc4.8<br><a id="download" href="http://ftp.de.debian.org/debian/pool/main/g/gcc-4.8/"><i class="fa fa-download"></i><span>gcc4.8下载地址</span> </a><br>服务器创建临时目录lib64stdc，上传压缩包解压</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">[root@lwdCSCDN lib64stdc]# ar -x lib64stdc++6-4.8-dbg_4.8.4-1_i386.deb</span><br><span class="line">[root@lwdCSCDN lib64stdc]# tar xvf data.tar.xz </span><br><span class="line">[root@lwdCSCDN lib64stdc]# cd usr/lib64/debug/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 覆盖/usr/lib、/usr/lib64对应库文件</span></span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so /usr/lib</span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so /usr/lib64</span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so.6 /usr/lib</span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so.6 /usr/lib64</span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证</span></span><br><span class="line">[root@lwdCSCDN debug]# strings /usr/lib/libstdc++.so.6 | grep GLIBCXX</span><br><span class="line">GLIBCXX_3.4</span><br><span class="line">GLIBCXX_3.4.1</span><br><span class="line">GLIBCXX_3.4.2</span><br><span class="line">GLIBCXX_3.4.3</span><br><span class="line">GLIBCXX_3.4.4</span><br><span class="line">GLIBCXX_3.4.5</span><br><span class="line">GLIBCXX_3.4.6</span><br><span class="line">GLIBCXX_3.4.7</span><br><span class="line">GLIBCXX_3.4.8</span><br><span class="line">GLIBCXX_3.4.9</span><br><span class="line">GLIBCXX_3.4.10</span><br><span class="line">GLIBCXX_3.4.11</span><br><span class="line">GLIBCXX_3.4.12</span><br><span class="line">GLIBCXX_3.4.13</span><br><span class="line">GLIBCXX_3.4.14</span><br><span class="line">GLIBCXX_3.4.15</span><br><span class="line">GLIBCXX_3.4.16</span><br><span class="line">GLIBCXX_3.4.17</span><br><span class="line">GLIBCXX_3.4.18</span><br><span class="line">GLIBCXX_3.4.19</span><br><span class="line">GLIBCXX_DEBUG_MESSAGE_LENGTH</span><br></pre></td></tr></table></figure>
<p>重新启动成功</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# ./kibana --allow-root</span><br><span class="line">  log   [10:25:07.263] [info][plugins-service] Plugin &quot;metricsEntities&quot; is disabled.</span><br><span class="line">  log   [10:25:07.508] [info][server][Preboot][http] http server running at http://0.0.0.0:5601</span><br><span class="line">  log   [10:25:07.788] [warning][config][deprecation] plugins.scanDirs is deprecated and is no longer used</span><br><span class="line">  log   [10:25:07.789] [warning][config][deprecation] &quot;kibana.index&quot; is deprecated. Multitenancy by changing &quot;kibana.index&quot; will not be supported starting in 8.0. See https://ela.st/kbn-remove-legacy-multitenancy for more details</span><br><span class="line">  log   [10:25:07.789] [warning][config][deprecation] kibana.defaultAppId is deprecated and will be removed in 8.0. Please use the `defaultRoute` advanced setting instead</span><br><span class="line">  log   [10:25:07.790] [warning][config][deprecation] Config key [monitoring.cluster_alerts.email_notifications.email_address] will be required for email notifications to work in 8.0.&quot;</span><br><span class="line">  log   [10:25:07.790] [warning][config][deprecation] &quot;xpack.reporting.roles&quot; is deprecated. Granting reporting privilege through a &quot;reporting_user&quot; role will not be supported starting in 8.0. Please set &quot;xpack.reporting.roles.enabled&quot; to &quot;false&quot; and grant reporting privileges to users using Kibana application privileges **Management &gt; Security &gt; Roles**.</span><br><span class="line">  log   [10:25:07.790] [warning][config][deprecation] Session idle timeout (&quot;xpack.security.session.idleTimeout&quot;) will be set to 1 hour by default in the next major version (8.0).</span><br></pre></td></tr></table></figure>
<p>访问kibana主页<br><a href="http://10.9.216.12:5601/app/home#/">http://10.9.216.12:5601/app/home#/</a></p>
<p><img src="/images/elasticsearch/es_20211009_006.png" alt="kibana启动报错"></p>
]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
        <tag>logstash</tag>
        <tag>kibana</tag>
      </tags>
  </entry>
  <entry>
    <title>Jetty修改端口号</title>
    <url>/Jetty/blogs/jetty%E4%BF%AE%E6%94%B9%E7%AB%AF%E5%8F%A3/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><p>文件名称：start.ini<br>文件路径：jetty安装目录下（/usr/local/jetty_home）<br>#文件内搜索对应标识jetty.port</p>
<p><img src="/images/jetty/jetty_2021_06_10_001.png" alt="jetty变更端口号"></p>
]]></content>
      <categories>
        <category>Jetty</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>windows环境Docker拉取mysql镜像</title>
    <url>/docker/blogs/window%E7%8E%AF%E5%A2%83Docker%E6%8B%89%E5%8F%96mysql%E9%95%9C%E5%83%8F/</url>
    <content><![CDATA[<h1><span id="拉取镜像">拉取镜像</span></h1><p><img src="/images/docker/docker_2021_06_07_015.png" alt="docker拉取mysql镜像01"></p>
<h1><span id="镜像参数设置">镜像参数设置</span></h1><h2><span id="密码参数">密码参数</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">MYSQL_ROOT_PASSWORD=coship</span><br></pre></td></tr></table></figure>
<p><img src="/images/docker/docker_2021_06_07_016.png" alt="docker拉取mysql镜像02"></p>
<h1><span id="镜像运行">镜像运行</span></h1><p><img src="/images/docker/docker_2021_06_07_017.png" alt="docker拉取mysql镜像03"></p>
<h2><span id="远程连接权限设置">远程连接权限设置</span></h2><p><img src="/images/docker/docker_2021_06_07_018.png" alt="docker拉取mysql镜像04"><br>镜像运行成功后生成MySQL端口和IP地址映射192.168.99.100:32772<br>点击EXEC按钮生成mysql命令行窗口,登陆mysql并赋予远程登陆权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">	mysql -uroot -pcoship;</span><br><span class="line">	GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;coship&#x27; WITH GRA</span><br><span class="line">NT OPTION;</span><br></pre></td></tr></table></figure>
<h2><span id="navicate连接">navicate连接</span></h2><p>设置对应参数测试连接<br><img src="/images/docker/docker_2021_06_07_019.png" alt="docker拉取mysql镜像05"></p>
]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx代理</title>
    <url>/nginx/blogs/nginx%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84span"><span id="inline-blue">代理访问路径</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E8%AF%A6%E6%83%85span"><span id="inline-blue">配置详情</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="代理访问路径"><span id="inline-blue">代理访问路径</span></span></h2><p>图片真实访问地址：<a href="http://10.9.216.12:8070/upload.war/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png">http://10.9.216.12:8070/upload.war/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</a></p>
<p>代理访问地址：<a href="http://10.9.216.12:8888/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png">http://10.9.216.12:8888/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</a></p>
<h2><span id="配置详情"><span id="inline-blue">配置详情</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       8888; //代理访问的端口</span><br><span class="line">        server_name  10.9.216.12;//代理访问的IP地址</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location /upload &#123;</span><br><span class="line">            proxy_pass http://10.9.216.12:8070/upload.war/; //代理访问路径</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">		//proxy_pass参数路径分隔符作用</span><br><span class="line">		//访问/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</span><br><span class="line">		//代理以&quot;/&quot;结束</span><br><span class="line">		//将匹配到的/upload去掉之后拼接到代理访问路径的后面，访问效果http://10.9.216.12:8070/upload.war/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</span><br><span class="line">		//代理不以&quot;/&quot;结束</span><br><span class="line">		//将匹配到的访问路径直接拼接到代理路径的后面，访问效果http://10.9.216.12:8070/upload.war/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo添加hexo-neat插件</title>
    <url>/hexo/Next/blogs/hexo%E6%B7%BB%E5%8A%A0hexo-neat%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-neat --save</span><br></pre></td></tr></table></figure>
<h2><span id="站点配置"><span id="inline-blue">站点配置</span></span></h2><p>hexo _config.yml文件添加</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> hexo-neat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 博文压缩</span></span><br><span class="line">neat_enable: true</span><br><span class="line"><span class="meta">#</span><span class="bash"> 压缩html</span></span><br><span class="line">neat_html:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line"><span class="meta">#</span><span class="bash"> 压缩css</span>  </span><br><span class="line">neat_css:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;**/*.min.css&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 压缩js</span></span><br><span class="line">neat_js:</span><br><span class="line">  enable: true</span><br><span class="line">  mangle: true</span><br><span class="line">  output:</span><br><span class="line">  compress:</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;**/*.min.js&#x27;</span><br><span class="line">	- &#x27;**/*.min.css&#x27;</span><br><span class="line">    - &#x27;**/jquery.fancybox.pack.js&#x27;</span><br><span class="line">    - &#x27;**/index.js&#x27;</span><br><span class="line">	- &#x27;**/comments.gitalk.js&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hexo</category>
        <category>Next</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo设置图片懒加载</title>
    <url>/hexo/Next/blogs/hexo%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/</url>
    <content><![CDATA[<h2><span id="下载样式"><span id="inline-blue">下载样式</span></span></h2><p>在主题文件夹下的scripts文件夹里,新增一个js文件，名字可以任意。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>); </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyloadImg</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> LZ= cheerio.load(source, &#123;</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//遍历所有 img 标签，添加data-original属性</span></span><br><span class="line">    LZ(<span class="string">&#x27;img&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, element</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> oldsrc = LZ(element).attr(<span class="string">&#x27;src&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (oldsrc) &#123;</span><br><span class="line">            LZ(element).removeAttr(<span class="string">&#x27;src&#x27;</span>);</span><br><span class="line">            LZ(element).attr(&#123;</span><br><span class="line">                </span><br><span class="line">                 <span class="string">&#x27;data-original&#x27;</span>: oldsrc</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> LZ.html();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在渲染之前，更改 img 标签</span></span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_render:html&#x27;</span>, lazyloadImg);</span><br></pre></td></tr></table></figure>

<p>打开themes/next/source/js/src/utils.js文件,找到lazyLoadPostsImages函数对应位置，将函数内容替换为以下内容。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">lazyLoadPostsImages: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).lazyload(&#123;</span><br><span class="line">	   <span class="comment">//设置懒加载你默认占位图,自己下载一张加载图片放在hexo/themes/next/source/images路径下，名称//为loading.gif</span></span><br><span class="line">         placeholder: <span class="string">&#x27;/images/loading.gif&#x27;</span>,</span><br><span class="line">		 <span class="comment">// 加载效果</span></span><br><span class="line">        effect: <span class="string">&#x27;fadeIn&#x27;</span>,</span><br><span class="line">        threshold : <span class="number">100</span>, <span class="comment">//设置图片在距离屏幕200px时提前加载</span></span><br><span class="line">        failure_limit : <span class="number">20</span>,<span class="comment">//将 failurelimit 设为 20 ，当插件找到 20 //个不在可见区域的图片时停止搜索 </span></span><br><span class="line">        skip_invisible : <span class="literal">false</span> <span class="comment">// 加载隐藏图片</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>hexo</category>
        <category>Next</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo设置下载样式</title>
    <url>/hexo/blogs/hexo%E6%B7%BB%E5%8A%A0%E4%B8%8B%E8%BD%BD%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="下载样式">下载样式</span></h2><p>打开themes/next/source/css/_custom 下的 custom.styl 文件,添加属性样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-id">#download</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: inline-block;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">background</span>: transparent;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line"><span class="attribute">transition</span>: all .<span class="number">5s</span> ease;</span><br><span class="line"><span class="attribute">font-weight</span>: bold;</span><br><span class="line">&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在你需要编辑的文章地方。放置如下代码</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;a id=&quot;download&quot; href=&quot;http://mirrors.aliyun.com/docker-toolbox/windows/docker-toolbox/?spm=5176.8351553.0.0.4bc61991tQpsnV&quot;&gt;&lt;i class=&quot;fa fa-download&quot;&gt;&lt;/i&gt;&lt;span&gt; 阿里云Docker镜像&lt;/span&gt; &lt;/a&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>windows实现nginx反向代理</title>
    <url>/nginx/blogs/windows%E5%AE%9E%E7%8E%B0nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE"><span id="inline-blue">nginx代理设置</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">nginx下载</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">nginx代理设置</span></a></li>
<li><a href="#span-idinline-blue%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%AA%8C%E8%AF%81span"><span id="inline-blue">反向代理验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><h1><span id="nginx代理设置"><span id="inline-blue">nginx代理设置</span></span></h1><p>windows 7<br>nginx-1.16.1</p>
<h1><span id="nginx下载"><span id="inline-blue">nginx下载</span></span></h1><p><a href="http://nginx.org/en/download.html">官方下载地址</a><br>笔者使用的nginx-1.16.1版本</p>
<a id="more"></a>

<h1><span id="nginx代理设置"><span id="inline-blue">nginx代理设置</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &lt;span id=&quot;inline-blue&quot;&gt;http下server子节点设置&lt;/span&gt;</span></span><br><span class="line">server &#123;</span><br><span class="line">        listen       8089; <span class="comment">#nginx监听访问端口号</span></span><br><span class="line">        server_name  10.9.212.55; <span class="comment">#监听访问IP</span></span><br><span class="line"></span><br><span class="line">        charset gbk,utf-8; <span class="comment">#编码设置</span></span><br><span class="line"></span><br><span class="line">        access_log  logs/host.access.log ; <span class="comment">#访问日志存放位置</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">			charset gbk,utf-8;</span><br><span class="line">			autoindex on; <span class="comment">#开启目录浏览功能</span></span><br><span class="line">            root  H:/home/report_cd/; <span class="comment">#代理本地FTP用户访问路径</span></span><br><span class="line">			proxy_connect_timeout 1;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="反向代理验证"><span id="inline-blue">反向代理验证</span></span></h1><p><img src="/images/nginx/nginx_20210107_05.png" alt="nginx反向代理验证"></p>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>windows注册Elasticsearch服务</title>
    <url>/ElasticSearch/blogs/windows%E6%B3%A8%E5%86%8CElasticsearch%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">elasticsearch下载</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E6%B3%A8%E5%86%8Cspan"><span id="inline-blue">elasticsearch注册</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">elasticsearch服务自启动设置</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E6%9C%8D%E5%8A%A1%E9%AA%8C%E8%AF%81span"><span id="inline-blue">elasticsearch服务验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>windows 7<br>elasticsearch-2.4.4</p>
<h1><span id="elasticsearch下载"><span id="inline-blue">elasticsearch下载</span></span></h1><p><a href="https://www.elastic.co/cn/downloads/past-releases/elasticsearch-2-4-4">官方下载地址</a><br>笔者使用的elasticsearch-2.4.4版本</p>
<h1><span id="elasticsearch注册"><span id="inline-blue">elasticsearch注册</span></span></h1><p>1.运行windows cmd命令，进入nginx安装目录D:\ElasticSearch.2.4.4\elasticsearch-2.4.4\elasticsearch-2.4.4\bin</p>
<p>2.执行注册服务命令 elasticsearch.bat install</p>
<p>3.如果需要卸载elasticsearch服务，执行elasticsearch.bat uninstall</p>
<h1><span id="elasticsearch服务自启动设置"><span id="inline-blue">elasticsearch服务自启动设置</span></span></h1><p><img src="/images/elasticsearch/es_20201231_01.png" alt="elasticsearch服务设置"><br><img src="/images/elasticsearch/es_20201231_02.png" alt="elasticsearch服务设置"></p>
<h1><span id="elasticsearch服务验证"><span id="inline-blue">elasticsearch服务验证</span></span></h1><p><img src="/images/elasticsearch/es_20201231_03.png" alt="elasticsearch服务验证"></p>
]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title>windows注册nginx服务</title>
    <url>/nginx/blogs/windows%E6%B3%A8%E5%86%8Cnginx%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">nginx下载</span></a></li>
<li><a href="#span-idinline-blue%E6%B3%A8%E5%86%8C%E5%B7%A5%E5%85%B7span"><span id="inline-blue">注册工具</span></a></li>
<li><a href="#span-idinline-bluenginx%E6%B3%A8%E5%86%8Cspan"><span id="inline-blue">nginx注册</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83%E8%B0%83%E8%AF%95span"><span id="inline-blue">环境调试</span></a></li>
<li><a href="#span-idinline-bluenginx%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">nginx服务自启动设置</span></a></li>
<li><a href="#span-idinline-bluenginx%E6%9C%8D%E5%8A%A1%E9%AA%8C%E8%AF%81span"><span id="inline-blue">nginx服务验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>windows 7<br>nginx-1.16.1<br>winsw-2.0.2-bin.exe</p>
<h1><span id="nginx下载"><span id="inline-blue">nginx下载</span></span></h1><p><a href="http://nginx.org/en/download.html">官方下载地址</a><br>笔者使用的nginx-1.16.1版本</p>
<h1><span id="注册工具"><span id="inline-blue">注册工具</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">官方下载地址：http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw/</span><br><span class="line">笔者使用的2.0.2版本</span><br></pre></td></tr></table></figure>
<h1><span id="nginx注册"><span id="inline-blue">nginx注册</span></span></h1><p>1.将nginx解压至指定安装位置,D:\nginx-1.16.1\nginx-1.16.1<br><img src="/images/nginx/nginx_20201231_01.png" alt="nginx安装目录"></p>
<p>2.将winsw-2.0.2-bin.exe复制到nginx目录：D:\nginx-1.16.1\nginx-1.16.1,并将其改成nginx-service.exe </p>
<p>3.新建一个xml文件nginx-service.xml,内容如下,注意里面目录对应关系</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>nginx<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nginx Service<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>High Performance Nginx Service<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logpath</span>&gt;</span>D:\nginx-1.16.1\nginx-1.16.1\logs<span class="tag">&lt;/<span class="name">logpath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">log</span> <span class="attr">mode</span>=<span class="string">&quot;roll-by-size&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sizeThreshold</span>&gt;</span>10240<span class="tag">&lt;/<span class="name">sizeThreshold</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">keepFiles</span>&gt;</span>8<span class="tag">&lt;/<span class="name">keepFiles</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">log</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executable</span>&gt;</span>D:\nginx-1.16.1\nginx-1.16.1\nginx.exe<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">startarguments</span>&gt;</span>-p D:\nginx-1.16.1\nginx-1.16.1\Nginx<span class="tag">&lt;/<span class="name">startarguments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stopexecutable</span>&gt;</span>D:\nginx-1.16.1\nginx-1.16.1\nginx.exe<span class="tag">&lt;/<span class="name">stopexecutable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stoparguments</span>&gt;</span>-p D:\nginx-1.16.1\nginx-1.16.1\Nginx -s stop<span class="tag">&lt;/<span class="name">stoparguments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>4.运行windows cmd命令，进入nginx安装目录，执行nginx注册服务命令nginx-service.exe install，如果注册没有成功需要执行nginx卸载命令：nginx-service.exe uninstall</p>
<h1><span id="环境调试"><span id="inline-blue">环境调试</span></span></h1><p>1.如果nginx启动没有成功，需要根据nginx启动日志定位错误信息，日志文件所在位置D:\nginx-1.16.1\nginx-1.16.1\logs,大部分情况下是端口和配置文件目录设置问题。</p>
<h1><span id="nginx服务自启动设置"><span id="inline-blue">nginx服务自启动设置</span></span></h1><p>运行windows cmd命令，找到nginx服务，右键属性可配置nginx启动方式。<br><img src="/images/nginx/nginx_20201231_02.png" alt="nginx服务验证"><br><img src="/images/nginx/nginx_20201231_03.png" alt="nginx服务验证"></p>
<h1><span id="nginx服务验证"><span id="inline-blue">nginx服务验证</span></span></h1><p><img src="/images/nginx/nginx_20201231_04.png" alt="nginx服务验证"></p>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>windows注册Redis服务</title>
    <url>/Redis/blogs/windows%E6%B3%A8%E5%86%8Credis%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blueredis%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">Redis下载</span></a></li>
<li><a href="#span-idinline-blueredis%E6%B3%A8%E5%86%8Cspan"><span id="inline-blue">Redis注册</span></a></li>
<li><a href="#span-idinline-blueredis%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">Redis服务自启动设置</span></a></li>
<li><a href="#span-idinline-blueredis%E6%9C%8D%E5%8A%A1%E9%AA%8C%E8%AF%81span"><span id="inline-blue">Redis服务验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>windows 7<br>Redis-x64-3.2.100</p>
<h1><span id="redis下载"><span id="inline-blue">Redis下载</span></span></h1><p><a href="https://github.com/microsoftarchive/redis/releases">下载地址</a><br>笔者使用的Redis-x64-3.2.100版本</p>
<h1><span id="redis注册"><span id="inline-blue">Redis注册</span></span></h1><p>1.运行windows cmd命令，进入Redis安装目录D:\redis_3.2.100\Redis-x64-3.2.100</p>
<p>2.执行注册服务命令 redis-server –service-install redis.windows-service.conf </p>
<p>3.如果需要卸载Redis服务，执行redis-server –service-uninstall</p>
<h1><span id="redis服务自启动设置"><span id="inline-blue">Redis服务自启动设置</span></span></h1><p><img src="/images/redis/20210104_01.png" alt="Redis服务设置"></p>
<h1><span id="redis服务验证"><span id="inline-blue">Redis服务验证</span></span></h1><p><img src="/images/redis/20210104_02.png" alt="Redis服务验证"></p>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows创建FTP</title>
    <url>/FTP/blogs/Windows%E5%88%9B%E5%BB%BAFTP/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp%E7%94%A8%E6%88%B7span"><span id="inline-blue">创建FTP用户</span></a></li>
<li><a href="#span-idinline-blue%E5%BC%80%E5%90%AFftp%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">开启FTP服务</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp_server%E7%BD%91%E7%AB%99span"><span id="inline-blue">创建FTP_SERVER网站</span></a></li>
<li><a href="#span-idinline-blueftp_server%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0ftp%E7%AB%99%E7%82%B9span"><span id="inline-blue">FTP_SERVER网站添加FTP站点</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%E5%85%B1%E4%BA%ABspan"><span id="inline-blue">设置访问路径共享</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81ftp%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AEspan"><span id="inline-blue">验证FTP用户访问</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="创建ftp用户"><span id="inline-blue">创建FTP用户</span></span></h2><ol>
<li>打开计算机管理，依次打开本地用户和组-&gt;用户，右键新增用户，用户和密码自行定义即可，选项设置用户不可更改密码和密码永不过期</li>
</ol>
<p><img src="/images/Windows/FTP/WF_20201230_01.png" alt="新建用户"><br><img src="/images/Windows/FTP/WF_20201230_02.png" alt="用户信息"></p>
<ol start="2">
<li>创建FTP用户report_cd对应的目录H:\home\report_cd</li>
</ol>
<p><img src="/images/Windows/FTP/WF_20201230_04.png" alt="用户工作目录"></p>
<h2><span id="开启ftp服务"><span id="inline-blue">开启FTP服务</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_03.png" alt="开启FTP服务"></p>
<h2><span id="创建ftp_server网站"><span id="inline-blue">创建FTP_SERVER网站</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_05.png" alt="创建FTP_SERVER"></p>
<h2><span id="ftp_server网站添加ftp站点"><span id="inline-blue">FTP_SERVER网站添加FTP站点</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_06.png" alt="创建FTP_SERVER"><br><img src="/images/Windows/FTP/WF_20201230_07.png" alt="创建FTP_SERVER"></p>
<h2><span id="设置访问路径共享"><span id="inline-blue">设置访问路径共享</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_08.png" alt="创建FTP_SERVER"></p>
<h2><span id="验证ftp用户访问"><span id="inline-blue">验证FTP用户访问</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ftp://report_cd:report_cd@10.9.212.55:21</span><br></pre></td></tr></table></figure>

<p><img src="/images/Windows/FTP/WF_20201230_09.png" alt="验证"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>FTP</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux创建FTP</title>
    <url>/FTP/blogs/linux%E5%88%9B%E5%BB%BAFTP/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp%E7%94%A8%E6%88%B7%E7%BB%84span"><span id="inline-blue">创建FTP用户组</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp%E7%94%A8%E6%88%B7span"><span id="inline-blue">创建FTP用户</span></a></li>
<li><a href="#span-idinline-bluevsftpd%E5%8F%82%E6%95%B0%E5%8F%8A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">vsftpd参数及配置文件说明</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="创建ftp用户组"><span id="inline-blue">创建FTP用户组</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">添加ftp用户组</span></span><br><span class="line">groupadd ftp</span><br></pre></td></tr></table></figure>
<h2><span id="创建ftp用户"><span id="inline-blue">创建FTP用户</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">useradd -G ftp -d /home/oracle -s /sbin/nologin  oracle</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -G 指定用户所在用户组</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 指定用户工作目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -s  /sbin/nologin 不允许用户xshell方式登陆</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> oracle 创建FTP用户名</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置用户密码</span></span><br><span class="line">passwd oracle</span><br></pre></td></tr></table></figure>
<h2><span id="vsftpd参数及配置文件说明"><span id="inline-blue">vsftpd参数及配置文件说明</span></span></h2><p>ftpusers: 用户黑名单<br>user_list: 用户是否受到限制只能访问主目录，与参数chroot_local_user配合使用，chroot_local_user=yes,表示user_list里面的用户不受限制，chroot_local_user=NO,表示user_list里面的用户受限制，只能访问主目录<br>chroot_list：表示FTP用户只能访问自己的工作目录，与参数chroot_list_enable和chroot_list_file配合使用</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/linux/ftp_20211118_001.png" alt="FTP验证"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>FTP</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx基本命令</title>
    <url>/nginx/blogs/nginx%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0nginx%E8%87%AA%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6span"><span id="inline-blue">添加nginx自启动文件</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90span"><span id="inline-blue">添加文件可执行权限</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E5%BC%80%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8span"><span id="inline-blue">设置开启自启动</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E6%98%AF%E5%90%A6%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9Fspan"><span id="inline-blue">验证服务是否添加成功</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E8%AF%A2nginx%E6%98%AF%E5%90%A6%E5%90%AF%E5%8A%A8span"><span id="inline-blue">查询nginx是否启动</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BDnginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6span"><span id="inline-blue">重新加载nginx配置文件</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2nginx%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">停止nginx服务</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="添加nginx自启动文件"><span id="inline-blue">添加nginx自启动文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#文件内容参考nginx官网设置,https://www.nginx.com/resources/wiki/start/topics/examples/redhatnginxinit/ ,注意修改其中nginx可执行文件路径和指定配置文件路径</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># vim /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="添加文件可执行权限"><span id="inline-blue">添加文件可执行权限</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chmod a+x /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="设置开启自启动"><span id="inline-blue">设置开启自启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig --add /etc/init.d/nginx</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig nginx on</span></span><br></pre></td></tr></table></figure>

<h2><span id="验证服务是否添加成功"><span id="inline-blue">验证服务是否添加成功</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx start;</span></span><br><span class="line">正在启动 nginx：                                           [确定]</span><br></pre></td></tr></table></figure>

<h2><span id="查询nginx是否启动"><span id="inline-blue">查询nginx是否启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># ps -ef | grep nginx</span></span><br><span class="line">root     19139     1  0 17:58 ?        00:00:00 nginx: master process /usr/<span class="built_in">local</span>/nginx/sbin/nginx -c /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line">root     19140 19139  0 17:58 ?        00:00:00 nginx: worker process                                          </span><br><span class="line">root     19226 15760  0 17:59 pts/0    00:00:00 grep nginx</span><br></pre></td></tr></table></figure>


<h2><span id="重新加载nginx配置文件"><span id="inline-blue">重新加载nginx配置文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx reload</span></span><br><span class="line">nginx: the configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line">重新载入 nginx：                                           [确定]</span><br><span class="line">You have new mail <span class="keyword">in</span> /var/spool/mail/root</span><br></pre></td></tr></table></figure>

<h2><span id="停止nginx服务"><span id="inline-blue">停止nginx服务</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx stop</span></span><br><span class="line">停止 nginx：                                               [确定]</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx常用启动命令</title>
    <url>/nginx/blogs/nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%90%AF%E5%8A%A8span"><span id="inline-blue">启动</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2span"><span id="inline-blue">停止</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BDspan"><span id="inline-blue">重新加载</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="启动"><span id="inline-blue">启动</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./nginx </span><br><span class="line">./nginx -c dir(指定配置文件所在路径)</span><br></pre></td></tr></table></figure>

<h1><span id="停止"><span id="inline-blue">停止</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./nginx -s quit /nginx处理完任务后停止</span><br><span class="line">./nginx -s stop /强制停止nginx进程</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="重新加载"><span id="inline-blue">重新加载</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./nginx -s reload /重新加载nginx.cnf配置文件</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx,linux</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx开机自启动</title>
    <url>/nginx/blogs/nginx%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0nginx%E8%87%AA%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6span"><span id="inline-blue">添加nginx自启动文件</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90span"><span id="inline-blue">添加文件可执行权限</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E5%BC%80%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8span"><span id="inline-blue">设置开启自启动</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E6%98%AF%E5%90%A6%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9Fspan"><span id="inline-blue">验证服务是否添加成功</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E8%AF%A2nginx%E6%98%AF%E5%90%A6%E5%90%AF%E5%8A%A8span"><span id="inline-blue">查询nginx是否启动</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BDnginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6span"><span id="inline-blue">重新加载nginx配置文件</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2nginx%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">停止nginx服务</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="添加nginx自启动文件"><span id="inline-blue">添加nginx自启动文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#文件内容参考nginx官网设置,https://www.nginx.com/resources/wiki/start/topics/examples/redhatnginxinit/ ,注意修改其中nginx可执行文件路径和指定配置文件路径</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># vim /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="添加文件可执行权限"><span id="inline-blue">添加文件可执行权限</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chmod a+x /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="设置开启自启动"><span id="inline-blue">设置开启自启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig --add /etc/init.d/nginx</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig nginx on</span></span><br></pre></td></tr></table></figure>

<h2><span id="验证服务是否添加成功"><span id="inline-blue">验证服务是否添加成功</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx start;</span></span><br><span class="line">正在启动 nginx：                                           [确定]</span><br></pre></td></tr></table></figure>

<h2><span id="查询nginx是否启动"><span id="inline-blue">查询nginx是否启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># ps -ef | grep nginx</span></span><br><span class="line">root     19139     1  0 17:58 ?        00:00:00 nginx: master process /usr/<span class="built_in">local</span>/nginx/sbin/nginx -c /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line">root     19140 19139  0 17:58 ?        00:00:00 nginx: worker process                                          </span><br><span class="line">root     19226 15760  0 17:59 pts/0    00:00:00 grep nginx</span><br></pre></td></tr></table></figure>


<h2><span id="重新加载nginx配置文件"><span id="inline-blue">重新加载nginx配置文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx reload</span></span><br><span class="line">nginx: the configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line">重新载入 nginx：                                           [确定]</span><br><span class="line">You have new mail <span class="keyword">in</span> /var/spool/mail/root</span><br></pre></td></tr></table></figure>

<h2><span id="停止nginx服务"><span id="inline-blue">停止nginx服务</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx stop</span></span><br><span class="line">停止 nginx：                                               [确定]</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx,linux</tag>
      </tags>
  </entry>
  <entry>
    <title>docker阿里云镜像</title>
    <url>/docker/blogs/window7%E5%AE%89%E8%A3%85docker/</url>
    <content><![CDATA[<p><a id="download" href="http://mirrors.aliyun.com/docker-toolbox/windows/docker-toolbox/?spm=5176.8351553.0.0.4bc61991tQpsnV"><i class="fa fa-download"></i><span>阿里云Docker镜像</span> </a></p>
]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker,indows</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 导入导出</title>
    <url>/MySQL/blogs/MySQL%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8span"><span id="inline-blue">导出数据库中的表</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E4%BA%8B%E5%8A%A1span"><span id="inline-blue">导出数据库中的存储过程和事务</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84%E5%92%8C%E6%95%B0%E6%8D%AEspan"><span id="inline-blue">导入数据库表结构和数据</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="导出数据库中的表"><span id="inline-blue">导出数据库中的表</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p report_hrb140 <span class="operator">&gt;</span> report_hrb140.sql;</span><br></pre></td></tr></table></figure>



<h1><span id="导出数据库中的存储过程和事务"><span id="inline-blue">导出数据库中的存储过程和事务</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>pcoship <span class="operator">-</span>ntd <span class="operator">-</span>R report_hrb121<span class="operator">&gt;</span> report_hrb121_FP.sql;</span><br><span class="line"></span><br><span class="line">其中<span class="operator">-</span>ntd代表导入存储过程。<span class="operator">-</span>R代表导入功能函数。</span><br></pre></td></tr></table></figure>



<h1><span id="导入数据库表结构和数据"><span id="inline-blue">导入数据库表结构和数据</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line">password:<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">mysql<span class="operator">&gt;</span>use 数据库(数据库的名称)</span><br><span class="line">然后使用source命令,后面参数为脚本文件(report_hrb140.sql)</span><br><span class="line">mysql<span class="operator">&gt;</span>source report_hrb140.sql;</span><br><span class="line">导入存储过程及事务的<span class="keyword">SQL</span>命令：</span><br><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line">password:<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">mysql<span class="operator">&gt;</span>use 数据库(数据库的名称)</span><br><span class="line">然后使用source命令,后面参数为脚本文件(report_hrb121_FP.sql)</span><br><span class="line">mysql<span class="operator">&gt;</span>source report_hrb121_FP.sql;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle清理系统僵死SQl进程</title>
    <url>/Oracle/blogs/Oracle%E6%B8%85%E7%90%86%E7%B3%BB%E7%BB%9F%E5%83%B5%E6%AD%BBSQL%E8%BF%9B%E7%A8%8B/</url>
    <content><![CDATA[<h2><span id="清理"><span id="inline-blue">清理</span></span></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> l.session_id sid,  </span><br><span class="line">       s.serial#,  </span><br><span class="line">       l.locked_mode 锁模式,  </span><br><span class="line">       l.oracle_username 登录用户,  </span><br><span class="line">       l.os_user_name 登录机器用户名,  </span><br><span class="line">       s.machine 机器名,  </span><br><span class="line">       s.terminal 终端用户名,  </span><br><span class="line">       o.object_name 被锁对象名,  </span><br><span class="line">       s.logon_time 登录数据库时间  </span><br><span class="line"><span class="keyword">FROM</span> v$locked_object l, all_objects o, v$session s  </span><br><span class="line"><span class="keyword">WHERE</span> l.object_id <span class="operator">=</span> o.object_id  </span><br><span class="line">   <span class="keyword">AND</span> l.session_id <span class="operator">=</span> s.sid  </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sid, s.serial#; </span><br><span class="line"></span><br><span class="line">kill掉当前的锁对象</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> kill session sid,serial<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure>



<p>​</p>
]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle启动与停止</title>
    <url>/Oracle/blogs/Oracle%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%81%9C%E6%AD%A2/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%90%AF%E5%8A%A8span"><span id="inline-blue">启动</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2span"><span id="inline-blue">停止</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="启动"><span id="inline-blue">启动</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> su – oracle</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> sqlplus /nolog</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> conn / as sysdba</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> startup (一般不需要加参数，只要设置好环境变量）</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> quit (退出sql模式)</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl start (启动监听器）关闭oracle</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl status</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl stop(关闭监听器，在这之前，应该先关闭应用程序）</span> </span><br></pre></td></tr></table></figure>



<p>​    </p>
<h2><span id="停止"><span id="inline-blue">停止</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">su - oracle</span><br><span class="line"><span class="meta">$</span><span class="bash">lsnrctl stop;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sqlplus /nolog</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> conn / as sysdba</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> shutdown immediate</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle查看表空间使用情况</title>
    <url>/Oracle/blogs/Oracle%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%A9%BA%E9%97%B4%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/</url>
    <content><![CDATA[<h2><span id="统计"><span id="inline-blue">统计</span></span></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.tablespace_name &quot;表空间名&quot;,</span><br><span class="line">a.bytes <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> &quot;表空间大小(M)&quot;,</span><br><span class="line">(a.bytes <span class="operator">-</span> b.bytes) <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> &quot;已使用空间(M)&quot;,</span><br><span class="line">b.bytes <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> &quot;空闲空间(M)&quot;,</span><br><span class="line">round(((a.bytes <span class="operator">-</span> b.bytes) <span class="operator">/</span> a.bytes) <span class="operator">*</span> <span class="number">100</span>, <span class="number">2</span>) &quot;使用比&quot;</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> tablespace_name, <span class="built_in">sum</span>(bytes) bytes</span><br><span class="line"><span class="keyword">FROM</span> dba_data_files</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> tablespace_name) a,</span><br><span class="line">(<span class="keyword">SELECT</span> tablespace_name, <span class="built_in">sum</span>(bytes) bytes, <span class="built_in">max</span>(bytes) largest</span><br><span class="line"><span class="keyword">FROM</span> dba_free_space</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> tablespace_name) b</span><br><span class="line"><span class="keyword">WHERE</span> a.tablespace_name <span class="operator">=</span> b.tablespace_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ((a.bytes <span class="operator">-</span> b.bytes) <span class="operator">/</span> a.bytes) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>



<p>​</p>
]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcat 指定启动JDK版本</title>
    <url>/Tomcat/blogs/tomcat%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8jdk%E7%89%88%E6%9C%AC/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">假设jdk版本7，目录为/home/user1/jdk</span><br><span class="line">进入到tomcat的bin目录下，修改setclasspath.sh文件，在文件首部添加两行代码</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=/home/user/jdk</span><br><span class="line">export JRE_HOME=/home/user/jdk/jre</span><br></pre></td></tr></table></figure>



<h2><span id="windows"><span id="inline-blue">windows</span></span></h2><p>修改bin目录下的setclasspath.bat文件，注意linux的是sh，Windows的是bat。将上述两行代码的export换成set填入该文件首部保存（注意实际路径的替换）</p>
]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>Jetty 指定启动JDK版本</title>
    <url>/Jetty/blogs/jetty%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8jdk%E7%89%88%E6%9C%AC/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">文件名称：setenv.sh 文件路径：/usr/<span class="built_in">local</span>/</span><br><span class="line">文件头部添加以下内容：</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.6.0_21</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/usr/java/jdk1.6.0_21/jre</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Jetty</category>
      </categories>
      <tags>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL运算符对NULL值处理</title>
    <url>/MySQL/blogs/MySQL%E8%BF%90%E7%AE%97%E7%AC%A6%E5%AF%B9null%E5%80%BC%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<ol>
<li><p>A,B,C作为列名时</p>
<p>​    任意一项为null 则A+B+C为null;</p>
</li>
<li><p>count对于null值处理;</p>
<p>​    count(*)包含null项；count(具体列名)忽略null项;count(null)为0</p>
</li>
<li><p>avg,max,min,sum对于null值处理</p>
<p>​    计算时全部忽略null项;对于avg(null),max(null),min(null),sum(null)为null</p>
</li>
<li><p>group by对于null值处理</p>
<p>​    将其单独作为一项置于首位</p>
<p>​    distinct对于null值处理与group by类似</p>
</li>
</ol>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Jboss 指定启动JDK版本</title>
    <url>/Jboss/blogs/jboss%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8jdk%E7%89%88%E6%9C%AC/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">文件名称：run.conf  文件路径：/usr/<span class="built_in">local</span>/jboss-5.1.0.GA/bin</span><br><span class="line">文件头部添加以下内容：</span><br><span class="line">JAVA_HOME=<span class="string">&quot;/usr/java/jdk1.6.0&quot;</span></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle导入导出</title>
    <url>/Oracle/blogs/Oracle%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#%E5%AF%BC%E5%85%A5">导入</a><ul>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E8%A1%A8%E7%A9%BA%E9%97%B4span"><span id="inline-blue">查看所有用户表空间</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%92%8C%E7%B4%A2%E5%BC%95%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95span"><span id="inline-blue">创建数据和索引存储文件目录</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%94%A8%E6%88%B7%E5%B9%B6%E8%B5%8B%E4%BA%88%E6%9D%83%E9%99%90span"><span id="inline-blue">创建对应用户并赋予权限</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%85%A5%E5%91%BD%E4%BB%A4span"><span id="inline-blue">导入命令</span></a></li>
</ul>
</li>
<li><a href="#%E5%AF%BC%E5%87%BA">导出</a><ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95span"><span id="inline-blue">创建导出数据文件目录</span></a></li>
<li><a href="#span-idinline-blue%E6%89%A7%E8%A1%8C%E5%AF%BC%E5%87%BA%E5%91%BD%E4%BB%A4span"><span id="inline-blue">执行导出命令</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="导入">导入</span></h1><h2><span id="查看所有用户表空间"><span id="inline-blue">查看所有用户表空间</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM DBA_USERS  &#x2F;*查看用户及其表空间信息 *&#x2F;</span><br><span class="line"></span><br><span class="line">drop user SDP_CMS_HRB cascade; &#x2F;* 级联删除用户信息*&#x2F;</span><br><span class="line"></span><br><span class="line">DROP TABLESPACE SDP_CMS_HRB_DATA including contents and datafiles cascade constraint; &#x2F;* 删除用户所在的表空间*&#x2F;</span><br></pre></td></tr></table></figure>

<p>​    </p>
<h2><span id="创建数据和索引存储文件目录"><span id="inline-blue">创建数据和索引存储文件目录</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create tablespace SDP_CMS_HRB_DATA datafile &#39;$ORACLE_BASE&#x2F;oradata&#x2F;SDP_CMS_HRB_DATA.dbf&#39; size 500M autoextend on next 12M maxsize unlimited;</span><br><span class="line">create tablespace SDP_CMS_HRB_IDX datafile &#39;$ORACLE_BASE&#x2F;oradata&#x2F;SDP_CMS_HRB_IDX.dbf&#39; size 500M autoextend on next 12M maxsize unlimited;</span><br></pre></td></tr></table></figure>



<h2><span id="创建对应用户并赋予权限"><span id="inline-blue">创建对应用户并赋予权限</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create user SDP_CMS_HRB identified by SDP_CMS_HRB default tablespace SDP_CMS_HRB_DATA temporary tablespace TEMP profile DEFAULT;</span><br><span class="line"></span><br><span class="line">grant connect,resource to SDP_CMS_HRB; </span><br><span class="line">grant create any sequence to SDP_CMS_HRB; </span><br><span class="line">grant create any table to SDP_CMS_HRB; </span><br><span class="line">grant delete any table to SDP_CMS_HRB; </span><br><span class="line">grant insert any table to SDP_CMS_HRB; </span><br><span class="line">grant select any table to SDP_CMS_HRB; </span><br><span class="line">grant unlimited tablespace to SDP_CMS_HRB; </span><br><span class="line">grant execute any procedure to SDP_CMS_HRB; </span><br><span class="line">grant update any table to SDP_CMS_HRB; </span><br><span class="line">grant create any view to SDP_CMS_HRB; </span><br><span class="line">grant dba to SDP_CMS_HRB;</span><br></pre></td></tr></table></figure>



<h2><span id="导入命令"><span id="inline-blue">导入命令</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">impdp  SDP_CMS_HRB&#x2F;SDP_CMS_HRB  DIRECTORY&#x3D;IMPDIR  DUMPFILE&#x3D;SDP_CMS _2020081010.dmp remap_schema&#x3D;SDP_CMS:SDP_CMS_HRB remap_tablespace&#x3D;SDP_CMS_DATA:SDP_CMS_HRB_DATA,SDP_CMS_DATA:SDP_CMS_HRB_IDX</span><br></pre></td></tr></table></figure>

<p>​    remap_schema:利用remap_schema可以把源数据库下SDP_CMS用户的数据迁移到目标数据库的SDP_CMS_HRB用户下。</p>
<p>​    remap_tablespace:将导出SDP_CMS _2020081010.dmp 文件中的SDP_CMS_DATA表空间 导入到目标库的 SDP_CMS_HRB_DATA中指定表空间(包含数据文件和索引文件)，导入命令执行之前必须确保引用脚本存在。</p>
<p>查看Oracle 用户对应目录命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM DBA_Directories &#x2F;* 查看用户相关的目录信息 *&#x2F;</span><br></pre></td></tr></table></figure>

<p><img src="/images/oracle/oracle_20201118.png" alt="oracle数据库目录信息"></p>
<h1><span id="导出">导出</span></h1><h2><span id="创建导出数据文件目录"><span id="inline-blue">创建导出数据文件目录</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create directory DATA_EXPDP_DIR as &#39;&#x2F;tmp&#39;; </span><br></pre></td></tr></table></figure>

<h2><span id="执行导出命令"><span id="inline-blue">执行导出命令</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">expdp \&#39;&#x2F; as sysdba\&#39; schemas&#x3D;SDP_CMS_HRB DIRECTORY&#x3D;DATA_EXPDP_DIR DUMPFILE&#x3D;SDP_CMS_HRBBAK_20200607.DMP LOGFILE&#x3D;SDP_CMS_HRBBAK_20200607.LOG</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcat 启动配置优化</title>
    <url>/Tomcat/blogs/tomcat%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h2><span id="内存优化"><span id="inline-blue">内存优化</span></span></h2><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">文件名称：catalina.sh </span><br><span class="line">文件路径：/usr/local/guangdong/ERMproxy/apache-tomcat-6.0.13/bin</span><br><span class="line">JAVA_OPTS=&quot;-Djava.awt.headless=true -Xms1024m -Xmx2048m -XX:PermSize=256M -XX:MaxNewSize=256m -XX:MaxPermSize=256m -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+HeapDumpOnOutOfMemoryError&quot;</span><br></pre></td></tr></table></figure>



<h2><span id="连接数优化"><span id="inline-blue">连接数优化</span></span></h2><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">文件名称：server.xml  </span><br><span class="line">文件路径：/usr/local/guangdong/ERMproxy/apache-tomcat-6.0.13/conf</span><br><span class="line">&lt;Connector connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; maxThreads=&quot;2000&quot; minSpareThreads=&quot;100&quot; maxSpareThreads=&quot;1000&quot; minProcessors=&quot;100&quot; maxProcessors=&quot;1000&quot; compression=&quot;on&quot; compressionMinSize=&quot;2048&quot; compressableMimeType=&quot;text/html,text/xml,text/javascript,text/css,text/plain&quot;  redirectPort=&quot;8443&quot;/&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="启动参数优化"><span id="inline-blue">启动参数优化</span></span></h2><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">文件名称：catalina.properties </span><br><span class="line">文件路径：/usr/local/guangdong/ERMproxy/apache-tomcat-6.0.13/conf</span><br><span class="line"></span><br><span class="line">1.找到代码tomcat.util.scan.StandardJarScanFilter.jarsToScan=\</span><br><span class="line">2.这行代码下面的jar包的都是需要扫描的，这也是导致tomcat启动过慢的元凶，所以删除下面的jar包即可</span><br><span class="line">3.将tomcat.util.scan.StandardJarScanFilter.jarsToScan=\修改为tomcat.util.scan.StandardJarScanFilter.jarsToSkip=*.jar</span><br><span class="line">4.修改完之后保存回到eclipse删除以前的tomcat配置，并重新配置</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
</search>
