<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Linux-文件传输</title>
    <url>/Linux/blogs/Linux-%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blueftp%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">ftp命令 </span></a></li>
<li><a href="#span-idinline-bluersync%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">rsync命令 </span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="ftp命令"><span id="inline-blue">ftp命令 </span></span></h2><p><strong>作用</strong><br>    本地和远程服务器之间上传和下载文件，实现两端服务通信。</p>
<p><strong>选项</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-d 开启debug模式</span><br><span class="line">-i 关闭交互模式（不再询问用户）</span><br><span class="line">-n 禁用自动登陆</span><br><span class="line">-v 显示详细操作信息</span><br><span class="line">-g 关闭文件名替换</span><br><span class="line">-t 激活数据包跟踪</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demomdn ~]# ftp 10.9.212.55</span><br><span class="line">Connected to 10.9.212.55.</span><br><span class="line">220 Microsoft FTP Service</span><br><span class="line">504 Security mechanism not implemented.</span><br><span class="line">Name (10.9.212.55:root): report_cd     </span><br><span class="line">331 Password required for report_cd.</span><br><span class="line">Password:</span><br><span class="line">230 User logged in.</span><br><span class="line">Remote system type is Windows_NT.</span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> dir</span></span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,83).</span><br><span class="line">125 Data connection already open; Transfer starting.</span><br><span class="line">03-15-22  05:18PM                27446 11479.jpg</span><br><span class="line">03-15-22  05:24PM                24242 11481.jpg</span><br><span class="line">03-15-22  05:29PM                57438 11597.jpg</span><br><span class="line">03-15-22  05:29PM                 3710 13683.jpg</span><br><span class="line">03-15-22  05:29PM                 9836 14716.jpg</span><br><span class="line">03-15-22  05:29PM                47496 15221.jpg</span><br><span class="line">03-15-22  05:29PM                29992 15475.jpg</span><br><span class="line">03-15-22  05:29PM                52790 16238.jpg</span><br><span class="line">03-15-22  05:29PM                52735 16393.jpg</span><br><span class="line">03-15-22  05:29PM                23356 16636.jpg</span><br><span class="line">04-22-22  09:23AM       &lt;DIR&gt;          aspnet_client</span><br><span class="line">08-02-20  09:41PM       &lt;DIR&gt;          oms-pic</span><br><span class="line">12-30-20  05:40PM       &lt;DIR&gt;          upload</span><br><span class="line">10-15-21  02:28PM       &lt;DIR&gt;          verms</span><br><span class="line">226 Transfer complete.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">下载文件，16636.jpg存放在登陆FTP的当前目录下</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> get 16636.jpg</span></span><br><span class="line">local: 16636.jpg remote: 16636.jpg</span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,96).</span><br><span class="line">125 Data connection already open; Transfer starting.</span><br><span class="line">WARNING! 70 bare linefeeds received in ASCII mode</span><br><span class="line">File may not have transferred correctly.</span><br><span class="line">226 Transfer complete.</span><br><span class="line">23356 bytes received in 0.05 seconds (4.6e+02 Kbytes/s)</span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> quit</span></span><br><span class="line">221 Goodbye.</span><br><span class="line">[root@demomdn ~]# ls</span><br><span class="line">16636.jpg        Downloads  Pictures         sda1.blktrace.2  sda1.blktrace.7  sda4.blktrace.4  Templates</span><br><span class="line">anaconda-ks.cfg  ftp        Public           sda1.blktrace.3  sda4.blktrace.0  sda4.blktrace.5  Videos</span><br><span class="line">boss.0.json      ISSClient  receiveMsg       sda1.blktrace.4  sda4.blktrace.1  sda4.blktrace.6  VirtualBox VMs</span><br><span class="line">Desktop          logs       sda1.blktrace.0  sda1.blktrace.5  sda4.blktrace.2  sda4.blktrace.7</span><br><span class="line">Documents        Music      sda1.blktrace.1  sda1.blktrace.6  sda4.blktrace.3  store</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">上传文件16637.jpg，16637.jpg文件位于登陆ftp的当前目录下</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> put 16637.jpg</span>     </span><br><span class="line">local: 16637.jpg remote: 16637.jpg</span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,149).</span><br><span class="line">125 Data connection already open; Transfer starting.</span><br><span class="line">226 Transfer complete.</span><br><span class="line">23425 bytes sent in 0.0021 seconds (1.1e+04 Kbytes/s)</span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> dir</span></span><br><span class="line">227 Entering Passive Mode (10,9,212,55,203,151).</span><br><span class="line">150 Opening ASCII mode data connection.</span><br><span class="line">03-15-22  05:18PM                27446 11479.jpg</span><br><span class="line">03-15-22  05:24PM                24242 11481.jpg</span><br><span class="line">03-15-22  05:29PM                57438 11597.jpg</span><br><span class="line">03-15-22  05:29PM                 3710 13683.jpg</span><br><span class="line">03-15-22  05:29PM                 9836 14716.jpg</span><br><span class="line">03-15-22  05:29PM                47496 15221.jpg</span><br><span class="line">03-15-22  05:29PM                29992 15475.jpg</span><br><span class="line">03-15-22  05:29PM                52790 16238.jpg</span><br><span class="line">03-15-22  05:29PM                52735 16393.jpg</span><br><span class="line">03-15-22  05:29PM                23356 16636.jpg</span><br><span class="line">01-29-23  04:48PM                23425 16637.jpg</span><br><span class="line">04-22-22  09:23AM       &lt;DIR&gt;          aspnet_client</span><br><span class="line">08-02-20  09:41PM       &lt;DIR&gt;          oms-pic</span><br><span class="line">12-30-20  05:40PM       &lt;DIR&gt;          upload</span><br><span class="line">10-15-21  02:28PM       &lt;DIR&gt;          verms</span><br><span class="line">226 Transfer complete.</span><br></pre></td></tr></table></figure>

<h2><span id="rsync命令"><span id="inline-blue">rsync命令 </span></span></h2><p><strong>作用</strong><br>    rsync命令来自于英文词组“remote sync”的缩写，其功能是用于远程数据同步。rsync命令能够基于网络（含局域网和互联网）快速的实现多台主机间的文件同步工作，并与scp或ftp发送完整文件不同，rsync有独立的文件内容差异算法，会在传送前对两个文件进行比较，只传送两者内容间的差异部分，因此速度更快。</p>
<p><strong>选项</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-v	详细模式输出</span><br><span class="line">-z	压缩文件</span><br><span class="line">-o	保留文件原始所有者身份</span><br><span class="line">-g	保留文件原始所有组身份</span><br><span class="line">-p	保留文件原始权限信息</span><br><span class="line">-b	备份目标文件</span><br><span class="line">-r	递归目录文件（传输目录内的子文件）</span><br><span class="line">-d	不递归目录文件（不传输目录内的子文件）</span><br><span class="line">-P	显示进度信息</span><br><span class="line">-q	精简输出模式</span><br><span class="line">-h	显示帮助信息</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看本地同步文件内容</span></span><br><span class="line">[root@lwdCSCDN /]rsync rsync_dir1</span><br><span class="line"><span class="meta">#</span><span class="bash">查看远程同步文件内容</span></span><br><span class="line">[root@lwdCSCDN /]rsync 10.9.216.12:/tmp</span><br><span class="line"><span class="meta">#</span><span class="bash">同步本地文件夹</span></span><br><span class="line">[root@lwdCSCDN /]rsync -r rsync_dir1 rsync_dir2</span><br><span class="line"><span class="meta">#</span><span class="bash">同步远程文件夹</span></span><br><span class="line">[root@lwdCSCDN /]rsync -r rsync_dir1 10.9.216.12:/rsync_dir2</span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux-系统管理</title>
    <url>/Linux/blogs/Linux-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluereboot%E5%91%BD%E4%BB%A4span"><span id="inline-blue">reboot命令</span></a></li>
<li><a href="#span-idinline-bluesleep%E5%91%BD%E4%BB%A4span"><span id="inline-blue">sleep命令</span></a></li>
<li><a href="#span-idinline-bluetop%E5%91%BD%E4%BB%A4span"><span id="inline-blue">top命令</span></a></li>
<li><a href="#span-idinline-bluewho%E5%91%BD%E4%BB%A4span"><span id="inline-blue">who命令</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="reboot命令"><span id="inline-blue">reboot命令</span></span></h2><p><strong>作用</strong><br>重启<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-n ：直接重启，不保存当前资料</span><br><span class="line">-w : 重启过程记录日志</span><br><span class="line">-d ：重启过程不记录日志</span><br><span class="line">-f : 强制重启</span><br><span class="line">-i : 关闭网络服务，然后重启</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN local]# reboot</span><br></pre></td></tr></table></figure>


<h2><span id="sleep命令"><span id="inline-blue">sleep命令</span></span></h2><p><strong>作用</strong><br>延迟当前命令执行<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--help ：帮助信息</span><br><span class="line">--version :版本信息</span><br><span class="line">-number ：时间长度后面可跟单位smhd</span><br><span class="line">-smhd : s秒 m分钟 h小时 d天</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示系统当前时间，休眠10秒钟，再次显示时间</span></span><br><span class="line">[root@lwdCSCDN local]# date;sleep 10s;date</span><br><span class="line">2022年 06月 02日 星期四 17:30:04 CST</span><br><span class="line">2022年 06月 02日 星期四 17:30:14 CST</span><br></pre></td></tr></table></figure>



<h2><span id="top命令"><span id="inline-blue">top命令</span></span></h2><p><strong>作用</strong><br>实时显示系统运行状态<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-d ：改变更新速度</span><br><span class="line">-c ：切换显示模式</span><br><span class="line">-s ：安全模式，不进行交互指令</span><br><span class="line">-i ：不显示任何闲置或僵死进程</span><br><span class="line">-n ：设置显示的次数，完成后退出</span><br><span class="line">-b ：批处理模式，不进行交互时显示</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安全模式下,批量处理每隔4秒输出一次统计结果</span></span><br><span class="line">[root@lwdCSCDN local]# top -d 4 -c -s -i -n 6 -b</span><br><span class="line">top - 17:39:17 up  8:42,  2 users,  load average: 0.06, 0.05, 0.01</span><br><span class="line">Tasks: 305 total,   1 running, 304 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Cpu(s):  0.7%us,  0.2%sy,  0.0%ni, 98.8%id,  0.2%wa,  0.0%hi,  0.0%si,  0.0%st</span><br><span class="line">Mem:  32693060k total, 12640504k used, 20052556k free,   580116k buffers</span><br><span class="line">Swap: 16777208k total,        0k used, 16777208k free,  3290016k cached</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                      </span><br><span class="line">12051 root      20   0 15272 1328  892 R  1.9  0.0   0:00.01 top -d 4 -c -s -i -n 6 -b                                                    </span><br><span class="line"> ***  Delay time Not changed  *** </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="who命令"><span id="inline-blue">who命令</span></span></h2><p><strong>作用</strong><br>查看当前登陆用户信息<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a ：全面信息</span><br><span class="line">-b : 系统启动时间</span><br><span class="line">-d ：已死掉进程</span><br><span class="line">-l : 系统登录进程</span><br><span class="line">-H :  带有列标题打印用户名、终端和时间</span><br><span class="line">-t : 上次锁定时间</span><br><span class="line">-u : 查看已登录用户</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看已登录用户</span></span><br><span class="line">[root@demomdn local]# who -u -H</span><br><span class="line">NAME     LINE         TIME             IDLE          PID COMMENT</span><br><span class="line">root     pts/0        2022-06-08 08:54 08:26       18361 (10.9.212.70)</span><br><span class="line">root     pts/1        2022-06-08 17:05 00:33       22909 (10.9.212.52)</span><br><span class="line">root     pts/2        2022-06-08 15:06   .         21935 (10.9.212.55)</span><br><span class="line"><span class="meta">#</span><span class="bash">查看系统启动时间</span></span><br><span class="line">[root@demomdn local]# who -b</span><br><span class="line">system boot  2022-06-07 09:00</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux-文件管理</title>
    <url>/Linux/blogs/Linux-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluestrings%E5%91%BD%E4%BB%A4span"><span id="inline-blue">strings命令</span></a></li>
<li><a href="#span-idinline-blueunlink%E5%91%BD%E4%BB%A4span"><span id="inline-blue">unlink命令</span></a></li>
<li><a href="#span-idinline-bluechown%E5%91%BD%E4%BB%A4span"><span id="inline-blue">chown命令</span></a></li>
<li><a href="#span-idinline-bluestat%E5%91%BD%E4%BB%A4span"><span id="inline-blue">stat命令</span></a></li>
<li><a href="#span-idinline-bluewhich%E5%91%BD%E4%BB%A4"><span id="inline-blue">which命令</span></a></li>
<li><a href="#span-idinline-bluefile%E5%91%BD%E4%BB%A4span"><span id="inline-blue">file命令</span></a></li>
<li><a href="#span-idinline-bluewhereis%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">whereis命令 </span></a></li>
<li><a href="#span-idinline-bluelocate%E5%91%BD%E4%BB%A4span"><span id="inline-blue">locate命令</span></a></li>
<li><a href="#span-idinline-blueln%E5%91%BD%E4%BB%A4span"><span id="inline-blue">ln命令</span></a></li>
<li><a href="#span-idinline-bluetouch%E5%91%BD%E4%BB%A4"><span id="inline-blue">touch命令</span></a></li>
<li><a href="#span-idinline-bluemv%E5%91%BD%E4%BB%A4span"><span id="inline-blue">mv命令</span></a></li>
<li><a href="#span-idinline-bluepwd%E5%91%BD%E4%BB%A4span"><span id="inline-blue">pwd命令</span></a></li>
<li><a href="#span-idinline-bluemkdir%E5%91%BD%E4%BB%A4span"><span id="inline-blue">mkdir命令</span></a></li>
<li><a href="#span-idinline-bluels%E5%91%BD%E4%BB%A4span"><span id="inline-blue">ls命令</span></a></li>
<li><a href="#span-idinline-bluesz%E5%91%BD%E4%BB%A4span"><span id="inline-blue">sz命令</span></a></li>
<li><a href="#span-idinline-bluerz%E5%91%BD%E4%BB%A4span"><span id="inline-blue">rz命令</span></a></li>
<li><a href="#span-idinline-bluetrue%E5%91%BD%E4%BB%A4span"><span id="inline-blue">true命令</span></a></li>
<li><a href="#span-idinline-bluetree%E5%91%BD%E4%BB%A4span"><span id="inline-blue">tree命令</span></a></li>
<li><a href="#span-idinline-bluelast%E5%91%BD%E4%BB%A4span"><span id="inline-blue">last命令</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="strings命令"><span id="inline-blue">strings命令</span></span></h2><p><strong>作用</strong><br>在对象或二进制文件中查找可打印的字符串，字符可以是由4个或者更多字符组成的字符序列，以换行符或空字符结束。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a 扫描整个文件内容而不是仅仅文件初始化和装载段。</span><br><span class="line">-f 显示查找到的字符串之前先打印文件名称。</span><br><span class="line">-n number 查找长度为number及以上的字符串序列。</span><br><span class="line">-t --radix=&#123;o,d,x&#125; ：输出字符的位置，基于八进制，十进制或者十六进制</span><br><span class="line">-o 等价于--radix=o</span><br><span class="line">-T --target= ：指定二进制文件格式</span><br><span class="line">-e --encoding=&#123;s,S,b,l,B,L&#125; ：选择字符大小和排列顺序:s = 7-bit, S = 8-bit, &#123;b,l&#125; = 16-bit, &#123;B,L&#125; = 32-bit</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">以10进制为偏移量，查找profile文件中长度大于60的字符串,输出字符所在文件名称。</span></span><br><span class="line">[root@demo_mdn ~]# strings -f -t o -60 /etc/profile</span><br><span class="line">/etc/profile:      20 # System wide environment and startup programs, for login setup</span><br><span class="line">/etc/profile:     173 # It&#x27;s NOT a good idea to change this file unless you know what you</span><br><span class="line">/etc/profile:     277 # are doing. It&#x27;s much better to create a custom.sh shell script in</span><br><span class="line">/etc/profile:     403 # /etc/profile.d/ to make custom changes to your environment, as this</span><br><span class="line">/etc/profile:    3100 # By default, we want umask to get set. This sets it for login shell</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">以16进制为偏移量，查找当前目录下jpg文件中长度大于50的字符串，输出所在文件名称。</span></span><br><span class="line">[root@demo_mdn user]# strings -f -t o -n 50 *.jpg</span><br><span class="line">20190605165252_529.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165255_799.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_156.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_210.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_391.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605165256_561.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_354.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_551.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_574.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_668.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171455_74.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br><span class="line">20190605171506_75.jpg:     153 !22222222222222222222222222222222222222222222222222</span><br></pre></td></tr></table></figure>


<h2><span id="unlink命令"><span id="inline-blue">unlink命令</span></span></h2><p><strong>作用</strong><br>删除指定的文件，功能和rm命令一样。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--version </span><br><span class="line">--help</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">a.txt  elasticsearch-2738171260560954631  erm_gd  jna-3246  mysql.sock  parentDir  pulse-24KvvDfOHjjf  report  v8-compile-cache-0</span><br><span class="line">[root@lwdCSCDN tmp]# unlink a.txt </span><br><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">elasticsearch-2738171260560954631  erm_gd  jna-3246  mysql.sock  parentDir  pulse-24KvvDfOHjjf  report  v8-compile-cache-0</span><br></pre></td></tr></table></figure>


<h2><span id="chown命令"><span id="inline-blue">chown命令</span></span></h2><p><strong>作用</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chown命令用于改变一个文件或目录的所有者或用户组，用户可以是用户名或者用户ID，群组可以是群组名或者群组ID，文件名可以是空格分割的文件列表，也可以是通配符描述的集合，只有文件主和超级用户才可以使用该命令。</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong></p>
<p>-c:与-v命令相似，仅显示变更的内容。<br>-f:不显示错误信息。<br>-h:只对符号链接文件做修改，不改变其对应的原始文件。<br>-R:递归处理，将命令目录下的所有文件和子目录一并处理。<br>-v:显示命令执行详细过程。<br>–reference=&lt;参考文件或目录&gt;：把指定文件或目录的拥有者与所属群组全部设成和参考文件或目录的拥有者与所属群组相同。<br>–help:在线帮助。<br>–version:显示版本信息。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将erm_gd目录下的文件和目录所属者更改为report_cd,群组修改为report_cd</span></span><br><span class="line">[root@lwdCSCDN tmp]# chown -R report_cd:report_cd erm_gd</span><br><span class="line">[root@lwdCSCDN tmp]# cd erm_gd/</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN erm_gd]# ll</span><br><span class="line">总用量 210608</span><br><span class="line">-rw-r--r-- 1 report_cd report_cd 214757130 1月   5 17:47 dg_erm_mysql.sql</span><br><span class="line">-rw-r--r-- 1 report_cd report_cd    681075 1月   5 17:47 dg_global.sql</span><br></pre></td></tr></table></figure>


<h2><span id="stat命令"><span id="inline-blue">stat命令</span></span></h2><p><strong>作用</strong><br>    显示文件状态信息，stat命令的输出信息比ls命令的输出信息要更详细。</p>
<p><strong>选项</strong></p>
<p>-L : 支持符号链接<br>-t : 以简洁方式显示输出信息。<br>-f : 显示文件系统状态而不是文件状态。<br>–version : 显示命令版本。<br>–help : 显示命令帮助信息。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示文件状态</span></span><br><span class="line">[root@lwdCSCDN log1]# stat ETL.log</span><br><span class="line">  File: &quot;ETL.log&quot;</span><br><span class="line">  Size: 7341608   	Blocks: 14352      IO Block: 4096   普通文件</span><br><span class="line">Device: 804h/2052d	Inode: 10495794    Links: 3</span><br><span class="line">Access: (0777/-rwxrwxrwx)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2020-12-28 11:06:47.226634512 +0800</span><br><span class="line">Modify: 2020-12-18 14:47:43.471294256 +0800</span><br><span class="line">Change: 2020-12-18 14:55:58.935352996 +0800</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示文件系统状态</span></span><br><span class="line">[root@lwdCSCDN log1]# stat -f ETL.log</span><br><span class="line">  File: &quot;ETL.log&quot;</span><br><span class="line">    ID: abb37a7c2e029036 Namelen: 255     Type: ext2/ext3</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 45356622   Free: 29156603   Available: 26852603</span><br><span class="line">Inodes: Total: 11526144   Free: 10551557</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">以简洁方式展现文件状态信息</span></span><br><span class="line">[root@lwdCSCDN log1]# stat -t ETL.log</span><br><span class="line">ETL.log 7341608 14352 81ff 0 0 804 10495794 3 0 0 1609124807 1608274063 1608274558 4096</span><br></pre></td></tr></table></figure>


<h2><span id="which命令"><span id="inline-blue">which命令</span></span></h2><p><strong>作用</strong><br>查找命令所在的绝对路径（包含命令别名）。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--version, -[vV] Print version and exit successfully.</span><br><span class="line">--help,          Print this help and exit successfully.</span><br><span class="line">--skip-dot       Skip directories in PATH that start with a dot.</span><br><span class="line">--skip-tilde     Skip directories in PATH that start with a tilde.</span><br><span class="line">--show-dot       Don&#x27;t expand a dot to current directory in output.</span><br><span class="line">--show-tilde     Output a tilde for HOME directory for non-root.</span><br><span class="line">--tty-only       Stop processing options on the right if not on tty.</span><br><span class="line">--all, -a        Print all matches in PATH, not just the first</span><br><span class="line">--read-alias, -i Read list of aliases from stdin.</span><br><span class="line">--skip-alias     Ignore option --read-alias; don&#x27;t read stdin.</span><br><span class="line">--read-functions Read shell functions from stdin.</span><br><span class="line">--skip-functions Ignore option --read-functions; don&#x27;t read stdin.</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查找ls命令的绝对路径</span></span><br><span class="line">[root@demo_mdn user]# which ls</span><br><span class="line">alias ls=&#x27;ls --color=auto&#x27;</span><br><span class="line">	/bin/ls</span><br></pre></td></tr></table></figure>


<h2><span id="file命令"><span id="inline-blue">file命令</span></span></h2><p><strong>作用</strong><br>    file命令用于探测文件类型，file命令分为文件系统、魔法幻数检查及语言检查3个过程.<br><strong>选项</strong></p>
<p>-b : 列出结果时，不显示文件名称。<br>-i : 探测文件结果以MIME字符串展示。<br>-L : 检测链接文件，并给出链接原始文件的类型。<br>-v : file命令版本信息。<br>-z : 尝试探测压缩类型文件。<br>-m : 指定魔法幻数文件。<br>-f : 指定文件，如果文件内容中有其他文件，依序辨识这些文件，输出格式为每列一个文件。<br>-c : 显示命令执行的详细过程。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示文件类型</span></span><br><span class="line">[root@lwdCSCDN log1]# file ETL.log</span><br><span class="line">ETL.log: ASCII English text, with very long lines</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不显示文件名称</span></span><br><span class="line">[root@lwdCSCDN log1]# file -b ETL.log</span><br><span class="line">ASCII English text, with very long lines</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">以MIME格式展现探测结果</span></span><br><span class="line">[root@lwdCSCDN log1]# file -b -i record.ini </span><br><span class="line">text/plain; charset=us-ascii</span><br></pre></td></tr></table></figure>


<h2><span id="whereis命令"><span id="inline-blue">whereis命令 </span></span></h2><p><strong>作用</strong><br>    定位二进制程序文件、man手册、源代码文件所在位置，搜索效率比find命令高，因为查找的是数据库索引文件，和locate命令同理，但索引内容不是实时更新。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-b 只搜索二进制文件</span><br><span class="line">-B 指定搜索的二进制文件所在的目录</span><br><span class="line">-m 只搜索man帮助文件</span><br><span class="line">-M 指定man文件所在的目录</span><br><span class="line">-f 定义搜索范围</span><br><span class="line">-s 只搜索源代码文件</span><br><span class="line">-S 指定搜索源代码文件所在的目录</span><br><span class="line">（-BMS 必须和-f 选项同时使用）</span><br></pre></td></tr></table></figure>
<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">搜索ls命令相关文件所在的位置</span></span><br><span class="line">[root@demo_mdn /]# whereis ls</span><br><span class="line">ls: /bin/ls /usr/share/man/man1/ls.1.gz /usr/share/man/man1p/ls.1p.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">只搜索指定路径下ls相关二进制文件所在位置,只搜索当前指定路径不进行递归搜索</span></span><br><span class="line">[root@demo_mdn /]# whereis -b -B /bin -f ls</span><br><span class="line">ls: /bin/ls</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">只搜索指定路径下的ls相关帮助文件,只搜索当前指定路径不进行递归搜索</span></span><br><span class="line">[root@demo_mdn /]# whereis -m -M /usr/share/man/man1 -f ls</span><br><span class="line">ls: /usr/share/man/man1/ls.1.gz</span><br></pre></td></tr></table></figure>


<h2><span id="locate命令"><span id="inline-blue">locate命令</span></span></h2><p><strong>作用</strong><br>    查找文件或目录所在位置（locate 命令实际是查找的/var/lib/mlocate/mlocate.db 文件，所以查找速度比find命令快的多）</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-V 显示版本信息</span><br><span class="line">-d dir 指定搜索的数据库文件所在位置</span><br></pre></td></tr></table></figure>

<p> <strong>实例</strong><br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash">指定mlocate.db 文件目录，查找portalOrderInfoTask_0_20201110_010000_0 文件所在位置</span></span><br><span class="line"> [root@demo_mdn mlocate]# locate -d /var/lib/mlocate/mlocate.db portalOrderInfoTask_0_20201110_010000_0</span><br><span class="line"> /home/report_cd/dhm/portalOrderInfoTask/2020/11/10/portalOrderInfoTask_0_20201110_010000_0</span><br><span class="line"></span><br><span class="line"><span class="meta"> #</span><span class="bash">显示locate 命令版本信息</span></span><br><span class="line"> [root@demo_mdn mlocate]# locate -V</span><br><span class="line">mlocate 0.22.2</span><br><span class="line">Copyright (C) 2007 Red Hat, Inc. All rights reserved.</span><br><span class="line">This software is distributed under the GPL v.2.</span><br><span class="line"></span><br><span class="line">This program is provided with NO WARRANTY, to the extent permitted by law.</span><br></pre></td></tr></table></figure></p>
<h2><span id="ln命令"><span id="inline-blue">ln命令</span></span></h2><p><strong>作用</strong><br>    为指定文件创建链接文件，链接类型分为硬链接和符号链接，默认是硬链接，如果要添加符号链接需要加上-s 选项。<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-b或--backup：删除，覆盖目标文件之前的备份；</span><br><span class="line">-d或-F或——directory：建立目录的硬连接；</span><br><span class="line">-f或——force：强行建立文件或目录的连接，不论文件或目录是否存在；</span><br><span class="line">-i或——interactive：覆盖既有文件之前先询问用户；</span><br><span class="line">-n或--no-dereference：把符号连接的目的目录视为一般文件；</span><br><span class="line">-s或——symbolic：对源文件建立符号连接，而非硬连接；</span><br><span class="line">-S&lt;字尾备份字符串&gt;或--suffix=&lt;字尾备份字符串&gt;：用&quot;-b&quot;参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，预设的备份字符串是符号“~”，用户可通过“-S”参数来改变它；</span><br><span class="line">-v或——verbose：显示指令执行过程；</span><br><span class="line">-V&lt;备份方式&gt;或--version-control=&lt;备份方式&gt;：用“-b”参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，这个字符串不仅可用“-S”参数变更，当使用“-V”参数&lt;备份方式&gt;指定不同备份方式时，也会产生不同字尾的备份字符串；</span><br><span class="line">--help：在线帮助；</span><br><span class="line">--version：显示版本信息。</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 给文件建立软链接</span></span><br><span class="line">[root@lwdCSCDN tmp]# ln -s readme.txt  readme.log</span><br><span class="line">[root@lwdCSCDN tmp]# ll</span><br><span class="line">总用量 292</span><br><span class="line">drwx------  2 elasticsearch elasticsearch   4096 11月 19 10:02 elasticsearch-2738171260560954631</span><br><span class="line">srwxrwxrwx  1 mysql         mysql              0 12月 23 2019 mysql.sock</span><br><span class="line">-rw-r--r--  1 root          root              64 12月 16 16:00 patch.sql</span><br><span class="line">drwx------. 2 root          root            4096 10月 19 2017 pulse-24KvvDfOHjjf</span><br><span class="line">lrwxrwxrwx  1 root          root              10 12月 16 18:00 readme.log -&gt; readme.txt</span><br><span class="line">-rw-r--r--  1 root          root             744 12月 16 16:00 readme.txt</span><br><span class="line">-rw-r--r--  1 root          root          133889 12月 10 12:22 scs1.sql</span><br><span class="line">drwxr-xr-x  4 root          root            4096 12月 16 16:00 sql</span><br><span class="line">-rw-rw----  1 mysql         mysql           8602 12月 16 17:58 #sqla5f_879_0.frm</span><br><span class="line">-rw-rw----  1 mysql         mysql         114688 12月 16 17:58 #sqla5f_879_0.ibd</span><br><span class="line">-rw-r--r--  1 root          root              98 12月 16 16:00 update.sql</span><br><span class="line">drwxr-xr-x  3 root          root            4096 1月  21 2020 v8-compile-cache-0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 给文件建立硬链接</span></span><br><span class="line">[root@lwdCSCDN tmp]# ln  readme.txt log.txt</span><br><span class="line">[root@lwdCSCDN tmp]# ll</span><br><span class="line">总用量 611180</span><br><span class="line">drwx------  2 elasticsearch elasticsearch      4096 11月 19 10:02 elasticsearch-2738171260560954631</span><br><span class="line">-rw-r--r--  2 root          root                744 12月 16 16:00 log.txt</span><br><span class="line">srwxrwxrwx  1 mysql         mysql                 0 12月 23 2019 mysql.sock</span><br><span class="line">-rw-r--r--  1 root          root                 64 12月 16 16:00 patch.sql</span><br><span class="line">drwx------. 2 root          root               4096 10月 19 2017 pulse-24KvvDfOHjjf</span><br><span class="line">lrwxrwxrwx  1 root          root                 10 12月 16 18:00 readme.log -&gt; readme.txt</span><br><span class="line">-rw-r--r--  2 root          root                744 12月 16 16:00 readme.txt</span><br><span class="line">-rw-r--r--  1 root          root             133889 12月 10 12:22 scs1.sql</span><br><span class="line">drwxr-xr-x  4 root          root               4096 12月 16 16:00 sql</span><br><span class="line">-rw-rw----  1 mysql         mysql          32473128 12月 16 18:04 #sql_a5f_0.MYD</span><br><span class="line">-rw-rw----  1 mysql         mysql              1024 12月 16 18:04 #sql_a5f_0.MYI</span><br><span class="line">-rw-rw----  1 mysql         mysql         592436800 12月 16 18:04 #sql_a5f_1.MYD</span><br><span class="line">-rw-rw----  1 mysql         mysql              1024 12月 16 18:04 #sql_a5f_1.MYI</span><br><span class="line">-rw-rw----  1 mysql         mysql              8602 12月 16 17:58 #sqla5f_879_0.frm</span><br><span class="line">-rw-rw----  1 mysql         mysql            114688 12月 16 17:58 #sqla5f_879_0.ibd</span><br><span class="line">-rw-r--r--  1 root          root                 98 12月 16 16:00 update.sql</span><br><span class="line">drwxr-xr-x  3 root          root               4096 1月  21 2020 v8-compile-cache-0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 建立硬链接前询问用户是否覆盖已有链接，并创建备份</span></span><br><span class="line">[root@lwdCSCDN etl]# ln -b -i logs/ETL.log log/a.log </span><br><span class="line">ln：是否替换&quot;log/a.log&quot;？ y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成的备份文件，文件后缀默认为~</span></span><br><span class="line">[root@lwdCSCDN log]# ls</span><br><span class="line">a.log  a.log~</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 为logs目录下的record.ini文件在<span class="built_in">log</span>目录下建立record.ini文件硬链接 强制执行</span></span><br><span class="line">[root@lwdCSCDN etl]# ln -f -d  logs/record.ini log1/record.ini</span><br><span class="line">[root@lwdCSCDN etl]# ls</span><br><span class="line">common  config  log  log1  logs  script  tmp</span><br><span class="line">[root@lwdCSCDN etl]# cd log1</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN log1]# ll</span><br><span class="line">总用量 7188</span><br><span class="line">-rwxrwxrwx 3 root root 7341608 12月 18 14:47 ETL.log</span><br><span class="line">-rwxrwxrwx 2 root root    8505 12月 18 14:23 record.ini</span><br></pre></td></tr></table></figure>

<h2><span id="touch命令"><span id="inline-blue">touch命令</span></span></h2><p><strong>作用</strong><br>更改已存在文件的时间戳为当前时间戳，或创建新的文件<br><strong>选项</strong><br>-a :只变更访问时间<br>-m :只变更修改时间<br>-c :不创建新的文件<br>-r :更新指定文件或目录下的所有文件的时间戳。<br>-d :指定更新的时间戳字符串<br>-t :指定时间戳格式，MMDDhhmm<br><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建新的文件</span></span><br><span class="line">[root@lwdCSCDN bin]# touch b.txt</span><br><span class="line">[root@lwdCSCDN bin]# ll</span><br><span class="line">总用量 3080</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:53 a.txt</span><br><span class="line">drwxr-xr-x 4 root root    4096 12月 21 14:40 bi_common</span><br><span class="line">-rw-r--r-- 1 root root   32279 10月  6 2016 bootstrap.jar</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:58 b.txt</span><br><span class="line">-rw-r--r-- 1 root root   15026 10月  6 2016 catalina.bat</span><br><span class="line">-rwxr-xr-x 1 root root   22443 10月  6 2016 catalina.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d指定更新的时间戳</span></span><br><span class="line">[root@lwdCSCDN bin]# touch -d 2020-12-21 b.txt</span><br><span class="line">[root@lwdCSCDN bin]# ll</span><br><span class="line">总用量 3084</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:02 12211621</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:00 2020-12-21</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:53 a.txt</span><br><span class="line">drwxr-xr-x 4 root root    4096 12月 21 14:40 bi_common</span><br><span class="line">-rw-r--r-- 1 root root   32279 10月  6 2016 bootstrap.jar</span><br><span class="line">-rw-r--r-- 1 root root       5 12月 21 00:00 b.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -t指定更新时间</span></span><br><span class="line">[root@lwdCSCDN bin]# touch -t 12211630 b.txt</span><br><span class="line">[root@lwdCSCDN bin]# ll</span><br><span class="line">总用量 3084</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:02 12211621</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 17:00 2020-12-21</span><br><span class="line">-rw-r--r-- 1 root root       0 12月 21 16:53 a.txt</span><br><span class="line">drwxr-xr-x 4 root root    4096 12月 21 14:40 bi_common</span><br><span class="line">-rw-r--r-- 1 root root   32279 10月  6 2016 bootstrap.jar</span><br><span class="line">-rw-r--r-- 1 root root       5 12月 21 16:30 b.txt</span><br></pre></td></tr></table></figure>


<h2><span id="mv命令"><span id="inline-blue">mv命令</span></span></h2><p><strong>作用</strong><br>    移动文件或将文件改名</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-b 为每个已存在的目标文件创建备份</span><br><span class="line">-f 覆盖前不询问</span><br><span class="line">-i 覆盖前询问</span><br><span class="line">-u 只更新源文件时间戳比目标文件时间戳新的文件或者目标文件不存在才覆盖更新</span><br><span class="line">-v 显示详细进行的步骤</span><br></pre></td></tr></table></figure>
<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将a.sh更名为new.sh</span></span><br><span class="line">[root@demo_mdn script]# mv a.sh new.sh</span><br><span class="line">[root@demo_mdn script]# ll</span><br><span class="line">总用量 68</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 b.sh</span><br><span class="line">-rw-r--r-- 1 root root   112 12月 10 16:12 etlD.sh</span><br><span class="line">-rw-r--r-- 1 root root   246 12月 10 16:12 etlP.sh</span><br><span class="line">-rw-r--r-- 1 root root 34622 12月 10 16:12 etl.sh</span><br><span class="line">-rw-r--r-- 1 root root    78 12月 10 16:12 etlS.sh</span><br><span class="line">-rw-r--r-- 1 root root   513 12月 10 16:12 isFileExists.sh</span><br><span class="line">-rw-r--r-- 1 root root   366 12月 10 16:12 mysqld_kill_sleep.sh</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 new.sh</span><br><span class="line">-rw-r--r-- 1 root root    94 12月 10 16:12 reportSource.sh</span><br><span class="line">-rw-r--r-- 1 root root   642 12月 10 16:12 stat.sh</span><br><span class="line">-rw-r--r-- 1 root root   157 12月 10 16:12 stop.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将oldDir目录移动到newDir目录</span></span><br><span class="line">[root@demo_mdn script]# mv oldDir/ newDir/</span><br><span class="line">[root@demo_mdn script]# ll</span><br><span class="line">总用量 72</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 b.sh</span><br><span class="line">-rw-r--r-- 1 root root   112 12月 10 16:12 etlD.sh</span><br><span class="line">-rw-r--r-- 1 root root   246 12月 10 16:12 etlP.sh</span><br><span class="line">-rw-r--r-- 1 root root 34622 12月 10 16:12 etl.sh</span><br><span class="line">-rw-r--r-- 1 root root    78 12月 10 16:12 etlS.sh</span><br><span class="line">-rw-r--r-- 1 root root   513 12月 10 16:12 isFileExists.sh</span><br><span class="line">-rw-r--r-- 1 root root   366 12月 10 16:12 mysqld_kill_sleep.sh</span><br><span class="line">drwxr-xr-x 3 root root  4096 12月 10 16:37 newDir</span><br><span class="line">-rw-r--r-- 1 root root     0 12月 10 16:35 new.sh</span><br><span class="line">-rw-r--r-- 1 root root    94 12月 10 16:12 reportSource.sh</span><br><span class="line">-rw-r--r-- 1 root root   642 12月 10 16:12 stat.sh</span><br><span class="line">-rw-r--r-- 1 root root   157 12月 10 16:12 stop.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印文件移动的详细信息</span></span><br><span class="line">[root@demo_mdn script]# mv -v *.sh newDir/</span><br><span class="line">&quot;b.sh&quot; -&gt; &quot;newDir/b.sh&quot;</span><br><span class="line">&quot;etlD.sh&quot; -&gt; &quot;newDir/etlD.sh&quot;</span><br><span class="line">&quot;etlP.sh&quot; -&gt; &quot;newDir/etlP.sh&quot;</span><br><span class="line">&quot;etl.sh&quot; -&gt; &quot;newDir/etl.sh&quot;</span><br><span class="line">&quot;etlS.sh&quot; -&gt; &quot;newDir/etlS.sh&quot;</span><br><span class="line">&quot;isFileExists.sh&quot; -&gt; &quot;newDir/isFileExists.sh&quot;</span><br><span class="line">&quot;mysqld_kill_sleep.sh&quot; -&gt; &quot;newDir/mysqld_kill_sleep.sh&quot;</span><br><span class="line">&quot;new.sh&quot; -&gt; &quot;newDir/new.sh&quot;</span><br><span class="line">&quot;reportSource.sh&quot; -&gt; &quot;newDir/reportSource.sh&quot;</span><br><span class="line">&quot;stat.sh&quot; -&gt; &quot;newDir/stat.sh&quot;</span><br><span class="line">&quot;stop.sh&quot; -&gt; &quot;newDir/stop.sh&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -i 交互模式 确认是否覆盖同名文件</span></span><br><span class="line">[root@demo_mdn script]# mv -i  new.sh newDir</span><br><span class="line">mv：是否覆盖&quot;newDir/new.sh&quot;？ y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -f 强制覆盖，不进行提示</span></span><br><span class="line">[root@demo_mdn script]# mv -f  new.sh newDir</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不覆盖同名文件，new.sh在newDir目录已存在，没有覆盖</span></span><br><span class="line">[root@demo_mdn script]# mv -nv *.sh newDir</span><br><span class="line">&quot;b.sh&quot; -&gt; &quot;newDir/b.sh&quot;</span><br><span class="line">&quot;etlD.sh&quot; -&gt; &quot;newDir/etlD.sh&quot;</span><br><span class="line">&quot;etlP.sh&quot; -&gt; &quot;newDir/etlP.sh&quot;</span><br><span class="line">&quot;etl.sh&quot; -&gt; &quot;newDir/etl.sh&quot;</span><br><span class="line">&quot;etlS.sh&quot; -&gt; &quot;newDir/etlS.sh&quot;</span><br><span class="line">&quot;isFileExists.sh&quot; -&gt; &quot;newDir/isFileExists.sh&quot;</span><br><span class="line">&quot;mysqld_kill_sleep.sh&quot; -&gt; &quot;newDir/mysqld_kill_sleep.sh&quot;</span><br><span class="line">&quot;reportSource.sh&quot; -&gt; &quot;newDir/reportSource.sh&quot;</span><br><span class="line">&quot;stat.sh&quot; -&gt; &quot;newDir/stat.sh&quot;</span><br><span class="line">&quot;stop.sh&quot; -&gt; &quot;newDir/stop.sh&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -u 只覆盖源文件比目标文件时间戳新的文件, newDir目录已经存在1.txt文件且时间戳晚于源文件，所以没有操作</span></span><br><span class="line">[root@demo_mdn script]# mv -uv *.txt newDir</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -b 对目标文件进行备份，目标目录生成1.txt~文件备份</span></span><br><span class="line">[root@demo_mdn script]# mv -bv *.txt newDir</span><br><span class="line">mv：是否覆盖&quot;newDir/1.txt&quot;？ y</span><br><span class="line">&quot;1.txt&quot; -&gt; &quot;newDir/1.txt&quot; (备份：&quot;newDir/1.txt~&quot;)</span><br><span class="line">[root@demo_mdn newDir]# ls</span><br><span class="line">1.txt  1.txt~  oldDir</span><br></pre></td></tr></table></figure>




<h2><span id="pwd命令"><span id="inline-blue">pwd命令</span></span></h2><p><strong>作用</strong><br>    以绝对路径显示当前用户的所在目录<br><strong>选项</strong><br>-L :打印逻辑上的工作目录<br>-P :打印物理上的工作目录<br><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示当前工作目录</span></span><br><span class="line">[root@lwdCSCDN bin]# pwd</span><br><span class="line">/usr/local/BI/hrb_BI/v300r002b210/apache-tomcat-8.0.38/bin</span><br></pre></td></tr></table></figure>


<h2><span id="mkdir命令"><span id="inline-blue">mkdir命令</span></span></h2><p><strong>作用</strong><br>mkdir用来创建dirname指定的目录。</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-Z：设置安全上下文，当使用SELinux时有效；</span><br><span class="line">-m&lt;目标属性&gt;或--mode&lt;目标属性&gt;建立目录的同时设置目录的权限；</span><br><span class="line">-p或--parents 若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录；</span><br><span class="line">--version 显示版本信息。</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 不指定目录的情况下，默认当前目录</span></span><br><span class="line">[root@lwdCSCDN tmp]# mkdir report</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 父级目录不存在，创建多级目录报错</span></span><br><span class="line">[root@lwdCSCDN tmp]# mkdir ./parentDir/newDir</span><br><span class="line">mkdir: 无法创建目录&quot;./parentDir/newDir&quot;: 没有那个文件或目录</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定-p选项，创建多级目录</span></span><br><span class="line">[root@lwdCSCDN tmp]# mkdir -p ./parentDir/newDir</span><br><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">elasticsearch-2738171260560954631  erm_gd  jna-3246  mysql.sock  parentDir  pulse-24KvvDfOHjjf  report  v8-compile-cache-0</span><br></pre></td></tr></table></figure>


<h2><span id="ls命令"><span id="inline-blue">ls命令</span></span></h2><p><strong>作用</strong><br>显示目标文件列表</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a：显示所有文件和目录（ls内定将档案名或目录名称为“.”的视为影藏，不会列出）；</span><br><span class="line">-A：显示除影藏文件“.”和“..”以外的所有文件列表；</span><br><span class="line">-C：多列显示输出结果。这是默认选项；</span><br><span class="line">-l：与“-C”选项功能相反，所有输出信息用单列格式输出，不输出为多列；</span><br><span class="line">-F：在每个输出项后追加文件的类型标识符，具体含义：“*”表示具有可执行权限的普通文件，“/”表示目录，“@”表示符号链接，“|”表示命令管道FIFO，“=”表示sockets套接字。当文件为普通文件时，不输出任何标识符；</span><br><span class="line">-b：将文件中的不可输出的字符以反斜线“”加字符编码的方式输出；</span><br><span class="line">-c：与“-lt”选项连用时，按照文件状态时间排序输出目录内容，排序的依据是文件的索引节点中的ctime字段。与“-l”选项连用时，则排序的一句是文件的状态改变时间；</span><br><span class="line">-d：仅显示目录名，而不显示目录下的内容列表。显示符号链接文件本身，而不显示其所指向的目录列表；</span><br><span class="line">-f：此参数的效果和同时指定“aU”参数相同，并关闭“lst”参数的效果；</span><br><span class="line">-i：显示文件索引节点号（inode）。一个索引节点代表一个文件；</span><br><span class="line">--file-type：与“-F”选项的功能相同，但是不显示“*”；</span><br><span class="line">-k：以KB（千字节）为单位显示文件大小；</span><br><span class="line">-l：以长格式显示目录下的内容列表。输出的信息从左到右依次包括文件名，文件类型、权限模式、硬连接数、所有者、组、文件大小和文件的最后修改时间等；</span><br><span class="line">-m：用“,”号区隔每个文件和目录的名称；</span><br><span class="line">-n：以用户识别码和群组识别码替代其名称；</span><br><span class="line">-r：以文件名反序排列并输出目录内容列表；</span><br><span class="line">-s：显示文件和目录的大小，以区块为单位；</span><br><span class="line">-t：用文件和目录的更改时间排序；</span><br><span class="line">-L：如果遇到性质为符号链接的文件或目录，直接列出该链接所指向的原始文件或目录；</span><br><span class="line">-R：递归处理，将指定目录下的所有文件及子目录一并处理；</span><br><span class="line">--full-time：列出完整的日期与时间；</span><br><span class="line">--color[=WHEN]：使用不同的颜色高亮显示不同类型的。</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示当前目录下的非隐藏文件和目录</span></span><br><span class="line">[root@lwdCSCDN usr]# ls</span><br><span class="line">aaalog  bin  etc  games  include  lib  lib64  libexec  local  lost+found  man  sbin  share  src  tmp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示当前目录下的文件和目录，包含隐藏文件</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -a</span><br><span class="line">.  ..  aaalog  bin  etc  games  include  lib  lib64  libexec  local  lost+found  man  sbin  share  src  tmp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 按文件修改时间倒序显示，单列格式输出展示</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -lt</span><br><span class="line">总用量 320</span><br><span class="line">drwxr-xr-x.  59 root root   4096 12月 16 09:49 local</span><br><span class="line">dr-xr-xr-x. 159 root root 126976 10月 23 10:14 lib64</span><br><span class="line">drwxr-xr-x    3 root root   4096 10月 13 16:55 aaalog</span><br><span class="line">drwxr-xr-x.   2 root root  90112 12月 16 2019 bin</span><br><span class="line">drwxr-xr-x    3 root root   4096 12月  6 2019 man</span><br><span class="line">dr-xr-xr-x.  32 root root   4096 12月  6 2019 lib</span><br><span class="line">dr-xr-xr-x.   2 root root  20480 8月  10 2019 sbin</span><br><span class="line">drwxr-xr-x. 293 root root  12288 8月   9 2019 share</span><br><span class="line">drwxr-xr-x. 143 root root  12288 8月   9 2019 include</span><br><span class="line">drwxr-xr-x.  33 root root  12288 11月 25 2017 libexec</span><br><span class="line">lrwxrwxrwx.   1 root root     10 10月 18 2017 tmp -&gt; ../var/tmp</span><br><span class="line">drwxr-xr-x.   4 root root   4096 10月 18 2017 src</span><br><span class="line">drwx------.   2 root root  16384 10月 18 2017 lost+found</span><br><span class="line">drwxr-xr-x.   2 root root   4096 6月  28 2011 etc</span><br><span class="line">drwxr-xr-x.   2 root root   4096 6月  28 2011 games</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 按照特殊字符对文件进行分类</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -F</span><br><span class="line">aaalog/  bin/  etc/  games/  include/  lib/  lib64/  libexec/  local/  lost+found/  man/  sbin/  share/  src/  tmp@</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">仅显示目录名，不显示目录下的内容列表</span></span><br><span class="line">[root@lwdCSCDN usr]# ls -ld aaalog</span><br><span class="line">drwxr-xr-x 3 root root 4096 10月 13 16:55 aaalog</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示文件索引节点</span></span><br><span class="line">[root@lwdCSCDN script]# ls -i</span><br><span class="line">10495811 etlD.sh  10495809 etl.sh   10495840 isFileExists.sh       10496106 reportSource.sh  10496118 stop.sh</span><br><span class="line">10495812 etlP.sh  10495822 etlS.sh  10495887 mysqld_kill_sleep.sh  10496112 stat.sh</span><br></pre></td></tr></table></figure>




<h2><span id="sz命令"><span id="inline-blue">sz命令</span></span></h2><p><strong>作用</strong><br>基于zmodern协议实现远程文件下载<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a : 以文本形式传输</span><br><span class="line">-b : 以二进制传输</span><br><span class="line">-e ：控制字符转义</span><br><span class="line">-i ：接收端执行命令</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 以文本格式下载服务器上app-info.log文件到本地</span></span><br><span class="line">[root@lwdCSCDN info]# sz -a app-info.log  </span><br></pre></td></tr></table></figure>



<h2><span id="rz命令"><span id="inline-blue">rz命令</span></span></h2><p><strong>作用</strong><br>基于zmodern协议实现本地文件上传<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-B : 设备缓冲大小</span><br><span class="line">-D : 测试模式，</span><br><span class="line">-e ：控制字符转义</span><br><span class="line">-y ：重名文件直接覆盖</span><br><span class="line">-p : 重名文件不覆盖</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 上传本地文件到当前服务器目录</span></span><br><span class="line">[root@lwdCSCDN info]# rz</span><br></pre></td></tr></table></figure>



<h2><span id="true命令"><span id="inline-blue">true命令</span></span></h2><p><strong>作用</strong><br>清空文件内容、不删除文件</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">清空app-info.log文件</span></span><br><span class="line">[root@lwdCSCDN info]# true &gt; app-info.log </span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="tree命令"><span id="inline-blue">tree命令</span></span></h2><p><strong>作用</strong><br>以树形结构展现当前目录的文件</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-a ：所有文件</span><br><span class="line">-t : 用文件和目录的更改时间排序</span><br><span class="line">-f : 在每个文件或目录之前，显示完整的相对路径名称</span><br><span class="line">-s : 列出文件或目录大小</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash">[root@lwdCSCDN info]<span class="comment"># tree</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2><span id="last命令"><span id="inline-blue">last命令</span></span></h2><p><strong>作用</strong><br>显示最近终端登录信息</p>
<p><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-R ：省略hostname栏位</span><br><span class="line">-username : 展示username登入信息</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash">[root@lwdCSCDN info]<span class="comment"># last</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux-文档编辑</title>
    <url>/Linux/blogs/Linux-%E6%96%87%E6%A1%A3%E7%BC%96%E8%BE%91/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluevim%E5%91%BD%E4%BB%A4span"><span id="inline-blue">vim命令</span></a></li>
<li><a href="#span-idinline-bluehead%E5%91%BD%E4%BB%A4span"><span id="inline-blue">head命令</span></a></li>
<li><a href="#span-idinline-bluerm%E5%91%BD%E4%BB%A4-span"><span id="inline-blue">rm命令 </span></a></li>
<li><a href="#span-idinline-bluecat%E5%91%BD%E4%BB%A4span"><span id="inline-blue">cat命令</span></a></li>
<li><a href="#span-idinline-bluetar%E5%91%BD%E4%BB%A4span"><span id="inline-blue">tar命令</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="vim命令"><span id="inline-blue">vim命令</span></span></h2><p><strong>作用</strong><br>vi命令是unix和类unix系统通用全屏幕文本编辑器，vim是vi的加强版，与vi完全兼容，并添加了很多增强功能。<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">crtl+u: 向文件首翻半屏。</span><br><span class="line">crtl+d: 此文件尾翻半屏。</span><br><span class="line">crtl+f: 向文件首翻一屏。</span><br><span class="line">crtl+b: 向文件尾翻一屏。</span><br><span class="line">ESC:从编辑模式切换到命令模式。</span><br><span class="line">:行号 :光标跳到指定行的行首。</span><br><span class="line">:$ :光标跳到文件尾。</span><br><span class="line">/字符串 :文本查找操作，从光标所在当前位置向文件尾部查找指定的字符串，查找到的字符串高亮显示。</span><br><span class="line">:wq :命令模式下，执行存盘并退出。</span><br><span class="line">:q :命令模式下，执行退出。</span><br><span class="line">:w! :命令模式下，强制执行存盘操作。</span><br><span class="line">:q! :命令模式下，强制执行退出vi命令。</span><br><span class="line">:set number :命令模式下，显示行号。</span><br><span class="line">:set nonumber :命令模式下，不显示行号。</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示行号</span></span><br><span class="line">  1 [20201203] 16:47:12 Begin</span><br><span class="line">  2 [20201203] 16:47:13 Import assetFileTask_0_20201203_010000_3</span><br><span class="line">  3 [20201203] 16:47:16 Import assetFileTask_0_20201203_010020_4</span><br><span class="line">  4 [20201203] 16:47:22 Import assetMapAssetTypeTask_0_20201203_010000_3</span><br><span class="line">  5 [20201203] 16:47:24 Import assetMapAssetTypeTask_0_20201203_010003_4</span><br><span class="line">  6 [20201203] 16:47:26 Import assetOrAssetFileTask_0_20201203_010000_9</span><br><span class="line">  7 [20201203] 16:47:28 Import assetOrAssetFileTask_0_20201203_010040_10</span><br><span class="line">  8 [20201203] 16:47:30 Import assetOrAssetFileTask_0_20201203_010047_11</span><br><span class="line">  9 [20201203] 16:47:32 Import assetOrAssetFileTask_0_20201203_010055_12</span><br><span class="line"> 10 [20201203] 16:47:34 Import assetTask_0_20201203_010000_3</span><br><span class="line"> 11 [20201203] 16:47:38 Import assetTask_0_20201203_010019_4</span><br><span class="line"> 12 [20201203] 16:47:41 Import assetTypeTask_0_20201203_010000_0</span><br><span class="line"> 13 [20201203] 16:47:43 Import cdrTask_0_20201203_020000_15</span><br><span class="line"> 14 [20201203] 16:47:46 Import cdrTask_0_20201203_021042_16</span><br><span class="line"> 15 [20201203] 16:47:52 Import cdrTask_0_20201203_021201_17</span><br><span class="line"> 16 [20201203] 16:47:59 Import cdrTask_0_20201203_021321_18</span><br><span class="line"> 17 [20201203] 16:48:06 Import cdrTask_0_20201203_021441_19</span><br><span class="line"> 18 [20201203] 16:48:14 Import cdrTask_0_20201203_021600_20</span><br><span class="line"> 19 [20201203] 16:48:20 Import channelTask_0_20201203_010000_0</span><br><span class="line"> 20 [20201203] 16:48:22 Import cmsDictTask_0_20201203_010000_0</span><br><span class="line"> 21 [20201203] 16:48:23 Import columnTask_0_20201203_010000_0</span><br><span class="line"> 22 [20201203] 16:48:25 Import orderTask_0_20201203_010000_0</span><br><span class="line"> 23 [20201203] 16:48:27 Import portalOrderInfoTask_0_20201203_010000_0</span><br><span class="line"> 24 [20201203] 16:48:28 Import productColumnTask_0_20201203_010000_0</span><br><span class="line"> 25 [20201203] 16:48:29 Import productResourceTask_0_20201203_010000_0</span><br><span class="line"> 26 [20201203] 16:48:30 Import productSpecMapTask_0_20201203_010000_0</span><br><span class="line"> 27 [20201203] 16:48:32 Import programGuideTask_0_20201203_010000_0</span><br><span class="line"> 28 [20201203] 16:48:33 Import providerTask_0_20201203_010000_0</span><br><span class="line"> 29 [20201203] 16:48:34 Import resColumnTask_0_20201203_010000_0</span><br><span class="line"> 30 [20201203] 16:48:38 Import resourcePkgTask_0_20201203_010000_0</span><br><span class="line"> 31 [20201203] 16:48:41 Import serviceProductInfo_0_20201203_010000_0</span><br><span class="line"> 32 [20201203] 16:48:42 Import serviceResourceInfo_0_20201203_010000_0</span><br><span class="line"> 33 [20201203] 16:48:44 Import userRelationTask_0_20201203_010000_0</span><br><span class="line"> 34 [20201203] 16:48:45 Import userTask_0_20201203_010000_69</span><br><span class="line"> 35 [20201203] 16:48:48 Import userTask_0_20201203_010117_70</span><br><span class="line">:set number   </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找columnTask字符串对应的内容。</span></span><br><span class="line">  1 [20201203] 16:47:12 Begin</span><br><span class="line">  2 [20201203] 16:47:13 Import assetFileTask_0_20201203_010000_3</span><br><span class="line">  3 [20201203] 16:47:16 Import assetFileTask_0_20201203_010020_4</span><br><span class="line">  4 [20201203] 16:47:22 Import assetMapAssetTypeTask_0_20201203_010000_3</span><br><span class="line">  5 [20201203] 16:47:24 Import assetMapAssetTypeTask_0_20201203_010003_4</span><br><span class="line">  6 [20201203] 16:47:26 Import assetOrAssetFileTask_0_20201203_010000_9</span><br><span class="line">  7 [20201203] 16:47:28 Import assetOrAssetFileTask_0_20201203_010040_10</span><br><span class="line">  8 [20201203] 16:47:30 Import assetOrAssetFileTask_0_20201203_010047_11</span><br><span class="line">  9 [20201203] 16:47:32 Import assetOrAssetFileTask_0_20201203_010055_12</span><br><span class="line"> 10 [20201203] 16:47:34 Import assetTask_0_20201203_010000_3</span><br><span class="line"> 11 [20201203] 16:47:38 Import assetTask_0_20201203_010019_4</span><br><span class="line"> 12 [20201203] 16:47:41 Import assetTypeTask_0_20201203_010000_0</span><br><span class="line"> 13 [20201203] 16:47:43 Import cdrTask_0_20201203_020000_15</span><br><span class="line"> 14 [20201203] 16:47:46 Import cdrTask_0_20201203_021042_16</span><br><span class="line"> 15 [20201203] 16:47:52 Import cdrTask_0_20201203_021201_17</span><br><span class="line"> 16 [20201203] 16:47:59 Import cdrTask_0_20201203_021321_18</span><br><span class="line"> 17 [20201203] 16:48:06 Import cdrTask_0_20201203_021441_19</span><br><span class="line"> 18 [20201203] 16:48:14 Import cdrTask_0_20201203_021600_20</span><br><span class="line"> 19 [20201203] 16:48:20 Import channelTask_0_20201203_010000_0</span><br><span class="line"> 20 [20201203] 16:48:22 Import cmsDictTask_0_20201203_010000_0</span><br><span class="line"> 21 [20201203] 16:48:23 Import columnTask_0_20201203_010000_0</span><br><span class="line"> 22 [20201203] 16:48:25 Import orderTask_0_20201203_010000_0</span><br><span class="line"> 23 [20201203] 16:48:27 Import portalOrderInfoTask_0_20201203_010000_0</span><br><span class="line"> 24 [20201203] 16:48:28 Import productColumnTask_0_20201203_010000_0</span><br><span class="line"> 25 [20201203] 16:48:29 Import productResourceTask_0_20201203_010000_0</span><br><span class="line"> 26 [20201203] 16:48:30 Import productSpecMapTask_0_20201203_010000_0</span><br><span class="line"> 27 [20201203] 16:48:32 Import programGuideTask_0_20201203_010000_0</span><br><span class="line"> 28 [20201203] 16:48:33 Import providerTask_0_20201203_010000_0</span><br><span class="line"> 29 [20201203] 16:48:34 Import resColumnTask_0_20201203_010000_0</span><br><span class="line"> 30 [20201203] 16:48:38 Import resourcePkgTask_0_20201203_010000_0</span><br><span class="line"> 31 [20201203] 16:48:41 Import serviceProductInfo_0_20201203_010000_0</span><br><span class="line"> 32 [20201203] 16:48:42 Import serviceResourceInfo_0_20201203_010000_0</span><br><span class="line"> 33 [20201203] 16:48:44 Import userRelationTask_0_20201203_010000_0</span><br><span class="line"> 34 [20201203] 16:48:45 Import userTask_0_20201203_010000_69</span><br><span class="line"> 35 [20201203] 16:48:48 Import userTask_0_20201203_010117_70</span><br><span class="line">/columnTask</span><br></pre></td></tr></table></figure>

<h2><span id="head命令"><span id="inline-blue">head命令</span></span></h2><p><strong>作用</strong><br>    显示文件开头内容，默认显示前10行</p>
<p><strong>选项</strong></p>
<p>-n&lt;数字&gt; :指定显示的行数<br>-c&lt;数字&gt; :指定显示的字符数<br>-v :显示文件头部信息<br>-q :不显示文件头部信息</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示my.cnf.bak文件的前3行内容</span></span><br><span class="line">[root@dap mysql]# head -3 my.cnf.bak </span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示100个字符</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For advi[root@dap mysql]<span class="comment"># head -c 100 my.cnf.bak</span></span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-co</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">显示my.cnf.bak 文件头部信息</span></span><br><span class="line">[root@dap mysql]# head -v my.cnf.bak </span><br><span class="line">==&gt; my.cnf.bak &lt;==</span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span></span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># and set to the amount of RAM for the most important data</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cache <span class="keyword">in</span> MySQL. Start at 70% of total RAM <span class="keyword">for</span> dedicated server, <span class="keyword">else</span> 10%.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> innodb_buffer_pool_size = 128M</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># to turn on a very important data integrity option: logging</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">不显示my.cnf.bak文件头部信息</span></span><br><span class="line">[root@dap mysql]# head -q my.cnf.bak </span><br><span class="line"><span class="meta">#</span><span class="bash"> For advice on how to change settings please see</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html</span></span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># and set to the amount of RAM for the most important data</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cache <span class="keyword">in</span> MySQL. Start at 70% of total RAM <span class="keyword">for</span> dedicated server, <span class="keyword">else</span> 10%.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> innodb_buffer_pool_size = 128M</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove leading <span class="comment"># to turn on a very important data integrity option: logging</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="rm命令"><span id="inline-blue">rm命令 </span></span></h2><p><strong>作用</strong><br>    删除一个目录下的多个文件或目录，对于链接文件，只删除整个链接文件，而原有文件不变。</p>
<p><strong>选项</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-d 直接把目录的硬链接数删除为0，删除该目录。</span><br><span class="line">-f 强制删除该目录。</span><br><span class="line">-i 删除前先询问是否删除。</span><br><span class="line">-r 递归删除目录下的文件和子目录。</span><br><span class="line">-v 显示详细的删除信息</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 删除b.sh文件</span></span><br><span class="line">[root@demo_mdn script]# rm b.sh</span><br><span class="line">rm：是否删除普通空文件 &quot;b.sh&quot;？y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强制删除b.sh文件</span></span><br><span class="line">[root@demo_mdn script]# rm -f b.sh</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 强制递归删除newDir目录，并显示详细信息</span></span><br><span class="line">[root@demo_mdn script]# rm -rfv newDir</span><br><span class="line">已删除&quot;newDir/1.txt&quot;</span><br><span class="line">已删除&quot;newDir/1.txt~&quot;</span><br><span class="line">已删除目录：&quot;newDir/oldDir&quot;</span><br><span class="line">已删除目录：&quot;newDir&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="cat命令"><span id="inline-blue">cat命令</span></span></h2><p><strong><em>作用</em></strong><br>    合并文件内容并显示</p>
<p><strong><em>选项</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-A //显示特殊字符	</span><br><span class="line">-n //对所有输出的行编号</span><br></pre></td></tr></table></figure>

<p><strong><em>实例</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示特殊字符</span></span><br><span class="line">[root@demo_mdn user]# cat -A jdbc1.properties</span><br><span class="line">dbSrc=mysql$</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">对输出行编号</span></span><br><span class="line">[root@demo_mdn user]# cat -n jdbc2.properties </span><br><span class="line"> 1	dbUrl=jdbc:mysql://10.9.216.14:3306/test?useUnicode=true&amp;amp;characterEncoding=UTF-8</span><br><span class="line"> 2	dbUserName=root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">合并jdbc1.properties、jdbc2.properties 文件内容到jdbc.properties并输出</span></span><br><span class="line">[root@demo_mdn user]# cat jdbc1.properties jdbc2.properties &gt;jdbc.properties</span><br><span class="line">dbSrc=mysql</span><br><span class="line">dbUrl=jdbc:mysql://10.9.216.14:3306/test?useUnicode=true&amp;amp;characterEncoding=UTF-8</span><br><span class="line">dbUserName=root</span><br></pre></td></tr></table></figure>

<h2><span id="tar命令"><span id="inline-blue">tar命令</span></span></h2><p>选项</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">运行tar时必须要有下列参数中的至少一个才可运行：</span><br><span class="line">-A | --catenate | --concatenate 将一存档与已有的存档合并</span><br><span class="line">-c | --create 建立新的存档</span><br><span class="line">-d | --diff, --compare 比较存档与当前文件的不同之处</span><br><span class="line">--delete 从存档中删除</span><br><span class="line">-r | --append 附加到存档结尾</span><br><span class="line">-t | --list 列出存档中文件的目录</span><br><span class="line">-u |--update 仅将较新的文件附加到存档中</span><br><span class="line">-x | --extract | --get 从存档展开文件</span><br><span class="line">-z | --gzip | --ungzip 用gzip对存档压缩或解压</span><br><span class="line">-f | --file [HOSTNAME:]F 指定存档或设备（缺省为 /dev/rmt0）</span><br><span class="line">-x | --extract | --get 从存档展开文件</span><br><span class="line">-v | --verbose 详细显示处理的文件</span><br></pre></td></tr></table></figure>
<p><strong><em>压缩</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">命令格式：tar -czf  压缩文件名.tar.gz  被压缩文件名</span><br><span class="line"></span><br><span class="line">可先切换到当前目录下。压缩文件名和被压缩文件名都可加入路径。</span><br><span class="line"></span><br><span class="line">示例：tar -czf etl.V300R002B042.tar.gz etl.V300R002B042/</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>每天一个Linux命令</title>
    <url>/Linux/blogs/%E6%AF%8F%E5%A4%A9%E4%B8%80%E4%B8%AALinux%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86-span"><span id="inline-blue">文件和目录管理 </span></a><ul>
<li><a href="#span-idinline-bluechgrp%E5%91%BD%E4%BB%A4span"><span id="inline-blue">chgrp命令</span></a></li>
<li><a href="#span-idinline-bluechattr%E5%91%BD%E4%BB%A4span"><span id="inline-blue">chattr命令</span></a></li>
<li><a href="#span-idinline-bluemore%E5%91%BD%E4%BB%A4span"><span id="inline-blue">more命令</span></a></li>
<li><a href="#span-idinline-bluefind%E5%91%BD%E4%BB%A4span"><span id="inline-blue">find命令</span></a></li>
<li><a href="#span-idinline-bluedirname%E5%91%BD%E4%BB%A4"><span id="inline-blue">dirname命令</span></a></li>
<li><a href="#span-idinline-blueiconv%E5%91%BD%E4%BB%A4span"><span id="inline-blue">iconv命令</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="文件和目录管理"><span id="inline-blue">文件和目录管理 </span></span></h1><h2><span id="chgrp命令"><span id="inline-blue">chgrp命令</span></span></h2><p><strong>作用</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chgrp用来变更文件或目录的所属群组。</span><br><span class="line">组名可以是用户组的id,也可以是用户组的名称，文件名可以是空格分割的文件列表，也可以是通配符描述的集合，只有文件主和超级用户才可以使用该命令。</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong><br>-c:与-v命令像相似，仅显示变更的部分。<br>-f:不显示错误信息。<br>-h:只对符号链接文件做修改，不改变其对应的原始文件。<br>-R:递归处理，对指令目录下的文件及目录一并处理。<br>-v:显示命令执行的详细过程。<br>–reference=&lt;参考文件或目录&gt;:把指定文件或目录设置成参考文件或目录相同的群组。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将erm_gd目录的群组递归更改为report_hrb,显示详细的处理过程。</span></span><br><span class="line">[root@lwdCSCDN tmp]# ls</span><br><span class="line">elasticsearch-2738171260560954631  erm_gd  mysql.sock  pulse-24KvvDfOHjjf  v8-compile-cache-0</span><br><span class="line">[root@lwdCSCDN tmp]# chgrp -vR report_hrb erm_gd</span><br><span class="line">&quot;erm_gd/dg_global.sql&quot; 的所属组已更改为report_hrb</span><br><span class="line">&quot;erm_gd/dg_erm_mysql.sql&quot; 的所属组已更改为report_hrb</span><br><span class="line">&quot;erm_gd&quot; 的所属组已更改为report_hrb</span><br></pre></td></tr></table></figure>
<h2><span id="chattr命令"><span id="inline-blue">chattr命令</span></span></h2><p><strong>作用</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chattr命令用来更改文件属性，这项指令可更改ext32文件系统文件或目录属性，属性一共以下8种模式：</span><br><span class="line">a:限制文件或目录仅提供附加用途。</span><br><span class="line">b:不更新文件或目录的最后存取时间。</span><br><span class="line">c:将文件和目录压缩后存放。</span><br><span class="line">d:将文件或目录排除在倾倒操作之外。</span><br><span class="line">i:不得更改文件和目录。</span><br><span class="line">s:保密性删除文件或目录。</span><br><span class="line">S:及时更新文件或目录。</span><br><span class="line">u:预防意外性删除。</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong></p>
<p>-R:将命令目录下的所有文件和子目录一并处理。<br>-v&lt;版本号&gt;:指定文件或目录的版本信息。<br>+属性：开启文件或目录的该项属性。<br>-属性：关闭文件或目录的该项属性。<br>=属性：指定文件或目录的该项属性。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 防止系统中某个文件系统内容被更改。</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# chattr +i a.txt </span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN erm_gd]# rm -rf a.txt </span><br><span class="line">rm: 无法删除&quot;a.txt&quot;: 不允许的操作</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 限制a.txt文件只能进行附加操作</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# chattr +a a.txt </span><br><span class="line">[root@lwdCSCDN erm_gd]# echo &quot;cover the file a.txt&quot; &gt; a.txt</span><br><span class="line">-bash: a.txt: 不允许的操作</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 采用附加方式添加内容</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# echo &quot;append content to file a.txt&quot; &gt;&gt; a.txt</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br><span class="line">[root@lwdCSCDN erm_gd]# vim a.txt </span><br><span class="line"></span><br><span class="line">:ewewqfdsf</span><br><span class="line">append content to file a.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 不可随意更动文件或目录</span></span><br><span class="line">[root@lwdCSCDN erm_gd]# chattr +i a.txt</span><br><span class="line">[root@lwdCSCDN erm_gd]# rename a.txt aa.txt a.txt </span><br><span class="line">rename: renaming a.txt to aa.txt failed: 不允许的操作</span><br><span class="line">You have new mail in /var/spool/mail/root</span><br></pre></td></tr></table></figure>



<h2><span id="more命令"><span id="inline-blue">more命令</span></span></h2><p><strong>作用</strong><br>    基于vi编辑文本过滤器，以全屏幕分页显示文件内容，支持vi模式下关键字定位操作。<br>    快捷键功能<br>    enter :显示文本下一行内容<br>    space : 显示下一屏文本<br>    q:退出more命令<br>    b:返回上一屏文本内容<br>    h:显示帮助命令<br>    按斜线符/:接着输入一个模式，可以在文本中寻找下一个相匹配的模式。</p>
<p><strong>选项</strong><br>-d :输出帮助信息<br>-c :不进行滚屏，每次刷新这个屏幕。<br>-s :合并多余的空白行。<br>-u :禁止下划线<br>-n ：n代表每一屏展示的文本行数。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 一屏显示10行文本内容，文本空白行合并，显示提示信息，不进行滚屏，每次刷新整个屏幕。</span></span><br><span class="line">[root@lwdCSCDN conf]# more -dsc -10 nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">user  nobody;</span></span><br><span class="line">user root;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"><span class="meta">--More--(5%</span><span class="bash">)[Press space to <span class="built_in">continue</span>, <span class="string">&#x27;q&#x27;</span> to quit.]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 搜索字符串‘<span class="built_in">limit</span>’所在位置，按键盘上n键，可定位到下一个位置。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">user  nobody;</span></span><br><span class="line">user root;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line">/limit</span><br></pre></td></tr></table></figure>





<h2><span id="find命令"><span id="inline-blue">find命令</span></span></h2><p><strong>作用</strong><br>    find命令用来在指定目录下查找对应的文件，如果不设置任何参数的话，则在当前目录下查找，并将结果全部显示。<br><strong>语法</strong><br>find path -option [   -print ]   [ -exec   -ok   command ]   {} ;<br><strong>选项</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find 根据下列规则判断 path 和 expression，在命令列上第一个 - ( ) , ! 之前的部份为 path，之后的是 expression。如果 path 是空字串则使用目前路径，如果 expression 是空字串则使用 -print 为预设 expression。</span><br><span class="line"></span><br><span class="line">expression 中可使用的选项有二三十个之多，在此只介绍最常用的部份。</span><br><span class="line"></span><br><span class="line">-mount, -xdev : 只检查和指定目录在同一个文件系统下的文件，避免列出其它文件系统中的文件</span><br><span class="line"></span><br><span class="line">-amin n : 在过去 n 分钟内被读取过</span><br><span class="line"></span><br><span class="line">-anewer file : 比文件 file 更晚被读取过的文件</span><br><span class="line"></span><br><span class="line">-atime n : 在过去n天内被读取过的文件</span><br><span class="line"></span><br><span class="line">-cmin n : 在过去 n 分钟内被修改过</span><br><span class="line"></span><br><span class="line">-cnewer file :比文件 file 更新的文件</span><br><span class="line"></span><br><span class="line">-ctime n : 在过去n天内被修改过的文件</span><br><span class="line"></span><br><span class="line">-empty : 空的文件-gid n or -group name : gid 是 n 或是 group 名称是 name</span><br><span class="line"></span><br><span class="line">-ipath p, -path p : 路径名称符合 p 的文件，ipath 会忽略大小写</span><br><span class="line"></span><br><span class="line">-name name, -iname name : 文件名称符合 name 的文件。iname 会忽略大小写</span><br><span class="line"></span><br><span class="line">-size n : 文件大小 是 n 单位，b 代表 512 位元组的区块，c 表示字元数，k 表示 kilo bytes，w 是二个位元组。</span><br><span class="line"></span><br><span class="line">-type c : 文件类型是 c 的文件。</span><br><span class="line"></span><br><span class="line">d: 目录</span><br><span class="line"></span><br><span class="line">c: 字型装置文件</span><br><span class="line"></span><br><span class="line">b: 区块装置文件</span><br><span class="line"></span><br><span class="line">p: 具名贮列</span><br><span class="line"></span><br><span class="line">f: 一般文件</span><br><span class="line"></span><br><span class="line">l: 符号连结</span><br><span class="line"></span><br><span class="line">s: socket</span><br><span class="line"></span><br><span class="line">-pid n : process id 是 n 的文件</span><br><span class="line"></span><br><span class="line">你可以使用 ( ) 将运算式分隔，并使用下列运算。</span><br><span class="line"></span><br><span class="line">exp1 -and exp2</span><br><span class="line"></span><br><span class="line">! expr</span><br><span class="line"></span><br><span class="line">-not expr</span><br><span class="line"></span><br><span class="line">exp1 -or exp2</span><br><span class="line"></span><br><span class="line">exp1, exp2	</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/etc、/root 目录下查找passwd字符串，不区分大小写</span></span><br><span class="line">[root@demo_mdn ~]# find /etc /root -iname passwd</span><br><span class="line">/etc/pam.d/passwd</span><br><span class="line">/etc/passwd</span><br><span class="line">/root/.vnc/passwd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">/etc目录下查找passwd字符串，？代表通配单个字符</span></span><br><span class="line">[root@demo_mdn ~]# find /etc -name &quot;passwd?&quot;</span><br><span class="line">/etc/passwd-</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">/etc目录下查找passwd字符串，[]代表通配任意字符</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script -name &quot;[ab].sh&quot;</span><br><span class="line">/BI/hrb_BI/etl/script/a.sh</span><br><span class="line">/BI/hrb_BI/etl/script/b.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">-a 连接两个不同的条件（两个条件必须同时满足）</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script -name &quot;*S.sh&quot; -a -user root</span><br><span class="line">/BI/hrb_BI/etl/script/etlS.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/tmp下一般类型文件</span></span><br><span class="line">[root@demo_mdn script]# find /tmp -type f</span><br><span class="line">/tmp/pulse-ft3VHPly7Wmg/pid</span><br><span class="line">/tmp/orbit-gdm/bonobo-activation-register-914f9f817ba337d787f3493d0000001b.lock</span><br><span class="line">/tmp/orbit-gdm/bonobo-activation-server-914f9f817ba337d787f3493d0000001b-ior</span><br><span class="line">/tmp/.X0-lock</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下超过30天没有访问过的文件，&#123;&#125; 代表查找到的文件，&#123;&#125;和\之间有空格</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script -atime +30 -exec ls &#123;&#125; \;</span><br><span class="line">/BI/hrb_BI/etl/script/mysqld_kill_sleep.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlP.sh</span><br><span class="line">/BI/hrb_BI/etl/script/reportSource.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlD.sh</span><br><span class="line">/BI/hrb_BI/etl/script/isFileExists.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlS.sh</span><br><span class="line">/BI/hrb_BI/etl/script/stop.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下等于2k的文件</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script/  -size 2M</span><br><span class="line">[root@demo_mdn script]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下大于2k的文件</span> </span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script/  -size +2k</span><br><span class="line">/BI/hrb_BI/etl/script/</span><br><span class="line">/BI/hrb_BI/etl/script/etl.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">查找/BI/hrb_BI/etl/script 目录下小于2k的文件</span></span><br><span class="line">[root@demo_mdn script]# find /BI/hrb_BI/etl/script/  -size -2k</span><br><span class="line">/BI/hrb_BI/etl/script/mysqld_kill_sleep.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlP.sh</span><br><span class="line">/BI/hrb_BI/etl/script/reportSource.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlD.sh</span><br><span class="line">/BI/hrb_BI/etl/script/a.sh</span><br><span class="line">/BI/hrb_BI/etl/script/b.sh</span><br><span class="line">/BI/hrb_BI/etl/script/isFileExists.sh</span><br><span class="line">/BI/hrb_BI/etl/script/ab.sh</span><br><span class="line">/BI/hrb_BI/etl/script/stat.sh</span><br><span class="line">/BI/hrb_BI/etl/script/etlS.sh</span><br><span class="line">/BI/hrb_BI/etl/script/stop.sh</span><br></pre></td></tr></table></figure>



<h2><span id="dirname命令"><span id="inline-blue">dirname命令</span></span></h2><p><strong><em>作用</em></strong><br>去除参数里面非目录部分<br>特殊情况1 最后一个字符是”/“,则截断到倒数第二个”/“,并忽略之后的全部字符。<br>特殊情况2 如果参数没有目录对应则返回当前目录。</p>
<p><strong><em>实例</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demo_mdn user]# dirname /a/b/file1.txt</span><br><span class="line">/a/b</span><br><span class="line"></span><br><span class="line">[root@demo_mdn user]# dirname /a/b</span><br><span class="line">/a </span><br><span class="line"></span><br><span class="line">[root@demo_mdn user]# dirname /a/b/</span><br><span class="line">/a</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">没有目录对应的情况下，返回当前目录。</span></span><br><span class="line">[root@demo_mdn user]# dirname a</span><br><span class="line">. </span><br></pre></td></tr></table></figure>

<h2><span id="iconv命令"><span id="inline-blue">iconv命令</span></span></h2><p><strong><em>作用</em></strong><br>    转换文件编码</p>
<p><strong><em>选项</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-f 源文件编码方式</span><br><span class="line">-t 目的文件编码方式</span><br><span class="line">-s 忽略告警信息，但不包括错误信息</span><br><span class="line">-o 指明编码后的输出文件</span><br><span class="line">-c 忽略非法字符</span><br><span class="line">-l 列出当前支持的编码方式</span><br></pre></td></tr></table></figure>
<p><strong><em>实例</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">列出所有支持的编码方式</span></span><br><span class="line">[root@demo_mdn user]# iconv -l</span><br><span class="line"></span><br><span class="line">The following list contain all the coded character sets known.  This does</span><br><span class="line">not necessarily mean that all combinations of these names can be used for</span><br><span class="line">the FROM and TO command line parameters.  One coded character set can be</span><br><span class="line">listed with several different names (aliases).</span><br><span class="line"></span><br><span class="line">  437, 500, 500V1, 850, 851, 852, 855, 856, 857, 860, 861, 862, 863, 864, 865,</span><br><span class="line">  866, 866NAV, 869, 874, 904, 1026, 1046, 1047, 8859_1, 8859_2, 8859_3, 8859_4,</span><br><span class="line">  8859_5, 8859_6, 8859_7, 8859_8, 8859_9, 10646-1:1993, 10646-1:1993/UCS4</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将文件file.txt 由gbk2312编码转换为UTF-8，并输出到file2.txt</span></span><br><span class="line">[root@demo_mdn user]# icon file1.txt -f gbk2312 -t UTF-8 -o file2.txt </span><br></pre></td></tr></table></figure>








<p><strong><em>解压缩</em></strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">　命令格式：tar -zxvf  压缩文件名.tar.gz</span><br><span class="line">　</span><br><span class="line">　解压缩后的文件只能放在当前的目录。</span><br><span class="line"></span><br><span class="line">示例：tar -zxvf etl.V300R002B042.tar.gz </span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>markdown转换为word实现</title>
    <url>/markdown/blogs/markdown%E8%BD%AC%E6%8D%A2%E4%B8%BAword%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>平时记录习惯使用markdown作为记录工具，兼容性好，但是有时需要提供word格式的文档，不想重写再2整理一遍，想着能不能直接通过markdown直接转换为word格式，一番尝试之后终于成功了。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>首先需要安装pandoc工具，实现markdown转换为word目前来说实现效果比较不错的工具，如果使用typora作为markdown编辑工具，那么想要在typora导出word文档，typora就会引导用户安装pandoc,<br>在已经安装pandoc的情况下，转换的简单命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pandoc -s test.md -o dest.docx</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<p>-s : markdown源文件名称<br>-o : 目的word文件名称</p>
<p>以上命令在md格式文档路径下执行，默认该目录下生成对应word文件，转换之后的word查看之后发现格式混乱，列表和表格样式缺失，导致达不到预期效果，好在pandoc在实现转换时提供参数–reference-doc指定导出的样式。<br>调用方式如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pandoc -s source.md -o dest.docx --reference-doc templ.docx</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其中templ.docx为word导出时指定的参考模板，以下是该模板下载链接：<br> <a href="https://pan.baidu.com/s/12Z_RRSCgs01xRbFEH0KsNg?pwd=cyvf">https://pan.baidu.com/s/12Z_RRSCgs01xRbFEH0KsNg?pwd=cyvf</a> 提取码: cyvf</p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
        <tag>pandoc</tag>
        <tag>word</tag>
        <tag>typora</tag>
      </tags>
  </entry>
  <entry>
    <title>微服务启动加载耗时问题分析</title>
    <url>/SpringCloud/blogs/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E5%8A%A0%E8%BD%BD%E8%80%97%E6%97%B6%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90span"><span id="inline-blue">问题分析</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>Linux: CentOS Linux release 7.7.1908 (Core)<br>JDK: 1.8.0_321<br>SpringBoot: 2.6.6<br>springCloud: 1.8.0_321<br>nacos: 2.1.1</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>nacos误使用集群模式启动之后，发现微服务启动过程非常慢，并且nacos启动之后logs目录下protocol-raft.log文件中一直打印集群节点注册失败，即使将nacos恢复成单机模式，甚至重新初始化nacos对应的数据库，删除data目录下有关raft数据文件，protocol-raft.log还是会打印错误，但启动nacos还是会打印一次错误日志，但通过接口请求nacos对应的配置api接口，能够正常获取到数据。<br>接着在Linux服务器上启动微服务特别慢，需要3至4分钟微服务才能正常启动完并注册到nacos,如果使用的是脚本进行批量启动，有些服务甚至都启动不了，半个小时都无法正常启动起来。cpu的占用突然涨到300%，出现上述情况一度怀疑是不是nacos没有重置好导致出现这种问题。</p>
<p>完整启动日志如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2025-12-17 16:03:19.368  INFO [test-admin-biz,,] 10523 --- [           main] c.a.n.client.env.SearchableProperties    : properties search order:PROPERTIES-&gt;JVM-&gt;ENV-&gt;DEFAULT_SETTING</span><br><span class="line">DEBUG StatusLogger org.slf4j.helpers.Log4jLoggerFactory is not on classpath. Good!</span><br><span class="line">2025-12-17 16:03:20.705 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.SpringApplication               : Loading source class org.springframework.cloud.bootstrap.BootstrapImportSelectorConfiguration</span><br><span class="line">2025-12-17 16:03:25.223  INFO [test-admin-biz,,] 10523 --- [           main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.</span><br><span class="line">2025-12-17 16:03:25.227  INFO [test-admin-biz,,] 10523 --- [           main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.</span><br><span class="line">2025-12-17 16:03:27.649 DEBUG [test-admin-biz,,] 10523 --- [           main] ConditionEvaluationReportLoggingListener : </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">============================</span><br><span class="line">CONDITIONS EVALUATION REPORT</span><br><span class="line">============================</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Positive matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   ConfigurationPropertiesRebinderAutoConfiguration matched:</span><br><span class="line">      - @ConditionalOnBean (types: org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor; SearchStrategy: all) found bean &#x27;org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor&#x27; (OnBeanCondition)</span><br><span class="line"></span><br><span class="line"><span class="meta">   ConfigurationPropertiesRebinderAutoConfiguration#</span><span class="bash">configurationPropertiesBeans matched:</span></span><br><span class="line">      - @ConditionalOnMissingBean (types: org.springframework.cloud.context.properties.ConfigurationPropertiesBeans; SearchStrategy: current) did not find any beans (OnBeanCondition)</span><br><span class="line"></span><br><span class="line"><span class="meta">   ConfigurationPropertiesRebinderAutoConfiguration#</span><span class="bash">configurationPropertiesRebinder matched:</span></span><br><span class="line">      - @ConditionalOnMissingBean (types: org.springframework.cloud.context.properties.ConfigurationPropertiesRebinder; SearchStrategy: current) did not find any beans (OnBeanCondition)</span><br><span class="line"></span><br><span class="line">   EncryptionBootstrapConfiguration matched:</span><br><span class="line">      - @ConditionalOnClass found required class &#x27;org.springframework.security.crypto.encrypt.TextEncryptor&#x27; (OnClassCondition)</span><br><span class="line"></span><br><span class="line"><span class="meta">   EncryptionBootstrapConfiguration#</span><span class="bash">keyProperties matched:</span></span><br><span class="line">      - @ConditionalOnMissingBean (types: org.springframework.cloud.bootstrap.encrypt.KeyProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)</span><br><span class="line"></span><br><span class="line">   NacosConfigBootstrapConfiguration matched:</span><br><span class="line">      - @ConditionalOnProperty (spring.cloud.nacos.config.enabled) matched (OnPropertyCondition)</span><br><span class="line"></span><br><span class="line"><span class="meta">   NacosConfigBootstrapConfiguration#</span><span class="bash">nacosConfigManager matched:</span></span><br><span class="line">      - @ConditionalOnMissingBean (types: com.alibaba.cloud.nacos.NacosConfigManager; SearchStrategy: all) did not find any beans (OnBeanCondition)</span><br><span class="line"></span><br><span class="line"><span class="meta">   NacosConfigBootstrapConfiguration#</span><span class="bash">nacosConfigProperties matched:</span></span><br><span class="line">      - @ConditionalOnMissingBean (types: com.alibaba.cloud.nacos.NacosConfigProperties; SearchStrategy: all) did not find any beans (OnBeanCondition)</span><br><span class="line"></span><br><span class="line"><span class="meta">   PropertyPlaceholderAutoConfiguration#</span><span class="bash">propertySourcesPlaceholderConfigurer matched:</span></span><br><span class="line">      - @ConditionalOnMissingBean (types: org.springframework.context.support.PropertySourcesPlaceholderConfigurer; SearchStrategy: current) did not find any beans (OnBeanCondition)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Negative matches:</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   EncryptionBootstrapConfiguration.RsaEncryptionConfiguration:</span><br><span class="line">      Did not match:</span><br><span class="line">         - Keystore nor key found in Environment (EncryptionBootstrapConfiguration.KeyCondition)</span><br><span class="line">      Matched:</span><br><span class="line">         - @ConditionalOnClass found required class &#x27;org.springframework.security.rsa.crypto.RsaSecretEncryptor&#x27; (OnClassCondition)</span><br><span class="line"></span><br><span class="line">   EncryptionBootstrapConfiguration.VanillaEncryptionConfiguration:</span><br><span class="line">      Did not match:</span><br><span class="line">         - @ConditionalOnMissingClass found unwanted class &#x27;org.springframework.security.rsa.crypto.RsaSecretEncryptor&#x27; (OnClassCondition)</span><br><span class="line"></span><br><span class="line"><span class="meta">   NacosConfigBootstrapConfiguration#</span><span class="bash">smartConfigurationPropertiesRebinder:</span></span><br><span class="line">      Did not match:</span><br><span class="line">         - @ConditionalOnMissingBean (types: org.springframework.cloud.context.properties.ConfigurationPropertiesRebinder; SearchStrategy: current) found beans of type &#x27;org.springframework.cloud.context.properties.ConfigurationPropertiesRebinder&#x27; configurationPropertiesRebinder (OnBeanCondition)</span><br><span class="line"></span><br><span class="line">   NacosDiscoveryClientConfigServiceBootstrapConfiguration:</span><br><span class="line">      Did not match:</span><br><span class="line">         - @ConditionalOnClass did not find required class &#x27;org.springframework.cloud.config.client.ConfigServicePropertySourceLocator&#x27; (OnClassCondition)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exclusions:</span><br><span class="line">-----------</span><br><span class="line"></span><br><span class="line">    None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Unconditional classes:</span><br><span class="line">----------------------</span><br><span class="line"></span><br><span class="line">    None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::                (v2.6.6)</span><br><span class="line"></span><br><span class="line">2025-12-17 16:03:36.055 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loading from YAML: Byte array resource [zipkin.yml]</span><br><span class="line">2025-12-17 16:03:36.083 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Merging document (no matchers set): &#123;spring=&#123;sleuth=&#123;enabled=false, sampler=&#123;probability=1.0&#125;, web=&#123;client=&#123;enabled=true&#125;&#125;&#125;, zipkin=&#123;base-url=http://10.9.216.12:9411/, discoveryClientEnabled=false, sender=&#123;type=web, web=&#123;enabled=false&#125;&#125;&#125;&#125;&#125;</span><br><span class="line">2025-12-17 16:03:36.087 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loaded 1 document from YAML resource: Byte array resource [zipkin.yml]</span><br><span class="line">2025-12-17 16:03:36.222 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loading from YAML: Byte array resource [database.yml]</span><br><span class="line">2025-12-17 16:03:36.240 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Merging document (no matchers set): &#123;spring=&#123;datasource=&#123;driverClassName=com.mysql.cj.jdbc.Driver, hikari=&#123;connectionTimeout=5000, idleTimeout=60000, keepaliveTime=30000, maxLifetime=1800000, maxPoolSize=5, minimumIdle=2, validationTimeout=3000&#125;, username=root, password=coship, type=com.zaxxer.hikari.HikariDataSource, url=jdbc:mysql://10.9.216.14:3306/test-cloud?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8&amp;autoReconnect=true&amp;rewriteBatchedStatements=true&amp;allowPublicKeyRetrieval=true&amp;nullCatalogMeansCurrent=true&#125;&#125;&#125;</span><br><span class="line">2025-12-17 16:03:36.244 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loaded 1 document from YAML resource: Byte array resource [database.yml]</span><br><span class="line">2025-12-17 16:03:36.444 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loading from YAML: Byte array resource [redis.yml]</span><br><span class="line">2025-12-17 16:03:36.456 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Merging document (no matchers set): &#123;redisson=&#123;keyPrefix=, nettyThreads=4, singleServerConfig=&#123;clientName=redissonSingleClient, connectionMinimumIdleSize=4, connectionPoolSize=8, idleConnectionTimeout=10000, subscriptionConnectionPoolSize=8, timeout=15000&#125;, threads=4&#125;, spring=&#123;redis=&#123;database=1, host=10.9.216.12, password=123456, port=6379, ssl=&#123;enabled=false&#125;, timeout=10s&#125;&#125;&#125;</span><br><span class="line">2025-12-17 16:03:36.457 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loaded 1 document from YAML resource: Byte array resource [redis.yml]</span><br><span class="line">2025-12-17 16:03:36.523 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loading from YAML: Byte array resource [elasticsearch.yml]</span><br><span class="line">2025-12-17 16:03:36.533 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Merging document (no matchers set): &#123;spring=&#123;data=&#123;elasticsearch=&#123;apiKey=, connection-request-timeout=500, connection-timeout=10000, endpoints=10.9.216.14:9200, max-conn-per-route=2, max-conn-total=4, password=, repositories=&#123;enabled=true&#125;, socket-timeout=30000, username=&#125;&#125;&#125;&#125;</span><br><span class="line">2025-12-17 16:03:36.534 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loaded 1 document from YAML resource: Byte array resource [elasticsearch.yml]</span><br><span class="line">2025-12-17 16:03:36.561 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loading from YAML: Byte array resource [common.yml]</span><br><span class="line">2025-12-17 16:03:36.566 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Merging document (no matchers set): &#123;logging=&#123;config=http://$&#123;spring.cloud.nacos.config.server-addr&#125;/nacos/v1/cs/configs?group=$&#123;spring.cloud.nacos.config.group&#125;&amp;tenant=$&#123;spring.cloud.nacos.config.namespace&#125;&amp;username=$&#123;spring.cloud.nacos.discovery.username&#125;&amp;password=$&#123;spring.cloud.nacos.discovery.password&#125;&amp;dataId=logback-spring.xml, file=&#123;path=./logs/$&#123;spring.application.name&#125;&#125;, level=&#123;root=INFO&#125;&#125;, server=&#123;undertow=&#123;accesslog=&#123;enabled=true, dir=logs/$&#123;spring.application.name&#125;, pattern=common, prefix=access_log., suffix=log, rotate=true&#125;, threads=&#123;io=8, worker=256&#125;, direct-buffers=true, max-http-post-size=-1, eager-filter-init=true, buffer-size=1024&#125;&#125;&#125;</span><br><span class="line">2025-12-17 16:03:36.566 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loaded 1 document from YAML resource: Byte array resource [common.yml]</span><br><span class="line">2025-12-17 16:03:36.597 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loading from YAML: Byte array resource [emqx.yml]</span><br><span class="line">2025-12-17 16:03:36.605 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Merging document (no matchers set): &#123;emqx=&#123;open=false, config=&#123;auth=&#123;openJWT=true, openBase64=true, secret=Y29zaGlw&#125;, api=&#123;apiKey=6e4ec411e7ccb951, secretKey=883TSJ4Mqhgs84p6sUltsaFh9CDl019AI5L9AFaRThEboO, apiUrl=http://10.9.216.12:18083/api/v5/&#125;, client=&#123;username=admin, password=Coship7000?, url=tcp://10.9.216.12:1883, subTopic=default/#, qos=0, defaultQos=0, defaultTopic=default&#125;, executor=&#123;isOpen=true, corePoolSize=8, maxPoolSize=16, queueCapacity=9999, thread-name-prefix=emqx-executor-&#125;, expand=&#123;statusThreadsNum=5&#125;&#125;&#125;&#125;</span><br><span class="line">2025-12-17 16:03:36.606 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loaded 1 document from YAML resource: Byte array resource [emqx.yml]</span><br><span class="line">2025-12-17 16:03:36.633  WARN [test-admin-biz,,] 10523 --- [           main] c.a.c.n.c.NacosPropertySourceBuilder     : Ignore the empty nacos configuration and get it based on dataId[test-admin-biz] &amp; group[DEFAULT_GROUP_YML]</span><br><span class="line">2025-12-17 16:03:36.648  WARN [test-admin-biz,,] 10523 --- [           main] c.a.c.n.c.NacosPropertySourceBuilder     : Ignore the empty nacos configuration and get it based on dataId[test-admin-biz.yml] &amp; group[DEFAULT_GROUP_YML]</span><br><span class="line">2025-12-17 16:03:36.698 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loading from YAML: Byte array resource [test-admin-biz-dev.yml]</span><br><span class="line">2025-12-17 16:03:36.774 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Merging document (no matchers set): &#123;server=&#123;port=9020&#125;, mybatis-plus=&#123;configuration=&#123;jdbc-type-for-null=, log-impl=org.apache.ibatis.logging.stdout.StdOutImpl, default-executor-type=reuse, cache-enabled=false, defaultStatementTimeout=1000, use-generated-keys=true, map-underscore-to-camel-case=true, call-setters-on-nulls=true&#125;, type-aliases-package=com.coship.test.quartz.entity.**,com.coship.test.common.entity.**,com.coship.test.adminapi.entity.**, type-handlers-package=com.coship.test.common.entity.handler.**, mapper-locations=classpath*:mapper/*.xml&#125;, ignore=&#123;urls=[/oauth/**, /authority/**, /actuator/**, /v3/api-docs/**, /swagger-ui.html, /swagger-resources, /webjars/**, /druid/**, /swagger-ui/**, /doc.html, /favicon.ico, /user/getCaptcha, /**/api/**, /doc.html]&#125;, management=&#123;health=&#123;elasticsearch=&#123;enabled=false&#125;&#125;, endpoints=&#123;web=&#123;exposure=&#123;include=*&#125;&#125;&#125;, endpoint=&#123;health=&#123;show-details=ALWAYS&#125;, bus-refresh=&#123;enabled=true&#125;&#125;, metrics=&#123;tags=&#123;application=$&#123;spring.application.name&#125;&#125;&#125;&#125;, spring=&#123;servlet=&#123;multipart=&#123;max-file-size=200MB, max-request-size=200MB&#125;&#125;&#125;, test=&#123;file-path=/home/lmode/share, upload-filePath=http://127.0.0.1/loveFamily/, publicUrl=http://aijiaapp.fjgdwl.com/download/, storage=&#123;name=aliyun, complete-check=false, aliyun=&#123;access-key=LTAI5tD8tKyrHf1MhDgRq4nS, secret-key=XWAAjgQSLuMu8cB2eWAN2mU5Na1tIx, bucket-name=coframe-album, endpoint=https://oss-cn-shenzhen.aliyuncs.com, domain=&#125;&#125;&#125;, jpush=&#123;enabled=true, appProps=[&#123;name=app, appkey=4a3fa1bb51abff750340ac8a, secret=60107941beef12a20eade3c3, apnsProduction=false&#125;, &#123;name=pad, appkey=b047b0a73c3b32533ce761d2, secret=53c124649a4dc2234168cd86, apnsProduction=false&#125;]&#125;, knife4j=&#123;basic=&#123;enable=false, username=admin, password=Coship7000_admin&#125;, enable=true, production=false, setting=&#123;enable-filter-multipart-apis=true, language=zh_cn&#125;&#125;, springdoc=&#123;swagger-ui=&#123;url=/v3/api-docs, config-url=/v3/api-docs/swagger-config, enabled=true&#125;, license=&#123;name=Apache License, Version 2.0, license-url=https://www.apache.org/licenses/LICENSE-2.0.html&#125;, contact=&#123;email=huangdengke@coship.com, name=huangdengke, url=huangdengke@coship.com&#125;, packages-to-scan=com.coship.test.adminbiz.controller, api-docs=&#123;version=openapi_3_0, enabled=true&#125;, termsOfService=服务条款, version=V1.0, title=ffcs-admin-biz, description=admin后台业务接口&#125;, log=&#123;storage=&#123;selectType=1, storageType=1, streamSupport=true&#125;&#125;, security=&#123;oauth2=&#123;resource=&#123;jwt=&#123;key-value=test_oauth_key&#125;&#125;, client=&#123;client-id=test-admin-biz, client-secret=test-admin-biz-secret&#125;&#125;&#125;&#125;</span><br><span class="line">2025-12-17 16:03:36.780 DEBUG [test-admin-biz,,] 10523 --- [           main] o.s.boot.env.OriginTrackedYamlLoader     : Loaded 1 document from YAML resource: Byte array resource [test-admin-biz-dev.yml]</span><br><span class="line">2025-12-17 16:03:36.790  INFO [test-admin-biz,,] 10523 --- [           main] b.c.PropertySourceBootstrapConfiguration : Located property source: [BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-test-admin-biz-dev.yml,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-test-admin-biz.yml,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-test-admin-biz,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-emqx.yml,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-common.yml,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-elasticsearch.yml,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-redis.yml,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-database.yml,DEFAULT_GROUP_YML&#x27;&#125;, BootstrapPropertySource &#123;name=&#x27;bootstrapProperties-zipkin.yml,DEFAULT_GROUP_YML&#x27;&#125;]</span><br><span class="line">2025-12-17 16:03:37.386  INFO [test-admin-biz,,]  10523 --- [           main] c.c.p.a.testAdminBizApplication    : The following 1 profile is active: &quot;dev&quot;</span><br><span class="line">2025-12-17 16:03:56.431  INFO [test-admin-biz,,]  10523 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!</span><br><span class="line">2025-12-17 16:03:56.459  INFO [test-admin-biz,,]  10523 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.</span><br><span class="line">2025-12-17 16:03:56.699  INFO [test-admin-biz,,]  10523 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 144 ms. Found 0 Redis repository interfaces.</span><br><span class="line">2025-12-17 16:03:59.806  INFO [test-admin-biz,,]  10523 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named &#x27;errorChannel&#x27; has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.</span><br><span class="line">2025-12-17 16:03:59.995  INFO [test-admin-biz,,]  10523 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named &#x27;integrationHeaderChannelRegistry&#x27; has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.</span><br><span class="line">2025-12-17 16:04:01.181  INFO [test-admin-biz,,]  10523 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=3d9c2d07-f0cd-3be2-96f9-d8eabdaf2876</span><br><span class="line">2025-12-17 16:04:04.501  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;lockFailureSkipStrategy&#x27; of type [com.coship.test.common.redis.aspect.lock.LockFailureSkipStrategy] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:04.509  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;lockFailureThrowStrategy&#x27; of type [com.coship.test.common.redis.aspect.lock.LockFailureThrowStrategy] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:04.527  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration&#x27; of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:04.534  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration&#x27; of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:04.540  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;loadBalancerClientsDefaultsMappingsProvider&#x27; of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$535/1207231495] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:04.564  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;defaultsBindHandlerAdvisor&#x27; of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:07.015  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;org.springframework.integration.config.IntegrationManagementConfiguration&#x27; of type [org.springframework.integration.config.IntegrationManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:07.113  INFO [test-admin-biz,,]  10523 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#x27;integrationChannelResolver&#x27; of type [org.springframework.integration.support.channel.BeanFactoryChannelResolver] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</span><br><span class="line">2025-12-17 16:04:10.410  INFO [test-admin-biz,,]  10523 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9020 (http)</span><br><span class="line">2025-12-17 16:04:10.493  INFO [test-admin-biz,,]  10523 --- [           main] o.a.coyote.http11.Http11NioProtocol      : Initializing ProtocolHandler [&quot;http-nio-9020&quot;]</span><br><span class="line">2025-12-17 16:04:10.498  INFO [test-admin-biz,,]  10523 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2025-12-17 16:04:10.498  INFO [test-admin-biz,,]  10523 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.60]</span><br><span class="line">2025-12-17 16:04:11.205  INFO [test-admin-biz,,]  10523 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2025-12-17 16:04:11.209  INFO [test-admin-biz,,]  10523 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 33708 ms</span><br><span class="line">Logging initialized using &#x27;class org.apache.ibatis.logging.stdout.StdOutImpl&#x27; adapter.</span><br><span class="line">Registered plugin: &#x27;com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor@5ac86ba5&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/DeptDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/DictDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/DictItemDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/FileInfoDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/GenDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/LogApiDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/LogLoginDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/MenuDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/OauthClientDetailsDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/RoleDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/RoleMenu.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/ServiceConfigDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/classes!/mapper/UserDao.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/AiConfigDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/AppLoginLogDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/AppUserDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/AppUserSocialDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/AppVersionDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/DeviceAdDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/DeviceDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/DeviceLoginLogDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/DeviceNoticeConfigDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/DeviceSlideConfigDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/DeviceUserConfigDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/FileDownloadDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/FileFragmentInfoDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/FileThumbnailDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/FileUploadDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/LabelInfoDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/MaterialDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/MaterialFaceLabelDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/MidDeviceUserDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/PrivilegesUserDAO.xml]&#x27;</span><br><span class="line">Parsed mapper file: &#x27;URL [jar:file:/usr/local/test/dev/test-admin-biz/test-admin-biz.jar!/BOOT-INF/lib/test-common-dao-0.0.1-SNAPSHOT.jar!/mapper/UploadConfigDAO.xml]&#x27;</span><br><span class="line"> _ _   |_  _ _|_. ___ _ |    _ </span><br><span class="line">| | |\/|_)(_| | |_\  |_)||_|_\ </span><br><span class="line">     /               |         </span><br><span class="line">                        3.5.3 </span><br><span class="line">2025-12-17 16:04:27.352  INFO [test-admin-biz,,]  10523 --- [           main] org.redisson.Version                     : Redisson 3.17.7</span><br><span class="line">2025-12-17 16:04:29.544  INFO [test-admin-biz,,]  10523 --- [isson-netty-2-3] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 10.9.216.12/10.9.216.12:6379</span><br><span class="line">2025-12-17 16:04:29.606  INFO [test-admin-biz,,]  10523 --- [isson-netty-2-3] o.r.c.pool.MasterConnectionPool          : 4 connections initialized for 10.9.216.12/10.9.216.12:6379</span><br><span class="line">2025-12-17 16:04:30.172  INFO [test-admin-biz,,]  10523 --- [           main] c.c.p.common.redis.config.RedisConfig    : 初始化 redis 配置, 连接true</span><br><span class="line">2025-12-17 16:04:58.070  INFO [test-admin-biz,,]  10523 --- [           main] o.s.c.openfeign.FeignClientFactoryBean   : For &#x27;test-api-face&#x27; URL not provided. Will try picking an instance via load-balancing.</span><br><span class="line">2025-12-17 16:05:23.046  INFO [test-admin-biz,,]  10523 --- [           main] c.c.p.c.emqx.constants.ClientConstants   : 内置客户端id：sub_06VKRF2_test-admin-biz_9020，pub_06VKRF2_test-admin-biz_9020</span><br><span class="line">2025-12-17 16:05:24.527  INFO [test-admin-biz,,]  10523 --- [           main] o.s.c.openfeign.FeignClientFactoryBean   : For &#x27;test-admin-log&#x27; URL not provided. Will try picking an instance via load-balancing.</span><br><span class="line">2025-12-17 16:05:25.148  WARN [test-admin-biz,,]  10523 --- [           main] o.s.s.o.p.t.s.JwtAccessTokenConverter    : Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)</span><br><span class="line">2025-12-17 16:05:25.469  INFO [test-admin-biz,,]  10523 --- [           main] o.s.c.openfeign.FeignClientFactoryBean   : For &#x27;test-admin-biz&#x27; URL not provided. Will try picking an instance via load-balancing.</span><br><span class="line">2025-12-17 16:05:25.892  INFO [test-admin-biz,,]  10523 --- [           main] o.s.c.openfeign.FeignClientFactoryBean   : For &#x27;test-admin-biz&#x27; URL not provided. Will try picking an instance via load-balancing.</span><br><span class="line">2025-12-17 16:05:29.698  INFO [test-admin-biz,,]  10523 --- [           main] c.c.p.c.c.properties.ExecutorConfig      : 系统最大线程数：8</span><br><span class="line">2025-12-17 16:05:53.574  WARN [test-admin-biz,,]  10523 --- [           main] o.s.b.a.f.FreeMarkerAutoConfiguration    : Cannot find template location(s): [classpath:/templates/] (please add some templates, check your FreeMarker configuration, or set spring.freemarker.checkTemplateLocation=false)</span><br><span class="line">2025-12-17 16:05:59.374  INFO [test-admin-biz,,]  10523 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will not secure any request</span><br><span class="line">2025-12-17 16:06:03.286  INFO [test-admin-biz,,]  10523 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 21 endpoint(s) beneath base path &#x27;/actuator&#x27;</span><br><span class="line">2025-12-17 16:06:08.959  INFO [test-admin-biz,,]  10523 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding &#123;logging-channel-adapter:_org.springframework.integration.errorLogger&#125; as a subscriber to the &#x27;errorChannel&#x27; channel</span><br><span class="line">2025-12-17 16:06:08.967  INFO [test-admin-biz,,]  10523 --- [           main] o.s.i.channel.PublishSubscribeChannel    : Channel &#x27;test-admin-biz-1.errorChannel&#x27; has 1 subscriber(s).</span><br><span class="line">2025-12-17 16:06:08.969  INFO [test-admin-biz,,]  10523 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean &#x27;_org.springframework.integration.errorLogger&#x27;</span><br><span class="line">2025-12-17 16:06:08.974  INFO [test-admin-biz,,]  10523 --- [           main] o.a.coyote.http11.Http11NioProtocol      : Starting ProtocolHandler [&quot;http-nio-9020&quot;]</span><br><span class="line">2025-12-17 16:06:09.218  INFO [test-admin-biz,,]  10523 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9020 (http) with context path &#x27;&#x27;</span><br><span class="line">2025-12-17 16:06:09.554  INFO [test-admin-biz,,]  10523 --- [           main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.</span><br><span class="line">2025-12-17 16:06:09.560  INFO [test-admin-biz,,]  10523 --- [           main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.</span><br><span class="line">2025-12-17 16:06:11.303  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP_YML test-admin-biz 10.9.216.12:9020 register finished</span><br><span class="line">2025-12-17 16:06:16.482  INFO [test-admin-biz,,]  10523 --- [           main] c.c.p.a.testAdminBizApplication    : Started testAdminBizApplication in 178.972 seconds (JVM running for 180.689)</span><br><span class="line">2025-12-17 16:06:16.792  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=elasticsearch.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.802  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=common.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.804  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=zipkin.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.806  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=redis.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.807  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=test-admin-biz.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.808  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=database.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.810  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=emqx.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.821  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=test-admin-biz-dev.yml, group=DEFAULT_GROUP_YML</span><br><span class="line">2025-12-17 16:06:16.823  INFO [test-admin-biz,,]  10523 --- [           main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=test-admin-biz, group=DEFAULT_GROUP_YML</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="问题分析"><span id="inline-blue">问题分析</span></span></h1><p>出现上述问题之后，首先是将对应的微服务拷贝到另外一台服务器上，发现启动很快，30秒之内就已经完全启动好了，并且批量脚本启动也很快，没有启动加载阻塞的情况，但cpu的占用是一致的，启动过程中都是300%上下波动。如果是批量启动的话，则每个服务占用cpu100%左右。<br>抓取微服务启动过程的堆栈，堆栈信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2025-12-15 11:02:59</span><br><span class="line">Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.321-b07 mixed mode):</span><br><span class="line"></span><br><span class="line">&quot;Attach Listener&quot; #443 daemon prio=9 os_prio=0 tid=0x00007ff6a4205000 nid=0x5824 waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;MySQL Statement Cancellation Timer&quot; #442 daemon prio=5 os_prio=0 tid=0x00007ff60c10d800 nid=0x6f68 in Object.wait() [0x00007ff5b357a000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (on object monitor)</span><br><span class="line">	at java.lang.Object.wait(Native Method)</span><br><span class="line">	at java.util.TimerThread.mainLoop(Timer.java:552)</span><br><span class="line">	- locked &lt;0x00000000d40928a8&gt; (a java.util.TaskQueue)</span><br><span class="line">	at java.util.TimerThread.run(Timer.java:505)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.remote.ConfigChangeNotifier.3&quot; #437 daemon prio=5 os_prio=0 tid=0x00007ff69c330000 nid=0x3581 waiting on condition [0x00007ff5b3176000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd995a30&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.remote.ConfigChangeNotifier.2&quot; #436 daemon prio=5 os_prio=0 tid=0x00007ff6e0336000 nid=0x354f waiting on condition [0x00007ff5b3277000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd995a30&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.remote.ConfigChangeNotifier.1&quot; #435 daemon prio=5 os_prio=0 tid=0x00007ff67c002000 nid=0x3549 waiting on condition [0x00007ff5b3378000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd995a30&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.remote.ConfigChangeNotifier.0&quot; #434 daemon prio=5 os_prio=0 tid=0x00007ff644244000 nid=0x3516 waiting on condition [0x00007ff5b397c000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd995a30&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.AsyncNotifyService.0&quot; #433 daemon prio=5 os_prio=0 tid=0x00007ff6400e7800 nid=0x3512 waiting on condition [0x00007ff5bb8f9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd995ee0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.ConfigSubService.0&quot; #431 daemon prio=5 os_prio=0 tid=0x00007ff6cc014800 nid=0x33b6 waiting on condition [0x00007ff5b3479000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd995c98&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.push.callback.0&quot; #418 daemon prio=5 os_prio=0 tid=0x00007ff67c006000 nid=0x18b2 waiting on condition [0x00007ff5b367b000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c881d8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.remote.TimerScheduler&quot; #417 prio=5 os_prio=0 tid=0x00007ff5e8021800 nid=0x180d waiting on condition [0x00007ff5c01d4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88440&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer7&quot; #408 daemon prio=5 os_prio=0 tid=0x00007ff604202800 nid=0x7461 waiting on condition [0x00007ff5b3b7e000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer6&quot; #407 daemon prio=5 os_prio=0 tid=0x00007ff61c004800 nid=0x6a3e waiting on condition [0x00007ff5b3c7f000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-127&quot; #406 daemon prio=5 os_prio=0 tid=0x00007ff6b0040000 nid=0x51ad waiting on condition [0x00007ff5b3d80000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-126&quot; #405 daemon prio=5 os_prio=0 tid=0x00007ff6b0035800 nid=0x51a3 waiting on condition [0x00007ff5b3e81000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-125&quot; #404 daemon prio=5 os_prio=0 tid=0x00007ff6640f2800 nid=0x51a1 waiting on condition [0x00007ff5b3f82000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-124&quot; #403 daemon prio=5 os_prio=0 tid=0x00007ff6640f0800 nid=0x51a0 waiting on condition [0x00007ff5b4083000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-123&quot; #402 daemon prio=5 os_prio=0 tid=0x00007ff6640ee800 nid=0x5181 waiting on condition [0x00007ff5b4184000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-122&quot; #401 daemon prio=5 os_prio=0 tid=0x00007ff6640ed000 nid=0x5180 waiting on condition [0x00007ff5b4285000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-121&quot; #400 daemon prio=5 os_prio=0 tid=0x00007ff6640eb000 nid=0x517f waiting on condition [0x00007ff5b4386000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-120&quot; #399 daemon prio=5 os_prio=0 tid=0x00007ff6640e9800 nid=0x514c waiting on condition [0x00007ff5b4487000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-119&quot; #398 daemon prio=5 os_prio=0 tid=0x00007ff6640e7800 nid=0x5149 waiting on condition [0x00007ff5b4588000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-118&quot; #397 daemon prio=5 os_prio=0 tid=0x00007ff6640e5800 nid=0x5146 waiting on condition [0x00007ff5b4689000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-117&quot; #396 daemon prio=5 os_prio=0 tid=0x00007ff6640e4000 nid=0x50cb waiting on condition [0x00007ff5b498a000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-116&quot; #395 daemon prio=5 os_prio=0 tid=0x00007ff6640e2000 nid=0x50c4 waiting on condition [0x00007ff5b4a8b000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-115&quot; #394 daemon prio=5 os_prio=0 tid=0x00007ff6640e0800 nid=0x50c3 waiting on condition [0x00007ff5b4b8c000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-114&quot; #393 daemon prio=5 os_prio=0 tid=0x00007ff6640de800 nid=0x5071 waiting on condition [0x00007ff5b4c8d000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-113&quot; #392 daemon prio=5 os_prio=0 tid=0x00007ff6640dc800 nid=0x5070 waiting on condition [0x00007ff5b4d8e000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-112&quot; #391 daemon prio=5 os_prio=0 tid=0x00007ff6640db000 nid=0x506e waiting on condition [0x00007ff5b4e8f000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-111&quot; #390 daemon prio=5 os_prio=0 tid=0x00007ff6640d9000 nid=0x504c waiting on condition [0x00007ff5b4f90000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-110&quot; #389 daemon prio=5 os_prio=0 tid=0x00007ff6640d7000 nid=0x504b waiting on condition [0x00007ff5b5091000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-109&quot; #388 daemon prio=5 os_prio=0 tid=0x00007ff6640d5000 nid=0x504a waiting on condition [0x00007ff5b5192000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-108&quot; #387 daemon prio=5 os_prio=0 tid=0x00007ff6640d3800 nid=0x5031 waiting on condition [0x00007ff5b5293000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-107&quot; #386 daemon prio=5 os_prio=0 tid=0x00007ff6640d1800 nid=0x5030 waiting on condition [0x00007ff5b5394000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-106&quot; #385 daemon prio=5 os_prio=0 tid=0x00007ff6640d0000 nid=0x502f waiting on condition [0x00007ff5b5495000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-105&quot; #384 daemon prio=5 os_prio=0 tid=0x00007ff6640ce000 nid=0x5014 waiting on condition [0x00007ff5b5596000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-104&quot; #383 daemon prio=5 os_prio=0 tid=0x00007ff6640cc000 nid=0x5013 waiting on condition [0x00007ff5b5697000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-103&quot; #382 daemon prio=5 os_prio=0 tid=0x00007ff6640ca800 nid=0x5012 waiting on condition [0x00007ff5b5798000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-102&quot; #381 daemon prio=5 os_prio=0 tid=0x00007ff6640c8800 nid=0x4ffa waiting on condition [0x00007ff5b5899000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-101&quot; #380 daemon prio=5 os_prio=0 tid=0x00007ff6640c7000 nid=0x4ff9 waiting on condition [0x00007ff5b599a000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-100&quot; #379 daemon prio=5 os_prio=0 tid=0x00007ff6640c5000 nid=0x4ff8 waiting on condition [0x00007ff5b5a9b000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-99&quot; #378 daemon prio=5 os_prio=0 tid=0x00007ff6640c3000 nid=0x4fb1 waiting on condition [0x00007ff5b5b9c000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-98&quot; #377 daemon prio=5 os_prio=0 tid=0x00007ff6640c1800 nid=0x4faf waiting on condition [0x00007ff5b5c9d000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-97&quot; #376 daemon prio=5 os_prio=0 tid=0x00007ff6640bf800 nid=0x4fae waiting on condition [0x00007ff5b5d9e000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-96&quot; #375 daemon prio=5 os_prio=0 tid=0x00007ff6640be000 nid=0x4f95 waiting on condition [0x00007ff5b5e9f000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-95&quot; #374 daemon prio=5 os_prio=0 tid=0x00007ff6640bc000 nid=0x4f94 waiting on condition [0x00007ff5b5fa0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-94&quot; #373 daemon prio=5 os_prio=0 tid=0x00007ff6640ba000 nid=0x4f93 waiting on condition [0x00007ff5b60a1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-93&quot; #372 daemon prio=5 os_prio=0 tid=0x00007ff6640b8800 nid=0x4f72 waiting on condition [0x00007ff5b61a2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-92&quot; #371 daemon prio=5 os_prio=0 tid=0x00007ff6640b6800 nid=0x4f70 waiting on condition [0x00007ff5b62a3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-91&quot; #370 daemon prio=5 os_prio=0 tid=0x00007ff6640b5000 nid=0x4f6e waiting on condition [0x00007ff5b63a4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-90&quot; #369 daemon prio=5 os_prio=0 tid=0x00007ff6640b3000 nid=0x4f40 waiting on condition [0x00007ff5b64a5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-89&quot; #368 daemon prio=5 os_prio=0 tid=0x00007ff6640b1000 nid=0x4f3d waiting on condition [0x00007ff5b65a6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-88&quot; #367 daemon prio=5 os_prio=0 tid=0x00007ff6640af800 nid=0x4f3c waiting on condition [0x00007ff5b66a7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-87&quot; #366 daemon prio=5 os_prio=0 tid=0x00007ff664081800 nid=0x4eaf waiting on condition [0x00007ff5b67a8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-86&quot; #365 daemon prio=5 os_prio=0 tid=0x00007ff6640ac000 nid=0x4eaa waiting on condition [0x00007ff5b68a9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-85&quot; #364 daemon prio=5 os_prio=0 tid=0x00007ff6640aa000 nid=0x4ea8 waiting on condition [0x00007ff5b69aa000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-84&quot; #363 daemon prio=5 os_prio=0 tid=0x00007ff6640a8000 nid=0x4e57 waiting on condition [0x00007ff5b6aab000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-83&quot; #362 daemon prio=5 os_prio=0 tid=0x00007ff6640a6800 nid=0x4e56 waiting on condition [0x00007ff5b6bac000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-82&quot; #361 daemon prio=5 os_prio=0 tid=0x00007ff6640a4800 nid=0x4e55 waiting on condition [0x00007ff5b6cad000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-81&quot; #360 daemon prio=5 os_prio=0 tid=0x00007ff6640a3000 nid=0x4e38 waiting on condition [0x00007ff5b6dae000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-80&quot; #359 daemon prio=5 os_prio=0 tid=0x00007ff6640a1000 nid=0x4e37 waiting on condition [0x00007ff5b6eaf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-79&quot; #358 daemon prio=5 os_prio=0 tid=0x00007ff66409f000 nid=0x4e36 waiting on condition [0x00007ff5b6fb0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-78&quot; #357 daemon prio=5 os_prio=0 tid=0x00007ff66409d000 nid=0x4e25 waiting on condition [0x00007ff5b70b1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-77&quot; #356 daemon prio=5 os_prio=0 tid=0x00007ff66409b000 nid=0x4e24 waiting on condition [0x00007ff5b71b2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-76&quot; #355 daemon prio=5 os_prio=0 tid=0x00007ff664099800 nid=0x4e23 waiting on condition [0x00007ff5b72b3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-75&quot; #354 daemon prio=5 os_prio=0 tid=0x00007ff664097800 nid=0x4e01 waiting on condition [0x00007ff5b73b4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-74&quot; #353 daemon prio=5 os_prio=0 tid=0x00007ff664095800 nid=0x4dff waiting on condition [0x00007ff5b74b5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-73&quot; #352 daemon prio=5 os_prio=0 tid=0x00007ff664094000 nid=0x4dfe waiting on condition [0x00007ff5b75b6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-72&quot; #351 daemon prio=5 os_prio=0 tid=0x00007ff664092000 nid=0x4dda waiting on condition [0x00007ff5b76b7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-71&quot; #350 daemon prio=5 os_prio=0 tid=0x00007ff664090800 nid=0x4dd9 waiting on condition [0x00007ff5b77b8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-70&quot; #349 daemon prio=5 os_prio=0 tid=0x00007ff66408e800 nid=0x4dd8 waiting on condition [0x00007ff5b78b9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-69&quot; #348 daemon prio=5 os_prio=0 tid=0x00007ff66408c800 nid=0x4da1 waiting on condition [0x00007ff5b79ba000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-68&quot; #347 daemon prio=5 os_prio=0 tid=0x00007ff66408a800 nid=0x4d99 waiting on condition [0x00007ff5b7abb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-67&quot; #346 daemon prio=5 os_prio=0 tid=0x00007ff664089000 nid=0x4d96 waiting on condition [0x00007ff5b7bbc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-66&quot; #345 daemon prio=5 os_prio=0 tid=0x00007ff664087000 nid=0x4d73 waiting on condition [0x00007ff5b7cbd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-65&quot; #344 daemon prio=5 os_prio=0 tid=0x00007ff664085800 nid=0x4d72 waiting on condition [0x00007ff5b7dbe000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-64&quot; #343 daemon prio=5 os_prio=0 tid=0x00007ff664083800 nid=0x4d71 waiting on condition [0x00007ff5b7ebf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-63&quot; #342 daemon prio=5 os_prio=0 tid=0x00007ff664061000 nid=0x4d56 waiting on condition [0x00007ff5b7fc0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-62&quot; #341 daemon prio=5 os_prio=0 tid=0x00007ff664080000 nid=0x4d55 waiting on condition [0x00007ff5b80c1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-61&quot; #340 daemon prio=5 os_prio=0 tid=0x00007ff66407e000 nid=0x4d54 waiting on condition [0x00007ff5b81c2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-60&quot; #339 daemon prio=5 os_prio=0 tid=0x00007ff66407c800 nid=0x4d36 waiting on condition [0x00007ff5b82c3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-59&quot; #338 daemon prio=5 os_prio=0 tid=0x00007ff66407a800 nid=0x4d35 waiting on condition [0x00007ff5b83c4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-58&quot; #337 daemon prio=5 os_prio=0 tid=0x00007ff664078800 nid=0x4d34 waiting on condition [0x00007ff5b84c5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-57&quot; #336 daemon prio=5 os_prio=0 tid=0x00007ff664077000 nid=0x4ca3 waiting on condition [0x00007ff5b85c6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-56&quot; #335 daemon prio=5 os_prio=0 tid=0x00007ff664075000 nid=0x4ca2 waiting on condition [0x00007ff5b86c7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-55&quot; #334 daemon prio=5 os_prio=0 tid=0x00007ff664074000 nid=0x4ca1 waiting on condition [0x00007ff5b89ca000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-54&quot; #333 daemon prio=5 os_prio=0 tid=0x00007ff664072800 nid=0x4c6d waiting on condition [0x00007ff5b87c8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-53&quot; #332 daemon prio=5 os_prio=0 tid=0x00007ff664070800 nid=0x4c6c waiting on condition [0x00007ff5b88c9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-52&quot; #330 daemon prio=5 os_prio=0 tid=0x00007ff66406e800 nid=0x4c53 waiting on condition [0x00007ff5b8acb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-51&quot; #329 daemon prio=5 os_prio=0 tid=0x00007ff66406d000 nid=0x4c52 waiting on condition [0x00007ff5b8bcc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-50&quot; #328 daemon prio=5 os_prio=0 tid=0x00007ff66406b000 nid=0x4c51 waiting on condition [0x00007ff5b8ccd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-49&quot; #327 daemon prio=5 os_prio=0 tid=0x00007ff664069000 nid=0x4c45 waiting on condition [0x00007ff5b8dce000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-48&quot; #326 daemon prio=5 os_prio=0 tid=0x00007ff664067800 nid=0x4c43 waiting on condition [0x00007ff5b8ecf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-47&quot; #325 daemon prio=5 os_prio=0 tid=0x00007ff664065800 nid=0x4c42 waiting on condition [0x00007ff5b8fd0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-46&quot; #324 daemon prio=5 os_prio=0 tid=0x00007ff664063800 nid=0x4c29 waiting on condition [0x00007ff5b90d1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-45&quot; #323 daemon prio=5 os_prio=0 tid=0x00007ff664060000 nid=0x4c27 waiting on condition [0x00007ff5b91d2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-44&quot; #322 daemon prio=5 os_prio=0 tid=0x00007ff66405e000 nid=0x4c26 waiting on condition [0x00007ff5b92d3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-43&quot; #321 daemon prio=5 os_prio=0 tid=0x00007ff66405c800 nid=0x4c08 waiting on condition [0x00007ff5b93d4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-42&quot; #320 daemon prio=5 os_prio=0 tid=0x00007ff66405a800 nid=0x4c05 waiting on condition [0x00007ff5b94d5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-41&quot; #319 daemon prio=5 os_prio=0 tid=0x00007ff664059000 nid=0x4c04 waiting on condition [0x00007ff5b95d6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-40&quot; #318 daemon prio=5 os_prio=0 tid=0x00007ff66403c000 nid=0x4bf2 waiting on condition [0x00007ff5b96d7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-39&quot; #317 daemon prio=5 os_prio=0 tid=0x00007ff664057000 nid=0x4bf0 waiting on condition [0x00007ff5b97d8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-38&quot; #316 daemon prio=5 os_prio=0 tid=0x00007ff664055000 nid=0x4bef waiting on condition [0x00007ff5b98d9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-37&quot; #315 daemon prio=5 os_prio=0 tid=0x00007ff664053800 nid=0x4bb0 waiting on condition [0x00007ff5b99da000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-36&quot; #314 daemon prio=5 os_prio=0 tid=0x00007ff664051800 nid=0x4bae waiting on condition [0x00007ff5b9adb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-35&quot; #313 daemon prio=5 os_prio=0 tid=0x00007ff664050000 nid=0x4bad waiting on condition [0x00007ff5b9bdc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-34&quot; #312 daemon prio=5 os_prio=0 tid=0x00007ff66404e000 nid=0x4b92 waiting on condition [0x00007ff5b9cdd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-33&quot; #311 daemon prio=5 os_prio=0 tid=0x00007ff66404c000 nid=0x4b91 waiting on condition [0x00007ff5b9dde000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-32&quot; #310 daemon prio=5 os_prio=0 tid=0x00007ff66404a800 nid=0x4b90 waiting on condition [0x00007ff5b9edf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-31&quot; #309 daemon prio=5 os_prio=0 tid=0x00007ff664048800 nid=0x4b78 waiting on condition [0x00007ff5b9fe0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-30&quot; #308 daemon prio=5 os_prio=0 tid=0x00007ff664047000 nid=0x4b77 waiting on condition [0x00007ff5ba0e1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-29&quot; #307 daemon prio=5 os_prio=0 tid=0x00007ff664045000 nid=0x4b76 waiting on condition [0x00007ff5ba1e2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-28&quot; #306 daemon prio=5 os_prio=0 tid=0x00007ff664043000 nid=0x4adc waiting on condition [0x00007ff5ba2e3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-27&quot; #305 daemon prio=5 os_prio=0 tid=0x00007ff664041800 nid=0x4adb waiting on condition [0x00007ff5ba3e4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-26&quot; #304 daemon prio=5 os_prio=0 tid=0x00007ff66403f800 nid=0x4a98 waiting on condition [0x00007ff5ba4e5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-25&quot; #303 daemon prio=5 os_prio=0 tid=0x00007ff66403d800 nid=0x4a96 waiting on condition [0x00007ff5ba5e6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-24&quot; #302 daemon prio=5 os_prio=0 tid=0x00007ff664021000 nid=0x4a95 waiting on condition [0x00007ff5ba6e7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-23&quot; #301 daemon prio=5 os_prio=0 tid=0x00007ff66403a000 nid=0x4a78 waiting on condition [0x00007ff5ba7e8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-22&quot; #300 daemon prio=5 os_prio=0 tid=0x00007ff664038800 nid=0x4a74 waiting on condition [0x00007ff5ba8e9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-21&quot; #299 daemon prio=5 os_prio=0 tid=0x00007ff664036800 nid=0x4a73 waiting on condition [0x00007ff5ba9ea000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-20&quot; #298 daemon prio=5 os_prio=0 tid=0x00007ff664035000 nid=0x4a5f waiting on condition [0x00007ff5baaeb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-19&quot; #297 daemon prio=5 os_prio=0 tid=0x00007ff664033000 nid=0x4a5b waiting on condition [0x00007ff5babec000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-18&quot; #296 daemon prio=5 os_prio=0 tid=0x00007ff664031000 nid=0x4a5a waiting on condition [0x00007ff5baced000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-17&quot; #295 daemon prio=5 os_prio=0 tid=0x00007ff66402f800 nid=0x4a47 waiting on condition [0x00007ff5badee000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-16&quot; #294 daemon prio=5 os_prio=0 tid=0x00007ff66402d800 nid=0x4a3f waiting on condition [0x00007ff5baeef000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-15&quot; #293 daemon prio=5 os_prio=0 tid=0x00007ff66402c000 nid=0x4a3b waiting on condition [0x00007ff5baff0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-14&quot; #292 daemon prio=5 os_prio=0 tid=0x00007ff66402a000 nid=0x4a39 waiting on condition [0x00007ff5bb0f1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-13&quot; #291 daemon prio=5 os_prio=0 tid=0x00007ff664028000 nid=0x4a36 waiting on condition [0x00007ff5bb1f2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-12&quot; #290 daemon prio=5 os_prio=0 tid=0x00007ff664026000 nid=0x4a34 waiting on condition [0x00007ff5bb2f3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-11&quot; #289 daemon prio=5 os_prio=0 tid=0x00007ff664024800 nid=0x4a30 waiting on condition [0x00007ff5bb3f4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-10&quot; #288 daemon prio=5 os_prio=0 tid=0x00007ff664022800 nid=0x4a24 waiting on condition [0x00007ff5bb4f5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-9&quot; #287 daemon prio=5 os_prio=0 tid=0x00007ff66401f000 nid=0x4a23 waiting on condition [0x00007ff5bb5f6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-8&quot; #286 daemon prio=5 os_prio=0 tid=0x00007ff664002000 nid=0x4a20 waiting on condition [0x00007ff5bb6f7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-7&quot; #285 daemon prio=5 os_prio=0 tid=0x00007ff66400e000 nid=0x4a1f waiting on condition [0x00007ff5bb7f8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-6&quot; #283 daemon prio=5 os_prio=0 tid=0x00007ff664007000 nid=0x4a1d waiting on condition [0x00007ff5bb9fa000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-5&quot; #282 daemon prio=5 os_prio=0 tid=0x00007ff664010800 nid=0x4a19 waiting on condition [0x00007ff5bbafb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-4&quot; #281 daemon prio=5 os_prio=0 tid=0x00007ff66401e000 nid=0x49fa waiting on condition [0x00007ff5bbbfc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-3&quot; #280 daemon prio=5 os_prio=0 tid=0x00007ff66401d000 nid=0x49f9 waiting on condition [0x00007ff5bbcfd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-2&quot; #279 daemon prio=5 os_prio=0 tid=0x00007ff66401b800 nid=0x49f7 waiting on condition [0x00007ff6492d9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-1&quot; #278 daemon prio=5 os_prio=0 tid=0x00007ff664004800 nid=0x49f2 waiting on condition [0x00007ff5bbffe000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos-grpc-executor-0&quot; #277 daemon prio=5 os_prio=0 tid=0x00007ff66401a800 nid=0x49ed waiting on condition [0x00007ff5c0adb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8cb0360&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer5&quot; #267 daemon prio=5 os_prio=0 tid=0x00007ff694406800 nid=0x408c waiting on condition [0x00007ff5c02d5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer4&quot; #266 daemon prio=5 os_prio=0 tid=0x00007ff644251800 nid=0x37fc waiting on condition [0x00007ff5c03d6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-7&quot; #265 daemon prio=5 os_prio=0 tid=0x00007ff5e8007000 nid=0x3205 waiting on condition [0x00007ff5c04d7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer3&quot; #264 daemon prio=5 os_prio=0 tid=0x00007ff604205800 nid=0x3204 waiting on condition [0x00007ff5c05d8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-6&quot; #263 daemon prio=5 os_prio=0 tid=0x00007ff604204800 nid=0x3203 waiting on condition [0x00007ff5cfcb9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.7&quot; #262 daemon prio=5 os_prio=0 tid=0x00007ff5e4009000 nid=0x1975 waiting on condition [0x00007ff5c08d9000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.6&quot; #261 daemon prio=5 os_prio=0 tid=0x00007ff638008000 nid=0x1961 waiting on condition [0x00007ff5c09da000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.5&quot; #259 daemon prio=5 os_prio=0 tid=0x00007ff63c005800 nid=0x1939 waiting on condition [0x00007ff5c0bdc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #258 prio=5 os_prio=0 tid=0x00007ff6b4012800 nid=0x1861 waiting on condition [0x00007ff5c0cdd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb487c20&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #257 prio=5 os_prio=0 tid=0x00007ff6b4011000 nid=0x1860 waiting on condition [0x00007ff5c0dde000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb481948&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #256 prio=5 os_prio=0 tid=0x00007ff6b400f000 nid=0x185f waiting on condition [0x00007ff5c0edf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb481cf0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #255 prio=5 os_prio=0 tid=0x00007ff6b400d000 nid=0x185e waiting on condition [0x00007ff5c0fe0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb570890&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #254 prio=5 os_prio=0 tid=0x00007ff6b400b800 nid=0x185d waiting on condition [0x00007ff5c10e1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb482008&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #253 prio=5 os_prio=0 tid=0x00007ff6b4009800 nid=0x185c waiting on condition [0x00007ff5c11e2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb487f38&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #252 prio=5 os_prio=0 tid=0x00007ff6b4008000 nid=0x185b waiting on condition [0x00007ff5c12e3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6f27e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming&quot; #251 prio=5 os_prio=0 tid=0x00007ff6b4006800 nid=0x185a waiting on condition [0x00007ff5c13e4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6fc2c8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.4&quot; #250 daemon prio=5 os_prio=0 tid=0x00007ff640001800 nid=0x1859 waiting on condition [0x00007ff5c14e5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DestroyJavaVM&quot; #249 prio=5 os_prio=0 tid=0x00007ff6f400a800 nid=0x155e waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;handle events&quot; #248 prio=5 os_prio=0 tid=0x00007ff6f59ee800 nid=0x1846 runnable [0x00007ff5c15e6000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb77e520&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.poll(ArrayBlockingQueue.java:418)</span><br><span class="line">	at com.alibaba.nacos.istio.common.EventProcessor$Consumer.run(EventProcessor.java:100)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;scheduling-1&quot; #247 prio=5 os_prio=0 tid=0x00007ff6f55b6800 nid=0x1845 runnable [0x00007ff5c16e7000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb784028&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-Acceptor&quot; #246 daemon prio=5 os_prio=0 tid=0x00007ff6f5c66000 nid=0x1844 runnable [0x00007ff5c17e8000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.ServerSocketChannelImpl.accept0(Native Method)</span><br><span class="line">	at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:424)</span><br><span class="line">	at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:252)</span><br><span class="line">	- locked &lt;0x00000000fb6f2b88&gt; (a java.lang.Object)</span><br><span class="line">	at org.apache.tomcat.util.net.NioEndpoint.serverSocketAccept(NioEndpoint.java:546)</span><br><span class="line">	at org.apache.tomcat.util.net.NioEndpoint.serverSocketAccept(NioEndpoint.java:79)</span><br><span class="line">	at org.apache.tomcat.util.net.Acceptor.run(Acceptor.java:129)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-Poller&quot; #245 daemon prio=5 os_prio=0 tid=0x00007ff6f611e800 nid=0x1843 runnable [0x00007ff5c18e9000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb57d7f0&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb57d7e0&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb57d538&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.tomcat.util.net.NioEndpoint$Poller.run(NioEndpoint.java:807)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-10&quot; #244 daemon prio=5 os_prio=0 tid=0x00007ff6f65dd800 nid=0x1842 waiting on condition [0x00007ff5c19ea000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-9&quot; #243 daemon prio=5 os_prio=0 tid=0x00007ff6f60ca800 nid=0x1841 waiting on condition [0x00007ff5c1aeb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-8&quot; #242 daemon prio=5 os_prio=0 tid=0x00007ff6f60c9000 nid=0x1840 waiting on condition [0x00007ff5c1bec000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-7&quot; #241 daemon prio=5 os_prio=0 tid=0x00007ff6f5059000 nid=0x183f waiting on condition [0x00007ff5c1ced000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-6&quot; #240 daemon prio=5 os_prio=0 tid=0x00007ff6f4bfd000 nid=0x183e waiting on condition [0x00007ff5c1dee000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-5&quot; #239 daemon prio=5 os_prio=0 tid=0x00007ff6f4bfb800 nid=0x183d waiting on condition [0x00007ff5c1eef000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-4&quot; #238 daemon prio=5 os_prio=0 tid=0x00007ff6f55bf800 nid=0x183c waiting on condition [0x00007ff5c1ff0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-3&quot; #237 daemon prio=5 os_prio=0 tid=0x00007ff6f55bd800 nid=0x183b waiting on condition [0x00007ff5c20f1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-2&quot; #236 daemon prio=5 os_prio=0 tid=0x00007ff6f4dc1000 nid=0x183a waiting on condition [0x00007ff5c21f2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;http-nio-8848-exec-1&quot; #235 daemon prio=5 os_prio=0 tid=0x00007ff6f5a7a800 nid=0x1839 waiting on condition [0x00007ff5c22f3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb6aabe0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:146)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskQueue.take(TaskQueue.java:33)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1114)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1176)</span><br><span class="line">	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.3&quot; #234 daemon prio=5 os_prio=0 tid=0x00007ff63c004000 nid=0x1830 waiting on condition [0x00007ff5c25f4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-25&quot; #233 daemon prio=5 os_prio=0 tid=0x00007ff6e0027000 nid=0x182c waiting on condition [0x00007ff5c28f5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-24&quot; #232 daemon prio=5 os_prio=0 tid=0x00007ff6e0025800 nid=0x182b waiting on condition [0x00007ff5c29f6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-23&quot; #231 daemon prio=5 os_prio=0 tid=0x00007ff6e0045000 nid=0x182a waiting on condition [0x00007ff5c2af7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-22&quot; #230 daemon prio=5 os_prio=0 tid=0x00007ff6e000c000 nid=0x1829 waiting on condition [0x00007ff5c2bf8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-21&quot; #229 daemon prio=5 os_prio=0 tid=0x00007ff6e02eb000 nid=0x1828 waiting on condition [0x00007ff5c2cf9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.9&quot; #228 daemon prio=5 os_prio=0 tid=0x00007ff6cc006000 nid=0x1827 waiting on condition [0x00007ff5c2dfa000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer7&quot; #227 daemon prio=5 os_prio=0 tid=0x00007ff624002800 nid=0x1826 waiting on condition [0x00007ff5c2efb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-20&quot; #226 daemon prio=5 os_prio=0 tid=0x00007ff6e033c000 nid=0x1822 waiting on condition [0x00007ff5c2ffc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-19&quot; #225 daemon prio=5 os_prio=0 tid=0x00007ff6e004e000 nid=0x1821 waiting on condition [0x00007ff5c81bc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-18&quot; #224 daemon prio=5 os_prio=0 tid=0x00007ff6e0015800 nid=0x1820 waiting on condition [0x00007ff5c82bd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer6&quot; #223 daemon prio=5 os_prio=0 tid=0x00007ff600204000 nid=0x181f runnable [0x00007ff5c83be000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-17&quot; #222 daemon prio=5 os_prio=0 tid=0x00007ff6e03c4000 nid=0x181b waiting on condition [0x00007ff5c84bf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-16&quot; #221 daemon prio=5 os_prio=0 tid=0x00007ff6e025b800 nid=0x181a waiting on condition [0x00007ff5c85c0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-15&quot; #220 daemon prio=5 os_prio=0 tid=0x00007ff6e03fe000 nid=0x1816 waiting on condition [0x00007ff5c86c1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.8&quot; #219 daemon prio=5 os_prio=0 tid=0x00007ff688023000 nid=0x17f3 waiting on condition [0x00007ff5c9ac0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-14&quot; #218 daemon prio=5 os_prio=0 tid=0x00007ff6e03fc000 nid=0x17ec waiting on condition [0x00007ff5c9bc1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-13&quot; #217 daemon prio=5 os_prio=0 tid=0x00007ff6e03fa000 nid=0x17eb waiting on condition [0x00007ff5c9cc2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-12&quot; #216 daemon prio=5 os_prio=0 tid=0x00007ff6e03f8800 nid=0x17ea waiting on condition [0x00007ff5c9dc3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-11&quot; #215 daemon prio=5 os_prio=0 tid=0x00007ff6e03f6800 nid=0x17e7 waiting on condition [0x00007ff5c9ec4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-10&quot; #214 daemon prio=5 os_prio=0 tid=0x00007ff6e03f4800 nid=0x17e6 waiting on condition [0x00007ff5cb0ba000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-9&quot; #213 daemon prio=5 os_prio=0 tid=0x00007ff6e03f3000 nid=0x17e4 waiting on condition [0x00007ff5cc281000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-8&quot; #212 daemon prio=5 os_prio=0 tid=0x00007ff6e03f1000 nid=0x17e3 waiting on condition [0x00007ff5cc382000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer5&quot; #211 daemon prio=5 os_prio=0 tid=0x00007ff6a0add800 nid=0x17e2 waiting on condition [0x00007ff5cc483000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-7&quot; #210 daemon prio=5 os_prio=0 tid=0x00007ff6e03ef000 nid=0x17e1 waiting on condition [0x00007ff5cc584000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.2&quot; #209 daemon prio=5 os_prio=0 tid=0x00007ff6f5caf000 nid=0x17e0 waiting on condition [0x00007ff5cc685000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.1&quot; #208 daemon prio=5 os_prio=0 tid=0x00007ff6f4496800 nid=0x17df waiting on condition [0x00007ff5cc786000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.cmdb.global.executor.0&quot; #207 daemon prio=5 os_prio=0 tid=0x00007ff6f551d000 nid=0x17de waiting on condition [0x00007ff5cc887000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb47e6b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer4&quot; #206 daemon prio=5 os_prio=0 tid=0x00007ff650002800 nid=0x17dd waiting on condition [0x00007ff5cc988000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.7&quot; #205 daemon prio=5 os_prio=0 tid=0x00007ff6a4202800 nid=0x17dc waiting on condition [0x00007ff5cca89000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb824320&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-6&quot; #204 daemon prio=5 os_prio=0 tid=0x00007ff6e03ed000 nid=0x17db waiting on condition [0x00007ff5ccb8a000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-5&quot; #203 daemon prio=5 os_prio=0 tid=0x00007ff6e03eb800 nid=0x17da waiting on condition [0x00007ff5ccc8b000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.6&quot; #202 daemon prio=5 os_prio=0 tid=0x00007ff658206000 nid=0x17d9 runnable [0x00007ff5ccd8c000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb824320&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer3&quot; #201 daemon prio=5 os_prio=0 tid=0x00007ff600206800 nid=0x17d8 waiting on condition [0x00007ff5cce8d000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-4&quot; #200 daemon prio=5 os_prio=0 tid=0x00007ff6e03e9800 nid=0x17d7 waiting on condition [0x00007ff5ccf8e000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-3&quot; #199 daemon prio=5 os_prio=0 tid=0x00007ff6e03e8000 nid=0x17d6 waiting on condition [0x00007ff5cd08f000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.raft-cli-service.3&quot; #198 daemon prio=5 os_prio=0 tid=0x00007ff6d03c9800 nid=0x17d3 waiting on condition [0x00007ff5cd190000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fbc43820&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-2&quot; #197 daemon prio=5 os_prio=0 tid=0x00007ff6e03c2000 nid=0x17d1 waiting on condition [0x00007ff5cd291000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-1&quot; #196 daemon prio=5 os_prio=0 tid=0x00007ff6e03c0000 nid=0x17d0 waiting on condition [0x00007ff5cd392000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-RPC-Processor-0&quot; #195 daemon prio=5 os_prio=0 tid=0x00007ff6e03be000 nid=0x17cf waiting on condition [0x00007ff5cd493000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7cc878&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.raft-cli-service.2&quot; #194 daemon prio=5 os_prio=0 tid=0x00007ff6d03b8000 nid=0x17cc waiting on condition [0x00007ff5cd594000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fbc43820&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.raft-cli-service.1&quot; #193 daemon prio=5 os_prio=0 tid=0x00007ff6d03b6800 nid=0x17c9 waiting on condition [0x00007ff5cd695000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fbc43820&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.raft-cli-service.0&quot; #192 daemon prio=5 os_prio=0 tid=0x00007ff6d03b5000 nid=0x17c8 waiting on condition [0x00007ff5cd796000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fbc43820&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.tcp.check.worker.1&quot; #191 daemon prio=5 os_prio=0 tid=0x00007ff6f6214800 nid=0x17c2 runnable [0x00007ff5cd897000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc313ff8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:467)</span><br><span class="line">	at com.alibaba.nacos.naming.healthcheck.TcpSuperSenseProcessor.processTask(TcpSuperSenseProcessor.java:137)</span><br><span class="line">	at com.alibaba.nacos.naming.healthcheck.TcpSuperSenseProcessor.run(TcpSuperSenseProcessor.java:154)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fc314108&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 25&quot; #189 prio=5 os_prio=0 tid=0x00007ff5dc01a800 nid=0x17b9 runnable [0x00007ff5cd998000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc350060&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc350050&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc350070&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 24&quot; #187 prio=5 os_prio=0 tid=0x00007ff6d8014800 nid=0x17b8 runnable [0x00007ff5cda99000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc350970&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc350960&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc350980&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 23&quot; #186 prio=5 os_prio=0 tid=0x00007ff6d8012800 nid=0x17b7 runnable [0x00007ff5cdb9a000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc31d088&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc31d078&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc31d098&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 22&quot; #185 prio=5 os_prio=0 tid=0x00007ff6d8010800 nid=0x17b6 runnable [0x00007ff5cdc9b000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc351168&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc351158&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc351178&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 21&quot; #184 prio=5 os_prio=0 tid=0x00007ff6d800e800 nid=0x17b5 runnable [0x00007ff5cdd9c000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc31d818&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc31d808&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc31d828&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 20&quot; #183 prio=5 os_prio=0 tid=0x00007ff6d800c800 nid=0x17b4 runnable [0x00007ff5cde9d000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc3518f8&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc3518e8&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc351908&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 19&quot; #182 prio=5 os_prio=0 tid=0x00007ff6d800b000 nid=0x17b3 runnable [0x00007ff5cdf9e000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc352088&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc352078&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc352098&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;pool-8-thread-1&quot; #188 prio=5 os_prio=0 tid=0x00007ff6f52cd800 nid=0x17b2 runnable [0x00007ff5ce09f000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc31dfa8&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc31df98&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc31dfb8&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:343)</span><br><span class="line">	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)</span><br><span class="line">	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 18&quot; #181 prio=5 os_prio=0 tid=0x00007ff6d8009800 nid=0x17b1 runnable [0x00007ff5ce1a0000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc4544f8&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc4544e8&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc4543b0&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 17&quot; #180 prio=5 os_prio=0 tid=0x00007ff6d8002800 nid=0x17b0 runnable [0x00007ff5ce2a1000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc352818&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc352808&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc352828&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;pool-7-thread-1&quot; #179 prio=5 os_prio=0 tid=0x00007ff6f4571000 nid=0x17af runnable [0x00007ff5ce3a2000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fc352fa8&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fc352f98&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fc352fb8&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:343)</span><br><span class="line">	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)</span><br><span class="line">	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-8&quot; #178 daemon prio=5 os_prio=0 tid=0x00007ff60c181800 nid=0x17ae runnable [0x00007ff5ce4a3000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:129)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:122)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:290)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:347)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-7&quot; #177 daemon prio=5 os_prio=0 tid=0x00007ff6a00d9800 nid=0x17ad runnable [0x00007ff5ce5a4000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:129)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:122)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:290)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:347)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-6&quot; #176 daemon prio=5 os_prio=0 tid=0x00007ff66820f000 nid=0x17ac runnable [0x00007ff5ce6a5000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:129)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:122)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:290)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:347)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.tcp.check.worker.0&quot; #175 daemon prio=5 os_prio=0 tid=0x00007ff6f67c9800 nid=0x17aa runnable [0x00007ff5ce7a6000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc31c618&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:467)</span><br><span class="line">	at com.alibaba.nacos.naming.healthcheck.v2.processor.TcpHealthCheckProcessor.processTask(TcpHealthCheckProcessor.java:122)</span><br><span class="line">	at com.alibaba.nacos.naming.healthcheck.v2.processor.TcpHealthCheckProcessor.run(TcpHealthCheckProcessor.java:139)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fc31c330&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.15&quot; #174 daemon prio=5 os_prio=0 tid=0x00007ff5fc002800 nid=0x17a9 waiting on condition [0x00007ff5ce8a7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.7&quot; #173 daemon prio=5 os_prio=0 tid=0x00007ff674006000 nid=0x17a7 waiting on condition [0x00007ff5ceba8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.6&quot; #172 daemon prio=5 os_prio=0 tid=0x00007ff67c009800 nid=0x17a6 waiting on condition [0x00007ff5ceca9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-5&quot; #171 daemon prio=5 os_prio=0 tid=0x00007ff67000f800 nid=0x17a5 runnable [0x00007ff5cedaa000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait0(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:113)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWait(EpollEventLoop.java:286)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:351)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-4&quot; #170 daemon prio=5 os_prio=0 tid=0x00007ff64c004000 nid=0x17a4 runnable [0x00007ff5ceeab000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:129)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:122)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:290)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:347)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-5&quot; #169 daemon prio=5 os_prio=0 tid=0x00007ff684003800 nid=0x17a3 waiting on condition [0x00007ff5cefac000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.5&quot; #168 daemon prio=5 os_prio=0 tid=0x00007ff6f5075800 nid=0x17a2 waiting on condition [0x00007ff5cf0ad000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb824320&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.4&quot; #167 daemon prio=5 os_prio=0 tid=0x00007ff6f5074800 nid=0x17a1 waiting on condition [0x00007ff5cf1ae000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb824320&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer2&quot; #166 daemon prio=5 os_prio=0 tid=0x00007ff6f5074000 nid=0x17a0 waiting on condition [0x00007ff5cf2af000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer2&quot; #165 daemon prio=5 os_prio=0 tid=0x00007ff6f5da5800 nid=0x179f waiting on condition [0x00007ff5cf3b0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;ReadOnlyService-PendingNotify-Scanner0&quot; #164 daemon prio=5 os_prio=0 tid=0x00007ff6f53ab000 nid=0x179e runnable [0x00007ff5cf4b1000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc8db1b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-ReadOnlyService-Disruptor-0&quot; #163 daemon prio=5 os_prio=0 tid=0x00007ff6f5da4800 nid=0x179d waiting on condition [0x00007ff5cf5b2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc8db7e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-FSMCaller-Disruptor-0&quot; #162 daemon prio=5 os_prio=0 tid=0x00007ff6f5da1800 nid=0x179c waiting on condition [0x00007ff5cf6b3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc676810&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-LogManager-Disruptor-0&quot; #161 daemon prio=5 os_prio=0 tid=0x00007ff6f5da0800 nid=0x179b waiting on condition [0x00007ff5cf7b4000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fbb96fc0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at com.lmax.disruptor.TimeoutBlockingWaitStrategy.waitFor(TimeoutBlockingWaitStrategy.java:38)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-4&quot; #160 daemon prio=5 os_prio=0 tid=0x00007ff6f666d800 nid=0x179a waiting on condition [0x00007ff5cf8b5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.14&quot; #159 daemon prio=5 os_prio=0 tid=0x00007ff68c01e800 nid=0x177a waiting on condition [0x00007ff5cf9b6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-3&quot; #158 daemon prio=5 os_prio=0 tid=0x00007ff60c172000 nid=0x1779 runnable [0x00007ff5cfab7000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:129)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:122)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:290)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:347)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-2&quot; #157 daemon prio=5 os_prio=0 tid=0x00007ff608039000 nid=0x1778 runnable [0x00007ff5cfbb8000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:129)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:122)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:290)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:347)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-NodeImpl-Disruptor-0&quot; #155 daemon prio=5 os_prio=0 tid=0x00007ff6f58af800 nid=0x1775 waiting on condition [0x00007ff5cfdba000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc8dc2d0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-worker-ELG-3-1&quot; #154 daemon prio=5 os_prio=0 tid=0x00007ff608005800 nid=0x1774 runnable [0x00007ff5cfebb000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait0(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:113)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWait(EpollEventLoop.java:286)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:351)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.3&quot; #153 daemon prio=5 os_prio=0 tid=0x00007ff6f58ac800 nid=0x1773 waiting on condition [0x00007ff5cffbc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb824320&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.2&quot; #152 daemon prio=5 os_prio=0 tid=0x00007ff6f58ab800 nid=0x1771 sleeping[0x00007ff5d00bd000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (sleeping)</span><br><span class="line">	at java.lang.Thread.sleep(Native Method)</span><br><span class="line">	at com.alibaba.nacos.common.utils.ThreadUtils.sleep(ThreadUtils.java:55)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer.registerSelfToCluster(JRaftServer.java:365)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer.lambda$createMultiRaftGroup$0(JRaftServer.java:264)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer$$Lambda$756/1615801298.run(Unknown Source)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fb8244a8&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer1&quot; #151 daemon prio=5 os_prio=0 tid=0x00007ff6f56dc800 nid=0x1770 waiting on condition [0x00007ff5d01be000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer1&quot; #150 daemon prio=5 os_prio=0 tid=0x00007ff6f56db800 nid=0x176f waiting on condition [0x00007ff5d02bf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;ReadOnlyService-PendingNotify-Scanner0&quot; #149 daemon prio=5 os_prio=0 tid=0x00007ff6f56db000 nid=0x176e runnable [0x00007ff5d03c0000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcb4c178&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-ReadOnlyService-Disruptor-0&quot; #148 daemon prio=5 os_prio=0 tid=0x00007ff6f5e89000 nid=0x176d waiting on condition [0x00007ff5d04c1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcba9810&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-3&quot; #147 daemon prio=5 os_prio=0 tid=0x00007ff634001800 nid=0x176c waiting on condition [0x00007ff5d05c2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-FSMCaller-Disruptor-0&quot; #146 daemon prio=5 os_prio=0 tid=0x00007ff6f5e88800 nid=0x176b waiting on condition [0x00007ff5d06c3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcb4cd28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-LogManager-Disruptor-0&quot; #145 daemon prio=5 os_prio=0 tid=0x00007ff6f5e8b000 nid=0x176a waiting on condition [0x00007ff5d07c4000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8eaf578&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at com.lmax.disruptor.TimeoutBlockingWaitStrategy.waitFor(TimeoutBlockingWaitStrategy.java:38)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-2&quot; #144 daemon prio=5 os_prio=0 tid=0x00007ff6f5e85800 nid=0x1769 waiting on condition [0x00007ff5d08c5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-NodeImpl-Disruptor-0&quot; #143 daemon prio=5 os_prio=0 tid=0x00007ff6f5df7000 nid=0x1748 waiting on condition [0x00007ff5d09c6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fce322f0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.13&quot; #142 daemon prio=5 os_prio=0 tid=0x00007ff5e0001800 nid=0x1747 waiting on condition [0x00007ff5d0cc7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.1&quot; #141 daemon prio=5 os_prio=0 tid=0x00007ff6f6233000 nid=0x1746 sleeping[0x00007ff5d0dc8000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (sleeping)</span><br><span class="line">	at java.lang.Thread.sleep(Native Method)</span><br><span class="line">	at com.alibaba.nacos.common.utils.ThreadUtils.sleep(ThreadUtils.java:55)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer.registerSelfToCluster(JRaftServer.java:365)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer.lambda$createMultiRaftGroup$0(JRaftServer.java:264)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer$$Lambda$756/1615801298.run(Unknown Source)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fbaf8b60&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.protocol.raft-common.0&quot; #140 daemon prio=5 os_prio=0 tid=0x00007ff6f6231800 nid=0x1745 sleeping[0x00007ff5d0ec9000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (sleeping)</span><br><span class="line">	at java.lang.Thread.sleep(Native Method)</span><br><span class="line">	at com.alibaba.nacos.common.utils.ThreadUtils.sleep(ThreadUtils.java:55)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer.registerSelfToCluster(JRaftServer.java:365)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer.lambda$createMultiRaftGroup$0(JRaftServer.java:264)</span><br><span class="line">	at com.alibaba.nacos.core.distributed.raft.JRaftServer$$Lambda$756/1615801298.run(Unknown Source)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fc1d6b10&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-ElectionTimer0&quot; #139 daemon prio=5 os_prio=0 tid=0x00007ff6f6615000 nid=0x1744 waiting on condition [0x00007ff5d0fca000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8aa358&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Global-SnapshotTimer0&quot; #138 daemon prio=5 os_prio=0 tid=0x00007ff6f6367800 nid=0x1743 waiting on condition [0x00007ff5d10cb000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8c88a00&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;ReadOnlyService-PendingNotify-Scanner0&quot; #137 daemon prio=5 os_prio=0 tid=0x00007ff6f6364000 nid=0x1742 runnable [0x00007ff5d11cc000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcea68e8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-ReadOnlyService-Disruptor-0&quot; #136 daemon prio=5 os_prio=0 tid=0x00007ff6f4744800 nid=0x1741 waiting on condition [0x00007ff5d12cd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcf090b8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-1&quot; #135 daemon prio=5 os_prio=0 tid=0x00007ff5e8004000 nid=0x1740 waiting on condition [0x00007ff5d13ce000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-FSMCaller-Disruptor-0&quot; #134 daemon prio=5 os_prio=0 tid=0x00007ff6f5bce000 nid=0x173f waiting on condition [0x00007ff5d14cf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcf09770&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-LogManager-Disruptor-0&quot; #133 daemon prio=5 os_prio=0 tid=0x00007ff6f5cd1000 nid=0x173e waiting on condition [0x00007ff5d15d0000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcde6e78&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at com.lmax.disruptor.TimeoutBlockingWaitStrategy.waitFor(TimeoutBlockingWaitStrategy.java:38)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-Closure-Executor-0&quot; #132 daemon prio=5 os_prio=0 tid=0x00007ff6f4314000 nid=0x173d waiting on condition [0x00007ff5d16d1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb478710&gt; (a java.util.concurrent.SynchronousQueue$TransferStack)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:458)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)</span><br><span class="line">	at java.util.concurrent.SynchronousQueue.take(SynchronousQueue.java:924)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;JRaft-NodeImpl-Disruptor-0&quot; #131 daemon prio=5 os_prio=0 tid=0x00007ff6f5fd6800 nid=0x1711 waiting on condition [0x00007ff5d55ce000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fcf0a318&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at com.lmax.disruptor.BlockingWaitStrategy.waitFor(BlockingWaitStrategy.java:45)</span><br><span class="line">	at com.lmax.disruptor.ProcessingSequenceBarrier.waitFor(ProcessingSequenceBarrier.java:56)</span><br><span class="line">	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:128)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.12&quot; #130 daemon prio=5 os_prio=0 tid=0x00007ff614008800 nid=0x170e waiting on condition [0x00007ff5d56cf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.5&quot; #129 daemon prio=5 os_prio=0 tid=0x00007ff60c001000 nid=0x170b waiting on condition [0x00007ff5d57d0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming.publisher-ServiceEvent&quot; #128 daemon prio=5 os_prio=0 tid=0x00007ff6f446d800 nid=0x1707 waiting on condition [0x00007ff5d5ad1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd141418&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.handleEvents(NamingEventPublisher.java:158)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.run(NamingEventPublisher.java:137)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;PushDelayTaskExecuteEngine.0&quot; #127 daemon prio=5 os_prio=0 tid=0x00007ff6f4467800 nid=0x1706 runnable [0x00007ff5d5bd2000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd1230c0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming.publisher-MetadataEvent&quot; #126 daemon prio=5 os_prio=0 tid=0x00007ff6f4c85000 nid=0x1705 waiting on condition [0x00007ff5d5cd3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17b9c8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.handleEvents(NamingEventPublisher.java:158)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.run(NamingEventPublisher.java:137)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming.publisher-ClientEvent&quot; #125 daemon prio=5 os_prio=0 tid=0x00007ff6f5123800 nid=0x1704 waiting on condition [0x00007ff5d5fd4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17c028&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.handleEvents(NamingEventPublisher.java:158)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.run(NamingEventPublisher.java:137)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;naming.publisher-ClientOperationEvent&quot; #124 daemon prio=5 os_prio=0 tid=0x00007ff6f5121000 nid=0x1703 waiting on condition [0x00007ff5d60d5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd141f20&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.handleEvents(NamingEventPublisher.java:158)</span><br><span class="line">	at com.alibaba.nacos.naming.core.v2.event.publisher.NamingEventPublisher.run(NamingEventPublisher.java:137)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.nacos-server-performance.0&quot; #123 daemon prio=5 os_prio=0 tid=0x00007ff6f4f33800 nid=0x1702 runnable [0x00007ff5d61d6000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17cab0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.11&quot; #122 daemon prio=5 os_prio=0 tid=0x00007ff610001000 nid=0x1701 waiting on condition [0x00007ff5d62d7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.10&quot; #119 daemon prio=5 os_prio=0 tid=0x00007ff5e4004000 nid=0x1700 waiting on condition [0x00007ff5d63d8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;grpc-default-boss-ELG-1-1&quot; #118 daemon prio=5 os_prio=0 tid=0x00007ff6f4c5f800 nid=0x16ff runnable [0x00007ff5d64d9000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native Method)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:129)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.Native.epollWait(Native.java:122)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.epollWaitNoTimerChange(EpollEventLoop.java:290)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:347)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)</span><br><span class="line">	at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.9&quot; #117 daemon prio=5 os_prio=0 tid=0x00007ff5fc001000 nid=0x16fc waiting on condition [0x00007ff6491d8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.MergeDatum.0&quot; #116 daemon prio=5 os_prio=0 tid=0x00007ff6f43e6000 nid=0x16f6 runnable [0x00007ff5d69ea000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd142cc8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.8&quot; #115 daemon prio=5 os_prio=0 tid=0x00007ff614007000 nid=0x16f2 waiting on condition [0x00007ff5d6aeb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.LongPolling.0&quot; #114 daemon prio=5 os_prio=0 tid=0x00007ff6f4739800 nid=0x16f1 waiting on condition [0x00007ff5d6bec000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17d2a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.CapacityManagement.0&quot; #113 daemon prio=5 os_prio=0 tid=0x00007ff6f468a800 nid=0x16f0 waiting on condition [0x00007ff5d6ced000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd223570&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.4&quot; #112 daemon prio=5 os_prio=0 tid=0x00007ff6f4fbe800 nid=0x16ef waiting on condition [0x00007ff5d6dee000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.3&quot; #111 daemon prio=5 os_prio=0 tid=0x00007ff6f5050800 nid=0x16ee waiting on condition [0x00007ff5d6eef000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.2&quot; #110 daemon prio=5 os_prio=0 tid=0x00007ff6f4d2b800 nid=0x16ed waiting on condition [0x00007ff5d6ff0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.1&quot; #109 daemon prio=5 os_prio=0 tid=0x00007ff6f5124800 nid=0x16ec waiting on condition [0x00007ff5d70f1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.7&quot; #108 daemon prio=5 os_prio=0 tid=0x00007ff614005000 nid=0x16ea waiting on condition [0x00007ff5d73f2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.server.DumpAllTaskManager.0&quot; #107 daemon prio=5 os_prio=0 tid=0x00007ff6f4601800 nid=0x16e9 runnable [0x00007ff5d74f3000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb80e080&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.server.DumpTaskManager.0&quot; #106 daemon prio=5 os_prio=0 tid=0x00007ff6f4d6f800 nid=0x16e8 runnable [0x00007ff5d75f4000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb80d660&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.remote.ServerCommonScheduler&quot; #105 prio=5 os_prio=0 tid=0x00007ff6f43ab800 nid=0x16e7 runnable [0x00007ff5d76f5000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd224060&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;/usr/local/nacos/data/loader&quot; #103 prio=5 os_prio=0 tid=0x00007ff6f4223800 nid=0x16e6 waiting on condition [0x00007ff5d77f6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd2247e8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.takeFirst(LinkedBlockingDeque.java:492)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.take(LinkedBlockingDeque.java:680)</span><br><span class="line">	at sun.nio.fs.AbstractWatchService.take(AbstractWatchService.java:118)</span><br><span class="line">	at com.alibaba.nacos.sys.file.WatchFileCenter$WatchDirJob.run(WatchFileCenter.java:201)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Thread-41&quot; #104 daemon prio=5 os_prio=0 tid=0x00007ff6f4c13000 nid=0x16e5 runnable [0x00007ff5d78f7000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.fs.LinuxWatchService.poll(Native Method)</span><br><span class="line">	at sun.nio.fs.LinuxWatchService.access$600(LinuxWatchService.java:47)</span><br><span class="line">	at sun.nio.fs.LinuxWatchService$Poller.run(LinuxWatchService.java:314)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.core.remote.event.ConnectionLimitRuleChangeEvent&quot; #102 daemon prio=5 os_prio=0 tid=0x00007ff6f4d05000 nid=0x16e4 waiting on condition [0x00007ff5d79f8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd2255f0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;/usr/local/nacos/data/tps&quot; #100 prio=5 os_prio=0 tid=0x00007ff6f4bb6800 nid=0x16e3 waiting on condition [0x00007ff5d7af9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd272e60&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.takeFirst(LinkedBlockingDeque.java:492)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.take(LinkedBlockingDeque.java:680)</span><br><span class="line">	at sun.nio.fs.AbstractWatchService.take(AbstractWatchService.java:118)</span><br><span class="line">	at com.alibaba.nacos.sys.file.WatchFileCenter$WatchDirJob.run(WatchFileCenter.java:201)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Thread-38&quot; #101 daemon prio=5 os_prio=0 tid=0x00007ff6f4bb5800 nid=0x16e2 runnable [0x00007ff5d7bfa000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.fs.LinuxWatchService.poll(Native Method)</span><br><span class="line">	at sun.nio.fs.LinuxWatchService.access$600(LinuxWatchService.java:47)</span><br><span class="line">	at sun.nio.fs.LinuxWatchService$Poller.run(LinuxWatchService.java:314)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.core.remote.tps.control.reporter&quot; #99 daemon prio=5 os_prio=0 tid=0x00007ff6f47b6800 nid=0x16e1 runnable [0x00007ff5d7cfb000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fbac9140&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.core.remote.control.TpsControlRuleChangeEvent&quot; #98 daemon prio=5 os_prio=0 tid=0x00007ff6f4d4f800 nid=0x16e0 waiting on condition [0x00007ff5d7dfc000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd283c08&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.config.server.model.event.LocalDataChangeEvent&quot; #97 daemon prio=5 os_prio=0 tid=0x00007ff6f471d800 nid=0x16df waiting on condition [0x00007ff5d7efd000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd2840a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.config.server.model.event.ConfigDataChangeEvent&quot; #96 daemon prio=5 os_prio=0 tid=0x00007ff6f421e000 nid=0x16dd waiting on condition [0x00007ff5d7ffe000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17db10&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 16&quot; #94 prio=5 os_prio=0 tid=0x00007ff6180d7000 nid=0x16dc runnable [0x00007ff6481ca000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb80ec80&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb80ec70&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb80eb38&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 15&quot; #93 prio=5 os_prio=0 tid=0x00007ff6180d5000 nid=0x16db runnable [0x00007ff6482cb000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb80f1c8&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb80f1b8&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb80f080&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 14&quot; #92 prio=5 os_prio=0 tid=0x00007ff6180d3000 nid=0x16da runnable [0x00007ff6483cc000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb80f6a0&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb80f690&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb80f558&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 13&quot; #91 prio=5 os_prio=0 tid=0x00007ff6180d1000 nid=0x16d9 runnable [0x00007ff6484cd000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb80fb78&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb80fb68&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb80fa30&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 12&quot; #90 prio=5 os_prio=0 tid=0x00007ff6180cf000 nid=0x16d8 runnable [0x00007ff6485ce000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb810050&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb810040&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb80ff08&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 11&quot; #89 prio=5 os_prio=0 tid=0x00007ff6180cd000 nid=0x16d7 runnable [0x00007ff6486cf000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb95a350&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb95a340&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb8103e0&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 10&quot; #88 prio=5 os_prio=0 tid=0x00007ff6180cb000 nid=0x16d6 runnable [0x00007ff6487d0000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb95a828&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb95a818&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb95a6e0&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 9&quot; #87 prio=5 os_prio=0 tid=0x00007ff6180c9000 nid=0x16d5 runnable [0x00007ff6488d1000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb95ad00&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb95acf0&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb95abb8&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;pool-3-thread-1&quot; #86 prio=5 os_prio=0 tid=0x00007ff6f4fd6000 nid=0x16d4 runnable [0x00007ff6489d2000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fb80e890&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fb80e880&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fb80e748&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:343)</span><br><span class="line">	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)</span><br><span class="line">	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.remote-connection-manager.0&quot; #85 daemon prio=5 os_prio=0 tid=0x00007ff6f474c000 nid=0x16d3 waiting on condition [0x00007ff648ad3000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17e0f8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.6&quot; #84 daemon prio=5 os_prio=0 tid=0x00007ff5e4002000 nid=0x16d2 waiting on condition [0x00007ff648bd4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.5&quot; #83 daemon prio=5 os_prio=0 tid=0x00007ff6f4a3f800 nid=0x16d1 waiting on condition [0x00007ff648cd5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.status.worker.0&quot; #82 daemon prio=5 os_prio=0 tid=0x00007ff6f4b29000 nid=0x16d0 runnable [0x00007ff648dd6000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17ea80&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.config.server.timer.0&quot; #81 daemon prio=5 os_prio=0 tid=0x00007ff6f67a0000 nid=0x16cc waiting on condition [0x00007ff6490d7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb809368&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;HikariPool-1 housekeeper&quot; #78 daemon prio=5 os_prio=0 tid=0x00007ff6f66f2000 nid=0x16c9 waiting on condition [0x00007ff6493da000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fa6cf070&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.4&quot; #77 daemon prio=5 os_prio=0 tid=0x00007ff614003000 nid=0x16be waiting on condition [0x00007ff6496db000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;mysql-cj-abandoned-connection-cleanup&quot; #76 daemon prio=5 os_prio=0 tid=0x00007ff6f5d4d000 nid=0x16bc in Object.wait() [0x00007ff6497dc000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (on object monitor)</span><br><span class="line">	at java.lang.Object.wait(Native Method)</span><br><span class="line">	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)</span><br><span class="line">	- locked &lt;0x00000000fa17f038&gt; (a java.lang.ref.ReferenceQueue$Lock)</span><br><span class="line">	at com.mysql.cj.jdbc.AbandonedConnectionCleanupThread.run(AbandonedConnectionCleanupThread.java:91)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fa172510&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;container-0&quot; #75 prio=5 os_prio=0 tid=0x00007ff6f63a3000 nid=0x16bb waiting on condition [0x00007ff649add000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (sleeping)</span><br><span class="line">	at java.lang.Thread.sleep(Native Method)</span><br><span class="line">	at org.apache.catalina.core.StandardServer.await(StandardServer.java:563)</span><br><span class="line">	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer$1.run(TomcatWebServer.java:197)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Catalina-utility-2&quot; #74 prio=1 os_prio=0 tid=0x00007ff5ec004000 nid=0x16ba runnable [0x00007ff649bde000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7ec2d8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Catalina-utility-1&quot; #73 prio=1 os_prio=0 tid=0x00007ff6f6394800 nid=0x16b9 waiting on condition [0x00007ff649cdf000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb7ec2d8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.3&quot; #72 daemon prio=5 os_prio=0 tid=0x00007ff614001000 nid=0x16a7 runnable [0x00007ff649fe0000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.2&quot; #71 daemon prio=5 os_prio=0 tid=0x00007ff6f60fc000 nid=0x16a6 waiting on condition [0x00007ff64a0e1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DoubleWriteDelayTaskEngine.0&quot; #70 daemon prio=5 os_prio=0 tid=0x00007ff6f60df000 nid=0x16a3 runnable [0x00007ff64a1e2000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb830c30&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.naming.core.v2.upgrade.UpgradeStates$UpgradeStateChangedEvent&quot; #69 daemon prio=5 os_prio=0 tid=0x00007ff6f60dc000 nid=0x16a2 waiting on condition [0x00007ff64a2e3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd225aa0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.service.empty.auto-clean.0&quot; #68 daemon prio=5 os_prio=0 tid=0x00007ff6f60d6000 nid=0x16a1 waiting on condition [0x00007ff64a3e4000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd225fe8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.service.update.processor.0&quot; #67 daemon prio=5 os_prio=0 tid=0x00007ff6f60d3000 nid=0x16a0 waiting on condition [0x00007ff64a4e5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb786778&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.takeFirst(LinkedBlockingDeque.java:492)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.take(LinkedBlockingDeque.java:680)</span><br><span class="line">	at com.alibaba.nacos.naming.core.ServiceManager$UpdatedServiceProcessor.run(ServiceManager.java:244)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fb7869b8&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.service.worker.0&quot; #66 daemon prio=5 os_prio=0 tid=0x00007ff6f60cf000 nid=0x169f waiting on condition [0x00007ff64a5e6000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd2266e8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.distro.notifier.0&quot; #65 daemon prio=5 os_prio=0 tid=0x00007ff6f60c6000 nid=0x169c waiting on condition [0x00007ff64a6e7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd226d28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.naming.consistency.ephemeral.distro.DistroConsistencyServiceImpl$Notifier.run(DistroConsistencyServiceImpl.java:412)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fd226e20&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #64 prio=5 os_prio=0 tid=0x00007ff6f60bd000 nid=0x169a waiting on condition [0x00007ff64a7e8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb831998&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #63 prio=5 os_prio=0 tid=0x00007ff6f60bb000 nid=0x1699 waiting on condition [0x00007ff64a8e9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb831da8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #62 prio=5 os_prio=0 tid=0x00007ff6f60b9000 nid=0x1698 waiting on condition [0x00007ff64a9ea000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb832150&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #61 prio=5 os_prio=0 tid=0x00007ff6f60b7000 nid=0x1697 waiting on condition [0x00007ff64aaeb000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8324f8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #60 prio=5 os_prio=0 tid=0x00007ff6f60b5000 nid=0x1696 waiting on condition [0x00007ff64abec000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb8328a0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #59 prio=5 os_prio=0 tid=0x00007ff6f60b3000 nid=0x1695 waiting on condition [0x00007ff64aced000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb832c48&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #58 prio=5 os_prio=0 tid=0x00007ff6f60b1000 nid=0x1694 waiting on condition [0x00007ff64adee000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb832ff0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DistroExecuteTaskExecuteEngine&quot; #57 prio=5 os_prio=0 tid=0x00007ff6f60b0000 nid=0x1693 waiting on condition [0x00007ff64aeef000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb833398&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.task.engine.TaskExecuteWorker$InnerWorker.run(TaskExecuteWorker.java:114)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.core.distributed.distro.task.delay.DistroDelayTaskExecuteEngine.0&quot; #56 daemon prio=5 os_prio=0 tid=0x00007ff6f60aa800 nid=0x1690 runnable [0x00007ff64aff0000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb831558&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.push.retransmitter.0&quot; #55 daemon prio=5 os_prio=0 tid=0x00007ff6f5f1a000 nid=0x168e waiting on condition [0x00007ff64b0f1000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd2846b8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.push.receiver&quot; #54 daemon prio=5 os_prio=0 tid=0x00007ff6f5ef4000 nid=0x168d runnable [0x00007ff64b1f2000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at java.net.PlainDatagramSocketImpl.receive0(Native Method)</span><br><span class="line">	- locked &lt;0x00000000fbaffb98&gt; (a java.net.PlainDatagramSocketImpl)</span><br><span class="line">	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:149)</span><br><span class="line">	- locked &lt;0x00000000fbaffb98&gt; (a java.net.PlainDatagramSocketImpl)</span><br><span class="line">	at java.net.DatagramSocket.receive(DatagramSocket.java:812)</span><br><span class="line">	- locked &lt;0x00000000fd284d08&gt; (a java.net.DatagramPacket)</span><br><span class="line">	- locked &lt;0x00000000fbaffb58&gt; (a java.net.DatagramSocket)</span><br><span class="line">	at com.alibaba.nacos.naming.push.UdpPushService$Receiver.run(UdpPushService.java:431)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.1&quot; #53 daemon prio=5 os_prio=0 tid=0x00007ff6f5ee8800 nid=0x168c waiting on condition [0x00007ff64b2f3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fc731a28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.naming.consistency.ValueChangeEvent&quot; #52 daemon prio=5 os_prio=0 tid=0x00007ff6f5d5b800 nid=0x168a waiting on condition [0x00007ff64b3f4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb787fa8&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.nacos.naming.timer.0&quot; #51 daemon prio=5 os_prio=0 tid=0x00007ff6f5b9d800 nid=0x1689 runnable [0x00007ff64b4f5000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at java.net.PlainDatagramSocketImpl.receive0(Native Method)</span><br><span class="line">	- locked &lt;0x00000000fc31c8f8&gt; (a java.net.PlainDatagramSocketImpl)</span><br><span class="line">	at java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:149)</span><br><span class="line">	- locked &lt;0x00000000fc31c8f8&gt; (a java.net.PlainDatagramSocketImpl)</span><br><span class="line">	at java.net.DatagramSocket.receive(DatagramSocket.java:812)</span><br><span class="line">	- locked &lt;0x00000000fd17f058&gt; (a java.net.DatagramPacket)</span><br><span class="line">	- locked &lt;0x00000000fc31c8b8&gt; (a java.net.DatagramSocket)</span><br><span class="line">	at com.alibaba.nacos.naming.remote.udp.UdpConnector$UdpReceiver.run(UdpConnector.java:193)</span><br><span class="line">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">	at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000fc7337b0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.core.cluster.MembersChangeEvent&quot; #50 daemon prio=5 os_prio=0 tid=0x00007ff6f5d19000 nid=0x1687 waiting on condition [0x00007ff64b5f6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17f280&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 8&quot; #49 prio=5 os_prio=0 tid=0x00007ff6400e0000 nid=0x1686 runnable [0x00007ff64b6f7000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa88e938&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa88e928&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa88e7f0&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 7&quot; #48 prio=5 os_prio=0 tid=0x00007ff6400de000 nid=0x1685 runnable [0x00007ff64b7f8000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa88ee88&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa88ee78&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa88ed40&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 6&quot; #47 prio=5 os_prio=0 tid=0x00007ff6400dc000 nid=0x1684 runnable [0x00007ff64b8f9000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa88f360&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa88f350&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa88f218&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 5&quot; #46 prio=5 os_prio=0 tid=0x00007ff6400da000 nid=0x1683 runnable [0x00007ff64b9fa000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa88f838&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa88f828&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa88f6f0&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 4&quot; #45 prio=5 os_prio=0 tid=0x00007ff6400d8800 nid=0x1682 runnable [0x00007ff64bafb000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa88fd10&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa88fd00&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa88fbc8&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 3&quot; #44 prio=5 os_prio=0 tid=0x00007ff6400d6800 nid=0x1681 runnable [0x00007ff64bbfc000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa8901e8&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa8901d8&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa8900a0&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 2&quot; #43 prio=5 os_prio=0 tid=0x00007ff6400d5000 nid=0x1680 runnable [0x00007ff64bcfd000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa8906c0&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa8906b0&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa890578&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;I/O dispatcher 1&quot; #42 prio=5 os_prio=0 tid=0x00007ff640003000 nid=0x167f runnable [0x00007ff64bdfe000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa890b98&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa890b88&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa890a50&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:255)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;pool-2-thread-1&quot; #41 prio=5 os_prio=0 tid=0x00007ff6f5ced000 nid=0x167e runnable [0x00007ff6a81cd000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000fa88e548&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000fa88e538&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000fa88e400&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:343)</span><br><span class="line">	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:194)</span><br><span class="line">	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.common.event.ServerConfigChangeEvent&quot; #39 daemon prio=5 os_prio=0 tid=0x00007ff6f5a0a000 nid=0x167a waiting on condition [0x00007ff6bc19c000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd17f998&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-8&quot; #30 daemon prio=5 os_prio=0 tid=0x00007ff6f4e6a800 nid=0x1589 waiting on condition [0x00007ff6bc29d000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-7&quot; #29 daemon prio=5 os_prio=0 tid=0x00007ff6f4e68800 nid=0x1588 waiting on condition [0x00007ff6bc39e000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;AsyncAppender-Worker-async-naming-event&quot; #28 daemon prio=5 os_prio=0 tid=0x00007ff6f4e67000 nid=0x1586 waiting on condition [0x00007ff6bc49f000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8f31b80&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at ch.qos.logback.core.AsyncAppenderBase$Worker.run(AsyncAppenderBase.java:289)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-6&quot; #27 daemon prio=5 os_prio=0 tid=0x00007ff6f4e65000 nid=0x1585 waiting on condition [0x00007ff6bc5a0000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;AsyncAppender-Worker-async-naming-distro&quot; #26 daemon prio=5 os_prio=0 tid=0x00007ff6f4e63800 nid=0x1584 waiting on condition [0x00007ff6bc6a1000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8f47c08&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at ch.qos.logback.core.AsyncAppenderBase$Worker.run(AsyncAppenderBase.java:289)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-5&quot; #25 daemon prio=5 os_prio=0 tid=0x00007ff6f4e61800 nid=0x1583 waiting on condition [0x00007ff6bc7a2000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;AsyncAppender-Worker-async-naming-raft&quot; #24 daemon prio=5 os_prio=0 tid=0x00007ff6f4e5f800 nid=0x1582 waiting on condition [0x00007ff6bc8a3000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f900b1b0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at ch.qos.logback.core.AsyncAppenderBase$Worker.run(AsyncAppenderBase.java:289)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-4&quot; #23 daemon prio=5 os_prio=0 tid=0x00007ff6f4e5e000 nid=0x1581 waiting on condition [0x00007ff6bc9a4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;AsyncAppender-Worker-async-naming-server&quot; #22 daemon prio=5 os_prio=0 tid=0x00007ff6f4e5c800 nid=0x1580 waiting on condition [0x00007ff6bcaa5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8ff1c18&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at ch.qos.logback.core.AsyncAppenderBase$Worker.run(AsyncAppenderBase.java:289)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-3&quot; #21 daemon prio=5 os_prio=0 tid=0x00007ff6f4e52800 nid=0x157f waiting on condition [0x00007ff6bcba6000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-2&quot; #20 daemon prio=5 os_prio=0 tid=0x00007ff6f4dee800 nid=0x157e waiting on condition [0x00007ff6bcca7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1088)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;logback-1&quot; #19 daemon prio=5 os_prio=0 tid=0x00007ff6f4d48000 nid=0x157d runnable [0x00007ff6bcda8000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000f8de79e0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;com.alibaba.inet.ip.auto-refresh.0&quot; #18 daemon prio=5 os_prio=0 tid=0x00007ff6f4a61800 nid=0x157b waiting on condition [0x00007ff6bd4b3000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fb259688&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)</span><br><span class="line">	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent&quot; #16 daemon prio=5 os_prio=0 tid=0x00007ff6f4a47000 nid=0x1578 waiting on condition [0x00007ff6bd5b4000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd227490&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:117)</span><br><span class="line">	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;/usr/local/nacos/conf&quot; #12 prio=5 os_prio=0 tid=0x00007ff6f4a2a800 nid=0x1577 waiting on condition [0x00007ff6bd6b5000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">	at sun.misc.Unsafe.park(Native Method)</span><br><span class="line">	- parking to wait for  &lt;0x00000000fd228f28&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)</span><br><span class="line">	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.takeFirst(LinkedBlockingDeque.java:492)</span><br><span class="line">	at java.util.concurrent.LinkedBlockingDeque.take(LinkedBlockingDeque.java:680)</span><br><span class="line">	at sun.nio.fs.AbstractWatchService.take(AbstractWatchService.java:118)</span><br><span class="line">	at com.alibaba.nacos.sys.file.WatchFileCenter$WatchDirJob.run(WatchFileCenter.java:201)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Thread-3&quot; #13 daemon prio=5 os_prio=0 tid=0x00007ff6f4a28800 nid=0x1576 runnable [0x00007ff6bd7b6000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.fs.LinuxWatchService.poll(Native Method)</span><br><span class="line">	at sun.nio.fs.LinuxWatchService.access$600(LinuxWatchService.java:47)</span><br><span class="line">	at sun.nio.fs.LinuxWatchService$Poller.run(LinuxWatchService.java:314)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:750)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Service Thread&quot; #9 daemon prio=9 os_prio=0 tid=0x00007ff6f4236000 nid=0x156f runnable [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;C1 CompilerThread3&quot; #8 daemon prio=9 os_prio=0 tid=0x00007ff6f4213000 nid=0x156e waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;C2 CompilerThread2&quot; #7 daemon prio=9 os_prio=0 tid=0x00007ff6f4210800 nid=0x156d waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;C2 CompilerThread1&quot; #6 daemon prio=9 os_prio=0 tid=0x00007ff6f420f000 nid=0x156c waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;C2 CompilerThread0&quot; #5 daemon prio=9 os_prio=0 tid=0x00007ff6f420c000 nid=0x156b waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Signal Dispatcher&quot; #4 daemon prio=9 os_prio=0 tid=0x00007ff6f420a800 nid=0x156a runnable [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x00007ff6f41d7800 nid=0x1569 in Object.wait() [0x00007ff6be8e7000]</span><br><span class="line">   java.lang.Thread.State: WAITING (on object monitor)</span><br><span class="line">	at java.lang.Object.wait(Native Method)</span><br><span class="line">	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)</span><br><span class="line">	- locked &lt;0x00000000fd22a8e8&gt; (a java.lang.ref.ReferenceQueue$Lock)</span><br><span class="line">	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:165)</span><br><span class="line">	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:216)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 tid=0x00007ff6f41d3000 nid=0x1568 in Object.wait() [0x00007ff6be9e8000]</span><br><span class="line">   java.lang.Thread.State: WAITING (on object monitor)</span><br><span class="line">	at java.lang.Object.wait(Native Method)</span><br><span class="line">	at java.lang.Object.wait(Object.java:502)</span><br><span class="line">	at java.lang.ref.Reference.tryHandlePending(Reference.java:191)</span><br><span class="line">	- locked &lt;0x00000000fd17fec8&gt; (a java.lang.ref.Reference$Lock)</span><br><span class="line">	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;VM Thread&quot; os_prio=0 tid=0x00007ff6f41c9000 nid=0x1567 runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#0 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f401f800 nid=0x155f runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#1 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f4021800 nid=0x1560 runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#2 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f4023800 nid=0x1561 runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#3 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f4025000 nid=0x1562 runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#4 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f4027000 nid=0x1563 runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#5 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f4029000 nid=0x1564 runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#6 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f402a800 nid=0x1565 runnable </span><br><span class="line"></span><br><span class="line">&quot;GC task thread#7 (ParallelGC)&quot; os_prio=0 tid=0x00007ff6f402c800 nid=0x1566 runnable </span><br><span class="line"></span><br><span class="line">&quot;VM Periodic Task Thread&quot; os_prio=0 tid=0x00007ff6f423b000 nid=0x1570 waiting on condition </span><br><span class="line"></span><br><span class="line">JNI global references: 2250</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上述堆栈日志中发现加载redis,elasticsearch、nacos都存在io线程WAIT状态，于是分析微服务加载redis、elasticsearch、nacos是否出现内存IO抢占的情况，将微服务加载的基础服务在另外一台一模一样的服务器上部署启动，<br>发现现象依然存在，查看内存占用也没有达到瓶颈。</p>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>在尝试了多种方法依然没有找到问题的原因，在系统的日志中发现了如下错误输出：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Dec 11 10:20:01 S21612 kernel: EDAC MC1: 23064 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fd1f offset:0x440 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:01 S21612 kernel: EDAC MC1: 976 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc10 offset:0xf40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:02 S21612 kernel: EDAC MC1: 25007 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x86e19c offset:0xdc0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:02 S21612 kernel: EDAC MC1: 1756 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x780de9 offset:0x3c0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:03 S21612 kernel: EDAC MC1: 24687 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x74c6a1 offset:0x640 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:03 S21612 kernel: EDAC MC1: 2463 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x77ecb6 offset:0xdc0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:04 S21612 kernel: EDAC MC1: 18369 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x725df6 offset:0xdc0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:04 S21612 kernel: EDAC MC1: 771 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc10 offset:0xfc0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:05 S21612 kernel: EDAC MC1: 30990 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc96 offset:0x2c0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:06 S21612 kernel: EDAC MC1: 17884 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc9a offset:0xc40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:07 S21612 kernel: EDAC MC1: 23062 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x7f7d9a offset:0x140 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:07 S21612 kernel: EDAC MC1: 1060 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc16 offset:0x140 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:08 S21612 kernel: EDAC MC1: 25285 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc90 offset:0xf40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:08 S21612 kernel: EDAC MC1: 1046 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x86b1d0 offset:0x940 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:09 S21612 kernel: EDAC MC1: 17016 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x7d8ef0 offset:0xa40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:09 S21612 kernel: EDAC MC1: 724 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x83f688 offset:0xd40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:10 S21612 kernel: EDAC MC1: 30230 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x7fc69f offset:0x840 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:10 S21612 kernel: EDAC MC1: 740 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x83b05f offset:0xfc0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:11 S21612 kernel: EDAC MC1: 18710 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc90 offset:0xf40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:11 S21612 kernel: EDAC MC1: 749 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87ff17 offset:0x2c0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:12 S21612 kernel: EDAC MC1: 21864 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x839204 offset:0x40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:12 S21612 kernel: EDAC MC1: 815 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc10 offset:0xf40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:13 S21612 kernel: EDAC MC1: 27541 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc90 offset:0xf40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:13 S21612 kernel: EDAC MC1: 827 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87ff16 offset:0xc40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:14 S21612 kernel: EDAC MC1: 26658 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x7b1edb offset:0x5c0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:14 S21612 kernel: EDAC MC1: 696 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x86d4c8 offset:0x5c0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:15 S21612 kernel: EDAC MC1: 21277 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x4fb7c2 offset:0xf40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br><span class="line">Dec 11 10:20:15 S21612 kernel: EDAC MC1: 848 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fc9f offset:0xec0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:16 S21612 kernel: EDAC MC1: 28647 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x87fd1f offset:0xe40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:16 S21612 kernel: EDAC MC1: 779 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x86e19c offset:0x7c0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:17 S21612 kernel: EDAC MC1: 24023 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x83b68d offset:0xb40 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:1)</span><br><span class="line">Dec 11 10:20:17 S21612 kernel: EDAC MC1: 722 CE memory read error on CPU_SrcID#1_Ha#0_Chan#1_DIMM#0 (channel:1 slot:0 page:0x86db6b offset:0x2c0 grain:32 syndrome:0x0 -  OVERFLOW area:DRAM err_code:0001:0091 socket:1 ha:0 channel_mask:2 rank:0)</span><br></pre></td></tr></table></figure>

<p>经过一番搜索发现是因为服务器的内存加载出现错误，导致一直自检校验，但系统能够正常加载运行，再将内存重新插拔之后，系统错误日志不再打印输出，微服务加载启动正常。</p>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>JDK</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署微服务网关cpu占用问题排查</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3cpu%E5%8D%A0%E7%94%A8%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90span"><span id="inline-blue">问题分析</span></a><ul>
<li><a href="#span-idinline-bluezipkin%E4%B8%8A%E6%8A%A5%E6%8E%92%E6%9F%A5span"><span id="inline-blue">zipkin上报排查</span></a></li>
<li><a href="#span-idinline-bluetcpdump%E6%8A%93%E5%8C%85span"><span id="inline-blue">tcpdump抓包</span></a></li>
<li><a href="#span-idinline-bluejstack%E5%91%BD%E4%BB%A4%E6%8A%93%E5%8F%96%E5%BA%94%E7%94%A8%E5%A0%86%E6%A0%88span"><span id="inline-blue">jstack命令抓取应用堆栈</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>springCloud微服务网关通过docker部署之后，阿里云服务器经常出现cpu占用156%，但是查看业务请求日志，对应的请求日志很少，并发请求并不高，所以估计是网关服务自身的服务出现了问题。</p>
<h1><span id="问题分析"><span id="inline-blue">问题分析</span></span></h1><h2><span id="zipkin上报排查"><span id="inline-blue">zipkin上报排查</span></span></h2><p>微服务因为集成zipkin+sleuth实现链路追踪，第一时间感觉可能是zipkin的问题导致cpu占用，所以直接在nacos上将zipkin的相关上报配置给关掉了，zipkin的配置如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">  <span class="comment">#是否启用sleuth</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1.0</span> </span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">client:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://10.9.216.12:9411/</span></span><br><span class="line">    <span class="attr">discoveryClientEnabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">sender:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">web</span></span><br><span class="line">      <span class="attr">web:</span></span><br><span class="line">	  <span class="comment">#是否启用zipkin</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>修改完上述配置之后在portainer可视化容器管理后台重启了相关的微服务应用，cpu占用短暂下降之后立马就上升到了156%，这下意识到问题不是由zipkin引起的，继续排查。</p>
<h2><span id="tcpdump抓包"><span id="inline-blue">tcpdump抓包</span></span></h2><p>因为应用部署在docker容器，并且容器基于openjdk:8-jre基础镜像构建，导致容器内部无法使用jdk排查应用堆栈命令jstack和top命令(依赖版本有冲突)，所以采用tcpdump抓包的方式先看看微服务网关和其他模块的交互请求。<br>使用的tcpdump命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tcpdump -i eth0  port 9001 -s 0 -vv -w /tmp/1.cap</span><br></pre></td></tr></table></figure>

<p>上述tcpdump命令实现抓取经过9001端口和eth0网口的网络包，将抓取到的网络包拷贝到宿主机，使用docker cp命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker cp containerId:/tmp/q.cap  /usr/local/1.cap</span><br></pre></td></tr></table></figure>
<p>拷贝命令中的containerId为容器ID，自行替换为实际部署微服务的容器ID，通过XFTP将网络包拷贝到本地，使用wireshark工具打开，http格式报文过滤后内容截图如下：<br><img src="/images/docker/20251209/docker_20251209_001.png" alt="微服务容器抓包"></p>
<p>分析网关的请求交互没有出现特殊的请求内容，不应该出现cpu占用异常的情况。</p>
<h2><span id="jstack命令抓取应用堆栈"><span id="inline-blue">jstack命令抓取应用堆栈</span></span></h2><p>微服务因为基于openjdk:8-jre基础镜像构建，导致容器内部无法使用jdk排查应用堆栈命令jstack和top命令,下载第三方轻量工具jattach实现对java应用程序堆栈的抓取，配置jattach命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">containerId替换为实际容器ID</span></span><br><span class="line">docker exec -it containerId /bin/bash</span><br><span class="line"></span><br><span class="line">wget https://github.com/apangin/jattach/releases/download/v1.5/jattach -O /usr/bin/jattach</span><br><span class="line"></span><br><span class="line">chmod +x /usr/bin/jattach</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查询容器内java进程pid</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">containerId替换为实际容器ID</span></span><br><span class="line">docker exec -it containerId /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找占用9001端口的进程PID</span></span><br><span class="line">netstat -tlnp | grep 9001</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">输出</span></span><br><span class="line">tcp6       0      0 :::9001                 :::*                    LISTEN      8/java</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>打印java进程堆栈</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">containerId替换为实际容器ID</span></span><br><span class="line">docker exec -it containerId /bin/bash</span><br><span class="line"></span><br><span class="line">jattach 8 threaddump  &gt; /tmp/java_stack_force.log</span><br></pre></td></tr></table></figure>

<p>top命令不可用的情况下，需要安装procps依赖</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">containerId替换为实际容器ID</span></span><br><span class="line">docker exec -it containerId /bin/bash</span><br><span class="line"></span><br><span class="line">apt update &amp;&amp; apt install -y procps</span><br></pre></td></tr></table></figure>


<p>获取到java应用程序堆栈之后需要定位到cpu占用高的对应线程，如果容器内top命令可用的情况下，显示占用高的线程命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">containerId替换为实际容器ID</span></span><br><span class="line">docker exec -it containerId /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">8为容器内运行的java进程ID</span></span><br><span class="line">top -H -p 8</span><br></pre></td></tr></table></figure>



<p>上述命令得到线程占用高的线程id之后需要转换为16进制，以便通过grep命令搜索堆栈中对应线程的详细内容。</p>
<p>线程ID转换为16进制的命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">printf &quot;%x\n&quot;  线程ID</span><br></pre></td></tr></table></figure>

<p>查找java堆栈中对应线程ID的内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">假设16进制的线程ID为56</span></span><br><span class="line">grep -A 10 -B 10 &quot;0x56&quot; /tmp/java_stack_force.log</span><br></pre></td></tr></table></figure>

<p>对应cpu占用高的线程详情如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;XNIO-1 I/O-2&quot; #74 prio=5 os_prio=0 tid=0x00007fbee66d1000 nid=0x56 runnable [0x00007fbe8f0ef000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">        - locked &lt;0x0000000081104310&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">        - locked &lt;0x0000000081104300&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">        - locked &lt;0x0000000081104320&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">        at org.xnio.nio.WorkerThread.run(WorkerThread.java:551)</span><br><span class="line"></span><br><span class="line">&quot;XNIO-1 I/O-1&quot; #73 prio=5 os_prio=0 tid=0x00007fbee66d0000 nid=0x55 runnable [0x00007fbe8f1f0000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">        at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">        at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">        at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">        at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">        - locked &lt;0x0000000081104688&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">        - locked &lt;0x0000000081104678&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">        - locked &lt;0x0000000081104630&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">        at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">        at org.xnio.nio.WorkerThread.run(WorkerThread.java:551) </span><br></pre></td></tr></table></figure>

<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>JDK NIO的BUG epoll，导致Selector空轮询，最终导致CPU 占用居高不下。官方声称在JDK1.6版本的update18修复了该问题，但是直到JDK1.7版本该问题仍旧存在，只不过该BUG发生概率降低了一些而已，它并没有被根本解决。该BUG以及与该BUG相关的问题单可以参见以下链接内容。</p>
<p><a href="https://bugs.java.com/bugdatabase/view_bug.do?bug_id=2147719">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=2147719</a></p>
<p><a href="https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6403933">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6403933</a></p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>微服务网关集成的应用容器为undertow,该容器没有对JDK epoll模型进行优化导致上述问题，Tomcat已经对epoll bug进行封装和改进，需要将项目中的undertow依赖替换为tomcat.</p>
<p>去除undertow依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加tomcat依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>重新执行clean install命令打包部署后，微服务网关的cpu占用恢复正常。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/docker/20251209/docker_20251209_002.png" alt="微服务网关cpu占用问题分析"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>JDK</tag>
        <tag>epoll</tag>
      </tags>
  </entry>
  <entry>
    <title>Wildfly自定义导航应用程序文件上传目录</title>
    <url>/Wildfly/blogs/Wildfly%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%BC%E8%88%AA%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%AE%E5%BD%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>应用程序JDK版本升级为1.8之后，之前部署应用程序使用jboss-4.2.3在server.xml配置代理文件上传路径方式发生变化，现在演示在Wildfly-26.1.0-Final环境下自定义导航路径，使得应用程序上传的文件目录能够通过Wildfly的<a href="http://IP:port格式直接访问。">http://IP:port格式直接访问。</a></p>
<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>JDK： 1.8<br>Spring: 4.3.20.RELEASE<br>Wildfly: 26.1.0-Final</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>修改Wildfly配置文件standalone.xml,文件所在位置：/home/tianjin_istore/wildfly26-istore/standalone/configuration undertow子系统配置节点修改如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">     <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:undertow:12.0&quot;</span> <span class="attr">default-server</span>=<span class="string">&quot;default-server&quot;</span> <span class="attr">default-virtual-host</span>=<span class="string">&quot;default-host&quot;</span> <span class="attr">default-servlet-container</span>=<span class="string">&quot;default&quot;</span> <span class="attr">default-security-domain</span>=<span class="string">&quot;other&quot;</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;$&#123;wildfly.undertow.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">buffer-cache</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">&quot;default-server&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">http-listener</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">socket-binding</span>=<span class="string">&quot;http&quot;</span> <span class="attr">redirect-socket</span>=<span class="string">&quot;https&quot;</span> <span class="attr">max-post-size</span>=<span class="string">&quot;104857600&quot;</span> <span class="attr">enable-http2</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">https-listener</span> <span class="attr">name</span>=<span class="string">&quot;https&quot;</span> <span class="attr">socket-binding</span>=<span class="string">&quot;https&quot;</span> <span class="attr">ssl-context</span>=<span class="string">&quot;applicationSSC&quot;</span> <span class="attr">enable-http2</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&quot;default-host&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">location</span> <span class="attr">name</span>=<span class="string">&quot;/&quot;</span> <span class="attr">handler</span>=<span class="string">&quot;welcome-content&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">location</span> <span class="attr">name</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">handler</span>=<span class="string">&quot;upload-content&quot;</span>/&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">http-invoker</span> <span class="attr">http-authentication-factory</span>=<span class="string">&quot;application-http-authentication&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">servlet-container</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">jsp-config</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">websockets</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">servlet-container</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">file</span> <span class="attr">name</span>=<span class="string">&quot;welcome-content&quot;</span> <span class="attr">path</span>=<span class="string">&quot;$&#123;jboss.home.dir&#125;/welcome-content&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">file</span> <span class="attr">name</span>=<span class="string">&quot;upload-content&quot;</span> <span class="attr">path</span>=<span class="string">&quot;$&#123;jboss.home.dir&#125;/standalone/deployments/upload.war&quot;</span> <span class="attr">directory-listing</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">application-security-domain</span> <span class="attr">name</span>=<span class="string">&quot;other&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>增加的内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;location name=&quot;/upload&quot; handler=&quot;upload-content&quot;/&gt;</span><br><span class="line">&lt;file name=&quot;upload-content&quot; path=&quot;$&#123;jboss.home.dir&#125;/standalone/deployments/upload.war&quot; directory-listing=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>


<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/WildFly/20251205/WildFly_20251205_001.png" alt="WildFly自定义导航"></p>
]]></content>
      <categories>
        <category>Wildfly</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Wildfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Wildfly部署应用程序加载配置文件异常解决办法</title>
    <url>/Wildfly/blogs/Wildfly%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目模块升级为spring-4.3.20+JDK8之后，之前部署模块应用程序容器jboss-4.2.3已经不再兼容，需要对容器进行升级，综合考虑之下，选择wildfly-26.1.0-Final作为部署容器。</p>
<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>JDK： 1.8<br>Spring: 4.3.20.RELEASE<br>Wildfly: 26.1.0-Final</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>Wildfly部署应用程序启动加载出现如下报错信息：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2025-12-04 14:05:11,021 INFO  [com.xxx.istore.shelfmanager.task.ThridSignStatusCheckTask] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) signStatusCheck start###</span><br><span class="line">2025-12-04 14:05:11,028 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,029 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) java.io.FileNotFoundException: /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties (没有那个文件或目录)</span><br><span class="line">2025-12-04 14:05:11,031 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at java.io.FileInputStream.open0(Native Method)</span><br><span class="line">2025-12-04 14:05:11,031 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at java.io.FileInputStream.open(FileInputStream.java:195)</span><br><span class="line">2025-12-04 14:05:11,032 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)</span><br><span class="line">2025-12-04 14:05:11,033 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:93)</span><br><span class="line">2025-12-04 14:05:11,033 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at com.xxx.istore.common.SysConfigManager.&lt;init&gt;(SysConfigManager.java:106)</span><br><span class="line">2025-12-04 14:05:11,034 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at com.xxx.istore.common.SysConfigManager.getInstance(SysConfigManager.java:38)</span><br><span class="line">2025-12-04 14:05:11,034 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at com.xxx.istore.shelfmanager.common.AppConstants.&lt;clinit&gt;(AppConstants.java:19)</span><br><span class="line">2025-12-04 14:05:11,035 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at com.xxx.istore.shelfmanager.task.ThridSignStatusCheckTask.signStatusCheck(ThridSignStatusCheckTask.java:66)</span><br><span class="line">2025-12-04 14:05:11,035 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">2025-12-04 14:05:11,036 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">2025-12-04 14:05:11,037 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">2025-12-04 14:05:11,037 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">2025-12-04 14:05:11,038 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)</span><br><span class="line">2025-12-04 14:05:11,038 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:311)</span><br><span class="line">2025-12-04 14:05:11,039 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:113)</span><br><span class="line">2025-12-04 14:05:11,039 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at org.quartz.core.JobRunShell.run(JobRunShell.java:202)</span><br><span class="line">2025-12-04 14:05:11,040 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1)  at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)</span><br><span class="line">2025-12-04 14:05:11,041 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,041 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,042 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,042 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,043 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,043 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,044 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,044 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,045 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,045 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,046 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,046 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,047 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,047 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,048 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,049 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,049 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,050 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,050 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,051 ERROR [stderr] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) /home/istore/wildfly26-istore/modules/system/layers/base/org/jboss/as/ejb3/main/timers/conf/conf.properties file does not exist!</span><br><span class="line">2025-12-04 14:05:11,052 ERROR [org.quartz.core.JobRunShell] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) Job DEFAULT.thridSignStatusSyncTask threw an unhandled Exception: : org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method &#x27;signStatusCheck&#x27; on target class [class com.xxx.istore.shelfmanager.task.ThridSignStatusCheckTask] failed; nested exception is java.lang.ExceptionInInitializerError</span><br><span class="line">        at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:320)</span><br><span class="line">        at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:113)</span><br><span class="line">        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)</span><br><span class="line">        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)</span><br><span class="line">Caused by: java.lang.ExceptionInInitializerError</span><br><span class="line">        at com.xxx.istore.shelfmanager.task.ThridSignStatusCheckTask.signStatusCheck(ThridSignStatusCheckTask.java:66)</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">        at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)</span><br><span class="line">        at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:311)</span><br><span class="line">        ... 3 more</span><br><span class="line">Caused by: java.lang.NullPointerException</span><br><span class="line">        at com.xxx.istore.shelfmanager.common.AppConstants.&lt;clinit&gt;(AppConstants.java:251)</span><br><span class="line">        ... 10 more</span><br><span class="line"></span><br><span class="line">2025-12-04 14:05:11,060 ERROR [org.quartz.core.ErrorLogger] (org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1) Job (DEFAULT.thridSignStatusSyncTask threw an exception.: org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method &#x27;signStatusCheck&#x27; on target class [class com.xxx.istore.shelfmanager.task.ThridSignStatusCheckTask] failed; nested exception is java.lang.ExceptionInInitializerError]</span><br><span class="line">        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)</span><br><span class="line">        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)</span><br><span class="line">Caused by: org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method &#x27;signStatusCheck&#x27; on target class [class com.xxx.istore.shelfmanager.task.ThridSignStatusCheckTask] failed; nested exception is java.lang.ExceptionInInitializerError</span><br><span class="line">        at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:320)</span><br><span class="line">        at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:113)</span><br><span class="line">        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)</span><br><span class="line">        ... 1 more</span><br><span class="line">Caused by: java.lang.ExceptionInInitializerError</span><br><span class="line">        at com.xxx.istore.shelfmanager.task.ThridSignStatusCheckTask.signStatusCheck(ThridSignStatusCheckTask.java:66)</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">        at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)</span><br><span class="line">        at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:311)</span><br><span class="line">        ... 3 more</span><br><span class="line">Caused by: java.lang.NullPointerException</span><br><span class="line">        at com.xxx.istore.shelfmanager.common.AppConstants.&lt;clinit&gt;(AppConstants.java:251)</span><br><span class="line">        ... 10 more</span><br></pre></td></tr></table></figure>

<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>应用启动加载配置的正确的逻辑是加载wildfly部署应用程序所在class目录下的conf.properties配置文件，从实际的错误信息看加载的路径是wildfly自身modules依赖下目录，加载读取conf.properties配置的代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.istore.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysConfigManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SysConfigManager m_instance;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SYSTEM_CONFIG_FILE_NAME = <span class="string">&quot;conf.properties&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> String PFILE = getAbsApplicationPath() + <span class="string">&quot;conf&quot;</span></span><br><span class="line">			+ File.separator + SYSTEM_CONFIG_FILE_NAME;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> File m_file = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 上次加载时间戳</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">long</span> m_lastModifiedTime = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Properties m_props = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keyword">static</span> SysConfigManager <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (m_instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">			m_instance = <span class="keyword">new</span> SysConfigManager();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> m_instance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfoMessage</span><span class="params">(String errorCode)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getConfigItem(errorCode, m_props);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List <span class="title">getMessageList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">		<span class="keyword">for</span> (Enumeration&lt;Object&gt; e = m_props.keys(); e.hasMoreElements();) &#123;</span><br><span class="line">			list.add(e.nextElement().toString());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getValueByKey</span><span class="params">(String value)</span> </span>&#123;</span><br><span class="line">		String result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		List list = SysConfigManager.getInstance().getMessageList();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">			String temp = list.get(i).toString();</span><br><span class="line">			<span class="keyword">if</span> (value.contains(temp)) &#123;</span><br><span class="line">				result = SysConfigManager.getInstance()</span><br><span class="line">						.getConfigItem(temp, <span class="string">&quot;&quot;</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 默认构造方法</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SysConfigManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		m_file = <span class="keyword">new</span> File(PFILE);</span><br><span class="line">		m_lastModifiedTime = m_file.lastModified();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (m_lastModifiedTime == <span class="number">0</span>) &#123;</span><br><span class="line">			System.err.println(PFILE + <span class="string">&quot; file does not exist!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		m_props = <span class="keyword">new</span> Properties();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			m_props.load(<span class="keyword">new</span> FileInputStream(PFILE));</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">final</span> <span class="keyword">public</span> String <span class="title">getConfigItem</span><span class="params">(String name, Object defaultVal)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">long</span> newTime = m_file.lastModified();</span><br><span class="line">		<span class="keyword">if</span> (newTime == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (m_lastModifiedTime == <span class="number">0</span>) &#123;</span><br><span class="line">				System.err.println(PFILE + <span class="string">&quot; file does not exist!&quot;</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				System.err.println(PFILE + <span class="string">&quot; file was deleted!!&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (newTime &gt; m_lastModifiedTime) &#123;</span><br><span class="line">			m_props.clear();</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				m_props.load(<span class="keyword">new</span> FileInputStream(PFILE));</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		m_lastModifiedTime = newTime;</span><br><span class="line"></span><br><span class="line">		String val = m_props.getProperty(name);</span><br><span class="line">		<span class="keyword">if</span> (val == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> val;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 获取当前绝对路径</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getAbsApplicationPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String path = SystemConfig.class.getClassLoader().getResource(<span class="string">&quot;&quot;</span>)</span><br><span class="line">				.getPath();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			path = URLDecoder.decode(path, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		path = path</span><br><span class="line">				.replaceAll(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;\\&quot;</span> + System.getProperty(<span class="string">&quot;file.separator&quot;</span>));</span><br><span class="line">		<span class="keyword">if</span> (System.getProperty(<span class="string">&quot;file.separator&quot;</span>).equals(<span class="string">&quot;\\&quot;</span>))<span class="comment">// windows</span></span><br><span class="line">			path = path.substring(<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">return</span> path;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(SysConfigManager.getAbsApplicationPath());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结合代码分析问题原因就是SystemConfig.class.getClassLoader().getResource(“”)调用没有获取到正确的资源文件的根路径，而是去wildfly自身的modules依赖下去读取对应的配置文件，导致加载异常</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>更改资源文件的读取方式，优化后加载配置文件的代码内容如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.istore.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysConfigManager</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(SysConfigManager.class);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SysConfigManager m_instance;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SYSTEM_CONFIG_FILE_NAME = <span class="string">&quot;conf.properties&quot;</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> String PFILE = File.separator + <span class="string">&quot;conf&quot;</span></span><br><span class="line">			+ File.separator + SYSTEM_CONFIG_FILE_NAME;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> File m_file = <span class="keyword">null</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> InputStream is;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 上次加载时间戳</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">long</span> m_lastModifiedTime = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Properties config = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keyword">static</span> SysConfigManager <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (m_instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">			m_instance = <span class="keyword">new</span> SysConfigManager();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> m_instance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfoMessage</span><span class="params">(String errorCode)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getConfigItem(errorCode, config);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List <span class="title">getMessageList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">		<span class="keyword">for</span> (Enumeration&lt;Object&gt; e = config.keys(); e.hasMoreElements();) &#123;</span><br><span class="line">			list.add(e.nextElement().toString());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> list;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getValueByKey</span><span class="params">(String value)</span> </span>&#123;</span><br><span class="line">		String result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		List list = SysConfigManager.getInstance().getMessageList();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">			String temp = list.get(i).toString();</span><br><span class="line">			<span class="keyword">if</span> (value.contains(temp)) &#123;</span><br><span class="line">				result = SysConfigManager.getInstance()</span><br><span class="line">						.getConfigItem(temp, <span class="string">&quot;&quot;</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 默认构造方法</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SysConfigManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		m_file = ResourcesUtil.getResourceAsFile(PFILE);</span><br><span class="line">		m_lastModifiedTime = m_file.lastModified();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (m_lastModifiedTime == <span class="number">0</span>) &#123;</span><br><span class="line">			System.err.println(PFILE + <span class="string">&quot; file does not exist!&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		config = <span class="keyword">new</span> Properties();</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line">			config.load(<span class="keyword">new</span> FileInputStream(m_file));</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			logger.error(<span class="string">&quot;load conf.properties error&quot;</span>, e); </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">final</span> <span class="keyword">public</span> String <span class="title">getConfigItem</span><span class="params">(String name, Object defaultVal)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">long</span> newTime = m_file.lastModified();</span><br><span class="line">		<span class="keyword">if</span> (newTime == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">if</span> (m_lastModifiedTime == <span class="number">0</span>) &#123;</span><br><span class="line">				System.err.println(PFILE + <span class="string">&quot; file does not exist!&quot;</span>);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				System.err.println(PFILE + <span class="string">&quot; file was deleted!!&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (newTime &gt; m_lastModifiedTime) &#123;</span><br><span class="line">			config.clear();</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				config.load(ResourcesUtil.getResourceAsStream(PFILE));</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		m_lastModifiedTime = newTime;</span><br><span class="line"></span><br><span class="line">		String val = config.getProperty(name);</span><br><span class="line">		<span class="keyword">if</span> (val == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> val;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 获取当前绝对路径</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getAbsApplicationPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String path = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			path = ResourcesUtil.getResourceAsFile(<span class="string">&quot;&quot;</span>).getAbsolutePath();</span><br><span class="line">			path = URLDecoder.decode(path, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException  e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; </span><br><span class="line">		path = path.replaceAll(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;\\&quot;</span> + System.getProperty(<span class="string">&quot;file.separator&quot;</span>));</span><br><span class="line">		<span class="keyword">if</span> (System.getProperty(<span class="string">&quot;file.separator&quot;</span>).equals(<span class="string">&quot;\\&quot;</span>))</span><br><span class="line">		&#123;</span><br><span class="line">			path = path.substring(<span class="number">1</span>);</span><br><span class="line">		&#125;	</span><br><span class="line">		<span class="keyword">return</span> path;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			System.out.println(ResourcesUtil.getResourceAsFile(<span class="string">&quot;&quot;</span>).getAbsolutePath());</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上述实现需要依赖ResourcesUtil工具类，对应代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.istore.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLConnection;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourcesUtil</span> <span class="keyword">extends</span> <span class="title">Object</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> ClassLoader defaultClassLoader;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Charset to use when calling getResourceAsReader. null means use the</span></span><br><span class="line"><span class="comment">	 * system default.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Charset charset;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">ResourcesUtil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns the default classloader (may be null).</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The default classloader</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ClassLoader <span class="title">getDefaultClassLoader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> defaultClassLoader;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Sets the default classloader</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> defaultClassLoader</span></span><br><span class="line"><span class="comment">	 *            - the new default ClassLoader</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setDefaultClassLoader</span><span class="params">(ClassLoader defaultClassLoader)</span> </span>&#123;</span><br><span class="line">		ResourcesUtil.defaultClassLoader = defaultClassLoader;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns the URL of the resource on the classpath</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> URL <span class="title">getResourceURL</span><span class="params">(String resource)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getResourceURL(getClassLoader(), resource);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns the URL of the resource on the classpath</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> loader</span></span><br><span class="line"><span class="comment">	 *            The classloader used to load the resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> URL <span class="title">getResourceURL</span><span class="params">(ClassLoader loader, String resource)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		URL url = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (loader != <span class="keyword">null</span>) &#123;</span><br><span class="line">			url = loader.getResource(resource);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (url == <span class="keyword">null</span>) &#123;</span><br><span class="line">			url = ClassLoader.getSystemResource(resource);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (url == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;Could not find resource &quot;</span> + resource);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> url;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a Stream object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InputStream <span class="title">getResourceAsStream</span><span class="params">(String resource)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> getResourceAsStream(getClassLoader(), resource);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a Stream object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> loader</span></span><br><span class="line"><span class="comment">	 *            The classloader used to load the resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InputStream <span class="title">getResourceAsStream</span><span class="params">(ClassLoader loader,</span></span></span><br><span class="line"><span class="function"><span class="params">			String resource)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		InputStream in = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (loader != <span class="keyword">null</span>) &#123;</span><br><span class="line">			in = loader.getResourceAsStream(resource);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (in == <span class="keyword">null</span>) &#123;</span><br><span class="line">			in = ClassLoader.getSystemResourceAsStream(resource);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (in == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;Could not find resource &quot;</span> + resource);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> in;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a Properties object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Properties <span class="title">getResourceAsProperties</span><span class="params">(String resource)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		Properties props = <span class="keyword">new</span> Properties();</span><br><span class="line">		InputStream in = <span class="keyword">null</span>;</span><br><span class="line">		String propfile = resource;</span><br><span class="line">		in = getResourceAsStream(propfile);</span><br><span class="line">		props.load(in);</span><br><span class="line">		in.close();</span><br><span class="line">		<span class="keyword">return</span> props;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a Properties object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> loader</span></span><br><span class="line"><span class="comment">	 *            The classloader used to load the resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Properties <span class="title">getResourceAsProperties</span><span class="params">(ClassLoader loader,</span></span></span><br><span class="line"><span class="function"><span class="params">			String resource)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		Properties props = <span class="keyword">new</span> Properties();</span><br><span class="line">		InputStream in = <span class="keyword">null</span>;</span><br><span class="line">		String propfile = resource;</span><br><span class="line">		in = getResourceAsStream(loader, propfile);</span><br><span class="line">		props.load(in);</span><br><span class="line">		in.close();</span><br><span class="line">		<span class="keyword">return</span> props;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a Reader object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Reader <span class="title">getResourceAsReader</span><span class="params">(String resource)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		Reader reader;</span><br><span class="line">		<span class="keyword">if</span> (charset == <span class="keyword">null</span>) &#123;</span><br><span class="line">			reader = <span class="keyword">new</span> InputStreamReader(getResourceAsStream(resource));</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			reader = <span class="keyword">new</span> InputStreamReader(getResourceAsStream(resource),</span><br><span class="line">					charset);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> reader;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a Reader object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> loader</span></span><br><span class="line"><span class="comment">	 *            The classloader used to load the resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Reader <span class="title">getResourceAsReader</span><span class="params">(ClassLoader loader, String resource)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		Reader reader;</span><br><span class="line">		<span class="keyword">if</span> (charset == <span class="keyword">null</span>) &#123;</span><br><span class="line">			reader = <span class="keyword">new</span> InputStreamReader(</span><br><span class="line">					getResourceAsStream(loader, resource));</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			reader = <span class="keyword">new</span> InputStreamReader(</span><br><span class="line">					getResourceAsStream(loader, resource), charset);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> reader;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a File object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            The resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> File <span class="title">getResourceAsFile</span><span class="params">(String resource)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> File(getResourceURL(resource).getFile());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns a resource on the classpath as a File object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> loader</span></span><br><span class="line"><span class="comment">	 *            - the classloader used to load the resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> resource</span></span><br><span class="line"><span class="comment">	 *            - the resource to find</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The resource</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> File <span class="title">getResourceAsFile</span><span class="params">(ClassLoader loader, String resource)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> File(getResourceURL(loader, resource).getFile());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Gets a URL as an input stream</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> urlString</span></span><br><span class="line"><span class="comment">	 *            - the URL to get</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> An input stream with the data from the URL</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InputStream <span class="title">getUrlAsStream</span><span class="params">(String urlString)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		URL url = <span class="keyword">new</span> URL(urlString);</span><br><span class="line">		URLConnection conn = url.openConnection();</span><br><span class="line">		<span class="keyword">return</span> conn.getInputStream();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Gets a URL as a Reader</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> urlString</span></span><br><span class="line"><span class="comment">	 *            - the URL to get</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> A Reader with the data from the URL</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Reader <span class="title">getUrlAsReader</span><span class="params">(String urlString)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> InputStreamReader(getUrlAsStream(urlString));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Gets a URL as a Properties object</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> urlString</span></span><br><span class="line"><span class="comment">	 *            - the URL to get</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> A Properties object with the data from the URL</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 *             If the resource cannot be found or read</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Properties <span class="title">getUrlAsProperties</span><span class="params">(String urlString)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		Properties props = <span class="keyword">new</span> Properties();</span><br><span class="line">		InputStream in = <span class="keyword">null</span>;</span><br><span class="line">		String propfile = urlString;</span><br><span class="line">		in = getUrlAsStream(propfile);</span><br><span class="line">		props.load(in);</span><br><span class="line">		in.close();</span><br><span class="line">		<span class="keyword">return</span> props;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Loads a class</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> className</span></span><br><span class="line"><span class="comment">	 *            - the class to load</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> The loaded class</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> ClassNotFoundException</span></span><br><span class="line"><span class="comment">	 *             If the class cannot be found (duh!)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Class <span class="title">classForName</span><span class="params">(String className)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">		Class clazz = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			clazz = getClassLoader().loadClass(className);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (clazz == <span class="keyword">null</span>) &#123;</span><br><span class="line">			clazz = Class.forName(className);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> clazz;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> ClassLoader <span class="title">getClassLoader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (defaultClassLoader != <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> defaultClassLoader;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> Thread.currentThread().getContextClassLoader();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Charset <span class="title">getCharset</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> charset;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Use this method to set the Charset to be used when calling the</span></span><br><span class="line"><span class="comment">	 * getResourceAsReader methods. This will allow iBATIS to function properly</span></span><br><span class="line"><span class="comment">	 * when the system default encoding doesn&#x27;t deal well with unicode</span></span><br><span class="line"><span class="comment">	 * (IBATIS-340, IBATIS-349)</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> charset</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setCharset</span><span class="params">(Charset charset)</span> </span>&#123;</span><br><span class="line">		ResourcesUtil.charset = charset;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Wildfly</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Wildfly</tag>
      </tags>
  </entry>
  <entry>
    <title>knife4j同时接收文件和json对象展示异常的解决办法</title>
    <url>/Knife4j/blogs/knife4j%E5%90%8C%E6%97%B6%E6%8E%A5%E6%94%B6%E6%96%87%E4%BB%B6%E5%92%8Cjson%E5%AF%B9%E8%B1%A1%E5%B1%95%E7%A4%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>knife4j-openapi3-spring-boot-starter：4.5.0<br>knife4j-gateway-spring-boot-starter：4.5.0<br>springdoc-openapi-ui: 1.7.0<br>Springboot: 2.6.6<br>Springcloud: 2021.0.6<br>JDK: 1.8</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>微服务网关统一集成knife4j依赖，实现微服务模块在线接口文档，模块接口参数需要同时传递接口json对象和文件时，在线接口文档展示错乱。</p>
<p>微服务对应模块knife4j相关配置如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">basic:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">production:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">setting:</span></span><br><span class="line">    <span class="attr">enable-filter-multipart-apis:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">language:</span> <span class="string">zh_cn</span></span><br><span class="line"></span><br><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="comment">#default-flat-param-object: true</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/v3/api-docs</span></span><br><span class="line">    <span class="attr">config-url:</span> <span class="string">/v3/api-docs/swagger-config</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">license:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Apache</span> <span class="string">License,</span> <span class="string">Version</span> <span class="number">2.0</span></span><br><span class="line">    <span class="attr">license-url:</span> <span class="string">https://www.apache.org/licenses/LICENSE-2.0.html</span></span><br><span class="line">  <span class="attr">contact:</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">test.com</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">test.com</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">test.com</span></span><br><span class="line">  <span class="attr">packages-to-scan:</span> <span class="string">com.test.adminbiz.controller</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">openapi_3_0</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">termsOfService:</span> <span class="string">服务条款</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">V1.0</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">ffcs-admin-biz</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">admin后台业务接口</span></span><br></pre></td></tr></table></figure>

<p>开启default-flat-param-object配置，则接口存在文件类型的参数在在线文档上不可见，原因是springdoc对应/v3/api-docs接口获取到的参数不正确，导致UI展现失败，如下图所示：<br><img src="/images/Knife4j/Knife4j_20251126_001.png" alt="Knife4j在线文档_01"></p>
<p>关闭default-flat-param-object配置，则接口传递json对象在UI上展现异常，如下图所示：<br><img src="/images/Knife4j/Knife4j_20251126_002.png" alt="Knife4j在线文档_01"></p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>如果想要同时传递对象和文件，解决办法是关闭default-flat-param-object配置，同时在传递对象参数上添加@ParameterObject注解，这样使得对象参数可以以表单参数的形式展现。</p>
<p>接口传递对象定义如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&#123;&quot;/page&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@Parameters(&#123;</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;versionNo&quot;, description = &quot;版本号&quot;,in = ParameterIn.QUERY),</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;updateType&quot;, description = &quot;更新方式 0:强制更新；1：非强制更新&quot;,in = ParameterIn.QUERY),</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;hardwareType&quot;, description = &quot;硬件类型 0：平板；1：手机&quot;,in = ParameterIn.QUERY),</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;operatingSystem&quot;, description = &quot;操作系统 0：IOS 1：安卓&quot;,in = ParameterIn.QUERY),</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;channelType&quot;, description = &quot;渠道类型（取数据字典）&quot;,in = ParameterIn.QUERY),</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;publishStatus&quot;, description = &quot;发布状态&quot;,in = ParameterIn.QUERY),</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;current&quot;, description = &quot;页数&quot;,in = ParameterIn.QUERY),</span></span><br><span class="line"><span class="meta">            @Parameter(name=&quot;size&quot;, description = &quot;每页大小&quot;,in = ParameterIn.QUERY)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;分页查询APP版本&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ApiResponse <span class="title">page</span><span class="params">( <span class="meta">@ParameterObject</span>  AppVersion version,</span></span></span><br><span class="line"><span class="function"><span class="params">                            <span class="meta">@RequestParam(name = &quot;current&quot;,required = false)</span>Long current,</span></span></span><br><span class="line"><span class="function"><span class="params">                            <span class="meta">@RequestParam(name = &quot;size&quot;,required = false)</span>Long size)</span></span>&#123;</span><br><span class="line">        Page&lt;AppVersion&gt; page = PageUtil.getPage(current,size);</span><br><span class="line">        <span class="keyword">return</span> success(<span class="keyword">this</span>.appVersionService.findPage(page, version));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>接口传递文件定义如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&#123;&quot;upload/&#123;id&#125;&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasAnyAuthority(&#x27;version:upload&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;上传文件&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ApiResponse <span class="title">upload</span><span class="params">(<span class="meta">@RequestPart</span> MultipartFile file, <span class="meta">@PathVariable</span> Long id)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> success(<span class="keyword">this</span>.appVersionService.upload(file, id));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Knife4j/Knife4j_20251126_003.png" alt="Knife4j在线文档_01"><br><img src="/images/Knife4j/Knife4j_20251126_004.png" alt="Knife4j在线文档_01"></p>
<p>参考：<a href="https://github.com/xiaoymin/knife4j/issues/922">https://github.com/xiaoymin/knife4j/issues/922</a></p>
]]></content>
      <categories>
        <category>Knife4j</category>
      </categories>
      <tags>
        <tag>Knife4j</tag>
        <tag>Springdoc</tag>
      </tags>
  </entry>
  <entry>
    <title>Elasticsearch基于策略实现索引自动删除</title>
    <url>/Elasticsearch/blogs/Elasticsearch%E5%9F%BA%E4%BA%8E%E7%AD%96%E7%95%A5%E5%AE%9E%E7%8E%B0%E7%B4%A2%E5%BC%95%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9Fspan"><span id="inline-blue">创建生命周期</span></a></li>
<li><a href="#span-idinline-blue%E7%B4%A2%E5%BC%95%E6%A8%A1%E6%9D%BF%E5%85%B3%E8%81%94%E7%AD%96%E7%95%A5span"><span id="inline-blue">索引模板关联策略</span></a><ul>
<li><a href="#span-idinline-bluezipkin-dependency_templatespan"><span id="inline-blue">zipkin-dependency_template</span></a></li>
<li><a href="#span-idinline-bluezipkin-span_templatespan"><span id="inline-blue">zipkin-span_template</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%B4%A2%E5%BC%95%E5%85%B3%E8%81%94%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5%E6%96%B9%E5%BC%8Fspan"><span id="inline-blue">已存在索引关联删除策略方式</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Zipkin: zipkin-server-2.26.0<br>Elasticsearch: 8.8.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务基于zipkin上述微服务调用链路追踪信息，数据存储Elasticsearch之后没有自动删除机制导致数据越来越多，已经快要超过数据节点设置的分片大小导致数据写入失败，接下来借助Elasticsearch生命周期管理实现自动清除过期的索引。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="创建生命周期"><span id="inline-blue">创建生命周期</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT http://120.76.251.149:9200/_ilm/policy/zipkin_delete_policy</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;policy&quot;: &#123;</span><br><span class="line">    &quot;phases&quot;: &#123;</span><br><span class="line">      &quot;delete&quot;: &#123;</span><br><span class="line">        &quot;min_age&quot;: &quot;7d&quot;,</span><br><span class="line">        &quot;actions&quot;: &#123;</span><br><span class="line">          &quot;delete&quot;: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>上述命令表示创建zipkin_delete_policy策略，最大保存索引时间为7天。</p>
<h2><span id="索引模板关联策略"><span id="inline-blue">索引模板关联策略</span></span></h2><p>Elasticsearch索引模板关联删除策略一定是在模板完整配置内容中添加删除策略才是正确的方法，如果使用以下方式进行关联，虽然策略能够正常关联上，但这种设置会导致其他有关索引动态字段映射的相关内容全部丢失，导致zipkin后台查询总是报错，通过比对不同日期的索引发现索引字段traceId字段的类型不一致。</p>
<h3><span id="zipkin-dependency_template"><span id="inline-blue">zipkin-dependency_template</span></span></h3><p>错误的方式:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT http://120.76.251.149:9200/_template/zipkin-dependency_template</span><br><span class="line">&#123;</span><br><span class="line">  &quot;index_patterns&quot;: [&quot;zipkin-dependency-*&quot;],</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">		&quot;index&quot;: &#123;</span><br><span class="line">      &quot;lifecycle&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;zipkin_delete_policy&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;number_of_shards&quot;: 1,          </span><br><span class="line">    &quot;number_of_replicas&quot;: 0,       </span><br><span class="line">    &quot;index.refresh_interval&quot;: &quot;30s&quot; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正确的方式:</p>
<p>先查询出对应模板的映射设置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">GET http://120.76.251.149:9200/_template/zipkin-dependency_template</span><br><span class="line">&#123;</span><br><span class="line">  &quot;zipkin-dependency_template&quot;: &#123;</span><br><span class="line">    &quot;order&quot;: 0,</span><br><span class="line">    &quot;index_patterns&quot;: [</span><br><span class="line">      &quot;zipkin-dependency-*&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;index&quot;: &#123;</span><br><span class="line">        &quot;requests&quot;: &#123;</span><br><span class="line">          &quot;cache&quot;: &#123;</span><br><span class="line">            &quot;enable&quot;: &quot;true&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;number_of_shards&quot;: &quot;3&quot;,</span><br><span class="line">        &quot;number_of_replicas&quot;: &quot;0&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;mappings&quot;: &#123;</span><br><span class="line">      &quot;enabled&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;aliases&quot;: &#123; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为zipkin-dependency_template索引模板添加删除策略</p>
<p>在上述查询获取到的索引模板内容添加索引删除策略，并将最外层的zipkin-dependency_template节点信息去除，然后执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT http://120.76.251.149:9200/_template/zipkin-dependency_template</span><br><span class="line">&#123;</span><br><span class="line">    &quot;order&quot;: 0,</span><br><span class="line">    &quot;index_patterns&quot;: [</span><br><span class="line">      &quot;zipkin-dependency-*&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;index&quot;: &#123;</span><br><span class="line">				&quot;lifecycle&quot;:</span><br><span class="line">				&#123;</span><br><span class="line">					&quot;name&quot;: &quot;zipkin_delete_policy&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">        &quot;number_of_shards&quot;: &quot;3&quot;,</span><br><span class="line">        &quot;number_of_replicas&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;requests&quot;: &#123;</span><br><span class="line">          &quot;cache&quot;: &#123;</span><br><span class="line">            &quot;enable&quot;: &quot;true&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;mappings&quot;: &#123;</span><br><span class="line">      &quot;enabled&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;aliases&quot;: &#123; &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3><span id="zipkin-span_template"><span id="inline-blue">zipkin-span_template</span></span></h3><p>错误的方式:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT http://120.76.251.149:9200/_template/zipkin-span_template</span><br><span class="line">&#123;</span><br><span class="line">  &quot;index_patterns&quot;: [&quot;zipkin-span-*&quot;],</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">		&quot;index&quot;: &#123;</span><br><span class="line">      &quot;lifecycle&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &quot;zipkin_delete_policy&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;number_of_shards&quot;: 1,          </span><br><span class="line">    &quot;number_of_replicas&quot;: 0,       </span><br><span class="line">    &quot;index.refresh_interval&quot;: &quot;30s&quot; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正确的方式:</p>
<p>先查询出对应模板的映射设置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">GET http://120.76.251.149:9200/_template/zipkin-span_template</span><br><span class="line">&#123;</span><br><span class="line">  &quot;zipkin-span_template&quot;: &#123;</span><br><span class="line">    &quot;order&quot;: 0,</span><br><span class="line">    &quot;index_patterns&quot;: [</span><br><span class="line">      &quot;zipkin-span-*&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;index&quot;: &#123;</span><br><span class="line">        &quot;requests&quot;: &#123;</span><br><span class="line">          &quot;cache&quot;: &#123;</span><br><span class="line">            &quot;enable&quot;: &quot;true&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;number_of_shards&quot;: &quot;3&quot;,</span><br><span class="line">        &quot;number_of_replicas&quot;: &quot;0&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;mappings&quot;: &#123;</span><br><span class="line">      &quot;_source&quot;: &#123;</span><br><span class="line">        &quot;excludes&quot;: [</span><br><span class="line">          &quot;_q&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;dynamic_templates&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;strings&quot;: &#123;</span><br><span class="line">            &quot;mapping&quot;: &#123;</span><br><span class="line">              &quot;norms&quot;: false,</span><br><span class="line">              &quot;ignore_above&quot;: 256,</span><br><span class="line">              &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;match_mapping_type&quot;: &quot;string&quot;,</span><br><span class="line">            &quot;match&quot;: &quot;*&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;traceId&quot;: &#123;</span><br><span class="line">          &quot;norms&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;duration&quot;: &#123;</span><br><span class="line">          &quot;type&quot;: &quot;long&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;remoteEndpoint&quot;: &#123;</span><br><span class="line">          &quot;dynamic&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;serviceName&quot;: &#123;</span><br><span class="line">              &quot;norms&quot;: false,</span><br><span class="line">              &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;localEndpoint&quot;: &#123;</span><br><span class="line">          &quot;dynamic&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;serviceName&quot;: &#123;</span><br><span class="line">              &quot;norms&quot;: false,</span><br><span class="line">              &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;_q&quot;: &#123;</span><br><span class="line">          &quot;norms&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;timestamp_millis&quot;: &#123;</span><br><span class="line">          &quot;format&quot;: &quot;epoch_millis&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;date&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;name&quot;: &#123;</span><br><span class="line">          &quot;norms&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;annotations&quot;: &#123;</span><br><span class="line">          &quot;enabled&quot;: false</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;tags&quot;: &#123;</span><br><span class="line">          &quot;enabled&quot;: false</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;aliases&quot;: &#123; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为zipkin-span_template索引模板添加删除策略</p>
<p>在上述查询获取到的索引模板内容添加索引删除策略，并将最外层的zipkin-span_template节点信息去除，然后执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT http://120.76.251.149:9200/_template/zipkin-span_template</span><br><span class="line"> &#123;</span><br><span class="line">    &quot;order&quot;: 0,</span><br><span class="line">    &quot;index_patterns&quot;: [</span><br><span class="line">      &quot;zipkin-span-*&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;index&quot;: &#123;</span><br><span class="line">				&quot;lifecycle&quot;:</span><br><span class="line">				&#123;</span><br><span class="line">					&quot;name&quot;: &quot;zipkin_delete_policy&quot;</span><br><span class="line">				&#125;,</span><br><span class="line">        &quot;number_of_shards&quot;: &quot;3&quot;,</span><br><span class="line">        &quot;number_of_replicas&quot;: &quot;0&quot;,</span><br><span class="line">        &quot;requests&quot;: &#123;</span><br><span class="line">          &quot;cache&quot;: &#123;</span><br><span class="line">            &quot;enable&quot;: &quot;true&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;mappings&quot;: &#123;</span><br><span class="line">      &quot;_source&quot;: &#123;</span><br><span class="line">        &quot;excludes&quot;: [</span><br><span class="line">          &quot;_q&quot;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;dynamic_templates&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;strings&quot;: &#123;</span><br><span class="line">            &quot;mapping&quot;: &#123;</span><br><span class="line">              &quot;norms&quot;: false,</span><br><span class="line">              &quot;ignore_above&quot;: 256,</span><br><span class="line">              &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;match_mapping_type&quot;: &quot;string&quot;,</span><br><span class="line">            &quot;match&quot;: &quot;*&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;traceId&quot;: &#123;</span><br><span class="line">          &quot;norms&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;duration&quot;: &#123;</span><br><span class="line">          &quot;type&quot;: &quot;long&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;remoteEndpoint&quot;: &#123;</span><br><span class="line">          &quot;dynamic&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;serviceName&quot;: &#123;</span><br><span class="line">              &quot;norms&quot;: false,</span><br><span class="line">              &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;localEndpoint&quot;: &#123;</span><br><span class="line">          &quot;dynamic&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;serviceName&quot;: &#123;</span><br><span class="line">              &quot;norms&quot;: false,</span><br><span class="line">              &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;_q&quot;: &#123;</span><br><span class="line">          &quot;norms&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;timestamp_millis&quot;: &#123;</span><br><span class="line">          &quot;format&quot;: &quot;epoch_millis&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;date&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;name&quot;: &#123;</span><br><span class="line">          &quot;norms&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;annotations&quot;: &#123;</span><br><span class="line">          &quot;enabled&quot;: false</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;tags&quot;: &#123;</span><br><span class="line">          &quot;enabled&quot;: false</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;aliases&quot;: &#123; &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>索引生命周期检测自动删除的检测机制是10分钟执行一次<br><img src="/images/Zipkin/Zipkin_20251124_006.png" alt="Zipkin索引自动删除_01"></p>
<h2><span id="已存在索引关联删除策略方式"><span id="inline-blue">已存在索引关联删除策略方式</span></span></h2><p>上述操作只能保证新生成的索引能够自动关联删除策略，之前生成的索引无法自动应用上述删除策略，解决办法如下：</p>
<p>zipkin-span相关索引：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT  http://47.89.174.246:9200/zipkin-span-*/_settings</span><br><span class="line">&#123;</span><br><span class="line">  &quot;index&quot;: &#123;</span><br><span class="line">    &quot;lifecycle&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;zipkin_delete_policy&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>zipkin-dependency相关索引：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT http://47.89.174.246:9200/zipkin-dependency-*/_settings</span><br><span class="line">&#123;</span><br><span class="line">  &quot;index&quot;: &#123;</span><br><span class="line">    &quot;lifecycle&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;zipkin_delete_policy&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/Zipkin/Zipkin_20251124_007.png" alt="Zipkin索引自动删除_02"></p>
<p>参考：<a href="https://github.com/openzipkin/zipkin-support/issues/23">https://github.com/openzipkin/zipkin-support/issues/23</a></p>
]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Zipkin</tag>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker基于zipkin+sleuth实现链路追踪数据上报无效的排查过程</title>
    <url>/Docker/blogs/Docker%E5%9F%BA%E4%BA%8Ezipkin+sleuth%E5%AE%9E%E7%8E%B0%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA%E6%95%B0%E6%8D%AE%E4%B8%8A%E6%8A%A5%E6%97%A0%E6%95%88%E7%9A%84%E6%8E%92%E6%9F%A5%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0span"><span id="inline-blue">问题描述</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90span"><span id="inline-blue">问题分析</span></a><ul>
<li><a href="#span-idinline-blue%E6%A3%80%E6%9F%A5%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BE%9D%E8%B5%96span"><span id="inline-blue">检查配置和依赖</span></a></li>
<li><a href="#span-idinline-blue%E5%88%86%E6%9E%90zipkin%E6%97%A5%E5%BF%97span"><span id="inline-blue">分析zipkin日志</span></a></li>
<li><a href="#span-idinline-bluetcpdump%E6%8A%93%E5%8C%85span"><span id="inline-blue">tcpdump抓包</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="问题描述"><span id="inline-blue">问题描述</span></span></h1><p>SpringCloud微服务基于zipkin+sleuth实现链路追踪，zipkin的上报数据指定存储在Elasticsearch,最近想看下微服务之间的调用耗时，在nacos更改了zipkin相关配置，发现没有效果，查看微服务的日志打印和zipkin管理后台，日志没有zipkin上报数据格式的日志信息，zipkin后台查询不到调用记录，最后查看Elasticsearch的索引信息，没有生成zipkin-span和zipkin-dependency索引信息</p>
<h1><span id="问题分析"><span id="inline-blue">问题分析</span></span></h1><h2><span id="检查配置和依赖"><span id="inline-blue">检查配置和依赖</span></span></h2><p>出现上述问题第一时间检查了nacos上zipkin对应的配置内容，确认上报开关开启，项目模块中maven依赖是否包含zipkin+sleuth，两者都没有问题</p>
<p>zipkin配置如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1.0</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">client:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://photoframe-zipkin:9411/</span></span><br><span class="line">    <span class="attr">discoveryClientEnabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sender:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">web</span></span><br></pre></td></tr></table></figure>


<p>maven依赖如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="分析zipkin日志"><span id="inline-blue">分析zipkin日志</span></span></h2><p>通过docker logs -f 容器id 命令查看zipkin容器的日志输出，发现除了启动日志之后没有其他有用的信息，日志信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@iZ0xiitmphpxjiek7z1aybZ zipkin]# docker logs -f 853a</span><br><span class="line">[INFO  wait] --------------------------------------------------------</span><br><span class="line">[INFO  wait]  docker-compose-wait 2.12.1</span><br><span class="line">[INFO  wait] ---------------------------</span><br><span class="line">[DEBUG wait] Starting with configuration:</span><br><span class="line">[DEBUG wait]  - Hosts to be waiting for: [photoframe-elasticsearch:9200]</span><br><span class="line">[DEBUG wait]  - Paths to be waiting for: []</span><br><span class="line">[DEBUG wait]  - Timeout before failure: 180 seconds </span><br><span class="line">[DEBUG wait]  - TCP connection timeout before retry: 5 seconds </span><br><span class="line">[DEBUG wait]  - Sleeping time before checking for hosts/paths availability: 0 seconds</span><br><span class="line">[DEBUG wait]  - Sleeping time once all hosts/paths are available: 0 seconds</span><br><span class="line">[DEBUG wait]  - Sleeping time between retries: 1 seconds</span><br><span class="line">[DEBUG wait] --------------------------------------------------------</span><br><span class="line">[INFO  wait] Checking availability of host [photoframe-elasticsearch:9200]</span><br><span class="line">[INFO  wait] Host [photoframe-elasticsearch:9200] is now available!</span><br><span class="line">[INFO  wait] --------------------------------------------------------</span><br><span class="line">[INFO  wait] docker-compose-wait - Everything&#x27;s fine, the application can now start!</span><br><span class="line">[INFO  wait] --------------------------------------------------------</span><br><span class="line"></span><br><span class="line">                  oo</span><br><span class="line">                 oooo</span><br><span class="line">                oooooo</span><br><span class="line">               oooooooo</span><br><span class="line">              oooooooooo</span><br><span class="line">             oooooooooooo</span><br><span class="line">           ooooooo  ooooooo</span><br><span class="line">          oooooo     ooooooo</span><br><span class="line">         oooooo       ooooooo</span><br><span class="line">        oooooo   o  o   oooooo</span><br><span class="line">       oooooo   oo  oo   oooooo</span><br><span class="line">     ooooooo  oooo  oooo  ooooooo</span><br><span class="line">    oooooo   ooooo  ooooo  ooooooo</span><br><span class="line">   oooooo   oooooo  oooooo  ooooooo</span><br><span class="line">  oooooooo      oo  oo      oooooooo</span><br><span class="line">  ooooooooooooo oo  oo ooooooooooooo</span><br><span class="line">      oooooooooooo  oooooooooooo</span><br><span class="line">          oooooooo  oooooooo</span><br><span class="line">              oooo  oooo</span><br><span class="line"></span><br><span class="line">     ________ ____  _  _____ _   _</span><br><span class="line">    |__  /_ _|  _ \| |/ /_ _| \ | |</span><br><span class="line">      / / | || |_) | &#x27; / | ||  \| |</span><br><span class="line">     / /_ | ||  __/| . \ | || |\  |</span><br><span class="line">    |____|___|_|   |_|\_\___|_| \_|</span><br><span class="line"></span><br><span class="line">:: version 2.26.0 :: commit 147feaa ::</span><br><span class="line"></span><br><span class="line">2025-11-24 11:43:13.635  INFO [/] 8 --- [oss-http-*:9411] c.l.a.s.Server                           : Serving HTTP at /0:0:0:0:0:0:0:0%0:9411 - http://127.0.0.1:9411/</span><br></pre></td></tr></table></figure>

<h2><span id="tcpdump抓包"><span id="inline-blue">tcpdump抓包</span></span></h2><p>在尝试过上述方法都没有效果的情况下选择通过tcpdump命令抓包，抓取微服务向zipkin上报链路调用的交互过程，同时抓取zipkin数据写入Elasticsearch的请求和相应。</p>
<p>微服务的抓包命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tcpdump -i eth0 port 9411 -s 0 -vv -w ./zipkin.cap</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>zipkin请求Elasticsearch写入数据的请求抓包命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tcpdump -i eth0 port 9200 -s 0 -vv -w ./elasticsearch.cap</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>-i</td>
<td>指定监听的网卡为 eth0（需确保网卡名称正确）；若需监听所有网卡，可替换为 -i any</td>
</tr>
<tr>
<td>port</td>
<td>过滤条件：仅抓取目标端口为 9200（Elasticsearch 默认通信端口）的网络数据包</td>
</tr>
<tr>
<td>-s</td>
<td>设置数据包抓取长度为完整长度（0 表示不截断，抓取整个数据包内容）</td>
</tr>
<tr>
<td>-vv</td>
<td>开启二级详细输出模式，会显示更多数据包细节（如TCP标志位、校验和、TTL等）</td>
</tr>
<tr>
<td>-w</td>
<td>将抓取的数据包保存到指定文件（当前目录下的 elasticsearch.cap），而非终端打印</td>
</tr>
</tbody></table>
<p>可以通过docker cp拷贝抓包输出的文件到宿主机，在使用XFtp工具传输到本地，使用Wireshark工具打开查看对应的请求信息，将请求报文对应转换为可查看的内容的方式为：<br>选中请求报文右键-&gt;追踪流-&gt;http,实际请求报文如下所示：<br><img src="/images/Zipkin/Zipkin_20251124_001.png" alt="微服务上报zipkin_01"><br><img src="/images/Zipkin/Zipkin_20251124_002.png" alt="微服务上报zipkin_02"></p>
<p>上述报文内容显示微服务上报模块调用数据到zipkin已经被正常接收，说明微服务的上报没有问题，接下来检查Zipkin向Elasticsearch的请求过程。</p>
<p><img src="/images/Zipkin/Zipkin_20251124_003.png" alt="zipkin写入Elasticsearch_01"></p>
<p>上述zipkin向Elasticsearch写入数据报错，报错信息如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;took&quot;</span>:<span class="number">0</span>,<span class="attr">&quot;errors&quot;</span>:<span class="literal">true</span>,<span class="attr">&quot;items&quot;</span>:[&#123;<span class="attr">&quot;index&quot;</span>:&#123;<span class="attr">&quot;_index&quot;</span>:<span class="string">&quot;zipkin-span-2025-11-24&quot;</span>,<span class="attr">&quot;_id&quot;</span>:<span class="string">&quot;e3c3091391c60d30-1e2ad834f6564a9bdcfa828a21dad453&quot;</span>,<span class="attr">&quot;status&quot;</span>:<span class="number">400</span>,<span class="attr">&quot;error&quot;</span>:&#123;<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;validation_exception&quot;</span>,<span class="attr">&quot;reason&quot;</span>:<span class="string">&quot;Validation Failed: 1: this action would add [10] shards, but this cluster currently has [995]/[1000] maximum normal shards open;&quot;</span>&#125;&#125;&#125;,&#123;<span class="attr">&quot;index&quot;</span>:&#123;<span class="attr">&quot;_index&quot;</span>:<span class="string">&quot;zipkin-span-2025-11-24&quot;</span>,<span class="attr">&quot;_id&quot;</span>:<span class="string">&quot;e3c3091391c60d30-8f132b315b9e2421cfe88d204c7a654f&quot;</span>,<span class="attr">&quot;status&quot;</span>:<span class="number">400</span>,<span class="attr">&quot;error&quot;</span>:&#123;<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;validation_exception&quot;</span>,<span class="attr">&quot;reason&quot;</span>:<span class="string">&quot;Validation Failed: 1: this action would add [10] shards, but this cluster currently has [995]/[1000] maximum normal shards open;&quot;</span>&#125;&#125;&#125;,&#123;<span class="attr">&quot;index&quot;</span>:&#123;<span class="attr">&quot;_index&quot;</span>:<span class="string">&quot;zipkin-span-2025-11-24&quot;</span>,<span class="attr">&quot;_id&quot;</span>:<span class="string">&quot;e3c3091391c60d30-225dd10183b89731fc0e428be9baec26&quot;</span>,<span class="attr">&quot;status&quot;</span>:<span class="number">400</span>,<span class="attr">&quot;error&quot;</span>:&#123;<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;validation_exception&quot;</span>,<span class="attr">&quot;reason&quot;</span>:<span class="string">&quot;Validation Failed: 1: this action would add [10] shards, but this cluster currently has [995]/[1000] maximum normal shards open;&quot;</span>&#125;&#125;&#125;]&#125;</span><br></pre></td></tr></table></figure>

<p>上述错误表明Elasticsearch节点默认1000分片，当前已经使用995分片，当前写入操作需要创建10个分片，现有分片不满足需求，数据写入失败了。</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>更改Elasticsearch数据节点分片大小。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PUT http://47.89.174.246:9200/_cluster/settings</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;persistent&quot;:</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;cluster.max_shards_per_node&quot;: 5000</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">GET http://120.76.251.149:9200/_cluster/settings</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/images/Zipkin/Zipkin_20251124_004.png" alt="Zipkin数据上报"><br><img src="/images/Zipkin/Zipkin_20251124_005.png" alt="Zipkin数据上报"></p>
<p>参考：<a href="https://blog.csdn.net/u010383467/article/details/134702660">https://blog.csdn.net/u010383467/article/details/134702660</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Zipkin</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker基于debian系统基础镜像构建的容器安装依赖失败解决办法</title>
    <url>/Docker/blogs/Docker%E5%9F%BA%E4%BA%8Edebian%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E7%9A%84%E5%AE%B9%E5%99%A8%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a><ul>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9sourcelist%E6%96%87%E4%BB%B6span"><span id="inline-blue">修改source.list文件</span></a></li>
<li><a href="#span-idinline-blue%E6%9B%B4%E6%96%B0%E5%B9%B6%E5%AE%89%E8%A3%85-curlspan"><span id="inline-blue">更新并安装 curl</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>基于Debian基础镜像构建的zipkin容器，在追查模块发送链路追踪消息时，发现数据未上报到Elasticsearch，在使用docker exec -it 容器ID /bin/bash进入容器内部，使用curl命令测试容器之间的连通性时提示命令无法识别，提示信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">apt-get install curl</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree        </span><br><span class="line">Reading state information... Done</span><br><span class="line">E: Unable to locate package curl</span><br></pre></td></tr></table></figure>

<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>Debian Buster（10）已经进入旧版本归档（oldoldstable），官方源地址变更导致无法访问</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><h2><span id="修改sourcelist文件"><span id="inline-blue">修改source.list文件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 备份原有源文件</span></span><br><span class="line">cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编辑源文件（使用buster的归档源）</span></span><br><span class="line">cat &gt; /etc/apt/sources.list &lt;&lt; EOF</span><br><span class="line">deb http://archive.debian.org/debian buster main contrib non-free</span><br><span class="line">deb http://archive.debian.org/debian-security buster/updates main contrib non-free</span><br><span class="line">deb http://archive.debian.org/debian buster-updates main contrib non-free</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加忽略过期验证（因为buster已停止更新）</span></span><br><span class="line">echo &#x27;Acquire::Check-Valid-Until &quot;false&quot;;&#x27; &gt; /etc/apt/apt.conf.d/99no-check-valid-until</span><br></pre></td></tr></table></figure>

<h2><span id="更新并安装-curl"><span id="inline-blue">更新并安装 curl</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 更新源缓存</span></span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装curl</span></span><br><span class="line">apt-get install -y curl</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl --version</span><br><span class="line"><span class="meta">#</span><span class="bash">common-elasticsearch是Docker swarm模式下部署的服务名</span></span><br><span class="line">curl http://common-elasticsearch:9200</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Proguard实现Java代码混淆</title>
    <url>/Proguard/blogs/Proguard%E5%AE%9E%E7%8E%B0Java%E4%BB%A3%E7%A0%81%E6%B7%B7%E6%B7%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blueproguardspan"><span id="inline-blue">ProGuard</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目因为业务上的原因需要对模块部分源代码实现混淆，以下实现借助proguard实现java代码混淆。</p>
<h1><span id="proguard"><span id="inline-blue">ProGuard</span></span></h1><p>ProGuard是一个免费的Java类文件收缩，优化，混淆和预校验器。<br>它可以检测并删除未使用的类，字段，方法和属性。它可以优化字节码，并删除未使用的指令。<br>它可以将类、字段和方法使用短无意义的名称进行重命名。<br>最后，预校验的Java6或针对Java MicroEdition的所述处理后的码。<br>如果开启了混淆，Proguard默认情况下会对所有代码，包括第三方包都进行混淆，可是有些代码或者第三方包是不能混淆的，这就需要我们手动编写混淆规则来保持不能被混淆的部分。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>maven项目引入proguard混淆插件,实现针对com.test.common.service包目录下的源代码实现混淆，排除类中特定的方法和变量</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.wvengen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>proguard-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;proguard.plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">goals</span>&gt;</span><span class="tag">&lt;<span class="name">goal</span>&gt;</span>proguard<span class="tag">&lt;/<span class="name">goal</span>&gt;</span><span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">proguardVersion</span>&gt;</span>$&#123;proguard.core.version&#125;<span class="tag">&lt;/<span class="name">proguardVersion</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">injar</span>&gt;</span>$&#123;project.build.finalName&#125;-original.jar<span class="tag">&lt;/<span class="name">injar</span>&gt;</span> <span class="comment">&lt;!-- 输入严格过滤后的原始Jar --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">outjar</span>&gt;</span>$&#123;project.build.finalName&#125;.jar<span class="tag">&lt;/<span class="name">outjar</span>&gt;</span> <span class="comment">&lt;!-- 输出混淆后的Jar --&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 依赖JAR配置（供ProGuard解析类关系） --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">libs</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- Include main JAVA library required.--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">lib</span>&gt;</span>$&#123;java.home&#125;/lib/rt.jar<span class="tag">&lt;/<span class="name">lib</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- Include crypto JAVA library if necessary.--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">lib</span>&gt;</span>$&#123;java.home&#125;/lib/jce.jar<span class="tag">&lt;/<span class="name">lib</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">lib</span>&gt;</span>$&#123;project.basedir&#125;/lib<span class="tag">&lt;/<span class="name">lib</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">libs</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 核心混淆规则（用CDATA包裹，避免XML解析错误） --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">options</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 1. 保留包路径 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keeppackagenames com.test.common.service.**]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 2. 保留所有 service 下的类 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep class com.test.common.service.**]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 保持目录结构 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keepdirectories]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 3. 保留类成员（字段+方法签名+构造方法，合并为一个规则） --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keepclassmembers class com.test.common.service.** &#123;</span><br><span class="line">                         &lt;fields&gt;;</span><br><span class="line">                         public &lt;methods&gt;;</span><br><span class="line">                         protected &lt;methods&gt;;</span><br><span class="line">                         &lt;init&gt;(...);</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 4. 完整保留Spring注解 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep @org.springframework.stereotype.Component class com.test.common.service.**]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep @org.springframework.stereotype.Service class com.test.common.service.**]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keepclassmembers class com.coship.oms.service** &#123;</span><br><span class="line">                         @org.springframework.beans.factory.annotation.Autowired *;</span><br><span class="line">                         @org.springframework.beans.factory.annotation.Resource *;</span><br><span class="line">                         @org.springframework.beans.factory.annotation.Value *;</span><br><span class="line">				@org.springframework.stereotype.Component *;</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 5. 保留Spring生命周期接口 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep class com.coship.oms.service.** implements org.springframework.context.ApplicationContextAware &#123;</span><br><span class="line">                         public &lt;methods&gt;;</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep class com.coship.oms.service.** implements org.springframework.beans.factory.InitializingBean &#123;</span><br><span class="line">                         public &lt;methods&gt;;</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 6. 保留内部类 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep class com.coship.oms.service.**$* &#123;</span><br><span class="line">                         @*.* *;</span><br><span class="line">                         &lt;fields&gt;;</span><br><span class="line">                         &lt;methods&gt;;</span><br><span class="line">                         &lt;init&gt;(...);</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep class com.coship.oms.service.**$*$* &#123;</span><br><span class="line">                         @*.* *;</span><br><span class="line">                         &lt;fields&gt;;</span><br><span class="line">                         &lt;methods&gt;;</span><br><span class="line">                         &lt;init&gt;(...);</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 7. 保留枚举类 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keep class *$* extends java.lang.Enum &#123;</span><br><span class="line">                         *;</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keepclassmembers enum * &#123;</span><br><span class="line">                         public static **[] values();</span><br><span class="line">                         public static ** valueOf(java.lang.String);</span><br><span class="line">                         *;</span><br><span class="line">                     &#125;]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 解决邮件类超类问题 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-keep class javax.mail.** &#123; *; &#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-keep class com.sun.mail.** &#123; *; &#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-useuniqueclassmembernames<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keepattributes !LocalVariableTable,!LocalVariableTypeTable]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>&lt;![CDATA[-keepattributes Exceptions,InnerClasses,Signature,*Annotation*,SourceFile,LineNumberTable]]&gt;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                     <span class="tag">&lt;<span class="name">option</span>&gt;</span>-dontshrink<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">option</span>&gt;</span>-dontoptimize<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-dontskipnonpubliclibraryclasses<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">option</span>&gt;</span>-dontskipnonpubliclibraryclassmembers<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-ignorewarnings<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-dontnote<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-target 1.8<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">&lt;!-- 排查辅助：生成保留类清单+详细日志 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-verbose<span class="tag">&lt;/<span class="name">option</span>&gt;</span> <span class="comment">&lt;!-- 输出处理日志 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-printseeds $&#123;project.build.directory&#125;/proguard_seeds.txt<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 生成混淆详细日志，记录局部变量混淆、优化过程 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-printmapping $&#123;project.build.directory&#125;/proguard_full_map.txt<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 记录被混淆的类/方法（非保留类） --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">option</span>&gt;</span>-printusage $&#123;project.build.directory&#125;/proguard_usage.txt<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			</span><br><span class="line">		<span class="tag">&lt;/<span class="name">options</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.guardsquare<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>proguard-base<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;proguard.core.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sf.proguard<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>*<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>proguard插件相关参数用法参考官方文档: <a href="https://wvengen.github.io/proguard-maven-plugin/proguard-mojo.html#options">https://wvengen.github.io/proguard-maven-plugin/proguard-mojo.html#options</a></p>
]]></content>
      <categories>
        <category>Proguard</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Proguard</tag>
      </tags>
  </entry>
  <entry>
    <title>apksigner签名工具配置方法</title>
    <url>/Apksigner/blogs/apksigner%E7%AD%BE%E5%90%8D%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85cmdline-toolsspan"><span id="inline-blue">安装cmdline-tools</span></a><ul>
<li><a href="#span-idinline-bluelinuxspan"><span id="inline-blue">Linux</span></a><ul>
<li><a href="#span-idinline-blue%E4%B8%8A%E4%BC%A0span"><span id="inline-blue">上传</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%8E%8Bspan"><span id="inline-blue">解压</span></a></li>
<li><a href="#span-idinline-blue%E8%B5%8B%E4%BA%88%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90span"><span id="inline-blue">赋予可执行权限</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85build-toolsspan"><span id="inline-blue">安装build-tools</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fspan"><span id="inline-blue">配置环境变量</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-bluewindowsspan"><span id="inline-blue">Windows</span></a><ul>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85cmdline-toolsspan-1"><span id="inline-blue">安装cmdline-tools</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85build-toolsspan-1"><span id="inline-blue">安装build-tools</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fspan-1"><span id="inline-blue">配置环境变量</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span-1"><span id="inline-blue">验证</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->

<p>apksigner是android sdk提供的android 实现V1 V2应用签名的签名工具，在不安装安装android-studio的前提下，想要实现使用apksigner工具实现对应用进行签名，最好的办法是通过android命令行工具cmdline-tools实现build-tools的安装，apksigner就包含在build-tools工具集里面。下面介绍通过cmdline-tools安装build-tools的方法。</p>
<p>cmdline-tool版本与JDK对应关系参考 :<a href="https://likfe.com/2023/11/21/cmdlineToolsWithJdk/">https://likfe.com/2023/11/21/cmdlineToolsWithJdk/</a></p>
<h1><span id="安装cmdline-tools"><span id="inline-blue">安装cmdline-tools</span></span></h1><h2><span id="linux"><span id="inline-blue">Linux</span></span></h2><p>本地使用jdk1.8，对应cmdline-tools下载地址为:<br><a href="https://dl.google.com/android/repository/commandlinetools-linux-9123335_latest.zip">https://dl.google.com/android/repository/commandlinetools-linux-9123335_latest.zip</a></p>
<h3><span id="上传"><span id="inline-blue">上传</span></span></h3><p>下载完成之后通过XFtp上传到服务器目录，示例: /usr/local/android-tools</p>
<h3><span id="解压"><span id="inline-blue">解压</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unzip commandlinetools-linux-9123335_latest.zip</span><br></pre></td></tr></table></figure>

<p>解压之后生成cmdline-tools目录，需要在cmdline-tools目录下新建latest子目录，并将cmdline-tools目录下的内容移动到latest目录下，这样做是为了解决后续命令行执行sdkmanager 安装build-tools报错问题,最终cmdline-tools目录如下：<br><img src="/images/Apksigner/Apksigner_Linux_20251118_001.png" alt="cmdline-tools目录"></p>
<h3><span id="赋予可执行权限"><span id="inline-blue">赋予可执行权限</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/android-tools/cmdline-tools/latest/bin</span><br><span class="line">chmod a+x *</span><br></pre></td></tr></table></figure>

<h3><span id="安装build-tools"><span id="inline-blue">安装build-tools</span></span></h3><p>build-tools在24.0.3及之后的版本提供apksigner工具，目前安装使用的34.0.0版本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/android-tools/cmdline-tools/latest/bin</span><br><span class="line"><span class="meta">#</span><span class="bash">执行以下命令进行安装</span></span><br><span class="line">./sdkmanager &quot;build-tools;34.0.0&quot;</span><br></pre></td></tr></table></figure>

<h3><span id="配置环境变量"><span id="inline-blue">配置环境变量</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">文件末尾增加以下三行内容</span></span><br><span class="line">export ANDROID_BUILD_TOOL_HOME=/usr/local/android-tools/build-tools/34.0.0</span><br><span class="line">export PATH=$PATH:$ANDROID_BUILD_TOOL_HOME</span><br><span class="line">export PATH</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重新加载/etc/profile</span></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>

<h3><span id="验证"><span id="inline-blue">验证</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">apksigner --help</span><br></pre></td></tr></table></figure>

<p><img src="/images/Apksigner/Apksigner_Linux_20251118_002.png" alt="apksigner验证"></p>
<h2><span id="windows"><span id="inline-blue">Windows</span></span></h2><p>本地使用jdk1.8，对应cmdline-tools下载地址为:<br><a href="https://dl.google.com/android/repository/commandlinetools-win-9123335_latest.zip">https://dl.google.com/android/repository/commandlinetools-win-9123335_latest.zip</a></p>
<h3><span id="安装cmdline-tools"><span id="inline-blue">安装cmdline-tools</span></span></h3><ol>
<li>下载后解压commandlinetools-win-9123335_latest.zip，指定解压到指定目录，示例: D:\android-sdk</li>
<li>在解压缩的 cmdline-tools 目录中，创建一个名为 latest 文件夹。</li>
<li>将原始 cmdline-tools 目录内容都移动到新创建的 latest 目录中。<br>最终cmdline-tools目录结构如下所示：</li>
</ol>
<p><img src="/images/Apksigner/Apksigner_Windows_20251118_003.png" alt="cmdline-tools安装"></p>
<h3><span id="安装build-tools"><span id="inline-blue">安装build-tools</span></span></h3><p>build-tools在24.0.3及之后的版本提供apksigner工具，目前安装使用的34.0.0版本</p>
<p>运行命令行终端，不要使用powershell,必须使用旧版cmd.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">.\sdkmanager.bat build-tools;34.0.0</span><br></pre></td></tr></table></figure>

<p>安装完成后，cmdline-tools同级目录会增加build-tools目录</p>
<p><img src="/images/Apksigner/Apksigner_Windows_20251118_004.png" alt="build-tools安装"></p>
<p>apksigner签名工具位于build-tools目录下，具体位置如下:</p>
<p><img src="/images/Apksigner/Apksigner_Windows_20251118_005.png" alt="build-tools安装"></p>
<h3><span id="配置环境变量"><span id="inline-blue">配置环境变量</span></span></h3><p>为了方便应用程序调用，为apksigner工具配置环境变量</p>
<p><img src="/images/Apksigner/Apksigner_Windows_20251118_006.png" alt="build-tools安装"></p>
<h3><span id="验证"><span id="inline-blue">验证</span></span></h3><p><img src="/images/Apksigner/Apksigner_Windows_20251118_007.png" alt="Apksigner验证"></p>
]]></content>
      <categories>
        <category>Apksigner</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Apksigner</tag>
      </tags>
  </entry>
  <entry>
    <title>jboss-4.2.3部署应用程序log4j日志冲突解决办法</title>
    <url>/Jboss/blogs/jboss-4.2.3%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8Flog4j%E6%97%A5%E5%BF%97%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>jboss-4.2.3容器部署java应用程序，启动日志出现如下报错：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2022-12-13 11:03:22,436 ERROR [STDERR] (main) log4j:ERROR A &quot;org.jboss.logging.appender.FileAppender&quot; object is not assignable to a &quot;org.apache.log4j.Appender&quot; variable.</span><br><span class="line">2022-12-13 11:03:22,436 ERROR [STDERR] (main) log4j:ERROR The class &quot;org.apache.log4j.Appender&quot; was loaded by </span><br><span class="line">2022-12-13 11:03:22,436 ERROR [STDERR] (main) log4j:ERROR [WebappClassLoader</span><br><span class="line">  delegate: false</span><br><span class="line">  repositories:</span><br><span class="line">    /WEB-INF/classes/</span><br><span class="line"><span class="meta">----------&gt;</span><span class="bash"> Parent Classloader:</span></span><br><span class="line">java.net.FactoryURLClassLoader@5a347448</span><br><span class="line">] whereas object of type </span><br><span class="line">2022-12-13 11:03:22,436 ERROR [STDERR] (main) log4j:ERROR &quot;org.jboss.logging.appender.FileAppender&quot; was loaded by [org.jboss.system.server.NoAnnotationURLClassLoader@26021b6d].</span><br><span class="line">2022-12-13 11:03:22,436 ERROR [STDERR] (main) log4j:ERROR Could not instantiate appender named &quot;FILE&quot;.</span><br></pre></td></tr></table></figure>

<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>jboss自身日志系统已经集成log4j,并且jboss和应用程序使用的日志收集器不一致，导致转换失败，jboss自身集成log4j的配置文件路径如下：<br>/usr/local//jboss-4.2.3.GA/server/default/conf/jboss-log4j.xml</p>
<p>关键配置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- A time/date based rolling appender --&gt;</span><br><span class="line">&lt;appender name=&quot;FILE&quot; class=&quot;org.jboss.logging.appender.DailyRollingFileAppender&quot;&gt;</span><br><span class="line">   &lt;errorHandler class=&quot;org.jboss.logging.util.OnlyOnceErrorHandler&quot;/&gt;</span><br><span class="line">   &lt;param name=&quot;File&quot; value=&quot;$&#123;jboss.server.log.dir&#125;/server.log&quot;/&gt;</span><br><span class="line">   &lt;param name=&quot;Append&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">   &lt;param name=&quot;Threshold&quot; value=&quot;INFO&quot;/&gt;</span><br><span class="line">&lt;param name=&quot;DatePattern&quot; value=&quot;&#x27;.&#x27;yyyy-MM-dd&quot;/&gt;</span><br><span class="line"></span><br><span class="line">   &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;</span><br><span class="line">      &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d %-5p [%c] (%t) %m%n&quot;/&gt;</span><br><span class="line">   &lt;/layout&gt;</span><br><span class="line">&lt;/appender&gt; </span><br></pre></td></tr></table></figure>

<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>将/usr/local/jboss-4.2.3.GA/lib下jboss-common.jar依赖拷贝到应用程序lib目录下，重启jboss，日志输出即可恢复正常，如果需要获取jboss容器自身jboss-common.jar依赖版本信息，可以通过java反编译工具luyten-0.5.3.jar本地打开。<br><img src="/images/Jboss/20251114/Jboss_20251114_001.png" alt="jboss-common版本信息查看"></p>
<p>maven项目添加如下依赖坐标：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jboss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jboss-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1.GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Jboss</tag>
        <tag>Log4j</tag>
      </tags>
  </entry>
  <entry>
    <title>apk签名证书和私钥生成方法</title>
    <url>/keyTool/blogs/apk%E7%AD%BE%E5%90%8D%E8%AF%81%E4%B9%A6%E5%92%8C%E7%A7%81%E9%92%A5%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8keytool%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5%E5%AF%B9%E5%AD%98%E5%82%A8%E5%88%B0jks%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%AF%86%E9%92%A5%E5%BA%93%E4%B8%ADspan"><span id="inline-blue">使用keytool生成密钥对，存储到JKS格式的密钥库中</span></a></li>
<li><a href="#span-idinline-blue%E4%BB%8Ejks%E5%AF%86%E9%92%A5%E5%BA%93%E4%B8%AD%E5%AF%BC%E5%87%BA%E8%AF%81%E4%B9%A6der%E6%A0%BC%E5%BC%8F%E5%8C%85%E5%90%AB%E5%85%AC%E9%92%A5span"><span id="inline-blue">从JKS密钥库中导出证书（DER格式，包含公钥</span></a></li>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8openssl%E5%B0%86der%E6%A0%BC%E5%BC%8F%E8%AF%81%E4%B9%A6%E8%BD%AC%E6%8D%A2%E4%B8%BApem%E6%A0%BC%E5%BC%8F%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F%E4%BE%BF%E4%BA%8E%E6%9F%A5%E7%9C%8B%E5%92%8C%E4%BD%BF%E7%94%A8span"><span id="inline-blue">使用openssl将DER格式证书转换为PEM格式（文本格式，便于查看和使用</span></a></li>
<li><a href="#span-idinline-blue%E5%B0%86jks%E6%A0%BC%E5%BC%8F%E5%AF%86%E9%92%A5%E5%BA%93%E8%BD%AC%E6%8D%A2%E4%B8%BApkcs12%E6%A0%BC%E5%BC%8F%E6%9B%B4%E9%80%9A%E7%94%A8%E7%9A%84%E5%AF%86%E9%92%A5%E5%BA%93%E6%A0%BC%E5%BC%8F%E8%B7%A8%E5%B9%B3%E5%8F%B0%E6%94%AF%E6%8C%81%E6%9B%B4%E5%A5%BDspan"><span id="inline-blue">将JKS格式密钥库转换为PKCS12格式(更通用的密钥库格式，跨平台支持更好)</span></a></li>
<li><a href="#span-idinline-blue%E4%BB%8Epkcs12%E5%AF%86%E9%92%A5%E5%BA%93%E4%B8%AD%E6%8F%90%E5%8F%96%E7%A7%81%E9%92%A5pem%E6%A0%BC%E5%BC%8F%E6%96%87%E6%9C%ACspan"><span id="inline-blue">从PKCS12密钥库中提取私钥(PEM格式，文本)</span></a></li>
<li><a href="#span-idinline-blue%E5%B0%86pem%E6%A0%BC%E5%BC%8F%E7%A7%81%E9%92%A5%E8%BD%AC%E6%8D%A2%E4%B8%BApkcs8-der%E6%A0%BC%E5%BC%8F%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B8%B8%E7%94%A8%E4%BA%8Ejava%E7%AD%89%E5%B9%B3%E5%8F%B0span"><span id="inline-blue">将PEM格式私钥转换为PKCS#8 DER格式(二进制，常用于Java等平台)</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="使用keytool生成密钥对存储到jks格式的密钥库中"><span id="inline-blue">使用keytool生成密钥对，存储到JKS格式的密钥库中</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -genkeypair \</span><br><span class="line">  -alias istore \                  </span><br><span class="line">  -keyalg RSA \                    </span><br><span class="line">  -keysize 2048 \                  </span><br><span class="line">  -validity 3650 \                 </span><br><span class="line">  -keystore istore.jks \           </span><br><span class="line">  -storepass 123456 \              </span><br><span class="line">  -keypass 123456                  </span><br></pre></td></tr></table></figure>
<p>参数 <br><br>-alias      密钥对的别名（用于标识该密钥对，后续操作需引用）<br><br>-keyalg     加密算法为RSA（非对称加密算法）<br><br>-keysize    密钥长度2048位（安全性较高，常用长度）<br><br>-validity   证书有效期10年（3650天）<br><br>-keystore   生成的密钥库文件名为istore.jks（JKS是Java默认格式）<br><br>-storepass  密钥库的访问密码（保护整个密钥库）<br><br>-keypass    密钥对自身的密码（保护私钥，此处与密钥库密码相同）<br></p>
<h1><span id="从jks密钥库中导出证书der格式包含公钥"><span id="inline-blue">从JKS密钥库中导出证书（DER格式，包含公钥</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -exportcert \</span><br><span class="line">  -alias istore \                  </span><br><span class="line">  -keystore istore.jks \           </span><br><span class="line">  -storepass 123456 \              </span><br><span class="line">  -file istore.cer                 </span><br></pre></td></tr></table></figure>

<p>参数 <br><br>-alias      要导出的密钥对别名（需与生成时一致）<br><br>-keystore   源密钥库文件 <br><br>-storepass  密钥库访问密码（验证权限）<br><br>-file       导出的证书文件名（DER格式，二进制）<br></p>
<h1><span id="使用openssl将der格式证书转换为pem格式文本格式便于查看和使用"><span id="inline-blue">使用openssl将DER格式证书转换为PEM格式（文本格式，便于查看和使用</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl x509 \</span><br><span class="line">  -inform der \                    </span><br><span class="line">  -in istore.cer \                 </span><br><span class="line">  -out public.pem                  </span><br></pre></td></tr></table></figure>
<p>参数 <br><br>-inform      输入格式为DER（二进制）<br><br>-in          输入的DER格式证书文件 <br><br>-out         输出的PEM格式文件（包含公钥）<br></p>
<h1><span id="将jks格式密钥库转换为pkcs12格式更通用的密钥库格式跨平台支持更好"><span id="inline-blue">将JKS格式密钥库转换为PKCS12格式(更通用的密钥库格式，跨平台支持更好)</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -importkeystore \</span><br><span class="line">  -srckeystore istore.jks \        </span><br><span class="line">  -srcstoretype JKS \              </span><br><span class="line">  -srcstorepass 123456 \           </span><br><span class="line">  -destkeystore istore.p12 \       </span><br><span class="line">  -deststoretype PKCS12 \          </span><br><span class="line">  -deststorepass 123456 \          </span><br><span class="line">  -alias istore                    </span><br></pre></td></tr></table></figure>

<p>参数 <br><br>-srckeystore   源JKS密钥库 <br><br>-srcstoretype  源密钥库类型为JKS <br><br>-srcstorepass  源密钥库密码 <br><br>-destkeystore  目标PKCS12密钥库文件名 <br><br>-deststoretype 目标密钥库类型为PKCS12 <br><br>-deststorepass 目标密钥库密码 <br><br>-alias         要转换的密钥对别名 <br></p>
<h1><span id="从pkcs12密钥库中提取私钥pem格式文本"><span id="inline-blue">从PKCS12密钥库中提取私钥(PEM格式，文本)</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl pkcs12 \</span><br><span class="line">  -in istore.p12 \                 </span><br><span class="line">  -nodes \                         </span><br><span class="line">  -nocerts \                       </span><br><span class="line">  -out temp_private_key.pem        </span><br></pre></td></tr></table></figure>

<p>参数 <br><br>-in      输入的PKCS12密钥库 <br><br>-nodes   不加密私钥（否则会要求设置私钥密码）<br><br>-nocerts 只提取私钥，不提取证书 <br><br>-out     输出的临时私钥文件（PEM格式）<br></p>
<h1><span id="将pem格式私钥转换为pkcs8-der格式二进制常用于java等平台"><span id="inline-blue">将PEM格式私钥转换为PKCS#8 DER格式(二进制，常用于Java等平台)</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl pkcs8 \</span><br><span class="line">  -topk8 \                         </span><br><span class="line">  -inform PEM \                    </span><br><span class="line">  -outform DER \                   </span><br><span class="line">  -in temp_private_key.pem \       </span><br><span class="line">  -out private.pk8 \               </span><br><span class="line">  -nocrypt                         </span><br></pre></td></tr></table></figure>

<p>参数 <br><br>-topk8   转换为PKCS#8格式（私钥的标准格式）<br><br>-inform  输入格式为PEM（文本）<br><br>-outform 输出格式为DER（二进制）<br><br>-in      输入的PEM格式私钥 <br><br>-out     输出的PKCS#8 DER格式私钥文件 <br><br>-nocrypt 不加密输出文件（否则会要求设置密码）<br></p>
]]></content>
      <categories>
        <category>keyTool</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>keyTool</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven项目本地依赖打包无效的解决办法</title>
    <url>/Maven/blogs/Maven%E9%A1%B9%E7%9B%AE%E6%9C%AC%E5%9C%B0%E4%BE%9D%E8%B5%96%E6%89%93%E5%8C%85%E6%97%A0%E6%95%88%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>java: 1.8<br>maven: 3.8.9</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>maven 执行clean install之后生成的war没有把本地依赖的jar包拷贝到WEB-INF/lib目录下，启动应用程序提示相应的class缺失。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>模块对应pom.xml文件添加maven-dependency-plugin插件，在prepare-package阶段拷贝jar包，配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-system-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">phase</span>&gt;</span>prepare-package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">includeScope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">includeScope</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/$&#123;project.build.finalName&#125;/WEB-INF/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署mysql8.0挂载my.cnf配置不生效</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2mysql8.0%E6%8C%82%E8%BD%BDmy.cnf%E9%85%8D%E7%BD%AE%E4%B8%8D%E7%94%9F%E6%95%88/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>OS:  window10<br>Docker: 27.5.1</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>Docker部署mysql8.0,容器启动正常，宿主机相关文件目录挂载正常，甚至进入容器内，文件的内容也是一致的，但是mysql配置参数就是不生效。<br>mysql对应的配置文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Copyright (c) 2017, Oracle and/or its affiliates. All rights reserved.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This program is free software; you can redistribute it and/or modify</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> it under the terms of the GNU General Public License as published by</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the Free Software Foundation; version 2 of the License.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This program is distributed in the hope that it will be useful,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> GNU General Public License <span class="keyword">for</span> more details.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># You should have received a copy of the GNU General Public License</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> along with this program; <span class="keyword">if</span> not, write to the Free Software</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The MySQL  Server configuration file.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># For explanations see</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/mysql/en/server-system-variables.html</span></span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置mysql客户端默认字符集</span></span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">pid-file        = /var/run/mysqld/mysqld.pid</span><br><span class="line">socket          = /var/run/mysqld/mysqld.sock</span><br><span class="line">datadir         = /var/lib/mysql</span><br><span class="line">secure-file-priv= NULL</span><br><span class="line"><span class="meta">#</span><span class="bash"> Disabling symbolic-links is recommended to prevent assorted security risks</span></span><br><span class="line">symbolic-links=0</span><br><span class="line"></span><br><span class="line">sql_mode=&quot;NO_ENGINE_SUBSTITUTION&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">服务端使用的字符集默认为8比特编码的latin1字符集</span></span><br><span class="line">character_set_server = utf8</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">创建新表时将使用的默认存储引擎</span></span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">默认加密方式</span></span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置不区分大小写</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 必须在安装好MySQL后 修改mySQL配置文件设置为不敏感，一旦启动后，再设置是无效的，而且启动报错；</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果已经晚了，那必须把MySQL数据库文件全部 删除，修改配置文件再启动。</span></span><br><span class="line">lower_case_table_names=1</span><br></pre></td></tr></table></figure>

<p>docker容器部署命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run  -v D:/dockerVolume/mysql8/conf/:/etc/mysql/conf.d -v D:/dockerVolume/mysql8/data:/var/lib/mysql -v D:/dockerVolume/mysql8/log:/var/log/mysql  --name mysql8 -e MYSQL_ROOT_PASSWORD=coship -p 3307:3306  -d mysql:8.0</span><br></pre></td></tr></table></figure>

<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>进入mysql容器内部登录出现如下提示：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bash-5.1# mysql -uroot -pcoship</span><br><span class="line">mysql: [Warning] World-writable config file &#x27;/etc/mysql/conf.d/my.cnf&#x27; is ignored.</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 9</span><br><span class="line">Server version: 8.0.43 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2025, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br></pre></td></tr></table></figure>

<p>配置文件权限过于宽松（全局可写），MySQL 出于安全考虑忽略了这个配置文件</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>更改文件属性，设置为只读。</p>
<p><img src="/images/docker/docker_20251017_001.png" alt="Docker mysql配置"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven项目集成maven-jar-plugin插件实现同时构建war和jar</title>
    <url>/Maven/blogs/Maven%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90maven-jar-plugin%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0%E5%90%8C%E6%97%B6%E6%9E%84%E5%BB%BAwar%E5%92%8Cjar/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Spring: 4.3.20.RELEASE<br>Java: 1.8</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>maven项目指定打包格式为    <packaging>war</packaging>,但是其他模块同时引用当前项目作为jar包依赖，现在需要实现在执行clean install命令自动构建war和jar，使得应用war包通过jetty部署，jar包可以直接给其他模块依赖使用。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>当前模块pom.xml文件增加maven-jar-plugin插件配置，使用分类器实现打包同时构建jar输出。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">id</span>&gt;</span>create-classes-jar<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">							<span class="comment">&lt;!-- 指定分类器，用于区分此jar包 --&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">classifier</span>&gt;</span>classes<span class="tag">&lt;/<span class="name">classifier</span>&gt;</span></span><br><span class="line">							<span class="comment">&lt;!-- 打包class文件和resources目录下的配置文件 --&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.class<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">include</span>&gt;</span>ApplicationResources_system_en_US.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">								<span class="tag">&lt;<span class="name">include</span>&gt;</span>ApplicationResources_system_zh_CN.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其他模块引用当前依赖方式：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>V100R001B010<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">classifier</span>&gt;</span>classes<span class="tag">&lt;/<span class="name">classifier</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaWeb项目集成slf4j+logback.md</title>
    <url>/Slf4j/blogs/JavaWeb%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90slf4j+logback/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Spring: 4.3.20.RELEASE<br>Java: 1.8</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目模块集成log4j实现日志输出，最近在后台管理批量处理相关操作下发现耗时特别严重，通过jstack -l pid命令抓取进程堆栈，发现阻塞在log4j相关实现上，于是进行升级，将日志实现改造为slf4j+logback实现。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;pool-5-thread-23&quot; #928 prio=5 os_prio=0 tid=0x00007fd93405a000 nid=0x4ca16 waiting for monitor entry [0x00007fd83afed000]</span><br><span class="line">   java.lang.Thread.State: BLOCKED (on object monitor)</span><br><span class="line">	at org.apache.log4j.Category.callAppenders(Category.java:204)</span><br><span class="line">	- waiting to lock &lt;0x00000005d0a50bd8&gt; (a org.apache.log4j.spi.RootLogger)</span><br><span class="line">	at org.apache.log4j.Category.forcedLog(Category.java:391)</span><br><span class="line">	at org.apache.log4j.Category.log(Category.java:856)</span><br><span class="line">	at org.slf4j.impl.Log4jLoggerAdapter.debug(Log4jLoggerAdapter.java:209)</span><br><span class="line">	at org.apache.ibatis.logging.slf4j.Slf4jImpl.debug(Slf4jImpl.java:47)</span><br><span class="line">	at org.mybatis.spring.SqlSessionUtils.closeSqlSession(SqlSessionUtils.java:165)</span><br><span class="line">	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:372)</span><br><span class="line">	at com.sun.proxy.$Proxy31.selectOne(Unknown Source)</span><br><span class="line">	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160)</span><br></pre></td></tr></table></figure>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>项目pom.xml添加slf4j+logback依赖，排除log4j相关依赖</p>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">java-version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java-version</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">org.slf4j-version</span>&gt;</span>1.7.32<span class="tag">&lt;/<span class="name">org.slf4j-version</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">logback-version</span>&gt;</span>1.2.11<span class="tag">&lt;/<span class="name">logback-version</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="comment">&lt;!-- Logback 核心 --&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;logback-version&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="comment">&lt;!-- Logback 经典（实现SLF4J接口） --&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;logback-version&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="comment">&lt;!-- SLF4J API --&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;org.slf4j-version&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Slf4j</category>
      </categories>
      <tags>
        <tag>Slf4j</tag>
        <tag>logback</tag>
      </tags>
  </entry>
  <entry>
    <title>Notepad++实现自定义Dockerfile语法格式</title>
    <url>/Notepad/blogs/Notepad++%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89Dockerfile%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%87%AA%E5%AE%9A%E4%B9%89dockerfile%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8Fspan"><span id="inline-blue">自定义Dockerfile语法格式</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Notepad++: v7.9.3</p>
<h1><span id="自定义dockerfile语法格式"><span id="inline-blue">自定义Dockerfile语法格式</span></span></h1><p><img src="/images/Notepad++/Notepad++_20250822_001.png" alt="Dockerfile语法格式"></p>
<p>按照图中所示路径创建userDefineLang_Dockerfile.xml文件，内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">NotepadPlus</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">UserLang</span> <span class="attr">name</span>=<span class="string">&quot;Dockerfile&quot;</span> <span class="attr">ext</span>=<span class="string">&quot;Dockerfile&quot;</span> <span class="attr">udlVersion</span>=<span class="string">&quot;2.1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Settings</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Global</span> <span class="attr">caseIgnored</span>=<span class="string">&quot;no&quot;</span> <span class="attr">allowFoldOfComments</span>=<span class="string">&quot;no&quot;</span> <span class="attr">foldCompact</span>=<span class="string">&quot;no&quot;</span> <span class="attr">forcePureLC</span>=<span class="string">&quot;1&quot;</span> <span class="attr">decimalSeparator</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Prefix</span> <span class="attr">Keywords1</span>=<span class="string">&quot;no&quot;</span> <span class="attr">Keywords2</span>=<span class="string">&quot;yes&quot;</span> <span class="attr">Keywords3</span>=<span class="string">&quot;no&quot;</span> <span class="attr">Keywords4</span>=<span class="string">&quot;no&quot;</span> <span class="attr">Keywords5</span>=<span class="string">&quot;no&quot;</span> <span class="attr">Keywords6</span>=<span class="string">&quot;no&quot;</span> <span class="attr">Keywords7</span>=<span class="string">&quot;no&quot;</span> <span class="attr">Keywords8</span>=<span class="string">&quot;no&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">KeywordLists</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Comments&quot;</span>&gt;</span>00# 01 02 03 04<span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Numbers, prefix1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Numbers, prefix2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Numbers, extras1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Numbers, extras2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Numbers, suffix1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Numbers, suffix2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Numbers, range&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Operators1&quot;</span>&gt;</span>= :- :+ : [ ] ,<span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Operators2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in code1, open&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in code1, middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in code1, close&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in code2, open&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in code2, middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in code2, close&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in comment, open&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in comment, middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Folders in comment, close&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords1&quot;</span>&gt;</span>FROM MAINTAINER ENV RUN CMD ADD EXPOSE COPY ENTRYPOINT VOLUME USER WORKDIR ONBUILD LABEL ARG STOPSIGNAL HEALTHCHECK SHELL AS<span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords2&quot;</span>&gt;</span>$ $&#123;<span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords3&quot;</span>&gt;</span>--platform --from --chown<span class="symbol">&amp;#x000D;</span><span class="symbol">&amp;#x000A;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords7&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Keywords8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Keywords</span> <span class="attr">name</span>=<span class="string">&quot;Delimiters&quot;</span>&gt;</span>00<span class="symbol">&amp;quot;</span> 00<span class="symbol">&amp;apos;</span> 01\ 02<span class="symbol">&amp;quot;</span> 02<span class="symbol">&amp;apos;</span> 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23<span class="tag">&lt;/<span class="name">Keywords</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">KeywordLists</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Styles</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DEFAULT&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;COMMENTS&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;008000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;LINE COMMENTS&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;008000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;NUMBERS&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;FF0000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS1&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;0000FF&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;1&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS2&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;FF8040&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFD9&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;1&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS3&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;008080&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS4&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS5&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS6&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS7&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;KEYWORDS8&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;OPERATORS&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;800000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;1&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;FOLDER IN CODE1&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;FOLDER IN CODE2&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;FOLDER IN COMMENT&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS1&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;808080&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;2048&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS2&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;FF8040&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFD9&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;1&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS3&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS4&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS5&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS6&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS7&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">WordsStyle</span> <span class="attr">name</span>=<span class="string">&quot;DELIMITERS8&quot;</span> <span class="attr">fgColor</span>=<span class="string">&quot;000000&quot;</span> <span class="attr">bgColor</span>=<span class="string">&quot;FFFFFF&quot;</span> <span class="attr">fontName</span>=<span class="string">&quot;&quot;</span> <span class="attr">fontStyle</span>=<span class="string">&quot;0&quot;</span> <span class="attr">nesting</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Styles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">UserLang</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">NotepadPlus</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>打开Dockerfile文件,Notepad++菜单栏语言切换为Dockerfile,相关命令高亮显示如下：<br><img src="/images/Notepad++/Notepad++_20250822_002.png" alt="Dockerfile语法验证"></p>
]]></content>
      <categories>
        <category>Notepad++</category>
      </categories>
      <tags>
        <tag>Notepad++</tag>
        <tag>Dockerfile</tag>
      </tags>
  </entry>
  <entry>
    <title>Let&#39;s Encrypt证书申请及自动续期实现</title>
    <url>/Let-s-Encrypt/https/blogs/Let&#39;s%20Encrypt%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7%E5%8F%8A%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7span"><span id="inline-blue">证书申请</span></a></li>
<li><a href="#span-idinline-blue%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9Fspan"><span id="inline-blue">自动续期</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux：CentOS Linux release 7.9.2009 (Core)</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目通过docker部署，使用的https证书一直是自签名证书，在商业环境下，一些场景总是提示链接不安全，所以将证书升级为乐此加密颁发的https证书</p>
<p>Let’s Encrypt是由互联网安全研究小组(ISRG)运营的非盈利性 证书颁发机构，免费提供用于传输层安全性(TLS) 加密的X.509证书。<br>它是世界上最大的证书颁发机构， 被超过 6 亿个网站使用，目标是所有网站都安全并使用HTTPS。<br>该服务提供商互联网安全研究小组(ISRG) 是一个公益组织。主要赞助商包括电子前沿基金会(EFF)、Mozilla 基金会、OVHcloud、思科系统公司、Facebook、谷歌 Chrome、互联网协会、AWS、Nginx和比尔及梅琳达·盖茨基金会。<br>其他合作伙伴包括证书颁发机构IdenTrust、密歇根大学( UM)、和Linux 基金会。</p>
<p>优点：</p>
<p>1、完全免费，零成本部署​</p>
<p>与传统商业证书（如DigiCert、Symantec）不同，乐此加密提供与付费证书相同加密强度的SSL证书（如RSA 2048位加密），且无隐藏费用。<br>特别适合个人开发者、小型企业及非营利组织，无需预算即可实现HTTPS加密，推动全网加密普及。</p>
<p>2、自动化部署与续期​</p>
<p>ACME协议支持​​：通过自动化工具（如Certbot）可实现证书的申请、部署和续期全流程自动化，减少人工干预风险。<br>​​简化运维​​：证书有效期90天，但自动续期机制确保服务不间断，避免因证书过期导致网站访问中断。</p>
<p>3、支持通配符证书（泛域名证书）​</p>
<p>覆盖无限子域名​​：一张*.example.com证书可保护所有同级子域名（如blog.example.com、shop.example.com），无需为每个子域名单独申请证书。<br>​​灵活扩展​​：适合多子域名架构（如SaaS平台、企业门户），新增服务时无需重复配置证书。<br>​​成本效益​​：通配符证书在商业CA中价格高昂（年费通常上千元），而乐此加密免费提供。</p>
<p>4、广泛兼容性与标准化加密​</p>
<p>兼容性全面​​：支持所有主流浏览器（Chrome、Firefox等）、服务器环境（Nginx/Apache）及移动设备，无兼容性风险。<br>​​行业标准加密​​：采用SHA-2算法和RSA/ECC密钥，保障数据传输的机密性与完整性，符合PCI DSS等合规要求。</p>
<p>5、 基础安全功能完善​</p>
<p>域名验证（DV）​​：通过DNS记录（CNAME/TXT）验证域名所有权，快速签发证书，适用于基础加密需求。<br>​​抵御中间人攻击​​：加密传输防止数据被窃取或篡改，尤其对登录、支付等敏感操作至关重要。</p>
<h1><span id="证书申请"><span id="inline-blue">证书申请</span></span></h1><p>官网地址：<a href="https://letsencrypt.top/">https://letsencrypt.top/</a></p>
<p>登录之后申请证书，信息如下：</p>
<p>![乐此加密证书申请](/images/Let’s Encrypt/202500601/letsEncrypt_20250601_001.png)</p>
<p>下载证书</p>
<p>![乐此加密证书下载](/images/Let’s Encrypt/202500601/letsEncrypt_20250601_002.png)</p>
<p>一般服务对外提供https都是使用nginx代理，默认在nginx 类型就可以，而且客户端不用导入证书就能够自动识别。</p>
<p>证书验证</p>
<p>![乐此加密证书验证](/images/Let’s Encrypt/202500601/letsEncrypt_20250601_003.png)</p>
<p>验证步骤参考: <a href="https://blog.csdn.net/yangjing19910801/article/details/145815648">https://blog.csdn.net/yangjing19910801/article/details/145815648</a></p>
<h1><span id="自动续期"><span id="inline-blue">自动续期</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 乐此加密证书自动续期脚本</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 适用场景：多个nginx证书目录，自动续期并同步，自动重载docker swarm nginx服务，并支持多节点证书同步</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. 证书参数配置</span></span><br><span class="line">TOKEN=&quot;4TIWrE0GxCXmVJd1jAAzSVltYnZOWpeGflD7sn56eYOl5lJge+8fZ/UWM4cMdLF5&quot;</span><br><span class="line">DOMAIN=&quot;*.test.example.com,test.example.com&quot;</span><br><span class="line">NGINX_SERVICE=&quot;test-nginx&quot;</span><br><span class="line">EMQX_NGINX_SERVICE=&quot;emqx-nginx&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 证书目录配置</span></span><br><span class="line">API_DIR=&quot;/usr/local/docker/nginx/https/api&quot;</span><br><span class="line">DOWNLOAD_DIR=&quot;/usr/local/docker/nginx/https/download&quot;</span><br><span class="line">MQTT_DIR=&quot;/usr/local/docker/nginx/https/mqtt&quot;</span><br><span class="line"></span><br><span class="line">KEY_FILE=&quot;server.key&quot;</span><br><span class="line">CERT_FILE=&quot;server.pem&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 多节点同步配置</span></span><br><span class="line">SYNC_TO_OTHER_NODES=true</span><br><span class="line">REMOTE_NODES=(</span><br><span class="line">  &quot;47.253.9.140:/usr/local/docker/emqx_nginx/https&quot;</span><br><span class="line"><span class="meta">  #</span><span class="bash"> <span class="string">&quot;192.168.1.100:/usr/local/docker/nginx/https&quot;</span></span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> <span class="string">&quot;192.168.1.101:/usr/local/docker/nginx/https&quot;</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 0. 检查并安装乐此加密续期命令</span></span><br><span class="line">if [ ! -f /usr/bin/letsencrypt-renew ]; then</span><br><span class="line">  echo &quot;[INFO] 未检测到 letsencrypt-renew，正在下载安装...&quot;</span><br><span class="line">  curl -o /usr/bin/letsencrypt-renew https://letsencrypt.top/download/letsencrypt-renew</span><br><span class="line">  chmod +x /usr/bin/letsencrypt-renew</span><br><span class="line">  if [ ! -f /usr/bin/letsencrypt-renew ]; then</span><br><span class="line">    echo &quot;[ERROR] letsencrypt-renew 安装失败，退出。&quot;</span><br><span class="line">    exit 1</span><br><span class="line">  fi</span><br><span class="line">  echo &quot;[INFO] letsencrypt-renew 安装完成。&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查证书剩余天数</span></span><br><span class="line">CERT_PATH=&quot;$&#123;API_DIR&#125;/$&#123;CERT_FILE&#125;&quot;</span><br><span class="line">if [ ! -f &quot;$CERT_PATH&quot; ]; then</span><br><span class="line">  echo &quot;[ERROR] 未找到证书文件 $CERT_PATH，无法检测有效期，退出。&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">end_date=$(openssl x509 -in &quot;$CERT_PATH&quot; -noout -enddate | cut -d= -f2)</span><br><span class="line">if [ -z &quot;$end_date&quot; ]; then</span><br><span class="line">  echo &quot;[ERROR] 证书到期日解析失败，退出。&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">end_ts=$(date -d &quot;$end_date&quot; +%s)</span><br><span class="line">now_ts=$(date +%s)</span><br><span class="line">let days_left=($end_ts-$now_ts)/86400</span><br><span class="line"></span><br><span class="line">echo &quot;[INFO] 当前证书剩余 $days_left 天到期。&quot;</span><br><span class="line"></span><br><span class="line">if [ $days_left -gt 15 ]; then</span><br><span class="line">  echo &quot;[INFO] 证书剩余天数大于15天，无需续期，退出。&quot;</span><br><span class="line">  exit 0</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. 自动续期主证书（API目录）</span></span><br><span class="line">echo &quot;[INFO] $(date) 证书即将到期，开始自动续期证书...&quot;</span><br><span class="line">/usr/bin/letsencrypt-renew \</span><br><span class="line">  -token=$&#123;TOKEN&#125; \</span><br><span class="line">  -key_path=$&#123;API_DIR&#125;/$&#123;KEY_FILE&#125; \</span><br><span class="line">  -server_type=nginx \</span><br><span class="line">  -cert_path=$&#123;API_DIR&#125;/$&#123;CERT_FILE&#125; \</span><br><span class="line">  -domains=&quot;$&#123;DOMAIN&#125;&quot; \</span><br><span class="line">  -backup=true</span><br><span class="line"></span><br><span class="line">RENEW_STATUS=$?</span><br><span class="line">if [ $RENEW_STATUS -ne 0 ]; then</span><br><span class="line">  echo &quot;[ERROR] 证书续期失败，退出。&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;[INFO] 证书续期成功，开始同步到其他目录...&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5. 同步证书到 download 和 mqtt 目录</span></span><br><span class="line">cp -f $&#123;API_DIR&#125;/$&#123;KEY_FILE&#125; $&#123;DOWNLOAD_DIR&#125;/$&#123;KEY_FILE&#125;</span><br><span class="line">cp -f $&#123;API_DIR&#125;/$&#123;CERT_FILE&#125; $&#123;DOWNLOAD_DIR&#125;/$&#123;CERT_FILE&#125;</span><br><span class="line"></span><br><span class="line">cp -f $&#123;API_DIR&#125;/$&#123;KEY_FILE&#125; $&#123;MQTT_DIR&#125;/$&#123;KEY_FILE&#125;</span><br><span class="line">cp -f $&#123;API_DIR&#125;/$&#123;CERT_FILE&#125; $&#123;MQTT_DIR&#125;/$&#123;CERT_FILE&#125;</span><br><span class="line"></span><br><span class="line">echo &quot;[INFO] 本地目录证书同步完成...&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6. 同步证书到其他Docker Swarm节点（基于免密信任）</span></span><br><span class="line">if [ &quot;$SYNC_TO_OTHER_NODES&quot; = &quot;true&quot; ]; then</span><br><span class="line">  echo &quot;[INFO] 开始同步证书到其他Docker Swarm节点...&quot;</span><br><span class="line"></span><br><span class="line">  for node_config in &quot;$&#123;REMOTE_NODES[@]&#125;&quot;; do</span><br><span class="line">    REMOTE_IP=$(echo $node_config | cut -d&#x27;:&#x27; -f1)</span><br><span class="line">    REMOTE_DIR=$(echo $node_config | cut -d&#x27;:&#x27; -f2)</span><br><span class="line"></span><br><span class="line">    echo &quot;[INFO] 同步到节点: $REMOTE_IP:$REMOTE_DIR&quot;</span><br><span class="line"></span><br><span class="line">    ssh -o ConnectTimeout=10 -o StrictHostKeyChecking=no root@$REMOTE_IP &quot;mkdir -p $REMOTE_DIR/api $REMOTE_DIR/download $REMOTE_DIR/mqtt&quot; 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line">    scp -o ConnectTimeout=10 -o StrictHostKeyChecking=no $&#123;API_DIR&#125;/$&#123;KEY_FILE&#125; root@$REMOTE_IP:$&#123;REMOTE_DIR&#125;/api/ 2&gt;/dev/null</span><br><span class="line">    scp -o ConnectTimeout=10 -o StrictHostKeyChecking=no $&#123;API_DIR&#125;/$&#123;CERT_FILE&#125; root@$REMOTE_IP:$&#123;REMOTE_DIR&#125;/api/ 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line">    scp -o ConnectTimeout=10 -o StrictHostKeyChecking=no $&#123;API_DIR&#125;/$&#123;KEY_FILE&#125; root@$REMOTE_IP:$&#123;REMOTE_DIR&#125;/download/ 2&gt;/dev/null</span><br><span class="line">    scp -o ConnectTimeout=10 -o StrictHostKeyChecking=no $&#123;API_DIR&#125;/$&#123;CERT_FILE&#125; root@$REMOTE_IP:$&#123;REMOTE_DIR&#125;/download/ 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line">    scp -o ConnectTimeout=10 -o StrictHostKeyChecking=no $&#123;API_DIR&#125;/$&#123;KEY_FILE&#125; root@$REMOTE_IP:$&#123;REMOTE_DIR&#125;/mqtt/ 2&gt;/dev/null</span><br><span class="line">    scp -o ConnectTimeout=10 -o StrictHostKeyChecking=no $&#123;API_DIR&#125;/$&#123;CERT_FILE&#125; root@$REMOTE_IP:$&#123;REMOTE_DIR&#125;/mqtt/ 2&gt;/dev/null</span><br><span class="line"></span><br><span class="line">    if [ $? -eq 0 ]; then</span><br><span class="line">      echo &quot;[INFO] 节点 $REMOTE_IP 证书同步成功&quot;</span><br><span class="line">    else</span><br><span class="line">      echo &quot;[WARNING] 节点 $REMOTE_IP 证书同步失败，请检查网络连接或SSH配置&quot;</span><br><span class="line">    fi</span><br><span class="line">  done</span><br><span class="line">else</span><br><span class="line">  echo &quot;[INFO] 跳过多节点同步（SYNC_TO_OTHER_NODES=false）&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;[INFO] 证书同步完成，准备重载nginx服务...&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 7. 重载nginx服务（docker swarm）</span></span><br><span class="line">docker service update --force $&#123;NGINX_SERVICE&#125;</span><br><span class="line">RELOAD_STATUS=$?</span><br><span class="line">if [ $RELOAD_STATUS -eq 0 ]; then</span><br><span class="line">  echo &quot;[INFO] nginx服务重载成功&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;[ERROR] nginx服务重载失败，请手动检查。&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 8. 重载emqx-nginx服务（docker swarm）</span></span><br><span class="line">docker service update --force $&#123;EMQX_NGINX_SERVICE&#125;</span><br><span class="line">RELOAD_STATUS=$?</span><br><span class="line">if [ $RELOAD_STATUS -eq 0 ]; then</span><br><span class="line">  echo &quot;[INFO] EMQX nginx服务重载成功&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;[ERROR] EMQX nginx服务重载失败，请手动检查。&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;证书自动续期流程完成&quot;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Let&#39;s Encrypt</category>
        <category>https</category>
      </categories>
      <tags>
        <tag>Let&#39;s Encrypt</tag>
        <tag>https</tag>
      </tags>
  </entry>
  <entry>
    <title>Java api client实现Elasticsearch泛型接口</title>
    <url>/ElasticSearch/blogs/Java%20api%20client%E5%AE%9E%E7%8E%B0Elasticsearch%E6%B3%9B%E5%9E%8B%E6%8E%A5%E5%8F%A3/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E6%8F%8F%E8%BF%B0span"><span id="inline-blue">描述</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blueassetspan"><span id="inline-blue">Asset</span></a></li>
<li><a href="#span-idinline-blueprogramspan"><span id="inline-blue">Program</span></a></li>
<li><a href="#span-idinline-blue%E6%B3%A8%E8%A7%A3idspan"><span id="inline-blue">注解@Id</span></a></li>
<li><a href="#span-idinline-blue%E6%B3%A8%E8%A7%A3indexspan"><span id="inline-blue">注解@Index</span></a></li>
<li><a href="#span-idinline-blue%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">接口实现</span></a></li>
<li><a href="#span-idinline-bluebaseelasticrepositoryspan"><span id="inline-blue">BaseElasticRepository</span></a></li>
<li><a href="#span-idinline-blueassetelasticsearchrepositoryspan"><span id="inline-blue">AssetElasticsearchRepository</span></a></li>
<li><a href="#span-idinline-blueprogramelasticsearchrepositoryspan"><span id="inline-blue">ProgramElasticsearchRepository</span></a></li>
<li><a href="#span-idinline-blue%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0span"><span id="inline-blue">功能描述</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux：CentOS Linux release 7.9.2009 (Core)<br>ElasticSearch： 8.8.0</p>
<h1><span id="描述"><span id="inline-blue">描述</span></span></h1><p>Elasticsearch升级8.8.0版本后，官方已经弃用之前RestHighLevel方式client,推荐使用java api client方式，于是通过实现通用接口，将常用针对索引的增删改查都统一进行实现。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="asset"><span id="inline-blue">Asset</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@JsonIgnoreProperties(ignoreUnknown = true)</span></span><br><span class="line"><span class="meta">@Index(indexName = &quot;asset&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Asset</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * SerialId</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">5984488053116280354L</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 资源ID</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Id</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;resourceId&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String resourceId;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 资源名称</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;assetName&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String assetName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 资源名称全拼(包含导演、主演)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;letterFull&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; letterFull;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 资源名称首字母缩写</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;initialLetter&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; initialLetter;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 标题全拼</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;headLetter&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String headLetter;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 标题长度</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;headLetterLength&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Integer headLetterLength;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 主演、导演全拼 &quot;;&quot; 分割</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;actorDirectorLetter&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; actorDirectorLetter;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 年份</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;year&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String year;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 点播次数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;vodCount&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long vodCount;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 用户推荐级别</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;userRecommendLevel&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long userRecommendLevel;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 推荐等级</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;recommendationLevel&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Integer recommendationLevel;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 资源排序</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;resourceRank&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long resourceRank;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 评分</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;score&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Float score;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 虚拟推荐数</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;virrecommandcount&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long virrecommandcount;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 创建时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;createTime&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long createTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 发行时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;publishDate&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long publishDate;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 操作时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;optTime&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long optTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 展示类型</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;showType&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String showType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 产地名称</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;originName&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String originName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 视频类型  SD：标清  HD：高清</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;videoType&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String videoType;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 媒资类型 1：电影 2：电视剧 3：综艺 4：动漫 5：纪录片 6：广告 7：专题 8：其他</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;assetTypes&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String assetTypes;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 记录类型 0：电影 1:资源包</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;packaged&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Integer packaged;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 标签</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;tag&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String tag;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 标签年份</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;tagYear&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String tagYear;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 平台类型 1：STB 2：OTT 3：ALL</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;platform&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String platform;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 站点ID</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;siteId&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Integer siteId;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 导演</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;director&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String director ;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 主演</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;leadingActor&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String leadingActor;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 关键词</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;keyword&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String keyword;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 媒资上架栏目父栏目集合(包含当前栏目)</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;columnId&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;Long&gt; columnId;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 资源上架栏目ID</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;columnID&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long columnID;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Long <span class="title">getColumnID</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> columnID;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColumnID</span><span class="params">(Long columnID)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.columnID = columnID;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;Long&gt; <span class="title">getColumnId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> columnId;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColumnId</span><span class="params">(List&lt;Long&gt; columnId)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.columnId = columnId;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="program"><span id="inline-blue">Program</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@JsonIgnoreProperties(ignoreUnknown = true)</span></span><br><span class="line"><span class="meta">@Index(indexName = &quot;program&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Program</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 节目单ID</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Id</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;programGuideId&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long programGuideId;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 节目名称</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;eventName&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String eventName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 节目名称拼音</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;eventNamePinyin&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String eventNamePinyin;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 开始时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;beginTime&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long beginTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 结束时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;endTime&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Long endTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 节目日期</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;eventDate&quot;)</span></span><br><span class="line">  <span class="meta">@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;, timezone = &quot;GMT+8&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> Date eventDate;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 视频类型</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@JsonProperty(&quot;videoType&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String videoType;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="注解id"><span id="inline-blue">注解@Id</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target( &#123; ElementType.FIELD &#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Id &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="注解index"><span id="inline-blue">注解@Index</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Index &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">String <span class="title">indexName</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="接口实现"><span id="inline-blue">接口实现</span></span></h2><h2><span id="baseelasticrepository"><span id="inline-blue">BaseElasticRepository</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseElasticRepository</span>&lt;<span class="title">T</span>, <span class="title">PK</span> <span class="keyword">extends</span> <span class="title">Serializable</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> ElasticsearchClient client;</span><br><span class="line">  <span class="keyword">protected</span> Class&lt;T&gt; entityClass;</span><br><span class="line">  <span class="keyword">protected</span> String indexName;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ObjectMapper objectMapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> List&lt;String&gt; compositeIdFields = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 设置组合ID字段的方法</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initCompositeIdFields</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 默认空实现，子类按需覆盖</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> String <span class="title">resolveDocumentId</span><span class="params">(T document)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!CommonUtil.isEmpty(compositeIdFields)) &#123;</span><br><span class="line">      <span class="keyword">return</span> EntityHelper.getCompositeIdValue(document, compositeIdFields);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> String.valueOf(EntityHelper.getIdValue(document));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *  BaseElasticRepository初始化</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">BaseElasticRepository</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.entityClass = getEntityClass();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.indexName = Optional.ofNullable(entityClass.getAnnotation(Index.class))</span><br><span class="line">            .map(Index::indexName)</span><br><span class="line">            .orElseThrow(() -&gt; <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;实体类需标注@Index&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 查询class对应索引是否存在</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exists</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查索引是否存在</span></span><br><span class="line">    <span class="keyword">return</span> client.indices()</span><br><span class="line">            .exists(ExistsRequest.of(e -&gt; e.index(indexName)))</span><br><span class="line">            .value();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> RefreshResponse <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> client.indices()</span><br><span class="line">            .refresh(RefreshRequest.of(e -&gt; e.index(indexName)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   *  创建索引</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">createIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> client.indices().create(create -&gt; create.index(indexName)).acknowledged();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> IndexResponse <span class="title">save</span><span class="params">(T document)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] jsonBytes = objectMapper.writeValueAsBytes(document);</span><br><span class="line">    <span class="comment">//获取Document对象ID</span></span><br><span class="line">    String id = resolveDocumentId(document);</span><br><span class="line">    <span class="comment">//写入ES</span></span><br><span class="line">    IndexResponse indexResponse = client.index(index -&gt; index</span><br><span class="line">            .index(indexName)</span><br><span class="line">            .id(id)</span><br><span class="line">            .withJson(<span class="keyword">new</span> ByteArrayInputStream(jsonBytes)));</span><br><span class="line">    <span class="keyword">return</span> indexResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> BulkResponse <span class="title">bulkInsert</span><span class="params">(List&lt;T&gt; entityList)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (CommonUtil.isEmpty(entityList)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Entity list cannot be null or empty&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    BulkRequest.Builder br = <span class="keyword">new</span> BulkRequest.Builder();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (T entity : entityList) &#123;</span><br><span class="line">      br.operations(op -&gt; op</span><br><span class="line">              .index(idx -&gt; &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                          <span class="keyword">return</span> idx</span><br><span class="line">                                  .index(indexName)</span><br><span class="line">                                  .id(resolveDocumentId(entity))</span><br><span class="line">                                  .document(entity);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                          <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">                        &#125;</span><br><span class="line">                      &#125;</span><br><span class="line">              )</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> client.bulk(br.build());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> BulkResponse <span class="title">bulkDelete</span><span class="params">(List&lt;T&gt; entityList)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    BulkRequest.Builder builder = <span class="keyword">new</span> BulkRequest.Builder();</span><br><span class="line">    <span class="keyword">for</span> (T entity : entityList) &#123;</span><br><span class="line">      builder.operations(op -&gt; op.delete(i -&gt;</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> i.index(indexName)</span><br><span class="line">                          .id(resolveDocumentId(entity));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                  <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">      ));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> client.bulk(builder.build());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> BulkResponse <span class="title">bulkUpdate</span><span class="params">(List&lt;T&gt; entityList)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (CommonUtil.isEmpty(entityList)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Entity list cannot be null or empty&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    BulkRequest.Builder br = <span class="keyword">new</span> BulkRequest.Builder();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (T entity : entityList) &#123;</span><br><span class="line">      String docId = resolveDocumentId(entity);</span><br><span class="line">      br.operations(op -&gt; op</span><br><span class="line">              .update(upd -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                  <span class="keyword">return</span> upd</span><br><span class="line">                          .index(indexName)</span><br><span class="line">                          .id(docId)</span><br><span class="line">                          .action(a -&gt; a</span><br><span class="line">                                  .doc(entity)</span><br><span class="line">                                  .docAsUpsert(<span class="keyword">true</span>)</span><br><span class="line">                          );</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                  <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> client.bulk(br.build());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> UpdateResponse <span class="title">update</span><span class="params">(T document)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String id = resolveDocumentId(document);</span><br><span class="line">    UpdateResponse updateResponse = client.update(update -&gt; update</span><br><span class="line">                    .index(indexName)</span><br><span class="line">                    .id(id)</span><br><span class="line">                    .doc(document)</span><br><span class="line">                    .docAsUpsert(<span class="keyword">true</span>)</span><br><span class="line">            , Map.class);</span><br><span class="line">    <span class="keyword">return</span> updateResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> DeleteResponse <span class="title">delete</span><span class="params">(T document)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    String id =  resolveDocumentId(document);</span><br><span class="line">    DeleteResponse deleteResponse = client.delete(del -&gt; del</span><br><span class="line">            .index(indexName)</span><br><span class="line">            .id(id));</span><br><span class="line">    <span class="keyword">return</span> deleteResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> GetResponse&lt;T&gt; <span class="title">findById</span><span class="params">(PK id)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 直接通过文档 ID 查询（非字段匹配）</span></span><br><span class="line">    GetResponse&lt;T&gt; response = client.get(</span><br><span class="line">            GetRequest.of(g -&gt; g</span><br><span class="line">                    .index(indexName)</span><br><span class="line">                    .id(id.toString())</span><br><span class="line">            ),</span><br><span class="line">            entityClass</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 清除索引数据</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> DeleteByQueryResponse <span class="title">truncate</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    DeleteByQueryResponse response = client.deleteByQuery(d -&gt; d</span><br><span class="line">            .index(indexName)</span><br><span class="line">            .query(q -&gt; q</span><br><span class="line">                    .matchAll(m -&gt; m)</span><br><span class="line">            )</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> Class&lt;T&gt; <span class="title">getEntityClass</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Type genType = <span class="keyword">this</span>.getClass().getGenericSuperclass();</span><br><span class="line">    <span class="keyword">if</span> (genType <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">      Class&lt;T&gt; genClass = (Class&lt;T&gt;) ((ParameterizedType) genType)</span><br><span class="line">              .getActualTypeArguments()[<span class="number">0</span>];</span><br><span class="line">      <span class="keyword">return</span> genClass;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> Exception(getClass().getName()</span><br><span class="line">            + <span class="string">&quot;BaseElasticRepository&lt;T&gt;,T需要定义&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ElasticsearchClient <span class="title">getClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> client;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setClient</span><span class="params">(ElasticsearchClient client)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.client = client;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="assetelasticsearchrepository"><span id="inline-blue">AssetElasticsearchRepository</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AssetElasticsearchRepository</span> <span class="keyword">extends</span> <span class="title">BaseElasticRepository</span>&lt;<span class="title">Asset</span>,<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(AssetElasticsearchRepository.class);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">AssetElasticsearchRepository</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    initCompositeIdFields();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initCompositeIdFields</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 指定组合ID字段（按顺序）</span></span><br><span class="line">    compositeIdFields.add(Constant.RESOURCE_ID);</span><br><span class="line">    compositeIdFields.add(Constant.COLUMN_ID_VALUE);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="programelasticsearchrepository"><span id="inline-blue">ProgramElasticsearchRepository</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProgramElasticsearchRepository</span> <span class="keyword">extends</span> <span class="title">BaseElasticRepository</span>&lt;<span class="title">Program</span>,<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="功能描述"><span id="inline-blue">功能描述</span></span></h2><p>Asset、Program实体类使用@Id、@index注解，标识Elasticsearch对应索引ID、index名称，BaseElasticRepository通用接口基于java api  client方式实现Elasticsearch 针对索引增删改查以及批量操作，索引文档ID使用自定义组合ID，更加方便针对组合ID查询文档信息。</p>
]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title>ElasticSearch-8.8.0实现分词插件支持</title>
    <url>/ElasticSearch/blogs/ElasticSearch-8.8.0%E5%AE%9E%E7%8E%B0%E5%88%86%E8%AF%8D%E6%8F%92%E4%BB%B6%E6%94%AF%E6%8C%81/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85span"><span id="inline-blue">插件安装</span></a></li>
<li><a href="#span-idinline-blue%E7%B4%A2%E5%BC%95%E5%AD%97%E6%AE%B5%E6%98%A0%E5%B0%84span"><span id="inline-blue">索引字段映射</span></a><ul>
<li><a href="#span-idinline-blueik_smartspan"><span id="inline-blue">ik_smart</span></a></li>
<li><a href="#span-idinline-blueik_max_wordspan"><span id="inline-blue">ik_max_word</span></a></li>
<li><a href="#span-idinline-bluepinyin_fullspan"><span id="inline-blue">pinyin_full</span></a></li>
<li><a href="#span-idinline-bluepinyin_abbrspan"><span id="inline-blue">pinyin_abbr</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux：CentOS Linux release 7.9.2009 (Core)<br>ElasticSearch： 8.8.0</p>
<h1><span id="插件安装"><span id="inline-blue">插件安装</span></span></h1><p>Elasticsearch为了索引支持中文拼音分词，简繁转换，需要安装analysis-ik、analysis-pinyin、analysis-stconvert插件，上述插件都没有8.8.0版本，下载8.8.1版本，通过修改插件版本配置描述文件更改版本校验，使得ElasticSearch启动能够兼容，并正常使用。<br>插件下载地址：<a href="https://release.infinilabs.com/">https://release.infinilabs.com/</a><br>插件下载完成之后解压上传到Elasticsearch plugins目录下，并修改插件对应文件夹为ik、pinyin、stconvert，如下图所示：<br><img src="/images/elasticsearch/20250523/es_20250523_001.png" alt="Elasticsearch"></p>
<p>plugin-descriptor.properties文件修改内容如下：<br><img src="/images/elasticsearch/20250523/es_20250523_002.png" alt="Elasticsearch"></p>
<p>参照上述配置文件，analysis-ik、analysis-pinyin、analysis-stconvert插件都需要更改，修改完成之后，重启ElasticSearch.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">su - es</span><br><span class="line"></span><br><span class="line">cd /home/ELK/elasticsearch-8.8.0/bin  </span><br><span class="line"></span><br><span class="line">./elasticsearch -d</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="索引字段映射"><span id="inline-blue">索引字段映射</span></span></h1><p><a href="http://10.9.216.14:9200/asset?pretty">http://10.9.216.14:9200/asset?pretty</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;number_of_shards&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">&quot;number_of_replicas&quot;</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="attr">&quot;refresh_interval&quot;</span>: <span class="string">&quot;5s&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;index.translog.durability&quot;</span>: <span class="string">&quot;async&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;index.translog.sync_interval&quot;</span>: <span class="string">&quot;10s&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;analysis&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;analyzer&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;ik_smart_analyzer&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;custom&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;tokenizer&quot;</span>: <span class="string">&quot;ik_smart&quot;</span>,</span><br><span class="line">									  <span class="attr">&quot;filter&quot;</span>: [<span class="string">&quot;lowercase&quot;</span>]</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">&quot;ik_max_word_analyzer&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;custom&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;tokenizer&quot;</span>: <span class="string">&quot;ik_max_word&quot;</span>,</span><br><span class="line">									  <span class="attr">&quot;filter&quot;</span>: [<span class="string">&quot;lowercase&quot;</span>]</span><br><span class="line">                &#125;,</span><br><span class="line">						   <span class="attr">&quot;pinyin_full_analyzer&quot;</span>: &#123;</span><br><span class="line">												<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;custom&quot;</span>,</span><br><span class="line">												<span class="attr">&quot;tokenizer&quot;</span>: <span class="string">&quot;pinyin_full_tokenizer&quot;</span>,</span><br><span class="line">											  <span class="attr">&quot;filter&quot;</span>: [<span class="string">&quot;lowercase&quot;</span>]</span><br><span class="line">								&#125;,</span><br><span class="line">						   <span class="attr">&quot;pinyin_abbr_analyzer&quot;</span>: &#123;</span><br><span class="line">												<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;custom&quot;</span>,</span><br><span class="line">												<span class="attr">&quot;tokenizer&quot;</span>: <span class="string">&quot;pinyin_abbr_tokenizer&quot;</span>,</span><br><span class="line">											  <span class="attr">&quot;filter&quot;</span>: [<span class="string">&quot;lowercase&quot;</span>]</span><br><span class="line">								&#125;</span><br><span class="line">						&#125;,</span><br><span class="line">            <span class="attr">&quot;tokenizer&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;pinyin_full_tokenizer&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;pinyin&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;keep_full_pinyin&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">										<span class="attr">&quot;keep_joined_full_pinyin&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">										<span class="attr">&quot;keep_original&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">										<span class="attr">&quot;limit_first_letter_length&quot;</span>: <span class="number">16</span>,</span><br><span class="line">                    <span class="attr">&quot;lowercase&quot;</span> : <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">&quot;remove_duplicated_term&quot;</span> : <span class="literal">true</span> </span><br><span class="line">                &#125;,</span><br><span class="line">							<span class="attr">&quot;pinyin_abbr_tokenizer&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;pinyin&quot;</span>,</span><br><span class="line">								    <span class="attr">&quot;keep_full_pinyin&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">&quot;keep_first_letter&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">										<span class="attr">&quot;keep_joined_full_pinyin&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">										<span class="attr">&quot;keep_original&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">										<span class="attr">&quot;limit_first_letter_length&quot;</span>: <span class="number">16</span>,</span><br><span class="line">								    <span class="attr">&quot;lowercase&quot;</span> : <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">&quot;remove_duplicated_term&quot;</span> : <span class="literal">true</span> </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">					<span class="attr">&quot;normalizer&quot;</span>: &#123;</span><br><span class="line">					<span class="attr">&quot;lowercase_normalizer&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;custom&quot;</span>,</span><br><span class="line">						<span class="attr">&quot;filter&quot;</span>: [<span class="string">&quot;lowercase&quot;</span>]</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line"></span><br><span class="line">      <span class="attr">&quot;resourceId&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;assetName&quot;</span>:  &#123; </span><br><span class="line">				<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, </span><br><span class="line">				<span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_max_word_analyzer&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;search_analyzer&quot;</span>:<span class="string">&quot;ik_smart_analyzer&quot;</span>,</span><br><span class="line">																	<span class="attr">&quot;fields&quot;</span>: &#123;</span><br><span class="line">																		<span class="attr">&quot;pinyin&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_full_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;abbr&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_abbr_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;keyword&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;</span><br><span class="line">																	&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">      <span class="attr">&quot;letterFull&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;initialLetter&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;headLetter&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;headLetterLength&quot;</span>:  &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;short&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;actorDirectorLetter&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;year&quot;</span>:              &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;vodCount&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;userRecommendLevel&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;short&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;recommendationLevel&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;short&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;resourceRank&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;score&quot;</span>:             &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;float&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;virrecommandcount&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;createTime&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;epoch_millis&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;publishDate&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;epoch_millis&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;optTime&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;epoch_millis&quot;</span> &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;showType&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;originName&quot;</span>:      &#123; </span><br><span class="line">			<span class="attr">&quot;type&quot;</span>:   <span class="string">&quot;text&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;analyzer&quot;</span>:<span class="string">&quot;ik_max_word_analyzer&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;search_analyzer&quot;</span>:<span class="string">&quot;ik_smart_analyzer&quot;</span> ,</span><br><span class="line">				<span class="attr">&quot;fields&quot;</span>: </span><br><span class="line">													  &#123;</span><br><span class="line">																		<span class="attr">&quot;pinyin&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_full_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;abbr&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_abbr_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;keyword&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;</span><br><span class="line">														&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">      <span class="attr">&quot;videoType&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;assetTypes&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;packaged&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;tag&quot;</span>:             &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;tagYear&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;platform&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;siteId&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;director&quot;</span>:        &#123; </span><br><span class="line">				<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, </span><br><span class="line">				<span class="attr">&quot;analyzer&quot;</span>:<span class="string">&quot;ik_max_word_analyzer&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;search_analyzer&quot;</span>:<span class="string">&quot;ik_smart_analyzer&quot;</span>,</span><br><span class="line">												 	 <span class="attr">&quot;fields&quot;</span>: </span><br><span class="line">													  &#123;</span><br><span class="line">																		<span class="attr">&quot;pinyin&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_full_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;abbr&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_abbr_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;keyword&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;</span><br><span class="line">														&#125;</span><br><span class="line">												 &#125;,</span><br><span class="line">      <span class="attr">&quot;leadingActor&quot;</span>:    &#123; </span><br><span class="line">				<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;analyzer&quot;</span>:<span class="string">&quot;ik_max_word_analyzer&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;search_analyzer&quot;</span>:<span class="string">&quot;ik_smart_analyzer&quot;</span>,</span><br><span class="line">												    <span class="attr">&quot;fields&quot;</span>: </span><br><span class="line">													  &#123;</span><br><span class="line">																		<span class="attr">&quot;pinyin&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_full_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;abbr&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_abbr_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;keyword&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;</span><br><span class="line">														&#125;</span><br><span class="line">												 &#125;,</span><br><span class="line">      <span class="attr">&quot;keyword&quot;</span>:         &#123; </span><br><span class="line">				<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span> , </span><br><span class="line">				<span class="attr">&quot;analyzer&quot;</span>:<span class="string">&quot;ik_max_word_analyzer&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;search_analyzer&quot;</span>:<span class="string">&quot;ik_smart_analyzer&quot;</span>,</span><br><span class="line">												 		<span class="attr">&quot;fields&quot;</span>: </span><br><span class="line">													  &#123;</span><br><span class="line">																		<span class="attr">&quot;pinyin&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_full_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;abbr&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_abbr_analyzer&quot;</span> &#125;,</span><br><span class="line">																		<span class="attr">&quot;keyword&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;</span><br><span class="line">														&#125;</span><br><span class="line">												 &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="attr">&quot;columnId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;columnID&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span> &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述索引映射配置，支持ik_smart_analyzer、ik_max_word_analyzer、pinyin_full_analyzer、pinyin_abbr_analyzer</p>
<h2><span id="ik_smart"><span id="inline-blue">ik_smart</span></span></h2><p>ik_smart_analyzer:粗粒度分词，分词效果如下：<br><a href="http://10.9.216.14:9200/asset/_analyze">http://10.9.216.14:9200/asset/_analyze</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: [<span class="string">&quot;音乐人生&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;assetName&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_smart_analyzer&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回结果：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;tokens&quot;</span>: [</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;音乐&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">2</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;人生&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">2</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">4</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="ik_max_word"><span id="inline-blue">ik_max_word</span></span></h2><p>ik_max_word_analyzer:细粒度分词，分词效果如下：<br><a href="http://10.9.216.14:9200/asset/_analyze">http://10.9.216.14:9200/asset/_analyze</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: [<span class="string">&quot;音乐人生&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;assetName&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_max_word_analyzer&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回结果：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;tokens&quot;</span>: [</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;音乐人&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">3</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;音乐&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">2</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">1</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;人生&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">2</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">4</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">2</span></span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="pinyin_full"><span id="inline-blue">pinyin_full</span></span></h2><p>pinyin_full_analyzer:拼音全拼分词器，分词效果如下：<br><a href="http://10.9.216.14:9200/asset/_analyze">http://10.9.216.14:9200/asset/_analyze</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: [<span class="string">&quot;音乐人生&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;assetName&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_full_analyzer&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回结果：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;tokens&quot;</span>: [</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;yin&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;word&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;yinyuerensheng&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;word&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;yyrs&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;word&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">0</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;yue&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;word&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">1</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;ren&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;word&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">2</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;sheng&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;word&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">3</span></span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="pinyin_abbr"><span id="inline-blue">pinyin_abbr</span></span></h2><p>pinyin_abbr_analyzer:拼音首字母分词器，分词效果如下：<br><a href="http://10.9.216.14:9200/asset/_analyze">http://10.9.216.14:9200/asset/_analyze</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: [<span class="string">&quot;音乐人生&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;assetName&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;pinyin_abbr_analyzer&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回结果：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;tokens&quot;</span>: [</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">&quot;token&quot;</span>: <span class="string">&quot;yyrs&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;start_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;end_offset&quot;</span>: <span class="number">0</span>,</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;word&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;position&quot;</span>: <span class="number">0</span></span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud stream 3.x集成RabbitMQ&amp;Kafka</title>
    <url>/SpringCloud-Stream/blogs/SpringCloud%20stream%203.x%E9%9B%86%E6%88%90RabbitMQ&amp;Kafka/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>SpringBoot: 2.6.6<br>SpringCloud: 2021.0.6<br>SpringCloud stream: 3.2.6<br>jdk: 1.8</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>同时加载spring-cloud-stream-binder-kafka和spring-cloud-stream-binder-rabbit依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--spring-boot必须是2.x--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.waylau.spring.cloud.stream.batch.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-stream-batch-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>spring-cloud-stream-batch-demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">description</span>&gt;</span>Batch demo for Spring Cloud Stream<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--spring-cloud必须是2021.x--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>2021.0.5<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">spring-integration.version</span>&gt;</span>5.5.9<span class="tag">&lt;/<span class="name">spring-integration.version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">spring-cloud-stream-binder-jms.version</span>&gt;</span>1.0.0.RELEASE<span class="tag">&lt;/<span class="name">spring-cloud-stream-binder-jms.version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">spring-cloud-starter-stream-rocketmq.version</span>&gt;</span>2022.0.0.0-RC1<span class="tag">&lt;/<span class="name">spring-cloud-starter-stream-rocketmq.version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-stream<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!--start: 添加binder --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-stream-binder-kafka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-stream-binder-rabbit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        spring integration start</span></span><br><span class="line"><span class="comment">        解决spring-cloud-stream集成kafka依赖spring-integration-5.5.10,初始化加载使用java9版本List.of()操作导致异常</span></span><br><span class="line"><span class="comment">        spring-integration版本降为5.5.9版本</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.integration<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-integration-jmx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-integration.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.integration<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-integration-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-integration.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.integration<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-integration-kafka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-integration.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.integration<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-integration-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-integration.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">			&lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">		&lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">			&lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">			&lt;artifactId&gt;spring-cloud-starter-stream-rocketmq&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">			&lt;version&gt;$&#123;spring-cloud-starter-stream-rocketmq.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="comment">		&lt;/dependency&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">			&lt;groupId&gt;com.boutouil&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">			&lt;artifactId&gt;spring-cloud-stream-binder-jms&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">			&lt;version&gt;$&#123;spring-cloud-stream-binder-jms.version&#125;&lt;/version&gt;</span></span><br><span class="line"><span class="comment">		&lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--end: 添加binder--&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.waylau.spring.cloud.stream.batch.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.stream.function.StreamBridge;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 批量消费与生产</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> &lt;a href=&quot;https://waylau.com&quot;&gt;Way Lau&lt;/a&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-02-22</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> List&lt;Person&gt; PERSON_LIST = Arrays.asList(</span><br><span class="line">            <span class="keyword">new</span> Person(<span class="string">&quot;Sam Spade&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> Person(<span class="string">&quot;Sam Po&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> Person(<span class="string">&quot;Sam Li&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> Person(<span class="string">&quot;Sam Bo&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> Person(<span class="string">&quot;Way Lau&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> Person(<span class="string">&quot;Fei Po&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> Person(<span class="string">&quot;Gu Li&quot;</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StreamBridge bridge;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ApplicationRunner <span class="title">runner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> arg -&gt; &#123;</span><br><span class="line">            <span class="comment">// 将消息批量转发到其他destination</span></span><br><span class="line">            <span class="comment">//bridge.send(&quot;logBatchTransmitDestination&quot;, PERSON_LIST);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将消息逐个转发到其他destination</span></span><br><span class="line">            PERSON_LIST.stream().forEach(person -&gt; &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Sending: &quot;</span> + person);</span><br><span class="line">                bridge.send(<span class="string">&quot;api-log-topic&quot;</span>, person);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 批量消息处理器</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Consumer&lt;List&lt;Person&gt;&gt; apiLogConsumer() &#123;</span><br><span class="line">        <span class="keyword">return</span> personList -&gt; &#123;</span><br><span class="line">            <span class="comment">// 打印出接收到的消息</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Received personList: &quot;</span> + personList);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>application.yml配置文件内容：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment">#  rabbitmq:</span></span><br><span class="line"><span class="comment">#    host: 10.9.216.12</span></span><br><span class="line"><span class="comment">#    port: 5672</span></span><br><span class="line"><span class="comment">#    username: admin</span></span><br><span class="line"><span class="comment">#    password: admin</span></span><br><span class="line">  <span class="attr">kafka:</span></span><br><span class="line">    <span class="attr">bootstrap-servers:</span> <span class="number">10.9</span><span class="number">.216</span><span class="number">.12</span><span class="string">:9092</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">function:</span></span><br><span class="line">      <span class="attr">definition:</span> <span class="string">apiLogConsumer</span></span><br><span class="line">    <span class="attr">stream:</span></span><br><span class="line">      <span class="attr">defaultBinder:</span> <span class="string">kafka</span></span><br><span class="line">      <span class="attr">bindings:</span></span><br><span class="line">        <span class="attr">apiLogConsumer-in-0:</span></span><br><span class="line">          <span class="attr">destination:</span> <span class="string">api-log-topic</span></span><br><span class="line">          <span class="attr">group:</span> <span class="string">api-log-group</span></span><br><span class="line">          <span class="attr">consumer:</span></span><br><span class="line">            <span class="attr">batch-mode:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">max-attempts:</span> <span class="number">3</span> <span class="comment"># 尝试消费该消息的最大次数（消息消费失败后，发布者会重新投递）。默认3</span></span><br><span class="line">            <span class="attr">back-off-initial-interval:</span> <span class="number">1000</span> <span class="comment"># 重试消费消息的初始化间隔时间。默认1s，即第一次重试消费会在1s后进行</span></span><br><span class="line">            <span class="attr">back-off-multiplier:</span> <span class="number">2</span> <span class="comment"># 相邻两次重试之间的间隔时间的倍数。默认2</span></span><br><span class="line">            <span class="attr">back-off-max-interval:</span> <span class="number">10000</span> <span class="comment">#下一次尝试重试的最大时间间隔，默认为10000ms，即10s</span></span><br><span class="line"><span class="comment">#      rabbit:</span></span><br><span class="line"><span class="comment">#        bindings:</span></span><br><span class="line"><span class="comment">#          apiLogConsumer-in-0:</span></span><br><span class="line"><span class="comment">#            consumer:</span></span><br><span class="line"><span class="comment">#              batch-size: 10</span></span><br><span class="line"><span class="comment">#              enable-batching: true</span></span><br><span class="line"><span class="comment">#              receive-timeout: 2000</span></span><br><span class="line"><span class="comment">#              auto-bind-dlq: true</span></span><br><span class="line"><span class="comment">#              dead-letter-exchange: api-log-topic-dlx</span></span><br><span class="line"><span class="comment">#              republish-to-dlq: true</span></span><br><span class="line"><span class="comment">#              prefetch: 1</span></span><br><span class="line"><span class="comment">#              max-concurrency: 1</span></span><br><span class="line"><span class="comment">#              acknowledge-mode:  AUTO</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">kafka:</span></span><br><span class="line">        <span class="attr">binder:</span></span><br><span class="line">          <span class="attr">brokers:</span> <span class="string">$&#123;spring.kafka.bootstrap-servers&#125;</span></span><br><span class="line">          <span class="attr">default-topic:</span> <span class="string">api-log-topic</span></span><br><span class="line">          <span class="attr">auto-create-topics:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">auto-add-partitions:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">consumer:</span></span><br><span class="line">            <span class="attr">max-poll-records:</span> <span class="number">10</span></span><br><span class="line">            <span class="attr">fetch-min-bytes:</span> <span class="number">20480</span></span><br><span class="line">            <span class="attr">fetch-max-wait:</span> <span class="number">2000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>SpringCloud Stream</category>
      </categories>
      <tags>
        <tag>SpringCloud Stream</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx禁止恶意扫描和爬虫</title>
    <url>/Nginx/blogs/Nginx%E7%A6%81%E6%AD%A2%E6%81%B6%E6%84%8F%E6%89%AB%E6%8F%8F%E5%92%8C%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%BF%87%E6%BB%A4%E9%9D%9E%E6%B3%95%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6span"><span id="inline-blue">过滤非法特殊字符</span></a></li>
<li><a href="#span-idinline-blue%E8%BF%87%E6%BB%A4ipspan"><span id="inline-blue">过滤ip</span></a></li>
<li><a href="#span-idinline-blue%E8%BF%87%E6%BB%A4%E7%88%AC%E8%99%AB%E8%AF%B7%E6%B1%82span"><span id="inline-blue">过滤爬虫请求</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>nginx: 1.24.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>阿里云服务器部署微服务，Nginx请求日志出现大量莫名其妙的请求日志，并且请求路径携带非法特殊字符竟然导致微服务挂掉，所以需要增加访问过滤和反爬虫设置。</p>
<h1><span id="过滤非法特殊字符"><span id="inline-blue">过滤非法特殊字符</span></span></h1><p>http节点增加如下内容，修复nginx漏洞攻击，并定义非法控制字符</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">http&#123;</span><br><span class="line"></span><br><span class="line">	server_tokens off;</span><br><span class="line"><span class="meta">	#</span><span class="bash">漏洞攻击</span></span><br><span class="line">    add_header Content-Security-Policy &quot;script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27;&quot; always;</span><br><span class="line">    add_header Referrer-Policy &quot;same-origin&quot; always;</span><br><span class="line">    add_header Strict-Transport-Security &quot;max-age=63072000; includeSubdomains; preload&quot; always;</span><br><span class="line">    add_header X-Content-Type-Options &quot;nosniff&quot; always;</span><br><span class="line">    add_header X-Download-Options &quot;noopen&quot; always;</span><br><span class="line">    add_header X-Frame-Options &quot;sameorigin&quot; always;</span><br><span class="line">    add_header X-Permitted-Cross-Domain-Policies  &quot;none&quot; always;                                          </span><br><span class="line">    add_header X-Robots-Tag &quot;none&quot; always;</span><br><span class="line">    add_header X-XSS-Protection &quot;1; mode=block&quot; always;</span><br><span class="line">    proxy_hide_header  X-Powered-By;</span><br><span class="line">    fastcgi_hide_header X-Powered-By;</span><br><span class="line">	</span><br><span class="line">	map $request_method $invalid_method &#123;</span><br><span class="line">		~*^[a-zA-Z0-9\-._%~]+$ 0;  # 合法方法返回 0</span><br><span class="line">		default 1;                 # 其他情况视为非法，返回 1</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	map $uri $invalid_uri &#123;</span><br><span class="line">		~*[^\x20-\x7E] 1;          # 包含非法字符返回 1</span><br><span class="line">		default 0;                 # 默认合法</span><br><span class="line">	&#125;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>server节点增加如下内容，过滤掉携带非法控制字符的请求</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">......</span><br><span class="line">server&#123;</span><br><span class="line">	......</span><br><span class="line">	client_max_body_size 1024m;  </span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  dev-api.coframe.coship.com;</span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="comment">## 引入屏蔽规则ip</span></span></span><br><span class="line">    include /usr/local/nginx/conf/block_spiders.conf;</span><br><span class="line">	</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 综合判断：方法或URI任一非法则拦截</span></span><br><span class="line">    if ($invalid_method) &#123;</span><br><span class="line">            return 400;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if ($invalid_uri) &#123;</span><br><span class="line">            return 400;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">	.......</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1><span id="过滤ip"><span id="inline-blue">过滤ip</span></span></h1><p>nginx配置文件nginx.conf http节点增加如下配置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">http&#123;</span><br><span class="line">	</span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="comment">## 引入屏蔽规则ip</span></span></span><br><span class="line">    include /usr/local/nginx/conf/block_ips.conf;</span><br><span class="line">	.......</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>nginx配置目录下增加配置文件block_ips.conf，路径: /usr/local/nginx/conf<br>block_ips.conf文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">deny 223.70.213.73;</span><br><span class="line">deny 45.148.10.4;</span><br><span class="line">deny 78.153.140.151;</span><br><span class="line">deny 45.148.10.97;</span><br></pre></td></tr></table></figure>

<h1><span id="过滤爬虫请求"><span id="inline-blue">过滤爬虫请求</span></span></h1><p>nginx配置文件nginx.conf server节点增加如下配置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">server&#123;</span><br><span class="line">	......</span><br><span class="line">	client_max_body_size 1024m;  </span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  dev-api.coframe.coship.com;</span><br><span class="line"><span class="meta">	#</span><span class="bash"><span class="comment">## 引入屏蔽规则ip</span></span></span><br><span class="line">    include /usr/local/nginx/conf/block_spiders.conf;</span><br><span class="line">	.......</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>nginx配置目录下增加配置文件block_spiders.conf，路径: /usr/local/nginx/conf<br>block_spiders.conf文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 禁止Scrapy等工具的抓取</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">if</span> (<span class="variable">$http_user_agent</span> ~* (Scrapy|HttpClient|PostmanRuntime|ApacheBench|Java||python-requests|Python-urllib|node-fetch)) &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    <span class="built_in">return</span> 403;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 禁止指定的 user agent 以及为空的访问</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">if</span> (<span class="variable">$http_user_agent</span> ~ <span class="string">&quot;Nimbostratus|MJ12bot|MegaIndex|YisouSpider|^$&quot;</span> ) &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    <span class="built_in">return</span> 403;</span>             </span><br><span class="line"><span class="meta">#</span><span class="bash">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 屏蔽恶意访问</span></span><br><span class="line">if ($document_uri ~* \.(php|asp|aspx|jsp|swp|git|env|yaml|yml|sql|db|bak|ini|docx|doc|rar|tar|gz|zip|log|txt)$) &#123;</span><br><span class="line">    return 404;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 屏蔽指定关键词</span></span><br><span class="line">if ($document_uri ~* (wordpress|phpinfo|wlwmanifest|phpMyAdmin|xmlrpc)) &#123;</span><br><span class="line">    return 404;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker Portainer容器可视化部署</title>
    <url>/Docker/blogs/Docker%20Portainer%E5%AE%B9%E5%99%A8%E5%8F%AF%E8%A7%86%E5%8C%96%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E4%BB%8B%E7%BB%8Dspan"><span id="inline-blue">介绍</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E5%B7%A5%E5%85%B7span"><span id="inline-blue">容器编排工具</span></a></li>
<li><a href="#span-idinline-blue%E9%83%A8%E7%BD%B2span"><span id="inline-blue">部署</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: CentOS Linux release 7.4.1708 (Core)<br>Docker: 26.1.4<br>docker-compose: v2.25.0</p>
<h1><span id="介绍"><span id="inline-blue">介绍</span></span></h1><p>Portainer 是一个轻量级的管理 UI ，可让你轻松管理不同的 Docker 环境（Docker 主机或 Swarm 群集）。<br>Portainer 的目的是部署和使用一样简单。它由一个可以在任何 Docker 引擎上运行的单一容器组成（可以部署为 Linux 容器或 Windows 本地容器，也支持其他平台）。<br>Portainer 允许你管理所有的 Docker 资源（容器、镜像、卷、网络等等）。它与独立的 Docker 引擎和 Docker Swarm 模式兼容。</p>
<h1><span id="容器编排工具"><span id="inline-blue">容器编排工具</span></span></h1><p>docker swarm部署模式下portainer需要和agent配合使用</p>
<p>portainer : 6053537/portainer-ce:2.24.1-alpine<br>agent : portainer/agent:2.24.1-alpine</p>
<p>agent使用的全局模式，每个docker节点都会部署<br>portainer: 副本模式，仅docker swarm管理节点部署，通过节点标签约束控制</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">test-portainer-agent:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">portainer/agent:2.24.1-alpine</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/lib/docker/volumes:/var/lib/docker/volumes</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">test-net</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">global</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span> [<span class="string">node.platform.os</span> <span class="string">==</span> <span class="string">linux</span>]</span><br><span class="line">  <span class="attr">test-portainer:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="number">6053537</span><span class="string">/portainer-ce:2.24.1-alpine</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./portainer</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9000:9000&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8000:8000&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9443:9443&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./portainer/data:/data</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">test-net</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span>  </span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">test-net:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h1><span id="部署"><span id="inline-blue">部署</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">docker swarm模式下需要将容器volume挂载路径转换为绝对路径</span></span><br><span class="line">docker stack config -c docker-swarm-portainer.yml &gt; docker-swarm-portainer-process.yml</span><br><span class="line"><span class="meta">#</span><span class="bash">部署portainer容器服务</span></span><br><span class="line">docker stack deploy -c docker-swarm-portainer-process.yml --resolve-image never test-portainer</span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>通过容器映射外部宿主机9000端口，访问portainer后台管理: <a href="http://10.9.216.12:9000/">http://10.9.216.12:9000</a><br><img src="/images/portainer/20250425/portainer_20250425_001.png" alt="portainer部署"></p>
<p>连接docker swarm集群，通过agent上报实现，test-portainer-agent名称对应容器编排工具里面agent服务名称<br><img src="/images/portainer/20250425/portainer_20250425_002.png" alt="portainer部署"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Portainer</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx升级支持lua脚本</title>
    <url>/Nginx/blogs/Nginx%E5%8D%87%E7%BA%A7%E6%94%AF%E6%8C%81lua%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96span"><span id="inline-blue">安装依赖</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BDnginx%E6%BA%90%E7%A0%81span"><span id="inline-blue">下载nginx源码</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BDluajit2%E5%B9%B6%E7%BC%96%E8%AF%91span"><span id="inline-blue">下载luajit2并编译</span></a><ul>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AEluajit2%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fspan"><span id="inline-blue">设置luajit2环境变量</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BD%E7%9B%B8%E5%85%B3%E6%A8%A1%E5%9D%97span"><span id="inline-blue">下载相关模块</span></a><ul>
<li><a href="#span-idinline-bluengx_devel_kitspan"><span id="inline-blue">ngx_devel_kit</span></a></li>
<li><a href="#span-idinline-bluelua-nginx-modulespan"><span id="inline-blue">lua-nginx-module</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%87%8D%E6%96%B0%E7%BC%96%E8%AF%91nginxspan"><span id="inline-blue">重新编译nginx</span></a></li>
<li><a href="#span-idinline-bluelua%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">lua配置</span></a><ul>
<li><a href="#span-idinline-bluenginx%E6%B7%BB%E5%8A%A0lua%E6%94%AF%E6%8C%81span"><span id="inline-blue">nginx添加lua支持</span></a></li>
<li><a href="#span-idinline-bluenginx%E6%B7%BB%E5%8A%A0lua%E6%94%AF%E6%8C%81span-1"><span id="inline-blue">nginx添加lua支持</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: CentOS Linux release 7.4.1708 (Core)<br>nginx: 1.24.0<br>luajit2: 2.0.4</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>线上服务支付宝相关接口服务使用nginx代理，请求携带特殊字符导致出现400错误，需要借助lua脚本实现特殊字符编码转换。</p>
<h1><span id="安装依赖"><span id="inline-blue">安装依赖</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y zlib zlib-devel</span><br><span class="line">yum install gcc-c++</span><br><span class="line">yum install -y pcre pcre-devel</span><br><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure>

<h1><span id="下载nginx源码"><span id="inline-blue">下载nginx源码</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget https://nginx.org/download/nginx-1.24.0.tar.gz</span><br><span class="line">tar -zxvf nginx-1.24.0.tar.gz</span><br></pre></td></tr></table></figure>

<h1><span id="下载luajit2并编译"><span id="inline-blue">下载luajit2并编译</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://luajit.org/download/LuaJIT-2.0.5.tar.gz</span><br><span class="line"><span class="meta">$</span><span class="bash"> tar zxvf LuaJIT-2.0.5.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> LuaJIT-2.0.5</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make install</span></span><br></pre></td></tr></table></figure>

<p>或者访问<a href="https://github.com/openresty/luajit2/releases/tag/,%E4%B8%8B%E8%BD%BD%E5%AF%B9%E5%BA%94%E7%89%88%E6%9C%AC">https://github.com/openresty/luajit2/releases/tag/,下载对应版本</a></p>
<h2><span id="设置luajit2环境变量"><span id="inline-blue">设置luajit2环境变量</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export LUAJIT_LIB=/usr/local/lib</span><br><span class="line">export LUAJIT_INC=/usr/local/include/luajit-2.0</span><br><span class="line">echo &quot;/usr/local/lib&quot; &gt; /etc/ld.so.conf.d/usr_local_lib.conf</span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure>

<h1><span id="下载相关模块"><span id="inline-blue">下载相关模块</span></span></h1><h2><span id="ngx_devel_kit"><span id="inline-blue">ngx_devel_kit</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://github.com/simpl/ngx_devel_kit/archive/v0.3.2.tar.gz</span><br><span class="line">tar zxvf v0.3.2.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压缩后目录名</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ngx_devel_kit-0.3.2</span></span><br></pre></td></tr></table></figure>


<h2><span id="lua-nginx-module"><span id="inline-blue">lua-nginx-module</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> wget https://github.com/openresty/lua-nginx-module/archive/v0.10.13.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar zxvf v0.10.13.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压缩后目录名</span></span><br><span class="line">lua-nginx-module-0.10.13</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="重新编译nginx"><span id="inline-blue">重新编译nginx</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/nginx-1.24.0</span><br><span class="line"></span><br><span class="line">./configure --prefix=/usr/local/nginx --with-openssl=/usr/local/openssl --add-module=../ngx_devel_kit-0.3.2 --add-module=../lua-nginx-module-0.10.13/  --with-ld-opt=&quot;-Wl,-rpath,$LUAJIT_LIB&quot;    --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>执行make命令报如下错误：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">error: &#x27;ngx_http_headers_in_t&#x27; has no member named &#x27;cookies&#x27;</span><br></pre></td></tr></table></figure>

<p>解决办法：</p>
<p>找到模块源码文件，lua-nginx-module-0.10.13/src/ngx_http_lua_headers_in.c<br>将offsetof(ngx_http_headers_in_t, cookies), 改成 offsetof(ngx_http_headers_in_t, cookie)</p>
<p>重新编译就可以了</p>
<h1><span id="lua配置"><span id="inline-blue">lua配置</span></span></h1><h2><span id="nginx添加lua支持"><span id="inline-blue">nginx添加lua支持</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    # 第三方库（cjson）地址luajit-2.0/lib</span><br><span class="line">    lua_package_path &#x27;./lua/?.lua;;&#x27;;</span><br><span class="line">    lua_package_cpath &#x27;/usr/local/include/luajit-2.0/lib/?.so;;&#x27;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="nginx添加lua支持"><span id="inline-blue">nginx添加lua支持</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location = /lua_content &#123;</span><br><span class="line">         default_type &#x27;text/plain&#x27;;</span><br><span class="line">         content_by_lua_block &#123;</span><br><span class="line">             ngx.say(&#x27;Hello world!&#x27;)</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/nginx/20250421/nginx_20250421_001.png" alt="Nginx升级lua"></p>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>Lua</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot以https加载emqx报错unable to find valid certification path to requested target</title>
    <url>/Docker/blogs/SpringBoot%E4%BB%A5https%E5%8A%A0%E8%BD%BDemqx%E6%8A%A5%E9%94%99unable%20to%20find%20valid%20certification%20path%20to%20requested%20target%20/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 27.3.1<br>docker compose: v2.29.7<br>Emqx: 5.7.2<br>Nginx: 1.27.4<br>SpringBoot: 2.6.6</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>Docker 环境下部署微服务，启动过程中日志报错提示如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unable to find valid certification path to requested target </span><br></pre></td></tr></table></figure>

<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>springboot集成emqx，使用https协议连接nginx代理的emqx集群，nginx配置的自签名证书不被jdk所信任，导致加载证书失败，emqx相关配置如下:</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">emqx:</span></span><br><span class="line">  <span class="comment"># 是否启用emqx消息推送</span></span><br><span class="line">  <span class="attr">open:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="comment"># 认证配置</span></span><br><span class="line">    <span class="attr">auth:</span></span><br><span class="line">      <span class="comment"># 是否开启密码jwt认证，默认false</span></span><br><span class="line">      <span class="attr">openJWT:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment"># Secret是否使用 Base64 编码，默认false</span></span><br><span class="line">      <span class="attr">openBase64:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment"># 签名 当使用Base64编码，则使用base64编码的字符串（和服务配置一致）</span></span><br><span class="line">      <span class="attr">secret:</span> <span class="string">Y29zaGlw</span></span><br><span class="line">    <span class="comment"># API配置  Basic认证</span></span><br><span class="line">    <span class="attr">api:</span></span><br><span class="line">      <span class="comment"># 认证名</span></span><br><span class="line">      <span class="attr">apiKey:</span> <span class="string">947d4819c1a17673</span></span><br><span class="line">      <span class="comment"># 认证密码</span></span><br><span class="line">      <span class="attr">secretKey:</span> <span class="string">6DewmDIsMaOOHjxCzYvuKGTiPTUe9A5fluwN1yx3iBq2</span></span><br><span class="line">      <span class="attr">apiUrl:</span> <span class="string">http://10.0.1.202:18083/api/v5/</span></span><br><span class="line">    <span class="comment"># 客户端配置</span></span><br><span class="line">    <span class="attr">client:</span></span><br><span class="line">      <span class="comment"># 账号&amp;密码为选填字段，可不填</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">Coship7000?</span></span><br><span class="line">      <span class="comment"># tcp连接地址</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">ssl://10.0.1.202:8884</span></span><br><span class="line">      <span class="comment"># 订阅主题</span></span><br><span class="line">      <span class="attr">subTopic:</span> <span class="string">default/#</span></span><br><span class="line">      <span class="comment"># 消息传递质量:</span></span><br><span class="line">      <span class="comment"># QoS 0：最多一次，即&lt;=1。这个级别的消息可能会被传递多次，或者可能根本不会被传递。这种级别适用于对数据要求不高的情况，丢几个数据影响不大的项目。</span></span><br><span class="line">      <span class="comment"># QoS 1：至少一次，即&gt;=1。这个级别的消息至少会被传递一次，但如果设备在传递消息时出现故障，消息可能会被重发。这种级别适用于一些对消息传递可靠性要求较高的场景，但会增加网络传输的开销和延迟。</span></span><br><span class="line">      <span class="comment"># QoS 2：一次，即=1。这个级别的消息只会被传递一次，而且保证了消息的顺序性。在这个级别下，消息代理会进行两阶段的握手确认。只有在收到最终确认后，消息代理才会认为消息传递完成。QoS 2级别提供了最高的可靠性，但相应地增加了更多的网络开销和延迟。</span></span><br><span class="line">      <span class="attr">qos:</span> <span class="number">0</span></span><br><span class="line">      <span class="comment"># 默认qos（发布端）</span></span><br><span class="line">      <span class="attr">defaultQos:</span> <span class="number">0</span></span><br><span class="line">      <span class="comment"># 默认主题（发布端）</span></span><br><span class="line">      <span class="attr">defaultTopic:</span> <span class="string">default</span></span><br><span class="line">    <span class="comment"># 多线程配置</span></span><br><span class="line">    <span class="attr">executor:</span></span><br><span class="line">      <span class="comment"># 是否使用线程池接受入站消息</span></span><br><span class="line">      <span class="attr">isOpen:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment"># 核心线程数</span></span><br><span class="line">      <span class="attr">corePoolSize:</span> <span class="number">8</span></span><br><span class="line">      <span class="comment"># 最大线程数</span></span><br><span class="line">      <span class="attr">maxPoolSize:</span> <span class="number">16</span></span><br><span class="line">      <span class="comment"># 等待队列</span></span><br><span class="line">      <span class="attr">queueCapacity:</span> <span class="number">9999</span></span><br><span class="line">      <span class="comment"># 自定义线程前缀</span></span><br><span class="line">      <span class="attr">thread-name-prefix:</span> <span class="string">emqx-executor-</span></span><br><span class="line">    <span class="comment"># 拓展配置</span></span><br><span class="line">    <span class="attr">expand:</span></span><br><span class="line">      <span class="comment"># 批量获取客户端状态线程池固定线程数（默认5）</span></span><br><span class="line">      <span class="attr">statusThreadsNum:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>使用https连接的情况下url参数格式必须以ssl开头,示例：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">ssl://10.0.1.202:8884</span></span><br></pre></td></tr></table></figure>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>Dockerfile将证书拷贝进镜像，并将证书导入jdk受信任证书库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">拷贝https证书</span></span><br><span class="line">COPY ./https /home/https</span><br><span class="line"><span class="meta">#</span><span class="bash">jdk证书库导入自签名证书</span></span><br><span class="line">RUN keytool -import -trustcacerts -noprompt -alias mqtt.xxx.xxx.com \</span><br><span class="line">    -file /home/https/server.pem \</span><br><span class="line">    -keystore $JAVA_HOME/lib/security/cacerts -storepass changeit</span><br></pre></td></tr></table></figure>

<p>-alias 指定别名(推荐和证书域名同名)</p>
<p>-keystore 指定存储文件(jdk受信任证书库文件名称，默认cacerts)</p>
<p>-file 指定证书文件全路径(证书文件所在的目录)</p>
<p>注意:当切换到 cacerts 文件所在的目录时,才可指定 -keystore cacerts, 否则应该指定全路径;</p>
<p>查看受信任证书列表：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -list -keystore cacerts -alias mqtt.xxx.xxx.com</span><br></pre></td></tr></table></figure>

<p>如果是在本地idea开发环境报错，则使用下面的命令实现：</p>
<p>powershell或者cmd命令行进入指定路径执行如下命令(管理员权限执行)</p>
<p><img src="/images/docker/20250409/docker_20250409_001.png" alt="jdk导入自签名证书"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">执行命令输入默认证书库密码changeit</span></span><br><span class="line">keytool -import -alias mqtt.xxx.xxx.com -keystore cacerts -file /home/xxx/mqtt/server.pem</span><br><span class="line"></span><br><span class="line">keytool -list -keystore cacerts -alias mqtt.xxx.xxx.com</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Emqx</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker镜像仓库Harbor升级https访问</title>
    <url>/Harbor/blogs/Docker%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93Harbor%E5%8D%87%E7%BA%A7https%E8%AE%BF%E9%97%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E7%94%9F%E6%88%90https%E8%AF%81%E4%B9%A6span"><span id="inline-blue">生成https证书</span></a><ul>
<li><a href="#span-idinline-blue%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6%E9%A2%81%E5%8F%91%E6%9C%BA%E6%9E%84%E8%AF%81%E4%B9%A6span"><span id="inline-blue">生成证书颁发机构证书</span></a><ul>
<li><a href="#span-idinline-blue%E7%94%9F%E6%88%90ca%E8%AF%81%E4%B9%A6%E7%A7%81%E9%92%A5span"><span id="inline-blue">生成CA证书私钥</span></a></li>
<li><a href="#span-idinline-blue%E7%94%9F%E6%88%90ca%E8%AF%81%E4%B9%A6span"><span id="inline-blue">生成CA证书</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E7%94%9F%E6%88%90%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%AF%81%E4%B9%A6span"><span id="inline-blue">生成服务端证书</span></a><ul>
<li><a href="#span-idinline-blue%E7%94%9F%E6%88%90x509-v3%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6span"><span id="inline-blue">生成x509 v3扩展文件</span></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#span-idinline-blue%E6%8F%90%E4%BE%9B%E8%AF%81%E4%B9%A6%E7%BB%99harbor%E5%92%8Cdockerspan"><span id="inline-blue">提供证书给harbor和docker</span></a><ul>
<li><a href="#span-idinline-bluehaborspan"><span id="inline-blue">Habor</span></a><ul>
<li><a href="#span-idinline-blue%E6%9B%B4%E6%96%B0%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">更新配置</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-bluedockerspan"><span id="inline-blue">Docker</span></a></li>
<li><a href="#span-idinline-blue%E8%BD%AC%E6%8D%A2%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%81%E4%B9%A6span"><span id="inline-blue">转换客户端证书</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8A%E4%BC%A0%E8%AF%81%E4%B9%A6span"><span id="inline-blue">上传证书</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E5%90%AFdocker%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">重启docker服务</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 27.3.1<br>docker compose: v2.29.7<br>Harbor: v2.12.1</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>harbor配置https证书必要性</p>
<p>一、核心原因：安全通信​​<br>​​防止数据泄露​​<br>HTTPS 通过 TLS/SSL 协议对通信内容加密，避免镜像传输、用户凭证等敏感信息被窃取或篡改。HTTP 是明文传输，攻击者可通过抓包工具（如 Wireshark）截获数据。<br>​​抵御中间人攻击​​<br>若未启用 HTTPS，攻击者可伪造 Harbor 服务器证书，诱导客户端连接至恶意服务器，窃取镜像或注入恶意代码。</p>
<p>​​二、证书的核心作用​​<br>​​身份验证​​<br>​​服务器身份验证​​：证书包含域名信息（如 harbor.example.com），客户端（如 Docker 守护进程）会验证证书是否由受信任的 CA 签发，确保访问的是真实服务器而非仿冒节点。<br>​​客户端身份验证（可选）​​：通过客户端证书（如 ca.crt），Harbor 可验证请求来源的合法性，防止未授权的镜像推送或拉取。<br>​​数据完整性保护​​<br>使用数字签名技术（如 SHA-256），确保传输过程中数据未被篡改。例如，镜像层文件的哈希值会在传输后重新校验。</p>
<p>​​三、Harbor 特定场景需求​​<br>​​内容信任（Content Trust）​​<br>若启用 Notary 服务对镜像签名，必须通过 HTTPS 传输签名元数据。HTTP 会导致签名验证失败，无法保证镜像来源可信。<br>​​合规性要求​​<br>​​企业安全规范​​：多数企业要求内部服务使用 HTTPS。<br>​​行业标准​​：如 PCI-DSS（支付卡行业数据安全标准）强制要求加密通信。</p>
<p>公司内网环境下部署harbor一直使用的http,导致docker配置harbor镜像仓库需要添加如下配置：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;insecure-registries&quot;:</span> [<span class="string">&quot;http://my.harbor.com&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>拉取镜像文件经常出现超时，所以决定将Harbor仓库通信协议升级为https，并配置好局域网内的域名和IP之间映射，这样既保证了docker拉取镜像文件时的安全保证，同时也为harbor服务后续升级到公网打下基础。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="生成https证书"><span id="inline-blue">生成https证书</span></span></h2><h3><span id="生成证书颁发机构证书"><span id="inline-blue">生成证书颁发机构证书</span></span></h3><p>生产环境下通常是由受信任的CA机构颁发证书，但如果想使用自签名证书，可以生成自己的CA</p>
<h4><span id="生成ca证书私钥"><span id="inline-blue">生成CA证书私钥</span></span></h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">openssl genrsa -out ca.key 4096</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4><span id="生成ca证书"><span id="inline-blue">生成CA证书</span></span></h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">openssl req -x509 -new -nodes -sha512 -days 3650 \</span><br><span class="line"> -subj &quot;/C=CN/ST=Hubei/L=Hubei/O=harbor.test.com/OU=harbor.test.com/CN=harbor.test.com&quot; \</span><br><span class="line"> -key ca.key \</span><br><span class="line"> -out ca.crt</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3><span id="生成服务端证书"><span id="inline-blue">生成服务端证书</span></span></h3><p>服务端证书使用通常包含两个文件，后缀分别为.key和.crt</p>
<p>生成服务端证书私钥命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl genrsa -out harbor.test.com.key 4096</span><br></pre></td></tr></table></figure>


<p>生成服务端证书签名请求(CSR)命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl req -sha512 -new \</span><br><span class="line">    -subj &quot;/C=CN/ST=Hubei/L=Hubei/O=harbor.test.com/OU=harbor.test.com/CN=harbor.test.com&quot; \</span><br><span class="line">    -key harbor.test.com.key \</span><br><span class="line">    -out harbor.test.com.csr</span><br></pre></td></tr></table></figure>

<h4><span id="生成x509-v3扩展文件"><span id="inline-blue">生成x509 v3扩展文件</span></span></h4><p>扩展功能的引入背景​</p>
<p>X.509 v3 标准在早期版本（v1/v2）基础上新增了 ​​扩展字段（Extensions）​​，允许证书动态添加自定义属性，解决了以下问题：</p>
<p>​​功能单一性​​：v1/v2 证书仅支持基础身份信息（如 DN、公钥），无法满足复杂场景需求。<br>​​灵活性不足​​：无法定义密钥用途、证书策略等细粒度控制项。<br>​​证书链管理​​：需通过扩展实现证书层级关系验证（如交叉认证）。</p>
<p>核心扩展项及其作用​​</p>
<p>X.509 v3 扩展通过 ​​对象标识符（OID）​​ 唯一标识，分为 ​​关键（Critical）​​ 和 ​​非关键（Non-Critical）​​ 两类。以下是常见扩展及其作用：</p>
<p>​​1. 密钥用途与策略控制​​<br>​​Key Usage​​<br>定义公钥的合法用途（如数字签名、密钥加密），客户端可据此拒绝非法操作。<br>示例值：digitalSignature, keyEncipherment 。<br>​​Extended Key Usage (EKU)​​<br>细化密钥用途（如服务器认证 serverAuth、客户端认证 clientAuth），常用于 TLS/SSL 证书 。<br>​​Certificate Policies​​<br>声明证书的颁发策略（如企业内网策略 OID 2.23.140.1.1），支持多级策略映射 。<br>​​2. 证书链与身份验证​​<br>​​Subject Key Identifier (SKI)​​<br>唯一标识证书的公钥，用于快速匹配证书链中的上下级证书 。<br>​​Authority Key Identifier (AKI)​​<br>指定颁发者的公钥标识，支持交叉认证（如中间 CA 证书引用根 CA 的 SKI）。<br>​​Basic Constraints​​<br>标识证书是否为 CA 证书，pathLenConstraint 限制子 CA 层级深度（如 pathlen:0 表示仅允许直接签发终端证书）。<br>​​3. 安全增强与兼容性​​<br>​​Subject Alternative Name (SAN)​​<br>支持多域名/ IP 绑定（如 DNS:example.com, DNS:*.example.com），替代过时的 Common Name (CN) 字段 。<br>​​CRL Distribution Points​​<br>指定证书吊销列表（CRL）的下载地址，增强吊销检查效率 。<br>​​Inhibit Any Policy​​<br>禁止使用通配符策略（如 anyPolicy），强制严格匹配特定策略 。<br>​​4. 扩展功能支持​​<br>​​Subject Directory Attributes​​<br>传递访问控制信息（如用户组、角色），用于企业内网权限管理 。<br>​​Policy Constraints​​<br>强制要求证书策略链的连续性，防止策略替换攻击 。</p>
<p>生成扩展文件命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat &gt; v3.ext &lt;&lt;-EOF</span><br><span class="line">authorityKeyIdentifier=keyid,issuer</span><br><span class="line">basicConstraints=CA:FALSE</span><br><span class="line">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br><span class="line">extendedKeyUsage = serverAuth</span><br><span class="line">subjectAltName = @alt_names</span><br><span class="line"></span><br><span class="line">[alt_names]</span><br><span class="line">DNS.1=harbor.test.com</span><br><span class="line">DNS.2=10.9.216.14</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>使用该v3.ext文件为Harbor主机生成证书,生成命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl x509 -req -sha512 -days 3650 \</span><br><span class="line">    -extfile v3.ext \</span><br><span class="line">    -CA ca.crt -CAkey ca.key -CAcreateserial \</span><br><span class="line">    -in harbor.test.com.csr \</span><br><span class="line">    -out harbor.test.com.crt</span><br></pre></td></tr></table></figure>

<h2><span id="提供证书给harbor和docker"><span id="inline-blue">提供证书给harbor和docker</span></span></h2><h3><span id="habor"><span id="inline-blue">Habor</span></span></h3><p>将生成harbor.test.com.crt、harbor.test.com.key文件上传到harbor配置文件harbor.yml指定位置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/local/harbor/https/</span><br><span class="line">cp harbor.test.com.crt /usr/local/harbor/https/</span><br><span class="line">cp harbor.test.com.key /usr/local/harbor/https/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4><span id="更新配置"><span id="inline-blue">更新配置</span></span></h4><p>更改harbor.yml配置文件,内容如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Configuration file of Harbor</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The IP address or hostname to access admin UI and registry service.</span></span><br><span class="line"><span class="comment"># DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.</span></span><br><span class="line"><span class="attr">hostname:</span> <span class="string">my.harbor.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># http related config</span></span><br><span class="line"><span class="comment">#http:</span></span><br><span class="line">  <span class="comment"># port for http, default is 80. If https enabled, this port will redirect to https port</span></span><br><span class="line"><span class="comment">#  port: 80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https related config</span></span><br><span class="line"><span class="attr">https:</span></span><br><span class="line">  <span class="comment"># https port for harbor, default is 443</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">  <span class="comment"># The path of cert and key files for nginx</span></span><br><span class="line">  <span class="attr">certificate:</span> <span class="string">/usr/local/harbor/https/harbor.test.com.pem</span></span><br><span class="line">  <span class="attr">private_key:</span> <span class="string">/usr/local/harbor/https/harbor.test.com.key</span></span><br><span class="line">  <span class="comment"># enable strong ssl ciphers (default: false)</span></span><br><span class="line">  <span class="comment"># strong_ssl_ciphers: false</span></span><br></pre></td></tr></table></figure>

<p>harbor主目录执行以下命令更新harbor内部服务配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">假设harbor在/usr/<span class="built_in">local</span>/harbor</span></span><br><span class="line">cd /usr/local/harbor</span><br><span class="line">./prepare</span><br></pre></td></tr></table></figure>

<p>停止当前harbor实例，保留数据</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/harbor</span><br><span class="line">docker-compose down -v</span><br></pre></td></tr></table></figure>

<p>重启harbor</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/harbor</span><br><span class="line">docker-compose down up -d</span><br></pre></td></tr></table></figure>



<p>my.harbor.com是局域网自定义域名，certificate、private_key对应自签名证书和私钥<br>因为是局域网自定义的域名，并且使用的是自签名证书，所以需要在服务端和客户端配置域名和IP映射，让通信的双方都知道域名对应的IP地址。</p>
<p>Linux:<br>修改/etc/hosts文件，增加以下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">10.9.216.14  my.harbor.com</span><br></pre></td></tr></table></figure>

<p>windows：<br>修改C:\Windows\System32\drivers\etc\hosts文件(使用管理员权限)，增加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">10.9.216.14  my.harbor.com</span><br></pre></td></tr></table></figure>

<p>更改之后使用以下命令刷新dns</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ipconfig /flushdns</span><br></pre></td></tr></table></figure>

<p>浏览器导入harbor证书，包含ca.crt、coship.harbor.crt两个文件，导入到受信任的根证书机构即可，重启浏览器，访问<a href="https://harbor.test.com/">https://harbor.test.com</a><br><img src="/images/Harbor/20250416/Harbor_20250416_001.png" alt="Harbor升级https"><br><img src="/images/Harbor/20250416/Harbor_20250416_002.png" alt="Harbor升级https"><br><img src="/images/Harbor/20250416/Harbor_20250416_003.png" alt="Harbor升级https"><br><img src="/images/Harbor/20250416/Harbor_20250416_004.png" alt="Harbor升级https"></p>
<h3><span id="docker"><span id="inline-blue">Docker</span></span></h3><p>docker默认需要使用ca.crt、harbor.test.com.key、harbor.test.com.cert三个文件<br>Docker守护程序将.crt文件解释为CA证书，并将.cert文件解释为客户端证书</p>
<h3><span id="转换客户端证书"><span id="inline-blue">转换客户端证书</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl x509 -inform PEM -in harbor.test.com.crt -out harbor.test.com.cert</span><br></pre></td></tr></table></figure>

<h3><span id="上传证书"><span id="inline-blue">上传证书</span></span></h3><p>docker客户端证书默认路径为/etc/docker/certs.d,在此路径下创建对应域名证书路径，如果harbor https开放的不是443端口，请创建文件夹/etc/docker/certs.d/yourdomain.com:port或/etc/docker/certs.d/harbor_IP:port，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /etc/docker/certs.d/harbor.test.com/</span><br><span class="line">cp harbor.test.com.cert /etc/docker/certs.d/harbor.test.com/</span><br><span class="line">cp harbor.test.com.key /etc/docker/certs.d/harbor.test.com/</span><br><span class="line">cp ca.crt /etc/docker/certs.d/harbor.test.com/</span><br></pre></td></tr></table></figure>
<h3><span id="重启docker服务"><span id="inline-blue">重启docker服务</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>执行以下命令重启harbor服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop harbor.service</span><br><span class="line">systemctl start harbor.service</span><br></pre></td></tr></table></figure>

<p><img src="/images/Harbor/20250416/Harbor_20250416_005.png" alt="Harbor升级https"></p>
]]></content>
      <categories>
        <category>Harbor</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Harbor</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker实现nginx负载emqx集群</title>
    <url>/Docker/blogs/Docker%E5%AE%9E%E7%8E%B0nginx%E8%B4%9F%E8%BD%BDemqx%E9%9B%86%E7%BE%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 27.3.1<br>docker compose: v2.29.7<br>Emqx: 5.7.2<br>Nginx: 1.27.4</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>docker部署emqx集群服务之后，查看emqx官方文档,建议使用nginx提供https访问并实现负载均衡。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>docker-swarm-emqx-nginx.yml配置文件如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">photoframe-emqx-nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-emqx-nginx</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./emqx_nginx</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">8884</span></span><br><span class="line">        <span class="attr">published:</span> <span class="number">8884</span></span><br><span class="line">        <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">8085</span></span><br><span class="line">        <span class="attr">published:</span> <span class="number">8085</span></span><br><span class="line">        <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">443</span></span><br><span class="line">        <span class="attr">published:</span> <span class="number">443</span></span><br><span class="line">        <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">        <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emqx_nginx/conf/nginx.conf:/etc/nginx/nginx.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emqx_nginx/https:/home/nginx/https</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emqx_nginx/logs:/var/log/nginx</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">node.labels.role==interface</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">photoframe-base_photoframe-net:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>Dockerfile:</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> nginx:<span class="number">1.27</span>.<span class="number">4</span></span><br><span class="line"><span class="comment"># 挂载目录</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /home/nginx</span></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /home/nginx</span></span><br><span class="line"><span class="comment"># 指定路径</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /home/nginx</span></span><br><span class="line"><span class="comment"># 复制conf文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./conf/nginx.conf /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="comment"># 复制html文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./https /home/nginx/https/</span></span><br><span class="line"><span class="comment">#复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./docker-compose-wait/<span class="built_in">wait</span> /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment">#赋予检测脚本可执行权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod a+x /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment">#容器启动命令</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /<span class="built_in">wait</span> &amp;&amp; nginx -g <span class="string">&#x27;daemon off;&#x27;</span></span></span><br></pre></td></tr></table></figure>

<p>nginx配置文件如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">user root;</span><br><span class="line">worker_processes auto;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">	worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stream&#123;</span><br><span class="line"></span><br><span class="line">       #emqx ssl</span><br><span class="line">       upstream mqtt_servers &#123;</span><br><span class="line">                server photoframe-emqx-node1:1883;</span><br><span class="line">                server photoframe-emqx-node2:1883;</span><br><span class="line">       &#125;</span><br><span class="line">       #emqx websocket ssl</span><br><span class="line">       upstream mqtt_websocket_servers &#123;</span><br><span class="line">                server photoframe-emqx-node1:8083;</span><br><span class="line">                server photoframe-emqx-node2:8083;</span><br><span class="line">       &#125;</span><br><span class="line">       server &#123;</span><br><span class="line">        		listen 8884 ssl;</span><br><span class="line">        		#charset koi8-r;</span><br><span class="line">        		#access_log  logs/host.access.log  main;</span><br><span class="line">        		proxy_buffer_size 4k;</span><br><span class="line">                ssl_handshake_timeout 15s;</span><br><span class="line">                ssl_session_cache shared:SSL:10m;</span><br><span class="line">                ssl_session_timeout 10m;</span><br><span class="line">        		ssl_certificate /home/nginx/https/mqtt/server.pem;</span><br><span class="line">        		ssl_certificate_key /home/nginx/https/mqtt/server.key;</span><br><span class="line">                ssl_protocols  TLSv1.3;</span><br><span class="line">		        ssl_prefer_server_ciphers on;</span><br><span class="line">		        ssl_ciphers &#x27;EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5&#x27;;</span><br><span class="line"></span><br><span class="line">                proxy_pass mqtt_servers;</span><br><span class="line"></span><br><span class="line">                # 启用此项时，对应后端监听器也需要启用 proxy_protocol</span><br><span class="line">                #proxy_protocol on;</span><br><span class="line">                proxy_connect_timeout 10s;</span><br><span class="line">                # 默认心跳时间为 10 分钟</span><br><span class="line">                proxy_timeout 1800s;</span><br><span class="line">                tcp_nodelay on;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">	   server &#123;</span><br><span class="line">                listen 8085 ssl;</span><br><span class="line">                proxy_buffer_size 4k;</span><br><span class="line">                ssl_handshake_timeout 15s;</span><br><span class="line">                ssl_session_cache shared:SSL:10m;</span><br><span class="line">                ssl_session_timeout 10m; </span><br><span class="line">                ssl_certificate /home/nginx/https/mqtt/server.pem;</span><br><span class="line">                ssl_certificate_key /home/nginx/https/mqtt/server.key;</span><br><span class="line">                ssl_protocols  TLSv1.3;</span><br><span class="line">                ssl_prefer_server_ciphers on;</span><br><span class="line">                ssl_ciphers &#x27;EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5&#x27;;</span><br><span class="line"></span><br><span class="line">                # 添加 CA 证书及开启验证客户端证书参数即可启用双向认证</span><br><span class="line">                # ssl_client_certificate /usr/local/NGINX/certs/ca.pem;</span><br><span class="line">                # ssl_verify_client on;</span><br><span class="line"></span><br><span class="line">                proxy_pass mqtt_websocket_servers;</span><br><span class="line"></span><br><span class="line">                # 启用此项时，对应后端监听器也需要启用 proxy_protocol</span><br><span class="line">                #proxy_protocol on;</span><br><span class="line">                proxy_connect_timeout 10s;</span><br><span class="line">                # 默认心跳时间为 10 分钟</span><br><span class="line">                proxy_timeout 1800s;</span><br><span class="line">                tcp_nodelay on;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">	include       mime.types;</span><br><span class="line">	default_type  application/octet-stream;</span><br><span class="line">	client_max_body_size 1024m;</span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">log_format  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash">                  <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash">                  <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">	sendfile        on;</span><br><span class="line"><span class="meta">	#</span><span class="bash">tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">keepalive_timeout  0;</span></span><br><span class="line">	keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">gzip  on;</span></span><br><span class="line"></span><br><span class="line">	server &#123;</span><br><span class="line">        client_max_body_size 1024m;</span><br><span class="line">        listen       443 ssl;</span><br><span class="line">        server_name  api.xxx.xxx.com;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">		ssl_certificate /home/nginx/https/api/server.pem; # 证书文件路径</span><br><span class="line">		ssl_certificate_key /home/nginx/https/api/server.key; # 私钥文件路径</span><br><span class="line"></span><br><span class="line">		ssl_protocols TLSv1.2 TLSv1.3; # 推荐的TLS协议</span><br><span class="line">		ssl_prefer_server_ciphers on;</span><br><span class="line">		ssl_ciphers &#x27;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES256-GCM-SHA384&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="meta">		 #</span><span class="bash"> knife4j反向代理</span></span><br><span class="line">        location /prod/ &#123;</span><br><span class="line">            #rewrite ^/prod-api(.*)$ $1 break; #去除prod-api这层目录</span><br><span class="line">			proxy_pass http://xxx-gateway:9001/prod/;</span><br><span class="line">            proxy_set_header    Host                $http_host;</span><br><span class="line">			proxy_set_header    X-Real-IP           $realip_remote_addr;</span><br><span class="line">			proxy_set_header    X-Forwarded-Proto   $scheme;</span><br><span class="line">			proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;</span><br><span class="line">			proxy_connect_timeout 60;</span><br><span class="line">			proxy_send_timeout 60;</span><br><span class="line">			proxy_read_timeout 60;</span><br><span class="line">			send_timeout 60;</span><br><span class="line"></span><br><span class="line">			add_header Cache-Control no-cache;</span><br><span class="line"><span class="meta">			#</span><span class="bash"> 不缓存，支持流式输出</span></span><br><span class="line">			proxy_cache off;  # 关闭缓存</span><br><span class="line">			proxy_buffering off;  # 关闭代理缓冲</span><br><span class="line">			chunked_transfer_encoding on;  # 开启分块传输编码</span><br><span class="line">			tcp_nopush on;  # 开启TCP NOPUSH选项，禁止Nagle算法</span><br><span class="line">			tcp_nodelay on;  # 开启TCP NODELAY选项，禁止延迟ACK算法</span><br><span class="line">			keepalive_timeout 300;  # 设定keep-alive超时时间为65秒</span><br><span class="line"><span class="meta">			#</span></span><br><span class="line"><span class="bash">			<span class="comment"># #防止跨域问题</span></span></span><br><span class="line">			add_header &#x27;Access-Control-Allow-Origin&#x27; &#x27;*&#x27; always;</span><br><span class="line">			add_header &#x27;Access-Control-Allow-Credentials&#x27; &#x27;true&#x27;;</span><br><span class="line">			add_header &#x27;Access-Control-Allow-Methods&#x27; &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class="line">			add_header &#x27;Access-Control-Allow-Headers&#x27; &#x27;DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type&#x27;;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意点：</p>
<p>1、https证书参数ssl_certificate、ssl_certificate_key指定的证书和密钥路径一定要匹配。<br>2、nginx实现负载均衡需要stream模块，编译参数一定要有对应模块支持，可以通过以下命令查询是否有对应参数：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21612 sbin]# ./nginx -V</span><br><span class="line">nginx version: nginx/1.18.0</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) </span><br><span class="line">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/usr/local/nginx --user=nginx --group=nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre --with-stream --with-stream_ssl_module --with-stream_realip_module</span><br></pre></td></tr></table></figure>

<p>–with-stream –with-stream_ssl_module 参数表示支持stream流转发。</p>
<p>3、上述nginx实现的https为单向认证，listen参数监听的端口需要带有ssl标识，否则使用MQTTX客户端连接emqx报错：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Error: Client network socket disconnected before secure TLS connection was established</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Emqx</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署emqx集群</title>
    <url>/Emqx/blogs/Docker%E9%83%A8%E7%BD%B2emqx%E9%9B%86%E7%BE%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 27.3.1<br>docker compose: v2.29.7<br>Emqx: 5.7.2</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>线上业务涉及大量推送服务，原本使用的极光推送因为使用限制原因改由mqtt实现。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">photoframe-emqx-node1:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-emqx</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./emqx</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">photoframe-base_photoframe-net:</span></span><br><span class="line">        <span class="attr">aliases:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">docker.emqx.node1</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">EMQX_NODE_NAME:</span> <span class="string">emqxA@docker.emqx.node1</span></span><br><span class="line">      <span class="attr">EMQX_HOST:</span> <span class="string">docker.emqx.node1</span></span><br><span class="line">      <span class="attr">EMQX_LISTEN__ADDRESS:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">      <span class="attr">EMQX_CLUSTER__DISCOVERY_STRATEGY:</span> <span class="string">static</span></span><br><span class="line">      <span class="attr">EMQX_CLUSTER__STATIC__SEEDS:</span> <span class="string">&quot;[emqxA@docker.emqx.node1,emqxB@docker.emqx.node2]&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emqx/emqx01/data:/opt/emqx/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emqx/emqx01/log:/opt/emqx/log</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">node.labels.role==interface</span></span><br><span class="line">  <span class="attr">photoframe-emqx-node2:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-emqx</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./emqx</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">photoframe-base_photoframe-net:</span></span><br><span class="line">        <span class="attr">aliases:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">docker.emqx.node2</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">EMQX_NODE_NAME:</span> <span class="string">emqxB@docker.emqx.node2</span></span><br><span class="line">      <span class="attr">EMQX_HOST:</span> <span class="string">docker.emqx.node2</span></span><br><span class="line">      <span class="attr">EMQX_LISTEN__ADDRESS:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">      <span class="attr">EMQX_CLUSTER__DISCOVERY_STRATEGY:</span> <span class="string">static</span></span><br><span class="line">      <span class="attr">EMQX_CLUSTER__STATIC__SEEDS:</span> <span class="string">&quot;[emqxA@docker.emqx.node1,emqxB@docker.emqx.node2]&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emqx/emqx02/data:/opt/emqx/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./emqx/emqx02/log:/opt/emqx/log</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">photoframe-base_photoframe-net:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>注意点：</p>
<p>1、emqx节点命名格式</p>
<p>​基本格式<br>节点名称必须为 ​<strong>Name@Host</strong>，例如：</p>
<p><a href="mailto:&#x65;&#x6d;&#x71;&#x78;&#x31;&#x40;&#49;&#x39;&#x32;&#x2e;&#49;&#x36;&#x38;&#x2e;&#49;&#x2e;&#49;&#x30;&#48;">&#x65;&#x6d;&#x71;&#x78;&#x31;&#x40;&#49;&#x39;&#x32;&#x2e;&#49;&#x36;&#x38;&#x2e;&#49;&#x2e;&#49;&#x30;&#48;</a><br><a href="mailto:&#x6e;&#111;&#x64;&#101;&#50;&#64;&#x62;&#x72;&#111;&#107;&#x65;&#x72;&#46;&#x65;&#x6d;&#x71;&#120;&#46;&#x69;&#111;">&#x6e;&#111;&#x64;&#101;&#50;&#64;&#x62;&#x72;&#111;&#107;&#x65;&#x72;&#46;&#x65;&#x6d;&#x71;&#120;&#46;&#x69;&#111;</a><br><a href="mailto:&#101;&#109;&#113;&#x78;&#64;&#x31;&#x30;&#46;&#x30;&#x2e;&#x30;&#x2e;&#49;">&#101;&#109;&#113;&#x78;&#64;&#x31;&#x30;&#46;&#x30;&#x2e;&#x30;&#x2e;&#49;</a></p>
<p>​字段说明</p>
<p>​<strong>Name</strong>：用户自定义的节点标识符，需保证集群内唯一。<br>​<strong>Host</strong>：节点的 IP 地址或完全限定域名（FQDN），需满足以下条件：<br>必须为 ​IP 地址​（如 192.168.1.100）或 ​FQDN​（如 emqx.example.com）。<br>不可包含端口号或特殊字符（如 - 需谨慎使用，建议用 _ 替代）。</p>
<p>2、docker swarm模式下如果采用服务名进行通信，节点名称host部分使用服务名会导致集群节点通信失败，并且启动后报错，提示节点名称非法。解决办法是通过aliases参数给服务指定别名。</p>
<p>3、节点名称中的name如果有数字，例如emqx1,这样集群通信端口5369、4370会发生偏移，建议采用emqxA这种命名方式。</p>
]]></content>
      <categories>
        <category>Emqx</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Emqx</tag>
      </tags>
  </entry>
  <entry>
    <title>MapStruct-plus实现JavaBean类型转换</title>
    <url>/MapStruct-plus/blogs/MapStruct-plus%E5%AE%9E%E7%8E%B0JavaBean%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E4%BB%8B%E7%BB%8Dspan"><span id="inline-blue">介绍</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">配置</span></a><ul>
<li><a href="#span-idinline-blue%E4%B8%A4%E4%B8%AA%E7%B1%BB%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2span"><span id="inline-blue">两个类之间的转换</span></a></li>
<li><a href="#span-idinline-blue%E7%B1%BB%E4%B8%8E%E5%A4%9A%E4%B8%AA%E7%B1%BB%E8%BD%AC%E6%8D%A2span"><span id="inline-blue">类与多个类转换</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E8%B0%83%E7%94%A8span"><span id="inline-blue">调用</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>SpringBoot: 2.6.6<br>Java：1.8<br>MapStruct-plus: 1.4.6<br>maven: 3.5.4</p>
<h1><span id="介绍"><span id="inline-blue">介绍</span></span></h1><p>MapStructPlus是MapStruct的增强工具，在MapStruct的基础上实现了自动生成Mapper接口的功能，并且增强了一些功能，使得Java类型转换更加方便、优雅。</p>
<p>与MapStruct一样，它本质上是基于JSR 269的Java注解处理器，因此可以通过Maven、Gradle、Ant等构建触发器。</p>
<p>MapStructPlus 嵌入 MapStruct，与 MapStruct 完全兼容，如果您之前使用过 MapStruct，可以无缝替换依赖项。</p>
<h1><span id="配置"><span id="inline-blue">配置</span></span></h1><p>pom.xml引入相关依赖和插件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapstruct-plus.version</span>&gt;</span>1.4.6<span class="tag">&lt;/<span class="name">mapstruct-plus.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">lombok-mapstruct-binding.version</span>&gt;</span>0.2.0<span class="tag">&lt;/<span class="name">lombok-mapstruct-binding.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	 <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.linpeilie<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct-plus-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mapstruct-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-compiler-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">source</span>&gt;</span>$&#123;java.version&#125;<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">target</span>&gt;</span>$&#123;java.version&#125;<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>$&#123;project.build.sourceEncoding&#125;<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.linpeilie<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct-plus-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mapstruct-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 将 Lombok 注解和 MapStruct 的映射注解进行绑定，使它们能够协同工作 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">path</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok-mapstruct-binding<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok-mapstruct-binding.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">annotationProcessorPaths</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="两个类之间的转换"><span id="inline-blue">两个类之间的转换</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoMapper(target = CarDto.class,nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE表示在source转换为target的过程中，如果source属性为空所执行的属性替换的策略，NullValuePropertyMappingStrategy.IGNORE带包忽略</p>
<h2><span id="类与多个类转换"><span id="inline-blue">类与多个类转换</span></span></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AutoMappers(&#123;</span></span><br><span class="line"><span class="meta">    @AutoMapper(target = DeviceSlideConfig.class),</span></span><br><span class="line"><span class="meta">    @AutoMapper(target = DeviceSlideConfigVO.class)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeviceSlideConfig</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">	<span class="meta">@AutoMapping(targetClass = DeviceSlideConfig.class, target = &quot;id&quot;,ignore = true)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置指定类转换的规则:</p>
<p>在配置多个类转换的时候，同一个属性对于不同的类有不同的转换规则。<br>为了解决这个问题，可以首先使用注解指定多条转换规则@AutoMappings，并在使用@AutoMapping注解时配置targetClass属性为当前规则指定应用目标转换类。<br>如果配置注解targetClass时没有指定@AutoMapping，则当前规则适用于所有的类转换。</p>
<h1><span id="调用"><span id="inline-blue">调用</span></span></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> io.github.linpeilie.Converter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Converter converter;</span><br><span class="line"></span><br><span class="line">converter.convert(deviceNoticeConfig,dbRecord);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>官网：<a href="https://www.mapstruct.plus/en/introduction/about.html">https://www.mapstruct.plus/en/introduction/about.html</a></p>
]]></content>
      <categories>
        <category>MapStruct-plus</category>
      </categories>
      <tags>
        <tag>MapStruct-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>mayfly-go登录提示database is locked(SQLITE_BUSY)</title>
    <url>/Mayfly-go/blogs/mayfly-go%E7%99%BB%E5%BD%95%E6%8F%90%E7%A4%BAdatabase%20is%20locked(SQLITE_BUSY)/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a><ul>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9sqlite%E6%A8%A1%E5%BC%8Fspan"><span id="inline-blue">修改sqlite模式</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E6%9F%A5%E8%AF%A2%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4span"><span id="inline-blue">添加查询超时时间</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux: centos7.9<br>mayfly-go: 1.9.3</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>mayfly-go登录提示database is locked(SQLITE_BUSY)</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>sqlite只支持库级锁，当多线程并发访问sqlite导致触发锁定。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><h2><span id="修改sqlite模式"><span id="inline-blue">修改sqlite模式</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打开指定sqlite数据库文件</span></span><br><span class="line">sqlite3 mayfly-go.sqlite3</span><br><span class="line"><span class="meta">#</span><span class="bash">查看数据库信息</span></span><br><span class="line">.databases</span><br><span class="line"><span class="meta">#</span><span class="bash">查看当前模式</span></span><br><span class="line">PRAGMA journal_mode;</span><br><span class="line"><span class="meta">#</span><span class="bash">变更模式</span></span><br><span class="line">PRAGMA journal_mode=WAL;</span><br></pre></td></tr></table></figure>
<p>sqlite WAL:<br>WAL 的全称是 Write Ahead Logging（预写日志），它是很多数据库中用于实现原子事务的一种机制。SQLite 在 3.7.0 版本引入该特性，在此之前 SQLite 实现原子提交和回滚的方法是 rollback journal（回滚日志）。</p>
<p>优点：<br>1、读操作不会阻塞写操作，同时写操作也不会阻塞读操作。这是并发管理的“黄金准则”。<br>2、在大多数操作场景中，与回滚日志相比，WAL 相当快。<br>3、磁盘 I/O 变得更可预见，更少的 fsync 系统调用，因为所有的 WAL 写操作是线性写入日志文件，很多 I/O 变的连续并能够按计划执行。</p>
<p>缺点：<br>1、所有的处理被绑定到单个主机上。也就是说，不能再如 NFS 这样的网络文件系统上使用 WAL。<br>2、为满足 WAL 和相关共享内存的需要，使用 WAL 引入了里两个额外的半持久性文件-wal 和-shm。对于那些使用SQLite 数据库作为应用程序文件格式是不具有吸引力的。这也影响了只读环境，因为-shm文件必须是可写的，并且/或数据库所在目录也必须是可写的。<br>3、对于非常大的事务，WAL 的性能将会降低。虽然 WAL 是一个高性能选项，但是非常大或运行时间非常长的事务会引入额外的开销。</p>
<h2><span id="添加查询超时时间"><span id="inline-blue">添加查询超时时间</span></span></h2><p>修改busy_timeout参数为5000毫秒,该参数设置了等待其他进程或线程释放数据库锁的时间，单位为毫秒。如果在指定的时间内锁定依然无法释放，则会继续报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sqlite3 mayfly-go.sqlite3</span><br><span class="line"><span class="meta">sqlite&gt;</span><span class="bash">PRAGMA busy_timeout;</span></span><br><span class="line"><span class="meta">sqlite&gt;</span><span class="bash">PRAGMA busy_timeout=5000;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Mayfly-go</category>
      </categories>
      <tags>
        <tag>Sqlite</tag>
        <tag>Mayfly-go</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot3升级记录</title>
    <url>/SpringBoot/blogs/SpringBoot3%E5%8D%87%E7%BA%A7%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E4%BE%9D%E8%B5%96%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98span"><span id="inline-blue">依赖报错问题</span></a><ul>
<li><a href="#span-idinline-bluemysqlspan"><span id="inline-blue">MySQL</span></a></li>
<li><a href="#span-idinline-bluemybatis-plusspan"><span id="inline-blue">Mybatis-plus</span></a></li>
<li><a href="#span-idinline-bluejakarta-eespan"><span id="inline-blue">Jakarta EE</span></a></li>
<li><a href="#span-idinline-blueredisspan"><span id="inline-blue">Redis</span></a></li>
<li><a href="#span-idinline-blueelasticsearchspan"><span id="inline-blue">Elasticsearch</span></a></li>
<li><a href="#span-idinline-blueautoconfigurationspan"><span id="inline-blue">AutoConfiguration</span></a></li>
<li><a href="#span-idinline-blue%E5%8D%87%E7%BA%A7%E5%90%8E%E6%A8%A1%E5%9D%97%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98span"><span id="inline-blue">升级后模块启动报错问题</span></a><ul>
<li><a href="#span-idinline-bluespringdocspan"><span id="inline-blue">springdoc</span></a></li>
<li><a href="#span-idinline-bluezipkin%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99span"><span id="inline-blue">zipkin启动报错</span></a></li>
<li><a href="#span-idinline-bluenacos%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A8%E6%80%81%E5%88%B7%E6%96%B0%E5%A4%B1%E8%B4%A5span"><span id="inline-blue">nacos配置文件动态刷新失败</span></a></li>
<li><a href="#span-idinline-bluelogback%E5%8A%A0%E8%BD%BD%E6%8A%A5%E9%94%99span"><span id="inline-blue">logback加载报错</span></a></li>
<li><a href="#span-idinline-blue%E5%BA%8F%E5%88%97%E5%8C%96%E6%8A%A5%E9%94%99span"><span id="inline-blue">序列化报错</span></a></li>
<li><a href="#span-idinline-blue%E7%99%BB%E5%BD%95%E6%8A%A5%E9%94%99span"><span id="inline-blue">登录报错</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%8F%82%E8%80%83span"><span id="inline-blue">参考</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目微服务redisson bug需要进行升级，redisson版本需要升级到3.40.1，但升级的同时springBoot、spring、springCloud、java版本都需要进行升级，如下是升级前后对比：</p>
<table>
<thead>
<tr>
<th align="center">依赖项</th>
<th align="center">升级前版本</th>
<th align="center">升级后版本</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SpringBoot</td>
<td align="center">2.6.6</td>
<td align="center">3.4.1</td>
<td align="center">直接更新到最新版本</td>
</tr>
<tr>
<td align="center">SpringCloud</td>
<td align="center">2021.0.6</td>
<td align="center">2024.0.0</td>
<td align="center">对应SpringBoot3.4.1</td>
</tr>
<tr>
<td align="center">spring-security</td>
<td align="center">5.6.2</td>
<td align="center">6.4.2</td>
<td align="center">对应SpringBoot3.4.1</td>
</tr>
<tr>
<td align="center">spring</td>
<td align="center">5.3.18</td>
<td align="center">6.2.1</td>
<td align="center">对应SpringBoot3.4.1</td>
</tr>
<tr>
<td align="center">spring</td>
<td align="center">5.3.18</td>
<td align="center">6.2.1</td>
<td align="center">对应SpringBoot3.4.1</td>
</tr>
<tr>
<td align="center">spring-security-oauth2</td>
<td align="center">2.5.2.RELEASE</td>
<td align="center">spring-security-oauth2-authorization-server-1.4.1</td>
<td align="center">SpringBoot3版本之后oauth2.0被替换为spring-security-oauth2-authorization-server</td>
</tr>
<tr>
<td align="center">Mybatis-Plus</td>
<td align="center">3.5.3</td>
<td align="center">3.5.9</td>
<td align="center">artifactId 从mybatis-plus-boot-starter改成了mybatis-plus-spring-boot3-starter</td>
</tr>
<tr>
<td align="center">springcloud-alibaba</td>
<td align="center">2021.0.6.0</td>
<td align="center">2023.0.3.2</td>
<td align="center">对应SpringCloud版本2024.0.0</td>
</tr>
<tr>
<td align="center">java</td>
<td align="center">1.8</td>
<td align="center">21</td>
<td align="center">对应SpringBoot版本3.4.1</td>
</tr>
</tbody></table>
<h1><span id="依赖报错问题"><span id="inline-blue">依赖报错问题</span></span></h1><h2><span id="mysql"><span id="inline-blue">MySQL</span></span></h2><p><img src="/images/SpringBoot/20250228/SpringBoot_20250228_001.png" alt="MySQL依赖迁移"><br>mysql maven依赖坐标由com.mysql:mysql-connector-java更新为mysql:mysql-connector-j</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="mybatis-plus"><span id="inline-blue">Mybatis-plus</span></span></h2><p>Mybatis-plus升级到3.5.9版本后，MybatisPlusInterceptor代码爆红，提示类缺失，查了之后发现3.5.9之后MybatisPlusInterceptor被拆分到mybatis-plus-jsqlparser依赖里面，添加如下依赖：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="jakarta-ee"><span id="inline-blue">Jakarta EE</span></span></h2><p><img src="/images/SpringBoot/20250228/SpringBoot_20250228_002.png" alt="Jakarta EE依赖迁移"></p>
<p>maven依赖坐标javax.servlet:javax.servlet-api更新为jakarta.servlet:jakarta.servlet-api，并且包名还进行了更新，所有javax.xxx.xxx都需要批量更改为jakarta.xxx.xxx<br>更新之后的maven坐标如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="redis"><span id="inline-blue">Redis</span></span></h2><p><img src="/images/SpringBoot/20250228/SpringBoot_20250228_003.png" alt="redis配置迁移"></p>
<p>更新后的配置如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">redisson:</span></span><br><span class="line">  <span class="attr">keyPrefix:</span></span><br><span class="line">  <span class="attr">nettyThreads:</span> <span class="number">8</span></span><br><span class="line">  <span class="attr">singleServerConfig:</span></span><br><span class="line">    <span class="attr">clientName:</span> <span class="string">redissonSingleClient</span></span><br><span class="line">    <span class="attr">connectionMinimumIdleSize:</span> <span class="number">8</span></span><br><span class="line">    <span class="attr">connectionPoolSize:</span> <span class="number">32</span></span><br><span class="line">    <span class="attr">idleConnectionTimeout:</span> <span class="number">10000</span></span><br><span class="line">    <span class="attr">subscriptionConnectionPoolSize:</span> <span class="number">50</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">threads:</span> <span class="number">4</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">database:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">10.9</span><span class="number">.216</span><span class="number">.12</span></span><br><span class="line">      <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">ssl:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br></pre></td></tr></table></figure>

<h2><span id="elasticsearch"><span id="inline-blue">Elasticsearch</span></span></h2><p><img src="/images/SpringBoot/20250228/SpringBoot_20250228_004.png" alt="Elasticsearch迁移"></p>
<p>SpringBoot3默认使用的Elasticsearch版本为8.8.0,和项目里面使用的版本没有差异，只是java 客户端升级为8.15.5，保持和springBoot 预定义依赖版本一致</p>
<p>更新后的配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.15.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="autoconfiguration"><span id="inline-blue">AutoConfiguration</span></span></h2><p>SpringBoot2.7时已经提出使用META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports 代替 spring.factories</p>
<p><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#changes-to-auto-configuration">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#changes-to-auto-configuration</a></p>
<h2><span id="升级后模块启动报错问题"><span id="inline-blue">升级后模块启动报错问题</span></span></h2><h3><span id="springdoc"><span id="inline-blue">springdoc</span></span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@4d065e1a testClass &#x3D; cofee.controller.CrewMemberControllerTest, locations &#x3D; [], classes &#x3D; [cofee.CofeeApplication], contextInitializerClasses &#x3D; [], activeProfiles &#x3D; [&quot;junit&quot;, &quot;cdsmock&quot;], propertySourceDescriptors &#x3D; [], propertySourceProperties &#x3D; [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper&#x3D;true&quot;, &quot;server.port&#x3D;0&quot;], contextCustomizers &#x3D; [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1a245833, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@5b799640, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@194fad1, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@790da477, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@55de24cc, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@69c81773, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@5c86a017, org.springframework.boot.test.context.SpringBootTestAnnotation@6e5c6e5c], resourceBasePath &#x3D; &quot;src&#x2F;main&#x2F;webapp&quot;, contextLoader &#x3D; org.springframework.boot.test.context.SpringBootContextLoader, parent &#x3D; null]</span><br><span class="line">    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)</span><br><span class="line">    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)</span><br><span class="line">    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142)</span><br><span class="line">    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98)</span><br><span class="line">    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)</span><br><span class="line">    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)</span><br><span class="line">    at java.base&#x2F;java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)</span><br><span class="line">    at java.base&#x2F;java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)</span><br><span class="line">    at java.base&#x2F;java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)</span><br><span class="line">    at java.base&#x2F;java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)</span><br><span class="line">    at java.base&#x2F;java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)</span><br><span class="line">    at java.base&#x2F;java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)</span><br><span class="line">    at java.base&#x2F;java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)</span><br><span class="line">    at java.base&#x2F;java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)</span><br><span class="line">    at java.base&#x2F;java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)</span><br><span class="line">    at java.base&#x2F;java.util.Optional.orElseGet(Optional.java:364)</span><br><span class="line">    at java.base&#x2F;java.util.ArrayList.forEach(ArrayList.java:1596)</span><br><span class="line">    at java.base&#x2F;java.util.ArrayList.forEach(ArrayList.java:1596)</span><br><span class="line">Caused by: java.lang.IllegalStateException: Error processing condition on org.springdoc.webmvc.ui.SwaggerConfig.springWebProvider</span><br><span class="line">    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:60)</span><br><span class="line">    at org.springframework.context.annotation.ConditionEvaluator.shouldSkip(ConditionEvaluator.java:108)</span><br><span class="line">    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForBeanMethod(ConfigurationClassBeanDefinitionReader.java:183)</span><br><span class="line">    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:144)</span><br><span class="line">    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)</span><br><span class="line">    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:429)</span><br><span class="line">    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:290)</span><br><span class="line">    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)</span><br><span class="line">    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)</span><br><span class="line">    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:789)</span><br><span class="line">    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:607)</span><br><span class="line">    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)</span><br><span class="line">    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)</span><br><span class="line">    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)</span><br><span class="line">    at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)</span><br><span class="line">    at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)</span><br><span class="line">    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)</span><br><span class="line">    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)</span><br><span class="line">    at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)</span><br><span class="line">    at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)</span><br><span class="line">    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)</span><br><span class="line">    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)</span><br><span class="line">    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)</span><br><span class="line">    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)</span><br><span class="line">    ... 17 more</span><br><span class="line">Caused by: java.lang.IllegalStateException: Failed to introspect Class [org.springdoc.webmvc.ui.SwaggerConfig] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@639fee48]</span><br><span class="line">    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)</span><br><span class="line">    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:360)</span><br><span class="line">    at org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:417)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.lambda$getTypeForFactoryMethod$1(AbstractAutowireCapableBeanFactory.java:750)</span><br><span class="line">    at java.base&#x2F;java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:749)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:682)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:653)</span><br><span class="line">    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1687)</span><br><span class="line">    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:562)</span><br><span class="line">    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:534)</span><br><span class="line">    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.collectBeanNamesForType(OnBeanCondition.java:247)</span><br><span class="line">    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getBeanNamesForType(OnBeanCondition.java:240)</span><br><span class="line">    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getBeanNamesForType(OnBeanCondition.java:230)</span><br><span class="line">    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchingBeans(OnBeanCondition.java:183)</span><br><span class="line">    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchOutcome(OnBeanCondition.java:158)</span><br><span class="line">    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:47)</span><br><span class="line">    ... 40 more</span><br><span class="line">Caused by: java.lang.NoClassDefFoundError: org&#x2F;springframework&#x2F;web&#x2F;servlet&#x2F;resource&#x2F;LiteWebJarsResourceResolver</span><br><span class="line">    at java.base&#x2F;java.lang.ClassLoader.defineClass1(Native Method)</span><br><span class="line">    at java.base&#x2F;java.lang.ClassLoader.defineClass(ClassLoader.java:1027)</span><br><span class="line">    at java.base&#x2F;java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)</span><br><span class="line">    at java.base&#x2F;java.lang.ClassLoader.loadClass(ClassLoader.java:526)</span><br><span class="line">    at java.base&#x2F;java.lang.Class.getDeclaredMethods0(Native Method)</span><br><span class="line">    at java.base&#x2F;java.lang.Class.privateGetDeclaredMethods(Class.java:3578)</span><br><span class="line">    at java.base&#x2F;java.lang.Class.getDeclaredMethods(Class.java:2676)</span><br><span class="line">    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)</span><br><span class="line">    ... 56 more</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: org.springframework.web.servlet.resource.LiteWebJarsResourceResolver</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)</span><br><span class="line">    at java.base&#x2F;jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)</span><br><span class="line">    at java.base&#x2F;java.lang.ClassLoader.loadClass(ClassLoader.java:526)</span><br><span class="line">    ... 69 more</span><br></pre></td></tr></table></figure>

<p>问题原因是spring版本升级到6.2.1之后对应的springdoc版本也要进行升级，否则不兼容，以下是版本对应：</p>
<p><img src="/images/SpringBoot/20250228/SpringBoot_20250228_005.png" alt="springdoc兼容问题"></p>
<h3><span id="zipkin启动报错"><span id="inline-blue">zipkin启动报错</span></span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Caused by: java.lang.NoClassDefFoundError: zipkin2&#x2F;codec&#x2F;BytesEncoder</span><br><span class="line">	at java.base&#x2F;java.lang.Class.getDeclaredMethods0(Native Method)</span><br><span class="line">	at java.base&#x2F;java.lang.Class.privateGetDeclaredMethods(Class.java:3578)</span><br><span class="line">	at java.base&#x2F;java.lang.Class.getDeclaredMethods(Class.java:2676)</span><br><span class="line">	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)</span><br><span class="line">	... 37 more</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: zipkin2.codec.BytesEncoder</span><br><span class="line">	at java.base&#x2F;java.net.URLClassLoader.findClass(URLClassLoader.java:445)</span><br><span class="line">	at java.base&#x2F;java.lang.ClassLoader.loadClass(ClassLoader.java:593)</span><br><span class="line">	at org.springframework.boot.loader.net.protocol.jar.JarUrlClassLoader.loadClass(JarUrlClassLoader.java:104)</span><br><span class="line">	at org.springframework.boot.loader.launch.LaunchedClassLoader.loadClass(LaunchedClassLoader.java:91)</span><br><span class="line">	at java.base&#x2F;java.lang.ClassLoader.loadClass(ClassLoader.java:526)</span><br><span class="line">	... 41 more</span><br></pre></td></tr></table></figure>

<p>问题原因是SpringCloud放弃了sleuth，转而使用zipkin+opentracing实现链路追踪，zipkin-reporter-brave依赖的版本需要升级到3.4.3</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">micrometer-tracing.version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">micrometer-tracing.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">micrometer-observation.version</span>&gt;</span>1.14.2<span class="tag">&lt;/<span class="name">micrometer-observation.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feign-micrometer.version</span>&gt;</span>13.5<span class="tag">&lt;/<span class="name">feign-micrometer.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">zipkin-reporter-brave.version</span>&gt;</span>3.4.3<span class="tag">&lt;/<span class="name">zipkin-reporter-brave.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--micrometer-tracing-bom导入链路追踪版本中心  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.micrometer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>micrometer-tracing-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;micrometer-tracing.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--micrometer-tracing指标追踪  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.micrometer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>micrometer-tracing<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;micrometer-tracing.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--micrometer-tracing-bridge-brave适配zipkin的桥接包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.micrometer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>micrometer-tracing-bridge-brave<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;micrometer-tracing.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--micrometer-observation --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.micrometer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>micrometer-observation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;micrometer-observation.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--feign-micrometer --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-micrometer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;feign-micrometer.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--zipkin-reporter-brave --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.zipkin.reporter2<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zipkin-reporter-brave<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;zipkin-reporter-brave.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3><span id="nacos配置文件动态刷新失败"><span id="inline-blue">nacos配置文件动态刷新失败</span></span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalArgumentException: ExistingValue must be an instance of com.zaxxer.hikari.HikariDataSource</span><br><span class="line">	at org.springframework.util.Assert.isTrue(Assert.java:139) ~[spring-core-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.boot.context.properties.bind.Bindable.withExistingValue(Bindable.java:182) ~[spring-boot-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.boot.context.properties.ConfigurationPropertiesBean.create(ConfigurationPropertiesBean.java:268) ~[spring-boot-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.boot.context.properties.ConfigurationPropertiesBean.get(ConfigurationPropertiesBean.java:201) ~[spring-boot-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.postProcessBeforeInitialization(ConfigurationPropertiesBindingPostProcessor.java:78) ~[spring-boot-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:440) ~[spring-beans-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1796) ~[spring-beans-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:431) ~[spring-beans-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.cloud.context.properties.ConfigurationPropertiesRebinder.rebind(ConfigurationPropertiesRebinder.java:105) ~[spring-cloud-context-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.springframework.cloud.context.properties.ConfigurationPropertiesRebinder.rebind(ConfigurationPropertiesRebinder.java:83) ~[spring-cloud-context-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.springframework.cloud.context.properties.ConfigurationPropertiesRebinder.onApplicationEvent(ConfigurationPropertiesRebinder.java:138) ~[spring-cloud-context-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.springframework.cloud.context.properties.ConfigurationPropertiesRebinder.onApplicationEvent(ConfigurationPropertiesRebinder.java:51) ~[spring-cloud-context-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176) ~[spring-context-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169) ~[spring-context-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:421) ~[spring-context-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:378) ~[spring-context-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.cloud.context.environment.EnvironmentManager.publish(EnvironmentManager.java:104) ~[spring-cloud-context-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.springframework.cloud.context.environment.EnvironmentManager.setProperty(EnvironmentManager.java:92) ~[spring-cloud-context-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.springframework.cloud.context.environment.WritableEnvironmentEndpointWebExtension.write(WritableEnvironmentEndpointWebExtension.java:47) ~[spring-cloud-context-3.1.0.jar:3.1.0]</span><br><span class="line">	at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]</span><br><span class="line">	at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]</span><br><span class="line">	at java.base&#x2F;jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]</span><br><span class="line">	at java.base&#x2F;java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]</span><br><span class="line">	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282) ~[spring-core-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:74) ~[spring-boot-actuator-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60) ~[spring-boot-actuator-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$ServletWebOperationAdapter.handle(AbstractWebMvcEndpointHandlerMapping.java:336) ~[spring-boot-actuator-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(AbstractWebMvcEndpointHandlerMapping.java:421) ~[spring-boot-actuator-2.6.2.jar:2.6.2]</span><br><span class="line">	at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]</span><br><span class="line">	at java.base&#x2F;jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]</span><br><span class="line">	at java.base&#x2F;jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]</span><br><span class="line">	at java.base&#x2F;java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]</span><br><span class="line">	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]</span><br><span class="line">	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.14.jar:5.3.14]</span><br><span class="line">	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.56.jar:4.0.FR]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.springframework.cloud.sleuth.instrument.web.servlet.TracingFilter.doFilter(TracingFilter.java:68) ~[spring-cloud-sleuth-instrumentation-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.springframework.cloud.sleuth.autoconfig.instrument.web.TraceWebServletConfiguration$LazyTracingFilter.doFilter(TraceWebServletConfiguration.java:129) ~[spring-cloud-sleuth-autoconfigure-3.1.0.jar:3.1.0]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.6.2.jar:2.6.2]</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.14.jar:5.3.14]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]</span><br><span class="line">	at org.springframework.cloud.sleuth.instrument.web.tomcat.TraceValve.invoke(TraceValve.java:74) ~[spring-cloud-sleuth-instrumentation-3.1.0.jar:3.1.0]</span><br></pre></td></tr></table></figure>

<p>问题原因是因为模块添加了SQL监控组件依赖p6spy,对数据源HikariDataSource进行了封装，导致配置刷新的时候HikariDataSource类和初始加载不一致，导致异常，去掉对应的依赖即可<br>另外如果使用sleuth也有可能存在同样的问题。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.gavlyukovskiy<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>p6spy-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;p6spy.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3><span id="logback加载报错"><span id="inline-blue">logback加载报错</span></span></h3><p>报错信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: </span><br><span class="line">ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [timeBasedFileNamingAndTriggeringPolicy] of type [ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP] java.lang.ClassNotFoundException: ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP</span><br><span class="line">ERROR in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Filename pattern [&#x2F;logs&#x2F;app&#x2F;%d&#123;yyyy-MM-dd&#125;.%i.log] contains an integer token converter, i.e. %i, INCOMPATIBLE with this configuration. Remove it.</span><br></pre></td></tr></table></figure>
<p>logback底层已经把这个弃用类TimeBasedRollingPolicy删除了,配置文件修改成如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">&quot;true&quot;</span> <span class="attr">scanPeriod</span>=<span class="string">&quot;10 seconds&quot;</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!--日志格式应用spring boot默认的格式，也可以自己更改--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">&quot;org/springframework/boot/logging/logback/defaults.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;FILE_LOG_PATTERN&quot;</span> <span class="attr">value</span>=<span class="string">&quot;[%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;] [%-5level] [%thread] [%logger&#123;50&#125;] [%M] [%line] - %msg%n&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">&quot;context&quot;</span> <span class="attr">name</span>=<span class="string">&quot;spring.application.name&quot;</span> <span class="attr">source</span>=<span class="string">&quot;spring.application.name&quot;</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--定义日志存放的位置，默认存放在项目启动的相对路径的目录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">&quot;context&quot;</span> <span class="attr">name</span>=<span class="string">&quot;LOG_PATH&quot;</span> <span class="attr">source</span>=<span class="string">&quot;logging.file.path&quot;</span> <span class="attr">defaultValue</span>=<span class="string">&quot;./logs/$&#123;spring.application.name&#125;&quot;</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--定义日志级别，默认INFO --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">&quot;context&quot;</span> <span class="attr">name</span>=<span class="string">&quot;LOG_LEVEL&quot;</span> <span class="attr">source</span>=<span class="string">&quot;logging.level.root&quot;</span> <span class="attr">defaultValue</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 控制台输出 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志记录器，日期滚动记录，level为 ERROR 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_ERROR&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/log_error.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 归档的日志文件的路径，%d&#123;yyyy-MM-dd&#125;指定日期格式，%i指定索引 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/error/%d&#123;yyyy-MM-dd,aux&#125;/log-error-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志最大的历史7天--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>7<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志文件的最大大小 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 总日志文件大小不超过3GB --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">totalSizeCap</span>&gt;</span>3GB<span class="tag">&lt;/<span class="name">totalSizeCap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 追加方式记录日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件的格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录error级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>error<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志记录器，日期滚动记录，level为 INFO 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_INFO&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/log_info.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 归档的日志文件的路径，%d&#123;yyyy-MM-dd&#125;指定日期格式，%i指定索引 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/info/%d&#123;yyyy-MM-dd,aux&#125;/log-info-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志最大的历史7天--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>7<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志文件的最大大小 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 总日志文件大小不超过3GB --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">totalSizeCap</span>&gt;</span>3GB<span class="tag">&lt;/<span class="name">totalSizeCap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 追加方式记录日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件的格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录info级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>info<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志记录器，日期滚动记录，level为 WARN 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_WARN&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/log_warn.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 归档的日志文件的路径，%d&#123;yyyy-MM-dd&#125;指定日期格式，%i指定索引 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/warn/%d&#123;yyyy-MM-dd,aux&#125;/log-warn-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志最大的历史7天，表示最多保留7天的日志文件--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>7<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志文件的最大大小 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 总日志文件大小不超过3GB --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">totalSizeCap</span>&gt;</span>3GB<span class="tag">&lt;/<span class="name">totalSizeCap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 追加方式记录日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件的格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录warn级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>warn<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志记录器，日期滚动记录，level为 DEBUG 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_DEBUG&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/log_debug.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 归档的日志文件的路径，%d&#123;yyyy-MM-dd&#125;指定日期格式，%i指定索引 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/debug/%d&#123;yyyy-MM-dd,aux&#125;/log-debug-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志最大的历史7天--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>7<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志文件的最大大小 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 总日志文件大小不超过3GB --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">totalSizeCap</span>&gt;</span>3GB<span class="tag">&lt;/<span class="name">totalSizeCap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 追加方式记录日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件的格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录debug级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>debug<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志记录器，日期滚动记录，所有日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_ALL&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/log_total.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 归档的日志文件的路径，%d&#123;yyyy-MM-dd&#125;指定日期格式，%i指定索引 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/total/%d&#123;yyyy-MM-dd,aux&#125;/log-total-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志最大的历史7天--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>7<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志文件的最大大小 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 总日志文件大小不超过3GB --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">totalSizeCap</span>&gt;</span>3GB<span class="tag">&lt;/<span class="name">totalSizeCap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 追加方式记录日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件的格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志记录器，日期滚动记录，level 根据配置动态输出日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE_RELEASE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/log_release.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 归档的日志文件的路径，%d&#123;yyyy-MM-dd&#125;指定日期格式，%i指定索引 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/release/%d&#123;yyyy-MM-dd,aux&#125;/log-warn-%d&#123;yyyy-MM-dd&#125;-%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志最大的历史7天--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>7<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志文件的最大大小 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 总日志文件大小不超过3GB --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">totalSizeCap</span>&gt;</span>3GB<span class="tag">&lt;/<span class="name">totalSizeCap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 追加方式记录日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">append</span>&gt;</span>true<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件的格式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录warn级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>$&#123;LOG_LEVEL&#125;<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--生产环境:输出到文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;$&#123;LOG_LEVEL&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_ERROR&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_INFO&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_WARN&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_DEBUG&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE_ALL&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    取消logback启动日志信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">statusListener</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.status.NopStatusListener&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>application.yml增加下面的配置：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"> <span class="attr">config:</span> <span class="string">http://$&#123;spring.cloud.nacos.config.server-addr&#125;/nacos/v1/cs/configs?group=$&#123;spring.cloud.nacos.config.group&#125;&amp;tenant=$&#123;spring.cloud.nacos.config.namespace&#125;&amp;username=$&#123;spring.cloud.nacos.discovery.username&#125;&amp;password=$&#123;spring.cloud.nacos.discovery.password&#125;&amp;dataId=logback-spring.xml</span></span><br><span class="line"> <span class="attr">file:</span></span><br><span class="line">   <span class="attr">path:</span> <span class="string">./logs/$&#123;spring.application.name&#125;</span></span><br><span class="line"> <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">INFO</span></span><br></pre></td></tr></table></figure>

<h3><span id="序列化报错"><span id="inline-blue">序列化报错</span></span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Caused by: com.fasterxml.jackson.databind.JsonMappingException:</span><br><span class="line">Unexpected token (START_OBJECT), expected START_ARRAY:</span><br><span class="line">need JSON Array to contain As.WRAPPER_ARRAY type information for class java.lang.Object</span><br></pre></td></tr></table></figure>
<p>原因是因为升级前redis里面存储的数据没有清除，导致反序列化时报错，redis清掉数据再重启就好了。</p>
<h3><span id="登录报错"><span id="inline-blue">登录报错</span></span></h3><p>错误信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Given that there is no default password encoder configured, each password must have a password encoding prefix. Please either prefix this password with &#39;&#123;noop&#125;&#39; or set a default password encoder in &#96;DelegatingPasswordEncoder&#96;.] </span><br></pre></td></tr></table></figure>
<p>因为升级之后使用的DelegatingPasswordEncoder代理密码加密，需要添加前缀表明加密类型，未升级前的密码都没有密码前缀导致不能正确识别。</p>
<p>解决办法： </p>
<p>之前的密码加密使用的加密类型是bcrypt,所以只需要更新密码添加对应的前缀即可。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">update sys_user <span class="keyword">set</span> password <span class="operator">=</span> concat(<span class="string">&#x27;&#123;bcrypt&#125;&#x27;</span>,password);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2><span id="参考"><span id="inline-blue">参考</span></span></h2><p><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide</a></p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker Harbor配置自定义安全证书</title>
    <url>/Docker/blogs/Docker%20Harbor%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E5%85%A8%E8%AF%81%E4%B9%A6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%87%AA%E5%AE%9A%E4%B9%89https%E8%AF%81%E4%B9%A6span"><span id="inline-blue">自定义https证书</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: CentOS Linux release 7.7.1908 (Core)<br>Docker：26.1.4<br>Docker compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>线上Docker环境部署容器，在portainer容器可视化管理工具的支持下，部署方便了很多，但镜像不想暴露到公网环境上，于是部署了Harbor私有镜像仓库，但安全传输成了大问题，以下通过生成自签名证书实现harbor安全访问。</p>
<h1><span id="自定义https证书"><span id="inline-blue">自定义https证书</span></span></h1><p>创建自动生成https脚本gen-TLS.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/harbor</span><br><span class="line">vim gen-TLS.sh</span><br></pre></td></tr></table></figure>
<p>gen-TLS.sh内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在该目录下操作生成证书，正好供harbor.yml使用</span></span><br><span class="line">mkdir -p /usr/local/harbor/https</span><br><span class="line">cd /usr/local/harbor/https</span><br><span class="line"></span><br><span class="line">openssl genrsa -out ca.key 4096</span><br><span class="line">openssl req -x509 -new -nodes -sha512 -days 3650 -subj &quot;/C=CN/ST=HuBei/L=HuBei/O=example/OU=Personal/CN=coship.harbor.com&quot; -key ca.key -out ca.crt</span><br><span class="line">openssl genrsa -out coship.harbor.com.key 4096</span><br><span class="line">openssl req -sha512 -new -subj &quot;/C=CN/ST=HuBei/L=HuBei/O=example/OU=Personal/CN=coship.harbor.com&quot; -key coship.harbor.com.key -out coship.harbor.com.csr</span><br><span class="line"></span><br><span class="line">cat &gt; v3.ext &lt;&lt;-EOF</span><br><span class="line">authorityKeyIdentifier=keyid,issuer</span><br><span class="line">basicConstraints=CA:FALSE</span><br><span class="line">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br><span class="line">extendedKeyUsage = serverAuth</span><br><span class="line">subjectAltName = @alt_names</span><br><span class="line"></span><br><span class="line">[alt_names]</span><br><span class="line">DNS.1=coship.harbor.com</span><br><span class="line">DNS.2=harbor</span><br><span class="line">DNS.3=ks-allinone</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">openssl x509 -req -sha512 -days 3650 -extfile v3.ext -CA ca.crt -CAkey ca.key -CAcreateserial -in coship.harbor.com.csr -out coship.harbor.com.crt</span><br><span class="line">    </span><br><span class="line">openssl x509 -inform PEM -in coship.harbor.com.crt -out coship.harbor.com.cert</span><br><span class="line"></span><br><span class="line">cp coship.harbor.com.crt /etc/pki/ca-trust/source/anchors/coship.harbor.com.crt </span><br><span class="line"></span><br><span class="line">update-ca-trust</span><br></pre></td></tr></table></figure>

<p>coship.harbor.com域名对应harbor.yml配置文件内hostname属性，因为是自签名证书，harbor所在服务器需要配置harbor服务的域名解析</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &quot;10.9.216.14 coship.harbor.com&quot; &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure>

<p>后续不管是windows端访问harbor管理页面，还是linux端推送和拉取镜像，都需要配置在各自的域名解析服务里面配置上harbor的ip和域名的映射关系。<br>windows端配置方法:<br>修改hosts文件，文件路径：C:\Windows\System32\drivers\etc\hosts，添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">10.9.216.14 coship.harbor.com</span><br></pre></td></tr></table></figure>

<p>进入harbor所在主目录，创建证书存放路径https</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/harbor</span><br><span class="line">mkdir https</span><br></pre></td></tr></table></figure>

<p>修改harbor.yml配置文件中证书配置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> https related config</span></span><br><span class="line">https:</span><br><span class="line"><span class="meta">  #</span><span class="bash"> https port <span class="keyword">for</span> harbor, default is 443</span></span><br><span class="line">  port: 443</span><br><span class="line"><span class="meta">  #</span><span class="bash"> The path of cert and key files <span class="keyword">for</span> nginx</span></span><br><span class="line">  certificate: /usr/local/harbor/https/coship.harbor.com.crt</span><br><span class="line">  private_key: /usr/local/harbor/https/coship.harbor.com.key</span><br><span class="line"><span class="meta">  #</span><span class="bash"> <span class="built_in">enable</span> strong ssl ciphers (default: <span class="literal">false</span>)</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> strong_ssl_ciphers: <span class="literal">false</span></span></span><br></pre></td></tr></table></figure>

<p>执行证书生成脚本：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/harbor</span><br><span class="line">chmod a+x *.sh</span><br><span class="line">./gen-TLS.sh</span><br></pre></td></tr></table></figure>

<p>将生成证书对应文件拷贝到Docker默认认证目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 把这三个证书文件复制到docker默认认证目录下</span></span><br><span class="line">mkdir -p /etc/docker/certs.d/coship.harbor.com/</span><br><span class="line">cp coship.harbor.com.cert /etc/docker/certs.d/coship.harbor.com/</span><br><span class="line">cp coship.harbor.com.key /etc/docker/certs.d/coship.harbor.com/</span><br><span class="line">cp ca.crt /etc/docker/certs.d/coship.harbor.com/</span><br></pre></td></tr></table></figure>

<p>重新生成harbor配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/harbor</span><br><span class="line">./prepare</span><br></pre></td></tr></table></figure>

<p>完成上述步骤后需要重启harbor和docker服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/harbor</span><br><span class="line"><span class="meta">#</span><span class="bash">通过docker-compose编排工具调用harbor默认编排文件docker-compose.yml,在其他目录执行没有效果</span></span><br><span class="line">docker-compose down -v</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重启docker服务</span></span><br><span class="line">systemctl restart docker.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">重启harbar服务</span></span><br><span class="line">cd /usr/local/harbor</span><br><span class="line">docker-compose up -d </span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>将脚本生成的证书文件ca.crt上传到浏览器受信任的根证书机构下，重启浏览器，访问<a href="https://coship.harbor.com/">https://coship.harbor.com</a></p>
<p><img src="/images/docker/20250114/docker_20250114_003.png" alt="Dockerfile 远程安全连接"></p>
<p>推送镜像到harbor服务器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">拉取nginx官方镜像,默认标签版本latest</span></span><br><span class="line">docker pull nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">给镜像打tag</span></span><br><span class="line">docker tag nginx coship.harbor.com/library/nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">登录harbor</span></span><br><span class="line">docker login -u admin -p coshipOk698? coship.harbor.com</span><br><span class="line"><span class="meta">#</span><span class="bash">推送到harbor</span></span><br><span class="line">docker push coship.harbor.com/library/nginx</span><br></pre></td></tr></table></figure>

<p>推送镜像格式  harbor域名:端口/harbor项目名/镜像名:标签</p>
<p>上述的推送命令完整格式如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker push coship.harbor.com:433/library/nginx:latest</span><br></pre></td></tr></table></figure>

<p>443是https默认访问端口，可以省略，latest为镜像默认标签，library为harbor仓库里面的默认项目</p>
<p>登录harbor,查看推送的镜像<br><img src="/images/docker/20250114/docker_20250114_004.png" alt="Dockerfile 远程安全连接"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Docker-compose</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker开启安全远程连接</title>
    <url>/MySQL/blogs/Docker%E5%BC%80%E5%90%AF%E5%AE%89%E5%85%A8%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E8%AF%81%E4%B9%A6span"><span id="inline-blue">创建证书</span></a></li>
<li><a href="#span-idinline-blueserver%E7%AB%AF%E9%85%8D%E7%BD%AEtls%E8%BF%9E%E6%8E%A5span"><span id="inline-blue">server端配置tls连接</span></a></li>
<li><a href="#span-idinline-blueclient%E7%AB%AF%E9%85%8D%E7%BD%AEtls%E8%BF%9E%E6%8E%A5span"><span id="inline-blue">client端配置tls连接</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: CentOS Linux release 7.7.1908 (Core)<br>Docker：26.1.4<br>Docker compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>Docker swarm线上环境配置portainer容器管理服务，开启远程安全链接。</p>
<h1><span id="创建证书"><span id="inline-blue">创建证书</span></span></h1><p>创建证书生成脚本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /etc/docker</span><br><span class="line">vim gen-TLS.sh</span><br></pre></td></tr></table></figure>

<p>脚本添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">ip=&quot;10.9.216.12&quot;</span><br><span class="line">password=&quot;coshipOk698&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 证书生成位置</span></span><br><span class="line">dir=&quot;/etc/docker/certs&quot; </span><br><span class="line"><span class="meta">#</span><span class="bash"> 证书有效期10年，单位是天</span></span><br><span class="line">validity_period=3650    </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果目录不存在则创建目录，否则删除重建</span></span><br><span class="line">if [ ! -d &quot;$dir&quot; ]; then</span><br><span class="line">  echo &quot;$dir 不存在，将创建目录&quot;</span><br><span class="line">  mkdir -p $dir</span><br><span class="line">else</span><br><span class="line">  echo &quot;$dir 存在，将删除并重建&quot;</span><br><span class="line">  rm -rf $dir</span><br><span class="line">  mkdir -p $dir</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cd $dir || exit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. 创建根证书 RSA 私钥</span></span><br><span class="line">openssl genrsa -aes256 -passout pass:&quot;$password&quot; -out ca-key.pem 4096</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 创建 CA 证书</span></span><br><span class="line">openssl req -new -x509 -days $validity_period -key ca-key.pem -passin pass:&quot;$password&quot; -sha256 -out ca.pem -subj &quot;/C=NL/ST=./L=./O=./CN=$ip&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 创建服务端私钥</span></span><br><span class="line">openssl genrsa -out server-key.pem 4096</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. 创建服务端签名请求证书文件</span></span><br><span class="line">openssl req -subj &quot;/CN=$ip&quot; -sha256 -new -key server-key.pem -out server.csr</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建服务端扩展配置文件 extfile.cnf</span></span><br><span class="line">echo &quot;subjectAltName = IP:$ip,IP:0.0.0.0&quot; &gt; extfile.cnf</span><br><span class="line">echo &quot;extendedKeyUsage = serverAuth&quot; &gt;&gt; extfile.cnf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5. 创建签名生效的服务端证书文件</span></span><br><span class="line">openssl x509 -req -days $validity_period -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -passin &quot;pass:$password&quot; -CAcreateserial -out server-cert.pem -extfile extfile.cnf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6. 创建客户端私钥</span></span><br><span class="line">openssl genrsa -out key.pem 4096</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 7. 创建客户端签名请求证书文件</span></span><br><span class="line">openssl req -subj &#x27;/CN=client&#x27; -new -key key.pem -out client.csr</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建客户端扩展配置文件 extfile-client.cnf</span></span><br><span class="line">echo &quot;extendedKeyUsage = clientAuth&quot; &gt; extfile-client.cnf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 8. 创建签名生效的客户端证书文件</span></span><br><span class="line">openssl x509 -req -days $validity_period -sha256 -in client.csr -CA ca.pem -CAkey ca-key.pem -passin &quot;pass:$password&quot; -CAcreateserial -out cert.pem -extfile extfile-client.cnf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除临时文件</span></span><br><span class="line">rm -f client.csr server.csr extfile.cnf extfile-client.cnf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置文件权限</span></span><br><span class="line">chmod 0400 ca-key.pem key.pem server-key.pem</span><br><span class="line">chmod 0444 ca.pem server-cert.pem cert.pem</span><br><span class="line"></span><br><span class="line">echo &quot;证书生成完成&quot;</span><br></pre></td></tr></table></figure>

<p>ip: 修改为docker服务的IP<br>password: 证书密码，自行设置<br>dir： 证书生成目录，执行生成脚本，dir目录会先清空，再生成证书，最好单独设置空文件目录</p>
<p>赋予脚本执行权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /etc/docker </span><br><span class="line">chmod a+x *.sh</span><br></pre></td></tr></table></figure>

<p>执行证书生成命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /etc/docker</span><br><span class="line">sh gen-TLS.sh</span><br></pre></td></tr></table></figure>

<p>最终生成证书文件主要使用ca.pem、server-key.pem、server-cert.pem,cert.pem、key.pem<br>将证书文件分类归档为server、client</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /etc/docker/certs</span><br><span class="line">mkdir server </span><br><span class="line">mkdir client</span><br><span class="line">cp ca.pem server-key.pem、server-cert.pem  server</span><br><span class="line">cp ca.pem cert.pem、key.pem client</span><br></pre></td></tr></table></figure>

<h1><span id="server端配置tls连接"><span id="inline-blue">server端配置tls连接</span></span></h1><p>修改docker配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/docker.service</span><br></pre></td></tr></table></figure>

<p>添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ExecStart=/usr/bin/dockerd --tlsverify --tlscacert=/etc/docker/certs/server/ca.pem --tlscert=/etc/docker/certs/server/server-cert.pem --tlskey=/etc/docker/certs/server/server-key.pem  -H tcp://0.0.0.0:2375  -H fd:// --containerd=/run/containerd/containerd.sock</span><br></pre></td></tr></table></figure>

<p>重启docker服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>
<h1><span id="client端配置tls连接"><span id="inline-blue">client端配置tls连接</span></span></h1><p>client端：<br>使用server文件夹内三个文件ca.pem、key.pem、cert.pem</p>
<p>client远程tls链接测试</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker --tlsverify --tlscacert=/etc/docker/certs/client/ca.pem --tlscert=/etc/docker/certs/client/cert.pem --tlskey=/etc/docker/certs/client/key.pem -H tcp://10.9.216.12:2375 version</span><br></pre></td></tr></table></figure>
<p><img src="/images/docker/20250114/docker_20250114_001.png" alt="Dockerfile 远程安全连接"></p>
<p>portainer配置tls</p>
<p><img src="/images/docker/20250114/docker_20250114_002.png" alt="Dockerfile 远程安全连接"></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker私服habor搭建</title>
    <url>/Docker/blogs/Docker%E7%A7%81%E6%9C%8Dhabor%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blueharbor%E9%83%A8%E7%BD%B2span"><span id="inline-blue">harbor部署</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: CentOS Linux release 7.7.1908 (Core)<br>Docker：26.1.4<br>Docker compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>docker swarm模式下实现基于docker-compose编排工具的多文件部署，但命令行的操作使得部署变得很麻烦，希望能够通过portainer+harbor实现容器的可视化管理。</p>
<h1><span id="harbor部署"><span id="inline-blue">harbor部署</span></span></h1><p>官网地址：<a href="https://goharbor.io/">https://goharbor.io/</a><br>github地址：<a href="https://github.com/goharbor/harbor/releases">https://github.com/goharbor/harbor/releases</a></p>
<p>下载对应的离线版本，上传至docker服务器/usr/local/habor目录下，执行解压</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf harbor-offline-installer-v2.12.1.tgz</span><br></pre></td></tr></table></figure>

<p>解压之后，赋予.sh脚本文件可执行权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod a+x *.sh </span><br></pre></td></tr></table></figure>

<p>重命名配置文件，并修改配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv harbor.yml.tmpl  harbor.yml</span><br></pre></td></tr></table></figure>

<p>harbor.yml</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Configuration file of Harbor</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The IP address or hostname to access admin UI and registry service.</span></span><br><span class="line"><span class="comment"># DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.</span></span><br><span class="line"><span class="attr">hostname:</span> <span class="string">coship.harbor.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># http related config</span></span><br><span class="line"><span class="attr">http:</span></span><br><span class="line">  <span class="comment"># port for http, default is 80. If https enabled, this port will redirect to https port</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https related config</span></span><br><span class="line"><span class="attr">https:</span></span><br><span class="line">  <span class="comment"># https port for harbor, default is 443</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">443</span></span><br><span class="line">  <span class="comment"># The path of cert and key files for nginx</span></span><br><span class="line">  <span class="attr">certificate:</span> <span class="string">/usr/local/harbor/https/server.pem</span></span><br><span class="line">  <span class="attr">private_key:</span> <span class="string">/usr/local/harbor/https/server.key</span></span><br><span class="line">  <span class="comment"># enable strong ssl ciphers (default: false)</span></span><br><span class="line">  <span class="comment"># strong_ssl_ciphers: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # Harbor will set ipv4 enabled only by default if this block is not configured</span></span><br><span class="line"><span class="comment"># # Otherwise, please uncomment this block to configure your own ip_family stacks</span></span><br><span class="line"><span class="comment"># ip_family:</span></span><br><span class="line"><span class="comment">#   # ipv6Enabled set to true if ipv6 is enabled in docker network, currently it affected the nginx related component</span></span><br><span class="line"><span class="comment">#   ipv6:</span></span><br><span class="line"><span class="comment">#     enabled: false</span></span><br><span class="line"><span class="comment">#   # ipv4Enabled set to true by default, currently it affected the nginx related component</span></span><br><span class="line"><span class="comment">#   ipv4:</span></span><br><span class="line"><span class="comment">#     enabled: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # Uncomment following will enable tls communication between all harbor components</span></span><br><span class="line"><span class="comment"># internal_tls:</span></span><br><span class="line"><span class="comment">#   # set enabled to true means internal tls is enabled</span></span><br><span class="line"><span class="comment">#   enabled: true</span></span><br><span class="line"><span class="comment">#   # put your cert and key files on dir</span></span><br><span class="line"><span class="comment">#   dir: /etc/harbor/tls/internal</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment external_url if you want to enable external proxy</span></span><br><span class="line"><span class="comment"># And when it enabled the hostname will no longer used</span></span><br><span class="line"><span class="comment"># external_url: https://reg.mydomain.com:8433</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The initial password of Harbor admin</span></span><br><span class="line"><span class="comment"># It only works in first time to install harbor</span></span><br><span class="line"><span class="comment"># Remember Change the admin password from UI after launching Harbor.</span></span><br><span class="line"><span class="attr">harbor_admin_password:</span> <span class="string">coshipOk698?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Harbor DB configuration</span></span><br><span class="line"><span class="attr">database:</span></span><br><span class="line">  <span class="comment"># The password for the user(&#x27;postgres&#x27; by default) of Harbor DB. Change this before any production use.</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">root123</span></span><br><span class="line">  <span class="comment"># The maximum number of connections in the idle connection pool. If it &lt;=0, no idle connections are retained.</span></span><br><span class="line">  <span class="attr">max_idle_conns:</span> <span class="number">100</span></span><br><span class="line">  <span class="comment"># The maximum number of open connections to the database. If it &lt;= 0, then there is no limit on the number of open connections.</span></span><br><span class="line">  <span class="comment"># <span class="doctag">Note:</span> the default number of connections is 1024 for postgres of harbor.</span></span><br><span class="line">  <span class="attr">max_open_conns:</span> <span class="number">900</span></span><br><span class="line">  <span class="comment"># The maximum amount of time a connection may be reused. Expired connections may be closed lazily before reuse. If it &lt;= 0, connections are not closed due to a connection&#x27;s age.</span></span><br><span class="line">  <span class="comment"># The value is a duration string. A duration string is a possibly signed sequence of decimal numbers, each with optional fraction and a unit suffix, such as &quot;300ms&quot;, &quot;-1.5h&quot; or &quot;2h45m&quot;. Valid time units are &quot;ns&quot;, &quot;us&quot; (or &quot;µs&quot;), &quot;ms&quot;, &quot;s&quot;, &quot;m&quot;, &quot;h&quot;.</span></span><br><span class="line">  <span class="attr">conn_max_lifetime:</span> <span class="string">5m</span></span><br><span class="line">  <span class="comment"># The maximum amount of time a connection may be idle. Expired connections may be closed lazily before reuse. If it &lt;= 0, connections are not closed due to a connection&#x27;s idle time.</span></span><br><span class="line">  <span class="comment"># The value is a duration string. A duration string is a possibly signed sequence of decimal numbers, each with optional fraction and a unit suffix, such as &quot;300ms&quot;, &quot;-1.5h&quot; or &quot;2h45m&quot;. Valid time units are &quot;ns&quot;, &quot;us&quot; (or &quot;µs&quot;), &quot;ms&quot;, &quot;s&quot;, &quot;m&quot;, &quot;h&quot;.</span></span><br><span class="line">  <span class="attr">conn_max_idle_time:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The default data volume</span></span><br><span class="line"><span class="attr">data_volume:</span> <span class="string">/data</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Harbor Storage settings by default is using /data dir on local filesystem</span></span><br><span class="line"><span class="comment"># Uncomment storage_service setting If you want to using external storage</span></span><br><span class="line"><span class="comment"># storage_service:</span></span><br><span class="line"><span class="comment">#   # ca_bundle is the path to the custom root ca certificate, which will be injected into the truststore</span></span><br><span class="line"><span class="comment">#   # of registry&#x27;s containers.  This is usually needed when the user hosts a internal storage with self signed certificate.</span></span><br><span class="line"><span class="comment">#   ca_bundle:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#   # storage backend, default is filesystem, options include filesystem, azure, gcs, s3, swift and oss</span></span><br><span class="line"><span class="comment">#   # for more info about this configuration please refer https://distribution.github.io/distribution/about/configuration/</span></span><br><span class="line"><span class="comment">#   # and https://distribution.github.io/distribution/storage-drivers/</span></span><br><span class="line"><span class="comment">#   filesystem:</span></span><br><span class="line"><span class="comment">#     maxthreads: 100</span></span><br><span class="line"><span class="comment">#   # set disable to true when you want to disable registry redirect</span></span><br><span class="line"><span class="comment">#   redirect:</span></span><br><span class="line"><span class="comment">#     disable: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Trivy configuration</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Trivy DB contains vulnerability information from NVD, Red Hat, and many other upstream vulnerability databases.</span></span><br><span class="line"><span class="comment"># It is downloaded by Trivy from the GitHub release page https://github.com/aquasecurity/trivy-db/releases and cached</span></span><br><span class="line"><span class="comment"># in the local file system. In addition, the database contains the update timestamp so Trivy can detect whether it</span></span><br><span class="line"><span class="comment"># should download a newer version from the Internet or use the cached one. Currently, the database is updated every</span></span><br><span class="line"><span class="comment"># 12 hours and published as a new release to GitHub.</span></span><br><span class="line"><span class="attr">trivy:</span></span><br><span class="line">  <span class="comment"># ignoreUnfixed The flag to display only fixed vulnerabilities</span></span><br><span class="line">  <span class="attr">ignore_unfixed:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># skipUpdate The flag to enable or disable Trivy DB downloads from GitHub</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># You might want to enable this flag in test or CI/CD environments to avoid GitHub rate limiting issues.</span></span><br><span class="line">  <span class="comment"># If the flag is enabled you have to download the `trivy-offline.tar.gz` archive manually, extract `trivy.db` and</span></span><br><span class="line">  <span class="comment"># `metadata.json` files and mount them in the `/home/scanner/.cache/trivy/db` path.</span></span><br><span class="line">  <span class="attr">skip_update:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># skipJavaDBUpdate If the flag is enabled you have to manually download the `trivy-java.db` file and mount it in the</span></span><br><span class="line">  <span class="comment"># `/home/scanner/.cache/trivy/java-db/trivy-java.db` path</span></span><br><span class="line">  <span class="attr">skip_java_db_update:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># The offline_scan option prevents Trivy from sending API requests to identify dependencies.</span></span><br><span class="line">  <span class="comment"># Scanning JAR files and pom.xml may require Internet access for better detection, but this option tries to avoid it.</span></span><br><span class="line">  <span class="comment"># For example, the offline mode will not try to resolve transitive dependencies in pom.xml when the dependency doesn&#x27;t</span></span><br><span class="line">  <span class="comment"># exist in the local repositories. It means a number of detected vulnerabilities might be fewer in offline mode.</span></span><br><span class="line">  <span class="comment"># It would work if all the dependencies are in local.</span></span><br><span class="line">  <span class="comment"># This option doesn&#x27;t affect DB download. You need to specify &quot;skip-update&quot; as well as &quot;offline-scan&quot; in an air-gapped environment.</span></span><br><span class="line">  <span class="attr">offline_scan:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># Comma-separated list of what security issues to detect. Possible values are `vuln`, `config` and `secret`. Defaults to `vuln`.</span></span><br><span class="line">  <span class="attr">security_check:</span> <span class="string">vuln</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># insecure The flag to skip verifying registry certificate</span></span><br><span class="line">  <span class="attr">insecure:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># timeout The duration to wait for scan completion.</span></span><br><span class="line">  <span class="comment"># There is upper bound of 30 minutes defined in scan job. So if this `timeout` is larger than 30m0s, it will also timeout at 30m0s.</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">5m0s</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># github_token The GitHub access token to download Trivy DB</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># Anonymous downloads from GitHub are subject to the limit of 60 requests per hour. Normally such rate limit is enough</span></span><br><span class="line">  <span class="comment"># for production operations. If, for any reason, it&#x27;s not enough, you could increase the rate limit to 5000</span></span><br><span class="line">  <span class="comment"># requests per hour by specifying the GitHub access token. For more details on GitHub rate limiting please consult</span></span><br><span class="line">  <span class="comment"># https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># You can create a GitHub token by following the instructions in</span></span><br><span class="line">  <span class="comment"># https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># github_token: xxx</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobservice:</span></span><br><span class="line">  <span class="comment"># Maximum number of job workers in job service</span></span><br><span class="line">  <span class="attr">max_job_workers:</span> <span class="number">10</span></span><br><span class="line">  <span class="comment"># The jobLoggers backend name, only support &quot;STD_OUTPUT&quot;, &quot;FILE&quot; and/or &quot;DB&quot;</span></span><br><span class="line">  <span class="attr">job_loggers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">STD_OUTPUT</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">FILE</span></span><br><span class="line">    <span class="comment"># - DB</span></span><br><span class="line">  <span class="comment"># The jobLogger sweeper duration (ignored if `jobLogger` is `stdout`)</span></span><br><span class="line">  <span class="attr">logger_sweeper_duration:</span> <span class="number">1</span> <span class="comment">#days</span></span><br><span class="line"></span><br><span class="line"><span class="attr">notification:</span></span><br><span class="line">  <span class="comment"># Maximum retry count for webhook job</span></span><br><span class="line">  <span class="attr">webhook_job_max_retry:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># HTTP client timeout for webhook job</span></span><br><span class="line">  <span class="attr">webhook_job_http_client_timeout:</span> <span class="number">3</span> <span class="comment">#seconds</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Log configurations</span></span><br><span class="line"><span class="attr">log:</span></span><br><span class="line">  <span class="comment"># options are debug, info, warning, error, fatal</span></span><br><span class="line">  <span class="attr">level:</span> <span class="string">info</span></span><br><span class="line">  <span class="comment"># configs for logs in local storage</span></span><br><span class="line">  <span class="attr">local:</span></span><br><span class="line">    <span class="comment"># Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated.</span></span><br><span class="line">    <span class="attr">rotate_count:</span> <span class="number">50</span></span><br><span class="line">    <span class="comment"># Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in kilobytes.</span></span><br><span class="line">    <span class="comment"># If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G</span></span><br><span class="line">    <span class="comment"># are all valid.</span></span><br><span class="line">    <span class="attr">rotate_size:</span> <span class="string">200M</span></span><br><span class="line">    <span class="comment"># The directory on your host that store log</span></span><br><span class="line">    <span class="attr">location:</span> <span class="string">/var/log/harbor</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uncomment following lines to enable external syslog endpoint.</span></span><br><span class="line">  <span class="comment"># external_endpoint:</span></span><br><span class="line">  <span class="comment">#   # protocol used to transmit log to external endpoint, options is tcp or udp</span></span><br><span class="line">  <span class="comment">#   protocol: tcp</span></span><br><span class="line">  <span class="comment">#   # The host of external endpoint</span></span><br><span class="line">  <span class="comment">#   host: localhost</span></span><br><span class="line">  <span class="comment">#   # Port of external endpoint</span></span><br><span class="line">  <span class="comment">#   port: 5140</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#This attribute is for migrator to detect the version of the .cfg file, DO NOT MODIFY!</span></span><br><span class="line"><span class="attr">_version:</span> <span class="number">2.12</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment external_database if using external database.</span></span><br><span class="line"><span class="comment"># external_database:</span></span><br><span class="line"><span class="comment">#   harbor:</span></span><br><span class="line"><span class="comment">#     host: harbor_db_host</span></span><br><span class="line"><span class="comment">#     port: harbor_db_port</span></span><br><span class="line"><span class="comment">#     db_name: harbor_db_name</span></span><br><span class="line"><span class="comment">#     username: harbor_db_username</span></span><br><span class="line"><span class="comment">#     password: harbor_db_password</span></span><br><span class="line"><span class="comment">#     ssl_mode: disable</span></span><br><span class="line"><span class="comment">#     max_idle_conns: 2</span></span><br><span class="line"><span class="comment">#     max_open_conns: 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment redis if need to customize redis db</span></span><br><span class="line"><span class="comment"># redis:</span></span><br><span class="line"><span class="comment">#   # db_index 0 is for core, it&#x27;s unchangeable</span></span><br><span class="line"><span class="comment">#   # registry_db_index: 1</span></span><br><span class="line"><span class="comment">#   # jobservice_db_index: 2</span></span><br><span class="line"><span class="comment">#   # trivy_db_index: 5</span></span><br><span class="line"><span class="comment">#   # it&#x27;s optional, the db for harbor business misc, by default is 0, uncomment it if you want to change it.</span></span><br><span class="line"><span class="comment">#   # harbor_db_index: 6</span></span><br><span class="line"><span class="comment">#   # it&#x27;s optional, the db for harbor cache layer, by default is 0, uncomment it if you want to change it.</span></span><br><span class="line"><span class="comment">#   # cache_layer_db_index: 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment external_redis if using external Redis server</span></span><br><span class="line"><span class="comment"># external_redis:</span></span><br><span class="line"><span class="comment">#   # support redis, redis+sentinel</span></span><br><span class="line"><span class="comment">#   # host for redis: &lt;host_redis&gt;:&lt;port_redis&gt;</span></span><br><span class="line"><span class="comment">#   # host for redis+sentinel:</span></span><br><span class="line"><span class="comment">#   #  &lt;host_sentinel1&gt;:&lt;port_sentinel1&gt;,&lt;host_sentinel2&gt;:&lt;port_sentinel2&gt;,&lt;host_sentinel3&gt;:&lt;port_sentinel3&gt;</span></span><br><span class="line"><span class="comment">#   host: redis:6379</span></span><br><span class="line"><span class="comment">#   password: </span></span><br><span class="line"><span class="comment">#   # Redis AUTH command was extended in Redis 6, it is possible to use it in the two-arguments AUTH &lt;username&gt; &lt;password&gt; form.</span></span><br><span class="line"><span class="comment">#   # there&#x27;s a known issue when using external redis username ref:https://github.com/goharbor/harbor/issues/18892</span></span><br><span class="line"><span class="comment">#   # if you care about the image pull/push performance, please refer to this https://github.com/goharbor/harbor/wiki/Harbor-FAQs#external-redis-username-password-usage</span></span><br><span class="line"><span class="comment">#   # username:</span></span><br><span class="line"><span class="comment">#   # sentinel_master_set must be set to support redis+sentinel</span></span><br><span class="line"><span class="comment">#   #sentinel_master_set:</span></span><br><span class="line"><span class="comment">#   # db_index 0 is for core, it&#x27;s unchangeable</span></span><br><span class="line"><span class="comment">#   registry_db_index: 1</span></span><br><span class="line"><span class="comment">#   jobservice_db_index: 2</span></span><br><span class="line"><span class="comment">#   trivy_db_index: 5</span></span><br><span class="line"><span class="comment">#   idle_timeout_seconds: 30</span></span><br><span class="line"><span class="comment">#   # it&#x27;s optional, the db for harbor business misc, by default is 0, uncomment it if you want to change it.</span></span><br><span class="line"><span class="comment">#   # harbor_db_index: 6</span></span><br><span class="line"><span class="comment">#   # it&#x27;s optional, the db for harbor cache layer, by default is 0, uncomment it if you want to change it.</span></span><br><span class="line"><span class="comment">#   # cache_layer_db_index: 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment uaa for trusting the certificate of uaa instance that is hosted via self-signed cert.</span></span><br><span class="line"><span class="comment"># uaa:</span></span><br><span class="line"><span class="comment">#   ca_file: /path/to/ca</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Global proxy</span></span><br><span class="line"><span class="comment"># Config http proxy for components, e.g. http://my.proxy.com:3128</span></span><br><span class="line"><span class="comment"># Components doesn&#x27;t need to connect to each others via http proxy.</span></span><br><span class="line"><span class="comment"># Remove component from `components` array if want disable proxy</span></span><br><span class="line"><span class="comment"># for it. If you want use proxy for replication, MUST enable proxy</span></span><br><span class="line"><span class="comment"># for core and jobservice, and set `http_proxy` and `https_proxy`.</span></span><br><span class="line"><span class="comment"># Add domain to the `no_proxy` field, when you want disable proxy</span></span><br><span class="line"><span class="comment"># for some special registry.</span></span><br><span class="line"><span class="attr">proxy:</span></span><br><span class="line">  <span class="attr">http_proxy:</span></span><br><span class="line">  <span class="attr">https_proxy:</span></span><br><span class="line">  <span class="attr">no_proxy:</span></span><br><span class="line">  <span class="attr">components:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">core</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">jobservice</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">trivy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># metric:</span></span><br><span class="line"><span class="comment">#   enabled: false</span></span><br><span class="line"><span class="comment">#   port: 9090</span></span><br><span class="line"><span class="comment">#   path: /metrics</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Trace related config</span></span><br><span class="line"><span class="comment"># only can enable one trace provider(jaeger or otel) at the same time,</span></span><br><span class="line"><span class="comment"># and when using jaeger as provider, can only enable it with agent mode or collector mode.</span></span><br><span class="line"><span class="comment"># if using jaeger collector mode, uncomment endpoint and uncomment username, password if needed</span></span><br><span class="line"><span class="comment"># if using jaeger agetn mode uncomment agent_host and agent_port</span></span><br><span class="line"><span class="comment"># trace:</span></span><br><span class="line"><span class="comment">#   enabled: true</span></span><br><span class="line"><span class="comment">#   # set sample_rate to 1 if you wanna sampling 100% of trace data; set 0.5 if you wanna sampling 50% of trace data, and so forth</span></span><br><span class="line"><span class="comment">#   sample_rate: 1</span></span><br><span class="line"><span class="comment">#   # # namespace used to differentiate different harbor services</span></span><br><span class="line"><span class="comment">#   # namespace:</span></span><br><span class="line"><span class="comment">#   # # attributes is a key value dict contains user defined attributes used to initialize trace provider</span></span><br><span class="line"><span class="comment">#   # attributes:</span></span><br><span class="line"><span class="comment">#   #   application: harbor</span></span><br><span class="line"><span class="comment">#   # # jaeger should be 1.26 or newer.</span></span><br><span class="line"><span class="comment">#   # jaeger:</span></span><br><span class="line"><span class="comment">#   #   endpoint: http://hostname:14268/api/traces</span></span><br><span class="line"><span class="comment">#   #   username:</span></span><br><span class="line"><span class="comment">#   #   password:</span></span><br><span class="line"><span class="comment">#   #   agent_host: hostname</span></span><br><span class="line"><span class="comment">#   #   # export trace data by jaeger.thrift in compact mode</span></span><br><span class="line"><span class="comment">#   #   agent_port: 6831</span></span><br><span class="line"><span class="comment">#   # otel:</span></span><br><span class="line"><span class="comment">#   #   endpoint: hostname:4318</span></span><br><span class="line"><span class="comment">#   #   url_path: /v1/traces</span></span><br><span class="line"><span class="comment">#   #   compression: false</span></span><br><span class="line"><span class="comment">#   #   insecure: true</span></span><br><span class="line"><span class="comment">#   #   # timeout is in seconds</span></span><br><span class="line"><span class="comment">#   #   timeout: 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable purge _upload directories</span></span><br><span class="line"><span class="attr">upload_purging:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># remove files in _upload directories which exist for a period of time, default is one week.</span></span><br><span class="line">  <span class="attr">age:</span> <span class="string">168h</span></span><br><span class="line">  <span class="comment"># the interval of the purge operations</span></span><br><span class="line">  <span class="attr">interval:</span> <span class="string">24h</span></span><br><span class="line">  <span class="attr">dryrun:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Cache layer configurations</span></span><br><span class="line"><span class="comment"># If this feature enabled, harbor will cache the resource</span></span><br><span class="line"><span class="comment"># `project/project_metadata/repository/artifact/manifest` in the redis</span></span><br><span class="line"><span class="comment"># which can especially help to improve the performance of high concurrent</span></span><br><span class="line"><span class="comment"># manifest pulling.</span></span><br><span class="line"><span class="comment"># NOTICE</span></span><br><span class="line"><span class="comment"># If you are deploying Harbor in HA mode, make sure that all the harbor</span></span><br><span class="line"><span class="comment"># instances have the same behaviour, all with caching enabled or disabled,</span></span><br><span class="line"><span class="comment"># otherwise it can lead to potential data inconsistency.</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="comment"># not enabled by default</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># keep cache for one day by default</span></span><br><span class="line">  <span class="attr">expire_hours:</span> <span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Harbor core configurations</span></span><br><span class="line"><span class="comment"># Uncomment to enable the following harbor core related configuration items.</span></span><br><span class="line"><span class="comment"># core:</span></span><br><span class="line"><span class="comment">#   # The provider for updating project quota(usage), there are 2 options, redis or db,</span></span><br><span class="line"><span class="comment">#   # by default is implemented by db but you can switch the updation via redis which</span></span><br><span class="line"><span class="comment">#   # can improve the performance of high concurrent pushing to the same project,</span></span><br><span class="line"><span class="comment">#   # and reduce the database connections spike and occupies.</span></span><br><span class="line"><span class="comment">#   # By redis will bring up some delay for quota usage updation for display, so only</span></span><br><span class="line"><span class="comment">#   # suggest switch provider to redis if you were ran into the db connections spike around</span></span><br><span class="line"><span class="comment">#   # the scenario of high concurrent pushing to same project, no improvement for other scenes.</span></span><br><span class="line"><span class="comment">#   quota_update_provider: redis # Or db</span></span><br></pre></td></tr></table></figure>

<p>主要修改图片中标识三项内容：<br><img src="/images/docker/20250110/docker_20250110_001.png" alt="Dockerfile harbor"></p>
<p>hostname: 设置harbor服务的域名或者主机IP</p>
<p>https: 加密安全访问可以通过下面命令生成对应证书文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">coship.harbor.com/10.9.216.14</span></span><br><span class="line"><span class="meta">#</span><span class="bash">指定/home路径下生成certificate.jks证书，秘钥为coshipOk698</span></span><br><span class="line">keytool -genkey -alias photoframe  -keyalg RSA -keysize 2048 -validity 3650 -ext SAN=dns:coship.harbor.com,ip:10.9.216.14 -keystore /usr/local/harbor/https/certificate.jks -storepass coshipOk698 -dname &quot;CN=coship.harbor.com, OU=coship.harbor.com, O=coship.harbor.com, L=wuhan, ST=wuhan, C=cn&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">certificate.jks是键值对形式的证书，推荐转换为标准格式pkcs12</span></span><br><span class="line">keytool -importkeystore -srckeystore certificate.jks -destkeystore certificate.jks -deststoretype pkcs12</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将certificate.jks证书导出，certificate.jks已经是pkcs12格式</span></span><br><span class="line">keytool -export -trustcacerts -alias photoframe -file /usr/local/harbor/https/cas.crt -keystore /usr/local/harbor/https/certificate.jks -storepass coshipOk698</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将cas.crt格式转换为server.pem，方便nginx使用</span></span><br><span class="line">openssl x509 -inform der -in cas.crt -out server.pem</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">提取密钥</span></span><br><span class="line">openssl pkcs12 -nocerts -nodes -in certificate.jks -out server.key</span><br></pre></td></tr></table></figure>

<p>harbor_admin_password: 默认登录后台管理admin用户密码</p>
<p>执行harbor服务安装命令:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure>

<p>harbor服务启动之后其实是由docker内部多个服务组成，通过docker ps命令可以看到对应的容器服务如下：<br><img src="/images/docker/20250110/docker_20250110_002.png" alt="Dockerfile harbor"></p>
<p>harbor内置docker-compose容器编排文件docker-compose.yml,服务器重启之后，harbor对应的容器服务启动失败，原因是容器之间的依赖关系没有设置，导致容器缺失对应的依赖启动失败，容器默认的重启策略restart: always<br>解决这一问题的办法是手动执行docker-compose命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入habor主目录</span></span><br><span class="line">cd /usr/local/habor</span><br><span class="line"><span class="meta">#</span><span class="bash">docker-compose.yml文件在harbor主目录下指定执行有效，或者不指定的情况下默认使用的也是docker-compose.yml</span></span><br><span class="line">docker-compose up -d docker-compose.yml</span><br></pre></td></tr></table></figure>
<p>为了解决重启失效的问题，可以将harbor注册为系统服务，并在启动时默认执行容器编排服务命令。</p>
<p>创建对应的系统服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim  /etc/systemd/system/harbor.service</span><br></pre></td></tr></table></figure>

<p>服务内容添加如下： </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Harbor service</span><br><span class="line">Requires=docker.service</span><br><span class="line">After=docker.service</span><br><span class="line"> </span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Restart=always</span><br><span class="line">//改成你的harbor路径</span><br><span class="line">WorkingDirectory=/usr/local/harbor </span><br><span class="line">//改成你的docker-compost路径 </span><br><span class="line">ExecStart=/usr/local/bin/docker-compose up </span><br><span class="line"> </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>设置开机启动和启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl enable harbor.service</span><br><span class="line">sudo systemctl start harbor.service</span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>访问后台管理：<a href="https://10.9.216.14/">https://10.9.216.14/</a><br><img src="/images/docker/20250110/docker_20250110_003.png" alt="Dockerfile harbor"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Docker-compose</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署微服务集群(六)</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4(%E5%85%AD)/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluedocker-composeyml%E4%B9%8B%E9%97%B4%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1span"><span id="inline-blue">docker-compose.yml之间网络通信</span></a></li>
<li><a href="#span-idinline-bluedocker-swarn-baseymlspan"><span id="inline-blue">docker-swarn-base.yml</span></a></li>
<li><a href="#span-idinline-bluedocker-swarn-servicesymlspan"><span id="inline-blue">docker-swarn-services.yml</span></a></li>
<li><a href="#span-idinline-bluedocker-swarn-monitorymlspan"><span id="inline-blue">docker-swarn-monitor.yml</span></a></li>
<li><a href="#span-idinline-bluedocker-swarn-portainerymlspan"><span id="inline-blue">docker-swarn-portainer.yml</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: CentOS Linux release 7.7.1908 (Core)<br>Docker：26.1.4<br>Docker compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务集群通过docker-compose编排工具成功在docker swarm分布式集群环境下部署后，发现更新stack下的服务非常麻烦，更新多个服务经常需要重复执行命令，导致有时执行服务的批量更新命令，MySQL和elasticsearch容器的数据丢失。<br>所以将微服务和基础服务MySQL、redis、Elasticsearch以及监控服务sentinel、zipkin 等分成多个文件进行服务编排，这样在升级微服务或者数据库的情况下，不会对其他stack里面服务造成影响。</p>
<h1><span id="docker-composeyml之间网络通信"><span id="inline-blue">docker-compose.yml之间网络通信</span></span></h1><p>微服务集群服务拆分为多个文件进行部署，首先需要解决服务之间的网络互通问题</p>
<p>docker-swarm-base.yml基础服务定义网络</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># base/docker-swarm-base.yml</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">front:</span></span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">some-net</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">some-net:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">overlay</span></span><br></pre></td></tr></table></figure>

<p>docker-swarm-services.yml微服务引用网络</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># service/docker-swarm-services.yml</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">api:</span></span><br><span class="line">    <span class="string">...</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">base_some-net</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">base_some-net:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>docker-swarm-base.yml作为其他服务的基础依赖，定义微服务集群的网络，driver:overlay表明创建网络类型为层叠网络，这是docker swarm模式下，docker容器能够跨docker主机通信的关键。<br>docker-swarm-services.yml引用网络名称使用的是base_some-net，而不是some-net,原因是因为docker swarm模式下部署的服务最终生成的service服务名称会添加上部署stack的前缀，部署命令类似：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stack deploy -c docker-swarm-base-process.yml --resolve-image never base</span><br></pre></td></tr></table></figure>
<p>-c: 指定stack部署依赖的配置文件<br>–resolve-image：指定拉取镜像时是否校验当前系统和镜像的兼容性(镜像架构一般有windows/arm64/amd64)<br>|镜像架构|兼容系统|<br>|:—:|:—:|<br>|windows|windows|<br>|arm64|MAC|<br>|amd64|Lniux|</p>
<p>never: 不进行校验，加快镜像构建的速度<br>base是部署的stack名称，部署服务的集合</p>
<h1><span id="docker-swarn-baseyml"><span id="inline-blue">docker-swarn-base.yml</span></span></h1><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">photoframe-mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./mysql</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">3306</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">3307</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/conf:/etc/mysql/conf.d</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/log:/var/mysql/log</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/data:/var/mysql/data</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/db/init:/docker-entrypoint-initdb.d/:ro</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/db/sql:/opt/sql/:ro</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">coship</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line">  <span class="attr">photoframe-nacos:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./nacos</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">MODE:</span> <span class="string">standalone</span></span><br><span class="line">      <span class="attr">PREFER_HOST_MODE:</span> <span class="string">ip</span></span><br><span class="line">      <span class="attr">SPRING_DATASOURCE_PLATFORM:</span> <span class="string">mysql</span></span><br><span class="line">      <span class="attr">MYSQL_SERVICE_HOST:</span> <span class="string">photoframe-mysql</span></span><br><span class="line">      <span class="attr">MYSQL_SERVICE_PORT:</span> <span class="number">3306</span></span><br><span class="line">      <span class="attr">MYSQL_SERVICE_USER:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">MYSQL_SERVICE_PASSWORD:</span> <span class="string">coship</span></span><br><span class="line">      <span class="attr">MYSQL_SERVICE_DB_NAME:</span> <span class="string">nacos_config</span></span><br><span class="line">      <span class="attr">JVM_XMS:</span> <span class="string">1g</span></span><br><span class="line">      <span class="attr">JVM_XMX:</span> <span class="string">1g</span></span><br><span class="line">      <span class="attr">JVM_XMN:</span> <span class="string">128m</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">120</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./nacos/logs/:/home/nacos/logs</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./nacos/conf/:/home/nacos/conf</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">8848</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">8849</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9848</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9850</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9849</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9851</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line">  <span class="attr">photoframe-redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./redis</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">6380</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./redis/conf:/etc/redis/</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line">  <span class="attr">photoframe-elasticsearch:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-elasticsearch</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./elasticsearch</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment"># 开启内存锁定</span></span><br><span class="line">      <span class="attr">bootstrap.memory_lock:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">      <span class="attr">ES_JAVA_OPTS:</span> <span class="string">&quot;-Xms4g -Xmx4g&quot;</span></span><br><span class="line">      <span class="comment"># 指定单节点启动</span></span><br><span class="line">      <span class="attr">discovery.type:</span> <span class="string">single-node</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="comment"># 取消内存相关限制 用于开启内存锁定</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/data:/usr/local/elasticsearch-8.8.0/data</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/logs:/usr/local/elasticsearch-8.8.0/logs</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/config:/usr/local/elasticsearch-8.8.0/config</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/plugins:/usr/local/elasticsearch-8.8.0/plugins</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9200</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9201</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9300</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9301</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line">  <span class="attr">photoframe-rabbitmq:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-rabbitmq</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./rabbitmq</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">5672</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">5673</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">15672</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">15673</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./rabbitmq/data:/var/lib/rabbitmq</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./rabbitmq/log:/var/log/rabbitmq</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./rabbitmq/conf:/etc/rabbitmq</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">photoframe-net:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">overlay</span></span><br></pre></td></tr></table></figure>

<p>部署基础服务命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-base.yml所在目录,转换配置，提取.env文件定义的环境变量</span></span><br><span class="line">docker stack config -c docker-swarm-base.yml &gt; docker-swarm-base-process.yml</span><br><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-base-process.yml所在目录,执行部署</span></span><br><span class="line">docker stack deploy -c docker-swarm-base-process.yml --resolve-image never photoframe-base</span><br></pre></td></tr></table></figure>

<h1><span id="docker-swarn-servicesyml"><span id="inline-blue">docker-swarn-services.yml</span></span></h1><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">photoframe-admin-log:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-admin-log</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-admin-log</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9021</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9023</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line">  <span class="attr">photoframe-admin-biz:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-admin-biz</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-admin-biz</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9020</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9022</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line">  <span class="attr">photoframe-api-app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-api-app</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-api-app</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9006</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9008</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line">  <span class="attr">photoframe-api-pad:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-api-pad</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-api-pad</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9007</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9009</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./photoframe/uploadPath:/home/photoframe/uploadPath</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line">  <span class="attr">photoframe-auth:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-auth</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-auth</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9003</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9004</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line">  <span class="attr">photoframe-quartz:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-quartz</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-quartz</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9060</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9061</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">dnsrr</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line">  <span class="attr">photoframe-gateway:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-gateway</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-gateway</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9001</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9002</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-nacos:8848,photoframe-redis:6379,photoframe-admin-biz:9020,photoframe-admin-log:9021,photoframe-api-app:9006,photoframe-api-pad:9007,photoframe-auth:9003,photoframe-quartz:9060</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">5</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">120s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==service</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">photoframe-base_photoframe-net:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>部署微服务命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-services.yml所在目录,转换配置，提取.env文件定义的环境变量</span></span><br><span class="line">docker stack config -c docker-swarm-services.yml &gt; docker-swarm-services-process.yml</span><br><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-services-process.yml所在目录,执行部署</span></span><br><span class="line">docker stack deploy -c docker-swarm-services-process.yml --resolve-image never photoframe-services</span><br></pre></td></tr></table></figure>

<h1><span id="docker-swarn-monitoryml"><span id="inline-blue">docker-swarn-monitor.yml</span></span></h1><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">photoframe-nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-nginx</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./nginx</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9090</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9091</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./nginx/conf/nginx.conf:/etc/nginx/nginx.conf</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./nginx/logs:/var/log/nginx</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-gateway:9001</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line">  <span class="attr">photoframe-sentinel:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-sentinel</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./sentinel</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">8180</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">8181</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./sentinel/logs:/root/logs</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-nacos:8848</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line">  <span class="attr">photoframe-zipkin:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-zipkin</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./zipkin</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9411</span></span><br><span class="line">      <span class="attr">published:</span> <span class="number">9412</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-elasticsearch:9200</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line">  <span class="attr">photoframe-zipkin-dependencies:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">photoframe-zipkin-dependencies</span></span><br><span class="line">    <span class="attr">env_file:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./zipkin-dependencies</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-elasticsearch:9200</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">        <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">rollback_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">update_config:</span></span><br><span class="line">        <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">        <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">        <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">        <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">photoframe-base_photoframe-net:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>部署监控服务命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-monitor.yml所在目录,转换配置，提取.env文件定义的环境变量</span></span><br><span class="line">docker stack config -c docker-swarm-monitor.yml &gt; docker-swarm-monitor-process.yml</span><br><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-monitor-process.yml所在目录,执行部署</span></span><br><span class="line">docker stack deploy -c docker-swarm-monitor-process.yml --resolve-image never photoframe-monitor</span><br></pre></td></tr></table></figure>

<h1><span id="docker-swarn-portaineryml"><span id="inline-blue">docker-swarn-portainer.yml</span></span></h1><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">portainer:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">portainer/portainer</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9000:9000&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8000:8000&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/usr/local/docker/portainer/data:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-base_photoframe-net</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">placement:</span></span><br><span class="line">        <span class="attr">constraints:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">node.labels.role==base</span>  </span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">photoframe-base_photoframe-net:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>部署portainer容器管理服务命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-portainer.yml所在目录,转换配置，提取.env文件定义的环境变量</span></span><br><span class="line">docker stack config -c docker-swarm-portainer.yml &gt; docker-swarm-portainer-process.yml</span><br><span class="line"><span class="meta">#</span><span class="bash">/usr/<span class="built_in">local</span>/docker,docker-swarm-portainer-process.yml所在目录,执行部署</span></span><br><span class="line">docker stack deploy -c docker-swarm-portainer-process.yml --resolve-image never photoframe-portainer</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Docker-compose</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux shell脚本实现MySQL数据库备份</title>
    <url>/MySQL/blogs/Linux%20shell%E8%84%9A%E6%9C%AC%E5%AE%9E%E7%8E%B0MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluemysqlbackupshspan"><span id="inline-blue">mysqlBackup.sh</span></a></li>
<li><a href="#span-idinline-bluecrontab%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1span"><span id="inline-blue">crontab定时任务</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Linux: CentOS Linux release 7.7.1908 (Core)
MySQL：5.7</code></pre>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>线上服务对应数据库没有做备份，担心故障会导致数据丢失和业务异常，所以使用shell脚本定时备份数据库。</p>
<h1><span id="mysqlbackupsh"><span id="inline-blue">mysqlBackup.sh</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置部分</span></span><br><span class="line">DB_USER=&quot;root&quot;</span><br><span class="line">DB_PASSWORD=&quot;coship&quot;</span><br><span class="line">DB_NAME_LOVEHOME=&quot;lovehome_xw&quot;</span><br><span class="line">DB_NAME_IHOME_ALBUM=&quot;ihome_album_xw&quot;</span><br><span class="line">BACKUP_DIR=&quot;/home/mysqldump/backup/&quot;</span><br><span class="line">DATE=$(date +%Y%m%d)</span><br><span class="line">BACKUP_SAVE_DAYS=7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建备份目录（如果不存在）</span></span><br><span class="line">mkdir -p $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行备份lovehome_xw</span></span><br><span class="line">/home/mysql/bin/mysqldump -u$&#123;DB_USER&#125; -p$&#123;DB_PASSWORD&#125; $&#123;DB_NAME_LOVEHOME&#125;  --ignore-table=$&#123;DB_NAME_LOVEHOME&#125;.sys_log_api_his  --ignore-table=$&#123;DB_NAME_LOVEHOME&#125;.read_msg_record_his  --ignore-table=$&#123;DB_NAME_LOVEHOME&#125;.push_record_his &gt; $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;/$&#123;DB_NAME_LOVEHOME&#125;_$&#123;DATE&#125;.sql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查lovehome_xw备份是否成功</span></span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">  echo &quot;Backup successful: $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;/$&#123;DB_NAME_LOVEHOME&#125;_$&#123;DATE&#125;.sql&quot; &gt;&gt; $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;/backup.log</span><br><span class="line">else</span><br><span class="line">  echo &quot;Backup failed for $&#123;DB_NAME_LOVEHOME&#125; at $&#123;DATE&#125;&quot; &gt;&gt; $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;/backup.log</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行备份ihome_album_xw</span></span><br><span class="line">/home/mysql/bin/mysqldump -u$&#123;DB_USER&#125; -p$&#123;DB_PASSWORD&#125; $&#123;DB_NAME_IHOME_ALBUM&#125; &gt; $&#123;BACKUP_DIR&#125;$&#123;DATE&#125;/$&#123;DB_NAME_IHOME_ALBUM&#125;_$&#123;DATE&#125;.sql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查ihome_album_xw备份是否成功</span></span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">  echo &quot;Backup successful: $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;/$&#123;DB_NAME_IHOME_ALBUM&#125;_$&#123;DATE&#125;.sql&quot; &gt;&gt; $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;/backup.log</span><br><span class="line">else</span><br><span class="line">  echo &quot;Backup failed for $&#123;DB_NAME_IHOME_ALBUM&#125; at $&#123;DATE&#125;&quot; &gt;&gt; $&#123;BACKUP_DIR&#125;/$&#123;DATE&#125;/backup.log</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cd $&#123;BACKUP_DIR&#125;</span><br><span class="line">rm -rf `find $&#123;BACKUP_DIR&#125;  -type d -mtime +$&#123;BACKUP_SAVE_DAYS&#125;` &gt;&gt; $&#123;BACKUP_DIR&#125;/backupClear.log</span><br><span class="line">echo &quot;删除$&#123;BACKUP_SAVE_DAYS&#125;天前的备份文件完成&quot; &gt;&gt; $&#123;BACKUP_DIR&#125;/backupClear.log</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>mysqldump使用绝对路径，否则通过crontab系统定时任务支持脚本备份数据为空。<br>–ignore-table用于指定备份需要忽略的表项，忽略多个表的情况下指定多次。<br>BACKUP_SAVE_DAYS参数控制备份文件只保留7天以内。</p>
<h1><span id="crontab定时任务"><span id="inline-blue">crontab定时任务</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0 1  * * * cd /DB  &amp;&amp; sh mysqlBackup.sh /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>凌晨一点执行数据库备份脚本。</p>
<p>参考：</p>
<p><a href="https://liam.page/2016/06/19/best-match-using-find-and-crontab-to-removed-outdated-files/">https://liam.page/2016/06/19/best-match-using-find-and-crontab-to-removed-outdated-files/</a></p>
<p><a href="http://www.360doc.com/content/24/0701/12/83536423_1127581357.shtml">http://www.360doc.com/content/24/0701/12/83536423_1127581357.shtml</a></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL批量插入随机数据工具mysql_random_data_load</title>
    <url>/MySQL/blogs/MySQL%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%8D%AE%E5%B7%A5%E5%85%B7mysql_random_data_load/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluemysql_random_data_load%E4%BB%8B%E7%BB%8Dspan"><span id="inline-blue">mysql_random_data_load介绍</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">下载</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%8E%8Bspan"><span id="inline-blue">解压</span></a></li>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">使用说明</span></a></li>
<li><a href="#span-idinline-blue%E7%A4%BA%E4%BE%8Bspan"><span id="inline-blue">示例</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Linux: CentOS Linux release 7.7.1908 (Core)
MySQL：5.7</code></pre>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>线上业务需要测试MySQL归档工具pt-archiver在线删除表历史数据能力，使用自动随机生成数据工具mysql_random_data_load。</p>
<h1><span id="mysql_random_data_load介绍"><span id="inline-blue">mysql_random_data_load介绍</span></span></h1><p>github项目地址：<a href="https://github.com/Percona-Lab/mysql_random_data_load">https://github.com/Percona-Lab/mysql_random_data_load</a></p>
<h1><span id="下载"><span id="inline-blue">下载</span></span></h1><p><a href="https://github.com/Percona-Lab/mysql_random_data_load/releases">https://github.com/Percona-Lab/mysql_random_data_load/releases</a>  </p>
<p><img src="/images/mysql/20241224/mysql_20241224_001.png" alt="MySQL随机数据生成工具"><br>下载最新版本即可。</p>
<h1><span id="解压"><span id="inline-blue">解压</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf mysql_random_data_load_0.1.12_Linux_x86_64.tar.gz</span><br></pre></td></tr></table></figure>
<h1><span id="使用说明"><span id="inline-blue">使用说明</span></span></h1><p><img src="/images/mysql/20241224/mysql_20241224_002.png" alt="MySQL随机数据生成工具"></p>
<h1><span id="示例"><span id="inline-blue">示例</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./mysql_random_data_load -h127.0.0.1 -uroot -p&#x27;coship&#x27; --max-threads=24  --bulk-size=3000 test t_title 5000000</span><br></pre></td></tr></table></figure>
<p>–max-threads=24: 使用24个线程来并行执行插入操作，提升数据加载的并发性。<br>–bulk-size=3000: 每次批量插入3000行数据减少插入频率降低连接开销。<br>test: 数据库名称<br>t_title：表名称<br>5000000： 生成数据总记录数</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/mysql/20241224/mysql_20241224_003.png" alt="MySQL随机数据生成工具"></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker 容器执行定时任务</title>
    <url>/Docker/blogs/Docker%E5%AE%B9%E5%99%A8%E6%89%A7%E8%A1%8C%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%B9%E5%99%A8%E6%89%A7%E8%A1%8C%E5%AE%8C%E4%B8%8D%E9%80%80%E5%87%BA%E7%9A%84%E6%96%B9%E6%B3%95span"><span id="inline-blue">容器执行完不退出的方法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 26.1.4<br>docker-compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>docker-compose 编排容器部署后发现zipkin-dependencies模块启动之后容器就退出了，因为zipkin-dependencies是基于spark执行的统计计算任务，导致后续在系统定时任务添加的定时脚本无法执行。</p>
<h1><span id="容器执行完不退出的方法"><span id="inline-blue">容器执行完不退出的方法</span></span></h1><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span>  exoplatform/ubuntu:<span class="number">20.04</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment">#拷贝jdk离线文件</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./jdk/jdk-11.0.18_linux-x64_bin.tar.gz /usr/<span class="built_in">local</span>/java</span></span><br><span class="line"><span class="comment">#设置jdk环境变量</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME=/usr/local/java/jdk-<span class="number">11.0</span>.<span class="number">18</span></span><br><span class="line"><span class="keyword">ENV</span> PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /home/photoframe/zipkin-dependencies &amp;&amp; \</span></span><br><span class="line"><span class="bash">    apt update &amp;&amp; \</span></span><br><span class="line"><span class="bash">    apt install -y cron &amp;&amp; \</span></span><br><span class="line"><span class="bash">    apt install -y vim</span></span><br><span class="line"><span class="comment"># 指定路径</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /home/photoframe/zipkin-dependencies</span></span><br><span class="line"><span class="comment">#环境变量设置</span></span><br><span class="line"><span class="keyword">ENV</span> STORAGE_TYPE=elasticsearch ES_HOSTS=http://photoframe-elasticsearch:<span class="number">9200</span></span><br><span class="line"><span class="comment">#拷贝启动脚本</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./sh/start.sh /home/photoframe/zipkin-dependencies/start.sh</span></span><br><span class="line"><span class="comment">#复制jar文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./jar/zipkin-dependencies-3.0.0.jar /home/photoframe/zipkin-dependencies/zipkin-dependencies-3.0.0.jar</span></span><br><span class="line"><span class="comment">#复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./docker-compose-wait/<span class="built_in">wait</span> /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment">#赋予执行权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> touch /etc/cron.d/crontab &amp;&amp; \</span></span><br><span class="line"><span class="bash">    <span class="built_in">echo</span> <span class="string">&quot;*/1 * * * * root /bin/sh /home/photoframe/zipkin-dependencies/start.sh&quot;</span> &gt;&gt; /etc/cron.d/crontab &amp;&amp; \</span></span><br><span class="line"><span class="bash">    chmod a+x /home/photoframe/zipkin-dependencies/start.sh &amp;&amp; \</span></span><br><span class="line"><span class="bash">    chmod 0644 /etc/cron.d/crontab &amp;&amp; \</span></span><br><span class="line"><span class="bash">    touch /var/<span class="built_in">log</span>/cron.log &amp;&amp; \</span></span><br><span class="line"><span class="bash">    service cron restart &amp;&amp; \</span></span><br><span class="line"><span class="bash">    chmod a+x /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash">  cron  &amp;&amp; tail -f /var/<span class="built_in">log</span>/cron.log</span></span><br></pre></td></tr></table></figure>

<p>关键点在于tail -f /var/log/cron.log，表示一直监控定时任务的日志输出。这样可以保证容器执行完计算任务不退出容器，保持在线状态。</p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>docker swarm</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署微服务集群(五)</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4(%E4%BA%94)/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blueswarm%E9%83%A8%E7%BD%B2span"><span id="inline-blue">swarm部署</span></a></li>
<li><a href="#span-idinline-blueswarm-%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BBspan"><span id="inline-blue">swarm 命令汇总</span></a></li>
<li><a href="#span-idinline-blueservice-%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BBspan"><span id="inline-blue">service 命令汇总</span></a></li>
<li><a href="#span-idinline-bluenode-%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BBspan"><span id="inline-blue">node 命令汇总</span></a></li>
<li><a href="#span-idinline-blue%E9%83%A8%E7%BD%B2%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98span"><span id="inline-blue">部署过程中遇到的问题</span></a><ul>
<li><a href="#span-idinline-bluedocker-stack%E4%B8%8D%E6%94%AF%E6%8C%81%E7%9A%84%E5%91%BD%E4%BB%A4span"><span id="inline-blue">docker stack不支持的命令</span></a></li>
<li><a href="#span-idinline-blue%E7%BD%91%E5%85%B3%E8%AE%BF%E9%97%AE%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%B1%E8%B4%A5span"><span id="inline-blue">网关访问微服务失败</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 26.1.4<br>docker-compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>基于docker-compose容器编排工具，实现容器在swarm集群环境下的分布式部署.</p>
<h1><span id="swarm部署"><span id="inline-blue">swarm部署</span></span></h1><p>初始化swarm集群环境下manager和worker节点<br>管理节点(指定网卡IP地址)：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker swarm init --advertise-addr=10.9.216.12</span><br></pre></td></tr></table></figure>

<p>上述命令初始化当前节点为管理节点，并生成worker节点加入swarm集群命令，类似如下(token以实际情况为准)：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker swarm join --token SWMTKN-1-40mxvjntj01uoyi0rr93ztouf2d3nfc9fg7c6546wjb45sj7r4-bsa9siqzzeibs1egwdxzfvql6 10.9.216.12:2377</span><br></pre></td></tr></table></figure>

<p>查看swarm集群割接点信息(manage节点执行):</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker node ls</span><br></pre></td></tr></table></figure>

<p>为swarm节点增加角色标签base，用于docker-swarm.yml编排service根据node.labels.role=base将容器部署到指定标签的swarm节点<br>语法：<br>docker node update –label-add <key1> –label-add <key2>=<value> <nodename><br>示例：</nodename></value></key2></key1></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker node update  --label-add role=base stmxgrb0232cv7zn4gzf5r118</span><br></pre></td></tr></table></figure>

<p>描述：<br>将stmxgrb0232cv7zn4gzf5r118节点赋予role标签base(基础服务mysql、nacos、redis、elasticsearch、rabbitmq、zipkin)</p>
<p>为swarm节点增加角色标签service，用于docker-swarm.yml编排service根据node.labels.role=service将容器部署到指定的swarm节点<br>语法：<br>docker node update –label-add <key1> –label-add <key2>=<value> <nodename><br>示例：</nodename></value></key2></key1></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker node update  --label-add role=service 3ucz3fscdmxo36wy716thaga8</span><br></pre></td></tr></table></figure>

<p>描述：<br>将3ucz3fscdmxo36wy716thaga8节点赋予role标签service(微服务)</p>
<p>interface，用于docker-swarm.yml编排interface根据node.labels.role=interface将容器部署到指定的swarm节点<br>语法：<br>docker node update –label-add <key1> –label-add <key2>=<value> <nodename><br>示例：</nodename></value></key2></key1></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker node update  --label-add role=interface 3ucz3fscdmxo36wy716thaga7</span><br></pre></td></tr></table></figure>
<p>描述：<br>将3ucz3fscdmxo36wy716thaga7节点赋予role标签interface(接口)</p>
<p>容器集群部署之前需要在部署对应容器的的swarm节点生成自定义镜像</p>
<p>方式一(Dockerfile):<br>切换到对应模块Dockerfile文件所在路径执行构建命令：</p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker build -t photoframe-mysql .</span><br></pre></td></tr></table></figure>

<p>-t:指定生成镜像名，和docker-swarm.yml文件中的对应模块的service指定image参数一致<br>. :代表了构建镜像的上下文环境，当前路径</p>
<p>方式二(docker-swarm.yml):<br>示例:<br>swarm带有base标签节点构建基础服务镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose -f docker-swarm.yml build photoframe-mysql photoframe-redis photoframe-nacos photoframe-elasticsearch photoframe-rabbitmq photoframe-sentinel photoframe-zipkin photoframe-zipkin-dependencies</span><br></pre></td></tr></table></figure>

<p>swarm带有service标签节点构建微服务镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose -f docker-swarm.yml build photoframe-gateway photoframe-auth   photoframe-admin-biz photoframe-admin-log   photoframe-quartz photoframe-nginx</span><br></pre></td></tr></table></figure>

<p>swarm带有interface标签节点构建接口微服务镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose -f docker-swarm.yml build photoframe-api-app  photoframe-api-pad</span><br></pre></td></tr></table></figure>

<p>部署服务：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stack config --compose-file docker-swarm.yml &gt; docker-swarm-process.yml</span><br><span class="line">docker stack deploy --compose-file docker-swarm-process.yml --resolve-image never photoframe</span><br></pre></td></tr></table></figure>

<p>stack: swarm集群部署的命令<br>docker stack config: 转换docker-swarm.yml配置，将env_file引用环境变量重写(docker deploy 命令不支持默认读取.env文件定义的环境变量)<br>docker stack deploy: 部署swarm栈，使用转换后的配置文件docker-swarm-process.yml<br>-c: 指定部署服务使用的docker-compose 配置文件，名称可自定义<br>photoframe: docker stack创建的栈名称<br>docker升级为swarm集群后不能再使用docker-compose命令执行docker-compose up -d(只适用单机环境)命令部署服务，需要使用docker stack命令部署</p>
<p>批量更新服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker service ls --format &#x27;&#123;&#123;.Name&#125;&#125;&#x27; | xargs -L1 docker service update --force</span><br></pre></td></tr></table></figure>

<h1><span id="swarm-命令汇总"><span id="inline-blue">swarm 命令汇总</span></span></h1><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">docker swarm init</td>
<td align="center">初始化一个 swarm 群集</td>
</tr>
<tr>
<td align="center">docker swarm join</td>
<td align="center">加入群集作为节点或管理器</td>
</tr>
<tr>
<td align="center">docker swarm join-token</td>
<td align="center">管理用于加入群集的令牌</td>
</tr>
<tr>
<td align="center">docker swarm leave</td>
<td align="center">离开 swarm 群集</td>
</tr>
<tr>
<td align="center">docker swarm unlock</td>
<td align="center">解锁 swarm 群集</td>
</tr>
<tr>
<td align="center">docker swarm unlock-key</td>
<td align="center">管理解锁钥匙</td>
</tr>
<tr>
<td align="center">docker swarm update</td>
<td align="center">更新 swarm 群集</td>
</tr>
</tbody></table>
<h1><span id="service-命令汇总"><span id="inline-blue">service 命令汇总</span></span></h1><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">docker node</td>
<td align="center">service ls</td>
</tr>
<tr>
<td align="center">docker node</td>
<td align="center">service ps</td>
</tr>
<tr>
<td align="center">docker node</td>
<td align="center">service inspect</td>
</tr>
<tr>
<td align="center">docker node</td>
<td align="center">service update</td>
</tr>
<tr>
<td align="center">docker node</td>
<td align="center">service rm</td>
</tr>
</tbody></table>
<h1><span id="node-命令汇总"><span id="inline-blue">node 命令汇总</span></span></h1><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">docker node demote</td>
<td align="center">从 swarm 群集管理器中降级一个或多个节点</td>
</tr>
<tr>
<td align="center">docker node promote</td>
<td align="center">将一个或多个节点推入到群集管理器中(也就是升级节点)</td>
</tr>
<tr>
<td align="center">docker node inspect</td>
<td align="center">显示一个或多个节点的详细信息</td>
</tr>
<tr>
<td align="center">docker node ls</td>
<td align="center">列出 swarm 群集中的节点</td>
</tr>
<tr>
<td align="center">docker node ps</td>
<td align="center">列出在一个或多个节点上运行的任务，默认为当前节点</td>
</tr>
<tr>
<td align="center">docker node rm</td>
<td align="center">从 swarm 群集删除一个或多个节点</td>
</tr>
<tr>
<td align="center">docker node update</td>
<td align="center">更新一个节点</td>
</tr>
</tbody></table>
<h1><span id="部署过程中遇到的问题"><span id="inline-blue">部署过程中遇到的问题</span></span></h1><h2><span id="docker-stack不支持的命令"><span id="inline-blue">docker stack不支持的命令</span></span></h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">build</span></span><br><span class="line"><span class="string">cgroup_parent</span></span><br><span class="line"><span class="string">container_name</span></span><br><span class="line"><span class="string">devices</span></span><br><span class="line"><span class="string">tmpfs</span></span><br><span class="line"><span class="string">external_links</span></span><br><span class="line"><span class="string">links</span></span><br><span class="line"><span class="string">network_mode</span></span><br><span class="line"><span class="string">restart</span></span><br><span class="line"><span class="string">security_opt</span></span><br><span class="line"><span class="string">stop_signal</span></span><br><span class="line"><span class="string">sysctls</span></span><br><span class="line"><span class="string">userns_mode</span></span><br></pre></td></tr></table></figure>

<h2><span id="网关访问微服务失败"><span id="inline-blue">网关访问微服务失败</span></span></h2><p>原因就是我们在docker-compose.yml中定义swarm服务发现的模式问题：<br>endpoint_mode：</p>
<pre><code>vip: 这个是默认的方案。即通过虚拟的IP对外暴露服务，客户端无法察觉有多少个节点提供服务，也不知道实际提供服务的IP和端口。

dnsrr：这个是DNS的轮询调度。客户端访问的时候，Docker会通过DNS列表返回对应的服务一系列IP地址，客户连接其中的一个。这种方式通常用于使用自己的负载均衡器，或者window和linux的混合应用。</code></pre>
<p>我们在定义网关的时候使用的是deploy.endpoint_mode=vip，这个是没问题的 ，但是在定义网关后面的<br>子服务的时候就需要使用deploy.endpoint_mode=dnsrr这个模式了，因为我们是个集群，每个子服务存在<br>好几个副本，在网关路由的时候是通过服务名称去发现子服务的，而vip是通过ip地址发现的，所以需要使用dnsrr模式<br>在服务使用deploy.endpoint_mode=dnsrr模式后不能使用如下方式暴露端口：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ports:</span> <span class="string">&quot;8080:8080&quot;</span></span><br></pre></td></tr></table></figure>

<p>需要这样定义：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9411</span></span><br><span class="line">  <span class="attr">published:</span> <span class="number">9411</span></span><br><span class="line">  <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">  <span class="attr">mode:</span> <span class="string">host</span></span><br></pre></td></tr></table></figure>

<p>mode:</p>
<p>  ingress: 通过 Ingress 模式发布的服务，可以保证从 Swarm 集群内任一节点（即使没有运行服务的副本）都能访问该服务；以 Host 模式发布的服务只能通过运行服务副本的节点来访问。<br>  host: 表示只有外部请求发送到运行了服务副本的节点才可以访问该服务。</p>
<p>下图展示两种模式的区别：<br><img src="/images/docker/20241213/Docker_docker_swarm_20241213_001.png" alt="Dockerfile docker-swarm"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>docker swarm</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署微服务集群(四)</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4(%E5%9B%9B)/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluedocker%E6%9E%84%E5%BB%BA%E4%B8%8A%E4%B8%8B%E6%96%87%E7%8E%AF%E5%A2%83span"><span id="inline-blue">docker构建上下文环境</span></a></li>
<li><a href="#span-idinline-blue%E6%8B%B7%E8%B4%9D%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E4%B8%8A%E4%B8%8B%E6%96%87%E5%86%85%E5%AE%B9span"><span id="inline-blue">拷贝微服务镜像构建上下文内容</span></a></li>
<li><a href="#span-idinline-blue%E9%95%9C%E5%83%8F%E6%89%B9%E9%87%8F%E5%AF%BC%E5%87%BAspan"><span id="inline-blue">镜像批量导出</span></a></li>
<li><a href="#span-idinline-blue%E9%95%9C%E5%83%8F%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5span"><span id="inline-blue">镜像批量导入</span></a></li>
<li><a href="#span-idinline-blue%E8%87%AA%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%ACspan"><span id="inline-blue">自动执行脚本</span></a></li>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">使用说明</span></a></li>
<li><a href="#span-idinline-blue%E9%83%A8%E7%BD%B2%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98span"><span id="inline-blue">部署过程中遇到的问题</span></a><ul>
<li><a href="#span-idinline-blue%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E9%97%AE%E9%A2%98span"><span id="inline-blue">端口映射问题</span></a></li>
<li><a href="#span-idinline-blueelasticseach%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98span"><span id="inline-blue">Elasticseach权限问题</span></a></li>
<li><a href="#span-idinline-blue%E6%8E%A5%E5%8F%A3%E8%8E%B7%E5%8F%96%E9%AA%8C%E8%AF%81%E7%A0%81%E5%A4%B1%E8%B4%A5span"><span id="inline-blue">接口获取验证码失败</span></a></li>
<li><a href="#span-idinline-bluedepends_on%E5%AF%BC%E8%87%B4%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8span"><span id="inline-blue">depends_on导致容器启动异常</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 26.1.4<br>docker-compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>基于docker-compose容器编排工具，实现容器启动、停止、删除，镜像批量导入导出，微服务打包自动拷贝镜像构建上下文环境。</p>
<h1><span id="docker构建上下文环境"><span id="inline-blue">docker构建上下文环境</span></span></h1><p><img src="/images/docker/20241206/Docker_docker_compose_20241206_001.png" alt="Dockerfile docker-compose"></p>
<h1><span id="拷贝微服务镜像构建上下文内容"><span id="inline-blue">拷贝微服务镜像构建上下文内容</span></span></h1><p>copy.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制项目的文件到对应docker路径，便于一键生成镜像。</span></span><br><span class="line">usage() &#123;</span><br><span class="line">	echo &quot;Usage: sh copy.sh&quot;</span><br><span class="line">	exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> copy sql</span></span><br><span class="line">echo &quot;begin copy sql &quot;</span><br><span class="line">cp ../DB/MySQL/init/nacos_config.sql ./mysql/db/sql</span><br><span class="line">cp ../DB/MySQL/init/init_table.sql ./mysql/db/sql</span><br><span class="line">cp ../DB/MySQL/init/init_data.sql ./mysql/db/sql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> copy html</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;begin copy html &quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp -r ../photoframe-ui/dist/** ./nginx/html/dist</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> copy jar</span></span><br><span class="line">echo &quot;begin copy photoframe-gateway&quot;</span><br><span class="line">cp ../photoframe-gateway/target/photoframe-gateway.jar ./photoframe/photoframe-gateway/jar</span><br><span class="line"></span><br><span class="line">echo &quot;begin copy photoframe-auth&quot;</span><br><span class="line">cp ../photoframe-auth/target/photoframe-auth.jar ./photoframe/photoframe-auth/jar</span><br><span class="line"></span><br><span class="line">echo &quot;begin copy photoframe-admin-biz&quot;</span><br><span class="line">cp ../photoframe-admin/photoframe-admin-biz/target/photoframe-admin-biz.jar  ./photoframe/photoframe-admin-biz/jar</span><br><span class="line"></span><br><span class="line">echo &quot;begin copy photoframe-admin-log&quot;</span><br><span class="line">cp ../photoframe-admin/photoframe-admin-log/target/photoframe-admin-log.jar  ./photoframe/photoframe-admin-log/jar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo &quot;begin copy photoframe-api-app&quot;</span><br><span class="line">cp ../photoframe-api/photoframe-api-app/target/photoframe-api-app.jar ./photoframe/photoframe-api-app/jar</span><br><span class="line"></span><br><span class="line">echo &quot;begin copy photoframe-api-pad&quot;</span><br><span class="line">cp ../photoframe-api/photoframe-api-pad/target/photoframe-api-pad.jar ./photoframe/photoframe-api-pad/jar</span><br><span class="line"></span><br><span class="line">echo &quot;begin copy photoframe-quartz&quot;</span><br><span class="line">cp ../photoframe-quartz/target/photoframe-quartz.jar ./photoframe/photoframe-quartz/jar</span><br></pre></td></tr></table></figure>

<p>作用：<br>    拷贝MySQL数据库初始化脚本到MySQL镜像构建上下文环境<br>    拷贝前端UI到nginx镜像构建上下文环境<br>    拷贝微服务打包生成的jar包到对应镜像构建上下文环境</p>
<p>windows环境执行copy.sh需要git环境支持    </p>
<h1><span id="镜像批量导出"><span id="inline-blue">镜像批量导出</span></span></h1><p>export.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">rm -rf  images</span><br><span class="line">rm -rf tarname.txt</span><br><span class="line">docker images &gt; images.txt</span><br><span class="line">awk &#x27;&#123;print $1&#125;&#x27; images.txt &gt; REPOSITORY.txt</span><br><span class="line">sed -i &#x27;1d&#x27; REPOSITORY.txt</span><br><span class="line">mkdir images</span><br><span class="line">touch tarname.txt</span><br><span class="line">while read LINE</span><br><span class="line">do</span><br><span class="line">docker save $LINE &gt; ./images/$&#123;LINE//\//_&#125;.tar</span><br><span class="line">echo &quot;$&#123;LINE//\//_&#125;.tar&quot; &gt;&gt; tarname.txt</span><br><span class="line">done &lt; REPOSITORY.txt</span><br><span class="line">rm -rf images.txt REPOSITORY.txt</span><br><span class="line">cp import.sh ./images/</span><br><span class="line">echo &quot;images export finish&quot;</span><br></pre></td></tr></table></figure>
<p>批量导出docker环境下的镜像到当前目录images文件夹下</p>
<h1><span id="镜像批量导入"><span id="inline-blue">镜像批量导入</span></span></h1><p>import.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">while read LINE</span><br><span class="line">do</span><br><span class="line">docker  load -i ./images/$LINE</span><br><span class="line">echo ok</span><br><span class="line">done &lt; tarname.txt</span><br><span class="line">echo finish</span><br></pre></td></tr></table></figure>
<p>导入当前目录下images文件夹下的镜像</p>
<h1><span id="自动执行脚本"><span id="inline-blue">自动执行脚本</span></span></h1><p>run.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用说明，用来提示输入参数</span></span><br><span class="line">usage()</span><br><span class="line">&#123;</span><br><span class="line">	echo &quot;Usage: sh run.sh [port|base|modules|zipkin|stop|stop_base|stop_modules|stop_zipkin|rm|rm_base|rm_modules|rm_zipkin]&quot;</span><br><span class="line">	echo &quot; 启动基础服务(mysql、elasticsearch、redis、rabbitmq、nacos): sh run.sh base &quot;</span><br><span class="line">	echo &quot; 启动微服务: sh run.sh modules &quot;</span><br><span class="line">	echo &quot; 停止所有docker服务: sh run.sh stop &quot;</span><br><span class="line">	exit 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开启所需端口</span></span><br><span class="line">port()</span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">  #</span><span class="bash">mysql</span></span><br><span class="line">	firewall-cmd --add-port=3306/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">nacos</span></span><br><span class="line">	firewall-cmd --add-port=8848/tcp --permanent</span><br><span class="line">	firewall-cmd --add-port=8849/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">elasticsearch</span></span><br><span class="line">	firewall-cmd --add-port=9200/tcp --permanent</span><br><span class="line">	firewall-cmd --add-port=9300/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">zipkin</span></span><br><span class="line">	firewall-cmd --add-port=9411/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">sentinel</span></span><br><span class="line">	firewall-cmd --add-port=8180/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">rabbitmq</span></span><br><span class="line">	firewall-cmd --add-port=5672/tcp --permanent</span><br><span class="line">	firewall-cmd --add-port=15672/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">redis</span></span><br><span class="line">	firewall-cmd --add-port=6379/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">photoframe-admin-biz</span></span><br><span class="line">	firewall-cmd --add-port=9020/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">photoframe-admin-log</span></span><br><span class="line">	firewall-cmd --add-port=9021/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">photoframe-api-app</span></span><br><span class="line">	firewall-cmd --add-port=9006/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">photoframe-api-pad</span></span><br><span class="line">	firewall-cmd --add-port=9007/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">photoframe-auth</span></span><br><span class="line">	firewall-cmd --add-port=9003/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">photoframe-gateway</span></span><br><span class="line">	firewall-cmd --add-port=9001/tcp --permanent</span><br><span class="line"><span class="meta">	#</span><span class="bash">nginx</span></span><br><span class="line">	firewall-cmd --add-port=8080/tcp --permanent</span><br><span class="line">	service firewalld restart</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动基础环境（必须）</span></span><br><span class="line">base()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;启动基础服务容器(photoframe-mysql、photoframe-redis、photoframe-nacos、photoframe-elasticsearch、photoframe-rabbitmq)&quot;</span><br><span class="line">	docker-compose up -d photoframe-mysql photoframe-redis photoframe-nacos photoframe-elasticsearch photoframe-rabbitmq</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动程序模块（必须）</span></span><br><span class="line">modules()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;启动微服务模块容器&quot;</span><br><span class="line">	docker-compose up -d  photoframe-gateway photoframe-auth  photoframe-api-app  photoframe-api-pad photoframe-admin-biz photoframe-admin-log   photoframe-quartz photoframe-nginx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动链路追踪（可选）</span></span><br><span class="line">zipkin()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;启动zipkin链路追踪容器&quot;</span><br><span class="line">	docker-compose up -d photoframe-zipkin photoframe-zipkin-dependencies</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭所有环境/模块</span></span><br><span class="line">stop()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;停止所有Docker容器&quot;</span><br><span class="line">	docker-compose stop</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭基础服务</span></span><br><span class="line">stop_base()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;停止基础服务容器(photoframe-mysql、photoframe-redis、photoframe-nacos、photoframe-elasticsearch、photoframe-rabbitmq)&quot;</span><br><span class="line">	docker-compose stop photoframe-mysql photoframe-redis photoframe-nacos photoframe-elasticsearch photoframe-rabbitmq</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭微服务模块</span></span><br><span class="line">stop_modules()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;停止微服务容器&quot;</span><br><span class="line">	docker-compose stop photoframe-gateway photoframe-auth  photoframe-api-app  photoframe-api-pad photoframe-admin-biz photoframe-admin-log   photoframe-quartz photoframe-nginx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭zipkin</span></span><br><span class="line">stop_modules()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;停止zipkin&quot;</span><br><span class="line">	docker-compose stop photoframe-zipkin photoframe-zipkin-dependencies</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除所有环境/模块</span></span><br><span class="line">rm()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;删除所有容器&quot;</span><br><span class="line">	docker-compose rm</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除基础容器</span></span><br><span class="line">rm_base()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;删除基础容器&quot;</span><br><span class="line">	docker-compose rm photoframe-mysql photoframe-redis photoframe-nacos photoframe-elasticsearch photoframe-rabbitmq</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除微服务容器</span></span><br><span class="line">rm_modules()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;删除微服务容器&quot;</span><br><span class="line">	docker-compose rm photoframe-gateway photoframe-auth  photoframe-api-app  photoframe-api-pad photoframe-admin-biz photoframe-admin-log   photoframe-quartz photoframe-nginx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除zipkin容器</span></span><br><span class="line">stop_zipkin()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;删除zipkin容器&quot;</span><br><span class="line">	docker-compose stop photoframe-zipkin photoframe-zipkin-dependencies</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 根据输入参数，选择执行对应方法，不输入则执行使用说明</span></span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">&quot;port&quot;)</span><br><span class="line">	port</span><br><span class="line">;;</span><br><span class="line">&quot;base&quot;)</span><br><span class="line">	base</span><br><span class="line">;;</span><br><span class="line">&quot;modules&quot;)</span><br><span class="line">	modules</span><br><span class="line">;;</span><br><span class="line">&quot;zipkin&quot;)</span><br><span class="line">	zipkin</span><br><span class="line">;;</span><br><span class="line">&quot;stop&quot;)</span><br><span class="line">	stop</span><br><span class="line">;;</span><br><span class="line">&quot;stop_base&quot;)</span><br><span class="line">	stop_base</span><br><span class="line">;;</span><br><span class="line">&quot;stop_modules&quot;)</span><br><span class="line">	stop_modules</span><br><span class="line">;;</span><br><span class="line">&quot;stop_zipkin&quot;)</span><br><span class="line">	stop_zipkin</span><br><span class="line">;;</span><br><span class="line">&quot;rm&quot;)</span><br><span class="line">	rm</span><br><span class="line">;;</span><br><span class="line">&quot;rm_base&quot;)</span><br><span class="line">	rm_base</span><br><span class="line">;;</span><br><span class="line">&quot;rm_modules&quot;)</span><br><span class="line">	rm_modules</span><br><span class="line">;;</span><br><span class="line">&quot;rm_zipkin&quot;)</span><br><span class="line">	rm_zipkin</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">	usage</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h1><span id="使用说明"><span id="inline-blue">使用说明</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">各模块jar包拷贝至对应docker环境目录(idea terminal需要配置git bash工具)</span><br><span class="line">sh copy.sh</span><br><span class="line"></span><br><span class="line">docker基础环境启动(mysql、redis、nacos)</span><br><span class="line">sh run.sh base</span><br><span class="line"></span><br><span class="line">docker项目核心环境启动(gateway、auth、admin、admin-log、quartz、api-app、api-pad)</span><br><span class="line">sh run.sh modules</span><br><span class="line"></span><br><span class="line">docker镜像批量导出</span><br><span class="line">sh export.sh</span><br><span class="line"></span><br><span class="line">docker镜像批量导入</span><br><span class="line">sh import.sh</span><br></pre></td></tr></table></figure>

<h1><span id="部署过程中遇到的问题"><span id="inline-blue">部署过程中遇到的问题</span></span></h1><h2><span id="端口映射问题"><span id="inline-blue">端口映射问题</span></span></h2><p>容器端口映射配置需要使用双引号，如下所示：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br></pre></td></tr></table></figure>

<h2><span id="elasticseach权限问题"><span id="inline-blue">Elasticseach权限问题</span></span></h2><p>Elasticsearch容器启动提示es.log not found ,没有对应的写入权限。</p>
<p>在Dockerfile里面创建对应的es用户，创建对应的日志目录，并且赋予了可读可写权限之外，docker-compose容器编排也加入了对应的权限赋予操作</p>
<p>Dockerfile</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7</span></span><br><span class="line"><span class="comment">#维护者</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment">#拷贝安装包、创建elasticsearch用户elasticsearch、elasticsearch用户权限设置</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./tar/elasticsearch-8.8.0-linux-x86_64.tar.gz /usr/<span class="built_in">local</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span> &amp;&amp; tar -zxvf elasticsearch-8.8.0-linux-x86_64.tar.gz &amp;&amp;  \</span></span><br><span class="line"><span class="bash">rm -f elasticsearch-8.8.0-linux-x86_64.tar.gz &amp;&amp; \</span></span><br><span class="line"><span class="bash">useradd es  &amp;&amp; \</span></span><br><span class="line"><span class="bash">chown -R es:es /usr/<span class="built_in">local</span>/elasticsearch-8.8.0 &amp;&amp; \</span></span><br><span class="line"><span class="bash">chmod -R 777  /usr/<span class="built_in">local</span>/elasticsearch-8.8.0</span></span><br><span class="line"><span class="comment">#拷贝配置文件</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./config/ /usr/<span class="built_in">local</span>/elasticsearch-8.8.0/config/</span></span><br><span class="line"><span class="comment">#elasticsearch</span></span><br><span class="line"><span class="keyword">USER</span> es</span><br><span class="line"><span class="comment">#WORKDIR指令用于指定容器的一个目录， 容器启动时执行的命令会在该目录下执行</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /usr/<span class="built_in">local</span>/elasticsearch-8.8.0</span></span><br><span class="line"><span class="comment">#挂载匿名卷</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;/usr/local/elasticsearch-8.8.0/data&quot;</span>,<span class="string">&quot;/usr/local/elasticsearch-8.8.0/config&quot;</span>,<span class="string">&quot;/usr/local/elasticsearch-8.8.0/logs&quot;</span>]</span></span><br><span class="line"><span class="comment">#CMD用于设置默认执行的命令</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;/usr/local/elasticsearch-8.8.0/bin/elasticsearch&quot;</span>]</span></span><br><span class="line"><span class="comment">#暴露服务端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">9200</span> <span class="number">9300</span></span><br></pre></td></tr></table></figure>

<p>docker-compose.yml 对应服务定义如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">photoframe-elasticsearch:</span></span><br><span class="line">  <span class="attr">container_name:</span> <span class="string">photoframe-elasticsearch</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">context:</span> <span class="string">./elasticsearch</span></span><br><span class="line">  <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">  <span class="attr">networks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">  <span class="comment"># 开启内存锁定</span></span><br><span class="line">    <span class="attr">bootstrap.memory_lock:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ES_JAVA_OPTS:</span> <span class="string">&quot;-Xms4g -Xmx4g&quot;</span></span><br><span class="line">  <span class="comment"># 指定单节点启动</span></span><br><span class="line">    <span class="attr">discovery.type:</span> <span class="string">single-node</span></span><br><span class="line">  <span class="attr">ulimits:</span></span><br><span class="line">    <span class="comment"># 取消内存相关限制 用于开启内存锁定</span></span><br><span class="line">    <span class="attr">memlock:</span></span><br><span class="line">      <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">      <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./elasticsearch/data:/usr/local/elasticsearch-8.8.0/data</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./elasticsearch/logs:/usr/local/elasticsearch-8.8.0/logs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./elasticsearch/config:/usr/local/elasticsearch-8.8.0/config</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./elasticsearch/plugins:/usr/local/elasticsearch-8.8.0/plugins</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;9200:9200&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;9300:9300&quot;</span></span><br></pre></td></tr></table></figure>

<p>最后发现挂载的宿主机目录也需要赋予读写权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chown -R es:es /usr/local/docker/elasticsearch</span><br><span class="line">chmod -R 777  /usr/local/docker/elasticsearch</span><br></pre></td></tr></table></figure>

<h2><span id="接口获取验证码失败"><span id="inline-blue">接口获取验证码失败</span></span></h2><p>报错信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.NullPointerException</span><br><span class="line">        at sun.awt.FontConfiguration.getVersion(FontConfiguration.java:1264)</span><br><span class="line">        at sun.awt.FontConfiguration.readFontConfigFile(FontConfiguration.java:219)</span><br><span class="line">        at sun.awt.FontConfiguration.init(FontConfiguration.java:107)</span><br><span class="line">        at sun.awt.X11FontManager.createFontConfiguration(X11FontManager.java:776)</span><br><span class="line">        at sun.font.SunFontManager$2.run(SunFontManager.java:431)</span><br><span class="line">        at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">        at sun.font.SunFontManager.&lt;init&gt;(SunFontManager.java:376)</span><br><span class="line">        at sun.awt.X11FontManager.&lt;init&gt;(X11FontManager.java:57)</span><br><span class="line">        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)</span><br><span class="line">        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</span><br><span class="line">        at java.lang.reflect.Constructor.newInstance(Constructor.java:422)</span><br><span class="line">        at java.lang.Class.newInstance(Class.java:442)</span><br><span class="line">        at sun.font.FontManagerFactory$1.run(FontManagerFactory.java:83)</span><br><span class="line">        at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">        at sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74)</span><br><span class="line">        at java.awt.Font.&lt;init&gt;(Font.java:614)</span><br><span class="line">        at java.awt.Font.createFont(Font.java:1056)</span><br><span class="line">        at Main$.delayedEndpoint$Main$1(Main.scala:32)</span><br><span class="line">        at Main$delayedInit$body.apply(Main.scala:11)</span><br><span class="line">        at scala.Function0$class.apply$mcV$sp(Function0.scala:40)</span><br><span class="line">        at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)</span><br><span class="line">        at scala.App$$anonfun$main$1.apply(App.scala:76)</span><br><span class="line">        at scala.App$$anonfun$main$1.apply(App.scala:76)</span><br><span class="line">        at scala.collection.immutable.List.foreach(List.scala:381)</span><br><span class="line">        at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:35)</span><br><span class="line">        at scala.App$class.main(App.scala:76)</span><br><span class="line">        at Main$.main(Main.scala:11)</span><br><span class="line">        at Main.main(Main.scala)</span><br></pre></td></tr></table></figure>

<p>原因是因为使用的java8精简基础镜像缺失相应的依赖，更改基础镜像即可。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--- FROM openjdk:8-jre-alpine</span><br><span class="line">+++ FROM openjdk:8-jre</span><br></pre></td></tr></table></figure>

<h2><span id="depends_on导致容器启动异常"><span id="inline-blue">depends_on导致容器启动异常</span></span></h2><p>depends_on配置项控制容器的启动顺序，只能保证容器启动顺序，不能实现被依赖容器服务启动完成的情况下再去启动相应的服务，导致加载异常，naocs依赖mysql,但不能保证MySQL服务可用的情况下去启动nacos,导致启动异常。</p>
<p>容器的依赖改用docker-compose-wait，实现容器间的心跳检测</p>
<p>Dockerfile文件加入docker-compose-wait支持：</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> nacos/nacos-server:v2.<span class="number">1.1</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment"># 挂载目录</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /home/nacos</span></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /home/nacos</span></span><br><span class="line"><span class="comment"># 指定路径</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /home/nacos</span></span><br><span class="line"><span class="comment">#复制启动脚本</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./bin/docker-startup.sh /bin/docker-startup.sh</span></span><br><span class="line"><span class="comment">#赋予初始化脚本执行权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;chmod&quot;</span>, <span class="string">&quot;+x&quot;</span>, <span class="string">&quot;/bin/docker-startup.sh&quot;</span>]</span></span><br><span class="line"><span class="comment">#复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./docker-compose-wait/<span class="built_in">wait</span> /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment">#赋予检测脚本执行权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;chmod&quot;</span>, <span class="string">&quot;+x&quot;</span>, <span class="string">&quot;/wait&quot;</span>]</span></span><br><span class="line"><span class="comment"># 复制application.properties文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./conf/application.properties /home/nacos/conf/application.properties</span></span><br><span class="line"><span class="comment"># 复制nacos-logback.xml文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./conf/nacos-logback.xml /home/nacos/conf/nacos-logback.xml</span></span><br><span class="line"><span class="comment">#初始化命令</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> /<span class="built_in">wait</span> &amp;&amp; bin/docker-startup.sh</span></span><br></pre></td></tr></table></figure>

<p>docker-compose-wait下载地址：<a href="https://github.com/ufoscout/docker-compose-wait/releases">https://github.com/ufoscout/docker-compose-wait/releases</a></p>
<p>docker-compose.yml编排工具加入对应的环境变量WAIT_HOSTS、WAIT_TIMEOUT</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">photoframe-nacos:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">photoframe-nacos</span></span><br><span class="line">  <span class="attr">env_file:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">.env</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">context:</span> <span class="string">./nacos</span></span><br><span class="line">  <span class="attr">networks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="attr">MODE:</span> <span class="string">standalone</span></span><br><span class="line">    <span class="attr">PREFER_HOST_MODE:</span> <span class="string">ip</span></span><br><span class="line">    <span class="attr">SPRING_DATASOURCE_PLATFORM:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">MYSQL_SERVICE_HOST:</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="attr">MYSQL_SERVICE_PORT:</span> <span class="number">3306</span></span><br><span class="line">    <span class="attr">MYSQL_SERVICE_USER:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">MYSQL_SERVICE_PASSWORD:</span> <span class="string">coship</span></span><br><span class="line">    <span class="attr">MYSQL_SERVICE_DB_NAME:</span> <span class="string">nacos_config</span></span><br><span class="line">    <span class="attr">JVM_XMS:</span> <span class="string">1g</span></span><br><span class="line">    <span class="attr">JVM_XMX:</span> <span class="string">1g</span></span><br><span class="line">    <span class="attr">JVM_XMN:</span> <span class="string">128m</span></span><br><span class="line">    <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306</span></span><br><span class="line">    <span class="attr">WAIT_TIMEOUT:</span> <span class="number">120</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./nacos/logs/:/home/nacos/logs</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./nacos/conf/:/home/nacos/conf</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">8848</span></span><br><span class="line">    <span class="attr">published:</span> <span class="number">8848</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9848</span></span><br><span class="line">    <span class="attr">published:</span> <span class="number">9848</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">target:</span> <span class="number">9849</span></span><br><span class="line">    <span class="attr">published:</span> <span class="number">9849</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">tcp</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">host</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">replicated</span></span><br><span class="line">    <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">endpoint_mode:</span> <span class="string">vip</span></span><br><span class="line">    <span class="attr">restart_policy:</span></span><br><span class="line">      <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">3s</span></span><br><span class="line">      <span class="attr">max_attempts:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">window:</span> <span class="string">30s</span></span><br><span class="line">    <span class="attr">rollback_config:</span></span><br><span class="line">      <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">5s</span></span><br><span class="line">      <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">      <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">      <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">    <span class="attr">update_config:</span></span><br><span class="line">      <span class="attr">parallelism:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">failure_action:</span> <span class="string">pause</span></span><br><span class="line">      <span class="attr">monitor:</span> <span class="string">15s</span></span><br><span class="line">      <span class="attr">max_failure_ratio:</span> <span class="number">0</span></span><br><span class="line">      <span class="attr">order:</span> <span class="string">stop-first</span></span><br><span class="line">    <span class="attr">placement:</span></span><br><span class="line">      <span class="attr">constraints:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">node.labels.role==base</span></span><br></pre></td></tr></table></figure>

<p>多个依赖服务的情况下采用逗号分隔</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br></pre></td></tr></table></figure>

<p>docker-compose.yml容器编排工具对应的服务没有定义WAIT_HOSTS环境变量的情况下，Dockerfile添加docker-compsoe-wait支持不生效</p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>docker-compose</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署微服务集群(三)</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4(%E4%B8%89)/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluedocker-compose%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E4%B8%8Edocker-%E5%BC%95%E6%93%8E%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94span"><span id="inline-blue">docker-compose文件格式与docker 引擎版本对应</span></a></li>
<li><a href="#span-idinline-bluedocker-composeymlspan"><span id="inline-blue">docker-compose.yml</span></a><ul>
<li><a href="#span-idinline-bluedocker-compose-v3%E7%89%88%E6%9C%AC%E9%85%8D%E7%BD%AE%E9%A1%B9%E8%AF%AD%E6%B3%95span"><span id="inline-blue">docker-compose V3版本配置项语法</span></a><ul>
<li><a href="#span-idinline-blueversionspan"><span id="inline-blue">version</span></a></li>
<li><a href="#span-idinline-bluebuildspan"><span id="inline-blue">build</span></a></li>
<li><a href="#span-idinline-bluecontextspan"><span id="inline-blue">context</span></a></li>
<li><a href="#span-idinline-bluedockerfilespan"><span id="inline-blue">dockerfile</span></a></li>
<li><a href="#span-idinline-blueargspan"><span id="inline-blue">ARG</span></a></li>
<li><a href="#span-idinline-bluecache_fromspan"><span id="inline-blue">cache_from</span></a></li>
<li><a href="#span-idinline-bluelabelspan"><span id="inline-blue">label</span></a></li>
<li><a href="#span-idinline-bluenetworkspan"><span id="inline-blue">network</span></a></li>
<li><a href="#span-idinline-blueshm_sizespan"><span id="inline-blue">shm_size</span></a></li>
<li><a href="#span-idinline-bluetargetspan"><span id="inline-blue">target</span></a></li>
<li><a href="#span-idinline-bluecap_add-cap_dropspan"><span id="inline-blue">cap_add、cap_drop</span></a></li>
<li><a href="#span-idinline-bluecgroup_parentspan"><span id="inline-blue">cgroup_parent</span></a></li>
<li><a href="#span-idinline-bluecommandspan"><span id="inline-blue">command</span></a></li>
<li><a href="#span-idinline-bluecontainer_namespan"><span id="inline-blue">container_name</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 26.1.4<br>docker-compose: v2.25.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>为了更好的管理docker镜像和容器服务，引入docker-compose容器编排工具，统一配置和集成微服务和基础服务</p>
<h1><span id="docker-compose文件格式与docker-引擎版本对应"><span id="inline-blue">docker-compose文件格式与docker 引擎版本对应</span></span></h1><p>docker-compose和docker engine版本说明：</p>
<table>
<thead>
<tr>
<th align="center">docker-compose文件格式</th>
<th align="center">Docker compose 版本</th>
<th align="center">Docker 引擎</th>
</tr>
</thead>
<tbody><tr>
<td align="center">3.8</td>
<td align="center">1.13.0+</td>
<td align="center">19.03.0+</td>
</tr>
<tr>
<td align="center">3.7</td>
<td align="center">1.13.0+</td>
<td align="center">18.06.0+</td>
</tr>
<tr>
<td align="center">3.6</td>
<td align="center">1.13.0+</td>
<td align="center">18.02.0+</td>
</tr>
<tr>
<td align="center">3.5</td>
<td align="center">1.13.0+</td>
<td align="center">17.12.0+</td>
</tr>
<tr>
<td align="center">3.4</td>
<td align="center">1.13.0+</td>
<td align="center">17.09.0+</td>
</tr>
<tr>
<td align="center">3.3</td>
<td align="center">1.13.0+</td>
<td align="center">17.06.0+</td>
</tr>
<tr>
<td align="center">3.2</td>
<td align="center">1.13.0+</td>
<td align="center">17.04.0+</td>
</tr>
<tr>
<td align="center">3.1</td>
<td align="center">1.13.1+</td>
<td align="center">1.13.1+</td>
</tr>
<tr>
<td align="center">3.0</td>
<td align="center">1.13.0+</td>
<td align="center">1.13.0+</td>
</tr>
<tr>
<td align="center">2.4</td>
<td align="center">1.21.0+</td>
<td align="center">17.12.0+</td>
</tr>
<tr>
<td align="center">2.3</td>
<td align="center">1.16.0+</td>
<td align="center">17.06.0+</td>
</tr>
<tr>
<td align="center">2.2</td>
<td align="center">1.13.0+</td>
<td align="center">1.13.0+</td>
</tr>
<tr>
<td align="center">2.1</td>
<td align="center">1.9.0+</td>
<td align="center">1.12.0+</td>
</tr>
<tr>
<td align="center">2.0</td>
<td align="center">1.6+</td>
<td align="center">1.10.0+</td>
</tr>
<tr>
<td align="center">1.0</td>
<td align="center">1.6</td>
<td align="center">1.10</td>
</tr>
</tbody></table>
<p>docker-compose文件格式一共有3个版本，V1,V2,V3<br>V1:<br>    docker-compose-1.6之前版本配合Dokcer engine-1.10.0版本兼容V1文件格式<br>    未声明版本的Compose 文件被视为”版本 1”。在这些文件中，所有服务都在文档的根目录下声明,目前已弃用。<br>    V1文件无法声明命名volume、network、build参数。<br>    示例：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">web:</span></span><br><span class="line">  <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&quot;8000:5000&quot;</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">.:/code</span></span><br><span class="line">  <span class="attr">links:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">redis:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">redis</span></span><br></pre></td></tr></table></figure>

<p>V2:<br>    docker-compose-1.6至1.21.0版本配合Docker engine-1.10.0至1.13.0版本兼容V2文件格式<br>    版本特性：<br>    支持 depends_on 关键字定义服务之间的依赖关系。<br>    支持 healthcheck 关键字定义健康检查。<br>    支持 constraints 关键字定义服务部署约束。<br>    支持 secrets 关键字定义加密数据。<br>    支持 configs 关键字定义配置文件。<br>    支持 scale 关键字定义服务副本数量。<br>    支持 deploy 关键字定义服务的部署方式</p>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">version: &quot;2.4&quot;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">      redis:</span><br><span class="line">        condition: service_started</span><br><span class="line">  redis:</span><br><span class="line">    image: redis</span><br><span class="line">  db:</span><br><span class="line">    image: postgres</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: &quot;exit 0&quot;</span><br></pre></td></tr></table></figure>

<p>V3:<br>    docker-compose-1.13.0版本配合Docker engine-1.13.0至19.03.0版本兼容V3文件格式,主要是为了解决docker-compose支持集群swarm模式部署<br>    版本特性：<br>    支持新的服务控制指令，如 up, down, start, stop, restart, kill, ps, logs, pause, unpause, rm 等。<br>    支持新的服务编排功能，如 profiles 和 stack。<br>    支持新的网络和卷插件。<br>    支持新的环境变量处理方式。<br>    支持新的健康检查语法。<br>    支持新的服务更新策略。<br>    支持新的服务扩展策略。<br>    支持新的服务监控和日志记录功能。<br>    支持新的服务安全特性，如 secrets 和 configs。</p>
<h1><span id="docker-composeyml"><span id="inline-blue">docker-compose.yml</span></span></h1><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">photoframe-mysql:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/conf:/etc/mysql/conf.d</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/log:/var/mysql/log</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/data:/var/mysql/data</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/db/init:/docker-entrypoint-initdb.d/:ro</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mysql/db/sql:/opt/sql/:ro</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">coship</span></span><br><span class="line">  <span class="attr">photoframe-nacos:</span></span><br><span class="line">        <span class="attr">container_name:</span> <span class="string">photoframe-nacos</span></span><br><span class="line">        <span class="attr">build:</span></span><br><span class="line">          <span class="attr">context:</span> <span class="string">./nacos</span></span><br><span class="line">        <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">        <span class="attr">networks:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">        <span class="attr">environment:</span></span><br><span class="line">          <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">          <span class="attr">MODE:</span> <span class="string">standalone</span></span><br><span class="line">          <span class="attr">PREFER_HOST_MODE:</span> <span class="string">ip</span></span><br><span class="line">          <span class="attr">SPRING_DATASOURCE_PLATFORM:</span> <span class="string">mysql</span></span><br><span class="line">          <span class="attr">MYSQL_SERVICE_HOST:</span> <span class="string">photoframe-mysql</span></span><br><span class="line">          <span class="attr">MYSQL_SERVICE_PORT:</span> <span class="number">3306</span></span><br><span class="line">          <span class="attr">MYSQL_SERVICE_USER:</span> <span class="string">root</span></span><br><span class="line">          <span class="attr">MYSQL_SERVICE_PASSWORD:</span> <span class="string">coship</span></span><br><span class="line">          <span class="attr">MYSQL_SERVICE_DB_NAME:</span> <span class="string">nacos_config</span></span><br><span class="line">          <span class="attr">JVM_XMS:</span> <span class="string">1g</span></span><br><span class="line">          <span class="attr">JVM_XMX:</span> <span class="string">1g</span></span><br><span class="line">          <span class="attr">JVM_XMN:</span> <span class="string">128m</span></span><br><span class="line">          <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306</span></span><br><span class="line">          <span class="attr">WAIT_TIMEOUT:</span> <span class="number">120</span></span><br><span class="line">        <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">./nacos/logs/:/home/nacos/logs</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">./nacos/conf/:/home/nacos/conf</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;8848:8848&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;9848:9848&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;9849:9849&quot;</span></span><br><span class="line">        <span class="attr">depends_on:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">photoframe-mysql</span></span><br><span class="line">  <span class="attr">photoframe-elasticsearch:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-elasticsearch</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./elasticsearch</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">    <span class="comment"># 开启内存锁定</span></span><br><span class="line">      <span class="attr">bootstrap.memory_lock:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">ES_JAVA_OPTS:</span> <span class="string">&quot;-Xms4g -Xmx4g&quot;</span></span><br><span class="line">    <span class="comment"># 指定单节点启动</span></span><br><span class="line">      <span class="attr">discovery.type:</span> <span class="string">single-node</span></span><br><span class="line">    <span class="attr">ulimits:</span></span><br><span class="line">      <span class="comment"># 取消内存相关限制 用于开启内存锁定</span></span><br><span class="line">      <span class="attr">memlock:</span></span><br><span class="line">        <span class="attr">soft:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">hard:</span> <span class="number">-1</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/data:/usr/local/elasticsearch-8.8.0/data</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/logs:/usr/local/elasticsearch-8.8.0/logs</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/config:/usr/local/elasticsearch-8.8.0/config</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./elasticsearch/plugins:/usr/local/elasticsearch-8.8.0/plugins</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9200:9200&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9300:9300&quot;</span></span><br><span class="line">  <span class="attr">photoframe-redis:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./redis</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;6379:6379&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./redis/conf:/etc/redis/</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">  <span class="attr">photoframe-rabbitmq:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-rabbitmq</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./rabbitmq</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;5672:5672&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;15672:15672&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./rabbitmq/data:/var/lib/rabbitmq</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./rabbitmq/log:/var/log/rabbitmq</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./rabbitmq/conf:/etc/rabbitmq</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">  <span class="attr">photoframe-admin-log:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-admin-log</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-admin-log</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9021:9021&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-admin-biz:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-admin-biz</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-admin-biz</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9020:9020&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-api-app:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-api-app</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-api-app</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9006:9006&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-api-pad:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-api-pad</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-api-pad</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9007:9007&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./photoframe/uploadPath:/home/photoframe/uploadPath</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-auth:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-auth</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-auth</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9003:9003&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-quartz:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-quartz</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-quartz</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9060:9060&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-mysql</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-mysql:3306,photoframe-nacos:8848,photoframe-redis:6379</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-gateway:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-gateway</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./photoframe/photoframe-gateway</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9001:9001&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-redis</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-nacos:8848,photoframe-redis:6379,photoframe-admin-biz:9020,photoframe-admin-log:9021,photoframe-api-app:9006,photoframe-api-pad:9007,photoframe-auth:9003,photoframe-quartz:9060</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-nginx:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-nginx</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./nginx</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./nginx/conf:/etc/nginx/conf</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./nginx/logs:/var/log/nginx</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-gateway</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-gateway:9001</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">photoframe-sentinel:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-sentinel</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./sentinel</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;8180:8180&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./sentinel/logs:/root/logs</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-nacos</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-nacos:8848</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-zipkin:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-zipkin</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./zipkin</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9411:9411&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-elasticsearch</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-elasticsearch:9200</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">photoframe-zipkin-dependencies:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">photoframe-zipkin-dependencies</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./zipkin-dependencies</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-net</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photoframe-elasticsearch</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">WAIT_HOSTS:</span> <span class="string">photoframe-elasticsearch:9200</span></span><br><span class="line">      <span class="attr">WAIT_TIMEOUT:</span> <span class="number">180</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">photoframe-net:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br></pre></td></tr></table></figure>

<h2><span id="docker-compose-v3版本配置项语法"><span id="inline-blue">docker-compose V3版本配置项语法</span></span></h2><h3><span id="version"><span id="inline-blue">version</span></span></h3><p>顶级version属性由Compose规范定义以实现向后兼容性它仅提供信息，如果使用版本规范不支持的属性，将收到一条警告消息，表明它已过时。<br>version属性包含主要版本和次要版本，如果在V2版本规范下定义如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2&#x27;</span></span><br></pre></td></tr></table></figure>
<p>等同于：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2.0&#x27;</span></span><br></pre></td></tr></table></figure>
<p>V2版本在不明确指定次要版本的情况下，默认匹配最早的次要版本。</p>
<p>V3版本规范下定义如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br></pre></td></tr></table></figure>
<p>等同于：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.0&#x27;</span></span><br></pre></td></tr></table></figure>
<p>V3版本在不明确指定次要版本的情况下，默认匹配最早的次要版本。</p>
<h3><span id="build"><span id="inline-blue">build</span></span></h3><p>在构建时应用的配置选项。<br>build可以指定为包含构建上下文路径的字符串：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./dir</span></span><br></pre></td></tr></table></figure>
<p>或者，作为一个对象，其路径在 context下指定，并且可选 Dockerfile和 args：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./dir</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">buildno:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>如果指定image以及tag，则Compose会使用指定的image和选项build来命名构建的映像：webapp:tag </p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span> <span class="string">./dir</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">webapp:tag</span></span><br></pre></td></tr></table></figure>

<h3><span id="context"><span id="inline-blue">context</span></span></h3><p>包含 Dockerfile 的目录的路径，或 git 存储库的 url。<br>当提供的值是相对路径时，它将被解释为相对于Compose文件的位置。该目录也是发送到Docker守护进程的构建上下文。<br>Compose构建并使用生成的名称对其进行标记，然后使用该图像。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">./dir</span></span><br></pre></td></tr></table></figure>

<h3><span id="dockerfile"><span id="inline-blue">dockerfile</span></span></h3><p>备用 Dockerfile。<br>Compose使用备用文件进行构建。还必须指定构建路径。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br></pre></td></tr></table></figure>

<h3><span id="arg"><span id="inline-blue">ARG</span></span></h3><p>添加构建参数，这些参数是仅在构建过程中可访问的环境变量。<br>首先，在 Dockerfile 中指定参数：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># syntax=docker/dockerfile:1</span></span><br><span class="line"></span><br><span class="line"><span class="string">ARG</span> <span class="string">buildno</span></span><br><span class="line"><span class="string">ARG</span> <span class="string">gitcommithash</span></span><br><span class="line"></span><br><span class="line"><span class="string">RUN</span> <span class="string">echo</span> <span class="string">&quot;Build number: $buildno&quot;</span></span><br><span class="line"><span class="string">RUN</span> <span class="string">echo</span> <span class="string">&quot;Based on commit: $gitcommithash&quot;</span></span><br></pre></td></tr></table></figure>
<p>然后指定该键下的参数build。您可以传递映射或列表：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">args:</span></span><br><span class="line">    <span class="attr">buildno:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">gitcommithash:</span> <span class="string">cdc3b19</span></span><br></pre></td></tr></table></figure>
<p>列表形式</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">args:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">buildno=1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">gitcommithash=cdc3b19</span></span><br></pre></td></tr></table></figure>
<p>在您的 Dockerfile 中，如果您在指令ARG之前指定FROM， ARG则在下一个FROM的构建指令中不可用。如果您需要在两个地方都提供一个参数，也请在FROM指令下指定它<br>您可以在指定构建参数时省略该值，在这种情况下，其在构建时的值是 Compose 运行环境中的值。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">args:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">buildno</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">gitcommithash</span></span><br></pre></td></tr></table></figure>
<p>YAML布尔值( “true”, “false”, “yes”, “no”, “on”, “off”) 必须用引号引起来，以便解析器将它们解释为字符串。</p>
<h3><span id="cache_from"><span id="inline-blue">cache_from</span></span></h3><p>引擎用于缓存解析的图像列表。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">cache_from:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">alpine:latest</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">corp/web_app:3.14</span></span><br></pre></td></tr></table></figure>
<p>3.3版本docker compose文件格式添加</p>
<h3><span id="label"><span id="inline-blue">label</span></span></h3><p>使用Docker 标签将元数据添加到生成的图像中 。您可以使用数组或字典。<br>建议使用反向DNS表示法，以防止您的标签与其他软件使用的标签发生冲突。</p>
<p>单值映射：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">com.example.description:</span> <span class="string">&quot;Accounting webapp&quot;</span></span><br><span class="line">    <span class="attr">com.example.department:</span> <span class="string">&quot;Finance&quot;</span></span><br><span class="line">    <span class="attr">com.example.label-with-empty-value:</span> <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>列表形式：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;com.example.description=Accounting webapp&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;com.example.department=Finance&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;com.example.label-with-empty-value&quot;</span></span><br></pre></td></tr></table></figure>

<p>3.3版本docker compose文件格式添加</p>
<h3><span id="network"><span id="inline-blue">network</span></span></h3><p>设置网络容器连接以获取RUN构建期间的说明。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">network:</span> <span class="string">host</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">network:</span> <span class="string">custom_network_1</span></span><br></pre></td></tr></table></figure>

<p>用于none在构建期间禁用网络：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">network:</span> <span class="string">none</span></span><br></pre></td></tr></table></figure>

<p>3.4版本docker compose文件格式添加</p>
<h3><span id="shm_size"><span id="inline-blue">shm_size</span></span></h3><p>/dev/shm设置此构建容器的分区大小。指定为表示字节数的整数值或表示 字节值的字符串。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">shm_size:</span> <span class="string">&#x27;2gb&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">shm_size:</span> <span class="number">10000000</span></span><br></pre></td></tr></table></figure>

<p>3.5版本docker compose文件格式添加</p>
<h3><span id="target"><span id="inline-blue">target</span></span></h3><p>构建指定阶段，如Dockerfile</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">target:</span> <span class="string">prod</span></span><br></pre></td></tr></table></figure>

<p>3.4版本docker compose文件格式添加</p>
<h3><span id="cap_add-cap_drop"><span id="inline-blue">cap_add、cap_drop</span></span></h3><p>添加或删除容器功能</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cap_add:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cap_drop:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">NET_ADMIN</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SYS_ADMIN</span></span><br></pre></td></tr></table></figure>

<h3><span id="cgroup_parent"><span id="inline-blue">cgroup_parent</span></span></h3><p>为容器指定一个可选的父 cgroup。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cgroup_parent:</span> <span class="string">m-executor-abcd</span></span><br></pre></td></tr></table></figure>

<p>在 Swarm 模式下部署堆栈时，该cgroup_parent选项将被忽略</p>
<h3><span id="command"><span id="inline-blue">command</span></span></h3><p>覆盖默认命令。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">command:</span> <span class="string">bundle</span> <span class="string">exec</span> <span class="string">thin</span> <span class="string">-p</span> <span class="number">3000</span></span><br></pre></td></tr></table></figure>

<p>该命令也可以是一个列表，其方式类似于 dockerfile：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">command:</span> [<span class="string">&quot;bundle&quot;</span>, <span class="string">&quot;exec&quot;</span>, <span class="string">&quot;thin&quot;</span>, <span class="string">&quot;-p&quot;</span>, <span class="string">&quot;3000&quot;</span>]</span><br></pre></td></tr></table></figure>

<h3><span id="container_name"><span id="inline-blue">container_name</span></span></h3><p>指定自定义容器名称，而不是生成的默认名称。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">container_name:</span> <span class="string">my-web-container</span></span><br></pre></td></tr></table></figure>

<p>由于 Docker 容器名称必须是唯一的，因此如果指定了自定义名称，则无法将服务扩展至超过 1 个容器。尝试这样做会导致错误。<br>在 Swarm 模式下部署堆栈时，该container_name选项将被忽略。</p>
<p>参考：<a href="https://docker.github.net.cn/compose/compose-file/compose-file-v3/">https://docker.github.net.cn/compose/compose-file/compose-file-v3/</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署微服务集群(二)</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4(%E4%BA%8C)/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3span"><span id="inline-blue">微服务网关</span></a></li>
<li><a href="#span-idinline-blue%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%89%B4%E6%9D%83span"><span id="inline-blue">微服务鉴权</span></a></li>
<li><a href="#span-idinline-blue%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86span"><span id="inline-blue">微服务后台管理</span></a></li>
<li><a href="#span-idinline-blue%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">微服务日志服务</span></a></li>
<li><a href="#span-idinline-blue%E5%BE%AE%E6%9C%8D%E5%8A%A1app%E6%8E%A5%E5%8F%A3%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">微服务app接口服务</span></a></li>
<li><a href="#span-idinline-blue%E5%BE%AE%E6%9C%8D%E5%8A%A1pad%E6%8E%A5%E5%8F%A3%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">微服务pad接口服务</span></a></li>
<li><a href="#span-idinline-blue%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%9A%E6%97%B6%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">微服务定时服务</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Docker: 26.1.4</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务使用docker镜像方式部署的优势<br>1、轻量级和可移植性<br>2、一致的开发和生产环境<br>3、快速部署和扩展<br>4、安全和隔离性</p>
<h1><span id="微服务网关"><span id="inline-blue">微服务网关</span></span></h1><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241125/Docker_microservice_20241125_001.png" alt="Dockerfile microservice"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 基础镜像</span></span><br><span class="line">FROM  openjdk:8-jre</span><br><span class="line"><span class="meta">#</span><span class="bash"> author</span></span><br><span class="line">MAINTAINER 909754 &lt;18685129726@163.com&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载目录</span></span><br><span class="line">VOLUME /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line">RUN mkdir -p /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定路径</span></span><br><span class="line">WORKDIR /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制jar文件到路径</span></span><br><span class="line">COPY ./jar/photoframe-gateway.jar /home/photoframe/photoframe-gateway.jar</span><br><span class="line"><span class="meta">#</span><span class="bash">复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line">COPY ./docker-compose-wait/wait /wait</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予检测脚本执行权限</span></span><br><span class="line">RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/wait&quot;]</span><br><span class="line"><span class="meta">#</span><span class="bash">暴露服务端口</span></span><br><span class="line">EXPOSE 9001</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">CMD /wait &amp;&amp; java -jar -Dcsp.sentinel.app.type=1 photoframe-gateway.jar</span><br></pre></td></tr></table></figure>
<h1><span id="微服务鉴权"><span id="inline-blue">微服务鉴权</span></span></h1><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241125/Docker_microservice_20241125_002.png" alt="Dockerfile microservice"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 基础镜像</span></span><br><span class="line">FROM  openjdk:8-jre</span><br><span class="line"><span class="meta">#</span><span class="bash"> author</span></span><br><span class="line">MAINTAINER 909754 &lt;18685129726@163.com&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载目录</span></span><br><span class="line">VOLUME /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line">RUN mkdir -p /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定路径</span></span><br><span class="line">WORKDIR /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制jar文件到路径</span></span><br><span class="line">COPY ./jar/photoframe-auth.jar /home/photoframe/photoframe-auth.jar</span><br><span class="line"><span class="meta">#</span><span class="bash">复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line">COPY ./docker-compose-wait/wait /wait</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予检测脚本执行权限</span></span><br><span class="line">RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/wait&quot;]</span><br><span class="line"><span class="meta">#</span><span class="bash">暴露服务端口</span></span><br><span class="line">EXPOSE 9003</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">CMD /wait &amp;&amp; java -jar photoframe-auth.jar</span><br></pre></td></tr></table></figure>

<h1><span id="微服务后台管理"><span id="inline-blue">微服务后台管理</span></span></h1><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241125/Docker_microservice_20241125_003.png" alt="Dockerfile microservice"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 基础镜像</span></span><br><span class="line">FROM  openjdk:8-jre</span><br><span class="line"><span class="meta">#</span><span class="bash"> author</span></span><br><span class="line">MAINTAINER 909754 &lt;18685129726@163.com&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载目录</span></span><br><span class="line">VOLUME /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line">RUN mkdir -p /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定路径</span></span><br><span class="line">WORKDIR /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash">拷贝微服务jar包</span></span><br><span class="line">COPY ./jar/photoframe-admin-biz.jar /home/photoframe/photoframe-admin-biz.jar</span><br><span class="line"><span class="meta">#</span><span class="bash">暴露访问端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash">复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line">COPY ./docker-compose-wait/wait /wait</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予检测脚本执行权限</span></span><br><span class="line">RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/wait&quot;]</span><br><span class="line">EXPOSE 9020</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">CMD /wait &amp;&amp; java -jar photoframe-admin-biz.jar</span><br></pre></td></tr></table></figure>

<h1><span id="微服务日志服务"><span id="inline-blue">微服务日志服务</span></span></h1><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241125/Docker_microservice_20241125_004.png" alt="Dockerfile microservice"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 基础镜像</span></span><br><span class="line">FROM  openjdk:8-jre</span><br><span class="line"><span class="meta">#</span><span class="bash"> author</span></span><br><span class="line">MAINTAINER 909754 &lt;18685129726@163.com&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载目录</span></span><br><span class="line">VOLUME /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line">RUN mkdir -p /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定路径</span></span><br><span class="line">WORKDIR /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制jar文件到路径</span></span><br><span class="line">COPY ./jar/photoframe-admin-log.jar /home/photoframe/photoframe-admin-log.jar</span><br><span class="line"><span class="meta">#</span><span class="bash">暴露服务端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash">复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line">COPY ./docker-compose-wait/wait /wait</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予检测脚本执行权限</span></span><br><span class="line">RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/wait&quot;]</span><br><span class="line">EXPOSE 9021</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">CMD /wait &amp;&amp; java -jar photoframe-admin-log.jar</span><br></pre></td></tr></table></figure>

<h1><span id="微服务app接口服务"><span id="inline-blue">微服务app接口服务</span></span></h1><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241125/Docker_microservice_20241125_005.png" alt="Dockerfile microservice"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 基础镜像</span></span><br><span class="line">FROM  openjdk:8-jre</span><br><span class="line"><span class="meta">#</span><span class="bash"> author</span></span><br><span class="line">MAINTAINER 909754 &lt;18685129726@163.com&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载目录</span></span><br><span class="line">VOLUME /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line">RUN mkdir -p /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定路径</span></span><br><span class="line">WORKDIR /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制jar文件到路径</span></span><br><span class="line">COPY ./jar/photoframe-api-app.jar /home/photoframe/photoframe-api-app.jar</span><br><span class="line"><span class="meta">#</span><span class="bash">复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line">COPY ./docker-compose-wait/wait /wait</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予检测脚本执行权限</span></span><br><span class="line">RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/wait&quot;]</span><br><span class="line"><span class="meta">#</span><span class="bash">暴露服务端口</span></span><br><span class="line">EXPOSE 9006</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">CMD /wait &amp;&amp; java -jar photoframe-api-app.jar</span><br></pre></td></tr></table></figure>

<h1><span id="微服务pad接口服务"><span id="inline-blue">微服务pad接口服务</span></span></h1><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241125/Docker_microservice_20241125_006.png" alt="Dockerfile microservice"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 基础镜像</span></span><br><span class="line">FROM  openjdk:8-jre</span><br><span class="line"><span class="meta">#</span><span class="bash"> author</span></span><br><span class="line">MAINTAINER 909754 &lt;18685129726@163.com&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载目录</span></span><br><span class="line">VOLUME /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line">RUN mkdir -p /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定路径</span></span><br><span class="line">WORKDIR /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制jar文件到路径</span></span><br><span class="line">COPY ./jar/photoframe-api-pad.jar /home/photoframe/photoframe-api-pad.jar</span><br><span class="line"><span class="meta">#</span><span class="bash">复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line">COPY ./docker-compose-wait/wait /wait</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予检测脚本执行权限</span></span><br><span class="line">RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/wait&quot;]</span><br><span class="line"><span class="meta">#</span><span class="bash">暴露服务端口</span></span><br><span class="line">EXPOSE 9007</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">CMD /wait &amp;&amp; java -jar photoframe-api-pad.jar</span><br></pre></td></tr></table></figure>

<h1><span id="微服务定时服务"><span id="inline-blue">微服务定时服务</span></span></h1><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241125/Docker_microservice_20241125_007.png" alt="Dockerfile microservice"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 基础镜像</span></span><br><span class="line">FROM  openjdk:8-jre</span><br><span class="line"><span class="meta">#</span><span class="bash"> author</span></span><br><span class="line">MAINTAINER 909754 &lt;18685129726@163.com&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 挂载目录</span></span><br><span class="line">VOLUME /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建目录</span></span><br><span class="line">RUN mkdir -p /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定路径</span></span><br><span class="line">WORKDIR /home/photoframe</span><br><span class="line"><span class="meta">#</span><span class="bash"> 复制jar文件到路径</span></span><br><span class="line">COPY jar/photoframe-quartz.jar /home/photoframe/photoframe-quartz.jar</span><br><span class="line"><span class="meta">#</span><span class="bash">复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line">COPY ./docker-compose-wait/wait /wait</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予检测脚本执行权限</span></span><br><span class="line">RUN [&quot;chmod&quot;, &quot;+x&quot;, &quot;/wait&quot;]</span><br><span class="line"><span class="meta">#</span><span class="bash">暴露服务端口</span></span><br><span class="line">EXPOSE 9060</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动定时服务</span></span><br><span class="line">CMD /wait &amp;&amp; java -jar photoframe-quartz.jar</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署微服务集群(一)</title>
    <url>/Docker/blogs/Docker%E9%83%A8%E7%BD%B2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4(%E4%B8%80)/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E6%9E%84%E5%BB%BA%E5%9F%BA%E7%A1%80%E9%95%9C%E5%83%8Fspan"><span id="inline-blue">构建基础镜像</span></a><ul>
<li><a href="#span-idinline-bluemysqlspan"><span id="inline-blue">MySQL</span></a></li>
<li><a href="#span-idinline-blueredisspan"><span id="inline-blue">Redis</span></a></li>
<li><a href="#span-idinline-bluenacosspan"><span id="inline-blue">nacos</span></a></li>
<li><a href="#span-idinline-blueelasticsearchspan"><span id="inline-blue">Elasticsearch</span></a></li>
<li><a href="#span-idinline-bluenginxspan"><span id="inline-blue">nginx</span></a></li>
<li><a href="#span-idinline-bluerabbitmqspan"><span id="inline-blue">rabbitmq</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Docker: 26.1.4</code></pre>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目模块打包后希望能通过Docker构建镜像部署，包括微服务模块以及基础服务模块（MySQL、redis、elasticsearch等）</p>
<h1><span id="构建基础镜像"><span id="inline-blue">构建基础镜像</span></span></h1><h2><span id="mysql"><span id="inline-blue">MySQL</span></span></h2><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241124/Docker_MySQL_20241124_001.png" alt="Dockerfile MySQL"></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> mysql:<span class="number">5.7</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment">#工作目录</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /docker-entrypoint-initdb.d</span></span><br><span class="line"><span class="comment">#编码</span></span><br><span class="line"><span class="keyword">ENV</span> LANG=C.UTF-<span class="number">8</span></span><br><span class="line"><span class="comment"># 拷贝初始化脚本</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> db/init/start.sql /docker-entrypoint-initdb.d/</span></span><br><span class="line"><span class="comment">#拷贝SQL脚本</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> db/sql/*.sql /opt/sql/</span></span><br></pre></td></tr></table></figure>
<p>/docker-entrypoint-initdb.d/ : MySQL容器初始化执行的SQL脚本<br>/opt/sql/: 数据库初始化脚本nacos_config.sql、init_table.sql、init_data.sql所在位置<br>db/sql/*.sql: 目录包含启动SQL文件start.sql,内容如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source &#x2F;opt&#x2F;sql&#x2F;nacos_config.sql;</span><br><span class="line">source &#x2F;opt&#x2F;sql&#x2F;init_table.sql;</span><br><span class="line">source &#x2F;opt&#x2F;sql&#x2F;init_data.sql;</span><br></pre></td></tr></table></figure>
<p>MySQL配置文件my.cnf如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Example MySQL config file <span class="keyword">for</span> very large systems.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This is for a large system with memory of 1G-2G where the system runs mainly</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> MySQL.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># MySQL programs look for option files in a set of</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> locations <span class="built_in">which</span> depend on the deployment platform.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> You can copy this option file to one of those</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> locations. For information about these locations, see:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://dev.mysql.com/doc/mysql/en/option-files.html</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># In this file, you can use all long options that a program supports.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> If you want to know <span class="built_in">which</span> options a program supports, run the program</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> with the <span class="string">&quot;--help&quot;</span> option.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The following options will be passed to all MySQL clients</span></span><br><span class="line">[client]</span><br><span class="line"><span class="meta">#</span><span class="bash">password	= your_password</span></span><br><span class="line">port		= 3306</span><br><span class="line"><span class="meta">#</span><span class="bash">socket		= /home/mysqldata/mysql.sock</span></span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Here follows entries <span class="keyword">for</span> some specific programs</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The MySQL server</span></span><br><span class="line">[mysqld]</span><br><span class="line">port		= 3306</span><br><span class="line"><span class="meta">#</span><span class="bash">socket		= /home/mysqldata/mysql.sock</span></span><br><span class="line">lower_case_table_names=1</span><br><span class="line">sql_mode=&quot;NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">skip_grant_tables</span></span><br><span class="line">datadir=/var/mysql/data</span><br><span class="line">skip-external-locking</span><br><span class="line">key_buffer_size = 384M</span><br><span class="line">max_allowed_packet = 1000M</span><br><span class="line">table_open_cache = 512</span><br><span class="line">sort_buffer_size = 2M</span><br><span class="line">read_buffer_size = 2M</span><br><span class="line">read_rnd_buffer_size = 8M</span><br><span class="line">myisam_sort_buffer_size = 64M</span><br><span class="line">thread_cache_size = 8</span><br><span class="line">query_cache_size = 32M</span><br><span class="line"><span class="meta">#</span><span class="bash"> Try number of CPU<span class="string">&#x27;s*2 for #thread_concurrency</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">thread_concurrency = 8</span></span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line">innodb-file-per-table=1</span><br><span class="line">event_scheduler = 1</span><br><span class="line">max_connections = 1000</span><br><span class="line">character_set_server = utf8</span><br><span class="line"><span class="meta">#</span><span class="bash">log-bin=<span class="string">&quot;/var/log/mysql-bin.log&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">read-only=0</span></span><br><span class="line"><span class="meta">#</span><span class="bash">binlog-do-db=sync_test</span></span><br><span class="line"><span class="meta">#</span><span class="bash">binlog-ignore-db=mysql</span></span><br><span class="line">max_binlog_size = 500M</span><br><span class="line">expire_logs_days = 7</span><br><span class="line">log_bin_trust_function_creators=TRUE</span><br><span class="line"><span class="meta">#</span><span class="bash">log_error=/var/mysql/<span class="built_in">log</span>/mysql-error.log</span></span><br><span class="line">log_timestamps=SYSTEM</span><br><span class="line"><span class="meta">#</span><span class="bash"> Don<span class="string">&#x27;t listen on a TCP/IP port at all. This can be a security enhancement,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> all processes that need to connect to mysqld run on the same host.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> All interaction with mysqld must be made via Unix sockets or named pipes.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Note that using this option without enabling named pipes on Windows</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (via the <span class="string">&quot;enable-named-pipe&quot;</span> option) will render mysqld useless!</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#skip-networking</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Replication Master Server (default)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> binary logging is required <span class="keyword">for</span> replication</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log-bin=mysql-bin</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> required unique id between 1 and 2^32 - 1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> defaults to 1 <span class="keyword">if</span> master-host is not <span class="built_in">set</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> but will not <span class="keyword">function</span> as a master <span class="keyword">if</span> omitted</span></span><br><span class="line">server-id	= 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Replication Slave (comment out master section to use this)</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># To configure this host as a replication slave, you can choose between</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> two methods :</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) Use the CHANGE MASTER TO command (fully described in our manual) -</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    the syntax is:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#    CHANGE MASTER TO MASTER_HOST=&lt;host&gt;, MASTER_PORT=&lt;port&gt;,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    MASTER_USER=&lt;user&gt;, MASTER_PASSWORD=&lt;password&gt; ;</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#    where you replace &lt;host&gt;, &lt;user&gt;, &lt;password&gt; by quoted strings and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    &lt;port&gt; by the master<span class="string">&#x27;s port number (3306 by default).</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#    Example:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#    CHANGE MASTER TO MASTER_HOST=&#x27;125.564.12.1&#x27;, MASTER_PORT=3306,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    MASTER_USER=<span class="string">&#x27;joe&#x27;</span>, MASTER_PASSWORD=<span class="string">&#x27;secret&#x27;</span>;</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># OR</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 2) Set the variables below. However, in case you choose this method, then</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    start replication <span class="keyword">for</span> the first time (even unsuccessfully, <span class="keyword">for</span> example</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    <span class="keyword">if</span> you mistyped the password <span class="keyword">in</span> master-password and the slave fails to</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    connect), the slave will create a master.info file, and any later</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    change <span class="keyword">in</span> this file to the variables<span class="string">&#x27; values below will be ignored and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    overridden by the content of the master.info file, unless you shutdown</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    the slave server, delete master.info and restart the slaver server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    For that reason, you may want to leave the lines below untouched</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    (commented) and instead use CHANGE MASTER TO (see above)</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># required unique id between 2 and 2^32 - 1</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (and different from the master)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> defaults to 2 <span class="keyword">if</span> master-host is <span class="built_in">set</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> but will not <span class="keyword">function</span> as a slave <span class="keyword">if</span> omitted</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server-id       = 2</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The replication master for this slave - required</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">master-host     =   &lt;hostname&gt;</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The username the slave will use for authentication when connecting</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to the master - required</span></span><br><span class="line"><span class="meta">#</span><span class="bash">master-user     =   &lt;username&gt;</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The password the slave will authenticate with when connecting to</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the master - required</span></span><br><span class="line"><span class="meta">#</span><span class="bash">master-password =   &lt;password&gt;</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The port the master is listening on.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> optional - defaults to 3306</span></span><br><span class="line"><span class="meta">#</span><span class="bash">master-port     =  &lt;port&gt;</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># binary logging - not required for slaves, but recommended</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">log-bin=mysql-bin</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># binary logging format - mixed recommended</span></span></span><br><span class="line">binlog_format=ROW</span><br><span class="line">binlog_row_image=FULL</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Uncomment the following <span class="keyword">if</span> you are using InnoDB tables</span></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_data_home_dir = /data/mysqldata/mysql</span></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_data_file_path = ibdata1:2000M;ibdata2:10M:autoextend</span></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_log_group_home_dir = /data/mysqldata/mysql</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> You can <span class="built_in">set</span> .._buffer_pool_size up to 50 - 80 %</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> of RAM but beware of setting memory usage too high</span></span><br><span class="line">innodb_buffer_pool_size = 384M</span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_additional_mem_pool_size = 20M</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set .._log_file_size to 25 % of buffer pool size</span></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_log_file_size = 100M</span></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_log_buffer_size = 8M</span></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_flush_log_at_trx_commit = 1</span></span><br><span class="line"><span class="meta">#</span><span class="bash">innodb_lock_wait_timeout = 50</span></span><br><span class="line"><span class="meta">#</span><span class="bash">secure-file-priv=<span class="string">&quot;&quot;</span></span></span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = 16M</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">no-auto-rehash</span><br><span class="line"><span class="meta">#</span><span class="bash"> Remove the next comment character <span class="keyword">if</span> you are not familiar with SQL</span></span><br><span class="line"><span class="meta">#</span><span class="bash">safe-updates</span></span><br><span class="line"></span><br><span class="line">[myisamchk]</span><br><span class="line">key_buffer_size = 256M</span><br><span class="line">sort_buffer_size = 256M</span><br><span class="line">read_buffer = 2M</span><br><span class="line">write_buffer = 2M</span><br><span class="line"></span><br><span class="line">[mysqlhotcopy]</span><br><span class="line">interactive-timeout</span><br></pre></td></tr></table></figure>


<h2><span id="redis"><span id="inline-blue">Redis</span></span></h2><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241124/Docker_Redis_20241124_002.png" alt="Dockerfile Redis"></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> redis:<span class="number">5.0</span>.<span class="number">14</span></span><br><span class="line"><span class="comment">#author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment">#拷贝配置文件</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./conf/redis.conf /etc/redis/redis.conf</span></span><br><span class="line"><span class="comment">#暴露服务端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">6379</span></span><br><span class="line"><span class="comment"># 启动Redis服务器</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">&quot;redis-server&quot;</span>, <span class="string">&quot;/etc/redis/redis.conf&quot;</span> ]</span></span><br></pre></td></tr></table></figure>
<p>redis.conf配置内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Redis configuration file example.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note that in order to read the configuration file, Redis must be</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> started with the file path as first argument:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># ./redis-server /path/to/redis.conf</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Note on units: when memory size is needed, it is possible to specify</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> it <span class="keyword">in</span> the usual form of 1k 5GB 4M and so forth:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1k =&gt; 1000 bytes</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1kb =&gt; 1024 bytes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1m =&gt; 1000000 bytes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1mb =&gt; 1024*1024 bytes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1g =&gt; 1000000000 bytes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1gb =&gt; 1024*1024*1024 bytes</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># units are case insensitive so 1GB 1Gb 1gB are all the same.</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# INCLUDES ###################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Include one or more other config files here.  This is useful <span class="keyword">if</span> you</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> have a standard template that goes to all Redis servers but also need</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to customize a few per-server settings.  Include files can include</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> other files, so use this wisely.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Notice option &quot;include&quot; won&#x27;t be rewritten by command &quot;CONFIG REWRITE&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> from admin or Redis Sentinel. Since Redis always uses the last processed</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> line as value of a configuration directive, you<span class="string">&#x27;d better put includes</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> at the beginning of this file to avoid overwriting config change at runtime.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If instead you are interested in using includes to override configuration</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> options, it is better to use include as the last line.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># include /path/to/local.conf</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> include /path/to/other.conf</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# MODULES #####################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Load modules at startup. If the server is not able to load modules</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> it will abort. It is possible to use multiple loadmodule directives.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># loadmodule /path/to/my_module.so</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> loadmodule /path/to/other_module.so</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# NETWORK #####################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> By default, <span class="keyword">if</span> no <span class="string">&quot;bind&quot;</span> configuration directive is specified, Redis listens</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> connections from all the network interfaces available on the server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> It is possible to listen to just one or multiple selected interfaces using</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the <span class="string">&quot;bind&quot;</span> configuration directive, followed by one or more IP addresses.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Examples:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># bind 192.168.1.100 10.0.0.1</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">bind</span> 127.0.0.1 ::1</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> internet, binding to all the interfaces is dangerous and will expose the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> instance to everybody on the internet. So by default we uncomment the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> following <span class="built_in">bind</span> directive, that will force Redis to listen only into</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the IPv4 loopback interface address (this means Redis will be able to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> accept connections only from clients running into the same computer it</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is running).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> JUST COMMENT THE FOLLOWING LINE.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span><br><span class="line">bind 0.0.0.0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Protected mode is a layer of security protection, <span class="keyword">in</span> order to avoid that</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis instances left open on the internet are accessed and exploited.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># When protected mode is on and if:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) The server is not binding explicitly to a set of addresses using the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    <span class="string">&quot;bind&quot;</span> directive.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2) No password is configured.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The server only accepts connections from clients connecting from the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sockets.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># By default protected mode is enabled. You should disable it only if</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> you are sure you want clients from other hosts to connect to Redis</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> even <span class="keyword">if</span> no authentication is configured, nor a specific <span class="built_in">set</span> of interfaces</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> are explicitly listed using the <span class="string">&quot;bind&quot;</span> directive.</span></span><br><span class="line">protected-mode yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Accept connections on the specified port, default is 6379 (IANA <span class="comment">#815344).</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> If port 0 is specified Redis will not listen on a TCP socket.</span></span><br><span class="line">port 6379</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> TCP listen() backlog.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># In high requests-per-second environments you need an high backlog in order</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to avoid slow clients connections issues. Note that the Linux kernel</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will silently truncate it to the value of /proc/sys/net/core/somaxconn so</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make sure to raise both the value of somaxconn and tcp_max_syn_backlog</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to get the desired effect.</span></span><br><span class="line">tcp-backlog 511</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Unix socket.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Specify the path for the Unix socket that will be used to listen for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> incoming connections. There is no default, so Redis will not listen</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> on a unix socket when not specified.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># unixsocket /tmp/redis.sock</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> unixsocketperm 700</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Close the connection after a client is idle <span class="keyword">for</span> N seconds (0 to <span class="built_in">disable</span>)</span></span><br><span class="line">timeout 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> TCP keepalive.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> of communication. This is useful <span class="keyword">for</span> two reasons:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) Detect dead peers.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2) Take the connection alive from the point of view of network</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    equipment <span class="keyword">in</span> the middle.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># On Linux, the specified value (in seconds) is the period used to send ACKs.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Note that to close the connection the double of the time is needed.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> On other kernels the period depends on the kernel configuration.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># A reasonable value for this option is 300 seconds, which is the new</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis default starting with Redis 3.2.1.</span></span><br><span class="line">tcp-keepalive 300</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################ GENERAL #####################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> By default Redis does not run as a daemon. Use <span class="string">&#x27;yes&#x27;</span> <span class="keyword">if</span> you need it.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Note that Redis will write a pid file <span class="keyword">in</span> /var/run/redis.pid when daemonized.</span></span><br><span class="line">daemonize no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> If you run Redis from upstart or systemd, Redis can interact with your</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> supervision tree. Options:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   supervised no      - no supervision interaction</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   supervised upstart - signal upstart by putting Redis into SIGSTOP mode</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   supervised systemd - signal systemd by writing READY=1 to <span class="variable">$NOTIFY_SOCKET</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   supervised auto    - detect upstart or systemd method based on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">                        UPSTART_JOB or NOTIFY_SOCKET environment variables</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Note: these supervision methods only signal <span class="string">&quot;process is ready.&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">       They <span class="keyword">do</span> not <span class="built_in">enable</span> continuous liveness pings back to your supervisor.</span></span><br><span class="line">supervised no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> If a pid file is specified, Redis writes it <span class="built_in">where</span> specified at startup</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and removes it at <span class="built_in">exit</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># When the server runs non daemonized, no pid file is created if none is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> specified <span class="keyword">in</span> the configuration. When the server is daemonized, the pid file</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is used even <span class="keyword">if</span> not specified, defaulting to <span class="string">&quot;/var/run/redis.pid&quot;</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Creating a pid file is best effort: if Redis is not able to create it</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nothing bad happens, the server will start and run normally.</span></span><br><span class="line">pidfile /var/run/redis_6379.pid</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specify the server verbosity level.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This can be one of:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> debug (a lot of information, useful <span class="keyword">for</span> development/testing)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> verbose (many rarely useful info, but not a mess like the debug level)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> notice (moderately verbose, what you want <span class="keyword">in</span> production probably)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> warning (only very important / critical messages are logged)</span></span><br><span class="line">loglevel notice</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specify the <span class="built_in">log</span> file name. Also the empty string can be used to force</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis to <span class="built_in">log</span> on the standard output. Note that <span class="keyword">if</span> you use standard</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> output <span class="keyword">for</span> logging but daemonize, logs will be sent to /dev/null</span></span><br><span class="line">logfile &quot;&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> To <span class="built_in">enable</span> logging to the system logger, just <span class="built_in">set</span> <span class="string">&#x27;syslog-enabled&#x27;</span> to yes,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and optionally update the other syslog parameters to suit your needs.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> syslog-enabled no</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specify the syslog identity.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> syslog-ident redis</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> syslog-facility local0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the number of databases. The default database is DB 0, you can select</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a different one on a per-connection basis using SELECT &lt;dbid&gt; <span class="built_in">where</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> dbid is a number between 0 and <span class="string">&#x27;databases&#x27;</span>-1</span></span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> By default Redis shows an ASCII art logo only when started to <span class="built_in">log</span> to the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> standard output and <span class="keyword">if</span> the standard output is a TTY. Basically this means</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that normally a logo is displayed only <span class="keyword">in</span> interactive sessions.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># However it is possible to force the pre-4.0 behavior and always show a</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ASCII art logo <span class="keyword">in</span> startup logs by setting the following option to yes.</span></span><br><span class="line">always-show-logo yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### SNAPSHOTTING  ################################</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Save the DB on disk:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   save &lt;seconds&gt; &lt;changes&gt;</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   Will save the DB if both the given number of seconds and the given</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   number of write operations against the DB occurred.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   In the example below the behaviour will be to save:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   after 900 sec (15 min) <span class="keyword">if</span> at least 1 key changed</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   after 300 sec (5 min) <span class="keyword">if</span> at least 10 keys changed</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   after 60 sec <span class="keyword">if</span> at least 10000 keys changed</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   Note: you can disable saving completely by commenting out all &quot;save&quot; lines.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   It is also possible to remove all the previously configured save</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   points by adding a save directive with a single empty string argument</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   like <span class="keyword">in</span> the following example:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   save &quot;&quot;</span></span></span><br><span class="line"></span><br><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> By default Redis will stop accepting writes <span class="keyword">if</span> RDB snapshots are enabled</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (at least one save point) and the latest background save failed.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This will make the user aware (<span class="keyword">in</span> a hard way) that data is not persisting</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> on disk properly, otherwise chances are that no one will notice and some</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> disaster will happen.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If the background saving process will start working again Redis will</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> automatically allow writes again.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># However if you have setup your proper monitoring of the Redis server</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and persistence, you may want to <span class="built_in">disable</span> this feature so that Redis will</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">continue</span> to work as usual even <span class="keyword">if</span> there are problems with disk,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> permissions, and so forth.</span></span><br><span class="line">stop-writes-on-bgsave-error yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Compress string objects using LZF when dump .rdb databases?</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For default that<span class="string">&#x27;s set to &#x27;</span>yes<span class="string">&#x27; as it&#x27;</span>s almost always a win.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> If you want to save some CPU <span class="keyword">in</span> the saving child <span class="built_in">set</span> it to <span class="string">&#x27;no&#x27;</span> but</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the dataset will likely be bigger <span class="keyword">if</span> you have compressible values or keys.</span></span><br><span class="line">rdbcompression yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Since version 5 of RDB a CRC64 checksum is placed at the end of the file.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This makes the format more resistant to corruption but there is a performance</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> hit to pay (around 10%) when saving and loading RDB files, so you can <span class="built_in">disable</span> it</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> maximum performances.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># RDB files created with checksum disabled have a checksum of zero that will</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tell the loading code to skip the check.</span></span><br><span class="line">rdbchecksum yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The filename <span class="built_in">where</span> to dump the DB</span></span><br><span class="line">dbfilename dump.rdb</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The working directory.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The DB will be written inside this directory, with the filename specified</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> above using the <span class="string">&#x27;dbfilename&#x27;</span> configuration directive.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The Append Only File will also be created inside this directory.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note that you must specify a directory here, not a file name.</span></span></span><br><span class="line">dir ./</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################ REPLICATION #################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Master-Replica replication. Use replicaof to make a Redis instance a copy of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> another Redis server. A few things to understand ASAP about Redis replication.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   +------------------+      +---------------+</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   |      Master      | ---&gt; |    Replica    |</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   | (receive writes) |      |  (exact copy) |</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   +------------------+      +---------------+</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) Redis replication is asynchronous, but you can configure a master to</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    stop accepting writes <span class="keyword">if</span> it appears to be not connected with at least</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    a given number of replicas.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2) Redis replicas are able to perform a partial resynchronization with the</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    master <span class="keyword">if</span> the replication link is lost <span class="keyword">for</span> a relatively small amount of</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    time. You may want to configure the replication backlog size (see the next</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    sections of this file) with a sensible value depending on your needs.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3) Replication is automatic and does not need user intervention. After a</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    network partition replicas automatically try to reconnect to masters</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    and resynchronize with them.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># replicaof &lt;masterip&gt; &lt;masterport&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> If the master is password protected (using the <span class="string">&quot;requirepass&quot;</span> configuration</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> directive below) it is possible to tell the replica to authenticate before</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> starting the replication synchronization process, otherwise the master will</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> refuse the replica request.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># masterauth &lt;master-password&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> When a replica loses its connection with the master, or when the replication</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is still <span class="keyword">in</span> progress, the replica can act <span class="keyword">in</span> two different ways:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) if replica-serve-stale-data is set to &#x27;yes&#x27; (the default) the replica will</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    still reply to client requests, possibly with out of date data, or the</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    data <span class="built_in">set</span> may just be empty <span class="keyword">if</span> this is the first synchronization.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 2) if replica-serve-stale-data is set to &#x27;no&#x27; the replica will reply with</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    an error <span class="string">&quot;SYNC with master in progress&quot;</span> to all the kind of commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    but to INFO, replicaOF, AUTH, PING, SHUTDOWN, REPLCONF, ROLE, CONFIG,</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    SUBSCRIBE, UNSUBSCRIBE, PSUBSCRIBE, PUNSUBSCRIBE, PUBLISH, PUBSUB,</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    COMMAND, POST, HOST: and LATENCY.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash">replica-serve-stale-data yes</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> You can configure a replica instance to accept writes or not. Writing against</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a replica instance may be useful to store some ephemeral data (because data</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> written on a replica will be easily deleted after resync with the master) but</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> may also cause problems <span class="keyword">if</span> clients are writing to it because of a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> misconfiguration.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Since Redis 2.6 by default replicas are read-only.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note: read only replicas are not designed to be exposed to untrusted clients</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> on the internet. It<span class="string">&#x27;s just a protection layer against misuse of the instance.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Still a <span class="built_in">read</span> only replica exports by default all the administrative commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> security of <span class="built_in">read</span> only replicas using <span class="string">&#x27;rename-command&#x27;</span> to shadow all the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> administrative / dangerous commands.</span></span><br><span class="line">replica-read-only yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Replication SYNC strategy: disk or socket.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># -------------------------------------------------------</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># New replicas and reconnecting replicas that are not able to continue the replication</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> process just receiving differences, need to <span class="keyword">do</span> what is called a <span class="string">&quot;full</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> synchronization<span class="string">&quot;. An RDB file is transmitted from the master to the replicas.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> The transmission can happen <span class="keyword">in</span> two different ways:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) Disk-backed: The Redis master creates a new process that writes the RDB</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">                 file on disk. Later the file is transferred by the parent</span></span><br><span class="line"><span class="meta">#</span><span class="bash">                 process to the replicas incrementally.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2) Diskless: The Redis master creates a new process that directly writes the</span></span><br><span class="line"><span class="meta">#</span><span class="bash">              RDB file to replica sockets, without touching the disk at all.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># With disk-backed replication, while the RDB file is generated, more replicas</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> can be queued and served with the RDB file as soon as the current child producing</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the RDB file finishes its work. With diskless replication instead once</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the transfer starts, new replicas arriving will be queued and a new transfer</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will start when the current one terminates.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># When diskless replication is used, the master waits a configurable amount of</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> time (<span class="keyword">in</span> seconds) before starting the transfer <span class="keyword">in</span> the hope that multiple replicas</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will arrive and the transfer can be parallelized.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># With slow disks and fast (large bandwidth) networks, diskless replication</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> works better.</span></span><br><span class="line">repl-diskless-sync no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> When diskless replication is enabled, it is possible to configure the delay</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the server waits <span class="keyword">in</span> order to spawn the child that transfers the RDB via socket</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to the replicas.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This is important since once the transfer starts, it is not possible to serve</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> new replicas arriving, that will be queued <span class="keyword">for</span> the next RDB transfer, so the server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> waits a delay <span class="keyword">in</span> order to <span class="built_in">let</span> more replicas arrive.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The delay is specified in seconds, and by default is 5 seconds. To disable</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> it entirely just <span class="built_in">set</span> it to 0 seconds and the transfer will start ASAP.</span></span><br><span class="line">repl-diskless-sync-delay 5</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Replicas send PINGs to server <span class="keyword">in</span> a predefined interval. It<span class="string">&#x27;s possible to change</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> this interval with the repl_ping_replica_period option. The default value is 10</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> seconds.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># repl-ping-replica-period 10</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The following option sets the replication timeout <span class="keyword">for</span>:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) Bulk transfer I/O during SYNC, from the point of view of replica.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2) Master timeout from the point of view of replicas (data, pings).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3) Replica timeout from the point of view of masters (REPLCONF ACK pings).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># It is important to make sure that this value is greater than the value</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> specified <span class="keyword">for</span> repl-ping-replica-period otherwise a timeout will be detected</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> every time there is low traffic between the master and the replica.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># repl-timeout 60</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Disable TCP_NODELAY on the replica socket after SYNC?</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If you select &quot;yes&quot; Redis will use a smaller number of TCP packets and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> less bandwidth to send data to replicas. But this can add a delay <span class="keyword">for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the data to appear on the replica side, up to 40 milliseconds with</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Linux kernels using a default configuration.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If you select &quot;no&quot; the delay for data to appear on the replica side will</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> be reduced but more bandwidth will be used <span class="keyword">for</span> replication.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># By default we optimize for low latency, but in very high traffic conditions</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> or when the master and replicas are many hops away, turning this to <span class="string">&quot;yes&quot;</span> may</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> be a good idea.</span></span><br><span class="line">repl-disable-tcp-nodelay no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the replication backlog size. The backlog is a buffer that accumulates</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> replica data when replicas are disconnected <span class="keyword">for</span> some time, so that when a replica</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wants to reconnect again, often a full resync is not needed, but a partial</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> resync is enough, just passing the portion of data the replica missed <span class="keyword">while</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> disconnected.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The bigger the replication backlog, the longer the time the replica can be</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> disconnected and later be able to perform a partial resynchronization.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The backlog is only allocated once there is at least a replica connected.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># repl-backlog-size 1mb</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> After a master has no longer connected replicas <span class="keyword">for</span> some time, the backlog</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will be freed. The following option configures the amount of seconds that</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> need to elapse, starting from the time the last replica disconnected, <span class="keyword">for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the backlog buffer to be freed.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note that replicas never free the backlog for timeout, since they may be</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> promoted to masters later, and should be able to correctly <span class="string">&quot;partially</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> resynchronize<span class="string">&quot; with the replicas: hence they should always accumulate backlog.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># A value of 0 means to never release the backlog.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># repl-backlog-ttl 3600</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The replica priority is an <span class="built_in">integer</span> number published by Redis <span class="keyword">in</span> the INFO output.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> It is used by Redis Sentinel <span class="keyword">in</span> order to select a replica to promote into a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> master <span class="keyword">if</span> the master is no longer working correctly.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># A replica with a low priority number is considered better for promotion, so</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> instance <span class="keyword">if</span> there are three replicas with priority 10, 100, 25 Sentinel will</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pick the one with priority 10, that is the lowest.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># However a special priority of 0 marks the replica as not able to perform the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> role of master, so a replica with priority of 0 will never be selected by</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis Sentinel <span class="keyword">for</span> promotion.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># By default the priority is 100.</span></span></span><br><span class="line">replica-priority 100</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> It is possible <span class="keyword">for</span> a master to stop accepting writes <span class="keyword">if</span> there are less than</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> N replicas connected, having a lag less or equal than M seconds.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The N replicas need to be in &quot;online&quot; state.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The lag in seconds, that must be &lt;= the specified value, is calculated from</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the last ping received from the replica, that is usually sent every second.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This option does not GUARANTEE that N replicas will accept the write, but</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will <span class="built_in">limit</span> the window of exposure <span class="keyword">for</span> lost writes <span class="keyword">in</span> <span class="keyword">case</span> not enough replicas</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> are available, to the specified number of seconds.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># For example to require at least 3 replicas with a lag &lt;= 10 seconds use:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># min-replicas-to-write 3</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> min-replicas-max-lag 10</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Setting one or the other to 0 disables the feature.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># By default min-replicas-to-write is set to 0 (feature disabled) and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> min-replicas-max-lag is <span class="built_in">set</span> to 10.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> A Redis master is able to list the address and port of the attached</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> replicas <span class="keyword">in</span> different ways. For example the <span class="string">&quot;INFO replication&quot;</span> section</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> offers this information, <span class="built_in">which</span> is used, among other tools, by</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis Sentinel <span class="keyword">in</span> order to discover replica instances.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Another place <span class="built_in">where</span> this info is available is <span class="keyword">in</span> the output of the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&quot;ROLE&quot;</span> <span class="built_in">command</span> of a master.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The listed IP and address normally reported by a replica is obtained</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> the following way:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   IP: The address is auto detected by checking the peer address</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   of the socket used by the replica to connect with the master.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   Port: The port is communicated by the replica during the replication</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   handshake, and is normally the port that the replica is using to</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   listen <span class="keyword">for</span> connections.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># However when port forwarding or Network Address Translation (NAT) is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> used, the replica may be actually reachable via different IP and port</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pairs. The following two options can be used by a replica <span class="keyword">in</span> order to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> report to its master a specific <span class="built_in">set</span> of IP and port, so that both INFO</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and ROLE will report those values.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># There is no need to use both the options if you need to override just</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the port or the IP address.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># replica-announce-ip 5.5.5.5</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> replica-announce-port 1234</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# SECURITY ###################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Require clients to issue AUTH &lt;PASSWORD&gt; before processing any other</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> commands.  This might be useful <span class="keyword">in</span> environments <span class="keyword">in</span> <span class="built_in">which</span> you <span class="keyword">do</span> not trust</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> others with access to the host running redis-server.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This should stay commented out for backward compatibility and because most</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> people <span class="keyword">do</span> not need auth (e.g. they run their own servers).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Warning: since Redis is pretty fast an outside user can try up to</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 150k passwords per second against a good box. This means that you should</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use a very strong password otherwise it will be very easy to <span class="built_in">break</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash">requirepass 123456</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Command renaming.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># It is possible to change the name of dangerous commands in a shared</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> environment. For instance the CONFIG <span class="built_in">command</span> may be renamed into something</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> hard to guess so that it will still be available <span class="keyword">for</span> internal-use tools</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> but not available <span class="keyword">for</span> general clients.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Example:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># It is also possible to completely kill a command by renaming it into</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> an empty string:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># rename-command CONFIG &quot;&quot;</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Please note that changing the name of commands that are logged into the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> AOF file or transmitted to replicas may cause problems.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################## CLIENTS ####################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the max number of connected clients at the same time. By default</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> this <span class="built_in">limit</span> is <span class="built_in">set</span> to 10000 clients, however <span class="keyword">if</span> the Redis server is not</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> able to configure the process file <span class="built_in">limit</span> to allow <span class="keyword">for</span> the specified <span class="built_in">limit</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the max number of allowed clients is <span class="built_in">set</span> to the current file <span class="built_in">limit</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> minus 32 (as Redis reserves a few file descriptors <span class="keyword">for</span> internal uses).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Once the limit is reached Redis will close all the new connections sending</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> an error <span class="string">&#x27;max number of clients reached&#x27;</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># maxclients 10000</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################# MEMORY MANAGEMENT ################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set a memory usage <span class="built_in">limit</span> to the specified amount of bytes.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> When the memory <span class="built_in">limit</span> is reached Redis will try to remove keys</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> according to the eviction policy selected (see maxmemory-policy).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If Redis can&#x27;t remove keys according to the policy, or if the policy is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> to <span class="string">&#x27;noeviction&#x27;</span>, Redis will start to reply with errors to commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that would use more memory, like SET, LPUSH, and so on, and will <span class="built_in">continue</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to reply to read-only commands like GET.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This option is usually useful when using Redis as an LRU or LFU cache, or to</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> a hard memory <span class="built_in">limit</span> <span class="keyword">for</span> an instance (using the <span class="string">&#x27;noeviction&#x27;</span> policy).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># WARNING: If you have replicas attached to an instance with maxmemory on,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the size of the output buffers needed to feed the replicas are subtracted</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> from the used memory count, so that network problems / resyncs will</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> not trigger a loop <span class="built_in">where</span> keys are evicted, and <span class="keyword">in</span> turn the output</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> buffer of replicas is full with DELs of keys evicted triggering the deletion</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> of more keys, and so forth until the database is completely emptied.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># In short... if you have replicas attached it is suggested that you set a lower</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">limit</span> <span class="keyword">for</span> maxmemory so that there is some free RAM on the system <span class="keyword">for</span> replica</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> output buffers (but this is not needed <span class="keyword">if</span> the policy is <span class="string">&#x27;noeviction&#x27;</span>).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># maxmemory &lt;bytes&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is reached. You can select among five behaviors:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># volatile-lru -&gt; Evict using approximated LRU among the keys with an expire set.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> allkeys-lru -&gt; Evict any key using approximated LRU.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> volatile-lfu -&gt; Evict using approximated LFU among the keys with an expire <span class="built_in">set</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> allkeys-lfu -&gt; Evict any key using approximated LFU.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> volatile-random -&gt; Remove a random key among the ones with an expire <span class="built_in">set</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> allkeys-random -&gt; Remove a random key, any key.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> volatile-ttl -&gt; Remove the key with the nearest expire time (minor TTL)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> noeviction -&gt; Don<span class="string">&#x27;t evict anything, just return an error on write operations.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># LRU means Least Recently Used</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> LFU means Least Frequently Used</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Both LRU, LFU and volatile-ttl are implemented using approximated</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> randomized algorithms.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note: with any of the above policies, Redis will return an error on write</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">       operations, when there are no suitable keys <span class="keyword">for</span> eviction.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#       At the date of writing these commands are: set setnx setex append</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span></span><br><span class="line"><span class="meta">#</span><span class="bash">       getset mset msetnx <span class="built_in">exec</span> sort</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The default is:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># maxmemory-policy noeviction</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> LRU, LFU and minimal TTL algorithms are not precise algorithms but approximated</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> algorithms (<span class="keyword">in</span> order to save memory), so you can tune it <span class="keyword">for</span> speed or</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> accuracy. For default Redis will check five keys and pick the one that was</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> used less recently, you can change the sample size using the following</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> configuration directive.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The default of 5 produces good enough results. 10 Approximates very closely</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="literal">true</span> LRU but costs more CPU. 3 is faster but not very accurate.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># maxmemory-samples 5</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Starting from Redis 5, by default a replica will ignore its maxmemory setting</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (unless it is promoted to master after a failover or manually). It means</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that the eviction of keys will be just handled by the master, sending the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> DEL commands to the replica as keys evict <span class="keyword">in</span> the master side.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This behavior ensures that masters and replicas stay consistent, and is usually</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> what you want, however <span class="keyword">if</span> your replica is writable, or you want the replica to have</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a different memory setting, and you are sure all the writes performed to the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> replica are idempotent, <span class="keyword">then</span> you may change this default (but be sure to understand</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> what you are doing).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note that since the replica by default does not evict, it may end using more</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> memory than the one <span class="built_in">set</span> via maxmemory (there are certain buffers that may</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> be larger on the replica, or data structures may sometimes take more memory and so</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> forth). So make sure you monitor your replicas and make sure they have enough</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> memory to never hit a real out-of-memory condition before the master hits</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the configured maxmemory setting.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># replica-ignore-maxmemory yes</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################ LAZY FREEING ####################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis has two primitives to delete keys. One is called DEL and is a blocking</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> deletion of the object. It means that the server stops processing new commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to reclaim all the memory associated with an object <span class="keyword">in</span> a synchronous</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> way. If the key deleted is associated with a small object, the time needed</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to execute the DEL <span class="built_in">command</span> is very small and comparable to most other</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> O(1) or O(log_N) commands <span class="keyword">in</span> Redis. However <span class="keyword">if</span> the key is associated with an</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> aggregated value containing millions of elements, the server can block <span class="keyword">for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a long time (even seconds) <span class="keyword">in</span> order to complete the operation.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># For the above reasons Redis also offers non blocking deletion primitives</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> such as UNLINK (non blocking DEL) and the ASYNC option of FLUSHALL and</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> FLUSHDB commands, <span class="keyword">in</span> order to reclaim memory <span class="keyword">in</span> background. Those commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> are executed <span class="keyword">in</span> constant time. Another thread will incrementally free the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> object <span class="keyword">in</span> the background as fast as possible.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># DEL, UNLINK and ASYNC option of FLUSHALL and FLUSHDB are user-controlled.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> It<span class="string">&#x27;s up to the design of the application to understand when it is a good</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> idea to use one or the other. However the Redis server sometimes has to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete keys or flush the whole database as a side effect of other operations.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifically Redis deletes objects independently of a user call <span class="keyword">in</span> the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> following scenarios:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) On eviction, because of the maxmemory and maxmemory policy configurations,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    <span class="keyword">in</span> order to make room <span class="keyword">for</span> new data, without going over the specified</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    memory <span class="built_in">limit</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2) Because of expire: when a key with an associated time to live (see the</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    EXPIRE <span class="built_in">command</span>) must be deleted from memory.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3) Because of a side effect of a <span class="built_in">command</span> that stores data on a key that may</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    already exist. For example the RENAME <span class="built_in">command</span> may delete the old key</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    content when it is replaced with another one. Similarly SUNIONSTORE</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    or SORT with STORE option may delete existing keys. The SET <span class="built_in">command</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    itself removes any old content of the specified key <span class="keyword">in</span> order to replace</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    it with the specified string.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4) During replication, when a replica performs a full resynchronization with</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    its master, the content of the whole database is removed <span class="keyword">in</span> order to</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    load the RDB file just transferred.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># In all the above cases the default is to delete objects in a blocking way,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> like <span class="keyword">if</span> DEL was called. However you can configure each <span class="keyword">case</span> specifically</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to instead release memory <span class="keyword">in</span> a non-blocking way like <span class="keyword">if</span> UNLINK</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> was called, using the following configuration directives:</span></span><br><span class="line"></span><br><span class="line">lazyfree-lazy-eviction no</span><br><span class="line">lazyfree-lazy-expire no</span><br><span class="line">lazyfree-lazy-server-del no</span><br><span class="line">replica-lazy-flush no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################# APPEND ONLY MODE ###############################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> By default Redis asynchronously dumps the dataset on disk. This mode is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> good enough <span class="keyword">in</span> many applications, but an issue with the Redis process or</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a power outage may result into a few minutes of writes lost (depending on</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the configured save points).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The Append Only File is an alternative persistence mode that provides</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> much better durability. For instance using the default data fsync policy</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (see later <span class="keyword">in</span> the config file) Redis can lose just one second of writes <span class="keyword">in</span> a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> dramatic event like a server power outage, or a single write <span class="keyword">if</span> something</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> wrong with the Redis process itself happens, but the operating system is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> still running correctly.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># AOF and RDB persistence can be enabled at the same time without problems.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> If the AOF is enabled on startup Redis will load the AOF, that is the file</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> with the better durability guarantees.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Please check http://redis.io/topics/persistence for more information.</span></span></span><br><span class="line"></span><br><span class="line">appendonly no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The name of the append only file (default: <span class="string">&quot;appendonly.aof&quot;</span>)</span></span><br><span class="line"></span><br><span class="line">appendfilename &quot;appendonly.aof&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The fsync() call tells the Operating System to actually write data on disk</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> instead of waiting <span class="keyword">for</span> more data <span class="keyword">in</span> the output buffer. Some OS will really flush</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> data on disk, some other OS will just try to <span class="keyword">do</span> it ASAP.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Redis supports three different modes:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># no: don&#x27;t fsync, just let the OS flush the data when it wants. Faster.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> always: fsync after every write to the append only <span class="built_in">log</span>. Slow, Safest.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> everysec: fsync only one time every second. Compromise.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The default is &quot;everysec&quot;, as that&#x27;s usually the right compromise between</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> speed and data safety. It<span class="string">&#x27;s up to you to understand if you can relax this to</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&quot;no&quot;</span> that will <span class="built_in">let</span> the operating system flush the output buffer when</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> it wants, <span class="keyword">for</span> better performances (but <span class="keyword">if</span> you can live with the idea of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> some data loss consider the default persistence mode that<span class="string">&#x27;s snapshotting),</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> or on the contrary, use <span class="string">&quot;always&quot;</span> that<span class="string">&#x27;s very slow but a bit safer than</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> everysec.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># More details please check the following article:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://antirez.com/post/redis-persistence-demystified.html</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If unsure, use &quot;everysec&quot;.</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> appendfsync always</span></span><br><span class="line">appendfsync everysec</span><br><span class="line"><span class="meta">#</span><span class="bash"> appendfsync no</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> When the AOF fsync policy is <span class="built_in">set</span> to always or everysec, and a background</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> saving process (a background save or AOF <span class="built_in">log</span> background rewriting) is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> performing a lot of I/O against the disk, <span class="keyword">in</span> some Linux configurations</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis may block too long on the fsync() call. Note that there is no fix <span class="keyword">for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> this currently, as even performing fsync <span class="keyword">in</span> a different thread will block</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> our synchronous write(2) call.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># In order to mitigate this problem it&#x27;s possible to use the following option</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that will prevent fsync() from being called <span class="keyword">in</span> the main process <span class="keyword">while</span> a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> BGSAVE or BGREWRITEAOF is <span class="keyword">in</span> progress.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This means that while another child is saving, the durability of Redis is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the same as <span class="string">&quot;appendfsync none&quot;</span>. In practical terms, this means that it is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> possible to lose up to 30 seconds of <span class="built_in">log</span> <span class="keyword">in</span> the worst scenario (with the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> default Linux settings).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If you have latency problems turn this to &quot;yes&quot;. Otherwise leave it as</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&quot;no&quot;</span> that is the safest pick from the point of view of durability.</span></span><br><span class="line"></span><br><span class="line">no-appendfsync-on-rewrite no</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Automatic rewrite of the append only file.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis is able to automatically rewrite the <span class="built_in">log</span> file implicitly calling</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> BGREWRITEAOF when the AOF <span class="built_in">log</span> size grows by the specified percentage.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This is how it works: Redis remembers the size of the AOF file after the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> latest rewrite (<span class="keyword">if</span> no rewrite has happened since the restart, the size of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the AOF at startup is used).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This base size is compared to the current size. If the current size is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> bigger than the specified percentage, the rewrite is triggered. Also</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> you need to specify a minimal size <span class="keyword">for</span> the AOF file to be rewritten, this</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is useful to avoid rewriting the AOF file even <span class="keyword">if</span> the percentage increase</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is reached but it is still pretty small.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Specify a percentage of zero in order to disable the automatic AOF</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rewrite feature.</span></span><br><span class="line"></span><br><span class="line">auto-aof-rewrite-percentage 100</span><br><span class="line">auto-aof-rewrite-min-size 64mb</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> An AOF file may be found to be truncated at the end during the Redis</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> startup process, when the AOF data gets loaded back into memory.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This may happen when the system <span class="built_in">where</span> Redis is running</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> crashes, especially when an ext4 filesystem is mounted without the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> data=ordered option (however this can<span class="string">&#x27;t happen when Redis itself</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> crashes or aborts but the operating system still works correctly).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Redis can either exit with an error when this happens, or load as much</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> data as possible (the default now) and start <span class="keyword">if</span> the AOF file is found</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to be truncated at the end. The following option controls this behavior.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If aof-load-truncated is set to yes, a truncated AOF file is loaded and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the Redis server starts emitting a <span class="built_in">log</span> to inform the user of the event.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Otherwise <span class="keyword">if</span> the option is <span class="built_in">set</span> to no, the server aborts with an error</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and refuses to start. When the option is <span class="built_in">set</span> to no, the user requires</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to fix the AOF file using the <span class="string">&quot;redis-check-aof&quot;</span> utility before to restart</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the server.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note that if the AOF file will be found to be corrupted in the middle</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the server will still <span class="built_in">exit</span> with an error. This option only applies when</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis will try to <span class="built_in">read</span> more data from the AOF file but not enough bytes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will be found.</span></span><br><span class="line">aof-load-truncated yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> When rewriting the AOF file, Redis is able to use an RDB preamble <span class="keyword">in</span> the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> AOF file <span class="keyword">for</span> faster rewrites and recoveries. When this option is turned</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> on the rewritten AOF file is composed of two different stanzas:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   [RDB file][AOF tail]</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># When loading Redis recognizes that the AOF file starts with the &quot;REDIS&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> string and loads the prefixed RDB file, and continues loading the AOF</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tail.</span></span><br><span class="line">aof-use-rdb-preamble yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### LUA SCRIPTING  ###############################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Max execution time of a Lua script <span class="keyword">in</span> milliseconds.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If the maximum execution time is reached Redis will log that a script is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> still <span class="keyword">in</span> execution after the maximum allowed time and will start to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> reply to queries with an error.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># When a long running script exceeds the maximum execution time only the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> used to stop a script that did not yet called write commands. The second</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is the only way to shut down the server <span class="keyword">in</span> the <span class="keyword">case</span> a write <span class="built_in">command</span> was</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> already issued by the script but the user doesn<span class="string">&#x27;t want to wait for the natural</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> termination of the script.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Set it to 0 or a negative value for unlimited execution without warnings.</span></span></span><br><span class="line">lua-time-limit 5000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### REDIS CLUSTER  ###############################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Normal Redis instances can<span class="string">&#x27;t be part of a Redis Cluster; only nodes that are</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> started as cluster nodes can. In order to start a Redis instance as a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cluster node <span class="built_in">enable</span> the cluster support uncommenting the following:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-enabled yes</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Every cluster node has a cluster configuration file. This file is not</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> intended to be edited by hand. It is created and updated by Redis nodes.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Every Redis Cluster node requires a different cluster configuration file.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Make sure that instances running <span class="keyword">in</span> the same system <span class="keyword">do</span> not have</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> overlapping cluster configuration file names.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-config-file nodes-6379.conf</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Cluster node timeout is the amount of milliseconds a node must be unreachable</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> it to be considered <span class="keyword">in</span> failure state.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Most other internal time limits are multiple of the node timeout.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-node-timeout 15000</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> A replica of a failing master will avoid to start a failover <span class="keyword">if</span> its data</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> looks too old.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># There is no simple way for a replica to actually have an exact measure of</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> its <span class="string">&quot;data age&quot;</span>, so the following two checks are performed:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1) If there are multiple replicas able to failover, they exchange messages</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    <span class="keyword">in</span> order to try to give an advantage to the replica with the best</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    replication offset (more data from the master processed).</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    Replicas will try to get their rank by offset, and apply to the start</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    of the failover a delay proportional to their rank.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 2) Every single replica computes the time of the last interaction with</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    its master. This can be the last ping or <span class="built_in">command</span> received (<span class="keyword">if</span> the master</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    is still <span class="keyword">in</span> the <span class="string">&quot;connected&quot;</span> state), or the time that elapsed since the</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    disconnection with the master (<span class="keyword">if</span> the replication link is currently down).</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    If the last interaction is too old, the replica will not try to failover</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    at all.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The point &quot;2&quot; can be tuned by user. Specifically a replica will not perform</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the failover <span class="keyword">if</span>, since the last interaction with the master, the time</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> elapsed is greater than:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   (node-timeout * replica-validity-factor) + repl-ping-replica-period</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># So for example if node-timeout is 30 seconds, and the replica-validity-factor</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is 10, and assuming a default repl-ping-replica-period of 10 seconds, the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> replica will not try to failover <span class="keyword">if</span> it was not able to talk with the master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> longer than 310 seconds.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># A large replica-validity-factor may allow replicas with too old data to failover</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a master, <span class="keyword">while</span> a too small value may prevent the cluster from being able to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> elect a replica at all.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># For maximum availability, it is possible to set the replica-validity-factor</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to a value of 0, <span class="built_in">which</span> means, that replicas will always try to failover the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> master regardless of the last time they interacted with the master.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (However they<span class="string">&#x27;ll always try to apply a delay proportional to their</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> offset rank).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Zero is the only value able to guarantee that when all the partitions heal</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the cluster will always be able to <span class="built_in">continue</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-replica-validity-factor 10</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Cluster replicas are able to migrate to orphaned masters, that are masters</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that are left without working replicas. This improves the cluster ability</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to resist to failures as otherwise an orphaned master can<span class="string">&#x27;t be failed over</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> <span class="keyword">case</span> of failure <span class="keyword">if</span> it has no working replicas.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Replicas migrate to orphaned masters only if there are still at least a</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> given number of other working replicas <span class="keyword">for</span> their old master. This number</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is the <span class="string">&quot;migration barrier&quot;</span>. A migration barrier of 1 means that a replica</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will migrate only <span class="keyword">if</span> there is at least 1 other working replica <span class="keyword">for</span> its master</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and so forth. It usually reflects the number of replicas you want <span class="keyword">for</span> every</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> master <span class="keyword">in</span> your cluster.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Default is 1 (replicas migrate only if their masters remain with at least</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> one replica). To <span class="built_in">disable</span> migration just <span class="built_in">set</span> it to a very large value.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> A value of 0 can be <span class="built_in">set</span> but is useful only <span class="keyword">for</span> debugging and dangerous</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> production.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-migration-barrier 1</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> By default Redis Cluster nodes stop accepting queries <span class="keyword">if</span> they detect there</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is at least an <span class="built_in">hash</span> slot uncovered (no available node is serving it).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This way <span class="keyword">if</span> the cluster is partially down (<span class="keyword">for</span> example a range of <span class="built_in">hash</span> slots</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> are no longer covered) all the cluster becomes, eventually, unavailable.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> It automatically returns available as soon as all the slots are covered again.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># However sometimes you want the subset of the cluster which is working,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to <span class="built_in">continue</span> to accept queries <span class="keyword">for</span> the part of the key space that is still</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> covered. In order to <span class="keyword">do</span> so, just <span class="built_in">set</span> the cluster-require-full-coverage</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> option to no.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-require-full-coverage yes</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> This option, when <span class="built_in">set</span> to yes, prevents replicas from trying to failover its</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> master during master failures. However the master can still perform a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> manual failover, <span class="keyword">if</span> forced to <span class="keyword">do</span> so.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This is useful in different scenarios, especially in the case of multiple</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> data center operations, <span class="built_in">where</span> we want one side to never be promoted <span class="keyword">if</span> not</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> the <span class="keyword">case</span> of a total DC failure.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-replica-no-failover no</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> In order to setup your cluster make sure to <span class="built_in">read</span> the documentation</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> available at http://redis.io web site.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">######################### CLUSTER DOCKER/NAT support  ########################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> In certain deployments, Redis Cluster nodes address discovery fails, because</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> addresses are NAT-ted or because ports are forwarded (the typical <span class="keyword">case</span> is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Docker and other containers).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># In order to make Redis Cluster working in such environments, a static</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> configuration <span class="built_in">where</span> each node knows its public address is needed. The</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> following two options are used <span class="keyword">for</span> this scope, and are:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># * cluster-announce-ip</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> * cluster-announce-port</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> * cluster-announce-bus-port</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Each instruct the node about its address, client port, and cluster message</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> bus port. The information is <span class="keyword">then</span> published <span class="keyword">in</span> the header of the bus packets</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> so that other nodes will be able to correctly map the address of the node</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> publishing the information.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If the above options are not used, the normal Redis Cluster auto-detection</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will be used instead.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Note that when remapped, the bus port may not be at the fixed offset of</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> clients port + 10000, so you can specify any port and bus-port depending</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> on how they get remapped. If the bus-port is not <span class="built_in">set</span>, a fixed offset of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 10000 will be used as usually.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Example:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># cluster-announce-ip 10.1.1.5</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cluster-announce-port 6379</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cluster-announce-bus-port 6380</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# SLOW LOG ###################################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The Redis Slow Log is a system to <span class="built_in">log</span> queries that exceeded a specified</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> execution time. The execution time does not include the I/O operations</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> like talking with the client, sending the reply and so forth,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> but just the time needed to actually execute the <span class="built_in">command</span> (this is the only</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> stage of <span class="built_in">command</span> execution <span class="built_in">where</span> the thread is blocked and can not serve</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> other requests <span class="keyword">in</span> the meantime).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># You can configure the slow log with two parameters: one tells Redis</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> what is the execution time, <span class="keyword">in</span> microseconds, to exceed <span class="keyword">in</span> order <span class="keyword">for</span> the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">command</span> to get logged, and the other parameter is the length of the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> slow <span class="built_in">log</span>. When a new <span class="built_in">command</span> is logged the oldest one is removed from the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> queue of logged commands.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The following time is expressed <span class="keyword">in</span> microseconds, so 1000000 is equivalent</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to one second. Note that a negative number disables the slow <span class="built_in">log</span>, <span class="keyword">while</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a value of zero forces the logging of every <span class="built_in">command</span>.</span></span><br><span class="line">slowlog-log-slower-than 10000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> There is no <span class="built_in">limit</span> to this length. Just be aware that it will consume memory.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> You can reclaim memory used by the slow <span class="built_in">log</span> with SLOWLOG RESET.</span></span><br><span class="line">slowlog-max-len 128</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### LATENCY MONITOR ##############################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The Redis latency monitoring subsystem samples different operations</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> at runtime <span class="keyword">in</span> order to collect data related to possible sources of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> latency of a Redis instance.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Via the LATENCY command this information is available to the user that can</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span> graphs and obtain reports.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The system only logs operations that were performed in a time equal or</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> greater than the amount of milliseconds specified via the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> latency-monitor-threshold configuration directive. When its value is <span class="built_in">set</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to zero, the latency monitor is turned off.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># By default latency monitoring is disabled since it is mostly not needed</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> you don<span class="string">&#x27;t have latency issues, and collecting data has a performance</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> impact, that <span class="keyword">while</span> very small, can be measured under big load. Latency</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> monitoring can easily be enabled at runtime using the <span class="built_in">command</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&quot;CONFIG SET latency-monitor-threshold &lt;milliseconds&gt;&quot;</span> <span class="keyword">if</span> needed.</span></span><br><span class="line">latency-monitor-threshold 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################ EVENT NOTIFICATION ##############################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis can notify Pub/Sub clients about events happening <span class="keyword">in</span> the key space.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This feature is documented at http://redis.io/topics/notifications</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># For instance if keyspace events notification is enabled, and a client</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> performs a DEL operation on key <span class="string">&quot;foo&quot;</span> stored <span class="keyword">in</span> the Database 0, two</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> messages will be published via Pub/Sub:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># PUBLISH __keyspace@0__:foo del</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> PUBLISH __keyevent@0__:del foo</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># It is possible to select the events that Redis will notify among a set</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> of classes. Every class is identified by a single character:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">  E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  $     String commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  l     List commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  s     Set commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  h     Hash commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  z     Sorted <span class="built_in">set</span> commands</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  x     Expired events (events generated every time a key expires)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  e     Evicted events (events generated when a key is evicted <span class="keyword">for</span> maxmemory)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  A     Alias <span class="keyword">for</span> g<span class="variable">$lshzxe</span>, so that the <span class="string">&quot;AKE&quot;</span> string means all the events.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  The &quot;notify-keyspace-events&quot; takes as argument a string that is composed</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">  of zero or multiple characters. The empty string means that notifications</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  are disabled.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  Example: to enable list and generic events, from the point of view of the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">           event name, use:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  notify-keyspace-events Elg</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  Example 2: to get the stream of the expired keys subscribing to channel</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">             name __keyevent@0__:expired use:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  notify-keyspace-events Ex</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  By default all notifications are disabled because most users don&#x27;t need</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">  this feature and the feature has some overhead. Note that <span class="keyword">if</span> you don<span class="string">&#x27;t</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">  specify at least one of K or E, no events will be delivered.</span></span><br><span class="line">notify-keyspace-events &quot;&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################## ADVANCED CONFIG ###############################</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Hashes are encoded using a memory efficient data structure when they have a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> small number of entries, and the biggest entry does not exceed a given</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> threshold. These thresholds can be configured using the following directives.</span></span><br><span class="line">hash-max-ziplist-entries 512</span><br><span class="line">hash-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Lists are also encoded <span class="keyword">in</span> a special way to save a lot of space.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> The number of entries allowed per internal list node can be specified</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> as a fixed maximum size or a maximum number of elements.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For a fixed maximum size, use -5 through -1, meaning:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -5: max size: 64 Kb  &lt;-- not recommended <span class="keyword">for</span> normal workloads</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -4: max size: 32 Kb  &lt;-- not recommended</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -3: max size: 16 Kb  &lt;-- probably not recommended</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -2: max size: 8 Kb   &lt;-- good</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -1: max size: 4 Kb   &lt;-- good</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Positive numbers mean store up to _exactly_ that number of elements</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> per list node.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> but <span class="keyword">if</span> your use <span class="keyword">case</span> is unique, adjust the settings as necessary.</span></span><br><span class="line">list-max-ziplist-size -2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Lists may also be compressed.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Compress depth is the number of quicklist ziplist nodes from *each* side of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the list to *exclude* from compression.  The head and tail of the list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> are always uncompressed <span class="keyword">for</span> fast push/pop operations.  Settings are:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 0: <span class="built_in">disable</span> all list compression</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1: depth 1 means <span class="string">&quot;don&#x27;t start compressing until after 1 node into the list,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    going from either the head or tail<span class="string">&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    So: [head]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[tail]</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    [head], [tail] will always be uncompressed; inner nodes will compress.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[tail]</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    2 here means: don<span class="string">&#x27;t compress head or head-&gt;next or tail-&gt;prev or tail,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    but compress all nodes between them.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> etc.</span></span><br><span class="line">list-compress-depth 0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Sets have a special encoding <span class="keyword">in</span> just one <span class="keyword">case</span>: when a <span class="built_in">set</span> is composed</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> of just strings that happen to be integers <span class="keyword">in</span> radix 10 <span class="keyword">in</span> the range</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> of 64 bit signed integers.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> The following configuration setting sets the <span class="built_in">limit</span> <span class="keyword">in</span> the size of the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> <span class="keyword">in</span> order to use this special memory saving encoding.</span></span><br><span class="line">set-max-intset-entries 512</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Similarly to hashes and lists, sorted sets are also specially encoded <span class="keyword">in</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> order to save a lot of space. This encoding is only used when the length and</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> elements of a sorted <span class="built_in">set</span> are below the following limits:</span></span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> HyperLogLog sparse representation bytes <span class="built_in">limit</span>. The <span class="built_in">limit</span> includes the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 16 bytes header. When an HyperLogLog using the sparse representation crosses</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> this <span class="built_in">limit</span>, it is converted into the dense representation.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># A value greater than 16000 is totally useless, since at that point the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> dense representation is more memory efficient.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The suggested value is ~ 3000 in order to have the benefits of</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the space efficient encoding without slowing down too much PFADD,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">which</span> is O(N) with the sparse encoding. The value can be raised to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ~ 10000 when CPU is not a concern, but space is, and the data <span class="built_in">set</span> is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> composed of many HyperLogLogs with cardinality <span class="keyword">in</span> the 0 - 15000 range.</span></span><br><span class="line">hll-sparse-max-bytes 3000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Streams macro node max size / items. The stream data structure is a radix</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tree of big nodes that encode multiple items inside. Using this configuration</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> it is possible to configure how big a single node can be <span class="keyword">in</span> bytes, and the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> maximum number of items it may contain before switching to a new node when</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> appending new stream entries. If any of the following settings are <span class="built_in">set</span> to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> zero, the <span class="built_in">limit</span> is ignored, so <span class="keyword">for</span> instance it is possible to <span class="built_in">set</span> just a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> max entires <span class="built_in">limit</span> by setting max-bytes to 0 and max-entries to the desired</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> value.</span></span><br><span class="line">stream-node-max-bytes 4096</span><br><span class="line">stream-node-max-entries 100</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Active rehashing uses 1 millisecond every 100 milliseconds of CPU time <span class="keyword">in</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> order to <span class="built_in">help</span> rehashing the main Redis <span class="built_in">hash</span> table (the one mapping top-level</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> keys to values). The <span class="built_in">hash</span> table implementation Redis uses (see dict.c)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> performs a lazy rehashing: the more operation you run into a <span class="built_in">hash</span> table</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that is rehashing, the more rehashing <span class="string">&quot;steps&quot;</span> are performed, so <span class="keyword">if</span> the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> server is idle the rehashing is never complete and some more memory is used</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by the <span class="built_in">hash</span> table.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The default is to use this millisecond 10 times every second in order to</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> actively <span class="built_in">rehash</span> the main dictionaries, freeing memory when possible.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If unsure:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use <span class="string">&quot;activerehashing no&quot;</span> <span class="keyword">if</span> you have hard latency requirements and it is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> not a good thing <span class="keyword">in</span> your environment that Redis can reply from time to time</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to queries with 2 milliseconds delay.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># use &quot;activerehashing yes&quot; if you don&#x27;t have such hard requirements but</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> want to free memory asap when possible.</span></span><br><span class="line">activerehashing yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The client output buffer limits can be used to force disconnection of clients</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that are not reading data from the server fast enough <span class="keyword">for</span> some reason (a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> common reason is that a Pub/Sub client can<span class="string">&#x27;t consume messages as fast as the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> publisher can produce them).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The limit can be set differently for the three different classes of clients:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># normal -&gt; normal clients including MONITOR clients</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> replica  -&gt; replica clients</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The syntax of every client-output-buffer-limit directive is the following:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># client-output-buffer-limit &lt;class&gt; &lt;hard limit&gt; &lt;soft limit&gt; &lt;soft seconds&gt;</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># A client is immediately disconnected once the hard limit is reached, or if</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the soft <span class="built_in">limit</span> is reached and remains reached <span class="keyword">for</span> the specified number of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> seconds (continuously).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> So <span class="keyword">for</span> instance <span class="keyword">if</span> the hard <span class="built_in">limit</span> is 32 megabytes and the soft <span class="built_in">limit</span> is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 16 megabytes / 10 seconds, the client will get disconnected immediately</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> the size of the output buffers reach 32 megabytes, but will also get</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> disconnected <span class="keyword">if</span> the client reaches 16 megabytes and continuously overcomes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the <span class="built_in">limit</span> <span class="keyword">for</span> 10 seconds.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># By default normal clients are not limited because they don&#x27;t receive data</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> without asking (<span class="keyword">in</span> a push way), but just after a request, so only</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> asynchronous clients may create a scenario <span class="built_in">where</span> data is requested faster</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> than it can <span class="built_in">read</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Instead there is a default limit for pubsub and replica clients, since</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> subscribers and replicas receive data <span class="keyword">in</span> a push fashion.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Both the hard or the soft limit can be disabled by setting them to zero.</span></span></span><br><span class="line">client-output-buffer-limit normal 0 0 0</span><br><span class="line">client-output-buffer-limit replica 256mb 64mb 60</span><br><span class="line">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Client query buffers accumulate new commands. They are limited to a fixed</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> amount by default <span class="keyword">in</span> order to avoid that a protocol desynchronization (<span class="keyword">for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> instance due to a bug <span class="keyword">in</span> the client) will lead to unbound memory usage <span class="keyword">in</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the query buffer. However you can configure it here <span class="keyword">if</span> you have very special</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> needs, such us huge multi/<span class="built_in">exec</span> requests or alike.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># client-query-buffer-limit 1gb</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> In the Redis protocol, bulk requests, that are, elements representing single</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> strings, are normally limited ot 512 mb. However you can change this <span class="built_in">limit</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> here.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># proto-max-bulk-len 512mb</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis calls an internal <span class="keyword">function</span> to perform many background tasks, like</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> closing connections of clients <span class="keyword">in</span> timeout, purging expired keys that are</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> never requested, and so forth.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Not all tasks are performed with the same frequency, but Redis checks for</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tasks to perform according to the specified <span class="string">&quot;hz&quot;</span> value.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># By default &quot;hz&quot; is set to 10. Raising the value will use more CPU when</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis is idle, but at the same time will make Redis more responsive when</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> there are many keys expiring at the same time, and timeouts may be</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> handled with more precision.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The range is between 1 and 500, however a value over 100 is usually not</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a good idea. Most users should use the default of 10 and raise this up to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 100 only <span class="keyword">in</span> environments <span class="built_in">where</span> very low latency is required.</span></span><br><span class="line">hz 10</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Normally it is useful to have an HZ value <span class="built_in">which</span> is proportional to the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> number of clients connected. This is useful <span class="keyword">in</span> order, <span class="keyword">for</span> instance, to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> avoid too many clients are processed <span class="keyword">for</span> each background task invocation</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to avoid latency spikes.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Since the default HZ value by default is conservatively set to 10, Redis</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> offers, and enables by default, the ability to use an adaptive HZ value</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">which</span> will temporary raise when there are many connected clients.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># When dynamic HZ is enabled, the actual configured HZ will be used as</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> as a baseline, but multiples of the configured HZ value will be actually</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> used as needed once more clients are connected. In this way an idle</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> instance will use very little CPU time <span class="keyword">while</span> a busy instance will be</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> more responsive.</span></span><br><span class="line">dynamic-hz yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> When a child rewrites the AOF file, <span class="keyword">if</span> the following option is enabled</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the file will be fsync-ed every 32 MB of data generated. This is useful</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to commit the file to the disk more incrementally and avoid</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> big latency spikes.</span></span><br><span class="line">aof-rewrite-incremental-fsync yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> When redis saves RDB file, <span class="keyword">if</span> the following option is enabled</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the file will be fsync-ed every 32 MB of data generated. This is useful</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to commit the file to the disk more incrementally and avoid</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> big latency spikes.</span></span><br><span class="line">rdb-save-incremental-fsync yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Redis LFU eviction (see maxmemory setting) can be tuned. However it is a good</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> idea to start with the default settings and only change them after investigating</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> how to improve the performances and how the keys LFU change over time, <span class="built_in">which</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is possible to inspect via the OBJECT FREQ <span class="built_in">command</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># There are two tunable parameters in the Redis LFU implementation: the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> counter logarithm factor and the counter decay time. It is important to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> understand what the two parameters mean before changing them.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The LFU counter is just 8 bits per key, it&#x27;s maximum value is 255, so Redis</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> uses a probabilistic increment with logarithmic behavior. Given the value</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> of the old counter, when a key is accessed, the counter is incremented <span class="keyword">in</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> this way:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1. A random number R between 0 and 1 is extracted.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. A probability P is calculated as 1/(old_value*lfu_log_factor+1).</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. The counter is incremented only <span class="keyword">if</span> R &lt; P.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The default lfu-log-factor is 10. This is a table of how the frequency</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> counter changes with a different number of accesses with different</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> logarithmic factors:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># +--------+------------+------------+------------+------------+------------+</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> | factor | 100 hits   | 1000 hits  | 100K hits  | 1M hits    | 10M hits   |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> +--------+------------+------------+------------+------------+------------+</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> | 0      | 104        | 255        | 255        | 255        | 255        |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> +--------+------------+------------+------------+------------+------------+</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> | 1      | 18         | 49         | 255        | 255        | 255        |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> +--------+------------+------------+------------+------------+------------+</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> | 10     | 10         | 18         | 142        | 255        | 255        |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> +--------+------------+------------+------------+------------+------------+</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> | 100    | 8          | 11         | 49         | 143        | 255        |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> +--------+------------+------------+------------+------------+------------+</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># <span class="doctag">NOTE:</span> The above table was obtained by running the following commands:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   redis-benchmark -n 1000000 incr foo</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   redis-cli object freq foo</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># NOTE 2: The counter initial value is 5 in order to give new objects a chance</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to accumulate hits.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The counter decay time is the time, in minutes, that must elapse in order</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> the key counter to be divided by two (or decremented <span class="keyword">if</span> it has a value</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> less &lt;= 10).</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The default value for the lfu-decay-time is 1. A Special value of 0 means to</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> decay the counter every time it happens to be scanned.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># lfu-log-factor 10</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> lfu-decay-time 1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########################## ACTIVE DEFRAGMENTATION #######################</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># WARNING THIS FEATURE IS EXPERIMENTAL. However it was stress tested</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> even <span class="keyword">in</span> production and manually tested by multiple engineers <span class="keyword">for</span> some</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> time.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># What is active defragmentation?</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -------------------------------</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Active (online) defragmentation allows a Redis server to compact the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> spaces left between small allocations and deallocations of data <span class="keyword">in</span> memory,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> thus allowing to reclaim back memory.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Fragmentation is a natural process that happens with every allocator (but</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> less so with Jemalloc, fortunately) and certain workloads. Normally a server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> restart is needed <span class="keyword">in</span> order to lower the fragmentation, or at least to flush</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> away all the data and create it again. However thanks to this feature</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> implemented by Oran Agra <span class="keyword">for</span> Redis 4.0 this process can happen at runtime</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> an <span class="string">&quot;hot&quot;</span> way, <span class="keyword">while</span> the server is running.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Basically when the fragmentation is over a certain level (see the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> configuration options below) Redis will start to create new copies of the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> values <span class="keyword">in</span> contiguous memory regions by exploiting certain specific Jemalloc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> features (<span class="keyword">in</span> order to understand <span class="keyword">if</span> an allocation is causing fragmentation</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and to allocate it <span class="keyword">in</span> a better place), and at the same time, will release the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> old copies of the data. This process, repeated incrementally <span class="keyword">for</span> all the keys</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> will cause the fragmentation to drop back to normal values.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Important things to understand:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 1. This feature is disabled by default, and only works if you compiled Redis</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    to use the copy of Jemalloc we ship with the <span class="built_in">source</span> code of Redis.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    This is the default with Linux builds.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 2. You never need to enable this feature if you don&#x27;t have fragmentation</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    issues.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># 3. Once you experience fragmentation, you can enable this feature when</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    needed with the <span class="built_in">command</span> <span class="string">&quot;CONFIG SET activedefrag yes&quot;</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># The configuration parameters are able to fine tune the behavior of the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> defragmentation process. If you are not sure about what they mean it is</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> a good idea to leave the defaults untouched.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enabled active defragmentation</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> activedefrag yes</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Minimum amount of fragmentation waste to start active defrag</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> active-defrag-ignore-bytes 100mb</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Minimum percentage of fragmentation to start active defrag</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> active-defrag-threshold-lower 10</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Maximum percentage of fragmentation at <span class="built_in">which</span> we use maximum effort</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> active-defrag-threshold-upper 100</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Minimal effort <span class="keyword">for</span> defrag <span class="keyword">in</span> CPU percentage</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> active-defrag-cycle-min 5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Maximal effort <span class="keyword">for</span> defrag <span class="keyword">in</span> CPU percentage</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> active-defrag-cycle-max 75</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Maximum number of <span class="built_in">set</span>/<span class="built_in">hash</span>/zset/list fields that will be processed from</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the main dictionary scan</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> active-defrag-max-scan-fields 1000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> It is possible to pin different threads and processes of Redis to specific</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CPUs <span class="keyword">in</span> your system, <span class="keyword">in</span> order to maximize the performances of the server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This is useful both <span class="keyword">in</span> order to pin different Redis threads <span class="keyword">in</span> different</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CPUs, but also <span class="keyword">in</span> order to make sure that multiple Redis instances running</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> the same host will be pinned to different CPUs.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Normally you can do this using the &quot;taskset&quot; command, however it is also</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> possible to this via Redis configuration directly, both <span class="keyword">in</span> Linux and FreeBSD.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># You can pin the server/IO threads, bio threads, aof rewrite child process, and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the bgsave child process. The syntax to specify the cpu list is the same as</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the taskset <span class="built_in">command</span>:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Set redis server/io threads to cpu affinity 0,2,4,6:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> server_cpulist 0-7:2</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Set bio threads to cpu affinity 1,3:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> bio_cpulist 1,3</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Set aof rewrite child process to cpu affinity 8,9,10,11:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> aof_rewrite_cpulist 8-11</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Set bgsave child process to cpu affinity 1,10,11</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> bgsave_cpulist 1,10-11</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> In some cases redis will emit warnings and even refuse to start <span class="keyword">if</span> it detects</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> that the system is <span class="keyword">in</span> bad state, it is possible to suppress these warnings</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by setting the following config <span class="built_in">which</span> takes a space delimited list of warnings</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to suppress</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># ignore-warnings ARM64-COW-BUG</span></span></span><br></pre></td></tr></table></figure>
<h2><span id="nacos"><span id="inline-blue">nacos</span></span></h2><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241124/Docker_nacos_20241124_003.png" alt="Dockerfile nacos"></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> nacos/nacos-server:v2.<span class="number">1.1</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment"># 挂载目录</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /home/nacos</span></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /home/nacos</span></span><br><span class="line"><span class="comment"># 指定路径</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /home/nacos</span></span><br><span class="line"><span class="comment">#复制启动脚本</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./bin/docker-startup.sh /bin/docker-startup.sh</span></span><br><span class="line"><span class="comment">#赋予初始化脚本执行权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;chmod&quot;</span>, <span class="string">&quot;+x&quot;</span>, <span class="string">&quot;/bin/docker-startup.sh&quot;</span>]</span></span><br><span class="line"><span class="comment">#复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./docker-compose-wait/<span class="built_in">wait</span> /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment">#赋予检测脚本执行权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;chmod&quot;</span>, <span class="string">&quot;+x&quot;</span>, <span class="string">&quot;/wait&quot;</span>]</span></span><br><span class="line"><span class="comment"># 复制application.properties文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./conf/application.properties /home/nacos/conf/application.properties</span></span><br><span class="line"><span class="comment"># 复制nacos-logback.xml文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./conf/nacos-logback.xml /home/nacos/conf/nacos-logback.xml</span></span><br><span class="line"><span class="comment">#初始化命令</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> /<span class="built_in">wait</span> &amp;&amp; bin/docker-startup.sh</span></span><br></pre></td></tr></table></figure>
<p>application.properties文件内容如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.datasource.platform</span>=<span class="string">mysql</span></span><br><span class="line"><span class="meta">db.num</span>=<span class="string">1</span></span><br><span class="line"><span class="meta">db.url.0</span>=<span class="string">jdbc:mysql://photoframe-mysql:3306/nacos_config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line"><span class="meta">db.user</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">db.password</span>=<span class="string">coship</span></span><br><span class="line"><span class="meta">nacos.naming.empty-service.auto-clean</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">nacos.naming.empty-service.clean.initial-delay-ms</span>=<span class="string">50000</span></span><br><span class="line"><span class="meta">nacos.naming.empty-service.clean.period-time-ms</span>=<span class="string">30000</span></span><br><span class="line"><span class="meta">management.endpoints.web.exposure.include</span>=<span class="string">*</span></span><br><span class="line"><span class="meta">management.metrics.export.elastic.enabled</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">management.metrics.export.influx.enabled</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">server.tomcat.accesslog.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">server.tomcat.accesslog.pattern</span>=<span class="string">%h %l %u %t &quot;%r&quot; %s %b %D %&#123;User-Agent&#125;i %&#123;Request-Source&#125;i</span></span><br><span class="line"><span class="meta">server.tomcat.basedir</span>=<span class="string">/usr/local/photoframe/nacos/tomcat/logs</span></span><br><span class="line"><span class="meta">nacos.security.ignore.urls</span>=<span class="string">/,/error,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-ui/public/**,/v1/auth/**,/v1/console/health/**,/actuator/**,/v1/console/server/**</span></span><br><span class="line"><span class="meta">nacos.core.auth.system.type</span>=<span class="string">nacos</span></span><br><span class="line"><span class="meta">nacos.core.auth.enabled</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">nacos.core.auth.default.token.expire.seconds</span>=<span class="string">18000</span></span><br><span class="line"><span class="meta">nacos.core.auth.default.token.secret.key</span>=<span class="string">SecretKey012345678901234567890123456789012345678901234567890123456789</span></span><br><span class="line"><span class="meta">nacos.core.auth.caching.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">nacos.core.auth.enable.userAgentAuthWhite</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">nacos.core.auth.server.identity.key</span>=<span class="string">serverIdentity</span></span><br><span class="line"><span class="meta">nacos.core.auth.server.identity.value</span>=<span class="string">security</span></span><br><span class="line"><span class="meta">nacos.istio.mcp.server.enabled</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure>

<h2><span id="elasticsearch"><span id="inline-blue">Elasticsearch</span></span></h2><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241124/Docker_Elasticsearch_20241124_004.png" alt="Dockerfile elasticsearch"></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7</span></span><br><span class="line"><span class="comment">#维护者</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment">#拷贝安装包、创建elasticsearch用户elasticsearch、elasticsearch用户权限设置</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./tar/elasticsearch-8.8.0-linux-x86_64.tar.gz /usr/<span class="built_in">local</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span> &amp;&amp; tar -zxvf elasticsearch-8.8.0-linux-x86_64.tar.gz &amp;&amp;  \</span></span><br><span class="line"><span class="bash">rm -f elasticsearch-8.8.0-linux-x86_64.tar.gz &amp;&amp; \</span></span><br><span class="line"><span class="bash">useradd es  &amp;&amp; \</span></span><br><span class="line"><span class="bash">chown -R es:es /usr/<span class="built_in">local</span>/elasticsearch-8.8.0 &amp;&amp; \</span></span><br><span class="line"><span class="bash">chmod -R 777  /usr/<span class="built_in">local</span>/elasticsearch-8.8.0</span></span><br><span class="line"><span class="comment">#拷贝配置文件</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./config/ /usr/<span class="built_in">local</span>/elasticsearch-8.8.0/config/</span></span><br><span class="line"><span class="comment">#elasticsearch</span></span><br><span class="line"><span class="keyword">USER</span> es</span><br><span class="line"><span class="comment">#WORKDIR指令用于指定容器的一个目录， 容器启动时执行的命令会在该目录下执行</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /usr/<span class="built_in">local</span>/elasticsearch-8.8.0</span></span><br><span class="line"><span class="comment">#挂载匿名卷</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;/usr/local/elasticsearch-8.8.0/data&quot;</span>,<span class="string">&quot;/usr/local/elasticsearch-8.8.0/config&quot;</span>,<span class="string">&quot;/usr/local/elasticsearch-8.8.0/logs&quot;</span>]</span></span><br><span class="line"><span class="comment">#CMD用于设置默认执行的命令</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;/usr/local/elasticsearch-8.8.0/bin/elasticsearch&quot;</span>]</span></span><br><span class="line"><span class="comment">#暴露服务端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">9200</span> <span class="number">9300</span></span><br></pre></td></tr></table></figure>
<p>elasticsearch.yml配置文件如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ======================== Elasticsearch Configuration =========================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> Elasticsearch comes with reasonable defaults for most settings.</span></span><br><span class="line"><span class="comment">#       Before you set out to tweak and tune the configuration, make sure you</span></span><br><span class="line"><span class="comment">#       understand what are you trying to accomplish and the consequences.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The primary way of configuring a node is via this file. This template lists</span></span><br><span class="line"><span class="comment"># the most important settings you may want to configure for a production cluster.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please consult the documentation for further information on configuration options:</span></span><br><span class="line"><span class="comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Cluster -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for your cluster:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-application</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ------------------------------------ Node ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node-1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Add custom attributes to the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#node.attr.rack: r1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Paths ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to directory where to store the data (separate multiple locations by comma):</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.data:</span> <span class="string">/usr/local/elasticsearch-8.8.0/data</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to log files:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.logs:</span> <span class="string">/usr/local/elasticsearch-8.8.0/logs</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Memory -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Lock the memory on startup:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#bootstrap.memory_lock: true</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Make sure that the heap size is set to about half the memory available</span></span><br><span class="line"><span class="comment"># on the system and that the owner of the process is allowed to use this</span></span><br><span class="line"><span class="comment"># limit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Elasticsearch performs poorly when the system is swapping the memory.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Network -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch is only accessible on localhost. Set a different</span></span><br><span class="line"><span class="comment"># address here to expose this node on the network:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch listens for HTTP traffic on the first free port it</span></span><br><span class="line"><span class="comment"># finds starting at 9200. Set a specific HTTP port here:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the network module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># --------------------------------- Discovery ----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Pass an initial list of hosts to perform discovery when this node is started:</span></span><br><span class="line"><span class="comment"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#discovery.seed_hosts: [&quot;host1&quot;, &quot;host2&quot;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;node-1&quot;</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the discovery and cluster formation module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Various -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Allow wildcard deletion of indices:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#action.destructive_requires_name: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The following settings, TLS certificates, and keys have been automatically</span></span><br><span class="line"><span class="comment"># generated to configure Elasticsearch security features on 18-06-2024 06:57:00</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># --------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable security features</span></span><br><span class="line"><span class="attr">xpack.security.enabled:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">xpack.security.enrollment.enabled:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents</span></span><br><span class="line"><span class="attr">xpack.security.http.ssl:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">keystore.path:</span> <span class="string">certs/http.p12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable encryption and mutual authentication between cluster nodes</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">verification_mode:</span> <span class="string">certificate</span></span><br><span class="line">  <span class="attr">keystore.path:</span> <span class="string">certs/transport.p12</span></span><br><span class="line">  <span class="attr">truststore.path:</span> <span class="string">certs/transport.p12</span></span><br><span class="line"><span class="comment"># Create a new cluster with the current node only</span></span><br><span class="line"><span class="comment"># Additional nodes can still join the cluster later</span></span><br><span class="line"><span class="comment">#cluster.initial_master_nodes: [&quot;node-1&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------------- END SECURITY AUTO CONFIGURATION -------------------------</span></span><br></pre></td></tr></table></figure>

<p>Elasticsearch-8.8.0版本下载地址：<a href="https://www.elastic.co/downloads/past-releases/elasticsearch-8-8-0">https://www.elastic.co/downloads/past-releases/elasticsearch-8-8-0</a><br>config配置文件夹下包含开启安全校验的证书及管理员账号elastic/elastic<br>config目录下的文件百度网盘分享链接：<br>链接：<a href="https://pan.baidu.com/s/1io2oJNmVRVG6WHgoNBQXmA?pwd=az9e">https://pan.baidu.com/s/1io2oJNmVRVG6WHgoNBQXmA?pwd=az9e</a><br>提取码：az9e</p>
<h2><span id="nginx"><span id="inline-blue">nginx</span></span></h2><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241124/Docker_nginx_20241124_005.png" alt="Dockerfile nginx"></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> nginx:<span class="number">1.16</span>.<span class="number">1</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment"># 挂载目录</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /home/nginx</span></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /home/nginx</span></span><br><span class="line"><span class="comment"># 指定路径</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /home/nginx</span></span><br><span class="line"><span class="comment"># 复制conf文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./conf/nginx.conf /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="comment"># 复制html文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./html /home/nginx/html/</span></span><br><span class="line"><span class="comment">#复制容器依赖检测工具docker-compose-wait</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./docker-compose-wait/<span class="built_in">wait</span> /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment">#赋予检测脚本可执行权限</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod a+x /<span class="built_in">wait</span></span></span><br><span class="line"><span class="comment">#容器启动命令</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /<span class="built_in">wait</span> &amp;&amp; nginx -g <span class="string">&#x27;daemon off;&#x27;</span></span></span><br></pre></td></tr></table></figure>
<p>nginx.conf配置文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">user  root;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">	worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">	include       mime.types;</span><br><span class="line">	default_type  application/octet-stream;</span><br><span class="line">	client_max_body_size 1024m;</span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">log_format  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash">                  <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash">                  <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">access_log  logs/access.log  main;</span></span><br><span class="line"></span><br><span class="line">	sendfile        on;</span><br><span class="line"><span class="meta">	#</span><span class="bash">tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">keepalive_timeout  0;</span></span><br><span class="line">	keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line"><span class="meta">	#</span><span class="bash">gzip  on;</span></span><br><span class="line"></span><br><span class="line">	server &#123;</span><br><span class="line">		client_max_body_size 1024m;</span><br><span class="line">		listen       9090;</span><br><span class="line">		server_name  photoframe-nginx;</span><br><span class="line"></span><br><span class="line"><span class="meta">		#</span><span class="bash">charset koi8-r;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">		#</span><span class="bash">access_log  logs/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">		location / &#123;</span><br><span class="line">			root   /home/nginx/html/photo-ui/;</span><br><span class="line">			index  index.html;</span><br><span class="line">			try_files $uri $uri/ /index.html;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">		#</span><span class="bash"> 反向代理</span></span><br><span class="line">		location /prod-api/ &#123;</span><br><span class="line"><span class="meta">			#</span><span class="bash">rewrite ^/prod-api(.*)$ <span class="variable">$1</span> <span class="built_in">break</span>; <span class="comment">#去除prod-api这层目录</span></span></span><br><span class="line">			proxy_pass http://photoframe-gateway:9001/dev/;</span><br><span class="line">			proxy_set_header    Host                $http_host;</span><br><span class="line">			proxy_set_header    X-Real-IP           $realip_remote_addr;</span><br><span class="line">			proxy_set_header    X-Forwarded-Proto   $scheme;</span><br><span class="line">			proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;</span><br><span class="line">			proxy_connect_timeout 60;</span><br><span class="line">			proxy_send_timeout 60;</span><br><span class="line">			proxy_read_timeout 60;</span><br><span class="line">			send_timeout 60;</span><br><span class="line"></span><br><span class="line">			add_header Cache-Control no-cache;</span><br><span class="line"><span class="meta">			#</span><span class="bash"> 不缓存，支持流式输出</span></span><br><span class="line">			proxy_cache off;  # 关闭缓存</span><br><span class="line">			proxy_buffering off;  # 关闭代理缓冲</span><br><span class="line">			chunked_transfer_encoding on;  # 开启分块传输编码</span><br><span class="line">			tcp_nopush on;  # 开启TCP NOPUSH选项，禁止Nagle算法</span><br><span class="line">			tcp_nodelay on;  # 开启TCP NODELAY选项，禁止延迟ACK算法</span><br><span class="line">			keepalive_timeout 300;  # 设定keep-alive超时时间为65秒</span><br><span class="line"><span class="meta">			#</span></span><br><span class="line"><span class="bash">			<span class="comment"># #防止跨域问题</span></span></span><br><span class="line">			add_header &#x27;Access-Control-Allow-Origin&#x27; &#x27;*&#x27; always;</span><br><span class="line">			add_header &#x27;Access-Control-Allow-Credentials&#x27; &#x27;true&#x27;;</span><br><span class="line">			add_header &#x27;Access-Control-Allow-Methods&#x27; &#x27;GET, POST, OPTIONS&#x27;;</span><br><span class="line">			add_header &#x27;Access-Control-Allow-Headers&#x27; &#x27;DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type&#x27;;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="meta">		#</span><span class="bash">error_page  404              /404.html;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">		#</span><span class="bash"> redirect server error pages to the static page /50x.html</span></span><br><span class="line"><span class="meta">		#</span></span><br><span class="line"><span class="bash">		error_page   500 502 503 504  /50x.html;</span></span><br><span class="line">		location = /50x.html &#123;</span><br><span class="line">			root   html;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="rabbitmq"><span id="inline-blue">rabbitmq</span></span></h2><p>构建镜像上下文文件预览：<br><img src="/images/docker/20241124/Docker_rabbitmq_20241124_006.png" alt="Dockerfile rabbitmq"></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> rabbitmq:<span class="number">3.8</span>.<span class="number">8</span>-management</span><br><span class="line"><span class="comment">#维护者</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> <span class="number">909754</span> &lt;<span class="number">18685129726</span>@<span class="number">163</span>.com&gt;</span><br><span class="line"><span class="comment">#拷贝插件</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./plugins/rabbitmq_delayed_message_exchange-3.8.0.ez /plugins</span></span><br><span class="line"><span class="comment">#启用插件命令</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_delayed_message_exchange</span></span><br><span class="line"><span class="comment">#环境变量</span></span><br><span class="line"><span class="keyword">ENV</span> RABBITMQ_DEFAULT_VHOST=/   RABBITMQ_DEFAULT_USER=admin RABBITMQ_DEFAULT_PASS=admin</span><br><span class="line"><span class="comment">#暴露端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5672</span> <span class="number">15672</span></span><br></pre></td></tr></table></figure>
<p>rabbitmq.conf配置化文件内容如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">loopback_users.guest = false</span><br><span class="line">listeners.tcp.default = 5672</span><br><span class="line">default_pass = admin</span><br><span class="line">default_user = admin</span><br><span class="line">default_vhost = /</span><br><span class="line">management.tcp.port = 15672</span><br></pre></td></tr></table></figure>
<p>rabbitmq延迟队列插件下载地址：<a href="https://github.com/rabbitmq/rabbitmq-delayed-message-exchange/releases/download/v3.8.0/rabbitmq_delayed_message_exchange-3.8.0.ez">https://github.com/rabbitmq/rabbitmq-delayed-message-exchange/releases/download/v3.8.0/rabbitmq_delayed_message_exchange-3.8.0.ez</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title>微服务集成dockerfile-maven-plugin插件</title>
    <url>/Docker/blogs/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E6%88%90dockerfile-maven-plugin%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluedocker%E5%BC%80%E6%94%BE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5span"><span id="inline-blue">Docker开放远程连接</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E5%90%AFdocker%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">重启Docker服务</span></a></li>
<li><a href="#span-idinline-blueidea%E9%85%8D%E7%BD%AEdocker%E8%BF%9E%E6%8E%A5span"><span id="inline-blue">idea配置Docker连接</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0maven%E6%8F%92%E4%BB%B6%E4%BE%9D%E8%B5%96span"><span id="inline-blue">添加maven插件依赖</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Docker: 26.1.4
idea: 2018-2-1
dockerfile-maven-plugin: 1.4.9</code></pre>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务打包之后希望Docker构建镜像生成容器运行，使用dockerfile-maven-plugin插件实现</p>
<h1><span id="docker开放远程连接"><span id="inline-blue">Docker开放远程连接</span></span></h1><p>修改Docker服务配置文件，增加远程连接端口监听，文件所在位置<br>vim /lib/systemd/system/docker.service</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line"><span class="meta">#</span><span class="bash"> the default is not to use systemd <span class="keyword">for</span> cgroups because the delegate issues still</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> exists and systemd currently does not support the cgroup feature <span class="built_in">set</span> required</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> containers run by docker</span></span><br><span class="line">ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375  -H fd:// --containerd=/run/containerd/containerd.sock</span><br><span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line">RestartSec=2</span><br><span class="line">Restart=always</span><br></pre></td></tr></table></figure>
<p>-H tcp://0.0.0.0:2375  指定监听所有地址的2375端口连接</p>
<h1><span id="重启docker服务"><span id="inline-blue">重启Docker服务</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker.service</span><br></pre></td></tr></table></figure>
<h1><span id="idea配置docker连接"><span id="inline-blue">idea配置Docker连接</span></span></h1><p><img src="/images/docker/20241118/Docker_Idea_20241118_001.png" alt="Docker远程连接"></p>
<h1><span id="添加maven插件依赖"><span id="inline-blue">添加maven插件依赖</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--控制微服务build阶段生成jar时构建镜像 true:不执行 false:执行--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dockerfile-maven-plugin.version</span>&gt;</span>1.4.9<span class="tag">&lt;/<span class="name">dockerfile-maven-plugin.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Dockerfile.skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">Dockerfile.skip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--   dockerfile-maven-plugin      --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.spotify<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dockerfile-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>default<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>build<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">skip</span>&gt;</span>$&#123;Dockerfile.skip&#125;<span class="tag">&lt;/<span class="name">skip</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">repository</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tag</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">buildArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">JAR_FILE</span>&gt;</span>$&#123;project.build.finalName&#125;.jar<span class="tag">&lt;/<span class="name">JAR_FILE</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">buildArgs</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>maven clean install 执行后微服务模块自动构建对应镜像<br><img src="/images/docker/20241118/Docker_Idea_20241118_002.png" alt="Docker构建镜像验证"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Ibatis中报There is no READABLE property name</title>
    <url>/JDK/blogs/Ibatis%E4%B8%AD%E6%8A%A5There%20is%20no%20READABLE%20property%20name/</url>
    <content><![CDATA[<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目打包之后部署启动出现报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2024-10-18 13:39:00,296 ERROR [org.springframework.web.context.ContextLoader] (ServerService Thread Pool -- 94) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#x27;LogDao&#x27; defined in class path resource [conf/appContextDaoLog.xml]: Cannot resolve reference to bean &#x27;sqlMapClient&#x27; while setting bean property &#x27;sqlMapClient&#x27;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#x27;sqlMapClient&#x27; defined in class path resource [conf/appContextDao.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse config resource: class path resource [conf/sql-map-config-oracle.xml]; nested exception is com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: java.lang.RuntimeException: Error parsing XPath &#x27;/sqlMapConfig/sqlMap&#x27;.  Cause: com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: java.lang.RuntimeException: Error parsing XPath &#x27;/sqlMap/resultMap/result&#x27;.  Cause: com.ibatis.common.beans.ProbeException: There is no WRITEABLE property named &#x27;sTBSuggestedPrice&#x27; in class &#x27;com.xxx.dhm.core.dao.resource.po.PAsset&#x27;</span><br><span class="line">        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)</span><br><span class="line">        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)</span><br><span class="line">        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)</span><br><span class="line">        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)</span><br><span class="line">        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)</span><br><span class="line">        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)</span><br><span class="line">        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)</span><br><span class="line">        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)</span><br><span class="line">        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)</span><br><span class="line">        at com.xxx.dhm.common.uif.system.StartupListener.contextInitialized(StartupListener.java:27)</span><br><span class="line">        at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)</span><br><span class="line">        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:219)</span><br><span class="line">        at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:187)</span><br><span class="line">        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)</span><br><span class="line">        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$982/1450947022.call(Unknown Source)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$982/1450947022.call(Unknown Source)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$982/1450947022.call(Unknown Source)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$982/1450947022.call(Unknown Source)</span><br><span class="line">        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:255)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:105)</span><br><span class="line">        at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:87)</span><br><span class="line">        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)</span><br><span class="line">        at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)</span><br><span class="line">        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)</span><br><span class="line">        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)</span><br><span class="line">        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)</span><br><span class="line">        at java.lang.Thread.run(Thread.java:745)</span><br><span class="line">        at org.jboss.threads.JBossThread.run(JBossThread.java:513)</span><br><span class="line">Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#x27;sqlMapClient&#x27; defined in class path resource [conf/appContextDao.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse config resource: class path resource [conf/sql-map-config-oracle.xml]; nested exception is com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: java.lang.RuntimeException: Error parsing XPath &#x27;/sqlMapConfig/sqlMap&#x27;.  Cause: com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: java.lang.RuntimeException: Error parsing XPath &#x27;/sqlMap/resultMap/result&#x27;.  Cause: com.ibatis.common.beans.ProbeException: There is no WRITEABLE property named &#x27;sTBSuggestedPrice&#x27; in class &#x27;com.xxx.dhm.core.dao.resource.po.PAsset&#x27;</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)</span><br><span class="line">        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)</span><br><span class="line">        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)</span><br><span class="line">        ... 40 more</span><br><span class="line">Caused by: org.springframework.core.NestedIOException: Failed to parse config resource: class path resource [conf/sql-map-config-oracle.xml]; nested exception is com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: java.lang.RuntimeException: Error parsing XPath &#x27;/sqlMapConfig/sqlMap&#x27;.  Cause: com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: java.lang.RuntimeException: Error parsing XPath &#x27;/sqlMap/resultMap/result&#x27;.  Cause: com.ibatis.common.beans.ProbeException: There is no WRITEABLE property named &#x27;sTBSuggestedPrice&#x27; in class &#x27;com.xxx.dhm.core.dao.resource.po.PAsset&#x27;</span><br><span class="line">        at org.springframework.orm.ibatis.SqlMapClientFactoryBean.buildSqlMapClient(SqlMapClientFactoryBean.java:341)</span><br><span class="line">        at org.springframework.orm.ibatis.SqlMapClientFactoryBean.afterPropertiesSet(SqlMapClientFactoryBean.java:291)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)</span><br><span class="line">        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)</span><br><span class="line">        ... 47 more</span><br></pre></td></tr></table></figure>
<h1><span id="原因分析"><span id="inline-blue">原因分析</span></span></h1><p>问题咋一看之下以为是ibatis对应的实体类属性驼峰命名不规范导致，替换过报错对应实体属性对应的get/set方法，启动依然报错，察觉新版本才有这个问题，之前发布的版本也有这个实体类，并且没有做过改动，按道理应该不会报错，有可能是最近做的改动导致的问题，于是通过比对不同版本的pom.xml及发布后WEB-INF/lib目录下的jar包，发下如下差异：<br>pom.xml差异：<br><img src="/images/Ibatis/Ibatis_20241021_001.png" alt="Ibatis报错"><br>lib目录差异：<br><img src="/images/Ibatis/Ibatis_20241021_002.png" alt="Ibatis报错"><br><img src="/images/Ibatis/Ibatis_20241021_003.png" alt="Ibatis报错"><br>最终定位是由于添加了如下依赖导致报错，pom.xml去掉依赖即可。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-ibatis&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>JDK</category>
      </categories>
      <tags>
        <tag>JDK</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows 安装JDK版本不生效</title>
    <url>/JDK/blogs/Windows%20%E5%AE%89%E8%A3%85JDK%E7%89%88%E6%9C%AC%E4%B8%8D%E7%94%9F%E6%95%88/</url>
    <content><![CDATA[<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>Windows安装新版本JDK8，安装之后更改系统环境变量发现不生效</p>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>查看系统环境变量下JDK和JRE路径是否正常，如下所示：<br><img src="/images/Windows/FTP/Windows_FTP_20241021_001.png" alt="Windows JDK设置"><br>查看系统Path环境变量如下所示：<br><img src="/images/Windows/FTP/Windows_FTP_20241021_002.png" alt="Windows JDK设置"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">D:\SecureCRT\;%SystemRoot%\system32;</span><br><span class="line"><span class="meta">%</span><span class="bash">SystemRoot%;%SystemRoot%\System32\Wbem;</span></span><br><span class="line">C:\Program Files (x86)\Common Files\Oracle\Java\javapath;</span><br><span class="line"><span class="meta">%</span><span class="bash">JAVA_HOME%\bin;%JRE_HOME%\bin;</span></span><br><span class="line">D:\Python\Scripts\;D:\Python\;C:\Program Files (x86)\Common Files\NetSarang;</span><br><span class="line"><span class="meta">%</span><span class="bash">SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;E:\st-android\android-sdk\platform-tools;</span></span><br><span class="line"><span class="meta">%</span><span class="bash">ANT_HOME%\bin;%MAVEN_HOME%/bin;%MySQL_HOME%/bin;D:\sqlite-tools;</span></span><br><span class="line">D:\redis_3.2.100\Redis-x64-3.2.100;D:\ffmpeg\bin;D:\nodeJs\;</span><br><span class="line">H:\Git\bin;%MONGODB_HOME%\bin;%PYTHON_HOME%;%PYTHON_HOME%\Scripts;</span><br><span class="line">D:\Python\Scripts\;C:\msys64\mingw64\bin;C:\msys64\mingw64\x86_64-w64-mingw32\bin;%NEXUS_HOME%\bin;</span><br><span class="line">C:\Program Files\TortoiseSVN\bin;C:\Users\909754\AppData\Roaming\npm;%MVND_HOME%\bin</span><br></pre></td></tr></table></figure>
<p>%JAVA_HOME%\bin;%JRE_HOME%\bin; 路径引用在C:\Program Files (x86)\Common Files\Oracle\Java\javapath后面，发现在对应路径下面存在java.exe执行文件，Path路径命令查找逻辑是只要找到对应的命令就成功返回，不会全部扫描。<br>将%JAVA_HOME%\bin;%JRE_HOME%\bin;移动到命令扫描的第一行即可。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Windows/FTP/Windows_FTP_20241021_003.png" alt="Windows JDK设置"></p>
]]></content>
      <categories>
        <category>JDK</category>
      </categories>
      <tags>
        <tag>JDK</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Idea设置yml格式文件缩进不生效的解决办法</title>
    <url>/Idea/blogs/Idea%E8%AE%BE%E7%BD%AEyml%E6%A0%BC%E5%BC%8F%E6%96%87%E4%BB%B6%E7%BC%A9%E8%BF%9B%E4%B8%8D%E7%94%9F%E6%95%88%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务模块yml格式配置文件配置项缩进修改为2个空格，已经在外部调整好了，但是粘贴进Idea,缩进又变成了4个空格</p>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>首先修改yml文件类型的缩进,调整为2个空格<br><img src="/images/Yml/Yml_20241014_001.png" alt="Idea yml格式文件缩进"><br>修改Java类型文件缩进,调整为2个空格<br><img src="/images/Yml/Yml_20241014_002.png" alt="Idea yml格式文件缩进"></p>
]]></content>
      <categories>
        <category>Idea</category>
      </categories>
      <tags>
        <tag>Idea</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL在线备份表</title>
    <url>/MySQL/blogs/MySQL%E5%9C%A8%E7%BA%BF%E5%A4%87%E4%BB%BD%E8%A1%A8/</url>
    <content><![CDATA[<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目上线后发现容器启动缓存加载数据库表内容，表记录过大大致缓存加载失败，接口请求获取不到数据</p>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>通过将数据库表记录过多的表项在线备份，减少缓存的加载数据量，从而缓解内存的压力，验证是否缓存导致的应用加载异常</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="备份原始表"><span id="inline-blue">备份原始表</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rename table source to source_bak</span><br></pre></td></tr></table></figure>
<h2><span id="新建原始表"><span id="inline-blue">新建原始表</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#like语法仅复制表结构，忽略表数据</span><br><span class="line">create table source like source_bak</span><br></pre></td></tr></table></figure>
<p>备份完成之后，source_bak是备份表，新建的source可以继续实现业务数据写入。</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven项目模块版本统一管理实现</title>
    <url>/Maven/blogs/Maven%E9%A1%B9%E7%9B%AE%E6%A8%A1%E5%9D%97%E7%89%88%E6%9C%AC%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blueflatten-maven-plugin%E6%8F%92%E4%BB%B6span"><span id="inline-blue">Flatten-maven-plugin插件</span></a></li>
<li><a href="#span-idinline-blue%E5%AD%90%E6%A8%A1%E5%9D%97%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AE%9A%E4%B9%89span"><span id="inline-blue">子模块版本号定义</span></a></li>
<li><a href="#span-idinline-blue%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95span"><span id="inline-blue">插件使用过程中的问题记录</span></a><ul>
<li><a href="#span-idinline-bluerevision%E5%8F%98%E9%87%8F%E7%88%86%E7%BA%A2span"><span id="inline-blue">revision变量爆红</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Java : 1.8<br>Flatten-maven-plugin: 1.3.0<br>SpringBoot: 2.6.6<br>SpringCloud: 2021.0.6<br>Maven: 3.5.4</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务项目集成模块越来越多，公共模块的版本管理很麻烦，通过集成Flatten-maven-plugin插件，实现版本号统一管理</p>
<h1><span id="flatten-maven-plugin插件"><span id="inline-blue">Flatten-maven-plugin插件</span></span></h1><p>项目父级pom.xml引入Flatten-maven-plugin插件及版本占位符${revision}定义</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-platform<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>common-platform<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">flatten-maven-plugin.version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">flatten-maven-plugin.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">revision</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">revision</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>flatten-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;flatten-maven-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">updatePomFile</span>&gt;</span>true<span class="tag">&lt;/<span class="name">updatePomFile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flattenMode</span>&gt;</span>resolveCiFriendliesOnly<span class="tag">&lt;/<span class="name">flattenMode</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>flatten<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">phase</span>&gt;</span>process-resources<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>flatten<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>flatten.clean<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">phase</span>&gt;</span>clean<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>clean<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意点：<br>父子模块遵循层级定义<br>父模块引入插件定义<br>模块${revision}版本号占位符不可与明确字符串版本号混用，否则报错</p>
<h1><span id="子模块版本号定义"><span id="inline-blue">子模块版本号定义</span></span></h1><p>子模块引用${revision}占位符，替代父项目的版本号</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-platform<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-log<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>idea忽略Flatten-maven-plugin生成的.flattened-pom.xml文件<br>添加Flatten-maven-plugin插件之后，Maven项目父级pom.xml执行install命令，各个模块会生成.flattened-pom.xml文件，文件内部是通过占位符替换，将${revision}替换成实际的版本，<br>模块打包实际执行的pom文件是模块下.flattened-pom.xml<br><img src="/images/Maven/Flatten-maven-plugin/Maven_Flattened_20240923_001.png" alt="Maven统一版本号管理"></p>
<p>如果在项目内部模块间相互引用不想再填写版本号，可通过以下方法实现<br>在公共模块下新增一个模块管理</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>common-bom<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">        common-bom common依赖项版本管理</span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">revision</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">revision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-base<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：<br>这个模块没有父级，打包方式是pom,公共模块依赖背dependencyManagement节点统一管理</p>
<p>父级项目pom.xml需要import这个模块的依赖管理，类似于MavenimportSpringBoot、SpringCloud的pom依赖关系一样</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;revision&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>后续项目模块间相互依赖只需要使用下面的引用方式即可，不用再填写版本</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vanishke<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="插件使用过程中的问题记录"><span id="inline-blue">插件使用过程中的问题记录</span></span></h1><h2><span id="revision变量爆红"><span id="inline-blue">revision变量爆红</span></span></h2><p>${revision}占位符支持需要升级Maven到3.5.2及以上，并且需要手动变更下idea的目录引用设置，如下图：</p>
<p><img src="/images/Maven/Flatten-maven-plugin/Maven_Flattened_20240923_002.png" alt="Maven统一版本号管理"></p>
<p>参考：<a href="https://www.mojohaus.org/flatten-maven-plugin/usage.html">https://www.mojohaus.org/flatten-maven-plugin/usage.html</a></p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
        <tag>Flatten-maven-plugin</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux RabbitMQ安装部署</title>
    <url>/RabbitMQ/blogs/Linux%20RabbitMQ%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85%E5%8C%85%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">安装包下载</span></a></li>
<li><a href="#span-idinline-blueerlang%E5%AE%89%E8%A3%85span"><span id="inline-blue">Erlang安装</span></a></li>
<li><a href="#span-idinline-bluerabbitmq%E5%AE%89%E8%A3%85span"><span id="inline-blue">RabbitMQ安装</span></a><ul>
<li><a href="#span-idinline-bluerabbitmq%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E5%8F%8A%E6%8E%88%E6%9D%83span"><span id="inline-blue">RabbitMQ后台管理及授权</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93span"><span id="inline-blue">安装过程中问题总结</span></a><ul>
<li><a href="#span-idinline-blueunknown-command-erl-perhaps-you-have-to-reshimspan"><span id="inline-blue">unknown command: erl. Perhaps you have to reshim?</span></a></li>
<li><a href="#span-idinline-blueauthentication-failed-rejected-by-the-remote-node-please-check-the-erlang-cookiespan"><span id="inline-blue">Authentication failed (rejected by the remote node), please check the Erlang cookie</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: CentOS Linux release 7.4.1708 (Core)<br>Erlang: erlang-21.3.8.16-1.el7.x86_64.rpm<br>RabbitMQ: rabbitmq-server-3.8.8-1.el7.noarch.rpm</p>
<h1><span id="安装包下载"><span id="inline-blue">安装包下载</span></span></h1><p>RabbitMQ安装需要依赖Erlang环境，两者版本对应关系如下：<br><img src="/images/RabbitMQ/RabbitMQ_20240920_001.png" alt="RabbitMQ&amp;Erlang版本关系"><br>版本对应详情地址：<a href="https://www.rabbitmq.com/docs/which-erlang">https://www.rabbitmq.com/docs/which-erlang</a><br>选择安装版本如下：<br>Erlang: 21.3.8.16<br>RabbitMQ：3.8.8<br>Erlang下载地址：<br><a href="https://packagecloud.io/rabbitmq/erlang/packages/el/7/erlang-21.3.8.16-1.el7.x86_64.rpm">https://packagecloud.io/rabbitmq/erlang/packages/el/7/erlang-21.3.8.16-1.el7.x86_64.rpm</a><br>RabbitMQ下载地址：<br><a href="https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.8/rabbitmq-server-3.8.8-1.el7.noarch.rpm">https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.8/rabbitmq-server-3.8.8-1.el7.noarch.rpm</a></p>
<h1><span id="erlang安装"><span id="inline-blue">Erlang安装</span></span></h1><p>创建RabbitMQ安装包存放路径</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /usr/local/rabbitMQ</span><br></pre></td></tr></table></figure>
<p>将erlang-21.3.8.16-1.el7.x86_64.rpm、rabbitmq-server-3.8.8-1.el7.noarch.rpm对应安装包文件通过xftp上传至/usr/local/rabbitMQ路径<br>执行安装命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rpm -ivh erlang-21.3.8.16-1.el7.x86_64.rpm</span><br><span class="line"><span class="meta">#</span><span class="bash">安装完成验证是否安装成功</span></span><br><span class="line">erl -v</span><br><span class="line">Erlang/OTP 21 [erts-10.3.5.12] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:1] [hipe]</span><br><span class="line"></span><br><span class="line">Eshell V10.3.5.12  (abort with ^G)</span><br></pre></td></tr></table></figure>

<h1><span id="rabbitmq安装"><span id="inline-blue">RabbitMQ安装</span></span></h1><p>RabbitMQ安装过程中需要依赖socat插件，安装命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install socat -y</span><br></pre></td></tr></table></figure>
<p>安装RabbitMQ命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rpm -ivh rabbitmq-server-3.8.8-1.el7.noarch.rpm</span><br></pre></td></tr></table></figure>

<p>RabbitMQ服务相关命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 加入系统自启动</span></span><br><span class="line">systemctl enable rabbitmq-server</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">systemctl start rabbitmq-server</span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止服务</span></span><br><span class="line">systemctl stop rabbitmq-server</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看服务状态</span></span><br><span class="line">systemctl status rabbitmq-server</span><br></pre></td></tr></table></figure>
<p><img src="/images/RabbitMQ/RabbitMQ_20240920_003.png" alt="RabbitMQ状态信息"></p>
<h2><span id="rabbitmq后台管理及授权"><span id="inline-blue">RabbitMQ后台管理及授权</span></span></h2><p>RabbitMQ通信端口：5672<br>RabbitMQ后台访问web端口：15672<br>RabbitMQ后台管理相关插件默认没有开启，开启管理后台web服务的命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">开启插件</span></span><br><span class="line">rabbitmq-plugins enable rabbitmq_management</span><br><span class="line"><span class="meta">#</span><span class="bash">重启服务</span></span><br><span class="line">systemctl restart rabbitmq-server</span><br></pre></td></tr></table></figure>
<p>RabbitMQ默认用户guest仅限于localhost主机访问，添加管理用户并赋予权限用于管理后台操作</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建账号admin、密码admin</span></span><br><span class="line">rabbitmqctl add_user admin admin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置用户admin角色</span></span><br><span class="line">rabbitmqctl set_user_tags admin administrator</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 为用户添加资源权限，添加配置、写、读权限</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> set_permissions [-p &lt;vhostpath&gt;] &lt;user&gt; &lt;conf&gt; &lt;write&gt; &lt;<span class="built_in">read</span>&gt;</span></span><br><span class="line">rabbitmqctl set_permissions -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br></pre></td></tr></table></figure>
<p>角色固定有四种级别：<br>administrator：可以登录控制台、查看所有信息、并对rabbitmq进行管理<br>monToring：监控者；登录控制台，查看所有信息<br>policymaker：策略制定者；登录控制台指定策略<br>managment：普通管理员；登录控制</p>
<p>添加完用户后访问管理后台<a href="http://127.0.0.1:15672/">http://127.0.0.1:15672</a><br><img src="/images/RabbitMQ/RabbitMQ_20240920_003.png" alt="RabbitMQ后台管理"></p>
<h1><span id="安装过程中问题总结"><span id="inline-blue">安装过程中问题总结</span></span></h1><h2><span id="unknown-command-erl-perhaps-you-have-to-reshim"><span id="inline-blue">unknown command: erl. Perhaps you have to reshim?</span></span></h2><p>错误提示貌似看着是Erlang环境的问题，实际是RabbitMQ安装之后的相关命令和之前卸载遗留的文件冲突导致<br>本次安装RabbitMQ生成命令所在位置/usr/lib/bin,命令如下：<br><img src="/images/RabbitMQ/RabbitMQ_20240920_004.png" alt="RabbitMQ后台管理"><br>遗留的命令文件所在位置/usr/sbin<br>比对之后发现两个位置的文件大小和时间不一致</p>
<p>解决办法：<br>删除/usr/sbin目录下的rabibtmq相关命令<br>通过软连接命令ln -s 将/usr/lib/bin路径下的文件链接到/usr/sbin（软连接命令使用绝对路径、否则因为文件层级太多可能导致报错）</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmqctl /usr/sbin/rabbitmqctl</span><br><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmq-defaults /usr/sbin/rabbitmq-defaults</span><br><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmq-diagnostics /usr/sbin/rabbitmq-diagnostics</span><br><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmq-env /usr/sbin/rabbitmq-env</span><br><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmq-plugins /usr/sbin/rabbitmq-plugins</span><br><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmq-queues /usr/sbin/rabbitmq-queues</span><br><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmq-server /usr/sbin/rabbitmq-server</span><br><span class="line">ln -s /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/sbin/rabbitmq-upgrade /usr/sbin/rabbitmq-upgrade</span><br></pre></td></tr></table></figure>
<h2><span id="authentication-failed-rejected-by-the-remote-node-please-check-the-erlang-cookie"><span id="inline-blue">Authentication failed (rejected by the remote node), please check the Erlang cookie</span></span></h2><p>错误信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbit@izrj9fqhk4voecczvplwe1z:</span><br><span class="line">  * connected to epmd (port 4369) on izrj9fqhk4voecczvplwe1z</span><br><span class="line">  * epmd reports node &#x27;rabbit&#x27; uses port 25672 for inter-node and CLI tool traffic </span><br><span class="line">  * TCP connection succeeded but Erlang distribution failed </span><br><span class="line"></span><br><span class="line">  * Authentication failed (rejected by the remote node), please check the Erlang cookie</span><br></pre></td></tr></table></figure>
<p>问题原因是因为erlang生成的.erlang.cookie文件和之前生成不一致导致</p>
<p>本次安装生成.erlang.cookie所在位置:/var/lib/rabbitmq/.erlang.cookie</p>
<p>卸载残留文件所在位置:/root</p>
<p>比对之后发现两个位置的文件不一致，.erlang.cookie是实现分布式一致性的关键所在</p>
<p>解决办法：<br>将/var/lib/rabbitmq/.erlang.cookie拷贝一份到/root目录下即可。</p>
<p>参考：<a href="https://www.cnblogs.com/crysmile/p/9471456.html">https://www.cnblogs.com/crysmile/p/9471456.html</a></p>
]]></content>
      <categories>
        <category>RabbitMQ</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>Curl命令请求携带多个参数</title>
    <url>/Linux/blogs/Curl%E5%91%BD%E4%BB%A4%E8%AF%B7%E6%B1%82%E6%90%BA%E5%B8%A6%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>MySQL: Red Hat Enterprise Linux Server release 6.5 (Santiago)</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>使用curl命令测试http接口，接口提示必填参数缺失，但实际上连接上有对应参数信息</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>curl命令后面的http请求链接如果有多个参数，但链接没有用双引号引起来的情况下，curl只能截取到&amp;标识符后面的第一个参数<br>正确的用法如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl &quot;http://10.9.219.2:28888/ulms/logicInfoList?smartCard=00072514986612787444&amp;stbCode=30320&amp;version=950&amp;flag=2&quot;</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/linux/Linux_20240812_001.png" alt="Cur接口测试"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Curl</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenGauss使用chameleon全量迁移MySQL数据</title>
    <url>/MySQL/blogs/OpenGauss%E4%BD%BF%E7%94%A8chameleon%E5%85%A8%E9%87%8F%E8%BF%81%E7%A7%BBMySQL%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a><ul>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85chameleonspan"><span id="inline-blue">安装chameleon</span></a></li>
<li><a href="#span-idinline-blue%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BBspan"><span id="inline-blue">数据迁移</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BBspan"><span id="inline-blue">问题汇总</span></a><ul>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E4%B8%80span"><span id="inline-blue">问题一</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E4%BA%8Cspan"><span id="inline-blue">问题二</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E4%B8%89span"><span id="inline-blue">问题三</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>MySQL: 5.7<br>chameleon: chameleon-6.0.0<br>OpenGauss: openGauss-6.0.0</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目迁移到国产操作系统，对应的数据库也一并更换为openGauss,需要将MySQL全量数据迁移到OpenGauss</p>
<h2><span id="安装chameleon"><span id="inline-blue">安装chameleon</span></span></h2><p>chameleon:<br>chameleon是一个用Python3编写的将MySQL迁移至openGauss的实时复制工具，支持初始全量数据的复制以及后续增量数据的实时在线复制功能。chameleon通过一次初始化配置，使用只读模式，将MySQL的数据全量拉取到openGauss。支持在同一快照下，表间数据并行迁移。<br>全量迁移支持的功能：支持表及表数据、视图、触发器、自定义函数、存储过程的全量迁移</p>
<p>下载chameleon：<br><a href="https://opengauss.obs.cn-south-1.myhuaweicloud.com/latest/tools/openEuler20.03/chameleon-6.0.0-x86_64.tar.gz">https://opengauss.obs.cn-south-1.myhuaweicloud.com/latest/tools/openEuler20.03/chameleon-6.0.0-x86_64.tar.gz</a><br>openEuler20.03操作系统x86_64架构，如果需要其他类型的安装包切换到下面地址：<br><a href="https://gitee.com/opengauss/openGauss-tools-chameleon/blob/master/chameleon%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md">https://gitee.com/opengauss/openGauss-tools-chameleon/blob/master/chameleon%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md</a><br>2.2节提供所有类型的安装包，可自行选择。</p>
<p>安装过程中，将自动安装该工具依赖的其他库，请确保本机的pip能正常下载安装相关依赖。相关依赖库及版本要求为：<br>PyMySQL&gt;=0.10.0, &lt;1.0.0<br>argparse&gt;=1.2.1<br>mysql-replication&gt;=0.22<br>py-opengauss&gt;=1.3.1<br>PyYAML&gt;=5.1.2<br>tabulate&gt;=0.8.1<br>daemonize&gt;=2.4.7<br>rollbar&gt;=0.13.17<br>geomet&gt;=0.3.0<br>mysqlclient&gt;=2.1.1<br>mysqlclient的安装需要先使用yum安装mysql-devel，直接使用yum install mysql-devel即可。</p>
<p>如果对应的yum源没有以上的依赖，可通过离线安装的方式下载依赖并上传安装，下载离线镜像源的地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/">https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/</a></p>
<p>Chameleon安装需要依赖python3环境，自行安装配置即可</p>
<p>解压chameleon安装包</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf chameleon-6.0.0-x86_64.tar.gz</span><br></pre></td></tr></table></figure>
<p>解压完成后，在脚本所在目录执行离线安装脚本build.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd chameleon-6.0.0</span><br><span class="line">sh build.sh</span><br></pre></td></tr></table></figure>
<p>执行完毕后通过绝对路径的方式即可调用chameleon命令（假设变色龙安装位置为/pkg）：<br>绝对路径查询变色龙版本号：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/chameleon/chameleon-6.0.0/venv/bin/chameleon --version </span><br></pre></td></tr></table></figure>

<p>如果报错信息为找不到libmysqlclient.so.*文件，例如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ImportError: libmysqlclient.so.20: cannot open shared object file:No such file or directory</span><br></pre></td></tr></table></figure>
<p>假设已经在chameleon所在服务器安装了mysql-devel、mysqlclient依赖，但还是提示libmysqlclient.so.20找不到，造成这个问题的原因是安装mysql-devel、mysqlclient之后对应.so文件没有被拷贝到/usr/lib64路径下，依赖没有被识别，解决办法是在安装了mysql的其他服务器上，rpm格式安装包安装的依赖在/usr/lib64路径下，采用免安装版MySQL在安装目录lib下，拷贝一份相同的文件到chameleon服务器/usr/lib64路径下<br>libmysqlclient.so.20文件后缀名不一致通过做软连接的方式处理下就可以了，命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ln -s libmysqlclient.so.20.3.20 libmysqlclient.so.20</span><br></pre></td></tr></table></figure>
<p><img src="/images/Chameleon/Chameleon_20240812_001.png" alt="chameleon数据迁移"></p>
<p>创建Python虚拟环境并激活</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /chameleon/chameleon-6.0.0/</span><br><span class="line">python3 -m venv venv</span><br><span class="line">source venv/bin/activate</span><br></pre></td></tr></table></figure>
<h2><span id="数据迁移"><span id="inline-blue">数据迁移</span></span></h2><p>MySQL开启复制功能,mysql配置文件mysqld节点下新增如下配置，MySQL服务重启生效</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21614 home]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">binlog_format = ROW</span><br><span class="line">log_bin = mysql-bin</span><br><span class="line">server_id = 1</span><br><span class="line">binlog_row_image = FULL</span><br></pre></td></tr></table></figure>

<p>创建chameleon配置文件<br>进入Python虚拟环境安装好chameleon工具。<br>执行如下命令创建chameleon配置文件目录。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chameleon set_configuration_files</span><br></pre></td></tr></table></figure>
<p>执行该命令后，将在~/.pg_chameleon/configuration目录下创建默认的配置文件模板。<br>执行如下命令复制一份默认的配置文件模板保存为default.yml。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/.pg_chameleon/configuration</span><br><span class="line">cp config-example.yml default.yml</span><br></pre></td></tr></table></figure>
<p>文件路径如下所示：<br><img src="/images/Chameleon/Chameleon_20240812_002.png" alt="chameleon数据迁移"><br>.pg_chameleon隐藏文件需要使用ll命令才能看到，或者直接用cd命令切换到对应路径下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /home/omm/.pg_chameleon/configuration</span><br></pre></td></tr></table></figure>
<p>default.yml文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> global settings</span></span><br><span class="line">pid_dir: &#x27;~/.pg_chameleon/pid/&#x27;</span><br><span class="line">log_dir: &#x27;~/.pg_chameleon/logs/&#x27;</span><br><span class="line">log_dest: file</span><br><span class="line">log_level: debug</span><br><span class="line">log_days_keep: 10</span><br><span class="line">rollbar_key: &#x27;&#x27;</span><br><span class="line">rollbar_env: &#x27;&#x27;</span><br><span class="line">dump_json: No</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> type_override allows the user to override the default <span class="built_in">type</span> conversion</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> into a different one.</span></span><br><span class="line"></span><br><span class="line">type_override:</span><br><span class="line"><span class="meta">#</span><span class="bash">  <span class="string">&quot;tinyint(1)&quot;</span>:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    override_to: boolean</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    override_tables:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">      - <span class="string">&quot;*&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> specify the compress properties when creating tables</span></span><br><span class="line">compress_properties:</span><br><span class="line">  compresstype: 0</span><br><span class="line">  compress_level: 0</span><br><span class="line">  compress_chunk_size: 4096</span><br><span class="line">  compress_prealloc_chunks: 0</span><br><span class="line">  compress_byte_convert: false</span><br><span class="line">  compress_diff_convert: false</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> postgres destination connection</span></span><br><span class="line">pg_conn:</span><br><span class="line">  host: &quot;10.9.216.172&quot;</span><br><span class="line">  port: &quot;5432&quot;</span><br><span class="line">  user: &quot;admin&quot;</span><br><span class="line">  password: &quot;admin@123&quot;</span><br><span class="line">  database: &quot;test12&quot;</span><br><span class="line">  charset: &quot;utf8&quot;</span><br><span class="line">  params:</span><br><span class="line"><span class="meta">#</span><span class="bash">    maintenance_work_mem: <span class="string">&quot;1G&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">    param1: value1</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    param2: value2</span></span><br><span class="line"></span><br><span class="line">sources:</span><br><span class="line">  mysql:</span><br><span class="line">    readers: 16</span><br><span class="line">    writers: 16</span><br><span class="line">    retry: 3</span><br><span class="line">    db_conn:</span><br><span class="line">      host: &quot;10.9.216.14&quot;</span><br><span class="line">      port: &quot;3306&quot;</span><br><span class="line">      user: &quot;root&quot;</span><br><span class="line">      password: &quot;coship&quot;</span><br><span class="line">      charset: &#x27;utf8&#x27;</span><br><span class="line">      connect_timeout: 10</span><br><span class="line">    schema_mappings:</span><br><span class="line">      test: test12</span><br><span class="line">    limit_tables:</span><br><span class="line">    skip_tables:</span><br><span class="line">    enable_compress: No</span><br><span class="line">    compress_tables:</span><br><span class="line">    grant_select_to:</span><br><span class="line">      - usr_readonly</span><br><span class="line">    lock_timeout: &quot;120s&quot;</span><br><span class="line">    my_server_id: 1</span><br><span class="line">    replica_batch_size: 10000</span><br><span class="line">    replay_max_rows: 10000</span><br><span class="line">    batch_retention: &#x27;1 day&#x27;</span><br><span class="line">    copy_max_memory: &quot;1024M&quot;</span><br><span class="line">    copy_mode: &#x27;direct&#x27;</span><br><span class="line">    out_dir: /tmp</span><br><span class="line">    csv_dir: /tmp</span><br><span class="line">    contain_columns: No</span><br><span class="line">    column_split: &#x27;,&#x27;</span><br><span class="line">    sleep_loop: 1</span><br><span class="line">    on_error_replay: continue</span><br><span class="line">    on_error_read: continue</span><br><span class="line">    auto_maintenance: &quot;disabled&quot;</span><br><span class="line">    index_parallel_workers: 8</span><br><span class="line">    gtid_enable: false</span><br><span class="line">    type: mysql</span><br><span class="line">    skip_events:</span><br><span class="line">      insert:</span><br><span class="line">      delete:</span><br><span class="line">      update:</span><br><span class="line">    keep_existing_schema: No</span><br><span class="line">    migrate_default_value: Yes</span><br><span class="line">    mysql_restart_config: No</span><br><span class="line">    is_create_index: Yes</span><br><span class="line">    index_dir: &#x27;~/.pg_chameleon/index/&#x27;</span><br><span class="line">    is_skip_completed_tables: No</span><br><span class="line">    with_datacheck: No</span><br><span class="line">    slice_size: 100000</span><br><span class="line">    csv_files_threshold:</span><br><span class="line">    csv_dir_space_threshold:</span><br></pre></td></tr></table></figure>

<p>迁移数据时，MySQL侧使用的用户名密码分别是 root 和 coship。MySQL服务器的IP和port分别是10.9.216.14和3306，待迁移的数据库是test。<br> openGauss侧使用的用户名密码分别是 admin/admin@123。openGauss服务器的IP和port分别是10.9.216.172和5432，目标数据库是test，同时会在test数据库创建指定shema，迁移的表都将位于该schema下。</p>
<p>需要注意的是，这里使用的用户需要有远程连接MySQL和openGauss的权限，以及对对应数据库的读写权限。同时对于openGauss，运行chameleon所在的机器需要在openGauss的远程访问白名单中。对于MySQL，用户还需要有RELOAD、REPLICATION CLIENT、REPLICATION SLAVE的权限。</p>
<p>初始化迁移</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd  /chameleon/chameleon-6.0.0/venv/bin</span><br><span class="line">./chameleon create_replica_schema --config default</span><br><span class="line">./chameleon add_source --config default --source mysql</span><br></pre></td></tr></table></figure>
<p>复制基础数据</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /chameleon/chameleon-6.0.0/venv/bin</span><br><span class="line">./chameleon init_replica --config default --source mysql</span><br></pre></td></tr></table></figure>
<p>该步骤完成之后，数据库表全量数据就迁移完成了</p>
<p>复制视图</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /chameleon/chameleon-6.0.0/venv/bin</span><br><span class="line">./chameleon start_view_replica --config default --source mysql --debug</span><br></pre></td></tr></table></figure>

<p>复制触发器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /chameleon/chameleon-6.0.0/venv/bin</span><br><span class="line">./chameleon start_trigger_replica --config default --source mysql --debug</span><br></pre></td></tr></table></figure>

<p>复制自定义函数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /chameleon/chameleon-6.0.0/venv/bin</span><br><span class="line">./chameleon start_func_replica --config default --source mysql --debug</span><br></pre></td></tr></table></figure>

<p>复制存储过程</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /chameleon/chameleon-6.0.0/venv/bin</span><br><span class="line">./chameleon start_proc_replica --config default --source mysql --debug</span><br></pre></td></tr></table></figure>

<p>迁移结束清理资源</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./chameleon stop_replica --config default --source mysql</span><br><span class="line">./chameleon detach_replica --config default --source mysql</span><br><span class="line">./chameleon drop_replica_schema --config default</span><br></pre></td></tr></table></figure>

<h1><span id="问题汇总"><span id="inline-blue">问题汇总</span></span></h1><h2><span id="问题一"><span id="inline-blue">问题一</span></span></h2><p>chameleon执行完初始化和复制初始化数据命令之后，发现日志没有报错，但MySQL数据库中的表数据库没有迁移到openGauss,可以到openGauss的日志运行目录查看对应的日志<br>，日志目录：/data/openGauss/gaussdb/data/db1/pg_log</p>
<h2><span id="问题二"><span id="inline-blue">问题二</span></span></h2><p>执行数据迁移命令后openGauss日志报错，提示数据库不兼容，原因是创建数据库时没有加上指定的兼容参数。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE database_test WITH OWNER joe ENCODING &#x27;utf8&#x27; dbcompatibility=&#x27;B&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">此处对dbcompatibility做补充</span></span><br><span class="line"><span class="meta">#</span><span class="bash">DBCOMPATIBILITY [ = ] compatibility_type</span></span><br><span class="line"><span class="meta">#</span><span class="bash">指定兼容的数据库的类型，默认兼容O。</span></span><br><span class="line"><span class="meta">#</span><span class="bash">取值范围：A、B、C、PG。分别表示兼容Oracle、MySQL、Teradata和PostgreSQL</span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果不指定B，要是建表语句有COMMENT注释就会报错：</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string">&quot;ERROR:  Comment is supported only in B compatible database.&quot;</span></span></span><br></pre></td></tr></table></figure>

<h2><span id="问题三"><span id="inline-blue">问题三</span></span></h2><p>执行数据迁移命令后openGauss日志报错，提示迁移用户权限不足，原因是没有给迁移用户分配足够的权限。<br>给迁移用户admin增加对应的权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">赋予创建角色权限</span></span><br><span class="line">alter user admin with Create role;</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予创建数据库权限</span></span><br><span class="line">alter user admin with Create DB;</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予备份权限</span></span><br><span class="line">alter user admin with Replication;</span><br><span class="line"><span class="meta">#</span><span class="bash">赋予系统管理员权限</span></span><br><span class="line">alter user admin with Sysadmin;</span><br></pre></td></tr></table></figure>
<p>更改用户权限之后，执行\du 可以查看用户权限<br><img src="/images/Chameleon/Chameleon_20240812_003.png" alt="chameleon数据迁移"></p>
<p>参考文档：<a href="https://gitee.com/opengauss/openGauss-tools-chameleon/blob/master/chameleon%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md">https://gitee.com/opengauss/openGauss-tools-chameleon/blob/master/chameleon%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md</a></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL开启gtid_mode模式</title>
    <url>/MySQL/blogs/MySQL%E5%BC%80%E5%90%AFgtid_mode%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E5%9C%A8%E7%BA%BF%E4%BF%AE%E6%94%B9span"><span id="inline-blue">在线修改</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>MySQL: 5.7</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>使用OpenGauss数据库迁移工具chameleon迁移MySQL全量数据需要MySQL支持gtid_mode模式。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>尝试在mysql控制台设置环境变量，被告知只读变量，通过配置文件又无法启动。</p>
<h2><span id="在线修改"><span id="inline-blue">在线修改</span></span></h2><p>需要以root身份在mysql服务器端的mysql控制台进行如下操作，其实就是gtid_mode不能直接设置为ON。按下列步骤依次操作即可。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">set global gtid_mode=on;</span><br><span class="line">--  ERROR 1788 (HY000): The value of @@GLOBAL.GTID_MODE can only be changed one step at a time: OFF &lt;-&gt; OFF_PERMISSIVE &lt;-&gt; ON_PERMISSIVE &lt;-&gt; ON. Also note that this value --  must be stepped up or down simultaneously on all servers. See the Manual for instructions.</span><br><span class="line">set global gtid_mode=OFF_PERMISSIVE;</span><br><span class="line">set global gtid_mode=ON_PERMISSIVE;</span><br><span class="line">set global gtid_mode=ON; </span><br><span class="line">-- 此处会有提示信息，必须要先设置 enforce_gtid_consistency=on</span><br><span class="line">-- ERROR 3111 (HY000): SET @@GLOBAL.GTID_MODE = ON is not allowed because ENFORCE_GTID_CONSISTENCY is not ON.</span><br><span class="line">set global enforce_gtid_consistency=on;</span><br><span class="line">set global gtid_mode=ON;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenGauss开启远程连接</title>
    <url>/OpenGauss/blogs/OpenGauss%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">修改配置</span></a></li>
<li><a href="#span-idinline-bluenavicate%E8%BF%9E%E6%8E%A5opengaussspan"><span id="inline-blue">navicate连接OpenGauss</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93span"><span id="inline-blue">问题总结</span></a><ul>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E4%B8%80span"><span id="inline-blue">问题一</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E4%BA%8Cspan"><span id="inline-blue">问题二</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>系统：openEuler release 20.03 (LTS-SP3)<br>数据库： openGauss-6.0.0-RC1</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>使用navicate连接远程OpenGauss数据库，提示没有权限被拒绝。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="修改配置"><span id="inline-blue">修改配置</span></span></h2><p>修改OpenGauss配置文件postgresql.conf，文件路径如下：<br>/data/openGauss/gaussdb/data/db1<br>找到password_encryption_type 这个属性，将注释取消，然后将value改成 0（密码格式sha256 MD5 都可用），更改好后按：wq保存<br><img src="/images/OpenGauss/OpenGauss_20240812_001.png" alt="OpenGauss配置"><br>修改OpenGauss配置文件pg_hba.conf，文件路径如下：<br>/data/openGauss/gaussdb/data/db1<br>增加如下两项配置，将远程连接授权方式修改为MD5<br>0.0.0.0 :表示所有外部主机都可以访问<br>10.9.212.55：表示使用navicate连接OpenGauss的windows主机地址<br><img src="/images/OpenGauss/OpenGauss_20240812_002.png" alt="OpenGauss配置"></p>
<p>配置文件修改完成之后需要修改用户的密码。变更加密方式，或者直接重新创建一个用户</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建新用户</span></span><br><span class="line">CREATE USER admin WITH PASSWORD &#x27;admin@123&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改用户密码</span></span><br><span class="line">ALTER ROLE admin IDENTIFIED BY &#x27;新密码&#x27; REPLACE &#x27;旧密码&#x27;</span><br></pre></td></tr></table></figure>
<h2><span id="navicate连接opengauss"><span id="inline-blue">navicate连接OpenGauss</span></span></h2><p><img src="/images/OpenGauss/OpenGauss_20240812_003.png" alt="navicate连接OpenGauss"><br><img src="/images/OpenGauss/OpenGauss_20240812_004.png" alt="navicate连接OpenGauss"></p>
<h1><span id="问题总结"><span id="inline-blue">问题总结</span></span></h1><h2><span id="问题一"><span id="inline-blue">问题一</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Forbid remote connection with initial user.</span><br></pre></td></tr></table></figure>
<p>openGauss不允许使用超员来远程连接，应该重新创建一个数据库用户进而使用远程连接。</p>
<h2><span id="问题二"><span id="inline-blue">问题二</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">none of the server&#x27;s SASL authentication mechanisms are supported</span><br></pre></td></tr></table></figure>
<p>说明你的用户密码加密方式不支持远程连接，要按以上流程修改。</p>
]]></content>
      <categories>
        <category>OpenGauss</category>
      </categories>
      <tags>
        <tag>OpenGauss</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenEuler系统部署OpenGauss数据库</title>
    <url>/OpenGauss/blogs/OpenEuler%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2OpenGauss%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99span"><span id="inline-blue">关闭防火墙</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8C%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fspan"><span id="inline-blue">设置字符集和环境变量</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E5%8C%85span"><span id="inline-blue">下载数据库安装包</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85opengauss%E6%95%B0%E6%8D%AE%E5%BA%93span"><span id="inline-blue">安装OpenGauss数据库</span></a></li>
<li><a href="#span-idinline-blue%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9Cspan"><span id="inline-blue">数据库基本操作</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>系统：openEuler release 20.03 (LTS-SP3)<br>数据库： openGauss-6.0.0-RC1</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目应用为集成国产系统和数据库，基于安全和性能上考虑选择openEuler系统和openGauss数据库</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="关闭防火墙"><span id="inline-blue">关闭防火墙</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@openeuler172 ~]# systemctl stop firewalld.service</span><br><span class="line">[root@openeuler172 ~]# systemctl status firewalld.service</span><br><span class="line">● firewalld.service - firewalld - dynamic firewall daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead)</span><br><span class="line">     Docs: man:firewalld(1)</span><br><span class="line"></span><br><span class="line">8月 09 16:05:33 openeuler172 systemd[1]: Starting firewalld - dynamic firewall daemon...</span><br><span class="line">8月 09 16:05:34 openeuler172 systemd[1]: Started firewalld - dynamic firewall daemon.</span><br><span class="line">8月 09 16:05:36 openeuler172 systemd[1]: Stopping firewalld - dynamic firewall daemon...</span><br><span class="line">8月 09 16:05:37 openeuler172 systemd[1]: firewalld.service: Succeeded.</span><br><span class="line">8月 09 16:05:37 openeuler172 systemd[1]: Stopped firewalld - dynamic firewall daemon.</span><br></pre></td></tr></table></figure>

<h2><span id="设置字符集和环境变量"><span id="inline-blue">设置字符集和环境变量</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@openeuler172 ~]# vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">文件末尾添加如下内容,packagePath为安装后OpenGauss所在位置，根据实际安装路径修改</span></span><br><span class="line">export LANG=zh_CN.UTF‐8</span><br><span class="line">export packagePath=/data/openGauss</span><br><span class="line">export LD_LIBRARY_PATH=$packagePath/script/gspylib/clib:$LD_LIBRARY_PATH</span><br><span class="line"><span class="meta">#</span><span class="bash">配置重新加载生效</span></span><br><span class="line">[root@openeuler172 ~]# source /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash">验证环境配置是否生效</span></span><br><span class="line">[root@openeuler172 ~]# echo $LD_LIBRARY_PATH</span><br><span class="line">/data/openGauss/script/gspylib/clib</span><br></pre></td></tr></table></figure>
<h2><span id="下载数据库安装包"><span id="inline-blue">下载数据库安装包</span></span></h2><p>将openGauss安装包上传至/data/openGauss<br>openGauss下载地址：<a href="https://opengauss.org/zh/download/">https://opengauss.org/zh/download/</a><br>下载页面，架构选择X86_64,系统选择openEuler release 20.03<br>架构和系统一定要和实际安装一致，否则安装过程会出现依赖缺失问题。</p>
<h2><span id="安装opengauss数据库"><span id="inline-blue">安装OpenGauss数据库</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建openGauss管理员用户组</span></span><br><span class="line">[root@openeuler172 ~]# groupadd dbgroup</span><br><span class="line"><span class="meta">#</span><span class="bash">创建openGauss管理员omm</span></span><br><span class="line">[root@openeuler172 ~]# useradd -g dbgroup omm</span><br><span class="line"><span class="meta">#</span><span class="bash">设置密码要求8位字符</span></span><br><span class="line">[root@openeuler172 ~]# passwd omm</span><br><span class="line"><span class="meta">#</span><span class="bash">创建openGauss安装路径/data/openGauss</span></span><br><span class="line">[root@openeuler172 ~]# mkdir -p /data/openGauss</span><br><span class="line">[root@openeuler172 ~]# cd /data/openGauss</span><br><span class="line"><span class="meta">#</span><span class="bash">将数据库安装包上传至/data/openGauss</span></span><br><span class="line"><span class="meta">#</span><span class="bash">解压压缩包</span></span><br><span class="line">[root@openeuler172 ~]#tar -zxvf openGauss-6.0.0-RC1-openEuler-64bit-all.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">再次解压</span></span><br><span class="line">[root@openeuler172 ~]#tar -zxvf openGauss-6.0.0-RC1-openEuler-64bit-om.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">创建openGauss集群配置文件clusterconfig.xml</span></span><br><span class="line">[root@openeuler172 ~]# vim clusterconfig.xml</span><br></pre></td></tr></table></figure>
<p>clusterconfig.xml文件内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;ROOT&gt;</span><br><span class="line"> &lt;!-- openGauss 整体信息 --&gt;</span><br><span class="line"> &lt;CLUSTER&gt;</span><br><span class="line"> &lt;!-- 数据库名称 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;clusterName&quot; value=&quot;dbCluster&quot; /&gt;</span><br><span class="line">  &lt;!-- 数据库节点名称(hostname) --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;nodeNames&quot; value=&quot;openeuler172&quot; /&gt;</span><br><span class="line"> &lt;!-- 节点IP,与数据库节点名称列表一一对应 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;backIp1s&quot; value=&quot;10.9.216.172&quot;/&gt;</span><br><span class="line"> &lt;!-- 数据库安装目录 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;gaussdbAppPath&quot; value=&quot;/data/openGauss/gaussdb/app&quot; /&gt;</span><br><span class="line"> &lt;!-- 数据库日志目录 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;gaussdbLogPath&quot; value=&quot;/var/log/gaussdb&quot; /&gt;</span><br><span class="line"> &lt;!-- 数据库工具目录 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;gaussdbToolPath&quot; value=&quot;/data/openGauss/wisequery&quot; /&gt;</span><br><span class="line"> &lt;!-- 数据库core文件目录 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;corePath&quot; value=&quot;/data/openGauss/corefile&quot;/&gt;</span><br><span class="line"> &lt;!-- 单机部署 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;clusterType&quot; value=&quot;single-inst&quot;/&gt;</span><br><span class="line"> &lt;/CLUSTER&gt;</span><br><span class="line"> &lt;!-- 每台服务器上的节点部署信息 --&gt;</span><br><span class="line"> &lt;DEVICELIST&gt;</span><br><span class="line"> &lt;!-- node1 上的节点部署信息 --&gt;</span><br><span class="line"> &lt;DEVICE sn=&quot;1000001&quot;&gt;</span><br><span class="line"> &lt;!-- 节点1的部署信息 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;name&quot; value=&quot;openeuler172&quot;/&gt;</span><br><span class="line"> &lt;!-- 节点1的所在的AZ及AZ优先级 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;azName&quot; value=&quot;AZ1&quot;/&gt;</span><br><span class="line"> &lt;PARAM name=&quot;azPriority&quot; value=&quot;1&quot;/&gt;</span><br><span class="line"> &lt;!-- 如果服务器只有一个网卡可用，将 backIP1 和 sshIP1 配置成同一个 IP --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;backIp1&quot; value=&quot;10.9.216.172&quot;/&gt;</span><br><span class="line"> &lt;PARAM name=&quot;sshIp1&quot; value=&quot;10.9.216.172&quot;/&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!--dbnode--&gt;</span><br><span class="line"> &lt;PARAM name=&quot;dataNum&quot; value=&quot;1&quot;/&gt;</span><br><span class="line"> &lt;!-- 服务端口 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;dataPortBase&quot; value=&quot;5432&quot;/&gt;</span><br><span class="line"> &lt;!-- 数据库实例目录 --&gt;</span><br><span class="line"> &lt;PARAM name=&quot;dataNode1&quot; value=&quot;/data/openGauss/gaussdb/data/db1&quot;/&gt;</span><br><span class="line"> &lt;/DEVICE&gt;</span><br><span class="line"> &lt;/DEVICELIST&gt;</span><br><span class="line">&lt;/ROOT&gt;</span><br></pre></td></tr></table></figure>
<p>hosts文件增加openGauss节点主机名</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[omm@openeuler172 bin]$ vim /etc/hosts</span><br><span class="line">10.9.216.172 db1 db1.opengauss.com</span><br></pre></td></tr></table></figure>

<p>解压后生成的文件目录内容如下，script目录存放进行安装的脚本工具</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@openeuler172 openGauss]# pwd</span><br><span class="line">/data/openGauss</span><br><span class="line">[root@openeuler172 openGauss]# ls</span><br><span class="line">clusterconfig.xml  openGauss-6.0.0-RC1-openEuler-64bit-all.tar.gz  openGauss-6.0.0-RC1-openEuler-64bit.sha256   upgrade_sql.tar.gz</span><br><span class="line">corefile           openGauss-6.0.0-RC1-openEuler-64bit-cm.sha256   openGauss-6.0.0-RC1-openEuler-64bit.tar.bz2  version.cfg</span><br><span class="line">gaussdb            openGauss-6.0.0-RC1-openEuler-64bit-cm.tar.gz   openGauss-Package-bak_ed7f8e37.tar.gz        wisequery</span><br><span class="line">lib                openGauss-6.0.0-RC1-openEuler-64bit-om.sha256   script</span><br><span class="line">libcgroup          openGauss-6.0.0-RC1-openEuler-64bit-om.tar.gz   upgrade_sql.sha256</span><br></pre></td></tr></table></figure>
<p>执行预安装命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入script目录</span></span><br><span class="line">[root@openeuler172 openGauss]# cd /data/openGauss/script/</span><br><span class="line">[root@openeuler172 openGauss]# ./python_gs_preinstall -U omm -G dbgroup -X /data/openGauss/clusterconfig.xml</span><br></pre></td></tr></table></figure>

<p>执行初始化数据库命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@openeuler172 openGauss]# cd /data/openGauss/script/ </span><br><span class="line">[root@openeuler172 openGauss]# ./gs_install -X /data/openGauss/clusterconfig.xml --gsinit-parameter=&quot;--encoding=UTF8&quot; --dn-guc=&quot;max_process_memory=8GB&quot; --dn-guc=&quot;shared_buffers=512MB&quot; --dn-guc=&quot;bulk_write_ring_size=128MB&quot; --dn-guc=&quot;cstore_buffers=64MB&quot;</span><br></pre></td></tr></table></figure>
<p>执行过程中会提示设置omm管理用户的密码，设置完成后记住就行。</p>
<h2><span id="数据库基本操作"><span id="inline-blue">数据库基本操作</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将openGauss数据库安装目录的所属群组赋予omm:dbgroup，并给与相应读写、执行权限</span></span><br><span class="line">[root@openeuler172 openGauss]# cd /data/openGauss/script/</span><br><span class="line">[root@openeuler172 openGauss]# chown -R omm:dbgroup /data/openGauss</span><br><span class="line">[root@openeuler172 openGauss]# chmod  755 -R /data/openGauss</span><br><span class="line"><span class="meta">#</span><span class="bash">登陆数据库</span></span><br><span class="line">[root@openeuler172 openGauss]# su - omm</span><br><span class="line"><span class="meta">#</span><span class="bash">切换到脚本目录</span></span><br><span class="line">[omm@openeuler172 script]$ cd /data/openGauss/script/ </span><br><span class="line"><span class="meta">#</span><span class="bash">启动openGauss</span></span><br><span class="line">[omm@openeuler172 script]$ ./gs_om -t start</span><br><span class="line"><span class="meta">#</span><span class="bash">停止openGauss</span></span><br><span class="line">[omm@openeuler172 script]$ ./gs_om -t stop</span><br><span class="line"><span class="meta">#</span><span class="bash">重启openGauss</span></span><br><span class="line">[omm@openeuler172 script]$ ./gs_om -t restart</span><br><span class="line"><span class="meta">#</span><span class="bash">使用omm管理员用户登录</span></span><br><span class="line">[omm@openeuler172 script]$ gsql -p 5432 -U omm -W test@123 -r</span><br><span class="line"><span class="meta">#</span><span class="bash">更改管理员用户密码</span></span><br><span class="line">openGauss=&gt; alter role omm identified by &#x27;admin@123&#x27; replace &#x27;test@123&#x27;;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建数据库用户</span></span><br><span class="line">openGauss=&gt; create user admin with password &quot;admin@123&quot;;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建数据库</span></span><br><span class="line">openGauss=&gt; create database test owner admin;</span><br><span class="line"><span class="meta">#</span><span class="bash">退出数据库</span></span><br><span class="line">openGauss=&gt; \q</span><br><span class="line"><span class="meta">#</span><span class="bash">使用admin账号登陆数据库</span></span><br><span class="line">openGauss=&gt; gsql -d test -p 5432 -U admin -W admin@123 -r;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建schema</span></span><br><span class="line">openGauss=&gt; create schema admin authorization admin;</span><br><span class="line"><span class="meta">#</span><span class="bash">创建表mytable</span></span><br><span class="line">openGauss=&gt; create table mytable(firstcol int);</span><br><span class="line"><span class="meta">#</span><span class="bash">插入表数据</span></span><br><span class="line">openGauss=&gt; insert into mytable values(100);</span><br><span class="line"><span class="meta">#</span><span class="bash">查询mytable表数据</span></span><br><span class="line">openGauss=&gt; select * from  mytable;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看对象</span></span><br><span class="line">openGauss=# \l #查看数据库</span><br><span class="line">openGauss=# \c test #查看数据库</span><br><span class="line">openGauss=# \dt #查看数据库所有表名</span><br><span class="line">openGauss=# \d mytable #查看表结构</span><br><span class="line">openGauss=# \d+ mytable #查看表结构</span><br></pre></td></tr></table></figure>
<p>参考官方文档：<a id="download" href="/images/OpenGauss/openEuler-openGauss.pdf"><i class="fa fa-download"></i><span>官方文档</span> </a></p>
]]></content>
      <categories>
        <category>OpenGauss</category>
      </categories>
      <tags>
        <tag>OpenEuler</tag>
        <tag>OpenGauss</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 实现网络共享NFS</title>
    <url>/Linux/blogs/Linux%20%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%BB%9C%E5%85%B1%E4%BA%ABNFS/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96nfs-utis-rpcbindspan"><span id="inline-blue">安装依赖nfs-utis、rpcbind</span></a></li>
<li><a href="#span-idinline-blue%E5%90%AF%E5%8A%A8nfsrpcbindspan"><span id="inline-blue">启动NFS/rpcbind</span></a></li>
<li><a href="#span-idinline-blue%E6%8C%82%E8%BD%BD%E5%91%BD%E4%BB%A4span"><span id="inline-blue">挂载命令</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93span"><span id="inline-blue">问题总结</span></a><ul>
<li><a href="#span-idinline-bluemount-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B%E9%94%99%E8%AF%AF-%E9%80%89%E9%A1%B9%E9%94%99%E8%AF%AF-%E7%BC%BA%E5%B0%91%E4%BB%A3%E7%A0%81%E9%A1%B5%E6%88%96%E5%8A%A9%E6%89%8B%E7%A8%8B%E5%BA%8F%E6%88%96%E5%85%B6%E4%BB%96%E9%94%99%E8%AF%AFspan"><span id="inline-blue">mount: 文件系统类型错误、选项错误、缺少代码页或助手程序，或其他错误</span></a></li>
<li><a href="#span-idinline-blue%E6%89%BE%E4%B8%8D%E5%88%B0portmap%E4%BE%9D%E8%B5%96span"><span id="inline-blue">找不到portmap依赖</span></a></li>
<li><a href="#span-idinline-blue%E6%8C%82%E8%BD%BD%E4%B9%8B%E5%90%8E%E5%8F%91%E7%8E%B0%E6%B2%A1%E6%9C%89%E5%86%99%E5%85%A5%E6%9D%83%E9%99%90span"><span id="inline-blue">挂载之后发现没有写入权限</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>centos:7.9</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目部署Linux服务器发现磁盘空间不足，采用网络挂载的方式扩容存储。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>挂载服务器：10.9.216.170<br>挂载客户端：10.9.216.12</p>
<p>NFS：<br>网络文件系统(NFS)允许远程主机通过网络挂载文件系统，并像它们是本地挂载的文件系统一样与它们进行交互。这使系统管理员能够将资源整合到网络上的集中式服务器上</p>
<h2><span id="安装依赖nfs-utis-rpcbind"><span id="inline-blue">安装依赖nfs-utis、rpcbind</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install nfs-utils.x86_64</span><br><span class="line">yum install rpcbind.x86_64</span><br></pre></td></tr></table></figure>

<h2><span id="启动nfsrpcbind"><span id="inline-blue">启动NFS/rpcbind</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start rpcbind.service</span><br><span class="line">systemctl start nfs.service</span><br></pre></td></tr></table></figure>

<h2><span id="挂载命令"><span id="inline-blue">挂载命令</span></span></h2><p>挂载服务器：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/fctab</span><br><span class="line">/home 10.9.216*(rw,no_root_squash,sync)</span><br></pre></td></tr></table></figure>
<p>ro: 只读<br>rw: 读写<br>root_squash: NFS客户端以root用户访问，映射为匿名用户<br>no_root_squash: NFS客户端以root用户访问，映射为服务端管理员账号<br>all_squash: 无论NFS客户端以什么账号访问，均映射为NFS服务端匿名用户<br>sync: 同步写入，直接写入磁盘<br>async: 异步写入，先写内存在写磁盘，可能导致数据丢失</p>
<p>挂载客户端：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建挂载点</span></span><br><span class="line">mkdir /mount_home</span><br><span class="line"><span class="meta">#</span><span class="bash">挂载</span></span><br><span class="line">sudo mount -t nfs -o rw,atime -l 10.9.216.170:/home /mount_home</span><br></pre></td></tr></table></figure>
<h2><span id="问题总结"><span id="inline-blue">问题总结</span></span></h2><h3><span id="mount-文件系统类型错误-选项错误-缺少代码页或助手程序或其他错误"><span id="inline-blue">mount: 文件系统类型错误、选项错误、缺少代码页或助手程序，或其他错误</span></span></h3><p>挂载客户端未安装启动NFS服务</p>
<h3><span id="找不到portmap依赖"><span id="inline-blue">找不到portmap依赖</span></span></h3><p>安装NFS过程中参考文档一直提示需要安装portmap依赖，其实该依赖自从CentOS 6版本系统之后已被rpcbind依赖替代，并且默认已经安装启动</p>
<h3><span id="挂载之后发现没有写入权限"><span id="inline-blue">挂载之后发现没有写入权限</span></span></h3><p>执行挂载命令需要加上sudo,提升用户权限</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 子类的toString方法如何打印父类的属性</title>
    <url>/Java/blogs/Java%20%E5%AD%90%E7%B1%BB%E7%9A%84toString%E6%96%B9%E6%B3%95%E5%A6%82%E4%BD%95%E6%89%93%E5%8D%B0%E7%88%B6%E7%B1%BB%E7%9A%84%E5%B1%9E%E6%80%A7/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>Java项目新增javabean集成父类之后，在idea工具自动生成的toString()方法不能打印父类属性</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>子类添加@ToString(callSuper = true)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString(callSuper = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModelRuleVo</span>  </span>&#123;</span><br><span class="line"></span><br><span class="line">    Integer id;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Lombok</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows Nginx代理Hexo静态文件部署访问</title>
    <url>/Hexo/blogs/Windows%20Nginx%E4%BB%A3%E7%90%86Hexo%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2%E8%AE%BF%E9%97%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-bluehexo%E9%83%A8%E7%BD%B2%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5nginxspan"><span id="inline-blue">hexo部署自动同步nginx</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>hexo打包启动之后本地访问特别慢，通过nginx代理静态文件优化访问速度</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>Hexo所在根目录执行Hexo deploy命令之后在public目录生成静态文件，将其拷贝至nginx主目录<br>Hexo静态文件生成目录图<br><img src="/images/hexo/nginx/hexo_nginx_20240709_001.png" alt="Hexo优化"></p>
<p>静态文件所在nginx目录结构图<br><img src="/images/hexo/nginx/hexo_nginx_20240709_002.png" alt="Hexo优化"></p>
<p>nginx新增配置如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       8888;</span><br><span class="line">        server_name  10.9.212.55;</span><br><span class="line"></span><br><span class="line">        charset utf-8;</span><br><span class="line"></span><br><span class="line">        access_log  logs/host.access.log ;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">			charset utf-8;</span><br><span class="line">			autoindex on;</span><br><span class="line">            alias  blog/;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1><span id="hexo部署自动同步nginx"><span id="inline-blue">hexo部署自动同步nginx</span></span></h1><p>hexo内容变动之后nginx对应静态资源同步更新，利用hexo deploy事件完成自动备份hexo的基础上实现，hexo根目录增加scripts/auto_backup.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;shelljs/global&#x27;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	hexo.on(&#x27;generateAfter&#x27;, function() &#123;//当generate完成后拷贝静态文件到nginx主目录</span></span><br><span class="line"><span class="comment">        copy();</span></span><br><span class="line"><span class="comment">    &#125;);</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    hexo.on(<span class="string">&#x27;deployAfter&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">//当deploy完成后执行备份</span></span><br><span class="line">        run();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;产生了一个错误啊&lt;(￣3￣)&gt; !，错误详情为：&quot;</span> + e.toString());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	echo(<span class="string">&quot;====================== Copy resources to nginx start ===========================&quot;</span>);</span><br><span class="line">	cp(<span class="string">&#x27;-R&#x27;</span>, <span class="string">&#x27;H:/hexo/public/*&#x27;</span>, <span class="string">&#x27;D:/nginx-1.16.1/nginx-1.16.1/blog&#x27;</span>);</span><br><span class="line">	echo(<span class="string">&quot;====================== Copy resources to nginx end ===========================&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	</span><br><span class="line">	copy();</span><br><span class="line">    <span class="keyword">if</span> (!which(<span class="string">&#x27;git&#x27;</span>)) &#123;</span><br><span class="line">        echo(<span class="string">&#x27;Sorry, this script requires git&#x27;</span>);</span><br><span class="line">        exit(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        echo(<span class="string">&quot;======================Auto Backup Begin===========================&quot;</span>);</span><br><span class="line">        cd(<span class="string">&#x27;H:/hexo&#x27;</span>);    <span class="comment">//此处修改为Hexo根目录路径</span></span><br><span class="line">        <span class="keyword">if</span> (exec(<span class="string">&#x27;git add .&#x27;</span>).code !== <span class="number">0</span>) &#123;</span><br><span class="line">            echo(<span class="string">&#x27;Error: Git add failed&#x27;</span>);</span><br><span class="line">            exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (exec(<span class="string">&#x27;git commit -am &quot;blog auto backup script\&#x27;s commit&quot;&#x27;</span>).code !== <span class="number">0</span>) &#123;</span><br><span class="line">            echo(<span class="string">&#x27;Error: Git commit failed&#x27;</span>);</span><br><span class="line">            exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (exec(<span class="string">&#x27;git push origin --force --all&#x27;</span>).code !== <span class="number">0</span>) &#123;</span><br><span class="line">            echo(<span class="string">&#x27;Error: Git push failed&#x27;</span>);</span><br><span class="line">            exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        echo(<span class="string">&quot;==================Auto Backup Complete============================&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>Hexo</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Hibernate xxx is not mapped 错误原因及解决方法</title>
    <url>/Hibernate/blogs/Hibernate%20xxx%20is%20not%20mapped%20%E9%94%99%E8%AF%AF%E5%8E%9F%E5%9B%A0%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>SpringMVC项目改造为maven项目之后打包部署启动一直报错Hibernate xxx is not mapped</p>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>错误提示信息应该是hql语句中查询语句使用的表名称和实体类不一致导致，检查之后发现不是这个原因，问题的原因是src/main/java目录中包含hibernate配置文件，打包的时候没有被包含进去。</p>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>pom.xml文件build节点中添加如下内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/*.java<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Hibernate</category>
      </categories>
      <tags>
        <tag>Hibernate</tag>
      </tags>
  </entry>
  <entry>
    <title>应用程序兼容DM8数据库</title>
    <url>/DM8/blogs/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%85%BC%E5%AE%B9DM8%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0dm8%E4%BE%9D%E8%B5%96span"><span id="inline-blue">添加DM8依赖</span></a></li>
<li><a href="#span-idinline-blue%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%A9%B1%E5%8A%A8%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">数据库连接驱动设置</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>ORACLE数据库迁移DM8，应用程序需要做出相应的兼容设置</p>
<h1><span id="添加dm8依赖"><span id="inline-blue">添加DM8依赖</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.dameng&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;DmJdbcDriver18&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;8.1.3.140&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h1><span id="数据库连接驱动设置"><span id="inline-blue">数据库连接驱动设置</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;property name=&quot;driverClassName&quot; value=&quot;dm.jdbc.driver.DmDriver&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;url&quot; value=&quot;jdbc:dm://10.9.216.12:5236&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;username&quot; value=&quot;SDP_CMS_HRB&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;password&quot; value=&quot;SDP_CMS_HRB&quot;&gt;&lt;/property&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>DM8</category>
      </categories>
      <tags>
        <tag>DM8</tag>
      </tags>
  </entry>
  <entry>
    <title>达梦数据库命令行模式下创建用户和表空间</title>
    <url>/DM8/blogs/%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%92%8C%E8%A1%A8%E7%A9%BA%E9%97%B4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%A9%BA%E9%97%B4span"><span id="inline-blue">创建表空间</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%94%A8%E6%88%B7span"><span id="inline-blue">创建数据库用户</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>ORACLE数据库迁移DM8，迁移之后发现不指定模式的情况下无法直接查询数据库对应的表</p>
<h1><span id="创建表空间"><span id="inline-blue">创建表空间</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">切换到DM8数据库工具目录，调用命令行交互工具</span></span><br><span class="line">[dmdba@S21612 tool]$ cd /data/dm/dmdbms/tool</span><br><span class="line">[dmdba@S21612 tool]$ ./disql</span><br><span class="line">/**  创建表空间 */</span><br><span class="line"> create tablespace  SDP_CMS_HRB_DATA datafile &#x27;/data/dm/dmdbms/SDP_CMS_HRB/SDP_CMS_HRB01.DBF&#x27; size 500 autoextend on next 20 maxsize 10240 CACHE = NORMAL;</span><br><span class="line"></span><br><span class="line">/**  扩展指定的表空间 */</span><br><span class="line">alter tablespace  SDP_CMS_HRB_DATA add  datafile  &#x27;/data/dm/dmdbms/SDP_CMS_HRB/SDP_CMS_HRB02.DBF&#x27; size 1024 autoextend on ;</span><br></pre></td></tr></table></figure>
<h1><span id="创建数据库用户"><span id="inline-blue">创建数据库用户</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/**   创建用户  */</span><br><span class="line"> create user SDP_CMS_HRB identified by &quot;SDP_CMS_HRB&quot; default tablespace SDP_CMS_HRB_DATA  default index tablespace SDP_CMS_HRB_DATA;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**  授权 */</span><br><span class="line">grant DBA  to SDP_CMS_HRB;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>DM8</category>
      </categories>
      <tags>
        <tag>DM8</tag>
      </tags>
  </entry>
  <entry>
    <title>DM8安装部署记录</title>
    <url>/DM8/blogs/DM8%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85span"><span id="inline-blue">安装</span></a><ul>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BD%E8%BE%BE%E6%A2%A68%E5%AE%89%E8%A3%85%E5%8C%85span"><span id="inline-blue">下载达梦8安装包</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85span-1"><span id="inline-blue">安装</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98span"><span id="inline-blue">安装过程中遇到的问题</span></a><ul>
<li><a href="#span-idinline-bluedminstallbin%E5%AE%89%E8%A3%85%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5span"><span id="inline-blue">DMInstall.bin安装启动失败</span></a></li>
<li><a href="#span-idinline-bluered-hat-79%E5%AE%89%E8%A3%85%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93dm8%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%98%BE%E7%A4%BA%E8%8B%B1%E6%96%87%E5%92%8C%E4%B9%B1%E7%A0%81span"><span id="inline-blue">Red Hat 7.9安装达梦数据库DM8图形化显示英文和乱码</span></a></li>
<li><a href="#span-idinline-blue-could-not-load-swt-library-reasonsspan"><span id="inline-blue"> Could not load SWT library. Reasons</span></a></li>
<li><a href="#span-idinline-bluexhost-command-not-foundspan"><span id="inline-blue">xhost: command not found</span></a></li>
<li>[<span id="inline-blue">No more handles <a href="#span-idinline-blueno-more-handles-gtk_init_check-failedspan">gtk_init_check() failed</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>ORACLE数据库基于安全考虑迁移至达梦数据库，采用达梦8</p>
<h1><span id="安装"><span id="inline-blue">安装</span></span></h1><h2><span id="下载达梦8安装包"><span id="inline-blue">下载达梦8安装包</span></span></h2><p>下载地址:<br><a href="https://download.dameng.com/eco/adapter/DM8/202405/dm8_20240408_x86_rh7_64_ent_8.1.3.140.zip">https://download.dameng.com/eco/adapter/DM8/202405/dm8_20240408_x86_rh7_64_ent_8.1.3.140.zip</a><br>下载之后本地解压dm8_20240408_x86_rh7_64_ent_8.1.3.140.zip文件得到文件内容如下：<br><img src="/images/DM8/DM8_20240708_001.png" alt="DM8"><br>dm8_20240408_x86_rh7_64.iso直接上传服务器挂载发现执行挂载命令报错<br><img src="/images/DM8/DM8_20240708_002.png" alt="DM8"><br>通过第三方工具DAEMON Tools Lite加载镜像iso文件，将镜像内部文件拷贝出来，再上传服务器。<br>DAEMON Tools Lite下载地址: <a href="https://www.xitongzhijia.net/soft/215783.html">https://www.xitongzhijia.net/soft/215783.html</a><br>下载完成后通过快速装载加载DM8镜像iso文件<br><img src="/images/DM8/DM8_20240708_003.png" alt="DM8"><br>镜像加载后在电脑本地文件出现如下标识，双击进去之后可以看到DMInstall.bin就是需要上传的安装文件<br><img src="/images/DM8/DM8_20240708_004.png" alt="DM8"><br><img src="/images/DM8/DM8_20240708_005.png" alt="DM8"></p>
<h2><span id="安装"><span id="inline-blue">安装</span></span></h2><p>参考官方安装文档地址：<a href="https://eco.dameng.com/document/dm/zh-cn/start/install-dm-linux-prepare.html">https://eco.dameng.com/document/dm/zh-cn/start/install-dm-linux-prepare.html</a></p>
<h2><span id="安装过程中遇到的问题"><span id="inline-blue">安装过程中遇到的问题</span></span></h2><h3><span id="dminstallbin安装启动失败"><span id="inline-blue">DMInstall.bin安装启动失败</span></span></h3><p>描述：DmServiceDMSERVER start命令之后后没有启动成功<br>原因：没有使用dmdba用户初始化实例<br>解决方案：重新使用dmdba用户初始化数据库实例</p>
<h3><span id="red-hat-79安装达梦数据库dm8图形化显示英文和乱码"><span id="inline-blue">Red Hat 7.9安装达梦数据库DM8图形化显示英文和乱码</span></span></h3><p>描述：DM8图形化显示英文和乱码<br>原因：系统缺失相应的字体依赖<br>解决方案：安装字体库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21612 dm]#export LANG=zh_CN.UTF8</span><br><span class="line">[root@S21612 dm]#yum groupinstall Fonts</span><br></pre></td></tr></table></figure>


<h3><span id="could-not-load-swt-library-reasons"><span id="inline-blue"> Could not load SWT library. Reasons</span></span></h3><p>描述：./DMInstall.bin -i 执行报错，java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons:     no swt-pi-gtk-3659<br>原因：缺失gtk依赖<br>解决方案：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21612 dm]# yum search gtk</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">======================================================================= N/S matched: gtk ========================================================================</span><br><span class="line">adwaita-gtk2-theme.x86_64 : Adwaita gtk2 theme</span><br><span class="line">avahi-ui-gtk3.x86_64 : Gtk user interface library for Avahi (Gtk+ 3 version)</span><br><span class="line">clutter-gtk.x86_64 : A basic GTK clutter widget</span><br><span class="line">colord-gtk.x86_64 : GTK support library for colord</span><br><span class="line">gstreamer1-plugins-bad-free-gtk.x86_64 : GStreamer &quot;bad&quot; plugins gtk plugin</span><br><span class="line">gtk-vnc2.x86_64 : A GTK3 widget for VNC clients</span><br><span class="line">gtk2.x86_64 : The GIMP ToolKit (GTK+), a library for creating GUIs for X</span><br><span class="line">gtk2-devel.x86_64 : Development files for GTK+</span><br><span class="line">gtk2-devel-docs.x86_64 : Developer documentation for GTK+</span><br><span class="line">gtk2-immodule-xim.x86_64 : XIM support for GTK+</span><br><span class="line">gtk3.x86_64 : GTK+ graphical user interface library</span><br><span class="line">gtk3-devel.x86_64 : Development files for GTK+</span><br><span class="line">gtk3-immodule-xim.x86_64 : XIM support for GTK+</span><br><span class="line">gtkhtml3.x86_64 : GtkHTML library</span><br><span class="line">gtkmm24.x86_64 : C++ interface for GTK2 (a GUI library for X)</span><br><span class="line">gtkmm30.x86_64 : C++ interface for the GTK+ library</span><br><span class="line">gtkspell.x86_64 : On-the-fly spell checking for GtkTextView widgets</span><br><span class="line">gtkspell3.x86_64 : On-the-fly spell checking for GtkTextView widgets</span><br><span class="line">ibus-gtk2.x86_64 : IBus IM module for GTK2</span><br><span class="line">ibus-gtk3.x86_64 : IBus IM module for GTK3</span><br><span class="line">kcm-gtk.x86_64 : Configure the appearance of GTK apps in KDE</span><br><span class="line">libcanberra-gtk2.x86_64 : Gtk+ 2.x Bindings for libcanberra</span><br><span class="line">libcanberra-gtk3.x86_64 : Gtk+ 3.x Bindings for libcanberra</span><br><span class="line">libchamplain-gtk.x86_64 : Gtk+ widget wrapper for libchamplain</span><br><span class="line">libpeas-gtk.x86_64 : GTK+ plug-ins support for libpeas</span><br><span class="line">libreoffice-gtk2.x86_64 : LibreOffice GTK+ 2 integration plug-in</span><br><span class="line">libreoffice-gtk3.x86_64 : LibreOffice GTK+ 3 integration plug-in</span><br><span class="line">libreport-gtk.x86_64 : GTK front-end for libreport</span><br><span class="line">oxygen-gtk.noarch : Oxygen GTK theme</span><br><span class="line">oxygen-gtk2.x86_64 : Oxygen GTK+2 theme</span><br><span class="line">pinentry-gtk.x86_64 : Passphrase/PIN entry dialog based on GTK+</span><br><span class="line">pygtk2.x86_64 : Python bindings for GTK+</span><br><span class="line">pygtk2-libglade.x86_64 : A wrapper for the libglade library for use with PyGTK</span><br><span class="line">spice-gtk3.x86_64 : A GTK3 widget for SPICE clients</span><br><span class="line">webkitgtk3.x86_64 : GTK+ Web content engine library</span><br><span class="line">webkitgtk4.x86_64 : GTK+ Web content engine library</span><br><span class="line">webkitgtk4-devel.x86_64 : Development files for webkitgtk4</span><br><span class="line">webkitgtk4-jsc.x86_64 : JavaScript engine from webkitgtk4</span><br><span class="line">webkitgtk4-jsc-devel.x86_64 : Development files for JavaScript engine from webkitgtk4</span><br><span class="line">webkitgtk4-plugin-process-gtk2.x86_64 : GTK+ 2 based NPAPI plugins support for webkitgtk4</span><br><span class="line">xdg-desktop-portal-gtk.x86_64 : Backend implementation for xdg-desktop-portal using GTK+</span><br><span class="line">PackageKit-gtk3-module.x86_64 : Install fonts automatically using PackageKit</span><br><span class="line">anaconda-widgets.x86_64 : A set of custom GTK+ widgets for use with anaconda</span><br><span class="line">at-spi2-atk.x86_64 : A GTK+ module that bridges ATK to D-Bus at-spi</span><br><span class="line">at-spi2-atk-devel.x86_64 : A GTK+ module that bridges ATK to D-Bus at-spi</span><br><span class="line">authconfig-gtk.x86_64 : Graphical tool for setting up authentication from network services</span><br><span class="line">gnome-bluetooth-libs.x86_64 : GTK+ Bluetooth device selection widgets</span><br><span class="line">gnome-settings-daemon.x86_64 : The daemon sharing settings from GNOME to GTK+/KDE applications</span><br><span class="line">gspell.x86_64 : Spell-checking library for GTK+</span><br><span class="line">gtk-update-icon-cache.x86_64 : Icon theme caching utility</span><br><span class="line">gtksourceview3.x86_64 : A library for viewing source files</span><br><span class="line">libnm-gtk.x86_64 : Private libraries for NetworkManager GUI support</span><br><span class="line">libsexy.x86_64 : Funky fresh graphical widgets for GTK+ 2</span><br><span class="line">libtimezonemap.x86_64 : Time zone map widget for Gtk+</span><br><span class="line">pidgin.x86_64 : A Gtk+ based multiprotocol instant messaging client</span><br><span class="line">usermode-gtk.x86_64 : Graphical tools for certain user account management tasks</span><br><span class="line">xdg-user-dirs-gtk.x86_64 : Gnome integration of special directories</span><br><span class="line"></span><br><span class="line">  Name and summary matches only, use &quot;search all&quot; for everything.</span><br><span class="line">[root@S21612 dm]# </span><br><span class="line"><span class="meta">#</span><span class="bash">安装gtk2.x86_64、gtk2.x86_64即可</span></span><br><span class="line">[root@S21612 dm]# yum install gtk2.x86_64</span><br><span class="line">[root@S21612 dm]# yum install gtk2.x86_64</span><br></pre></td></tr></table></figure>

<h3><span id="xhost-command-not-found"><span id="inline-blue">xhost: command not found</span></span></h3><p>描述：-bash: xhost: command not found<br>原因：缺失xorg-x11-server-utils对应依赖<br>解决方案：yum安装xorg-x11-server-utils依赖</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查找对应的依赖所在包位置</span></span><br><span class="line">[root@S21612 bin]# yum whatprovides &quot;*/xhost&quot;</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">xorg-x11-server-utils-7.7-20.el7.x86_64 : X.Org X11 X server utilities</span><br><span class="line">Repo        : media</span><br><span class="line">Matched from:</span><br><span class="line">Filename    : /usr/bin/xhost</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xorg-x11-server-utils-7.7-20.el7.x86_64 : X.Org X11 X server utilities</span><br><span class="line">Repo        : @media</span><br><span class="line">Matched from:</span><br><span class="line">Filename    : /usr/bin/xhost</span><br><span class="line"><span class="meta">#</span><span class="bash">安装</span></span><br><span class="line">[root@S21612 bin]#yum install -y xorg-x11-server-utils-7.7-20.el7.x86_64</span><br></pre></td></tr></table></figure>
<h3><span id="no-more-handles-gtk_init_check-failed"><span id="inline-blue">No more handles [gtk_init_check() failed</span></span></h3><p>描述：No more handles [gtk_init_check()] failed<br>原因：当前操作系统的登录用户应该为非dmdba 用户，如果在当前会话中启用图形界面需<br>要将图形界面权限放开<br>解决方案：切换到root 用户后在命令行中输入xhost +，可以使得dmdba 可以调用图形界面进行安装。<br>需要在root用户权限下执行如下命令，然后切换到dmdba用户执行：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21612 dm]export DISPLAY=10.9.212.55:0.0</span><br><span class="line">[root@S21612 dm]echo $DISPLAY</span><br><span class="line">[root@S21612 dm]xhost +</span><br></pre></td></tr></table></figure>
<p>DISPLAY环境变量含义：该方法为本地调用图形化界面，如果希望通过其它机器调用该图形化界面需设置 export DISPLAY=调用图形化机器的IP:0.0，例如，数据库安装机器 IP 为 10.10.12.25，需要在 IP 为 192.132.32.12 的机器上调用图形化界面，需要设置 export DISPLAY=192.132.32.12:0.0<br>出现这个问题的场景大多都是在Linux安装DM8之后需要使用达梦数据库管理工具和迁移工具，xhost +命令执行的过程中xmanager-broadcast需要一直开启否则可视化界面没有办法在本地显示</p>
<p>启动方式：<br><img src="/images/DM8/DM8_20240708_006.png" alt="DM8"></p>
]]></content>
      <categories>
        <category>DM8</category>
      </categories>
      <tags>
        <tag>DM8</tag>
      </tags>
  </entry>
  <entry>
    <title>解决SpringCloud-Gateway请求favicon.ico出现404</title>
    <url>/SpringCloud/blogs/%E8%A7%A3%E5%86%B3SpringCloud-Gateway%E8%AF%B7%E6%B1%82favicon.ico%E5%87%BA%E7%8E%B0404/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务网关模块集成knife4j-gateway,访问/doc.html发现浏览器请求/favicon.ico报错，提示404</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>knife4j-gateway子依赖knife4j-springdoc-ui默认提供了favicon.ico等静态文件，拷贝一份通过<a href="https://www.bitbug.net/">https://www.bitbug.net</a> ,网址制作一份网站图标并将其放在网关模块/src/main/resources/static/路径下并重名为favicon.ico<br>knife4j-springdoc-uijar包解压后favicon.ico文件路径如下所示：<br><img src="/images/Knife4j/Knife4j_20240621_001.png" alt="Knife4j"><br>favicon.ico文件如果想要自定义存放的位置需要在网关自定义favicon.ico访问地址，因为SpringCloud微服务的静态文件的默认访问路径在/src/main/resources/static/<br>网关模块favicon.ico存放地址如下图所示：<br><img src="/images/Knife4j/Knife4j_20240621_002.png" alt="Knife4j"></p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Knife4j/Knife4j_20240621_003.png" alt="Knife4j"></p>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>knife4j-gateway</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud+Nacos实现logback-spring.xml动态加载</title>
    <url>/SpringCloud/blogs/SpringCloud+Nacos%E5%AE%9E%E7%8E%B0logback-spring.xml%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>SpringCloud微服务模块日志框架采用logback-spring.xml控制，模块配置文件由nacos配置中心下发，集成完成后发现修改logback-spring.xml文件日志级别无法生效，必须手动重启服务</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>模块启动配置文件bootstrap.properties通过nacos指定扩展文件加载logback-spring.xml，application-{spring.profiles.active}.properties指定日志配置参数logging.config<br>bootstarp.properties内容如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.cloud.nacos.discovery.username</span>=<span class="string">$&#123;nacos-username&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.password</span>=<span class="string">$&#123;nacos-password&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.file-extension</span>=<span class="string">properties</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.refresh-enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.prefix</span>=<span class="string">ffcs-gateway</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.group</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="comment">#扩展文件logback的id</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[1].data-id</span>=<span class="string">logback-spring.xml</span></span><br><span class="line"><span class="comment">#扩展文件所在的组，默认为DEFAULT_GROUP</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[1].group</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#是否实时刷新</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[1].refresh</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>application-{spring.profiles.active}.properties内容相关配置如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">logging.config</span>=<span class="string">http://$&#123;spring.cloud.nacos.config.server-addr&#125;/nacos/v1/cs/configs?group=DEFAULT_GROUP&amp;tenant=$&#123;spring.cloud.nacos.config.namespace&#125;&amp;username=$&#123;spring.cloud.nacos.discovery.username&#125;&amp;password=$&#123;spring.cloud.nacos.discovery.password&#125;&amp;dataId=logback-spring.xml </span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>Nacos</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 系统定时关机命令</title>
    <url>/Linux/blogs/Linux%20%E7%B3%BB%E7%BB%9F%E5%AE%9A%E6%97%B6%E5%85%B3%E6%9C%BA%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><pre><code>Linux服务器空闲时间点自动关机</code></pre>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>添加系统定时任务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/crontab</span><br><span class="line"><span class="meta">#</span><span class="bash"> Example of job definition:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  |  |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> *  *  *  *  * user-name  <span class="built_in">command</span> to be executed</span></span><br><span class="line"><span class="meta">#</span><span class="bash">每天18:20自动关机</span></span><br><span class="line">20 18 * * * root /sbin/init 0 &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">每天23:15自动关机</span><br><span class="line">15 23 * * * root /sbin/shutdown -h now</span><br><span class="line"><span class="meta">#</span><span class="bash">周一至周五 每天23:15自动关机</span></span><br><span class="line">15 23 * * 1-5 root /sbin/shutdown -h now</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Zipkin集成Zipkin-dependencies实现调用链依赖图UI</title>
    <url>/SpringCloud/blogs/Zipkin%E9%9B%86%E6%88%90Zipkin-dependencies%E5%AE%9E%E7%8E%B0%E8%B0%83%E7%94%A8%E9%93%BE%E4%BE%9D%E8%B5%96%E5%9B%BEUI/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Java: 1.8<br>SpringBoot: 2.2.6.Release<br>SpringCloud: 2021.0.5<br>Sleuth: 2.2.8.RELEASE<br>Zipkin：2.2.8.RELEASE</p>
<h3><span id="背景"><span id="inline-blue">背景</span></span></h3><p>SpringCloud集成Zipkin-server，持久化存储采用Elasticsearch之后，发现模块调用链依赖图没有数据展示，原因是需要单独部署zipkin-dependencies工具<br><img src="/images/Zipkin-dependencies/Zipkin-dependencies_20240614_001.png" alt="Zipkin-dependencies调用依赖"></p>
<h3><span id="zipkin-dependencies部署"><span id="inline-blue">Zipkin-dependencies部署</span></span></h3><p>github地址：<a href="https://github.com/openzipkin/zipkin-dependencies">https://github.com/openzipkin/zipkin-dependencies</a><br>Zipkin-dependencies-3.0.0版本启动需要JDK11支持.</p>
<p>start_elasticsearch.sh脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">pid=$(ps -ef | grep zipkin-dependencies-3.0.0.jar | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">kill -9 $pid</span><br><span class="line">STORAGE_TYPE=elasticsearch ES_HOSTS=http://10.9.216.12:9200 nohup /usr/local/java/jdk-11.0.18/bin/java  -jar zipkin-dependencies-3.0.0.jar &gt;&gt; ./info.log 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3><span id="依赖分析验证"><span id="inline-blue">依赖分析验证</span></span></h3><p><img src="/images/Zipkin-dependencies/Zipkin-dependencies_20240614_002.png" alt="Zipkin-dependencies依赖分析"></p>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Zipkin</tag>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>Sleuth</tag>
        <tag>Zipkin-dependencies</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud微服务集成Sleuth+Zipkin实现链路追踪</title>
    <url>/SpringCloud/blogs/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E6%88%90Sleuth+Zipkin%E5%AE%9E%E7%8E%B0%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Java: 1.8<br>SpringBoot: 2.2.6.Release<br>SpringCloud: 2021.0.5<br>Sleuth: 2.2.8.RELEASE<br>Zipkin：2.2.8.RELEASE</p>
<h3><span id="背景"><span id="inline-blue">背景</span></span></h3><p>SpringCloud集群部署之后，线上问题的排查和分析变得异常繁琐，通过日志定位问题原因总是花费不少时间，于是想要通过集成链路追踪的插件实现调用链路的实时分析，集成Sleuth+Zipkin.<br>Sleuth:<br>sleuth 是一个 Go 库，它提供无主对等自动发现和位于同一网络上的 HTTP 服务之间的 RPC。它以最低配置运行，并提供一种机制，既可以作为不提供服务的客户端加入本地网络，也可以作为使用 HTTP 的任何服务加入本地网络。它的主要用例是同一网络上相互调用的微服务。<br>Sleuth 提供了以下功能：<br>链路追踪：通过 Sleuth 可以很清楚的看出一个请求都经过了那些服务，可以很方便的理清服务间的调用关系等。<br>性能分析：通过 Sleuth 可以很方便的看出每个采样请求的耗时，分析哪些服务调用比较耗时，当服务调用的耗时随着请求量的增大而增大时， 可以对服务的扩容提供一定的提醒。<br>数据分析：对于频繁调用一个服务，或并行调用等，可以针对业务做一些优化措施。<br>可视化错误：对于程序未捕获的异常，可以配合 Zipkin 查看。</p>
<p>Zipkin:<br>zipkin是一个分布式追踪系统，能够收集服务间调用的时序数据，提供调用链路的追踪，在微服务架构下，十分方便地用于服务响应延迟等问题的定位。<br>zipkin每一个调用链路通过一个trace id来串联起来，只要你有一个trace id，就能够直接定位到这次调用链路，并且可以根据服务名、标签、响应时间等进行查询，过滤那些耗时比较长的链路节点。</p>
<h3><span id="实现"><span id="inline-blue">实现</span></span></h3><p>模块增加依赖如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个依赖同时包含了Sleuth+Zipkin</p>
<p>模块配置文件application-xxx.properties增加如下配置：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#sleuth+zipkin</span></span><br><span class="line"><span class="comment">#将其作为服务注册到nacos</span></span><br><span class="line"><span class="meta">spring.sleuth.web.client.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#调用链采样百分比，采样比例为0.1(10%),参数值在0.1-1.0之间，1.0表示采样所有的调用链</span></span><br><span class="line"><span class="meta">spring.sleuth.sampler.probability</span>=<span class="string">1.0</span></span><br><span class="line"><span class="meta">spring.zipkin.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#zipkin的服务端控制台管理地址</span></span><br><span class="line"><span class="meta">spring.zipkin.base-url</span>=<span class="string">http://10.9.216.12:9411/</span></span><br><span class="line"><span class="comment">#关闭模块sleuth自动发现zipkin服务端机制，由spring.zipkin.base-url参数直接指定</span></span><br><span class="line"><span class="meta">spring.zipkin.discoveryClientEnabled</span>=<span class="string">false</span></span><br><span class="line"><span class="comment">#消息上报采用http方式</span></span><br><span class="line"><span class="meta">spring.zipkin.sender.type</span>=<span class="string">web</span></span><br></pre></td></tr></table></figure>

<h3><span id="zipkin部署"><span id="inline-blue">Zipkin部署</span></span></h3><p>github地址：<a href="https://github.com/openzipkin/zipkin">https://github.com/openzipkin/zipkin</a><br>为了后续集成Elasticsearch8.x版本,部署使用zipkin-server-2.26.0-exec.jar<br>Maven仓库地址：<a href="https://mvnrepository.com/artifact/io.zipkin/zipkin-server/2.26.0">https://mvnrepository.com/artifact/io.zipkin/zipkin-server/2.26.0</a><br>Zipkin-2.26.0版本的启动需要JDK11.<br>Zipkin采集数据的存储方式主要支持内存、MySQL、Elasticsearch、Cassandra，下面主要介绍内存、MySQL、Elasticsearch三种方式的部署。</p>
<h4><span id="内存模式"><span id="inline-blue">内存模式</span></span></h4><p>start.sh脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">pid=$(ps -ef | grep zipkin-server-2.26.0-exec.jar | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">kill -9 $pid</span><br><span class="line">nohup /usr/local/java/jdk-11.0.18/bin/java  -jar zipkin-server-2.26.0-exec.jar  &gt; ./info.log &amp;</span><br></pre></td></tr></table></figure>

<h4><span id="mysql模式"><span id="inline-blue">MySQL模式</span></span></h4><p>MySQL服务器新建数据库Zipkin，数据库版本要求5.6+<br>导入如下脚本内容：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> zipkin_spans (</span><br><span class="line">  `trace_id_high` <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;If non zero, this means the trace uses 128 bit traceIds instead of 64 bit&#x27;</span>,</span><br><span class="line">  `trace_id` <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `id` <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `remote_service_name` <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">  `parent_id` <span class="type">BIGINT</span>,</span><br><span class="line">  `debug` BIT(<span class="number">1</span>),</span><br><span class="line">  `start_ts` <span class="type">BIGINT</span> COMMENT <span class="string">&#x27;Span.timestamp(): epoch micros used for endTs query and to implement TTL&#x27;</span>,</span><br><span class="line">  `duration` <span class="type">BIGINT</span> COMMENT <span class="string">&#x27;Span.duration(): micros used for minDuration and maxDuration query&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`trace_id_high`, `trace_id`, `id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB ROW_FORMAT<span class="operator">=</span>COMPRESSED <span class="type">CHARACTER</span> <span class="keyword">SET</span><span class="operator">=</span>utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_spans <span class="keyword">ADD</span> INDEX(`trace_id_high`, `trace_id`) COMMENT <span class="string">&#x27;for getTracesByIds&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_spans <span class="keyword">ADD</span> INDEX(`name`) COMMENT <span class="string">&#x27;for getTraces and getSpanNames&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_spans <span class="keyword">ADD</span> INDEX(`remote_service_name`) COMMENT <span class="string">&#x27;for getTraces and getRemoteServiceNames&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_spans <span class="keyword">ADD</span> INDEX(`start_ts`) COMMENT <span class="string">&#x27;for getTraces ordering and range&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> zipkin_annotations (</span><br><span class="line">  `trace_id_high` <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;If non zero, this means the trace uses 128 bit traceIds instead of 64 bit&#x27;</span>,</span><br><span class="line">  `trace_id` <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;coincides with zipkin_spans.trace_id&#x27;</span>,</span><br><span class="line">  `span_id` <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;coincides with zipkin_spans.id&#x27;</span>,</span><br><span class="line">  `a_key` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;BinaryAnnotation.key or Annotation.value if type == -1&#x27;</span>,</span><br><span class="line">  `a_value` <span class="type">BLOB</span> COMMENT <span class="string">&#x27;BinaryAnnotation.value(), which must be smaller than 64KB&#x27;</span>,</span><br><span class="line">  `a_type` <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;BinaryAnnotation.type() or -1 if Annotation&#x27;</span>,</span><br><span class="line">  `a_timestamp` <span class="type">BIGINT</span> COMMENT <span class="string">&#x27;Used to implement TTL; Annotation.timestamp or zipkin_spans.timestamp&#x27;</span>,</span><br><span class="line">  `endpoint_ipv4` <span class="type">INT</span> COMMENT <span class="string">&#x27;Null when Binary/Annotation.endpoint is null&#x27;</span>,</span><br><span class="line">  `endpoint_ipv6` <span class="type">BINARY</span>(<span class="number">16</span>) COMMENT <span class="string">&#x27;Null when Binary/Annotation.endpoint is null, or no IPv6 address&#x27;</span>,</span><br><span class="line">  `endpoint_port` <span class="type">SMALLINT</span> COMMENT <span class="string">&#x27;Null when Binary/Annotation.endpoint is null&#x27;</span>,</span><br><span class="line">  `endpoint_service_name` <span class="type">VARCHAR</span>(<span class="number">255</span>) COMMENT <span class="string">&#x27;Null when Binary/Annotation.endpoint is null&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB ROW_FORMAT<span class="operator">=</span>COMPRESSED <span class="type">CHARACTER</span> <span class="keyword">SET</span><span class="operator">=</span>utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_annotations <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> KEY(`trace_id_high`, `trace_id`, `span_id`, `a_key`, `a_timestamp`) COMMENT <span class="string">&#x27;Ignore insert on duplicate&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_annotations <span class="keyword">ADD</span> INDEX(`trace_id_high`, `trace_id`, `span_id`) COMMENT <span class="string">&#x27;for joining with zipkin_spans&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_annotations <span class="keyword">ADD</span> INDEX(`trace_id_high`, `trace_id`) COMMENT <span class="string">&#x27;for getTraces/ByIds&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_annotations <span class="keyword">ADD</span> INDEX(`endpoint_service_name`) COMMENT <span class="string">&#x27;for getTraces and getServiceNames&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_annotations <span class="keyword">ADD</span> INDEX(`a_type`) COMMENT <span class="string">&#x27;for getTraces and autocomplete values&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_annotations <span class="keyword">ADD</span> INDEX(`a_key`) COMMENT <span class="string">&#x27;for getTraces and autocomplete values&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> zipkin_annotations <span class="keyword">ADD</span> INDEX(`trace_id`, `span_id`, `a_key`) COMMENT <span class="string">&#x27;for dependencies job&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> zipkin_dependencies (</span><br><span class="line">  `<span class="keyword">day</span>` <span class="type">DATE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `parent` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `child` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `call_count` <span class="type">BIGINT</span>,</span><br><span class="line">  `error_count` <span class="type">BIGINT</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`<span class="keyword">day</span>`, `parent`, `child`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB ROW_FORMAT<span class="operator">=</span>COMPRESSED <span class="type">CHARACTER</span> <span class="keyword">SET</span><span class="operator">=</span>utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br></pre></td></tr></table></figure>
<p>start_mysql.sh脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">pid=$(ps -ef | grep zipkin-server-2.26.0-exec.jar | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">kill -9 $pid</span><br><span class="line">nohup /usr/local/java/jdk-11.0.18/bin/java  -jar zipkin-server-2.26.0-exec.jar --STORAGE_TYPE=mysql --MYSQL_HOST=10.9.216.12 --MYSQL_TCP_PORT=3306 --MYSQL_USER=root --MYSQL_PASS=coship --MYSQL_DB=zipkin &gt; ./info.log &amp;</span><br></pre></td></tr></table></figure>
<h4><span id="elasticsearch模式"><span id="inline-blue">Elasticsearch模式</span></span></h4><p>start_elasticsearch.sh脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">pid=$(ps -ef | grep zipkin-server-2.26.0-exec.jar | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">kill -9 $pid</span><br><span class="line">nohup /usr/local/java/jdk-11.0.18/bin/java  -jar zipkin-server-2.26.0-exec.jar  --STORAGE_TYPE=elasticsearch --ES_HOSTS=http://10.9.216.12:9200 &gt; ./info.log &amp;</span><br></pre></td></tr></table></figure>

<h3><span id="链路分析验证"><span id="inline-blue">链路分析验证</span></span></h3><p>链路信息：<br><img src="/images/Zipkin/Zipkin_20240614_001.png" alt="Zipkin链路"><br>请求耗时分析：<br><img src="/images/Zipkin/Zipkin_20240614_002.png" alt="Zipkin请求耗时"></p>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Zipkin</tag>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>Sleuth</tag>
      </tags>
  </entry>
  <entry>
    <title>ElasticSearch基本操作</title>
    <url>/Elasticsearch/blogs/Elasticsearch%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%B4%A2%E5%BC%95%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">查看所有索引信息</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95%E6%98%A0%E5%B0%84mapping%E8%AF%A6%E6%83%85span"><span id="inline-blue">查看指定索引映射Mapping详情</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95span"><span id="inline-blue">创建索引</span></a></li>
<li><a href="#span-idinline-blue%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95span"><span id="inline-blue">删除索引</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E6%A8%A1%E6%9D%BF%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">查看模板配置</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">查看集群配置</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E9%9B%86%E7%BE%A4%E5%81%A5%E5%BA%B7%E7%8A%B6%E6%80%81span"><span id="inline-blue">查看集群健康状态</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E8%8A%82%E7%82%B9%E7%B4%A2%E5%BC%95%E5%88%86%E7%89%87%E7%8A%B6%E6%80%81span"><span id="inline-blue">查看节点索引分片状态</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95mappingspan"><span id="inline-blue">创建索引mapping</span></a><ul>
<li><a href="#span-idinline-blue24%E7%89%88%E6%9C%ACspan"><span id="inline-blue">2.4版本</span></a></li>
<li><a href="#span-idinline-blue50-%E7%89%88%E6%9C%ACspan"><span id="inline-blue">5.0 版本</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E6%A8%A1%E6%9D%BFspan"><span id="inline-blue">创建模板</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="查看所有索引信息"><span id="inline-blue">查看所有索引信息</span></span></h1><p><a href="http://10.9.216.14:9200/_cat/indices">http://10.9.216.14:9200/_cat/indices</a></p>
<h1><span id="查看指定索引映射mapping详情"><span id="inline-blue">查看指定索引映射Mapping详情</span></span></h1><p><a href="http://10.9.216.14:9200/$%7BindexName%7D?pretty">http://10.9.216.14:9200/${indexName}?pretty</a></p>
<h1><span id="创建索引"><span id="inline-blue">创建索引</span></span></h1><p>POST <a href="http://10.9.216.14:9200/$%7BindexName%7D">http://10.9.216.14:9200/${indexName}</a></p>
<h1><span id="删除索引"><span id="inline-blue">删除索引</span></span></h1><p>DELETE <a href="http://10.9.216.14:9200/$%7BindexName%7D">http://10.9.216.14:9200/${indexName}</a></p>
<h1><span id="查看模板配置"><span id="inline-blue">查看模板配置</span></span></h1><p>GET <a href="http://10.9.216.14:9200/_template/">http://10.9.216.14:9200/_template/</a>*</p>
<h1><span id="查看集群配置"><span id="inline-blue">查看集群配置</span></span></h1><p>GET <a href="http://10.9.216.14:9200/_cluster/settings">http://10.9.216.14:9200/_cluster/settings</a></p>
<h1><span id="查看集群健康状态"><span id="inline-blue">查看集群健康状态</span></span></h1><p>GET <a href="http://10.9.216.14:9200/_cluster/health">http://10.9.216.14:9200/_cluster/health</a></p>
<h1><span id="查看节点索引分片状态"><span id="inline-blue">查看节点索引分片状态</span></span></h1><p>GET <a href="http://10.9.216.14:9200/_cat/shards?v&amp;h=index,shard,prirep,state,unassigned.reason">http://10.9.216.14:9200/_cat/shards?v&amp;h=index,shard,prirep,state,unassigned.reason</a></p>
<h1><span id="创建索引mapping"><span id="inline-blue">创建索引mapping</span></span></h1><h2><span id="24版本"><span id="inline-blue">2.4版本</span></span></h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">POST http://10.9.216.14:9200/coseelog/doc/_mapping?pretty</span><br><span class="line">&#123;<span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line">	<span class="attr">&quot;properties&quot;</span>:  &#123;</span><br><span class="line">		<span class="attr">&quot;logId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;logTime&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;ip&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;userName&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;moduleId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;actionId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;content&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;orgId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="50-版本"><span id="inline-blue">5.0 版本</span></span></h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">mapping POST http://10.9.216.14:9200/coseelog/doc/_mapping?pretty</span><br><span class="line">&#123;<span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line">	<span class="attr">&quot;properties&quot;</span>:  &#123;</span><br><span class="line">		<span class="attr">&quot;logId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;logTime&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;ip&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;userName&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;moduleId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;actionId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;content&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">		<span class="attr">&quot;orgId&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1><span id="创建模板"><span id="inline-blue">创建模板</span></span></h1><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">POST http://10.9.216.14:9200/_template/vistors_flow_total/</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;template&quot;</span> : <span class="string">&quot;vistors_flow_total_*&quot;</span>,</span><br><span class="line">  	<span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;index&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;number_of_shards&quot;</span> : <span class="string">&quot;3&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;number_of_replicas&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;translog.flush_threshold_size&quot;</span> : <span class="string">&quot;1024mb&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line">				<span class="attr">&quot;_all&quot;</span>: &#123; <span class="attr">&quot;enabled&quot;</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">				<span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">					<span class="attr">&quot;deviceKey&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;productKey&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;deviceName&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;,</span><br><span class="line">					<span class="attr">&quot;statisticNum&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,<span class="attr">&quot;index&quot;</span>: <span class="string">&quot;not_analyzed&quot;</span></span><br><span class="line">					&#125;</span><br><span class="line">					<span class="string">&quot;statisticTime&quot;</span>: &#123;</span><br><span class="line">						<span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">						<span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span></span><br><span class="line">					&#125;</span><br><span class="line">					</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle禁用外键约束</title>
    <url>/Oracle/blogs/Oracle%E7%A6%81%E7%94%A8%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Oracle:11.2.0.4.0</p>
<h3><span id="背景"><span id="inline-blue">背景</span></span></h3><p>业务需要变更表字段，关联表存在外键依赖，需要禁用外键依赖，数据修改完成后再恢复。</p>
<h4><span id="禁用外键"><span id="inline-blue">禁用外键</span></span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#表名t_aaa_price_policy  外键约束名FK_T_AAA_PR_REFERENCE_T_AAA_PR</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_aaa_price_policy disable <span class="keyword">constraint</span> FK_T_AAA_PR_REFERENCE_T_AAA_PR</span><br></pre></td></tr></table></figure>

<h4><span id="启用外键"><span id="inline-blue">启用外键</span></span></h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#表名t_aaa_price_policy  外键约束名FK_T_AAA_PR_REFERENCE_T_AAA_PR</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_aaa_price_policy enable <span class="keyword">constraint</span> FK_T_AAA_PR_REFERENCE_T_AAA_PR </span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL基于存储过程实现大表数据清理</title>
    <url>/MySQL/blogs/MySQL%E5%9F%BA%E4%BA%8E%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%AE%9E%E7%8E%B0%E5%A4%A7%E8%A1%A8%E6%95%B0%E6%8D%AE%E6%B8%85%E7%90%86/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>MySQL:5.7</p>
<h3><span id="背景"><span id="inline-blue">背景</span></span></h3><p>数据库大表中出现了垃圾数据导致业务调用异常，希望通过存储过程清理满足特定条件的数据记录。<br>ipqam_usage表记录按照ipqam_id字段进行分组统计,prog_no字段升序排序，清理对应分组记录数多余16的记录<br>表字段如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE &#96;ipqam_usage&#96; (</span><br><span class="line">  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  &#96;ipqam_id&#96; int(11) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;constant field&#39;,</span><br><span class="line">  &#96;prog_no&#96; int(11) unsigned NOT NULL DEFAULT &#39;2&#39; COMMENT &#39;constant field&#39;,</span><br><span class="line">  &#96;port_no&#96; int(11) unsigned NOT NULL DEFAULT &#39;258&#39; COMMENT &#39;constant field&#39;,</span><br><span class="line">  &#96;prog_bitrate&#96; int(11) unsigned NOT NULL DEFAULT &#39;0&#39; COMMENT &#39;kbps&#39;,</span><br><span class="line">  &#96;owner_id&#96; bigint(20) unsigned NOT NULL DEFAULT &#39;0&#39;,</span><br><span class="line">  &#96;last_use_time&#96; bigint(20) unsigned NOT NULL DEFAULT &#39;0&#39;,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;),</span><br><span class="line">  KEY &#96;idx_ipqam_usage_1&#96; (&#96;ipqam_id&#96;,&#96;prog_bitrate&#96;),</span><br><span class="line">  KEY &#96;idx_onwer_id&#96; (&#96;owner_id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;9028760 DEFAULT CHARSET&#x3D;gbk;</span><br></pre></td></tr></table></figure>
<h4><span id="实现思路"><span id="inline-blue">实现思路</span></span></h4><p>借助MySQL游标，先查询出ipqam_id对应记录大于16的ipqam_id，并开启游标遍历操作，然后根据需要进行清理数据的ipqam_id,查询出16条记录数之外的ID暂存到临时表上，最后根据临时表上的id进行删除即可。<br>如下是存储过程实现：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS&#x3D;0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Procedure structure for &#96;clearIpqamInvalidProgram&#96;</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP PROCEDURE IF EXISTS &#96;clearIpqamInvalidProgram&#96;;</span><br><span class="line">DELIMITER ;;</span><br><span class="line">CREATE DEFINER&#x3D;&#96;root&#96;@&#96;%&#96; PROCEDURE &#96;clearIpqamInvalidProgram&#96;()</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	  &#x2F;*  游标异常停止标识  *&#x2F;</span><br><span class="line">	  DECLARE v_clear_stop_flag INT DEFAULT 0;</span><br><span class="line">	  &#x2F;* ipqam_id  *&#x2F;</span><br><span class="line">	  DECLARE v_ipqam_id VARCHAR(60) DEFAULT NULL;</span><br><span class="line">	  &#x2F;* 任务完成标识 *&#x2F;</span><br><span class="line">	  DECLARE out_done INT DEFAULT FALSE ; </span><br><span class="line">	  &#x2F;*  定义游标 *&#x2F;</span><br><span class="line">      DECLARE out_cursor CURSOR FOR (SELECT tq.ipqam_id FROM ( SELECT t.ipqam_id,COUNT(*) nums FROM ipqam_usage t GROUP BY t.ipqam_id ) tq WHERE tq.nums &gt; 16);</span><br><span class="line">	  &#x2F;* 循环结束标识 *&#x2F;</span><br><span class="line">	  DECLARE CONTINUE HANDLER FOR NOT FOUND SET out_done &#x3D; TRUE ; </span><br><span class="line">	   &#x2F;* 创建临时表  记录需要清理的ipqam_usage id*&#x2F;</span><br><span class="line">	  DROP  TABLE IF EXISTS temp_ipqam_use_id;</span><br><span class="line">	  CREATE  TABLE temp_ipqam_use_id </span><br><span class="line">			(</span><br><span class="line">			  ipqam_use_id INT DEFAULT 0 PRIMARY KEY</span><br><span class="line">			);</span><br><span class="line">		&#x2F;* 遍历游标 *&#x2F;</span><br><span class="line">		OPEN out_cursor ; </span><br><span class="line">		WHILE NOT out_done DO </span><br><span class="line">				FETCH out_cursor INTO v_ipqam_id; </span><br><span class="line">				IF NOT out_done THEN 	</span><br><span class="line">						REPLACE INTO temp_ipqam_use_id</span><br><span class="line">						SELECT id</span><br><span class="line">						FROM ipqam_usage</span><br><span class="line">						WHERE ipqam_id &#x3D; v_ipqam_id</span><br><span class="line">						ORDER BY prog_no</span><br><span class="line">						ASC </span><br><span class="line">						LIMIT 16,2000; </span><br><span class="line">				END IF; </span><br><span class="line">		END WHILE; </span><br><span class="line">		CLOSE out_cursor ;</span><br><span class="line">		&#x2F;* 清理对应记录 ipqam_usage *&#x2F;</span><br><span class="line">		DELETE FROM ipqam_usage where id in (select distinct ipqam_use_id from temp_ipqam_use_id );</span><br><span class="line">		DROP  TABLE IF EXISTS temp_ipqam_use_id;</span><br><span class="line"></span><br><span class="line">END</span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS&#x3D;1;</span><br></pre></td></tr></table></figure>
<h4><span id="验证"><span id="inline-blue">验证</span></span></h4><p><img src="/images/mysql/mysql_20240606_001.png" alt="MySQL大表清理"></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud Gateway集成SpringDoc+Knife4j-gateway</title>
    <url>/SpringCloud/blogs/SpringCloud%20Gateway%E9%9B%86%E6%88%90SpringDoc+knife4j-gateway/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Java: 1.8<br>SpringBoot: 2.6.6<br>SpringCloud: 2021.0.6<br>springDoc: 1.6.9<br>knife-gateway:4.4.0</p>
<h3><span id="升级原因"><span id="inline-blue">升级原因</span></span></h3><p>原本项目api文档由knife+Swagger2.0实现，springBoot升级2.6.6，发现swagger2.0已经停止 维护，knife后续版本也只兼容适配swagger3.0,也就是openapi,并且Swagger2.0最高只能集成knife-2.0.9<br>,由于考虑到knife的兼容性，于是将swagger2.0升级为openapi,knife升级为knife-gateway.</p>
<h3><span id="解决方案"><span id="inline-blue">解决方案</span></span></h3><p>网关以外的微服务模块pom.xml增加如下依赖：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>微服务增加配置项如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#knife4j</span></span><br><span class="line"><span class="meta">knife4j.enable</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">knife4j.setting.language</span>=<span class="string">zh_cn</span></span><br><span class="line"></span><br><span class="line"><span class="meta">springdoc.api-docs.version</span>=<span class="string">openapi_3_0</span></span><br><span class="line"><span class="meta">springdoc.default-flat-param-object</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">springdoc.packages-to-scan</span>=<span class="string">com.ffcs.platform.quartz</span></span><br><span class="line"><span class="meta">springdoc.api-docs.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">springdoc.swagger-ui.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">springdoc.swagger-ui.config-url</span>=<span class="string">/v3/api-docs/swagger-config</span></span><br><span class="line"><span class="meta">springdoc.swagger-ui.url</span>=<span class="string">/v3/api-docs</span></span><br><span class="line"><span class="meta">springdoc.title</span>=<span class="string">ffcs-quartz</span></span><br><span class="line"><span class="meta">springdoc.description</span>=<span class="string">Quartz接口服务</span></span><br><span class="line"><span class="meta">springdoc.termsOfService</span>=<span class="string">服务条款</span></span><br><span class="line"><span class="meta">springdoc.version</span>=<span class="string">V1.0</span></span><br><span class="line"><span class="meta">springdoc.license.name</span>=<span class="string">Apache License, Version 2.0</span></span><br><span class="line"><span class="meta">springdoc.license.license-url</span>=<span class="string">https://www.apache.org/licenses/LICENSE-2.0.html</span></span><br><span class="line"><span class="meta">springdoc.contact.name</span>=<span class="string">xxxx</span></span><br><span class="line"><span class="meta">springdoc.contact.email</span>=<span class="string">xxxx@coship.com</span></span><br><span class="line"><span class="meta">springdoc.contact.url</span>=<span class="string">xxxx@coship.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SpringSecurity直接放行URL</span></span><br><span class="line"><span class="meta">ignore.urls[0]</span>=<span class="string">/oauth/**</span></span><br><span class="line"><span class="meta">ignore.urls[1]</span>=<span class="string">/actuator/**</span></span><br><span class="line"><span class="meta">ignore.urls[2]</span>=<span class="string">/v3/api-docs/**</span></span><br><span class="line"><span class="meta">ignore.urls[3]</span>=<span class="string">/swagger-ui.html</span></span><br><span class="line"><span class="meta">ignore.urls[4]</span>=<span class="string">/swagger-resources/**</span></span><br><span class="line"><span class="meta">ignore.urls[5]</span>=<span class="string">/webjars/**</span></span><br><span class="line"><span class="meta">ignore.urls[6]</span>=<span class="string">/druid/**</span></span><br><span class="line"><span class="meta">ignore.urls[7]</span>=<span class="string">/swagger-ui/*</span></span><br><span class="line"><span class="meta">ignore.urls[8]</span>=<span class="string">/doc.html</span></span><br><span class="line"><span class="meta">ignore.urls[9]</span>=<span class="string">/favicon.ico</span></span><br></pre></td></tr></table></figure>
<p>公共配置配置类ApiDocProperties</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.xxx.common.config.springdoc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;springdoc&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiDocProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;title:标题&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;description:接口文档&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;termsOfService:服务条款&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String termsOfService;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;contact.name:xxxx&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String contactName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;contact.url:xxxx@coship.com&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String contactUrl;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;contact.email:xxxx@coship.com&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String contactEmail;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;license.name:Apache License, Version 2.0&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String licenseName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;license.license-url:https://www.apache.org/licenses/LICENSE-2.0.html&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String licenseUrl;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;version:V1.0&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String version;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>openapi公共配置初始化</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ffcs.platform.common.config.springdoc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.OpenAPI;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Contact;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Info;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.License;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringDocConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ApiDocProperties apiDocProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OpenAPI <span class="title">CreateOpenAPI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        License license = <span class="keyword">new</span> License();</span><br><span class="line">        license.setName(apiDocProperties.getLicenseName());</span><br><span class="line">        license.setUrl(apiDocProperties.getLicenseUrl());</span><br><span class="line">        Contact contact = <span class="keyword">new</span> Contact();</span><br><span class="line">        contact.setName(apiDocProperties.getContactName());</span><br><span class="line">        contact.setUrl(apiDocProperties.getContactUrl());</span><br><span class="line">        contact.setEmail(apiDocProperties.getContactEmail());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> OpenAPI()</span><br><span class="line">                .info(<span class="keyword">new</span> Info().title(apiDocProperties.getTitle())</span><br><span class="line">                        .description(apiDocProperties.getDescription())</span><br><span class="line">                        .version(apiDocProperties.getVersion()).contact(contact).license(license).termsOfService(apiDocProperties.getTermsOfService()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>网关模块pom.xml增加如下依赖：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>knife4j-gateway-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置项新增如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 直接放行URL</span></span><br><span class="line"><span class="meta">ignore.urls[0]</span>=<span class="string">/oauth/**</span></span><br><span class="line"><span class="meta">ignore.urls[1]</span>=<span class="string">/actuator/**</span></span><br><span class="line"><span class="meta">ignore.urls[2]</span>=<span class="string">/v3/api-docs/**</span></span><br><span class="line"><span class="meta">ignore.urls[3]</span>=<span class="string">/swagger-ui.html</span></span><br><span class="line"><span class="meta">ignore.urls[4]</span>=<span class="string">/swagger-resources/**</span></span><br><span class="line"><span class="meta">ignore.urls[5]</span>=<span class="string">/webjars/**</span></span><br><span class="line"><span class="meta">ignore.urls[6]</span>=<span class="string">/druid/**</span></span><br><span class="line"><span class="meta">ignore.urls[7]</span>=<span class="string">/swagger-ui/*</span></span><br><span class="line"><span class="meta">ignore.urls[8]</span>=<span class="string">/doc.html</span></span><br><span class="line"><span class="meta">ignore.urls[9]</span>=<span class="string">/favicon.ico</span></span><br><span class="line"><span class="meta">ignore.urls[10]</span>=<span class="string">/user/getCaptcha</span></span><br><span class="line"><span class="meta">ignore.urls[11]</span>=<span class="string">/**/api/**</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#knife4j-gateway</span></span><br><span class="line"><span class="meta">knife4j.gateway.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">knife4j.gateway.strategy</span>=<span class="string">discover</span></span><br><span class="line"><span class="meta">knife4j.gateway.discover.version</span>=<span class="string">openapi3</span></span><br><span class="line"><span class="meta">knife4j.gateway.discover.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">knife4j.gateway.discover.excluded-services</span>=<span class="string">ffcs-gateway,ffcs-event-producer,ffcs-event-consumer,ffcs-admin-server,ffcs-sync-api</span></span><br></pre></td></tr></table></figure>
<h3><span id="验证"><span id="inline-blue">验证</span></span></h3><p><img src="/images/Swagger/Swagger_20240531_001.png" alt="knife-gateway"></p>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>SpringDoc</tag>
        <tag>Knife4j-gateway</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis-plus版本升级导致分页查询无效</title>
    <url>/Java/blogs/Mybatis-plus%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7%E5%AF%BC%E8%87%B4%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E6%97%A0%E6%95%88/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>os: Linux centos 7.9<br>Java: 1.8<br>SpringBoot: 2.6.6<br>SpringCloud: 2021.0.6<br>mybatis-plus: 3.3.1</p>
<h3><span id="现象"><span id="inline-blue">现象</span></span></h3><p>后台管理页面查询一直卡死，断点之后发现传递的分页参数没有效果，导致一次加载所有数据。</p>
<h3><span id="解决方案"><span id="inline-blue">解决方案</span></span></h3><p>mybatisPlusConfig升级前配置：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.xxx.common.config.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.optimize.JsqlParserCountOptimize;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PaginationInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        PaginationInterceptor paginationInterceptor = <span class="keyword">new</span> PaginationInterceptor();</span><br><span class="line">        <span class="comment">// 设置最大单页限制数量，默认 5000 条，-1 不受限制</span></span><br><span class="line">        paginationInterceptor.setLimit(<span class="number">5000</span>);</span><br><span class="line">        <span class="comment">// 开启 count 的 join 优化,只针对部分 left join</span></span><br><span class="line">        paginationInterceptor.setCountSqlParser(<span class="keyword">new</span> JsqlParserCountOptimize(<span class="keyword">true</span>));</span><br><span class="line">        <span class="keyword">return</span> paginationInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>升级后：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xxx.xxx.common.config.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.BlockAttackInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        <span class="comment">//阻止恶意或误操作的全表更新删除</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> BlockAttackInnerInterceptor());</span><br><span class="line">        <span class="comment">//分页插件</span></span><br><span class="line">        PaginationInnerInterceptor pageInterceptor = <span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL);</span><br><span class="line">        pageInterceptor.setMaxLimit(<span class="number">5000L</span>);</span><br><span class="line">        <span class="comment">// 开启 count 的 join 优化,只针对部分 left join</span></span><br><span class="line">        pageInterceptor.setOptimizeJoin(<span class="keyword">true</span>);</span><br><span class="line">        interceptor.addInnerInterceptor(pageInterceptor);</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot升级问题记录</title>
    <url>/SpringBoot/blogs/SpringBoot%E5%8D%87%E7%BA%A7%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h2><span id="项目背景"><span id="inline-blue">项目背景</span></span></h2><p>项目为实现全链路灰度发布功能，需要引入loadbalance依赖，放弃掉现有hytrix和ribbon,因此将项目微服务框架版本升级</p>
<h2><span id="升级内容"><span id="inline-blue">升级内容</span></span></h2><table>
<thead>
<tr>
<th>名称</th>
<th>原始版本</th>
<th>新版本</th>
</tr>
</thead>
<tbody><tr>
<td>SpringBoot</td>
<td>2.2.6.RELEASE</td>
<td>2.6.6</td>
</tr>
<tr>
<td>SpringCloud</td>
<td>2021.0.5</td>
<td>2021.0.6</td>
</tr>
<tr>
<td>springCloud-alibaba</td>
<td>2021.1</td>
<td>2021.0.6.0</td>
</tr>
<tr>
<td>spring-cloud-stater</td>
<td>2.2.2.RELEASE</td>
<td>3.1.6</td>
</tr>
<tr>
<td>spring-boot-stater</td>
<td>2.2.6.RELEASE</td>
<td>2.6.6</td>
</tr>
<tr>
<td>spring</td>
<td>5.2.5.RELEASE</td>
<td>5.3.18</td>
</tr>
<tr>
<td>mybatis-plus</td>
<td>3.3.1</td>
<td>3.5.3</td>
</tr>
</tbody></table>
<h3><span id="redisutil问题"><span id="inline-blue">RedisUtil问题</span></span></h3><p>redis版本升级导致语法变更<br>解决方案：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">报错代码：redisTemplate.delete(CollectionUtils.arrayToList(key));</span><br><span class="line">修正代码: redisTemplate.delete(Arrays.asList(key));</span><br><span class="line"></span><br><span class="line">报错代码：Cursor&lt;<span class="keyword">byte</span>[]&gt; cursor = connection.scan(<span class="keyword">new</span> ScanOptions.ScanOptionsBuilder().match(realKey).count(Integer.MAX_VALUE).build());</span><br><span class="line">修正代码: Cursor&lt;<span class="keyword">byte</span>[]&gt; cursor = connection.scan(ScanOptions.scanOptions().match(realKey).count(Integer.MAX_VALUE).build());</span><br></pre></td></tr></table></figure>

<h3><span id="junit问题"><span id="inline-blue">Junit问题</span></span></h3><p>解决方案：<br>SpringBoot升级之后需要自行导入Junit依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3><span id="定时任务问题"><span id="inline-blue">定时任务问题</span></span></h3><p>spring-boot-starter-quartz 2.5.9 之前使用org.quartz.impl.jdbcjobstore.JobStoreTX定义quartz的默认数据源支持，即如下配置：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">org.quartz.jobStore.class</span>=<span class="string">org.quartz.impl.jdbcjobstore.JobStoreTX</span></span><br></pre></td></tr></table></figure>
<p>解决方案：<br>新版本配置变更为如下内容：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">org.quartz.jobStore.class</span>=<span class="string">org.springframework.scheduling.quartz.LocalDataSourceJobStore</span></span><br></pre></td></tr></table></figure>

<h3><span id="循环依赖问题"><span id="inline-blue">循环依赖问题</span></span></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Application run failed   org.springframework.boot.SpringApplication.reportFailure(SpringApplication.java:<span class="number">824</span>) </span><br><span class="line">org.springframework.context.ApplicationContextException: Failed to start bean <span class="string">&#x27;documentationPluginsBootstrapper&#x27;</span>; nested exception is java.lang.NullPointerException</span><br><span class="line">    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:<span class="number">181</span>) ~[spring-context-<span class="number">5.3</span><span class="number">.22</span>.jar:<span class="number">5.3</span><span class="number">.22</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在 Spring Boot 2.6 版本中，循环引用默认情况下已经被禁止了。如果你的项目存在循环引用问题，那你在启动项目的时候就会报错。<br>解决方案：<br>在bootStrap.properties启动配置文件中增加如下配置项解决</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.main.allow-circular-references</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<h3><span id="knife4j启动加载问题"><span id="inline-blue">knife4j启动加载问题</span></span></h3><p><img src="/images/SpringBoot/SpringBoot_20240531_001.png" alt="Swagger2.0报错"></p>
<p>springboot2.6.x以及上版本默认使用的PATH_PATTERN_PARSER而knife4j的springfox使用的是ANT_PATH_MATCHER导致的<br>解决方案：<br>springboot的配置文件配置url匹配规则</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.mvc.pathmatch.matching-strategy</span>=<span class="string">ANT_PATH_MATCHER</span></span><br></pre></td></tr></table></figure>

<p>Swagger初始化配置类增加如下内容：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解决springboot2.6 和springfox不兼容问题</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BeanPostProcessor <span class="title">springfoxHandlerProviderBeanPostProcessor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BeanPostProcessor() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> WebMvcRequestHandlerProvider || bean <span class="keyword">instanceof</span> WebFluxRequestHandlerProvider) &#123;</span><br><span class="line">                customizeSpringfoxHandlerMappings(getHandlerMappings(bean));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> bean;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> &lt;T extends RequestMappingInfoHandlerMapping&gt; <span class="function"><span class="keyword">void</span> <span class="title">customizeSpringfoxHandlerMappings</span><span class="params">(List&lt;T&gt; mappings)</span> </span>&#123;</span><br><span class="line">            List&lt;T&gt; copy = mappings.stream()</span><br><span class="line">                    .filter(mapping -&gt; mapping.getPatternParser() == <span class="keyword">null</span>)</span><br><span class="line">                    .collect(Collectors.toList());</span><br><span class="line">            mappings.clear();</span><br><span class="line">            mappings.addAll(copy);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> List&lt;RequestMappingInfoHandlerMapping&gt; <span class="title">getHandlerMappings</span><span class="params">(Object bean)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Field field = ReflectionUtils.findField(bean.getClass(), <span class="string">&quot;handlerMappings&quot;</span>);</span><br><span class="line">                field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                <span class="keyword">return</span> (List&lt;RequestMappingInfoHandlerMapping&gt;) field.get(bean);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IllegalArgumentException | IllegalAccessException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="微服务启动缺失nacos配置信息导致启动报错"><span id="inline-blue">微服务启动缺失nacos配置信息导致启动报错</span></span></h3><p>问题原因：<br>SpringBoot项目，只会识别application.properties 配置文件，并不会自动识别bootstrap.properties。<br>bootstrap.yml配置是SpringCloud项目才会用到的，如果你想在springboot项目中用bootstrap.properties，那么你需要添加bootstrap启动器。<br>Spring Boot 2.4版本开始，配置文件加载方式进行了重构</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">39.2. Config First Bootstrap</span><br><span class="line"></span><br><span class="line">To use the legacy bootstrap way of connecting to Config Server, bootstrap must be enabled via a property or the spring-cloud-starter-bootstrap starter. The property is spring.cloud.bootstrap.enabled=true. It must be set as a System Property or environment variable.</span><br></pre></td></tr></table></figure>
<p>解决方案：<br>pom.xml添加对应依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3><span id="hibernate-validator加载报错"><span id="inline-blue">hibernate-validator加载报错</span></span></h3><p>Springboot从2.3以后，spring-boot-starter-web中不再引入hibernate-validator<br>解决方案：<br>pom.xml引入对应依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.18.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3><span id="微服务启动时no-feign-client-for-loadbalancing-defined"><span id="inline-blue">微服务启动时No Feign Client for loadBalancing defined</span></span></h3><p>SpringCloud版本升级后移除hytrix熔断和Ribbon负载均衡实现<br>解决方案：<br>pom.xml手动引入openfeign和loadbalance依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3><span id="javalangnosuchfielderror-instance"><span id="inline-blue">java.lang.NoSuchFieldError: INSTANCE</span></span></h3><p>启动报错，错误信息如下：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">Could not instantiate bean <span class="class"><span class="keyword">class</span> <span class="title">EventPublishingRunListener</span>   </span></span><br><span class="line"><span class="class"><span class="title">org</span>.<span class="title">springframework</span>.<span class="title">beans</span>.<span class="title">BeanInstantiationException</span></span></span><br><span class="line">exception is java.lang.NoSuchFieldError: INSTANCE</span><br></pre></td></tr></table></figure>
<p>从调用链看是Spring-bean依赖对应的实体类缺失对应的方法，查看pom.xml文件依赖树发现存在多个版本的Spring版本依赖，导致加载异常。<br>解决方案：<br>排除掉存在冲突的依赖版本，只保留最新的版本。</p>
<h3><span id="commons-pool2兼容性报错"><span id="inline-blue">commons-pool2兼容性报错</span></span></h3><p>错误信息</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Description:</span><br><span class="line"></span><br><span class="line">An attempt was made to call a method that does not exist. The attempt was made from the following location:</span><br><span class="line">    org.springframework.boot.autoconfigure.data.redis.JedisConnectionConfiguration.jedisPoolConfig(JedisConnectionConfiguration.java:<span class="number">114</span>)</span><br><span class="line"></span><br><span class="line">The following method did not exist:</span><br><span class="line"></span><br><span class="line">    redis.clients.jedis.JedisPoolConfig.setMaxWait(Ljava/time/Duration;)V</span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.autoconfigure.data.redis.JedisConnectionConfiguration and redis.clients.jedis.JedisPoolConfig</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Git Issue ：<a href="https://github.com/spring-projects/spring-boot/issues/27642">https://github.com/spring-projects/spring-boot/issues/27642</a><br>看这个时间很早就修正了，commons-pool2 在2.8.1版本后丢失了一些方法。<br>解决方案：<br>commons-pool2依赖版本升级到2.11.1。</p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot Devtools导致类型转换异常</title>
    <url>/SpringBoot/blogs/SpringBoot%20Devtools%E5%AF%BC%E8%87%B4%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>os: Windows7<br>Java: 1.8<br>SpringBoot: 2.2.6.Release<br>SpringCloud: 2021.0.5<br>spring-boot-devtools: 2.2.6.Release</p>
<h3><span id="现象"><span id="inline-blue">现象</span></span></h3><p>本地启动SpringBoot项目，请求后天接口提示错误，错误信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java.lang.ClassCastException: com.ffcs.common.model.LoginUser cannot be cast to com.ffcs.common.model.LoginUser</span><br></pre></td></tr></table></figure>
<h3><span id="代码调用"><span id="inline-blue">代码调用</span></span></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserUtils</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LoginUser <span class="title">getLoginUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LoginUser loginUser = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            loginUser = (LoginUser)SecurityContextHolder.getContext().getAuthentication().getPrincipal();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;UserUtils异常:&quot;</span>, e);</span><br><span class="line">            UserUtils.log.info(<span class="string">&quot;============当前无登录信息，请注意================&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> loginUser;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3><span id="问题排查"><span id="inline-blue">问题排查</span></span></h3><p>错误信息很奇怪，同一个Class类对象居然不能转换，本地存在转换异常，但是如果打包后部署到Linux服务器上后，请求一切正常，接下来就是逐步排查提交的代码是否是因为修改代码逻辑导致出现请求异常。<br>代码没有找到特别的地方，怀疑是否是编译器做了什么优化，导致本地编译运行的class和打包后的不一致导致运行出现异常，特别检查了本地的class和反编译后的jar包内容是否一致，结果也没有变化。<br>因为重写了SpringSecurity的UserDetails对象，怀疑是否是loadUserByUsername方法和当前调用不一致导致，修改为一致的对象发现也没有效果，最后查看资料发现spring-boot-devtools依赖使用的是自己的类加载器，导致对象无法正常转换。</p>
<h3><span id="问题原因"><span id="inline-blue">问题原因</span></span></h3><p>项目启动时加载项目中的类使用的加载器都是org.springframework.boot.devtools.restart.classloader.RestartClassLoader，代码调用处左右两边的对象使用的不同的类加载器，左边使用的是sun.misc.Launcher.AppClassLoader，而右边使用的是org.springframework.boot.devtools.restart.classloader.RestartClassLoader<br>这是spring-boot-devtools自己封装的类加载器，方便重新加载变化的对象。就因为这个差别导致异常发生。</p>
<h3><span id="解决办法"><span id="inline-blue">解决办法</span></span></h3><p>项目pom.xml删除所有spring-boot-devtools依赖项</p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringBoot</tag>
        <tag>Devtools</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud Gateway集成Sentinel实现Nacos和Sentinel控制台双向同步</title>
    <url>/SpringCloud/blogs/SpringCloud%20Gateway%E9%9B%86%E6%88%90Sentinel%E5%AE%9E%E7%8E%B0Nacos%E5%92%8CSentinel%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%8F%8C%E5%90%91%E5%90%8C%E6%AD%A5/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Java: 1.8<br>SpringBoot: 2.2.6.Release<br>SpringCloud: 2021.0.5<br>Sentinel: 1.8.7<br>nacos：2.2.0</p>
<h3><span id="背景"><span id="inline-blue">背景</span></span></h3><p>SpringBoot版本升级为2.6.6，SpringCloud对应模块组件升级3.1.6版本之后，SpringCloud移除了hytrix和Ribbon实现，网关配置的hytrix自定义过滤和限流不能使用，因此选择集成Sentinel实现从网关上限制各个路由节点的流量和熔断功能。</p>
<h3><span id="实现"><span id="inline-blue">实现</span></span></h3><p>网关模块添加sentinel和nacos依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--sentinel-datasource-nacos持久化--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.csp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sentinel-datasource-nacos<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--    spring cloud gateway整合sentinel的依赖--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-sentinel-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>网关模块bootstrap.properties添加对应配置项如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#sentinel</span></span><br><span class="line"><span class="comment">#关闭sentinel默认过滤器</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.filter.enabled</span>=<span class="string">false</span></span><br><span class="line"><span class="comment">#关闭懒加载模式</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.eager</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 关闭context整合,避免链路模式下，请求资源共用同一个root资源导致限制规则失效</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.web-context-unify</span>=<span class="string">false</span></span><br><span class="line"><span class="comment">#微服务和sentinel通信交互的http端口，检测端口出现冲突的情况下递增</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.transport.port</span>=<span class="string">$&#123;admin-album.sentinel-transport-port&#125;</span></span><br><span class="line"><span class="comment">#微服务注册sentinel控制台地址</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.transport.dashboard</span>=<span class="string">$&#123;sentinel-dashboard-addr&#125;</span></span><br><span class="line"><span class="comment">#feign调用开启sentinel</span></span><br><span class="line"><span class="meta">feign.sentinel.enabled</span>=<span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#网关限流 gw-flow-rules</span></span><br><span class="line"><span class="comment">#nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-flow.nacos.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="comment">#nacos命名空间</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-flow.nacos.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="comment">#sentinel 网关限流规则</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-flow.nacos.dataId</span>=<span class="string">$&#123;spring.application.name&#125;-gw-flow-rules.json</span></span><br><span class="line"><span class="comment">#nacos默认分组</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-flow.nacos.groupId</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#规则定义文件格式</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-flow.nacos.data-type</span>=<span class="string">json</span></span><br><span class="line"><span class="comment">#规则类型</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-flow.nacos.rule-type</span>=<span class="string">gw-flow</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#服务降级 degrade-rules</span></span><br><span class="line"><span class="comment">#nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.degrade.nacos.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="comment">#nacos命名空间</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.degrade.nacos.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="comment">#sentinel 网关限流规则</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.degrade.nacos.dataId</span>=<span class="string">$&#123;spring.application.name&#125;-degrade-rules.json</span></span><br><span class="line"><span class="comment">#nacos默认分组</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.degrade.nacos.groupId</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#规则定义文件格式</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.degrade.nacos.data-type</span>=<span class="string">json</span></span><br><span class="line"><span class="comment">#规则类型</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.degrade.nacos.rule-type</span>=<span class="string">degrade</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#api分组 gw-api-group-rules</span></span><br><span class="line"><span class="comment">#nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-api-group.nacos.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="comment">#nacos命名空间</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-api-group.nacos.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="comment">#sentinel 网关限流规则</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-api-group.nacos.dataId</span>=<span class="string">$&#123;spring.application.name&#125;-gw-api-group-rules.json</span></span><br><span class="line"><span class="comment">#nacos默认分组</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-api-group.nacos.groupId</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#规则定义文件格式</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-api-group.nacos.data-type</span>=<span class="string">json</span></span><br><span class="line"><span class="comment">#规则类型</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.gw-api-group.nacos.rule-type</span>=<span class="string">gw-api-group</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#系统规则 system-rules</span></span><br><span class="line"><span class="comment">#nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.system.nacos.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="comment">#nacos命名空间</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.system.nacos.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="comment">#sentinel 网关限流规则</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.system.nacos.dataId</span>=<span class="string">$&#123;spring.application.name&#125;-system-rules.json</span></span><br><span class="line"><span class="comment">#nacos默认分组</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.system.nacos.groupId</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#规则定义文件格式</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.system.nacos.data-type</span>=<span class="string">json</span></span><br><span class="line"><span class="comment">#规则类型</span></span><br><span class="line"><span class="meta">spring.cloud.sentinel.datasource.system.nacos.rule-type</span>=<span class="string">system</span></span><br></pre></td></tr></table></figure>

<h3><span id="sentinel源码适配"><span id="inline-blue">Sentinel源码适配</span></span></h3><p>Sentinel默认是不支持控制台规则同步nacos,需要自己修改源码实现。<br>Sentinel版本使用1.8.7，自定义规则同步实现参考：<a href="https://www.cnblogs.com/cndarren/p/16197684.html">https://www.cnblogs.com/cndarren/p/16197684.html</a><br>已经修改完成的nacos分支版本地址：<a href="https://github.com/vanishke/sentinel-1.8.7/tree/master">https://github.com/vanishke/sentinel-1.8.7/tree/master</a></p>
<p><a id="download" href="/images/Sentinel/sentinel-dashboard-1.8.7-customized.zip"><i class="fa fa-download"></i><span>sentinel-dashboard-1.8.7-customized.zip</span> </a></p>
<h3><span id="sentinel启动"><span id="inline-blue">Sentinel启动</span></span></h3><p>start.sh脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">pid=$(ps -ef | grep sentinel-dashboard-1.8.7-customized.jar | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line">kill -9 $pid</span><br><span class="line">nohup java -Dserver.port=8180 -Dnacos.serverAddr=localhost:8848 -Dsentinel.dashboard.auth.username=sentinel -Dsentinel.dashboard.auth.password=sentinel -Dnacos.namespace=ffcs-test -Dcsp.sentinel.dashboard.server=localhost:8180 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard-1.8.7-customized.jar  &gt; ./info.log &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">-Dnacos.serverAddr=localhost:8848 nacos控制台地址</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-Dsentinel.dashboard.auth.username=sentinel 管理用户名</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-Dsentinel.dashboard.auth.password=sentinel 管理用户密码</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-Dnacos.namespace=ffcs-test  nacos命名空间</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-Dcsp.sentinel.dashboard.server=localhost:8180 Sentinel控制台</span></span><br></pre></td></tr></table></figure>

<h3><span id="sentinel熔断和限流规则配置"><span id="inline-blue">Sentinel熔断和限流规则配置</span></span></h3><h4><span id="限流"><span id="inline-blue">限流</span></span></h4><p><img src="/images/Sentinel/sentinel_20240531_001.png" alt="Sentinel限流"></p>
<h4><span id="熔断"><span id="inline-blue">熔断</span></span></h4><p><img src="/images/Sentinel/sentinel_20240531_002.png" alt="Sentinel熔断"></p>
<h3><span id="网关统一设置限流异常"><span id="inline-blue">网关统一设置限流异常</span></span></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Order(-2)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> GlobalFilter <span class="title">sentinelGatewayFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SentinelGatewayFilter();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = &quot;sentinelBlockRequestHandler&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BlockRequestHandler <span class="title">sentinelBlockRequestHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BlockRequestHandler blockRequestHandler = <span class="keyword">new</span> BlockRequestHandler() &#123;</span><br><span class="line">            <span class="meta">@SneakyThrows</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Mono&lt;ServerResponse&gt; <span class="title">handleRequest</span><span class="params">(ServerWebExchange serverWebExchange, Throwable throwable)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">int</span> code;</span><br><span class="line">                String message;</span><br><span class="line">                <span class="keyword">if</span> (throwable <span class="keyword">instanceof</span> FlowException) &#123;</span><br><span class="line">                    code = SentinelExceptionTypeEnum.FLOW.getValue();</span><br><span class="line">                    message = SentinelExceptionTypeEnum.FLOW.getMessage();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (throwable <span class="keyword">instanceof</span> ParamFlowException) &#123;</span><br><span class="line">                    code =SentinelExceptionTypeEnum.PARAMFLOW.getValue();</span><br><span class="line">                    message = SentinelExceptionTypeEnum.PARAMFLOW.getMessage();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (throwable <span class="keyword">instanceof</span> DegradeException) &#123;</span><br><span class="line">                    code = SentinelExceptionTypeEnum.DEGRADE.getValue();</span><br><span class="line">                    message = SentinelExceptionTypeEnum.DEGRADE.getMessage();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (throwable <span class="keyword">instanceof</span> AuthorityException) &#123;</span><br><span class="line">                    code = SentinelExceptionTypeEnum.AUTHORITY.getValue();</span><br><span class="line">                    message = SentinelExceptionTypeEnum.AUTHORITY.getMessage();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(throwable <span class="keyword">instanceof</span> SystemBlockException)</span><br><span class="line">                &#123;</span><br><span class="line">                    code = SentinelExceptionTypeEnum.SYSTEM.getValue();</span><br><span class="line">                    message = SentinelExceptionTypeEnum.SYSTEM.getMessage();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    code = SentinelExceptionTypeEnum.INTERNAL.getValue();</span><br><span class="line">                    message = SentinelExceptionTypeEnum.INTERNAL.getMessage();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> ServerResponse.status(HttpStatus.BAD_GATEWAY)</span><br><span class="line">                        .contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">                        .body(BodyInserters.fromValue(<span class="keyword">new</span> ObjectMapper().writeValueAsString(<span class="string">&quot;&#123;\&quot;msg\&quot;: &quot;</span> + message + <span class="string">&quot;, \&quot;code\&quot;: &quot;</span> + code + <span class="string">&quot;&#125;&quot;</span>)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> blockRequestHandler;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3><span id="验证"><span id="inline-blue">验证</span></span></h3><p>限流：<br><img src="/images/Sentinel/sentinel_20240531_003.png" alt="Sentinel限流"><br>熔断：<br><img src="/images/Sentinel/sentinel_20240531_004.png" alt="Sentinel熔断"></p>
<p>nacos限流规则同步：<br><img src="/images/Sentinel/sentinel_20240531_005.png" alt="nacos限流同步"><br>nacos熔断规则同步：<br><img src="/images/Sentinel/sentinel_20240531_006.png" alt="nacos熔断同步"></p>
]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>Nacos</tag>
        <tag>Sentinel</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux Unicode文件编码转中文</title>
    <url>/Linux/blogs/Linux%20Unicode%E6%96%87%E4%BB%B6%E7%BC%96%E7%A0%81%E8%BD%AC%E4%B8%AD%E6%96%87/</url>
    <content><![CDATA[<h2><span id="unicode文件转码"><span id="inline-blue">Unicode文件转码</span></span></h2><p>Linux : CentOS Linux release 7.7.1908 (Core)</p>
<h3><span id="native2ascii"><span id="inline-blue">native2ascii</span></span></h3><p><strong>语法</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">native2ascii -[options] [inputfile [outputfile]]</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong><br>-[options]：表示命令开关，有两个选项可供选择<br>-reverse：将Unicode编码转为本地或者指定编码，不指定编码情况下，将转为本地编码。<br>-encoding encoding_name：转换为指定编码，encoding_name为编码名称。</p>
<p>[inputfile [outputfile]]<br>inputfile：表示输入文件全名。<br>outputfile：输出文件名。如果缺少此参数，将输出到控制台。</p>
<p><strong>示例</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">native2ascii -encoding UTF-8 -reverse I18nResource.properties I18nResource.bak</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot实现RabbitMQ动态加载</title>
    <url>/SpringBoot/blogs/SpringBoot%E5%AE%9E%E7%8E%B0rabbitMQ%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>SpringBoot : 2.2.6.RELEASE<br>SpringCloud : 2021.0.5<br>RabbitMQ : 3.8.8<br>Nacos : 2.1.1</p>
<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>Spring微服务集成RabbitMQ，项目启动加载RabbitMQ连接失败导致项目无法启动，增加配置项控制RabbitMQ有条件加载。</p>
<h2><span id="实现"><span id="inline-blue">实现</span></span></h2><p>nacos上对应模块配置文件增加配置项</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.rabbitmq.enable</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>启动类注解排除RabbitMQ默认配置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(exclude = &#123;RabbitAutoConfiguration.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FfcsAdminBizApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">final</span> String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(FfcsAdminBizApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RabbitConfig增加配置自动刷新、@RabbitCondition注解</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Conditional(RabbitConfig.RabbitCondition.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitConfig</span> <span class="keyword">extends</span> <span class="title">org</span>.<span class="title">springframework</span>.<span class="title">boot</span>.<span class="title">autoconfigure</span>.<span class="title">amqp</span>.<span class="title">RabbitAutoConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String QUEUE = <span class="string">&quot;log&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   * 交换机</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXCHANGE = <span class="string">&quot;log_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   * 路由键值</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOG_ROUTING_KEY = <span class="string">&quot;log_routing&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送一个批次中消息的数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;rabbitmq.batch.size:100&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> batchSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 批量消息的最大大小;如果超过了此值，它会取代batchSize, 并导致要发送的部分批处理</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;rabbitmq.batch.bufferLimit:1024&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> bufferLimit;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 当没有新的活动添加到消息批处理时之后，超时将触发批量提交</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;rabbitmq.batch.timeOut:10000&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> timeOut;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自动创建交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Conditional(RabbitCondition.class)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DirectExchange <span class="title">directExchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DirectExchange(EXCHANGE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自动创建队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Conditional(RabbitCondition.class)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">createBatchQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(QUEUE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 自己将队列绑定到交换机，路由键使用队列名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Conditional(RabbitCondition.class)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">directBinding</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(createBatchQueue()).to(directExchange()).withQueueName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  * 使用定时任务线程池，定时从队列中拉取数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Conditional(RabbitCondition.class)</span></span><br><span class="line">    <span class="meta">@Bean(&quot;batchQueueTaskScheduler&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TaskScheduler <span class="title">batchQueueTaskScheduler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolTaskScheduler();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 批量处理rabbitTemplate</span></span><br><span class="line"><span class="comment">     * 该策略只支持一个exchange/routingKey</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Conditional(RabbitCondition.class)</span></span><br><span class="line">    <span class="meta">@Bean(&quot;batchQueueRabbitTemplate&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BatchingRabbitTemplate <span class="title">batchQueueRabbitTemplate</span><span class="params">(ConnectionFactory connectionFactory, <span class="meta">@Qualifier(&quot;batchQueueTaskScheduler&quot;)</span> TaskScheduler taskScheduler)</span> </span>&#123;</span><br><span class="line">        BatchingStrategy batchingStrategy = <span class="keyword">new</span> SimpleBatchingStrategy(batchSize, bufferLimit, timeOut);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BatchingRabbitTemplate(connectionFactory, batchingStrategy, taskScheduler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   * 配置监听容器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Conditional(RabbitCondition.class)</span></span><br><span class="line">    <span class="meta">@Bean(&quot;batchQueueRabbitListenerContainerFactory&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SimpleRabbitListenerContainerFactory <span class="title">batchQueueRabbitListenerContainerFactory</span><span class="params">(ConnectionFactory connectionFactory)</span> </span>&#123;</span><br><span class="line">        SimpleRabbitListenerContainerFactory factory = <span class="keyword">new</span> SimpleRabbitListenerContainerFactory();</span><br><span class="line">        factory.setConnectionFactory(connectionFactory);</span><br><span class="line">        <span class="comment">//配置一个BatchMessageListenerAdapter</span></span><br><span class="line">        factory.setBatchListener(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 允许创建批量消息</span></span><br><span class="line">        factory.setConsumerBatchEnabled(<span class="keyword">true</span>);</span><br><span class="line">        factory.setBatchSize(batchSize);</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitCondition</span> <span class="keyword">extends</span> <span class="title">AllNestedConditions</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RabbitCondition() &#123;</span><br><span class="line">            <span class="keyword">super</span>(ConfigurationPhase.PARSE_CONFIGURATION);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@ConditionalOnProperty(prefix = &quot;spring.rabbitmq&quot;, name = &quot;enable&quot;, havingValue = &quot;true&quot;)</span></span><br><span class="line">        <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableProperty</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>生产者：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Api(tags = &#123;&quot;日志&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogController</span> <span class="keyword">extends</span> <span class="title">BaseController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span>  LogApiService apiLogService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span>  LogLoginService loginLogService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DocumentService documentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisUtils redisUtils;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ElasticSearchConfiguration configuration;</span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">	<span class="keyword">private</span> BatchingRabbitTemplate batchQueueRabbitTemplate;</span><br><span class="line">	</span><br><span class="line">	 <span class="meta">@PostMapping(&#123;&quot;/log/api&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;保存日志信息&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ApiResponse <span class="title">save</span><span class="params">(<span class="meta">@RequestBody</span>  LogApi apiLog)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (configuration.isRabbitmqSupport()) &#123;</span><br><span class="line">            Message message = <span class="keyword">new</span> Message(JSON.toJSONString(apiLog).getBytes(), <span class="keyword">new</span> MessageProperties());</span><br><span class="line">            message.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT);</span><br><span class="line">            <span class="keyword">this</span>.batchQueueRabbitTemplate.convertAndSend(RabbitConfig.EXCHANGE, RabbitConfig.QUEUE, message);</span><br><span class="line">            <span class="keyword">return</span> success(<span class="keyword">true</span>);</span><br><span class="line">        &#125; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>消费者：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Conditional(RabbitConfig.RabbitCondition.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQReceiver</span> <span class="keyword">implements</span> <span class="title">BatchMessageListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LogApiService apiLogService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ElasticSearchConfiguration configuration;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DocumentService documentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisUtils redisUtils;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String index = <span class="string">&quot;es_log_api_&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = @QueueBinding(value = @Queue(value = RabbitConfig.QUEUE), exchange = @Exchange(RabbitConfig.EXCHANGE), key = RabbitConfig.QUEUE), containerFactory = &quot;batchQueueRabbitListenerContainerFactory&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessageBatch</span><span class="params">(List&lt;Message&gt; messages)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (CollectionUtils.isEmpty(messages)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            List&lt;LogApi&gt; LogApiList = Lists.newArrayList();</span><br><span class="line">            List&lt;EsLog&gt; esLogList = Lists.newArrayList();</span><br><span class="line">            <span class="keyword">for</span> (Message message : messages) &#123;</span><br><span class="line">                <span class="comment">// json字符串解析成对象</span></span><br><span class="line">                LogApi apiLog = JSON.parseObject(<span class="keyword">new</span> String(message.getBody()), LogApi.class);</span><br><span class="line">                <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ALL_TYPE || configuration.getStorageType() == BizConstants.LOG_API_STARAGE_DB_TYPE) &#123;</span><br><span class="line">                    LogApiList.add(apiLog);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ES_TYPE || configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ALL_TYPE) &#123;</span><br><span class="line">                    EsLog esLog = <span class="keyword">new</span> EsLog();</span><br><span class="line">                    BeanUtils.copyProperties(apiLog, esLog);</span><br><span class="line">                    esLogList.add(esLog);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">throw</span> ex;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Conditional(RabbitConfig.RabbitCondition.class) 是实现动态加载的关键点。</p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>RabbitMQ</tag>
        <tag>Nacos</tag>
      </tags>
  </entry>
  <entry>
    <title>pt-archiver工具实现MySQL数据库归档</title>
    <url>/MySQL/blogs/pt-archiver%E5%B7%A5%E5%85%B7%E5%AE%9E%E7%8E%B0MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BD%92%E6%A1%A3/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-bluept-archiverspan"><span id="inline-blue">pt-archiver</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>MySQL : 5.7<br>pt-archiver : 3.5.7</p>
<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>微服务大量请求日志积压数据库表，导致查询很慢，需要将指定一段时间的历史记录清除或者移动到其他数据库表上，减缓查询的压力。</p>
<h2><span id="实现"><span id="inline-blue">实现</span></span></h2><h3><span id="pt-archiver"><span id="inline-blue">pt-archiver</span></span></h3><p>pt-archiver是Percona-Toolkit工具集中的一个组件，是一个主要用于对MySQL表数据进行归档和清除的工具。pt-archiver在清除表数据的过程中并不会影响OLTP事务的查询性能。对于数据的归档，它可以归档到另一台服务器上的另一张表，也可归档到一个文件中，文件可以用LOAD DATA INFILE进行数据装载。</p>
<p>语法介绍：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pt-archiver --source DSN --dest DSN [OPTIONS]</span><br></pre></td></tr></table></figure>

<p>DSN选项：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">a</span><br><span class="line">归档操作是在哪个库下进行的，相当于USE操作。</span><br><span class="line">A</span><br><span class="line">指定默认字符集。</span><br><span class="line">b</span><br><span class="line">当值为true时，禁止SQL_LOG_BIN，相当于SQL_LOG_BIN = 0。</span><br><span class="line">D</span><br><span class="line">指定包含需要归档表的数据库。</span><br><span class="line">h</span><br><span class="line">指定连接的主机。</span><br><span class="line">u</span><br><span class="line">指定连接的用户。</span><br><span class="line">p</span><br><span class="line">指定连接需要的密码。</span><br><span class="line">P</span><br><span class="line">指定连接的端口。</span><br><span class="line">S</span><br><span class="line">指定连接的SOCKET文件。</span><br><span class="line">t</span><br><span class="line">指定需要归档的表。</span><br><span class="line">i</span><br><span class="line">指定需要使用的索引。</span><br></pre></td></tr></table></figure>

<p>OPTIONS选项：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--analyze</span><br><span class="line">指定工具完成数据归档后对表执行&#x27;ANALYZE TABLE&#x27;操作。指定方法如&#x27;--analyze=ds&#x27;，s代表源端表，d代表目标端表，也可以单独指定。</span><br><span class="line"></span><br><span class="line">--ask-pass</span><br><span class="line">命令行提示密码输入，保护密码安全，前提需安装模块perl-TermReadKey。</span><br><span class="line"></span><br><span class="line">--buffer</span><br><span class="line">指定缓冲区数据刷新到选项&#x27;--file&#x27;指定的文件并且在提交时刷新。</span><br><span class="line">只有当事务提交时禁用自动刷新到&#x27;--file&#x27;指定的文件和刷新文件到磁盘，这意味着文件是被操作系统块进行刷新，因此在事务进行提交之前有一些数据隐式刷新到磁盘。默认是每一行操作后进行文件刷新到磁盘。</span><br><span class="line"></span><br><span class="line">--bulk-delete</span><br><span class="line">指定单个语句删除chunk的方式来批量删除行，会隐式执行选项&#x27;--commit-each&#x27;。</span><br><span class="line">使用单个DELETE语句删除每个chunk对应的表行，通常的做法是通过主键进行逐行的删除，批量删除在速度上会有很大的提升，但如果有复杂的&#x27;WHERE&#x27;条件就可能会更慢。</span><br><span class="line"></span><br><span class="line">--[no]bulk-delete-limit</span><br><span class="line">默认值：yes</span><br><span class="line">指定添加选项&#x27;--bulk-delete&#x27;和&#x27;--limit&#x27;到进行归档的语句中。</span><br><span class="line"></span><br><span class="line">--bulk-insert</span><br><span class="line">使用LOAD DATA LOCAL INFILE的方法，通过批量插入chunk的方式来插入行(隐式指定选项&#x27;--bulk-delete&#x27;和&#x27;--commit-each&#x27;)</span><br><span class="line">而不是通过逐行单独插入的方式进行，它比单行执行INSERT语句插入的速度要快。通过隐式创建临时表来存储需要批量插入的行(chunk)，而不是直接进行批量插入操作，当临时表中完成每个chunk之后再进行统一数据加载。为了保证数据的安全性，该选项会强制使用选项&#x27;--bulk-delete&#x27;，这样能够有效保证删除是在插入完全成功之后进行的。</span><br><span class="line"></span><br><span class="line">--channel</span><br><span class="line">指定当主从复制环境是多源复制时需要进行归档哪个主库的数据，适用于多源复制中多个主库对应一个从库的情形。</span><br><span class="line"></span><br><span class="line">--charset，-A</span><br><span class="line">指定连接字符集。</span><br><span class="line"></span><br><span class="line">--[no]check-charset</span><br><span class="line">默认值：yes</span><br><span class="line">指定检查确保数据库连接时字符集和表字符集相同。</span><br><span class="line"></span><br><span class="line">--[no]check-columns</span><br><span class="line">默认值：yes</span><br><span class="line">指定检查确保选项&#x27;--source&#x27;指定的源端表和&#x27;--dest&#x27;指定的目标表具有相同的字段。</span><br><span class="line">不检查字段在表的排序和字段类型，只检查字段是否在源端表和目标表当中都存在，如果有不相同的字段差异，则工具报错退出。如果需要禁用该检查，则指定&#x27;--no-check-columns&#x27;。</span><br><span class="line"></span><br><span class="line">--check-slave-lag</span><br><span class="line">指定主从复制延迟大于选项&#x27;--max-lag&#x27;指定的值之后暂停归档操作。默认情况下，工具会检查所有的从库，但该选项只作用于指定的从库(通过DSN连接方式)。</span><br><span class="line"></span><br><span class="line">--check-interval</span><br><span class="line">默认值：1s</span><br><span class="line">如果同时指定了选项&#x27;--check-slave-lag&#x27;，则该选项指定的时间为工具发现主从复制延迟时暂停的时间。每进行操作100行时进行一次检查。</span><br><span class="line"></span><br><span class="line">--columns，-c</span><br><span class="line">指定需要归档的表字段，如有多个则用&#x27;,&#x27;(逗号)隔开。</span><br><span class="line"></span><br><span class="line">--commit-each</span><br><span class="line">指定按每次获取和归档的行数进行提交，该选项会禁用选项&#x27;--txn-size&#x27;。</span><br><span class="line">在每次获取表数据并进行归档之后，在获取下一次数据和选项&#x27;--sleep&#x27;指定的休眠时间之前，进行事务提交和刷新选项&#x27;--file&#x27;指定的文件，通过选项&#x27;--limit&#x27;控制事务的大小。</span><br><span class="line"></span><br><span class="line">--host，-h</span><br><span class="line">指定连接的数据库IP地址。</span><br><span class="line"></span><br><span class="line">--port，-P</span><br><span class="line">指定连接的数据库Port端口。</span><br><span class="line"></span><br><span class="line">--user，-u</span><br><span class="line">指定连接的数据库用户。</span><br><span class="line"></span><br><span class="line">--password，-p</span><br><span class="line">指定连接的数据库用户密码。</span><br><span class="line"></span><br><span class="line">--socket，-S</span><br><span class="line">指定使用SOCKET文件连接。</span><br><span class="line"></span><br><span class="line">--databases，-d</span><br><span class="line">指定连接的数据库</span><br><span class="line"></span><br><span class="line">--source</span><br><span class="line">指定需要进行归档操作的表，该选项是必须指定的选项，使用DSN方式表示。</span><br><span class="line"></span><br><span class="line">--dest</span><br><span class="line">指定要归档到的目标端表，使用DSN方式表示。</span><br><span class="line">如果该选项没有指定的话，则默认与选项&#x27;--source&#x27;指定源端表为相同表。</span><br><span class="line"></span><br><span class="line">--where</span><br><span class="line">指定通过WHERE条件语句指定需要归档的数据，该选项是必须指定的选项。不需要加上&#x27;WHERE&#x27;关键字，如果确实不需要WHERE条件进行限制，则指定&#x27;--where 1=1&#x27;。</span><br><span class="line"></span><br><span class="line">--file</span><br><span class="line">指定表数据需要归档到的文件。使用类似MySQL DATE_FORMAT()格式化命名方式。</span><br><span class="line">文件内容与MySQL中SELECT INTO OUTFILE语句使用相同的格式，文件命名选项如下所示：</span><br><span class="line">&#x27;</span><br><span class="line"><span class="meta">%</span><span class="bash">Y：年，4位数(Year, numeric, four digits)</span>     	</span><br><span class="line"><span class="meta">%</span><span class="bash">m：月，2位数(Month, numeric (01..12))</span>      	</span><br><span class="line"><span class="meta">%</span><span class="bash">d：日，2位数(Day of the month, numeric (01..31))</span> 	</span><br><span class="line"><span class="meta">%</span><span class="bash">H：小时(Hour (00..23))</span>              	</span><br><span class="line"><span class="meta">%</span><span class="bash">i：分钟(Minutes, numeric (00..59))</span>        	</span><br><span class="line"><span class="meta">%</span><span class="bash">s：秒(Seconds (00..59))</span>             </span><br><span class="line"><span class="meta">%</span><span class="bash">D：数据库名(Database name)</span>            </span><br><span class="line"><span class="meta">%</span><span class="bash">t：表名(Table name)</span>               	</span><br><span class="line"></span><br><span class="line">例如：--file &#x27;/var/log/archive/%Y-%m-%d-%D.%t&#x27;</span><br><span class="line">&#x27;</span><br><span class="line"></span><br><span class="line">--output-format</span><br><span class="line">指定选项&#x27;--file&#x27;文件内容输出的格式。</span><br><span class="line">默认不指定该选项是以制表符进行字段的分隔符，如果指定该选项，则使用&#x27;,&#x27;(逗号)作为字段分隔符，使用&#x27;&quot;&#x27;(双引号)将字段括起。用法示例：&#x27;--output-format=dump&#x27;。</span><br><span class="line"></span><br><span class="line">--for-update</span><br><span class="line">指定为每次归档执行的SELECT语句添加FOR UPDATE子句。</span><br><span class="line"></span><br><span class="line">--share-lock</span><br><span class="line">指定为每次归档执行的SELECT语句添加LOCK IN SHARE MODE子句。</span><br><span class="line"></span><br><span class="line">--header</span><br><span class="line">指定在文件中第一行写入字段名称作为标题。</span><br><span class="line"></span><br><span class="line">--ignore</span><br><span class="line">指定为INSERT语句添加IGNORE选项。</span><br><span class="line"></span><br><span class="line">--limit</span><br><span class="line">默认值：1</span><br><span class="line">指定每条语句获取表和归档表的行数。</span><br><span class="line"></span><br><span class="line">--local</span><br><span class="line">指定不将OPTIMIZE和ANALYZE语句写入binlog。</span><br><span class="line"></span><br><span class="line">--max-lag</span><br><span class="line">默认值：1s</span><br><span class="line">指定允许主从复制延迟时长的最大值，单位秒。如果在每次获取行数据之后主从延迟超过指定的值，则归档操作将暂停执行，暂停休眠时间为选项&#x27;--check-interval&#x27;指定的值。待休眠时间结束之后再次检查主从延迟时长，检查方法是通过从库查询的&#x27;Seconds_Behind_Master&#x27;值来确定。如果主从复制延迟一直大于该参数指定值或者从库停止复制，则操作将一直等待直到从库重新启动并且延迟小于该参数指定值。</span><br><span class="line"></span><br><span class="line">--no-delete</span><br><span class="line">指定不删除已被归档的表数据。</span><br><span class="line"></span><br><span class="line">--optimize</span><br><span class="line">指定工具完成数据归档后对表执行&#x27;OPTIMIZE TABLE&#x27;操作。指定方法如&#x27;--analyze=ds&#x27;，s代表源端表，d代表目标端表，也可以单独指定。</span><br><span class="line"></span><br><span class="line">--primary-key-only</span><br><span class="line">指定只归档主键字段，是选项&#x27;--columns=主键&#x27;的简写。</span><br><span class="line">如果工具归档的操作是进行DELETE清除时最有效，因为只需读取主键一个字段而无需读取行所有字段。</span><br><span class="line"></span><br><span class="line">--progress</span><br><span class="line">指定每多少行打印进度信息，打印当前时间，已用时间以及多少行进行归档。</span><br><span class="line"></span><br><span class="line">--purge</span><br><span class="line">指定执行的清除操作而不是归档操作。允许忽略选项&#x27;--dest&#x27;和&#x27;--file&#x27;进行操作，如果只是清除操作可以结合选项&#x27;--primary-key-only&#x27;会更高效。</span><br><span class="line"></span><br><span class="line">--quiet，-q</span><br><span class="line">指定工具静默执行，不输出任何的执行信息。</span><br><span class="line"></span><br><span class="line">--replace</span><br><span class="line">指定写入选项&#x27;--dest&#x27;指定目标端表时改写INSERT语句为REPLACE语句。</span><br><span class="line"></span><br><span class="line">--retries</span><br><span class="line">默认值：1</span><br><span class="line">指定归档操作遇到死锁或超时的重试次数。当重试次数超过该选项指定的值时，工具将报错退出。</span><br><span class="line"></span><br><span class="line">--run-time</span><br><span class="line">指定工具归档操作在退出之前需要运行的时间。允许的时间后缀名为s=秒，m=分，h=小时，d=天，如果没指定，默认为s。</span><br><span class="line"></span><br><span class="line">--[no]safe-auto-increment</span><br><span class="line">默认值：yes</span><br><span class="line">指定不使用自增列(AUTO_INCREMENT)最大值对应的行进行归档。</span><br><span class="line">该选项在进行归档清除时会额外添加一条WHERE子句以防止工具删除单列升序字段具有的具有AUTO_INCREMENT属性最大值的数据行，为了在数据库重启之后还能使用到AUTO_INCREMENT对应的值，但这会引起无法归档或清除字段对应最大值的行。</span><br><span class="line"></span><br><span class="line">--set-vars</span><br><span class="line">默认：</span><br><span class="line">    wait_timeout=10000</span><br><span class="line">    innodb_lock_wait_timeout=1</span><br><span class="line">    lock_wait_timeout=60</span><br><span class="line">工具归档时指定参数值，如有多个用&#x27;,&#x27;(逗号)分隔。如&#x27;--set-vars=wait_timeout=5000&#x27;。</span><br><span class="line"></span><br><span class="line">--skip-foreign-key-checks</span><br><span class="line">指定使用语句SET FOREIGN_KEY_CHECKS = 0禁用外键检查。</span><br><span class="line"></span><br><span class="line">--sleep</span><br><span class="line">指定工具在通过SELECT语句获取归档数据需要休眠的时间，默认值是不进行休眠。在休眠之前事务并不会提交，并且选项&#x27;--file&#x27;指定的文件不会被刷新。如果指定选项&#x27;--commit-each&#x27;，则在休眠之前会进行事务提交和文件刷新。</span><br><span class="line"></span><br><span class="line">--statistics</span><br><span class="line">指定工具收集并打印操作的时间统计信息。</span><br><span class="line">统计信息示例如下：</span><br><span class="line">&#x27;</span><br><span class="line">Started at 2008-07-18T07:18:53, ended at 2008-07-18T07:18:53</span><br><span class="line">Source: D=db,t=table</span><br><span class="line">SELECT 4</span><br><span class="line">INSERT 4</span><br><span class="line">DELETE 4</span><br><span class="line">Action         Count       Time        Pct</span><br><span class="line">commit            10     0.1079      88.27</span><br><span class="line">select             5     0.0047       3.87</span><br><span class="line">deleting           4     0.0028       2.29</span><br><span class="line">inserting          4     0.0028       2.28</span><br><span class="line">other              0     0.0040       3.29</span><br><span class="line">&#x27;</span><br><span class="line"></span><br><span class="line">--txn-size</span><br><span class="line">默认：1</span><br><span class="line">指定每个事务处理的行数。如果是0则禁用事务功能。</span><br><span class="line"></span><br><span class="line">--version</span><br><span class="line">显示工具的版本并退出。</span><br><span class="line"></span><br><span class="line">--[no]version-check</span><br><span class="line">默认值：yes</span><br><span class="line">检查Percona Toolkit、MySQL和其他程序的最新版本。</span><br><span class="line"></span><br><span class="line">--why-quit</span><br><span class="line">指定工具打印当非因完成归档行数退出的原因。</span><br><span class="line">在执行一个自动归档任务时该选项与选项&#x27;--run-time&#x27;一起使用非常方便，这样可以确定归档任务是否在指定的时间内完成。如果同时指定了选项&#x27;--statistics&#x27;，则会打印所有退出的原因。</span><br></pre></td></tr></table></figure>

<p>archive.sh调用示例：<br>将主机10.9.216.14上数据库lovehome_20240223表sys_log_api记录一个月之前的表记录归档到sys_log_api_his。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">source /etc/profile</span><br><span class="line">logDir=/home/mysql/log</span><br><span class="line">DATE=`date +%Y%m%d`</span><br><span class="line"><span class="meta">#</span><span class="bash"> Get the max id from the table</span></span><br><span class="line">max_id1=$(mysql -u root -p&#x27;coship&#x27; -h&#x27;10.9.216.14&#x27; -N -e &quot;SELECT MAX(id) FROM lovehome_20240223.sys_log_api WHERE create_time &lt; NOW() - INTERVAL 30 DAY&quot;)</span><br><span class="line">echo &#x27;sys_log_api&#x27;_$max_id1 &gt;&gt; $logDir/archivelog_$&#123;DATE&#125;.log</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Use pt-archiver to move the data</span></span><br><span class="line">pt-archiver --source u=root,p=&#x27;coship&#x27;,h=10.9.216.14,S=/tmp/mysql.sock,D=lovehome_20240223,t=sys_log_api,b=true --dest u=root,p=&#x27;coship&#x27;,h=10.9.216.14,S=/tmp/mysql.sock,D=lovehome_20240223,t=sys_log_api_his,b=true  --where &quot;id &lt; $max_id1&quot; --progress 10000 --no-check-charset --statistics --buffer --limit=10000 --commit-each --no-check-charset --share-lock </span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>pt-archiver</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot集成RabbitMQ实现日志批量入库</title>
    <url>/SpringBoot/blogs/SpringBoot%E9%9B%86%E6%88%90RabbitMQ%E5%AE%9E%E7%8E%B0%E6%97%A5%E5%BF%97%E6%89%B9%E9%87%8F%E5%85%A5%E5%BA%93/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>SpringCloud : 2021.0.5<br>SpringBoot : 2.2.6.RELEASE<br>Spring : 5.2.5.RELEASE<br>RabbitMQ : 3.8.8<br>Java : 1.8</p>
<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>微服务在压力测试情况下产生大量接口请求日志导致日志记录模块并发过高，MySQL连接占用过高，采用RabbitMQ缓解日志并发写入压力，批量提交写入日志请求到MYSQL。</p>
<h2><span id="实现"><span id="inline-blue">实现</span></span></h2><p>Maven添加RabbitMQ依赖，不需要指定版本，默认是保持和SpringBoot版本一致</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>添加RabbitMQ相应配置</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">spring.rabbitmq.host</span>=<span class="string">10.9.216.12</span></span><br><span class="line"><span class="meta">spring.rabbitmq.port</span>=<span class="string">5672</span></span><br><span class="line"><span class="meta">spring.rabbitmq.username</span>=<span class="string">admin</span></span><br><span class="line"><span class="meta">spring.rabbitmq.password</span>=<span class="string">admin</span></span><br><span class="line"><span class="comment"># 默认true，代表消费报错会重新回到队列。false则不会回到队列</span></span><br><span class="line"><span class="meta">spring.rabbitmq.listener.simple.default-requeue-rejected</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># 默认是auto 自动确定是否收到消息，如果消费失败则会一直进入队列消费</span></span><br><span class="line"><span class="comment"># 改为manual手动调用change.basicAck确认</span></span><br><span class="line"><span class="comment"># 改为none 若没收到或者消费成功都不会回到队列</span></span><br><span class="line"><span class="meta">spring.rabbitmq.listener.direct.acknowledge-mode</span>=<span class="string">none</span></span><br><span class="line"><span class="comment">#可以确保消息在未被队列接收时返回</span></span><br><span class="line"><span class="meta">spring.rabbitmq.publisher-returns</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#发送一个批次中消息的数量,默认100</span></span><br><span class="line"><span class="meta">rabbitmq.batch.size</span>=<span class="string">100</span></span><br><span class="line"><span class="comment">#批量消息的最大大小;如果超过了此值，它会取代batchSize, 并导致要发送的部分批处理,默认4M</span></span><br><span class="line"><span class="meta">rabbitmq.batch.bufferLimit</span>=<span class="string">1048576</span></span><br><span class="line"><span class="comment">#当没有新的活动添加到消息批处理时之后，将发送部分批处理的时间,默认10s</span></span><br><span class="line"><span class="meta">rabbitmq.batch.timeOut</span>=<span class="string">10000</span></span><br><span class="line"><span class="comment">#rabbitMQ支持,true:日志记录通过rabbitMQ进行处理 false: 日志直接写入Elasticsearch或者MYSQL</span></span><br><span class="line"><span class="meta">parameter.rabbitmqSupport</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#日志存储类型:0(数据库),1(es),2(两者都存)</span></span><br><span class="line"><span class="meta">parameter.storageType</span>=<span class="string">1</span></span><br><span class="line"><span class="comment">#日志存储类型:0(数据库),1(es)</span></span><br><span class="line"><span class="meta">parameter.selectType</span>=<span class="string">1</span></span><br></pre></td></tr></table></figure>

<p>RabbitMQ配置类,定义queue、exchange绑定关系</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ffcs.platform.adminbiz.rabbitmq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Binding;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.BindingBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.DirectExchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Queue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.batch.BatchingStrategy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.batch.SimpleBatchingStrategy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.config.SimpleRabbitListenerContainerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.connection.ConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.BatchingRabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.context.config.annotation.RefreshScope;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.TaskScheduler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String QUEUE = <span class="string">&quot;log&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   * 交换机</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EXCHANGE = <span class="string">&quot;log_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   * 路由键值</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOG_ROUTING_KEY = <span class="string">&quot;log_routing&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送一个批次中消息的数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;rabbitmq.batch.size:100&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> batchSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 批量消息的最大大小;如果超过了此值，它会取代batchSize, 并导致要发送的部分批处理</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;rabbitmq.batch.bufferLimit:1024&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> bufferLimit;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 当没有新的活动添加到消息批处理时之后，超时将触发批量提交</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;rabbitmq.batch.timeOut:10000&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> timeOut;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自动创建交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DirectExchange <span class="title">directExchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DirectExchange(EXCHANGE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自动创建队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Queue <span class="title">createBatchQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Queue(QUEUE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 自己将队列绑定到交换机，路由键使用队列名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Binding <span class="title">directBinding</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(createBatchQueue()).to(directExchange()).withQueueName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  * 使用定时任务线程池，定时从队列中拉取数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean(&quot;batchQueueTaskScheduler&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TaskScheduler <span class="title">batchQueueTaskScheduler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ThreadPoolTaskScheduler();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     * 批量处理rabbitTemplate</span></span><br><span class="line"><span class="comment">     * 该策略只支持一个exchange/routingKey</span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean(&quot;batchQueueRabbitTemplate&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BatchingRabbitTemplate <span class="title">batchQueueRabbitTemplate</span><span class="params">(ConnectionFactory connectionFactory, <span class="meta">@Qualifier(&quot;batchQueueTaskScheduler&quot;)</span> TaskScheduler taskScheduler)</span> </span>&#123;</span><br><span class="line">        BatchingStrategy batchingStrategy = <span class="keyword">new</span> SimpleBatchingStrategy(batchSize, bufferLimit, timeOut);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BatchingRabbitTemplate(connectionFactory, batchingStrategy, taskScheduler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *   * 配置监听容器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean(&quot;batchQueueRabbitListenerContainerFactory&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SimpleRabbitListenerContainerFactory <span class="title">batchQueueRabbitListenerContainerFactory</span><span class="params">(ConnectionFactory connectionFactory)</span> </span>&#123;</span><br><span class="line">        SimpleRabbitListenerContainerFactory factory = <span class="keyword">new</span> SimpleRabbitListenerContainerFactory();</span><br><span class="line">        factory.setConnectionFactory(connectionFactory);</span><br><span class="line">        <span class="comment">//配置一个BatchMessageListenerAdapter</span></span><br><span class="line">        factory.setBatchListener(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 允许创建批量消息</span></span><br><span class="line">        factory.setConsumerBatchEnabled(<span class="keyword">true</span>);</span><br><span class="line">        factory.setBatchSize(batchSize);</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>消息生产者</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Api(tags = &#123;&quot;日志&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogController</span> <span class="keyword">extends</span> <span class="title">BaseController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span>  LogApiService apiLogService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span>  LogLoginService loginLogService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DocumentService documentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisUtils redisUtils;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ElasticSearchConfiguration configuration;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BatchingRabbitTemplate batchQueueRabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String index = <span class="string">&quot;es_log_api_&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@PostMapping(&#123;&quot;/log/api&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;保存日志信息&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ApiResponse <span class="title">save</span><span class="params">(<span class="meta">@RequestBody</span>  LogApi apiLog)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (configuration.isRabbitmqSupport()) &#123;</span><br><span class="line">            Message message = <span class="keyword">new</span> Message(JSON.toJSONString(apiLog).getBytes(), <span class="keyword">new</span> MessageProperties());</span><br><span class="line">            message.getMessageProperties().setDeliveryMode(MessageDeliveryMode.PERSISTENT);</span><br><span class="line">            <span class="keyword">this</span>.batchQueueRabbitTemplate.convertAndSend(RabbitConfig.EXCHANGE, RabbitConfig.QUEUE, message);</span><br><span class="line">            <span class="keyword">return</span> success(<span class="keyword">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            EsLog esLog = <span class="keyword">new</span> EsLog();</span><br><span class="line">            BeanUtils.copyProperties(apiLog, esLog);</span><br><span class="line">            <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ES_TYPE) &#123;</span><br><span class="line">                <span class="comment">//判断索引是否存在</span></span><br><span class="line">                <span class="keyword">boolean</span> esResult = insertEs(esLog);</span><br><span class="line">                <span class="keyword">if</span> (esResult) &#123;</span><br><span class="line">                    <span class="keyword">return</span> success(<span class="string">&quot;日志写入Elasticsearch成功！&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> fail(<span class="string">&quot;日志写入Elasticsearch失败！&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ALL_TYPE) &#123;</span><br><span class="line">                <span class="comment">//插入ES，数据库</span></span><br><span class="line">                <span class="keyword">boolean</span> dbResult = apiLogService.save(apiLog);</span><br><span class="line">                <span class="keyword">boolean</span> esResult = insertEs(esLog);</span><br><span class="line">                <span class="keyword">if</span> (dbResult &amp;&amp; esResult) &#123;</span><br><span class="line">                    <span class="keyword">return</span> success(<span class="string">&quot;日志写入数据库,Elasticsearch成功&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!dbResult &amp;&amp; esResult) &#123;</span><br><span class="line">                    <span class="keyword">return</span> fail(<span class="string">&quot;日志写入数据库失败!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!esResult &amp;&amp; dbResult) &#123;</span><br><span class="line">                    <span class="keyword">return</span> fail(<span class="string">&quot;日志写入Elasticsearch失败!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> fail(<span class="string">&quot;日志写入数据库、Elasticsearch均失败！&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//插入数据库</span></span><br><span class="line">                <span class="keyword">boolean</span> dbResult = apiLogService.save(apiLog);</span><br><span class="line">                <span class="keyword">if</span> (dbResult) &#123;</span><br><span class="line">                    <span class="keyword">return</span> success(<span class="string">&quot;日志写入数据库成功!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> fail(<span class="string">&quot;日志写入数据库失败!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>消息消费者</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ffcs.platform.adminbiz.rabbitmq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch._types.mapping.DateProperty;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch._types.mapping.IntegerNumberProperty;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch._types.mapping.LongNumberProperty;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch._types.mapping.Property;</span><br><span class="line"><span class="keyword">import</span> co.elastic.clients.elasticsearch._types.mapping.TextProperty;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.ffcs.platform.adminapi.entity.log.LogApi;</span><br><span class="line"><span class="keyword">import</span> com.ffcs.platform.adminbiz.bean.EsLog;</span><br><span class="line"><span class="keyword">import</span> com.ffcs.platform.adminbiz.config.ElasticSearchConfiguration;</span><br><span class="line"><span class="keyword">import</span> com.ffcs.platform.adminbiz.service.elasticsearch.DocumentService;</span><br><span class="line"><span class="keyword">import</span> com.ffcs.platform.adminbiz.service.log.LogApiService;</span><br><span class="line"><span class="keyword">import</span> com.ffcs.platform.common.base.constants.BizConstants;</span><br><span class="line"><span class="keyword">import</span> com.ffcs.platform.common.config.redis.RedisUtils;</span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Lists;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.utils.DateUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.BatchMessageListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.Exchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.Queue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.QueueBinding;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RabbitMQReceiver</span> <span class="keyword">implements</span> <span class="title">BatchMessageListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LogApiService apiLogService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ElasticSearchConfiguration configuration;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DocumentService documentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisUtils redisUtils;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String index = <span class="string">&quot;es_log_api_&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = @QueueBinding(value = @Queue(value = RabbitConfig.QUEUE), exchange = @Exchange(RabbitConfig.EXCHANGE), key = RabbitConfig.QUEUE), containerFactory = &quot;batchQueueRabbitListenerContainerFactory&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMessageBatch</span><span class="params">(List&lt;Message&gt; messages)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (CollectionUtils.isEmpty(messages)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            List&lt;LogApi&gt; LogApiList = Lists.newArrayList();</span><br><span class="line">            List&lt;EsLog&gt; esLogList = Lists.newArrayList();</span><br><span class="line">            <span class="keyword">for</span> (Message message : messages) &#123;</span><br><span class="line">                <span class="comment">// json字符串解析成对象</span></span><br><span class="line">                LogApi apiLog = JSON.parseObject(<span class="keyword">new</span> String(message.getBody()), LogApi.class);</span><br><span class="line">                <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ALL_TYPE || configuration.getStorageType() == BizConstants.LOG_API_STARAGE_DB_TYPE) &#123;</span><br><span class="line">                    LogApiList.add(apiLog);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ES_TYPE || configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ALL_TYPE) &#123;</span><br><span class="line">                    EsLog esLog = <span class="keyword">new</span> EsLog();</span><br><span class="line">                    BeanUtils.copyProperties(apiLog, esLog);</span><br><span class="line">                    esLogList.add(esLog);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ES_TYPE) &#123;</span><br><span class="line">                <span class="comment">//判断索引是否存在</span></span><br><span class="line">                <span class="keyword">boolean</span> esResult = bulkInsertEs(esLogList);</span><br><span class="line">                <span class="keyword">if</span> (esResult) &#123;</span><br><span class="line">                    log.info(<span class="string">&quot;日志写入Elasticsearch成功!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;日志写入Elasticsearch失败!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (configuration.getStorageType() == BizConstants.LOG_API_STARAGE_ALL_TYPE) &#123;</span><br><span class="line">                <span class="comment">//插入ES，数据库</span></span><br><span class="line">                <span class="keyword">int</span> dbResult = apiLogService.saveBatchList(LogApiList);</span><br><span class="line">                <span class="keyword">boolean</span> esResult = bulkInsertEs(esLogList);</span><br><span class="line">                <span class="keyword">if</span> (dbResult &gt; <span class="number">0</span> &amp;&amp; esResult) &#123;</span><br><span class="line">                    log.info(<span class="string">&quot;日志写入数据库成功!&quot;</span>);</span><br><span class="line">                    log.info(<span class="string">&quot;日志写入Elasticsearch成功!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!(dbResult &gt; <span class="number">0</span>) &amp;&amp; esResult) &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;日志写入数据库失败!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!esResult &amp;&amp; (dbResult &gt; <span class="number">0</span>)) &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;日志写入Elasticsearch失败!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;日志写入数据库、Elasticsearch均失败!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//插入数据库</span></span><br><span class="line">                <span class="keyword">int</span> dbResult = apiLogService.saveBatchList(LogApiList);</span><br><span class="line">                <span class="keyword">if</span> (dbResult &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    log.info(<span class="string">&quot;日志写入数据库成功!&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;日志写入数据库失败!&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">throw</span> ex;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">bulkInsertEs</span><span class="params">(List&lt;EsLog&gt; dataList)</span> </span>&#123;</span><br><span class="line">        String strDate = DateUtils.formatDate(<span class="keyword">new</span> Date(), <span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        String indexName = index + strDate;</span><br><span class="line">        <span class="keyword">boolean</span> hasIndex = documentService.hasIndex(indexName);</span><br><span class="line">        <span class="keyword">if</span> (!hasIndex) &#123;</span><br><span class="line">            <span class="comment">//设置key防止并发</span></span><br><span class="line">            redisUtils.set(<span class="string">&quot;indexHistory&quot;</span>, indexName, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (redisUtils.hasKey(<span class="string">&quot;indexHistory&quot;</span>)) &#123;</span><br><span class="line"></span><br><span class="line">                Map&lt;String, Property&gt; mapping = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                mapping.put(<span class="string">&quot;id&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> LongNumberProperty.Builder().index(<span class="keyword">true</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;url&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">true</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;method&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">true</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;params&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">true</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> DateProperty.Builder().index(<span class="keyword">true</span>).format(<span class="string">&quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot;</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;times&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> LongNumberProperty.Builder().index(<span class="keyword">true</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;creator&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">true</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;ip&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">false</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;address&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">false</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;description&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">true</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;status&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> IntegerNumberProperty.Builder().index(<span class="keyword">false</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;errorLog&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">false</span>).build()));</span><br><span class="line">                mapping.put(<span class="string">&quot;createTimeStr&quot;</span>, <span class="keyword">new</span> Property(<span class="keyword">new</span> TextProperty.Builder().index(<span class="keyword">false</span>).build()));</span><br><span class="line"></span><br><span class="line">                documentService.createIndexMap(indexName, mapping);</span><br><span class="line">                redisUtils.delete(<span class="string">&quot;indexHistory&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span> flag = documentService.bulkInsertDocument(indexName, dataList);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/RabbitMQ/RabbitMQ_20240315_001.png" alt="RabbitMQ记录日志"></p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>RabbitMQ</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>微服务模块引入Redisson导致@cacheable失效解决办法</title>
    <url>/SpringCloud/blogs/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9D%97%E5%BC%95%E5%85%A5redisson%E5%AF%BC%E8%87%B4@cacheable%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>SpringCloud : 2021.0.5<br>SpringBoot : 2.2.6.RELEASE<br>Spring : 5.2.5.RELEASE<br>redisson : 3.12.5<br>Java : 1.8<br>MySQL : 5.7</p>
<h2><span id="现象"><span id="inline-blue">现象</span></span></h2><p>微服务引入redisson模块依赖之后发现启动出现Cannot find cache named RedisClientCache</p>
<h2><span id="原因"><span id="inline-blue">原因</span></span></h2><p>报错部分代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Cacheable(value = &#123; &quot;RedisClientCache&quot; &#125;, unless = &quot;#result == null&quot;, key = &quot;T(com.ffcs.platform.common.base.constants.GlobalsConstants).CLIENT_DETAILS_KEY.concat(T(String).valueOf(#clientId))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OauthClientDetails <span class="title">findOauthClientDetailsByClientId</span><span class="params">(String clientId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> oauthClientDetailsDao.getOauthClientDetailsByClientId(clientId);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>在未添加redisson之前，启动没有问题，怀疑是因为redisson和@Cacheable冲突导致缓存对象RedisClientCache未创建，查询了之后发现确实是因为redisson的影响导致，参考如下<br><a href="https://dandelioncloud.cn/article/details/1517352520602173442">https://dandelioncloud.cn/article/details/1517352520602173442</a></p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>模块对应启动配置文件增加配置项如下:</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.cache.type</span>=<span class="string">redis   </span></span><br><span class="line"><span class="meta">spring.cache.cache-names</span>=<span class="string">RedisClientCache</span></span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>SpringCloud</tag>
        <tag>Redisson</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL在线清理大表数据方法</title>
    <url>/Linux/blogs/MySQL%E5%9C%A8%E7%BA%BF%E6%B8%85%E7%90%86%E5%A4%A7%E8%A1%A8%E6%95%B0%E6%8D%AE%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Linux : CentOS Linux release 7.6.1810 (Core)<br>MySQL : 5.7</p>
<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>现网模块在运行一段时间之后发现产生大量业务日志，占用系统硬盘空间，需要在线将历史数据清除，只保留1年的记录</p>
<h2><span id="实现"><span id="inline-blue">实现</span></span></h2><p>按日期统计查询t_sys_log表数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> DATE_FORMAT(t.createTime,&quot;%Y-%m-%d&quot;) <span class="type">date</span>,<span class="built_in">count</span>(<span class="operator">*</span>) num <span class="keyword">from</span> t_sys_log t</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> DATE_FORMAT(t.createTime,&quot;%Y-%m-%d&quot;)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> num</span><br><span class="line"><span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>创建一张和原始表一样结构的新表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_sys_log_new` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">13</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">  `moduleName` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;模块名称&#x27;</span>,</span><br><span class="line">  `moduleType` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;模块类型&#x27;</span>,</span><br><span class="line">  `action` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;操作类型&#x27;</span>,</span><br><span class="line">  `operatorType` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;操作员类型&#x27;</span>,</span><br><span class="line">  `operatorName` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;操作员名称&#x27;</span>,</span><br><span class="line">  `operatorId` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;操作员ID&#x27;</span>,</span><br><span class="line">  `operatorIp` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;操作员IP&#x27;</span>,</span><br><span class="line">  `logText` longtext COMMENT <span class="string">&#x27;日志信息&#x27;</span>,</span><br><span class="line">  `createTime` <span class="type">timestamp</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> UPDATE <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  KEY `index_sys_log_moduleType` (`moduleType`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  KEY `index_sys_log_action` (`action`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  KEY `index_sys_log_operatorName` (`operatorName`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  KEY `index_sys_log_createTime` (`createTime`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">1</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;日志信息表&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>将2023年的业务日志记录暂存到t_sys_log_new</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">replace <span class="keyword">into</span> t_sys_log_new</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_sys_log t</span><br><span class="line"><span class="keyword">where</span> t.createTime <span class="operator">&gt;=</span>&quot;2023-01-01 00:00:00&quot;;</span><br></pre></td></tr></table></figure>

<p>清空原始表<br>删除原始表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> t_sys_log;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t_sys_log;</span><br></pre></td></tr></table></figure>

<p>将新表重命名为原始表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">rename <span class="keyword">table</span> t_sys_log_new <span class="keyword">to</span> t_sys_log;</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>分析curl命令请求耗时</title>
    <url>/Linux/blogs/%E5%88%86%E6%9E%90curl%E5%91%BD%E4%BB%A4%E8%AF%B7%E6%B1%82%E8%80%97%E6%97%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Linux : CentOS Linux release 7.6.1810 (Core) </p>
<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>项目部署Linux服务器之后，接口涉及第三方请求耗时达到3秒左右，需要进一步分析耗时发生在那个阶段</p>
<h2><span id="实现"><span id="inline-blue">实现</span></span></h2><p>curl命令统计各阶段耗时<br>在当前调用curl命令路径下新建一个文件curl-format.txt，文件内部添加以下内容</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">time_namelookup:  %&#123;time_namelookup&#125;s\n</span><br><span class="line">        time_connect:  %&#123;time_connect&#125;s\n</span><br><span class="line">     time_appconnect:  %&#123;time_appconnect&#125;s\n</span><br><span class="line">    time_pretransfer:  %&#123;time_pretransfer&#125;s\n</span><br><span class="line">       time_redirect:  %&#123;time_redirect&#125;s\n</span><br><span class="line">  time_starttransfer:  %&#123;time_starttransfer&#125;s\n</span><br><span class="line">                     ----------\n</span><br><span class="line">          time_total:  %&#123;time_total&#125;s\n</span><br></pre></td></tr></table></figure>

<p>执行curl命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -w &quot;@curl-format.txt&quot; -o NUL -s &quot;http://10.9.216.12:9001/dev/appapi/tvBox/api/queryBindUsers&quot;</span><br></pre></td></tr></table></figure>
<p>参数说明：<br>-w “@curl-format.txt” 通知cURL使用格式化的输出文件<br>-o /dev/null 将请求的输出重定向到/dev/null<br>-s 通知cURL不显示进度条<br>“<a href="http://10.9.216.12:9001/dev/appapi/tvBox/api/queryBindUsers&quot;">http://10.9.216.12:9001/dev/appapi/tvBox/api/queryBindUsers&quot;</a> 是我们请求的URL，请使用引号包围（尤其当你的URL包含&amp;查询字符串）</p>
<p>调用结果分析输出</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> time_namelookup: 0.000</span><br><span class="line">      time_connect: 0.000</span><br><span class="line">   time_appconnect: 0.000</span><br><span class="line">     time_redirect: 0.000</span><br><span class="line">  time_pretransfer: 0.001</span><br><span class="line">time_starttransfer: 0.049</span><br><span class="line">                    ----------</span><br><span class="line">time_total: 0.049</span><br></pre></td></tr></table></figure>
<p>输出内容各项释义</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">time_namelookup：DNS 域名解析需要的时间</span><br><span class="line">time_connect：TCP 连接建立的时间，就是三次握手的时间</span><br><span class="line">time_appconnect：SSL/SSH等上层协议建立连接的时间，比如 connect/handshake 的时间</span><br><span class="line">time_pretransfer：从请求开始到响应开始传输的时间</span><br><span class="line">time_starttransfer：从请求开始到第一个字节将要传输的时间</span><br><span class="line">time_total：这次请求花费的全部时间</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Curl</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx基于特定访问路径的location匹配</title>
    <url>/Nginx/blogs/Nginx%E5%9F%BA%E4%BA%8E%E7%89%B9%E5%AE%9A%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%E7%9A%84location%E5%8C%B9%E9%85%8D/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-blue%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E6%8C%87%E4%BB%A4root%E5%92%8Calias%E7%9A%84%E5%B7%AE%E5%BC%82span"><span id="inline-blue">文件访问指令root和alias的差异</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>Linux : CentOS Linux release 7.6.1810 (Core)<br>Nginx : nginx/1.18.0 </p>
<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>项目最近实现了”一键置灰”功能，通过在原始接口下发的图片访问路径增加一层路径实现切换到自定义图片访问地址。</p>
<p>接口下发图片地址：<br>图片灰色地址：<a href="http://10.9.216.103:8098/grey/oms-pic/special/common/048/10033.png">http://10.9.216.103:8098/grey/oms-pic/special/common/048/10033.png</a><br>图片彩色地址：<a href="http://10.9.216.103:8098/oms-pic/special/common/048/10033.png">http://10.9.216.103:8098/oms-pic/special/common/048/10033.png</a></p>
<p>灰色主题下本地图片访问路径：/home/nanjing_oms/grey/oms-pic/special/common/048/10033.png<br>彩色主题下本地图片访问路径：/home/nanjing_oms/oms-pic/special/common/048/10033.png</p>
<p>灰色主题下访问路径在oms-pic前面多了/grey/路径。</p>
<h2><span id="实现"><span id="inline-blue">实现</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       8098;</span><br><span class="line">        server_name  10.9.216.104;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line">        # access_log off;</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 访问根路径匹配/grey的情况下访问/home/nanjing_oms/grey/oms-pic</span></span><br><span class="line">        location ^~ /grey &#123;</span><br><span class="line">            #expires 3d;</span><br><span class="line">			autoindex on;</span><br><span class="line">            root /home/nanjing_oms/;</span><br><span class="line">            #proxy_store on;</span><br><span class="line">            #proxy_store_access user:rw group:rw all:rw;</span><br><span class="line">            #proxy_temp_path ./proxy_temp;</span><br><span class="line">            if ( !-e $request_filename)  &#123;</span><br><span class="line">                 #proxy_pass http://10.9.216.103:8060$uri;</span><br><span class="line">            &#125;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 访问根路径匹配/oms-pic的情况下访问/home/nanjing_oms/oms-pic</span></span><br><span class="line">		location ^~ /oms-pic &#123;</span><br><span class="line">            #expires 3d;</span><br><span class="line">			autoindex on;</span><br><span class="line">            root /home/nanjing_oms/;</span><br><span class="line">            #proxy_store on;</span><br><span class="line">            #proxy_store_access user:rw group:rw all:rw;</span><br><span class="line">            #proxy_temp_path ./proxy_temp;</span><br><span class="line">            if ( !-e $request_filename)  &#123;</span><br><span class="line">                 #proxy_pass http://10.9.216.103:8060$uri;</span><br><span class="line">            &#125;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;   </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2><span id="文件访问指令root和alias的差异"><span id="inline-blue">文件访问指令root和alias的差异</span></span></h2><p>root: 服务器实际访问路径为 root路径 ＋ location路径</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location /html &#123;</span><br><span class="line">	root /usr/local/nginx/;</span><br><span class="line">&#125;</span><br><span class="line">请求:  http://10.9.212.55:8080/html/a.html =&gt; 匹配服务器文件: /usr/local/nginx/html/a.html</span><br><span class="line">请求:  http:/10.9.212.55:8080/html/www/a.html =&gt; 匹配服务器文件: /usr/local/nginx/html/www/a.html</span><br></pre></td></tr></table></figure>
<p>alias: 服务器实际访问路径为 alias路径 ＋ 去掉location路径后的请求路径</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location /html &#123;</span><br><span class="line">	alias /usr/local/nginx/;</span><br><span class="line">&#125;</span><br><span class="line">请求:  http://10.9.212.55:8080/html/a.html =&gt; 匹配服务器文件: /usr/local/nginx/a.html</span><br><span class="line">请求:  http://10.9.212.55:8080/html/www/a.html =&gt; 匹配服务器文件: /usr/local/nginx/www/a.html</span><br><span class="line"></span><br><span class="line">location /html/www &#123;</span><br><span class="line">	alias /usr/local/nginx;</span><br><span class="line">&#125;</span><br><span class="line">请求:  http://10.9.212.55:8080/html/www/a.html =&gt; 匹配服务器文件: /usr/local/nginx/a.html</span><br><span class="line"></span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Elasticsearch索引出现docs.deleted暴增的解决办法</title>
    <url>/Elasticsearch/blogs/Elasticsearch%E7%B4%A2%E5%BC%95%E5%87%BA%E7%8E%B0docs.deleted%E6%9A%B4%E5%A2%9E%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a><ul>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux : CentOS Linux release 7.7.1908 (Core)<br>Elasticsearch : 6.8.4</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>通过_update_by_query接口变更索引的属性映射，操作完成后索引新增属性成功了，但是索引对应的docs.deleted记录暴增，占用10多个G。</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>由于Lucene索引中段的不可变性，删除操作并不容易。对于对原始文档的任何更改操作，例如重新索引或更新，都需要删除文档，将其标记为已删除，并在后台创建包含更改的新文档。</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>通过Elasticsearch的接口调用强制执行分段合并。<br>示例：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -XPOST &quot;http://10.9.216.12:9200/user_action_moui_202312/_forcemerge?max_num_segments=1&quot;</span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>Elasticsearch修改索引模板并应用到历史索引</title>
    <url>/Elasticsearch/blogs/Elasticsearch%E4%BF%AE%E6%94%B9%E7%B4%A2%E5%BC%95%E6%A8%A1%E6%9D%BF%E5%B9%B6%E5%BA%94%E7%94%A8%E5%88%B0%E5%8E%86%E5%8F%B2%E7%B4%A2%E5%BC%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E6%9B%B4%E6%94%B9%E5%8E%86%E5%8F%B2%E7%B4%A2%E5%BC%95mapping%E6%98%A0%E5%B0%84span"><span id="inline-blue">更改历史索引mapping映射</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux : CentOS Linux release 7.7.1908 (Core)<br>Elasticsearch : 6.8.4</p>
<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><p>Elasticsearch统计用户的访问记录，需要在已有模板的基础上增加几个上报属性，通过head和SQL插件能够查询到新增的属性，并将新增的属性应用到已存在的历史索引<br>新增属性：<br>softwareVersion(String) : 软件版本<br>hdVersion(String): 硬件版本<br>model(String):    硬件型号<br>socmodel(String): 芯片型号<br>districtCodeName(String): 区域名称<br>mac(String): MAC地址</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>原始模板：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="attr">&quot;order&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">&quot;index_patterns&quot;</span> : <span class="string">&quot;user_action_*&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;index&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;number_of_shards&quot;</span> : <span class="string">&quot;6&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;number_of_replicas&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;refresh_interval&quot;</span> : <span class="string">&quot;30s&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;translog.flush_threshold_size&quot;</span> : <span class="string">&quot;1024mb&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;action&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;_all&quot;</span>: &#123; <span class="attr">&quot;enabled&quot;</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;eTime&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;time&quot;</span> :       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span>&#125;,</span><br><span class="line">          <span class="attr">&quot;clientIp&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;ip&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;eType&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;eId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tType&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tProtocol&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;login&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;uc&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;areaCode&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tModel&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;sceneId&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;videoId&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;pVideoId&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;videoIndex&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;videoDuration&quot;</span>:&#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tsId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;serId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;netId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;chName&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;progName&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;aId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;pId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;rName&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;coId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;rFlag&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;paId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;ppId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;pkgFlag&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;eStatus&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;uuid&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;lat&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;lng&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;netType&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;sn&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tOS&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;way&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;epbt&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;epet&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,         </span><br><span class="line">          <span class="attr">&quot;productCode&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;kw&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;rType&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;recomId&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;coName&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;coType&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;actionType&quot;</span>:  &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;orderType&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;logicNumber&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;chargeNum&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;viewType&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;viewPath&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;appId&quot;</span> :      &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;appName&quot;</span> :    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;appType&quot;</span> :    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;appVersion&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">                          </span><br><span class="line">          <span class="attr">&quot;startTime&quot;</span> :  &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span> : <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> &#125;,   </span><br><span class="line">          <span class="attr">&quot;endTime&quot;</span> :    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span> : <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;duration&quot;</span> :   &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;integer&quot;</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>变更后模板:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;order&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">&quot;index_patterns&quot;</span> : <span class="string">&quot;user_action_*&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;index&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;number_of_shards&quot;</span> : <span class="string">&quot;6&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;number_of_replicas&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;refresh_interval&quot;</span> : <span class="string">&quot;30s&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;translog.flush_threshold_size&quot;</span> : <span class="string">&quot;1024mb&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;action&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;_all&quot;</span>: &#123; <span class="attr">&quot;enabled&quot;</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;eTime&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;time&quot;</span> :       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span>&#125;,</span><br><span class="line">          <span class="attr">&quot;clientIp&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;ip&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;eType&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;eId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tType&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tProtocol&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;login&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;uc&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;areaCode&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tModel&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;sceneId&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;videoId&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;pVideoId&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;videoIndex&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;videoDuration&quot;</span>:&#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tsId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;serId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;netId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;chName&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;progName&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;aId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;pId&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;rName&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;coId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;rFlag&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;paId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;ppId&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;pkgFlag&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;eStatus&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;uuid&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;lat&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;lng&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;netType&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;sn&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;tOS&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;way&quot;</span>:         &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;epbt&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;epet&quot;</span>:        &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,         </span><br><span class="line">          <span class="attr">&quot;productCode&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>:<span class="literal">true</span> &#125;,</span><br><span class="line">          </span><br><span class="line">          <span class="attr">&quot;kw&quot;</span>:          &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;rType&quot;</span>:       &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;recomId&quot;</span>:     &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;coName&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;coType&quot;</span>:      &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;actionType&quot;</span>:  &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;orderType&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;logicNumber&quot;</span>: &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;chargeNum&quot;</span>:   &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;viewType&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;viewPath&quot;</span>:    &#123; <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span>: <span class="literal">true</span> &#125;,</span><br><span class="line"></span><br><span class="line">          <span class="attr">&quot;appId&quot;</span> :      &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;appName&quot;</span> :    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;appType&quot;</span> :    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;appVersion&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">                          </span><br><span class="line">          <span class="attr">&quot;startTime&quot;</span> :  &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span> : <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> &#125;,   </span><br><span class="line">          <span class="attr">&quot;endTime&quot;</span> :    &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;date&quot;</span>, <span class="attr">&quot;format&quot;</span> : <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;duration&quot;</span> :   &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line">		  </span><br><span class="line">	      <span class="attr">&quot;softwareVersion&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">	      <span class="attr">&quot;hdVersion&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;model&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;socmodel&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">          <span class="attr">&quot;districtCodeName&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;,</span><br><span class="line">	      <span class="attr">&quot;mac&quot;</span> : &#123; <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;keyword&quot;</span>, <span class="attr">&quot;index&quot;</span> : <span class="literal">true</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>删除原始模板，创新新的索引模板，模板变更之后只对新增的索引有效，历史索引依然保持之前的mapping映射。</p>
<h2><span id="更改历史索引mapping映射"><span id="inline-blue">更改历史索引mapping映射</span></span></h2><p>索引: user_action_moui_202312</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -X POST &quot;http://10.9.216.12:9200/user_action_moui_202312/_update_by_query?conflicts=proceed&amp;wait_for_completion=false&amp;&amp;slices=auto&amp;scroll_size=10000&quot; -d</span><br><span class="line">&#x27;&#123;</span><br><span class="line">    &quot;script&quot;: </span><br><span class="line">	&#123;</span><br><span class="line">        &quot;lang&quot;: &quot;painless&quot;,</span><br><span class="line">				&quot;source&quot;: &quot; if (ctx._source.softwareVersion == null) &#123;ctx._source.softwareVersion = &#x27;NULL&#x27;&#125; if (ctx._source.hdVersion == null) &#123;ctx._source.hdVersion = &#x27;NULL&#x27;&#125; if (ctx._source.model == null) &#123;ctx._source.model = &#x27;NULL&#x27;&#125; if (ctx._source.socmodel == null) &#123;ctx._source.socmodel = &#x27;NULL&#x27;&#125; if (ctx._source.districtCodeName == null)&#123;ctx._source.districtCodeName = &#x27;NULL&#x27;&#125; if (ctx._source.mac == null) &#123;ctx._source.mac = &#x27;NULL&#x27;&#125; &quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;&#x27;</span><br><span class="line"></span><br><span class="line">返回示例：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;task&quot;: &quot;z4Wm_2UETI2ni9yFXxjcew:974983&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>_update_by_query接口的作用：<br>更新user_action_moui_202312历史索引新增属性softwareVersion、hdVersion、model、socmodel、districtCodeName、mac<br>如果索引记录中不存在对应的记录，设置默认值’NULL’<br>URL携带参数释义：</p>
<p>conflicts=proceed : 执行过程中出现冲突不停止,继续执行<br>wait_for_completion=false : 后台执行，避免执行超时<br>slices=auto : 分片执行<br>scroll_size=10000 ：采用Scroll方式翻页的大小，默认为1000</p>
<p>接口调用之后返回对应执行任务的taskId(),可以通过_tasks接口查询对应任务的执行进度，调用方法</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -X GET http://10.9.216.12:9200/_tasks/z4Wm_2UETI2ni9yFXxjcew:974983 </span><br></pre></td></tr></table></figure>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>通过SQL插件查询user_action_moui_*索引，验证新增字段属性是否生效<br><img src="/images/elasticsearch/es_20240116_001.png" alt="Elasticsearch索引变更"></p>
]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>ElasticSearch开机自启动</title>
    <url>/Elasticsearch/blogs/Elasticsearch%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAelasticsearch%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6span"><span id="inline-blue">创建elasticsearch启动配置文件</span></a></li>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90span"><span id="inline-blue">修改文件权限</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4%E8%87%AA%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">添加和删除自启动服务</span></a></li>
<li><a href="#span-idinline-blue%E5%BC%80%E5%90%AF%E5%92%8C%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">开启和关闭服务</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8span"><span id="inline-blue">设置服务开启自启动</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="创建elasticsearch启动配置文件"><span id="inline-blue">创建elasticsearch启动配置文件</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 系统自启动服务目录</span></span><br><span class="line">cd /etc/init.d </span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建服务文件</span></span><br><span class="line">vim elasticsearch</span><br></pre></td></tr></table></figure>
<p>脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">chkconfig: 345 63 37</span></span><br><span class="line"><span class="meta">#</span><span class="bash">description: elasticsearch</span></span><br><span class="line"><span class="meta">#</span><span class="bash">processname: elasticsearch-2.4.4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> elasticsearch目录</span></span><br><span class="line">export ES_HOME=/usr/local/elasticsearch-2.4.4</span><br><span class="line"><span class="meta">#</span><span class="bash">java目录</span></span><br><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_171</span><br><span class="line"><span class="meta">#</span><span class="bash">需要创建对应es用户</span></span><br><span class="line">case $1 in</span><br><span class="line">start)</span><br><span class="line">    su es&lt;&lt;!</span><br><span class="line">    cd $ES_HOME</span><br><span class="line">    ./bin/elasticsearch -d -p pid</span><br><span class="line">    exit</span><br><span class="line">!</span><br><span class="line">    echo &quot;elasticsearch is started&quot;</span><br><span class="line">    ;;</span><br><span class="line">stop)</span><br><span class="line">    pid=`cat $ES_HOME/pid`</span><br><span class="line">    kill -9 $pid</span><br><span class="line">    echo &quot;elasticsearch is stopped&quot;</span><br><span class="line">    ;;</span><br><span class="line">restart)</span><br><span class="line">    pid=`cat $ES_HOME/pid`</span><br><span class="line">    kill -9 $pid</span><br><span class="line">    echo &quot;elasticsearch is stopped&quot;</span><br><span class="line">    sleep 1</span><br><span class="line">    su es&lt;&lt;!</span><br><span class="line">    cd $ES_HOME</span><br><span class="line">    ./bin/elasticsearch -d -p pid</span><br><span class="line">    exit</span><br><span class="line">!</span><br><span class="line">    echo &quot;elasticsearch is started&quot;</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    echo &quot;start|stop|restart&quot;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line">exit 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="修改文件权限"><span id="inline-blue">修改文件权限</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod 777 elasticsearch</span><br></pre></td></tr></table></figure>

<h1><span id="添加和删除自启动服务"><span id="inline-blue">添加和删除自启动服务</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">添加服务</span></span><br><span class="line">chkconfig --add elasticsearch</span><br><span class="line"><span class="meta">#</span><span class="bash">删除服务</span></span><br><span class="line">chkconfig --del elasticsearch</span><br></pre></td></tr></table></figure>
<h1><span id="开启和关闭服务"><span id="inline-blue">开启和关闭服务</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动</span></span><br><span class="line">service elasticsearch start</span><br><span class="line"><span class="meta">#</span><span class="bash">关闭</span></span><br><span class="line">service elasticsearch stop</span><br><span class="line"><span class="meta">#</span><span class="bash">查看状态</span></span><br><span class="line">service elasticsearch status</span><br></pre></td></tr></table></figure>
<h1><span id="设置服务开启自启动"><span id="inline-blue">设置服务开启自启动</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">开启</span></span><br><span class="line">chkconfig elasticsearch  on</span><br><span class="line"><span class="meta">#</span><span class="bash">关闭</span></span><br><span class="line">chkconfig elasticsearch  off</span><br><span class="line"><span class="meta">#</span><span class="bash">查看自启动服务状态</span></span><br><span class="line">chkconfig  --list</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx配置MySQL请求转发</title>
    <url>/Nginx/blogs/Nginx%E9%85%8D%E7%BD%AEMySQL%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-bluenginx%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">nginx配置</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">数据库连接配置</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux : CentOS Linux release 7.7.1908 (Core)<br>nginx : 1.18.1<br>MySQL : 5.7</p>
<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><p>通过nginx转发MySQL请求，解决内网环境和MySQL网络不能通信的情况</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>查看当前nginx版本是否支持ssl</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin</span><br><span class="line">./nginx -V</span><br><span class="line">nginx version: nginx/1.18.0</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) </span><br><span class="line">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/usr/local/nginx --user=nginx --group=nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre --with-stream --with-stream_ssl_module --with-stream_realip_module</span><br></pre></td></tr></table></figure>
<p>—-with-stream 说明nginx编译时已添加stream模块支持。<br>如果没有对应的模块需要备份nginx配置，添加—-with-stream参数支持重新编译nginx并安装。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/local/nginx \</span><br><span class="line">--sbin-path=/usr/local/nginx/sbin/nginx \</span><br><span class="line">--modules-path=/usr/local/nginx/modules \</span><br><span class="line">--conf-path=/usr/local/nginx/conf/nginx.conf \</span><br><span class="line">--error-log-path=/usr/local/nginx/logs/error.log \</span><br><span class="line">--http-log-path=/usr/local/nginx/logs/access.log \</span><br><span class="line">--pid-path=/usr/local/nginx/logs/nginx.pid \</span><br><span class="line">--lock-path=/usr/local/nginx/logs/nginx.lock \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-stream</span><br></pre></td></tr></table></figure>
<h2><span id="nginx配置"><span id="inline-blue">nginx配置</span></span></h2><p>nginx当前所在服务器为10.9.216.12,,监听3308端口，将请求转发到10.9.216.14:3306</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">user  root;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stream &#123;</span><br><span class="line">    upstream mysqlupstream &#123;</span><br><span class="line">       hash $remote_addr consistent;</span><br><span class="line">       server 10.9.216.14:3306 weight=5 max_fails=3 fail_timeout=30s;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">       listen 3308;</span><br><span class="line">       proxy_connect_timeout 10s;</span><br><span class="line">       proxy_timeout 300s;</span><br><span class="line">       proxy_pass mysqlupstream;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>strean节点的内容是对应转发的关键配置，其他的信息主要是用于确定节点添加的位置。</p>
<h1><span id="数据库连接配置"><span id="inline-blue">数据库连接配置</span></span></h1><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://10.9.216.12:3308/lovehome_xw?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">coship</span></span><br><span class="line"><span class="meta">spring.datasource.name</span>=<span class="string">lovehome_xw</span></span><br><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.initial-size</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.datasource.min-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.datasource.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.datasource.max-wait</span>=<span class="string">30000</span></span><br><span class="line"><span class="meta">spring.datasource.time-between-eviction-runs-millis</span>=<span class="string">60000</span></span><br><span class="line"><span class="meta">spring.datasource.min-evictable-idle-time-millis</span>=<span class="string">300000</span></span><br><span class="line"><span class="meta">spring.datasource.validation-query</span>=<span class="string">select &#x27;1&#x27; from dual</span></span><br><span class="line"><span class="meta">spring.datasource.test-while-idle</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.datasource.test-on-borrow</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">spring.datasource.test-on-return</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">spring.datasource.pool-prepared-statements</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.datasource.max-open-prepared-statements</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.datasource.max-pool-prepared-statement-per-connection-size</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.datasource.filters</span>=<span class="string">stat,wall</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx配置自定义证书实现ssl加密</title>
    <url>/Nginx/blogs/Nginx%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%81%E4%B9%A6%E5%AE%9E%E7%8E%B0ssl%E5%8A%A0%E5%AF%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%89%E5%85%A8%E8%AF%81%E4%B9%A6span"><span id="inline-blue">自定义安全证书</span></a></li>
<li><a href="#span-idinline-blue%E8%AF%81%E4%B9%A6%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2span"><span id="inline-blue">证书格式转换</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%87%BA%E8%AF%81%E4%B9%A6span"><span id="inline-blue">导出证书</span></a></li>
<li><a href="#span-idinline-bluecer%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E4%B8%BApemspan"><span id="inline-blue">cer格式转换为pem</span></a></li>
<li><a href="#span-idinline-blue%E6%8F%90%E5%8F%96%E7%A7%81%E9%92%A5span"><span id="inline-blue">提取私钥</span></a></li>
<li><a href="#span-idinline-bluenginx%E9%85%8D%E7%BD%AEspan"><span id="inline-blue">nginx配置</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux : CentOS Linux release 7.7.1908 (Core)<br>nginx : 1.18.1</p>
<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><p>访问nginx添加ssl加密，使用自定义安全证书</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>查看当前nginx版本是否支持ssl</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin</span><br><span class="line">./nginx -V</span><br><span class="line">nginx version: nginx/1.18.0</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) </span><br><span class="line">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/usr/local/nginx --user=nginx --group=nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre --with-stream --with-stream_ssl_module --with-stream_realip_module</span><br></pre></td></tr></table></figure>
<p>–with-http_ssl_module 说明nginx编译时已添加ssl模块支持，如果没有对应标识，需要重新执行nginx编译，命令内容如下，路径参数执行修改</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/local/nginx \</span><br><span class="line">            --sbin-path=/usr/sbin/nginx \</span><br><span class="line">            --modules-path=/usr/lib/nginx/modules \</span><br><span class="line">            --conf-path=/usr/local/nginx/conf/nginx.conf \</span><br><span class="line">            --error-log-path=/var/log/nginx/error.log \</span><br><span class="line">            --http-log-path=/var/log/nginx/access.log \</span><br><span class="line">            --user=nginx \</span><br><span class="line">            --group=nginx \</span><br><span class="line">            --with-http_ssl_module \</span><br><span class="line">			--with-http_v2_module \</span><br><span class="line">			--with-http_realip_module \</span><br><span class="line">			--with-http_stub_status_module \</span><br><span class="line">			--with-http_gzip_static_module \</span><br><span class="line">			--with-pcre --with-stream \</span><br><span class="line">			--with-stream_ssl_module \</span><br><span class="line">			--with-stream_realip_module</span><br></pre></td></tr></table></figure>



<h2><span id="自定义安全证书"><span id="inline-blue">自定义安全证书</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">指定/home路径下生成certificate.jks证书，秘钥为coshipOk698</span></span><br><span class="line">keytool -genkey -alias coship  -keyalg RSA -keysize 2048 -validity 3650 -ext SAN=dns:www.nginx12.com,ip:10.9.216.12  -keystore /home/certificate.jks -storepass coshipOk698 -dname &quot;CN=www.nginx82.com, OU=www.nginx82.com, O=www.nginx82.com, L=wuhan, ST=wuhan, C=cn&quot;</span><br></pre></td></tr></table></figure>

<h2><span id="证书格式转换"><span id="inline-blue">证书格式转换</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">certificate.jks是键值对形式的证书，推荐转换为标准格式pkcs12</span></span><br><span class="line">keytool -importkeystore -srckeystore certificate.jks -destkeystore certificate.jks -deststoretype pkcs12</span><br></pre></td></tr></table></figure>

<h2><span id="导出证书"><span id="inline-blue">导出证书</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将certificate.jks证书导出，certificate.jks已经是pkcs12格式</span></span><br><span class="line">keytool -export -trustcacerts -alias coship -file /home/cas.crt -keystore /home/certificate.jks -storepass coshipOk698</span><br></pre></td></tr></table></figure>
<h2><span id="cer格式转换为pem"><span id="inline-blue">cer格式转换为pem</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将cas.crt格式转换为server.pem，方便nginx使用</span></span><br><span class="line">openssl x509 -inform der -in cas.crt -out server.pem</span><br></pre></td></tr></table></figure>

<h2><span id="提取私钥"><span id="inline-blue">提取私钥</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">openssl pkcs12 -nocerts -nodes -in certificate.jks -out server.key</span><br></pre></td></tr></table></figure>

<h2><span id="nginx配置"><span id="inline-blue">nginx配置</span></span></h2><p>将转换后的证书server.pem、server.key 上传到nginx配置对应的目录，当前使用的是默认的/home路径下<br>监听端口为443， ssl_certificate、ssl_certificate_key配置为新增的证书和密钥的路径</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">		client_max_body_size 1024m;  </span><br><span class="line">        listen       443 ssl;</span><br><span class="line">        server_name  www.nginx12.com;</span><br><span class="line">		</span><br><span class="line">		ssl_certificate      /home/server.pem;</span><br><span class="line">        ssl_certificate_key  /home/server.key;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /home/dev/dist-prodtest;</span><br><span class="line">            #root   /home/dev/prod; </span><br><span class="line">            index  index.html;</span><br><span class="line">			try_files $uri $uri/ /index.html;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 反向代理</span></span><br><span class="line">		location /prodtest/ &#123;</span><br><span class="line">			proxy_pass http://10.9.216.12:9001/dev/;</span><br><span class="line">			proxy_set_header Host 10.9.216.12;</span><br><span class="line">			proxy_connect_timeout 6;</span><br><span class="line">			proxy_send_timeout 6;</span><br><span class="line">			proxy_read_timeout 6;</span><br><span class="line">			send_timeout 6;</span><br><span class="line">         &#125;</span><br><span class="line">			 </span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/nginx/nginx_20240109_001.png" alt="nginx安全访问验证"></p>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Rsync实现服务器目录同步</title>
    <url>/Rsync/blogs/Rsync%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%AE%E5%BD%95%E5%90%8C%E6%AD%A5/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux : CentOS Linux release 7.7.1908 (Core)<br>rsync : rsync-3.0.7<br>inotify : inotify-tools-3.13</p>
<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><p>管理后台上传到FTP的图片目录，需要通过使用nginx代理给接口下载使用，但nginx如果采用回源方案的话导致在接口大量并发的情况下，nginx源服务器出现报错，代理下载nginx服务器缓存出现异常，不能正常提供下载服务。所以将nginx都修改为代理本地服务器的目录，通过rsync将上传文件的FTP目录同步到nginx服务器，减少回源的时间。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>1、先查看linux的内核是否支持inotify，支持inotify的内核最小为2.6.13，输入命令：uname –a。如下图所示，内核为3.10.0，支持inotify：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Linux S21614 3.10.0-1062.el7.x86_64 #1 SMP Wed Aug 7 18:08:02 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>
<p>2、建立同步ssh信任关系，输入命令：cd  $HOME，进入用户根目录。<br>输入命令：ssh-keygen -t rsa (会出现几个提示信息，一直按回车即可)。<br>会在$HOME/.ssh/目录下生成2个文件id_rsa、id_rsa.pub。<br>输入命令：cp  id_rsa.pub  authorized_keys，将id_rsa.pub拷贝成authorized_keys。<br>将授权密钥分发到nginx服务器(192.168.100.101)上，输入命令：<br>scp  ~/.ssh/authorized_keys <a href="mailto:&#x72;&#111;&#x6f;&#x74;&#x40;&#x31;&#x39;&#50;&#x2e;&#49;&#x36;&#56;&#x2e;&#x31;&#48;&#48;&#x2e;&#49;&#x30;&#x31;">&#x72;&#111;&#x6f;&#x74;&#x40;&#x31;&#x39;&#50;&#x2e;&#49;&#x36;&#56;&#x2e;&#x31;&#48;&#48;&#x2e;&#49;&#x30;&#x31;</a>:/root/.ssh/<br>如果有多台下载服务器，每台都须运行一次上面的密钥下发命令。<br>3、通过如下命令查看系统是否支持inotify：ll /proc/sys/fs/inotify<br>如果有如下输出，表示系统内核已经支持inotify：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Jan  2 14:59 max_queued_events</span><br><span class="line">-rw-r--r-- 1 root root 0 Jan  2 14:59 max_user_instances</span><br><span class="line">-rw-r--r-- 1 root root 0 Jan  2 14:59 max_user_watches</span><br></pre></td></tr></table></figure>
<p>5、取得软件包inotify-tools-3.13.tar.gz，放在/tmp下。<br>6、输入命令：tar zvxf inotify-tools-3.13.tar.gz，解压软件包。<br>7、输入命令：cd inotify-tools-3.13，进入解压后的目录。<br>8、输入命令：./configure<br>9、输入命令：make<br>10、输入命令：make install<br>11、在系统下执行命令：man inotify、 man inotifywait、 man inotifywatch即可得到相应的帮助信息，表示inotify安装成功。<br>12、输入命令：rsync，查看rsync是否安装。<br>rsync一般是系统默认安装，如果没有安装就取得软件包，安装方法同inotify。</p>
<p>1、取得syncapps.sh、versService.dat脚本。<br>syncapps.sh脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Copyright 2010 Shenzhen Coship Electronics Co.,Ltd.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> All Rights Reserved</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###########################################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">FROM: The <span class="built_in">source</span> directory of iEPGM synchronized to iEPG.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">TO:   The purpose file of iEPGM synchronized to iEPG</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###########################################################</span></span></span><br><span class="line">FROM=/home/iepgm/iepgm-jetty/sys/pages/</span><br><span class="line">TO=iEPGService.dat</span><br><span class="line"></span><br><span class="line">PID_FILE=syncapps.pid</span><br><span class="line"></span><br><span class="line">function sync_files</span><br><span class="line">&#123;</span><br><span class="line">   cat $TO | while read DST </span><br><span class="line">   do</span><br><span class="line">   rsync -avzq  --delete --exclude &#x27;/.version&#x27; --exclude &#x27;/.bak&#x27; $FROM $DST</span><br><span class="line">   done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function inotify_func</span><br><span class="line">&#123;</span><br><span class="line">    inotifywait -mrq -e modify,delete,create $&#123;FROM&#125; | while read D E F;do</span><br><span class="line">        # echo &quot;$D : $E : $F&quot;</span><br><span class="line">        sync_files</span><br><span class="line">    done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function stop</span><br><span class="line">&#123;</span><br><span class="line">    pkill inotifywait &amp;&gt;/dev/null &amp;&amp; rm -f $&#123;PID_FILE&#125; &amp;&gt; /dev/null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">    stop)</span><br><span class="line">        echo -n &quot;Stopping sync service...&quot;</span><br><span class="line">        if [ -e $&#123;PID_FILE&#125; ]; then</span><br><span class="line">            stop</span><br><span class="line">            echo &quot;Stopped&quot;</span><br><span class="line">            exit 0</span><br><span class="line">        else</span><br><span class="line">            echo &quot;pid file not found&quot;</span><br><span class="line">            exit 2</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line">    start) </span><br><span class="line">        echo -n &quot;Starting sync service...&quot;</span><br><span class="line">        if [ -f $&#123;PID_FILE&#125; ] &amp;&amp; ((`ps awux | grep -v grep | grep -c inotifywait`)); then</span><br><span class="line">            echo &quot; already running: pid file found ($PID_FILE) and an inotifywait process is running&quot;</span><br><span class="line">            exit 1</span><br><span class="line">        elif [ -f $&#123;PID_FILE&#125; ]; then</span><br><span class="line">            echo -n &quot;(stale pid file)&quot;</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">        sync_files</span><br><span class="line">        inotify_func&amp;</span><br><span class="line">        </span><br><span class="line">        pid=&quot;$!&quot;</span><br><span class="line">        ps --ppid $pid -o pid,cmd | grep inotifywait | awk &#x27;&#123;print $1&#125;&#x27; &gt; $&#123;PID_FILE&#125;</span><br><span class="line">        </span><br><span class="line">        echo &quot;Started&quot;</span><br><span class="line">        ;;</span><br><span class="line">    restart)</span><br><span class="line">        $0 stop</span><br><span class="line">        $0 start</span><br><span class="line">        exit 0</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        echo -n &quot;Getting status for syncer service... &quot;</span><br><span class="line">        pid=`cat $&#123;PID_FILE&#125; 2&gt;/dev/null`</span><br><span class="line">        if [ -f $&#123;PID_FILE&#125; ] &amp;&amp; ((`ps awux | grep -v grep | egrep -c &quot;$pid.*inotifywait&quot;`)); then</span><br><span class="line">            echo &quot;running (pid $pid)&quot;</span><br><span class="line">            exit 0</span><br><span class="line">        elif [ -f $&#123;PID_FILE&#125; ]; then</span><br><span class="line">            echo &quot;not runing (pid file found $pid)&quot;</span><br><span class="line">            exit 3</span><br><span class="line">        elif ((`ps awux | grep -v grep | egrep -c &quot;$pid.*inotifywait&quot;`)); then</span><br><span class="line">            echo &quot;not running (inotifywait procs found)&quot;</span><br><span class="line">            exit 4</span><br><span class="line">        else</span><br><span class="line">            echo &quot;not running&quot;</span><br><span class="line">            exit 5</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line">                </span><br><span class="line">    *)</span><br><span class="line">        echo &quot;Usage error&quot;</span><br><span class="line">        echo &quot;Usage: $0 &lt;start|stop|restart|status&gt;&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>versService.dat脚本脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@172.30.209.43:/usr/local/iepg-jetty/webapps/iepg/pages/</span><br></pre></td></tr></table></figure>
<p>2、编辑syncapps.sh、versService.dat文件中的同步目录及同步主机节点<br>3、输入命令：chmod  +x  *.sh，给文件赋可执行权限。<br>4、输入命令：./syncapps.sh start，启动同步工具。<br>启动同步工具的输入命令：./syncapps.sh start<br>停止同步工具的输入命令：./syncapps.sh stop<br>重启同步工具的输入命令：./syncapps.sh restart<br>查看同步工具状态的输入命令：./syncapps.sh status</p>
]]></content>
      <categories>
        <category>Rsync</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Rsync</tag>
      </tags>
  </entry>
  <entry>
    <title>解决Nginx错误：Upstream prematurely closed connection</title>
    <url>/Nginx/blogs/%E8%A7%A3%E5%86%B3Nginx%E9%94%99%E8%AF%AF%EF%BC%9AUpstream%20prematurely%20closed%20connection/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux : CentOS Linux release 7.7.1908 (Core)<br>nginx : 1.18.1</p>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>一共部署了四台用于前端进行代理下载nginx,两台用于进行回源的源服务nginx，接口大量并发下载的情况下，nginx请求日志抛错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Upstream prematurely closed connection while reading response header from upstream</span><br></pre></td></tr></table></figure>
<p>nginx代理端口下载链接1500~2000左右，大量出现CLOSE_WAIT状态<br>源nginx报错<br><img src="/images/nginx/nginx_20240103_001.png" alt="nginx报错信息"></p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>升级系统发布新应用，客户端大量并发请求升级接口，但因为4台代理下载应用压缩包的服务器还未缓存刚发布的应用，导致所有的请求都被转发到了nginx源服务器进行请求下载，最终2台源服务器因为并发压力过高导致抛出too many files错误信息，造成回源nginx缓存异常，nginx代理服务器内存和cpu占用过高<br>调整服务器打开文件数配置<br><img src="/images/nginx/nginx_20240103_002.png" alt="nginx更改文件打开数"><br>配置完成后，重启服务器生效，如果不想重启服务器，则在当前开启的session会话窗口执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit –HSn 65535</span><br></pre></td></tr></table></figure>
<p>kill掉nginx进程，重新启动即可</p>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Apache超文本传输协议压力测试工具</title>
    <url>/Apache/blogs/Apache%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blueapache-benchspan"><span id="inline-blue">apache bench</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85span"><span id="inline-blue">安装</span></a></li>
<li><a href="#span-idinline-blue%E8%AF%AD%E6%B3%95span"><span id="inline-blue">语法</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E4%BE%8Bspan"><span id="inline-blue">实例</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>linux : CentOS Linux release 7.7.1908 (Core)</p>
<h1><span id="apache-bench"><span id="inline-blue">apache bench</span></span></h1><p>ApacheBench 简称 ab，是 Apache HTTP Server 中的一个性能测试工具，可单独安装，在命令行中直接使用，可基于 HTTP 接口对任意 HTTP 服务器进行性能测试，得到每秒请求数（RPS）、平均请求响应时间等性能指标。</p>
<h1><span id="安装"><span id="inline-blue">安装</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install httpd-tools</span><br></pre></td></tr></table></figure>
<h1><span id="语法"><span id="inline-blue">语法</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ab [options] [http[s]://]hostname[:port]/path</span><br><span class="line"><span class="meta">$</span><span class="bash"> ab -h</span></span><br><span class="line">Usage: ab [options] [http[s]://]hostname[:port]/path</span><br><span class="line">Options are:</span><br><span class="line">    -n requests     Number of requests to perform</span><br><span class="line">    -c concurrency  Number of multiple requests to make at a time</span><br><span class="line">    -t timelimit    Seconds to max. to spend on benchmarking</span><br><span class="line">                    This implies -n 50000</span><br><span class="line">    -s timeout      Seconds to max. wait for each response</span><br><span class="line">                    Default is 30 seconds</span><br><span class="line">    -b windowsize   Size of TCP send/receive buffer, in bytes</span><br><span class="line">    -B address      Address to bind to when making outgoing connections</span><br><span class="line">    -p postfile     File containing data to POST. Remember also to set -T</span><br><span class="line">    -u putfile      File containing data to PUT. Remember also to set -T</span><br><span class="line">    -T content-type Content-type header to use for POST/PUT data, eg.</span><br><span class="line">                    &#x27;application/x-www-form-urlencoded&#x27;</span><br><span class="line">                    Default is &#x27;text/plain&#x27;</span><br><span class="line">    -v verbosity    How much troubleshooting info to print</span><br><span class="line">    -w              Print out results in HTML tables</span><br><span class="line">    -i              Use HEAD instead of GET</span><br><span class="line">    -x attributes   String to insert as table attributes</span><br><span class="line">    -y attributes   String to insert as tr attributes</span><br><span class="line">    -z attributes   String to insert as td or th attributes</span><br><span class="line">    -C attribute    Add cookie, eg. &#x27;Apache=1234&#x27;. (repeatable)</span><br><span class="line">    -H attribute    Add Arbitrary header line, eg. &#x27;Accept-Encoding: gzip&#x27;</span><br><span class="line">                    Inserted after all normal header lines. (repeatable)</span><br><span class="line">    -A attribute    Add Basic WWW Authentication, the attributes</span><br><span class="line">                    are a colon separated username and password.</span><br><span class="line">    -P attribute    Add Basic Proxy Authentication, the attributes</span><br><span class="line">                    are a colon separated username and password.</span><br><span class="line">    -X proxy:port   Proxyserver and port number to use</span><br><span class="line">    -V              Print version number and exit</span><br><span class="line">    -k              Use HTTP KeepAlive feature</span><br><span class="line">    -d              Do not show percentiles served table.</span><br><span class="line">    -S              Do not show confidence estimators and warnings.</span><br><span class="line">    -q              Do not show progress when doing more than 150 requests</span><br><span class="line">    -l              Accept variable document length (use this for dynamic pages)</span><br><span class="line">    -g filename     Output collected data to gnuplot format file.</span><br><span class="line">    -e filename     Output CSV file with percentages served</span><br><span class="line">    -r              Don&#x27;t exit on socket receive errors.</span><br><span class="line">    -m method       Method name</span><br><span class="line">    -h              Display usage information (this message)</span><br><span class="line">    -I              Disable TLS Server Name Indication (SNI) extension</span><br><span class="line">    -Z ciphersuite  Specify SSL/TLS cipher suite (See openssl ciphers)</span><br><span class="line">    -f protocol     Specify SSL/TLS protocol</span><br><span class="line">                    (TLS1, TLS1.1, TLS1.2 or ALL)</span><br><span class="line">    -E certfile     Specify optional client certificate chain and private key</span><br></pre></td></tr></table></figure>
<h1><span id="实例"><span id="inline-blue">实例</span></span></h1><p>指定url请求1000次，并发100</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ab -c100 -n1000 http://10.9.216.12:8098/oms-pic/10146.png</span><br><span class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 1430300 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking 10.9.216.12 (be patient)</span><br><span class="line">Completed 100 requests</span><br><span class="line">Completed 200 requests</span><br><span class="line">Completed 300 requests</span><br><span class="line">Completed 400 requests</span><br><span class="line">Completed 500 requests</span><br><span class="line">Completed 600 requests</span><br><span class="line">Completed 700 requests</span><br><span class="line">Completed 800 requests</span><br><span class="line">Completed 900 requests</span><br><span class="line">Completed 1000 requests</span><br><span class="line">Finished 1000 requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        nginx/1.18.0</span><br><span class="line">Server Hostname:        10.9.216.12</span><br><span class="line">Server Port:            8098</span><br><span class="line"></span><br><span class="line">Document Path:          /oms-pic/10146.png</span><br><span class="line">Document Length:        7289 bytes</span><br><span class="line"></span><br><span class="line">Concurrency Level:      100</span><br><span class="line">Time taken for tests:   0.122 seconds</span><br><span class="line">Complete requests:      1000</span><br><span class="line">Failed requests:        0</span><br><span class="line">Write errors:           0</span><br><span class="line">Total transferred:      7524000 bytes</span><br><span class="line">HTML transferred:       7289000 bytes</span><br><span class="line">Requests per second:    8201.97 [#/sec] (mean)</span><br><span class="line">Time per request:       12.192 [ms] (mean)</span><br><span class="line">Time per request:       0.122 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          60265.22 [Kbytes/sec] received</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:        0    1   1.0      0       5</span><br><span class="line">Processing:     3   11   2.4     11      15</span><br><span class="line">Waiting:        0   11   2.4     11      15</span><br><span class="line">Total:          7   11   1.9     11      15</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line"><span class="meta">  50%</span><span class="bash">     11</span></span><br><span class="line"><span class="meta">  66%</span><span class="bash">     12</span></span><br><span class="line"><span class="meta">  75%</span><span class="bash">     13</span></span><br><span class="line"><span class="meta">  80%</span><span class="bash">     13</span></span><br><span class="line"><span class="meta">  90%</span><span class="bash">     15</span></span><br><span class="line"><span class="meta">  95%</span><span class="bash">     15</span></span><br><span class="line"><span class="meta">  98%</span><span class="bash">     15</span></span><br><span class="line"><span class="meta">  99%</span><span class="bash">     15</span></span><br><span class="line"><span class="meta"> 100%</span><span class="bash">     15 (longest request)</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Apache</category>
      </categories>
      <tags>
        <tag>Apache</tag>
      </tags>
  </entry>
  <entry>
    <title>P6spy插件跟踪SQL执行耗时</title>
    <url>/MySQL/blogs/P6spy%E6%8F%92%E4%BB%B6%E8%B7%9F%E8%B8%AASQL%E6%89%A7%E8%A1%8C%E8%80%97%E6%97%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#span-idinline-blue%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96span"><span id="inline-blue">引入依赖</span></a></li>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5span"><span id="inline-blue">修改数据库连接</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0spyproperties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6span"><span id="inline-blue">添加spy.properties配置文件</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>MySQL : 5.7<br>Mybatis-plus: 3.3.1<br>Mybatis：3.5.3<br>SpringBoot: 2.2.6.RELEASE<br>SpringCloud: 2021.0.5</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务接口模块部署到现网环境，发现接口请求大量超时，需要对接口执行耗时的原因进行分析。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="引入依赖"><span id="inline-blue">引入依赖</span></span></h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>p6spy<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>p6spy<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2><span id="修改数据库连接"><span id="inline-blue">修改数据库连接</span></span></h2><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#spring.datasource.url=jdbc:mysql://10.9.216.14:3306/ihome_album?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=GMT%2B8&amp;allowMultiQueries=true</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.p6spy.engine.spy.P6SpyDriver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:p6spy:mysql://10.9.216.14:3306/ihome_album?serverTimezone=GMT%2B8&amp;useUnicode=true&amp;characterEncoding=utf8&amp;allowMultiQueries=true</span></span><br><span class="line"><span class="comment">#适配p6spy更改数据库连接导致启动报错，添加数据库配置项，指定数据库连接类型</span></span><br><span class="line"><span class="meta">spring.datasource.db-type</span>=<span class="string">mysql</span></span><br></pre></td></tr></table></figure>

<h2><span id="添加spyproperties配置文件"><span id="inline-blue">添加spy.properties配置文件</span></span></h2><p>一开始将p6spy配置项直接配置在application.properties文件并由nacos下发，发现启动之后sql打印日志不是期待的自定义SQL打印，后面新建了对应的配置文件之后打印正常了</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 应用的拦截模块</span></span><br><span class="line"><span class="attr">modulelist</span>=<span class="string">com.baomidou.mybatisplus.extension.p6spy.MybatisPlusLogFactory,com.p6spy.engine.outage.P6OutageFactory</span></span><br><span class="line"><span class="comment"># 自定义日志打印</span></span><br><span class="line"><span class="comment">#logMessageFormat=com.baomidou.mybatisplus.extension.p6spy.P6SpyLogger</span></span><br><span class="line"><span class="attr">logMessageFormat</span>=<span class="string">com.p6spy.engine.spy.appender.CustomLineFormat</span></span><br><span class="line"><span class="comment">#日志输出到控制台</span></span><br><span class="line"><span class="comment">#appender=com.baomidou.mybatisplus.extension.p6spy.StdoutLogger</span></span><br><span class="line"><span class="comment"># 使用日志系统记录 sql</span></span><br><span class="line"><span class="attr">appender</span>=<span class="string">com.p6spy.engine.spy.appender.Slf4JLogger</span></span><br><span class="line"><span class="comment"># 设置 p6spy driver 代理</span></span><br><span class="line"><span class="attr">deregisterdrivers</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 取消JDBC URL前缀</span></span><br><span class="line"><span class="attr">useprefix</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 配置记录 Log 例外,可去掉的结果集有error,info,batch,debug,statement,commit,rollback,result,resultset.</span></span><br><span class="line"><span class="attr">excludecategories</span>=<span class="string">info,debug,result,batch,resultset,commit,rollback,result</span></span><br><span class="line"><span class="comment"># 日期格式</span></span><br><span class="line"><span class="attr">dateformat</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="comment"># 实际驱动可多个</span></span><br><span class="line"><span class="comment">#driverlist=org.h2.Driver</span></span><br><span class="line"><span class="attr">driverlist</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">logfile</span>=<span class="string">spy.log</span></span><br><span class="line"><span class="comment"># 是否开启慢SQL记录</span></span><br><span class="line"><span class="attr">outagedetection</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 慢SQL记录标准 2 秒</span></span><br><span class="line"><span class="attr">outagedetectioninterval</span>=<span class="string">10</span></span><br><span class="line"><span class="comment"># 自定义日志配置</span></span><br><span class="line"><span class="comment"># 可用的变量为:</span></span><br><span class="line"><span class="comment">#   %(connectionId)            connection id</span></span><br><span class="line"><span class="comment">#   %(currentTime)             当前时间</span></span><br><span class="line"><span class="comment">#   %(executionTime)           执行耗时</span></span><br><span class="line"><span class="comment">#   %(category)                执行分组</span></span><br><span class="line"><span class="comment">#   %(effectiveSql)            提交的SQL 换行</span></span><br><span class="line"><span class="comment">#   %(effectiveSqlSingleLine)  提交的SQL 不换行显示</span></span><br><span class="line"><span class="comment">#   %(sql)                     执行的真实SQL语句，已替换占位</span></span><br><span class="line"><span class="comment">#   %(sqlSingleLine)           执行的真实SQL语句，已替换占位 不换行显示</span></span><br><span class="line"><span class="attr">customLogMessageFormat</span>=<span class="string">[%(currentTime)] [%(category)-%(connectionId)] [execute time: %(executionTime) ms] execute sql:\n %(sqlSingleLine)</span></span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2023-12-26 09:55:01.699 [http-nio-10050-exec-3] INFO p6spy - [2023-12-26 09:55:01] [statement-4] [execute time: 99 ms] execute sql:SELECT t . id ,</span><br><span class="line">		t.uid ,</span><br><span class="line">		t.tv_box_id ,</span><br><span class="line">		t.name ,</span><br><span class="line">		t.code ,</span><br><span class="line">		t.pid ,</span><br><span class="line">		t.app_user_id ,</span><br><span class="line">		t.material_count ,</span><br><span class="line">		t.album_count ,</span><br><span class="line">		t.order_num ,</span><br><span class="line">		t.is_modifiable ,</span><br><span class="line">		t.create_time ,</span><br><span class="line">		t.modify_time ,</span><br><span class="line">		t.platform ,</span><br><span class="line">		t.sort_type ,</span><br><span class="line">		t.order_type ,</span><br><span class="line">		t.cover_url ,</span><br><span class="line">		t.is_delete ,</span><br><span class="line">		t.is_trash ,</span><br><span class="line">		t.delete_time ,</span><br><span class="line">		level,</span><br><span class="line">		 create_type,</span><br><span class="line">		 user_album_level ,</span><br><span class="line">		t.trash_type ,</span><br><span class="line">		t.trash_time ,</span><br><span class="line">		t.is_album_makable ,</span><br><span class="line">		t.cover_uid ,</span><br><span class="line">		t.cover_extension ,</span><br><span class="line">		t.is_cover_change</span><br><span class="line">FROM tbl_tv_box_album t</span><br><span class="line">WHERE t.tv_box_id = 22</span><br><span class="line">		AND t.is_delete = 0</span><br><span class="line">		AND t.is_trash = 0</span><br><span class="line">		AND t.level = 0 </span><br><span class="line">		2023-12-26 09:55:01.740 [http-nio-10050-exec-3] INFO p6spy - [2023-12-26 09:55:01] [statement-4] [execute time: 5 ms] execute sql:SELECT t . id ,</span><br><span class="line">		t.uid ,</span><br><span class="line">		t.tv_box_id ,</span><br><span class="line">		t.name ,</span><br><span class="line">		t.code ,</span><br><span class="line">		t.pid ,</span><br><span class="line">		t.app_user_id ,</span><br><span class="line">		t.material_count ,</span><br><span class="line">		t.album_count ,</span><br><span class="line">		t.order_num ,</span><br><span class="line">		t.is_modifiable ,</span><br><span class="line">		t.create_time ,</span><br><span class="line">		t.modify_time ,</span><br><span class="line">		t.platform ,</span><br><span class="line">		t.sort_type ,</span><br><span class="line">		t.order_type ,</span><br><span class="line">		t.cover_url ,</span><br><span class="line">		t.is_delete ,</span><br><span class="line">		t.is_trash ,</span><br><span class="line">		t.delete_time ,</span><br><span class="line">		level,</span><br><span class="line">		 create_type,</span><br><span class="line">		 user_album_level ,</span><br><span class="line">		t.trash_type ,</span><br><span class="line">		t.trash_time ,</span><br><span class="line">		t.is_album_makable ,</span><br><span class="line">		t.cover_uid ,</span><br><span class="line">		t.cover_extension ,</span><br><span class="line">		t.is_cover_change</span><br><span class="line">FROM tbl_tv_box_album t</span><br><span class="line">WHERE t.pid = &#x27;20231012824517107077&#x27;</span><br><span class="line">		AND t.is_delete = 0</span><br><span class="line">		AND t.is_trash = 0</span><br><span class="line">ORDER BY  order_num asc,id desc</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>P6spy</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL导出数据库指定忽略多张表</title>
    <url>/MySQL/blogs/MySQL%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%87%E5%AE%9A%E5%BF%BD%E7%95%A5%E5%A4%9A%E5%BC%A0%E8%A1%A8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>MySQL : 5.7</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>导出现网数据库数据，发现数据量过大，排除一些和核心业务无关的表</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>查询当前需要进行导出的数据库各个表的空间占用情况</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">a.table_schema,</span><br><span class="line">a.table_name,</span><br><span class="line">round( <span class="built_in">sum</span>( DATA_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ) <span class="operator">+</span> <span class="built_in">sum</span>( INDEX_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ), <span class="number">2</span> )  <span class="keyword">AS</span> total_size_MB,</span><br><span class="line"> round( <span class="built_in">sum</span>( DATA_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ), <span class="number">2</span> ) <span class="keyword">AS</span> data_size_MB,</span><br><span class="line">round( <span class="built_in">sum</span>( INDEX_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ), <span class="number">2</span> ) <span class="keyword">AS</span> index_size_MB</span><br><span class="line"><span class="keyword">FROM</span> information_schema.TABLES a</span><br><span class="line"><span class="keyword">WHERE</span> a.table_schema <span class="operator">=</span> <span class="string">&#x27;love_home&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> a.table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> total_size_MB</span><br><span class="line"><span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<p>table_schema指定查询当前love_home数据库</p>
<p>数据库导出执行语句如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>pcoship love_home <span class="comment">--ignore-table=love_home.sys_log_api --ignore-table=love_home.sys_job_log &gt; /tmp/DB/test/love_home.sql;</span></span><br></pre></td></tr></table></figure>
<p>–ignore-table指定导出时需要忽略的表名称</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven打包resource排除不生效的解决办法</title>
    <url>/Maven/blogs/Maven%E6%89%93%E5%8C%85resource%E6%8E%92%E9%99%A4%E4%B8%8D%E7%94%9F%E6%95%88%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>SpringBoot: 2.2.6.RELEASE<br>SpringCloud: 2021.0.5<br>nacos: nacos-2.1.1<br>mybatis-plus: 3.3.1<br>Java： 1.8</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>微服务生产环境配置文件统一由nacos下发，部署服务模块发现jar内的配置文件没有被排除，导致nacos配置没有生效，pom.xml文件里面文件排除定义如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">&lt;finalName&gt;ffcs-admin-biz&lt;/finalName&gt;</span></span><br><span class="line"><span class="attr">&lt;resources&gt;</span></span><br><span class="line">	<span class="attr">&lt;resource&gt;</span></span><br><span class="line">		<span class="attr">&lt;filtering&gt;true&lt;/filtering&gt;</span></span><br><span class="line">		<span class="attr">&lt;directory&gt;src/main/resources&lt;/directory&gt;</span></span><br><span class="line">		<span class="attr">&lt;excludes&gt;</span></span><br><span class="line">			<span class="attr">&lt;exclude&gt;application-*.properties&lt;/exclude&gt;</span></span><br><span class="line">			<span class="attr">&lt;exclude&gt;**/logback-spring.xml&lt;/exclude&gt;</span></span><br><span class="line">		<span class="attr">&lt;/excludes&gt;</span></span><br><span class="line">	<span class="attr">&lt;/resource&gt;</span></span><br><span class="line"><span class="attr">&lt;/resources&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>通过增加maven-jar-plugin插件，实现打包生成的jar里面排除掉对应的配置文件，新增插件配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/application-*.properties<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/logback-spring.xml<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ IDEA 设置忽略SVN文件和文件夹无效.</title>
    <url>/IntelliJ/blogs/IntelliJ%20IDEA%20%E8%AE%BE%E7%BD%AE%E5%BF%BD%E7%95%A5SVN%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E5%A4%B9%E6%97%A0%E6%95%88/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>SpringBoot: 2.2.6.RELEASE<br>SpringCloud: 2021.0.5<br>nacos: nacos-2.1.1<br>mybatis-plus: 3.3.1<br>Java： 1.8<br>idea: 2018.2.1</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>idea设置了SVN忽略target目录，但发现部分模块设置之后没有效果，即使新增了changelist，也会自动恢复到默认变更列表。</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>Intellij idea中设置忽略提交svn文件和文件夹，通过Settings -&gt; Version Control -&gt; Ignored Files设置</p>
<p><img src="/images/intelliJ/intelliJ_2023_12_08_001.png" alt="SVN设置忽略目录"></p>
<p>新增忽略设置<br><img src="/images/intelliJ/intelliJ_2023_12_08_002.png" alt="SVN设置忽略目录"><br> 这里有三个单选框，功能从上到下依次是<br>忽略指定的文件；<br>忽略文件夹下所有文件；<br>忽略符合匹配规则的文件。</p>
<p>设置完成后发现对应模块下，target目录下的内容依旧出现在变更列表里面,查询SVN上的模块的上传记录，发现target目录的文件已经被上传到了SVN服务器，导致intelj设置的忽略完全没用作用</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>通过tortoiseSVN登陆远程SVN目录，删除对应模块target目录，然后项目的本地目录执行SVN更新，将删除的target目录同步信息更新到本地，忽略就可以成功了。</p>
]]></content>
      <categories>
        <category>IntelliJ</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
      </tags>
  </entry>
  <entry>
    <title>基于多环境下Maven模块批量打包优化</title>
    <url>/Maven/blogs/%E5%9F%BA%E4%BA%8E%E5%A4%9A%E7%8E%AF%E5%A2%83%E4%B8%8BMaven%E6%A8%A1%E5%9D%97%E6%89%B9%E9%87%8F%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>SpringBoot: 2.2.6.RELEASE<br>SpringCloud: 2021.0.5<br>nacos: nacos-2.1.1<br>mybatis-plus: 3.3.1<br>Java： 1.8</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p> 微服务模块使用nacos作为注册中心和配置中心，在多环境下批量打包需要逐个更改对应模块的bootstrap.properties文件很耗时，实现通过根模块pom统一设置环境变量，只更改一次便可以实现所有模块nacos命令空间和生产环境变更。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>根模块定义nacos所需要的命令空间和生产环境相关变量</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nacos-addr</span>&gt;</span>10.26.0.19:8848<span class="tag">&lt;/<span class="name">nacos-addr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nacos-namespace</span>&gt;</span>6aa33a42-b841-480f-850d-d805a75ed17b<span class="tag">&lt;/<span class="name">nacos-namespace</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">profile-env</span>&gt;</span>prodtest<span class="tag">&lt;/<span class="name">profile-env</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Maven打包pom.xml添加资源占位符替换支持</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">finalName</span>&gt;</span>ffcs-admin-biz<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>application-*.properties<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/logback-spring.xml<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><filtering>true</filtering>控制在打包阶段pom.xml文件定义的propertiess变量能够通过占位符替换</p>
<p>子模块application.properties配置如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">$&#123;profile-env&#125;</span></span><br></pre></td></tr></table></figure>

<p>子模块bootstrap.properties配置如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.cloud.nacos.discovery.username</span>=<span class="string">nacos</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.password</span>=<span class="string">nacos</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.server-addr</span>=<span class="string">$&#123;nacos-addr&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.namespace</span>=<span class="string">$&#123;nacos-namespace&#125;</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.file-extension</span>=<span class="string">properties</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.refresh-enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.prefix</span>=<span class="string">ffcs-admin</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.group</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#扩展文件的id</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[0].data-id</span>=<span class="string">logback-spring.xml</span></span><br><span class="line"><span class="comment">#扩展文件所在的组，默认为DEFAULT_GROUP</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[0].group</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#是否实时刷新</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[0].refresh</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.main.allow-bean-definition-overriding</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">ffcs-admin</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot加载Nacos动态下发logback-spring.xml</title>
    <url>/SpringBoot/blogs/SpringBoot%E5%8A%A0%E8%BD%BDNacos%E5%8A%A8%E6%80%81%E4%B8%8B%E5%8F%91logback-spring.xml/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-bluedebug%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%8E%92%E9%99%A4%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BE%9D%E8%B5%96%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BAspan"><span id="inline-blue">debug模式下排除第三方依赖日志输出</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>SpringBoot: 2.2.6.RELEASE<br>SpringCloud: 2021.0.5<br>nacos: nacos-2.1.1<br>mybatis-plus: 3.3.1<br>Java： 1.8</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p> 微服务模块使用nacos作为注册中心和配置中心，但logback-spring.xml打包后放置在jar内部，导致每次启动都需要重新启动，需要实现通过nacos下发各个模块共用的logback-spring.xml文件，logback-spring.xml文件更改立即生效</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>nacos新增公共配置文件common.properties，内容如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">logging.config</span>=<span class="string">http://$&#123;spring.cloud.nacos.config.server-addr&#125;/nacos/v1/cs/configs?group=DEFAULT_GROUP&amp;tenant=$&#123;spring.cloud.nacos.config.namespace&#125;&amp;username=$&#123;spring.cloud.nacos.discovery.username&#125;&amp;password=$&#123;spring.cloud.nacos.discovery.password&#125;&amp;dataId=logback-spring.xml</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>项目本地bootstrap.properties启动加载common.properties配置如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#扩展文件的id</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[0].data-id</span>=<span class="string">common.properties</span></span><br><span class="line"><span class="comment">#扩展文件所在的组，默认为DEFAULT_GROUP</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[0].group</span>=<span class="string">DEFAULT_GROUP</span></span><br><span class="line"><span class="comment">#是否实时刷新</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.config.extension-configs[0].refresh</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.main.allow-bean-definition-overriding</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">ffcs-admin</span></span><br></pre></td></tr></table></figure>
<p>上述配置指定nacos扩展配置文件为common.properties，支持自动刷新，spring.application.name本来一开始是配置在application.properties里面，但测试之后发现每次都会导致在指定日志目录下生成类似is_undefined文件夹，发现是由于logback-spring.xml文件里面引用了spring.application.name,但bootstrap.properties文件的加载优先级高于application.properties,所以将spring.application.name属性配置在bootstrap.properties文件里面</p>
<p>nacos配置管理后台新增logback-spring.xml配置如下：<br><img src="/images/SpringBoot/SpringBoot_20231205_001.png" alt="logback-spring.xml配置"></p>
<p>logback-spring.xml整合不同级别日志输出到不同文件下，logback-spring.xml完整配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">&quot;true&quot;</span> <span class="attr">scanPeriod</span>=<span class="string">&quot;10 seconds&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>nacos<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- name的值是变量的名称，value的值时变量定义的值。通过定义的值会被插入到logger上下文中。定义变量后，可以使“$&#123;&#125;”来使用变量。 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProperty</span> <span class="attr">scope</span>=<span class="string">&quot;context&quot;</span> <span class="attr">name</span>=<span class="string">&quot;spring.application.name&quot;</span> <span class="attr">source</span>=<span class="string">&quot;spring.application.name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;log.path&quot;</span> <span class="attr">value</span>=<span class="string">&quot;./logs/$&#123;spring.application.name&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 彩色日志 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 彩色日志依赖的渲染类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conversionRule</span> <span class="attr">conversionWord</span>=<span class="string">&quot;clr&quot;</span> <span class="attr">converterClass</span>=<span class="string">&quot;org.springframework.boot.logging.logback.ColorConverter&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conversionRule</span> <span class="attr">conversionWord</span>=<span class="string">&quot;wex&quot;</span> <span class="attr">converterClass</span>=<span class="string">&quot;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conversionRule</span> <span class="attr">conversionWord</span>=<span class="string">&quot;wEx&quot;</span> <span class="attr">converterClass</span>=<span class="string">&quot;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 彩色日志格式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE_LOG_PATTERN&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;CONSOLE_LOG_PATTERN:-%clr(%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;)&#123;faint&#125; %clr($&#123;LOG_LEVEL_PATTERN:-%5p&#125;) %clr($&#123;PID:- &#125;)&#123;magenta&#125; %clr(---)&#123;faint&#125; %clr([%15.15t])&#123;faint&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %clr(:)&#123;faint&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--输出到控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置字符集 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--输出到文件--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 DEBUG 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;TRACE_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/trace/log_trace.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志归档 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/trace/log-trace-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录debug级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>trace<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 DEBUG 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/debug/log_debug.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 日志归档 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/debug/log-debug-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录debug级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>debug<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 INFO 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/info/log_info.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 每天日志归档路径以及格式 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/info/log-info-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录info级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>info<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 WARN 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;WARN_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/warn/log_warn.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 此处设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/warn/log-warn-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录warn级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>warn<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 ERROR 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ERROR_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/error/log_error.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 此处设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/error/log-error-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录ERROR级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--开发环境:打印控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;logger name=&quot;com.amor.base&quot; level=&quot;debug&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--additivity属性为false，表示此loger的打印信息不再向上级传递，</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;com.ffcs.platform&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;org.apache.ibatis&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;java.sql.Connection&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;java.sql.Statement&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;java.sql.PreparedStatement&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;java.sql.ResultSet&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;com.baomidou.mybatisplus&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;jdbc.connection&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;jdbc.resultset&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;jdbc.resultsettable&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;logger name=&quot;org.springframework.jdbc&quot; level=&quot;DEBUG&quot; additivity=&quot;true&quot;/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;TRACE_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN_FILE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--开发环境:打印控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;logger name=&quot;com.amor.base&quot; level=&quot;debug&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--additivity属性为false，表示此loger的打印信息不再向上级传递，--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.ffcs.platform&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--生产环境:输出到文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;prod&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR_FILE&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN_FILE&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--开发环境:打印控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;prodtest&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;logger name=&quot;com.amor.base&quot; level=&quot;debug&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--additivity属性为false，表示此loger的打印信息不再向上级传递，--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.ffcs.platform&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>filter说明：</p>
<table>
<thead>
<tr>
<th align="center">过滤器</th>
<th align="center">来源</th>
<th align="center">说明</th>
<th align="center">相对常用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">LevelFilter</td>
<td align="center">Filter</td>
<td align="center">对指定level的日志进行记录(或不记录)，对不等于指定level的日志不记录(或进行记录)</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">ThresholdFilter</td>
<td align="center">Filter</td>
<td align="center">对大于或等于指定level的日志进行记录(或不记录)，对小于指定level的日志不记录(或进行记录)提示：info级别是大于debug的</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">EvaluatorFilter</td>
<td align="center">Filter</td>
<td align="center">对满足指定表达式的日志进行记录(或不记录)，对不满足指定表达式的日志不作记录(或进行记录)</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">MDCFilter</td>
<td align="center">TurboFilter</td>
<td align="center">若MDC域中存在指定的key-value，则进行记录，否者不作记录</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">DuplicateMessageFilter</td>
<td align="center">TurboFilter</td>
<td align="center">根据配置不记录多余的重复的日志</td>
<td align="center">是</td>
</tr>
<tr>
<td align="center">MarkerFilter</td>
<td align="center">TurboFilter</td>
<td align="center">针对带有指定标记的日志，进行记录(或不作记录)</td>
<td align="center">否</td>
</tr>
</tbody></table>
<p>微服务模块application-${spring.profiles.active}.properties配置文件增加指定日志级别配置项logging.level.com.ffcs.platform,指定当前模块包路径日志输出级别</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">logging.level.com.ffcs.platform</span>=<span class="string">INFO</span></span><br></pre></td></tr></table></figure>
<h1><span id="debug模式下排除第三方依赖日志输出"><span id="inline-blue">debug模式下排除第三方依赖日志输出</span></span></h1><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">logging.level.com.ffcs.platform</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">logging.level.com.alibaba.nacos.shaded.io.grpc.netty.shaded.io.grpc.netty</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">logging.level.com.netflix.loadbalancer.BaseLoadBalancer</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">logging.level.org.apache.http</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">logging.level.org.springframework</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">logging.level.com.netflix.loadbalancer</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">logging.level.org.mybatis.spring.SqlSessionUtils</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">logging.level.io.undertow</span>=<span class="string">ERROR</span></span><br><span class="line"><span class="meta">logging.level.org.elasticsearch.client.RestClient</span>=<span class="string">ERROR</span></span><br></pre></td></tr></table></figure>
<p>指定项目包路径com.ffcs.platform下，输出级别为DEBUG,其他依赖的级别设置为ERROR，该方法在logback-spring.xml文件设置logger无效，如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开发环境:打印控制台--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--&lt;logger name=&quot;com.amor.base&quot; level=&quot;debug&quot;/&gt;--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--additivity属性为false，表示此loger的打印信息不再向上级传递，--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/SpringBoot/SpringBoot_20231205_002.png" alt="验证"></p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
        <tag>Nacos</tag>
        <tag>Logback</tag>
      </tags>
  </entry>
  <entry>
    <title>Jetty输出容器日志</title>
    <url>/Jetty/blogs/Jetty%E8%BE%93%E5%87%BA%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Jetty: jetty-9.4.42.v20210604<br>Java： 1.8.0_31</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>如果您不执行任何操作来配置单独的日志记录框架，Jetty将默认使用内部org.eclipse.jetty.util.log.StdErrLog实施。这会将所有日志记录事件输出到STDERR（aka System.err ）。<br>Jetty发行版中包含一个名为的日志模块console-capture能够简单捕获所有STDOUT（ System.out ）和STDERR（ System.err ）输出到每天轮换的文件。<br>Jetty部署应用经常503，只打印对应的应用程序日志，无法进一步跟踪错误原因，通过增加配置输出Jetty容器的日志.</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>Jetty启动增加两个默认依赖模块<br>console-capture<br>logging-jetty</p>
<p>激活console-capture方式：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[my-base]$</span><span class="bash"> java -jar ../start.jar --add-to-start=console-capture</span></span><br><span class="line">INFO  : console-capture initialized in $&#123;jetty.base&#125;/start.d/console-capture.ini</span><br><span class="line">MKDIR : $&#123;jetty.base&#125;/logs</span><br><span class="line">INFO  : Base directory was modified</span><br><span class="line"></span><br><span class="line"><span class="meta">[my-base]$</span><span class="bash"> tree</span></span><br><span class="line">.</span><br><span class="line">├── logs</span><br><span class="line">└── start.d</span><br><span class="line">    └── console-capture.ini</span><br></pre></td></tr></table></figure>
<p>激活对应的依赖之后再次启动不需要再添加对应参数，console-capture激活之后日志输出的默认配置将创建一个文件${jetty.base}/logs/yyyy_mm_dd.stderrout.log通过设置jetty.logs属性<br>默认情况下，未将日志设置为附加，这意味着在服务器重新启动后会清除干净日志文件。您可以通过编辑console-capture.ini并取消注释读取的行jetty.console-capture.append=true</p>
<p>只是启用console-capture只会将STDERR和STDOUT的值输出到日志文件。要进一步自定义日志，请使用一个名为logging-jetty可用于提供要配置的默认属性文件。与console-capture ，您激活logging-jetty在命令行上。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">[my-base]$</span><span class="bash"> java -jar ../start.jar --add-to-start=logging-jetty</span></span><br><span class="line">INFO  : logging-jetty   initialized in $&#123;jetty.base&#125;/start.d/logging-jetty.ini</span><br><span class="line">INFO  : resources       transitively enabled</span><br><span class="line">MKDIR : $&#123;jetty.base&#125;/resources</span><br><span class="line">COPY  : $&#123;jetty.home&#125;/modules/logging-jetty/resources/jetty-logging.properties to $&#123;jetty.base&#125;/resources/jetty-logging.properties</span><br><span class="line">INFO  : Base directory was modified</span><br><span class="line"></span><br><span class="line"><span class="meta">[my-base]$</span><span class="bash"> tree</span></span><br><span class="line">.</span><br><span class="line">├── logs</span><br><span class="line">├── resources</span><br><span class="line">│   └── jetty-logging.properties</span><br><span class="line">└── start.d</span><br><span class="line">    ├── console-capture.ini</span><br><span class="line">    └── logging-jetty.ini</span><br></pre></td></tr></table></figure>
<p>激活后，您可以在以下位置找到属性文件${jetty.base}/resources/jetty-logging.properties 。默认情况下，定义以下参数。要更改它们，请取消注释该行，并替换您的命名方案和配置选择。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Force jetty logging implementation</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">org.eclipse.jetty.util.log.class=org.eclipse.jetty.util.log.StdErrLog</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Set logging levels from: ALL, DEBUG, INFO, WARN, OFF</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">org.eclipse.jetty.LEVEL=INFO</span></span><br><span class="line"><span class="meta">#</span><span class="bash">com.example.LEVEL=INFO</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Hide stacks traces in logs?</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">com.example.STACKS=<span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Show the source file of a log location?</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">com.example.SOURCE=<span class="literal">false</span></span></span><br></pre></td></tr></table></figure>

<p>可以在配置中定义许多属性，这些属性会影响StdErr日志记录的行为。 console-capture 。<br>.LEVEL=<br>设置范围内所有记录器的记录级别name指定的级别，可以是（按限制顺序递增） ALL ， DEBUG ， INFO ， WARN ， OFF 。名称（或层次结构）可以是特定的完全限定的类或包名称空间。例如， org.eclipse.jetty.http.LEVEL=DEBUG是一种程序包名称空间方法，用于将Jetty HTTP程序包中的所有记录程序转换为DEBUG级别，并且org.eclipse.jetty.io.ChanelEndPoint.LEVEL=ALL打开特定类的所有日志记录事件，包括DEBUG ， INFO ， WARN （甚至是特殊的内部忽略的异常类）。如果有多个系统属性指定了日志记录级别，则应用最具体的级别。<br>.SOURCE=<br>命名为特定于Logger的日志，尝试打印Java源文件名和行号，从中记录日志事件。名称必须是完全限定的类名称（此可配置项不支持程序包名称层次结构）。默认为false。请注意，这是一个缓慢的操作，并且会影响性能。<br>.STACKS=<br>特定于Logger的名称，控制堆栈跟踪的显示。名称必须是完全限定的类名称（此可配置项不支持程序包名称层次结构）。默认为true。<br>org.eclipse.jetty.util.log.stderr.SOURCE=<br>特殊全局配置。尝试打印记录事件起源的Java源文件名和行号。默认为false。<br>org.eclipse.jetty.util.log.stderr.LONG=<br>特殊全局配置。如果为true，则将记录事件输出到STDERR使用长格式的完全合格的类名。如果为false，则使用缩写的软件包名称。默认为false。</p>
<p>设置为false时的示例：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2016-10-21 15:31:01.248:INFO::main: Logging initialized @332ms to org.eclipse.jetty.util.log.StdErrLog</span><br><span class="line">2016-10-21 15:31:01.370:INFO:oejs.Server:main: jetty-9.4.0-SNAPSHOT</span><br><span class="line">2016-10-21 15:31:01.400:INFO:oejs.AbstractConnector:main: Started ServerConnector@2c330fbc&#123;HTTP/1.1,[http/1.1]&#125;&#123;0.0.0.0:8080&#125;</span><br><span class="line">2016-10-21 15:31:01.400:INFO:oejs.Server:main: Started @485ms</span><br></pre></td></tr></table></figure>

<p>设置为true时的示例：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2016-10-21 15:31:35.020:INFO::main: Logging initialized @340ms to org.eclipse.jetty.util.log.StdErrLog</span><br><span class="line">2016-10-21 15:31:35.144:INFO:org.eclipse.jetty.server.Server:main: jetty-9.4.0-SNAPSHOT</span><br><span class="line">2016-10-21 15:31:35.174:INFO:org.eclipse.jetty.server.AbstractConnector:main: Started ServerConnector@edf4efb&#123;HTTP/1.1,[http/1.1]&#125;&#123;0.0.0.0:8080&#125;</span><br><span class="line">2016-10-21 15:31:35.175:INFO:org.eclipse.jetty.server.Server:main: Started @495ms</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Jetty</category>
      </categories>
      <tags>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>Java通过Jsch工具连接Linux服务器执行shell命令连接异常</title>
    <url>/Java/blogs/Java%E9%80%9A%E8%BF%87Jsch%E5%B7%A5%E5%85%B7%E8%BF%9E%E6%8E%A5Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%89%A7%E8%A1%8Cshell%E5%91%BD%E4%BB%A4%E8%BF%9E%E6%8E%A5%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%80%9D%E8%B7%AFspan"><span id="inline-blue">问题排查思路</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Linux: Red Hat Enterprise Linux Server release 6.8 (Santiago)<br>Java： 1.8.0_31</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>JavaWeb项目后台管理nginx所在IP、端口、用户名、密码，后台管理页面通过页面定时请求nginx服务器端口连接数，nginx服务启动成功后发现页面一直显示连接异常，浏览器F12条件下查看接口返回结果，发现数据对应nginx状态值错误，接口请求返回需要10秒钟左右。<br>Jsch工具包连接Linux服务器的情况下，执行的shell命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lsof -i:8088 | grep nginx | wc -l</span><br></pre></td></tr></table></figure>
<p>通过xshell登陆服务器执行命令的情况下，连接数统计正常。<br>Jsch工具类实现如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.flysee.version.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.IOUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jcraft.jsch.ChannelExec;</span><br><span class="line"><span class="keyword">import</span> com.jcraft.jsch.ChannelSftp;</span><br><span class="line"><span class="keyword">import</span> com.jcraft.jsch.ChannelShell;</span><br><span class="line"><span class="keyword">import</span> com.jcraft.jsch.JSch;</span><br><span class="line"><span class="keyword">import</span> com.jcraft.jsch.Session;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShellService</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 执行命令</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">runCommand</span><span class="params">(Session session, String command, OutputStream out, InfoDecorator decorator,<span class="keyword">int</span> timeout)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">long</span> timeStart = System.currentTimeMillis();</span><br><span class="line">		ChannelExec channel = (ChannelExec)session.openChannel(<span class="string">&quot;exec&quot;</span>);		</span><br><span class="line">		decorator.command(out, command);</span><br><span class="line">		channel.setCommand(command);</span><br><span class="line">		channel.connect();</span><br><span class="line">			</span><br><span class="line">		ByteArrayOutputStream errOut = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">		channel.setErrStream(errOut);</span><br><span class="line">		InputStream in = channel.getInputStream();  </span><br><span class="line">		BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in, <span class="string">&quot;UTF-8&quot;</span>));  </span><br><span class="line">		String line = <span class="keyword">null</span>;</span><br><span class="line">		Writer writer = <span class="keyword">new</span> OutputStreamWriter(out, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">		<span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;  </span><br><span class="line">			line = decorator == <span class="keyword">null</span> ? line : decorator.line(line);</span><br><span class="line">			writer.write(line);</span><br><span class="line">			writer.flush();</span><br><span class="line">			<span class="keyword">if</span>(System.currentTimeMillis()&gt;timeStart+timeout)&#123;<span class="comment">//超时</span></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		in.close();</span><br><span class="line">		<span class="keyword">if</span>(decorator != <span class="keyword">null</span> &amp;&amp; errOut.toByteArray().length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">			decorator.error(out, <span class="keyword">new</span> String(errOut.toByteArray(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">        channel.disconnect();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 执行命令</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">runCommand</span><span class="params">(Session session, String command, OutputStream out, InfoDecorator decorator)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		ChannelExec channel = (ChannelExec)session.openChannel(<span class="string">&quot;exec&quot;</span>);		</span><br><span class="line">		decorator.command(out, command);</span><br><span class="line">		channel.setCommand(command);</span><br><span class="line">		channel.connect();</span><br><span class="line">			</span><br><span class="line">		ByteArrayOutputStream errOut = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">		channel.setErrStream(errOut);</span><br><span class="line">		InputStream in = channel.getInputStream();  </span><br><span class="line">		BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in, <span class="string">&quot;UTF-8&quot;</span>));  </span><br><span class="line">		String line = <span class="keyword">null</span>;</span><br><span class="line">		Writer writer = <span class="keyword">new</span> OutputStreamWriter(out, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">		<span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;  </span><br><span class="line">			line = decorator == <span class="keyword">null</span> ? line : decorator.line(line);</span><br><span class="line">			writer.write(line);</span><br><span class="line">			writer.flush();</span><br><span class="line">		&#125;</span><br><span class="line">		in.close();</span><br><span class="line">		<span class="keyword">if</span>(decorator != <span class="keyword">null</span> &amp;&amp; errOut.toByteArray().length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">			decorator.error(out, <span class="keyword">new</span> String(errOut.toByteArray(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">        channel.disconnect();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">runShell</span><span class="params">(Session session, String command, OutputStream out, String[] returnKeyWords, </span></span></span><br><span class="line"><span class="function"><span class="params">			InfoDecorator decorator)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		ChannelShell channel = (ChannelShell)session.openChannel(<span class="string">&quot;shell&quot;</span>);		</span><br><span class="line">		channel.connect();</span><br><span class="line">		OutputStream output = channel.getOutputStream();</span><br><span class="line">		decorator.command(out, command);</span><br><span class="line">		output.write((command + <span class="string">&quot;\n&quot;</span>).getBytes());</span><br><span class="line">		output.flush();			</span><br><span class="line">			</span><br><span class="line">		InputStream in = channel.getInputStream();  </span><br><span class="line">		BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in, <span class="string">&quot;UTF-8&quot;</span>));  </span><br><span class="line">		String line = <span class="keyword">null</span>;  </span><br><span class="line">		Writer writer = <span class="keyword">new</span> OutputStreamWriter(out, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">		<span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;  </span><br><span class="line">			line = decorator == <span class="keyword">null</span> ? line : decorator.line(line);</span><br><span class="line">			writer.write(line);</span><br><span class="line">			writer.flush();</span><br><span class="line">			<span class="keyword">for</span>(String returnKeyWord :returnKeyWords)&#123;</span><br><span class="line">				<span class="keyword">if</span>(line.indexOf(returnKeyWord) &gt; -<span class="number">1</span>)&#123;</span><br><span class="line">					in.close();</span><br><span class="line">					channel.disconnect();</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">uploadFile</span><span class="params">(Session session, File sourceFile, String dst)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		ChannelSftp  channel = (ChannelSftp)session.openChannel(<span class="string">&quot;sftp&quot;</span>);		</span><br><span class="line">		channel.connect();</span><br><span class="line">		channel.cd(dst);</span><br><span class="line">		OutputStream output = channel.put(sourceFile.getName());</span><br><span class="line">		InputStream input = <span class="keyword">new</span> FileInputStream(sourceFile);</span><br><span class="line">		IOUtils.copy(input, output);</span><br><span class="line">		input.close();</span><br><span class="line">        output.close();</span><br><span class="line">        channel.disconnect();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">uploadFile</span><span class="params">(Session session, String source, String dst)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		File sourceFile = <span class="keyword">new</span> File(source);</span><br><span class="line">		uploadFile(session, sourceFile, dst);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 创建会话</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Session <span class="title">createSession</span><span class="params">(String ip, String name, String password, <span class="keyword">int</span> port)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		JSch jsch = <span class="keyword">new</span> JSch();</span><br><span class="line">		Session session = jsch.getSession(name, ip, port);</span><br><span class="line">		session.setPassword(password);</span><br><span class="line">		Properties config = <span class="keyword">new</span> Properties();  </span><br><span class="line">		config.put(<span class="string">&quot;StrictHostKeyChecking&quot;</span>, <span class="string">&quot;no&quot;</span>);  </span><br><span class="line">		session.setConfig(config);  </span><br><span class="line">		session.connect();</span><br><span class="line">		<span class="keyword">return</span> session;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">interface</span> <span class="title">InfoDecorator</span></span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tip</span><span class="params">(OutputStream out, String tip)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">command</span> <span class="params">(OutputStream out, String command)</span>  <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">error</span> <span class="params">(OutputStream out, String error)</span>  <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">line</span><span class="params">(String line)</span>  <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">style</span><span class="params">(OutputStream out)</span>  <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中主要调用了runCommand方法实现执行shell命令，后台页面日志没有输出异常信息。<br>并且同样的应用程序部署到其他服务器是正常的，所以大概是由于服务器的原因造成的。</p>
<h1><span id="问题排查思路"><span id="inline-blue">问题排查思路</span></span></h1><p>页面提示nginx连接异常，做出以下尝试<br>1、将nginx服务移动到应用程序所在服务器，问题依然存在。<br>2、删除已有nginx连接配置信息，重新配置，问题依然存在。<br>3、检查服务器系统版本、JDK版本与正常版本差异，发现并无差异。<br>4、发现后台管理有配置域名,nginx请求代理有使用域名，猜测可能是由于域名解析导致。</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>应用程序所在服务器配置了错误的域名解析，导致每次请求都要经过错误的域名解析，导致请求超时。<br>配置文件所在路径： /etc/resolv.conf<br><img src="/images/Java/Java_20231122_001.png" alt="域名解析配置"></p>
<p>/etc/resolv.conf 中的两个配置项 search 和 options ndots 的意义：<br>search 代表域名搜索顺序<br>options：选项      ndots ：代表域名中点号.(dot)的个数<br>如下配置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">search openstacklocal novalocal</span><br><span class="line">nameserver 10.26.0.3</span><br><span class="line">options ndots:3</span><br></pre></td></tr></table></figure>
<p>说明：当给定的域名不是 FQDN（完全限定名），并且域名中的 “.” 数量小于ndots 5个，将按照 search 的顺序进行解析。<br>FQDN：ik.com. 这种形式的就是完全限定名，ik.com不是完全限定名<br>当访问 ik.com 的时候 因为只有 3 个点，少于 ndots 的数量，那么解析将会按照如下顺序进行：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ik.com.openstacklocal</span><br><span class="line">ik.com.novalocal</span><br><span class="line">ik.com</span><br></pre></td></tr></table></figure>
<p>参考连接：<a href="https://cloud.tencent.com/developer/article/2267366">https://cloud.tencent.com/developer/article/2267366</a></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL存储过程全量导出csv数据文件</title>
    <url>/MySQL/blogs/MySQL%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%85%A8%E9%87%8F%E5%AF%BC%E5%87%BAcsv%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a><ul>
<li><a href="#mysql%E5%BC%80%E5%90%AF%E5%AF%BC%E5%87%BA%E9%85%8D%E7%BD%AE">MySQL开启导出配置</a></li>
<li><a href="#%E5%AF%BC%E5%85%A5%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">导入存储过程</a></li>
<li><a href="#%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">调用存储过程</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1">配置系统定时任务</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>MySQL:5.7</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>将数据库指定表全量导出到csv文件，并上传至指定位置，采用存储过程实现。</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><h2><span id="mysql开启导出配置">MySQL开启导出配置</span></h2><p><img src="/images/mysql/mysql_20231110_001.png" alt="导出配置"></p>
<p>查看官方文档，secure_file_priv参数用于限制LOAD DATA, SELECT …OUTFILE, LOAD_FILE()传到哪个指定目录。</p>
<p>secure_file_priv 为 NULL 时，表示限制mysqld不允许导入或导出。<br>secure_file_priv 为 /tmp 时，表示限制mysqld只能在/tmp目录中执行导入导出，其他目录不能执行。<br>secure_file_priv 没有值时，表示不限制mysqld在任意目录的导入导出，但必须为mysql用户赋予对应目录权限，否则提示权限不足。</p>
<p>为mysql用户赋予导出目录权限命令如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chown -R mysql:mysql /dataExport  </span><br></pre></td></tr></table></figure>
<h2><span id="导入存储过程">导入存储过程</span></h2><p>将存储过程SQL脚本上传至MySQL服务器/tmp目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /tmp  </span><br><span class="line">mysql -uroot -pcoship  </span><br><span class="line">use nanjing_iepg;  </span><br><span class="line">source ExportOnlineTvBox.sql;  </span><br><span class="line">exit;  </span><br></pre></td></tr></table></figure>
<p>存储过程内容如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">SQLyog Ultimate v12.3.1 (64 bit)</span></span><br><span class="line"><span class="comment">MySQL - 5.7.33-log : Database - nanjing_iepg_v270</span></span><br><span class="line"><span class="comment">*********************************************************************</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET NAMES utf8 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=&#x27;&#x27;*/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE=&#x27;NO_AUTO_VALUE_ON_ZERO&#x27; */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;</span><br><span class="line"><span class="comment">/* Procedure structure for procedure `ExportOnlineTvBox` */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!50003 DROP PROCEDURE IF EXISTS  `ExportOnlineTvBox` */</span>;</span><br><span class="line"></span><br><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!50003 CREATE DEFINER=`root`@`%` PROCEDURE `ExportOnlineTvBox`(IN PATH varchar(255),IN size INT(10))</span></span><br><span class="line"><span class="comment">BEGIN</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 /**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		数据文件导出日期 eg:2023-11-08</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 <span class="keyword">DECLARE</span> exportDate <span class="type">VARCHAR</span>(<span class="number">64</span>);</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	  数据文件导出路径 eg:/dataExport/2023-11-08</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 <span class="keyword">DECLARE</span> exportPath <span class="type">VARCHAR</span>(<span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		数据文件导出文件名 eg:onlineTvBox_2023-11-08_142358_0.csv</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 <span class="keyword">DECLARE</span> exportFileName <span class="type">VARCHAR</span>(<span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		分页参数,页数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 <span class="keyword">DECLARE</span> pageNum <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		分页参数,总记录数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">DECLARE</span> totalSize <span class="type">INT</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		分页参数,分页大小</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">DECLARE</span> pageSize <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="number">500000</span>;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		分页参数,总页数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">DECLARE</span> totalPage <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			分页查询，起始下标</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">DECLARE</span> startIndex <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			文件序号</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">DECLARE</span> fileNum <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	 </span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		设置文件导出日期目录</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 <span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>() <span class="keyword">INTO</span> exportDate;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		设置分页大小</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 IF size <span class="operator">&gt;</span> <span class="number">0</span> </span><br><span class="line"></span><br><span class="line">	 <span class="keyword">THEN</span> </span><br><span class="line"></span><br><span class="line">			<span class="keyword">SET</span> pageSize <span class="operator">=</span> size;</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">END</span> IF;</span><br><span class="line"></span><br><span class="line">	 </span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		获取需要导出的总记录数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> smartcard_district_relation T <span class="keyword">WHERE</span> T.appType <span class="operator">=</span> <span class="number">0</span>  <span class="keyword">INTO</span>   totalSize; </span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 分页参数,设置总页数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">	 IF totalSize<span class="operator">%</span>pageSize<span class="operator">=</span><span class="number">0</span></span><br><span class="line"></span><br><span class="line">	 <span class="keyword">THEN</span></span><br><span class="line"></span><br><span class="line">		 	<span class="keyword">SET</span> totalPage <span class="operator">=</span>  <span class="keyword">TRUNCATE</span>(totalSize<span class="operator">/</span>pageSize, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">ELSE</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">SET</span> totalPage <span class="operator">=</span> <span class="keyword">TRUNCATE</span>(totalSize<span class="operator">/</span>pageSize, <span class="number">0</span>) <span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">END</span> IF;</span><br><span class="line"></span><br><span class="line">	  </span><br><span class="line"></span><br><span class="line">	 </span><br><span class="line"></span><br><span class="line">	WHILE (pageNum <span class="operator">&lt;</span> totalPage)   do</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		   对分页的起始下标计算，以便分页查询时使用</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		**/</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">SET</span> startIndex <span class="operator">=</span> pageNum <span class="operator">*</span>pageSize;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">				设置导出文件名,onlineTvBox_2023-11-08_142358_0.csv</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		**/</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">SET</span> exportFileName <span class="operator">=</span> CONCAT(&quot;onlineTvBox_&quot;,DATE_FORMAT(<span class="built_in">CURRENT_TIMESTAMP</span>,&quot;%Y-%m-%d_%H%i%s&quot;),&quot;_&quot;,fileNum,&quot;.csv&quot;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			设置导出文件的绝对路径，兼容@@secure_file_priv为空和非&quot;/&quot;结尾的情况</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		**/</span></span><br><span class="line"></span><br><span class="line">		IF path <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>  <span class="keyword">THEN</span></span><br><span class="line"></span><br><span class="line">			 <span class="keyword">SET</span> exportPath <span class="operator">=</span> CONCAT(&quot;/tmp/&quot;,exportFileName);</span><br><span class="line"></span><br><span class="line">	 ELSEIF (<span class="built_in">SUBSTRING</span>(path,<span class="number">-1</span>) <span class="operator">=</span><span class="string">&#x27;/&#x27;</span>) <span class="operator">=</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">SET</span> exportPath <span class="operator">=</span> CONCAT(path,&quot;/&quot;,exportFileName);</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">ELSE</span></span><br><span class="line"></span><br><span class="line">			<span class="keyword">SET</span> exportPath <span class="operator">=</span> CONCAT(path,exportFileName);</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">END</span> IF;</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">	 </span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			文件导出,SELECT INTO OUTFILE 采用预编译方式执行，规避导出文件路径不支持变量</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 **/</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">SET</span> <span class="variable">@executeSql</span><span class="operator">=</span>CONCAT(&quot;SELECT &#x27;ID&#x27;,&#x27;智能卡号&#x27;,&#x27;区域名称&#x27;,&#x27;区域码&#x27;,&#x27;状态码&#x27;,&#x27;盒子类型&#x27;,&#x27;厂商名称&#x27;,&#x27;硬件型号&#x27;,&#x27;芯片型号&#x27;,&#x27;硬件版本&#x27;,&#x27;软件版本&#x27;,&#x27;mac地址&#x27;,&#x27;机顶盒序列号&#x27;,&#x27;创建时间&#x27;</span><br><span class="line"></span><br><span class="line">UNION ALL</span><br><span class="line"></span><br><span class="line">select S.ID,S.smartCardId,S.districtCodeName,S.districtCode,S.statusCode,S.appType,S.factoryName,S.model,S.socmodel,S.hdVersion,S.softwareVersion,S.mac,S.sn,S.createTime from</span><br><span class="line"></span><br><span class="line">(</span><br><span class="line"></span><br><span class="line">		SELECT T.ID,T.smartCardId,IFNULL(T.districtCodeName,&#x27;&#x27;) AS districtCodeName,IFNULL(T.districtCode,&#x27;&#x27;) AS districtCode,IFNULL(T.statusCode,&#x27;&#x27;) AS statusCode,IFNULL(T.appType,&#x27;&#x27;) AS appType,IFNULL(T.factoryName,&#x27;&#x27;) AS factoryName,IFNULL(T.model,&#x27;&#x27;) AS model,			IFNULL(T.socmodel,&#x27;&#x27;) AS socmodel,IFNULL(T.hdVersion,&#x27;&#x27;) AS hdVersion,IFNULL(T.softwareVersion,&#x27;&#x27;) AS softwareVersion,IFNULL(T.mac,&#x27;&#x27;) AS mac,IFNULL(T.sn,&#x27;&#x27;) AS sn,T.createTime  AS createTime</span><br><span class="line"></span><br><span class="line">		FROM smartcard_district_relation T </span><br><span class="line"></span><br><span class="line">		WHERE T.appType=0 LIMIT &quot;,startIndex,&quot;,&quot;,pageSize,&quot; ) S &quot;,&quot; INTO OUTFILE \&quot;&quot;,exportPath,&quot;\&quot; FIELDS TERMINATED BY &#x27;,&#x27; </span><br><span class="line"></span><br><span class="line">		OPTIONALLY ENCLOSED BY &#x27;\&quot;<span class="string">&#x27; </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		LINES TERMINATED BY &#x27;</span>\r\n<span class="string">&#x27; &quot;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		PREPARE stmt FROM @executeSql;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		EXECUTE stmt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		DEALLOCATE PREPARE stmt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">			/**</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">				页码自增</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">			**/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		 SET pageNum = pageNum + 1;	</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		 /**</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">				文件序号自增</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		 **/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		 SET fileNum = fileNum + 1;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">		 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	END WHILE;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">END */$$</span></span><br><span class="line"><span class="string">DELIMITER ;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;</span></span><br><span class="line"><span class="string">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;</span></span><br><span class="line"><span class="string">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;</span></span><br><span class="line"><span class="string">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h2><span id="调用存储过程">调用存储过程</span></h2><p>Navicate客户端，新建查询，执行如下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">call ExportOnlineTvBox(&quot;/dataExport/&quot;, 500000);</span><br></pre></td></tr></table></figure>
<p>ExportOnlineTvBox存储过程参数说明<br> path: 导出文件的路径，该路径mysql用户必须赋予权限<br>size: 导出单个文件的记录数，excel单个文件的行数有限制，最大不能超过1048576</p>
<h2><span id="配置系统定时任务">配置系统定时任务</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/crontab</span><br></pre></td></tr></table></figure>

<p>添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">每晚凌晨一点之点执行</span></span><br><span class="line">0 1 * * * root /root/exportCsv.sh &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>exportCsv定时脚本内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">exportPath=&quot;/dataExport/&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">20231110</span></span><br><span class="line">currentDate=`date +%Y%m%d`</span><br><span class="line">mkdir -p $exportPath$currentDate</span><br><span class="line">/usr/bin/chown -R mysql:mysql $exportPath</span><br><span class="line"><span class="meta">#</span><span class="bash">添加<span class="string">&quot;\&quot;&quot;</span>转义,导出路径参数path必须使用双引号引起来，否则作为调用报错</span></span><br><span class="line">mysql -uroot -pcoship -e &quot;use nanjing_iepg_v270; call ExportOnlineTvBox(&quot;\&quot;$&#123;exportPath&#125;$&#123;currentDate&#125;\&quot;&quot;,500000);&quot;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL统计数据库表空间大小</title>
    <url>/MySQL/blogs/MySQL%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%A9%BA%E9%97%B4%E5%A4%A7%E5%B0%8F/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E7%BB%9F%E8%AE%A1sqlspan"><span id="inline-blue">统计SQL</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>MySQL:5.5</p>
<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>导出指定数据库想要先统计一下当前数据库的各个表的大小，导出之前先用truncate命令清空多余的数据。</p>
<h1><span id="统计sql"><span id="inline-blue">统计SQL</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">a.table_schema,</span><br><span class="line">a.table_name,</span><br><span class="line">round( <span class="built_in">sum</span>( DATA_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ) <span class="operator">+</span> <span class="built_in">sum</span>( INDEX_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ), <span class="number">2</span> )  <span class="keyword">AS</span> total_size_MB,</span><br><span class="line"> round( <span class="built_in">sum</span>( DATA_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ), <span class="number">2</span> ) <span class="keyword">AS</span> data_size_MB,</span><br><span class="line">round( <span class="built_in">sum</span>( INDEX_LENGTH <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> ), <span class="number">2</span> ) <span class="keyword">AS</span> index_size_MB</span><br><span class="line"><span class="keyword">FROM</span> information_schema.TABLES a</span><br><span class="line"><span class="keyword">WHERE</span> a.table_schema <span class="operator">=</span> <span class="string">&#x27;数据库名称&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> a.table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> total_size_MB</span><br><span class="line"><span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>解决Parameter &#39;albumUids&#39; not found. Available parameters are [collection, list]</title>
    <url>/Mybatis/blogs/%E8%A7%A3%E5%86%B3Parameter%20&#39;albumUids&#39;%20not%20found.%20Available%20parameters%20are%20%5Bcollection,%20list%5D/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">错误信息</span></a></li>
<li><a href="#span-idinline-blue%E8%B0%83%E7%94%A8%E9%93%BEspan"><span id="inline-blue">调用链</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a><ul>
<li><a href="#span-idinline-blue%E6%96%B9%E6%A1%88%E4%B8%80span"><span id="inline-blue">方案一</span></a></li>
<li><a href="#span-idinline-blue%E6%96%B9%E6%A1%88%E4%BA%8Cspan"><span id="inline-blue">方案二</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>mybatis: 3.5.3<br>mybatis-plus: 3.3.1</p>
<h1><span id="错误信息"><span id="inline-blue">错误信息</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Parameter &#x27;albumUids&#x27; not found. Available parameters are [collection, list]</span><br></pre></td></tr></table></figure>
<h1><span id="调用链"><span id="inline-blue">调用链</span></span></h1><p>dao层</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> List&lt;Material&gt; <span class="title">selectByAlbumUids</span><span class="params">(List&lt;String&gt; paramList)</span></span>;</span><br></pre></td></tr></table></figure>
<p>xml文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByAlbumUids&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        m.album_uid,</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;select_column_clause&quot;</span>/&gt;</span></span><br><span class="line">        from</span><br><span class="line">        tbl_material t,tbl_mid_album_material m</span><br><span class="line">        where t.uid = m.material_uid and m.album_uid in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;albumUids&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">item</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            #&#123;uid&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>1、当我们传递一个 List 实例或者数组作为参数对象传给 MyBatis,MyBatis 会自动将它包装在一个 Map 中,用名称在作为键。List 实例将会以”list” 作为键,而数组实例将会以”array”作为键。所以，当我们传递的是一个List集合时，mybatis会自动把我们的list集合包装成以list为Key值的map。</p>
<p>2、传递List类型参数时，参数类型为List，parameterType=”java.lang.String” 修改为parameterType=”java.util.List”</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><h2><span id="方案一"><span id="inline-blue">方案一</span></span></h2><p>collection=”albumUids” 修改为 collection=”list”<br>parameterType=”java.lang.String” 修改为parameterType=”java.util.List”</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByAlbumUids&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.util.List&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        m.album_uid,</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;select_column_clause&quot;</span>/&gt;</span></span><br><span class="line">        from</span><br><span class="line">        tbl_material t,tbl_mid_album_material m</span><br><span class="line">        where t.uid = m.material_uid and m.album_uid in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">item</span>=<span class="string">&quot;uid&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            #&#123;uid&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="方案二"><span id="inline-blue">方案二</span></span></h2><p>接口方法定义加上@Param(“albumUids”)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> List&lt;Material&gt; <span class="title">selectByAlbumUids</span><span class="params">(<span class="meta">@Param(&quot;albumUids&quot;)</span> List&lt;String&gt; paramList)</span></span>;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcat部署war,访问不带项目名称</title>
    <url>/Tomcat/blogs/Tomcat%E9%83%A8%E7%BD%B2war,%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%B8%A6%E9%A1%B9%E7%9B%AE%E5%90%8D%E7%A7%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Tomcat: 8.0.38<br>项目部署Tomcat之后，访问后台和接口不带项目名称</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>修改配置文件server.xml,文件所在路径：/usr/local/tomcat8/conf/server.xml<br>添加如下内容：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># path设置为&quot;&quot;,docBase设置为对应项目名称，reloadable=&quot;true&quot; 标识项目文件的修改不需要重启便可以生效</span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;&quot;</span> <span class="attr">docBase</span>=<span class="string">&quot;myproject&quot;</span> <span class="attr">reloadable</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>完整内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed to the Apache Software Foundation (ASF) under one or more</span></span><br><span class="line"><span class="comment">  contributor license agreements.  See the NOTICE file distributed with</span></span><br><span class="line"><span class="comment">  this work for additional information regarding copyright ownership.</span></span><br><span class="line"><span class="comment">  The ASF licenses this file to You under the Apache License, Version 2.0</span></span><br><span class="line"><span class="comment">  (the &quot;License&quot;); you may not use this file except in compliance with</span></span><br><span class="line"><span class="comment">  the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License.</span></span><br><span class="line"><span class="comment">--&gt;</span><span class="comment">&lt;!-- <span class="doctag">Note:</span>  A &quot;Server&quot; is not itself a &quot;Container&quot;, so you may not</span></span><br><span class="line"><span class="comment">     define subcomponents such as &quot;Valves&quot; at this level.</span></span><br><span class="line"><span class="comment">     Documentation at /docs/config/server.html</span></span><br><span class="line"><span class="comment"> --&gt;</span><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">&quot;8007&quot;</span> <span class="attr">shutdown</span>=<span class="string">&quot;SHUTDOWN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.startup.VersionLoggerListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Security listener. Documentation at /docs/config/listeners.html</span></span><br><span class="line"><span class="comment">  &lt;Listener className=&quot;org.apache.catalina.security.SecurityListener&quot; /&gt;</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--APR library loader. Documentation at /docs/apr.html --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">SSLEngine</span>=<span class="string">&quot;on&quot;</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.AprLifecycleListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Prevent memory leaks due to use of particular java/javax APIs--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Global JNDI resources</span></span><br><span class="line"><span class="comment">       Documentation at /docs/jndi-resources-howto.html</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">GlobalNamingResources</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Editable user database that can also be used by</span></span><br><span class="line"><span class="comment">         UserDatabaseRealm to authenticate users</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Resource</span> <span class="attr">auth</span>=<span class="string">&quot;Container&quot;</span> <span class="attr">description</span>=<span class="string">&quot;User database that can be updated and saved&quot;</span> <span class="attr">factory</span>=<span class="string">&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;</span> <span class="attr">name</span>=<span class="string">&quot;UserDatabase&quot;</span> <span class="attr">pathname</span>=<span class="string">&quot;conf/tomcat-users.xml&quot;</span> <span class="attr">type</span>=<span class="string">&quot;org.apache.catalina.UserDatabase&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">GlobalNamingResources</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- A &quot;Service&quot; is a collection of one or more &quot;Connectors&quot; that share</span></span><br><span class="line"><span class="comment">       a single &quot;Container&quot; <span class="doctag">Note:</span>  A &quot;Service&quot; is not itself a &quot;Container&quot;,</span></span><br><span class="line"><span class="comment">       so you may not define subcomponents such as &quot;Valves&quot; at this level.</span></span><br><span class="line"><span class="comment">       Documentation at /docs/config/service.html</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Service</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--The connectors can use a shared executor, you can define one or more named thread pools--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;Executor name=&quot;tomcatThreadPool&quot; namePrefix=&quot;catalina-exec-&quot;</span></span><br><span class="line"><span class="comment">        maxThreads=&quot;150&quot; minSpareThreads=&quot;4&quot;/&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- A &quot;Connector&quot; represents an endpoint by which requests are received</span></span><br><span class="line"><span class="comment">         and responses are returned. Documentation at :</span></span><br><span class="line"><span class="comment">         Java HTTP Connector: /docs/config/http.html (blocking &amp; non-blocking)</span></span><br><span class="line"><span class="comment">         Java AJP  Connector: /docs/config/ajp.html</span></span><br><span class="line"><span class="comment">         APR (HTTP/AJP) Connector: /docs/apr.html</span></span><br><span class="line"><span class="comment">         Define a non-SSL/TLS HTTP/1.1 Connector on port 8080</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span> <span class="attr">port</span>=<span class="string">&quot;10088&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- A &quot;Connector&quot; using the shared thread pool--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;Connector executor=&quot;tomcatThreadPool&quot;</span></span><br><span class="line"><span class="comment">               port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;</span></span><br><span class="line"><span class="comment">               connectionTimeout=&quot;20000&quot;</span></span><br><span class="line"><span class="comment">               redirectPort=&quot;8443&quot; /&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Define a SSL/TLS HTTP/1.1 Connector on port 8443</span></span><br><span class="line"><span class="comment">         This connector uses the NIO implementation that requires the JSSE</span></span><br><span class="line"><span class="comment">         style configuration. When using the APR/native implementation, the</span></span><br><span class="line"><span class="comment">         OpenSSL style configuration is required as described in the APR/native</span></span><br><span class="line"><span class="comment">         documentation --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span></span><br><span class="line"><span class="comment">               maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot;</span></span><br><span class="line"><span class="comment">               clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Define an AJP 1.3 Connector on port 8009 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;18009&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;AJP/1.3&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- An Engine represents the entry point (within Catalina) that processes</span></span><br><span class="line"><span class="comment">         every request.  The Engine implementation for Tomcat stand alone</span></span><br><span class="line"><span class="comment">         analyzes the HTTP headers included with the request, and passes them</span></span><br><span class="line"><span class="comment">         on to the appropriate Host (virtual host).</span></span><br><span class="line"><span class="comment">         Documentation at /docs/config/engine.html --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- You should set jvmRoute to support load-balancing via AJP ie :</span></span><br><span class="line"><span class="comment">    &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot; jvmRoute=&quot;jvm1&quot;&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Engine</span> <span class="attr">defaultHost</span>=<span class="string">&quot;localhost&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--For clustering, please take a look at documentation at:</span></span><br><span class="line"><span class="comment">          /docs/cluster-howto.html  (simple how to)</span></span><br><span class="line"><span class="comment">          /docs/config/cluster.html (reference documentation) --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      &lt;Cluster className=&quot;org.apache.catalina.ha.tcp.SimpleTcpCluster&quot;/&gt;</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- Use the LockOutRealm to prevent attempts to guess user passwords</span></span><br><span class="line"><span class="comment">           via a brute-force attack --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.realm.LockOutRealm&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- This Realm uses the UserDatabase configured in the global JNDI</span></span><br><span class="line"><span class="comment">             resources under the key &quot;UserDatabase&quot;.  Any edits</span></span><br><span class="line"><span class="comment">             that are performed against this UserDatabase are immediately</span></span><br><span class="line"><span class="comment">             available for use by the Realm.  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;</span> <span class="attr">resourceName</span>=<span class="string">&quot;UserDatabase&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Realm</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span> <span class="attr">appBase</span>=<span class="string">&quot;webapps&quot;</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span> <span class="attr">name</span>=<span class="string">&quot;localhost&quot;</span> <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- SingleSignOn valve, share authentication between web applications</span></span><br><span class="line"><span class="comment">             Documentation at: /docs/config/valve.html --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Access log processes all example.</span></span><br><span class="line"><span class="comment">             Documentation at: /docs/config/valve.html</span></span><br><span class="line"><span class="comment">             <span class="doctag">Note:</span> The pattern used is equivalent to using pattern=&quot;common&quot; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.valves.AccessLogValve&quot;</span> <span class="attr">directory</span>=<span class="string">&quot;logs&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;%h %l %u %t <span class="symbol">&amp;quot;</span>%r<span class="symbol">&amp;quot;</span> %s %b&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;localhost_access_log&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;.txt&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;&quot;</span> <span class="attr">docBase</span>=<span class="string">&quot;myproject&quot;</span> <span class="attr">reloadable</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Server</span>&gt;</span></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>线上Java应用程序运行一段时间后JVM崩溃问题分析</title>
    <url>/Java/blogs/%E7%BA%BF%E4%B8%8AJava%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E5%90%8EJVM%E5%B4%A9%E6%BA%83%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83span"><span id="inline-blue">项目环境</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90span"><span id="inline-blue">问题原因分析</span></a></li>
<li><a href="#span-idinline-blue%E5%8F%82%E8%80%83span"><span id="inline-blue">参考</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="项目环境"><span id="inline-blue">项目环境</span></span></h1><p>JDK: 1.8.0_31<br>系统是定时执行计算任务系统，业务代码主要是定时加载多个模块MySQL、Oracle数据库业务数据进行统计计算并更新，系统在运行一段时间之后自动停止，产生JVM奔溃日志，日志内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># A fatal error has been detected by the Java Runtime Environment:</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#  SIGSEGV (0xb) at pc=0x00007f7132432e15, pid=9824, tid=140123049871104</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># JRE version: Java(TM) SE Runtime Environment (8.0_31-b13) (build 1.8.0_31-b13)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Java VM: Java HotSpot(TM) 64-Bit Server VM (25.31-b07 mixed mode linux-amd64 compressed oops)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Problematic frame:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> V  [libjvm.so+0x858e15]  LoadKlassNode::make(PhaseGVN&amp;, Node*, Node*, TypePtr const*, TypeKlassPtr const*)+0x45</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If you would like to submit a bug report, please visit:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   http://bugreport.java.com/bugreport/crash.jsp</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"></span><br><span class="line"><span class="bash">---------------  T H R E A D  ---------------</span></span><br><span class="line"></span><br><span class="line">Current thread (0x00007f712c86c800):  JavaThread &quot;C2 CompilerThread1&quot; daemon [_thread_in_native, id=9844, stack(0x00007f70f08cd000,0x00007f70f09cd000)]</span><br><span class="line"></span><br><span class="line">siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x0000000000000010</span><br><span class="line"></span><br><span class="line">Registers:</span><br><span class="line">RAX=0x00007f70c0012e80, RBX=0x00007f70c00157c0, RCX=0x0000000000000000, RDX=0x00000000fffffff4</span><br><span class="line">RSP=0x00007f70f09c9da0, RBP=0x00007f70f09c9de0, RSI=0x00007f70dc06a9c0, RDI=0x00007f70c408b800</span><br><span class="line">R8 =0x00007f70c00157c0, R9 =0x00007f70c0012e80, R10=0x00007f70c46aa528, R11=0x00007f7132505660</span><br><span class="line">R12=0x00007f70f09cae60, R13=0x00007f70c408b800, R14=0x00007f70f09ca260, R15=0x00007f70f09ca040</span><br><span class="line">RIP=0x00007f7132432e15, EFLAGS=0x0000000000010296, CSGSFS=0x0000000000000033, ERR=0x0000000000000004</span><br><span class="line">  TRAPNO=0x000000000000000e</span><br><span class="line"></span><br><span class="line">Top of Stack: (sp=0x00007f70f09c9da0)</span><br><span class="line">0x00007f70f09c9da0:   00007f70dc06a9c0 00007f70c0012e80</span><br><span class="line">0x00007f70f09c9db0:   00007f70f09c9de0 00007f70c00157c0</span><br><span class="line">0x00007f70f09c9dc0:   00007f70c0014790 00007f70c408b800</span><br><span class="line">0x00007f70f09c9dd0:   00007f7132505660 00007f70f09ca040</span><br><span class="line">0x00007f70f09c9de0:   00007f70f09c9f00 00007f713212c736</span><br><span class="line">0x00007f70f09c9df0:   00007f70dc051540 00007f70dc0cc080</span><br><span class="line">0x00007f70f09c9e00:   00007f70f09c9e40 00007f70c426b628</span><br><span class="line">0x00007f70f09c9e10:   00007f70f09ca040 00007f70c426b628</span><br><span class="line">0x00007f70f09c9e20:   00007f70f09c9e50 00007f71321be028</span><br><span class="line">0x00007f70f09c9e30:   00007f70f09c9e50 00007f70f09cae60</span><br><span class="line">0x00007f70f09c9e40:   0000000000000000 0000000000000002</span><br><span class="line">0x00007f70f09c9e50:   00007f70c426b628 00007f70d43162f0</span><br><span class="line">0x00007f70f09c9e60:   0000000000000000 00007f70d43162f0</span><br><span class="line">0x00007f70f09c9e70:   00007f70f09c9e90 00007f7100000002</span><br><span class="line">0x00007f70f09c9e80:   00007f70d43160b0 0000000000000000</span><br><span class="line">0x00007f70f09c9e90:   00007f70dc0c5830 0000000500000004</span><br><span class="line">0x00007f70f09c9ea0:   00007f70dc0cc080 00007f00000001ae</span><br><span class="line">0x00007f70f09c9eb0:   000000c700000e4b 00007f70d43160b0</span><br><span class="line">0x00007f70f09c9ec0:   00007f70f09ca260 00007f70dc051620</span><br><span class="line">0x00007f70f09c9ed0:   0000000000000729 00007f70c426b628</span><br><span class="line">0x00007f70f09c9ee0:   00007f70f09ca040 00007f70f09c9f10</span><br><span class="line">0x00007f70f09c9ef0:   0000000000000000 00007f70f09ca138</span><br><span class="line">0x00007f70f09c9f00:   00007f70f09c9f50 00007f71324e39ca</span><br><span class="line">0x00007f70f09c9f10:   00007f70f09ca040 0000000000000000</span><br><span class="line">0x00007f70f09c9f20:   00007f7000000001 00007f70f09ca040</span><br><span class="line">0x00007f70f09c9f30:   0000000000000000 00007f70f09ca040</span><br><span class="line">0x00007f70f09c9f40:   0000000000000000 00000000000001ae</span><br><span class="line">0x00007f70f09c9f50:   00007f70f09c9f90 00007f71324e65b0</span><br><span class="line">0x00007f70f09c9f60:   00007f70f09c9f90 00007f70f09cad30</span><br><span class="line">0x00007f70f09c9f70:   00007f70dc07edc8 00007f70f09ca040</span><br><span class="line">0x00007f70f09c9f80:   000000000000001f 00007f70d4313af8</span><br><span class="line">0x00007f70f09c9f90:   00007f70f09c9fe0 00007f71324e6827 </span><br><span class="line"></span><br><span class="line">Instructions: (pc=0x00007f7132432e15)</span><br><span class="line">0x00007f7132432df5:   c0 48 8b 02 4c 8b 67 10 49 89 fe 48 89 d7 ff 50</span><br><span class="line">0x00007f7132432e05:   28 8b 50 10 31 c9 83 ea 0e 83 fa 07 48 0f 42 c8</span><br><span class="line">0x00007f7132432e15:   8b 41 10 83 e8 10 83 f8 02 0f 87 9c 01 00 00 80</span><br><span class="line">0x00007f7132432e25:   79 32 00 0f 84 92 01 00 00 49 8b 06 49 89 df 48 </span><br><span class="line"></span><br><span class="line">Register to memory mapping:</span><br><span class="line"></span><br><span class="line">RAX=0x00007f70c0012e80 is an unknown value</span><br><span class="line">RBX=0x00007f70c00157c0 is an unknown value</span><br><span class="line">RCX=0x0000000000000000 is an unknown value</span><br><span class="line">RDX=0x00000000fffffff4 is pointing into object: 0x00000000fffffff0</span><br><span class="line">[I </span><br><span class="line"> - klass: &#123;type array int&#125;</span><br><span class="line"> - length: 0</span><br><span class="line">RSP=0x00007f70f09c9da0 is pointing into the stack for thread: 0x00007f712c86c800</span><br><span class="line">RBP=0x00007f70f09c9de0 is pointing into the stack for thread: 0x00007f712c86c800</span><br><span class="line">RSI=0x00007f70dc06a9c0 is an unknown value</span><br><span class="line">RDI=0x00007f70c408b800 is an unknown value</span><br><span class="line">R8 =0x00007f70c00157c0 is an unknown value</span><br><span class="line">R9 =0x00007f70c0012e80 is an unknown value</span><br><span class="line">R10=0x00007f70c46aa528 is an unknown value</span><br><span class="line">R11=0x00007f7132505660: &lt;offset 0x92b660&gt; in /usr/java/jdk1.8.0_31/jre/lib/amd64/server/libjvm.so at 0x00007f7131bda000</span><br><span class="line">R12=0x00007f70f09cae60 is pointing into the stack for thread: 0x00007f712c86c800</span><br><span class="line">R13=0x00007f70c408b800 is an unknown value</span><br><span class="line">R14=0x00007f70f09ca260 is pointing into the stack for thread: 0x00007f712c86c800</span><br><span class="line">R15=0x00007f70f09ca040 is pointing into the stack for thread: 0x00007f712c86c800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Stack: [0x00007f70f08cd000,0x00007f70f09cd000],  sp=0x00007f70f09c9da0,  free space=1011k</span><br><span class="line">Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)</span><br><span class="line">V  [libjvm.so+0x858e15]  LoadKlassNode::make(PhaseGVN&amp;, Node*, Node*, TypePtr const*, TypeKlassPtr const*)+0x45</span><br><span class="line">V  [libjvm.so+0x552736]  Parse::catch_inline_exceptions(SafePointNode*)+0x946</span><br><span class="line">V  [libjvm.so+0x9099ca]  Parse::do_exceptions()+0xba</span><br><span class="line">V  [libjvm.so+0x90c5b0]  Parse::do_one_block()+0x180</span><br><span class="line">V  [libjvm.so+0x90c827]  Parse::do_all_blocks()+0x127</span><br><span class="line">V  [libjvm.so+0x910c18]  Parse::Parse(JVMState*, ciMethod*, float, Parse*)+0x7b8</span><br><span class="line">V  [libjvm.so+0x3e7ed9]  ParseGenerator::generate(JVMState*, Parse*)+0x99</span><br><span class="line">V  [libjvm.so+0x49356c]  Compile::Compile(ciEnv*, C2Compiler*, ciMethod*, int, bool, bool, bool)+0x126c</span><br><span class="line">V  [libjvm.so+0x3e69b8]  C2Compiler::compile_method(ciEnv*, ciMethod*, int)+0x198</span><br><span class="line">V  [libjvm.so+0x49bdea]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xc8a</span><br><span class="line">V  [libjvm.so+0x49e7c0]  CompileBroker::compiler_thread_loop()+0x620</span><br><span class="line">V  [libjvm.so+0xa2a9ef]  JavaThread::thread_main_inner()+0xdf</span><br><span class="line">V  [libjvm.so+0xa2ab1c]  JavaThread::run()+0x11c</span><br><span class="line">V  [libjvm.so+0x8e8158]  java_start(Thread*)+0x108</span><br><span class="line">C  [libpthread.so.0+0x7ea5]  start_thread+0xc5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Current CompileTask:</span><br><span class="line">C2:21839588 9300   !   4       com.mysql.cj.NativeSession::execSQL (577 bytes)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------  P R O C E S S  ---------------</span><br><span class="line"></span><br><span class="line">Java Threads: ( =&gt; current thread )</span><br><span class="line">  0x00007f70b058d800 JavaThread &quot;HikariPool-3 housekeeper&quot; daemon [_thread_blocked, id=9949, stack(0x00007f708f3fa000,0x00007f708f4fb000)]</span><br><span class="line">  0x00007f70b0012800 JavaThread &quot;InterruptTimer&quot; daemon [_thread_blocked, id=9947, stack(0x00007f708f7fc000,0x00007f708f8fd000)]</span><br><span class="line">  0x00007f70b0080000 JavaThread &quot;oracle.jdbc.driver.BlockSource.ThreadedCachingBlockSource.BlockReleaser&quot; daemon [_thread_blocked, id=9946, stack(0x00007f708fafd000,0x00007f708fbfe000)]</span><br><span class="line">  0x00007f70d48fe800 JavaThread &quot;HikariPool-2 housekeeper&quot; daemon [_thread_blocked, id=9943, stack(0x00007f708fcff000,0x00007f708fe00000)]</span><br><span class="line">  0x00007f70d484f000 JavaThread &quot;HikariPool-1 housekeeper&quot; daemon [_thread_blocked, id=9941, stack(0x00007f70cc1a9000,0x00007f70cc2aa000)]</span><br><span class="line">  0x00007f712c009000 JavaThread &quot;DestroyJavaVM&quot; [_thread_blocked, id=9826, stack(0x00007f7133678000,0x00007f7133778000)]</span><br><span class="line">  0x00007f712e514800 JavaThread &quot;Thread-10&quot; [_thread_blocked, id=9895, stack(0x00007f70cc4aa000,0x00007f70cc5ab000)]</span><br><span class="line">  0x00007f712e512800 JavaThread &quot;Thread-9&quot; [_thread_blocked, id=9894, stack(0x00007f70cc5ab000,0x00007f70cc6ac000)]</span><br><span class="line">  0x00007f712e4f9800 JavaThread &quot;http-nio-8090-Acceptor&quot; daemon [_thread_in_native, id=9893, stack(0x00007f70cc6ac000,0x00007f70cc7ad000)]</span><br><span class="line">  0x00007f712e4f6000 JavaThread &quot;http-nio-8090-Poller&quot; daemon [_thread_in_native, id=9892, stack(0x00007f70cc7ad000,0x00007f70cc8ae000)]</span><br><span class="line">  0x00007f712e4d2800 JavaThread &quot;http-nio-8090-exec-10&quot; daemon [_thread_blocked, id=9891, stack(0x00007f70ccaae000,0x00007f70ccbaf000)]</span><br><span class="line">  0x00007f712e4d0800 JavaThread &quot;http-nio-8090-exec-9&quot; daemon [_thread_blocked, id=9890, stack(0x00007f70ccbaf000,0x00007f70cccb0000)]</span><br><span class="line">  0x00007f712e4ce800 JavaThread &quot;http-nio-8090-exec-8&quot; daemon [_thread_blocked, id=9889, stack(0x00007f70cccb0000,0x00007f70ccdb1000)]</span><br><span class="line">  0x00007f712e4cc000 JavaThread &quot;http-nio-8090-exec-7&quot; daemon [_thread_blocked, id=9888, stack(0x00007f70ccdb1000,0x00007f70cceb2000)]</span><br><span class="line">  0x00007f712e4ca000 JavaThread &quot;http-nio-8090-exec-6&quot; daemon [_thread_blocked, id=9887, stack(0x00007f70cceb2000,0x00007f70ccfb3000)]</span><br><span class="line">  0x00007f712e4c8000 JavaThread &quot;http-nio-8090-exec-5&quot; daemon [_thread_blocked, id=9886, stack(0x00007f70ccfb3000,0x00007f70cd0b4000)]</span><br><span class="line">  0x00007f712e4c6800 JavaThread &quot;http-nio-8090-exec-4&quot; daemon [_thread_blocked, id=9885, stack(0x00007f70cd0b4000,0x00007f70cd1b5000)]</span><br><span class="line">  0x00007f712e4c4800 JavaThread &quot;http-nio-8090-exec-3&quot; daemon [_thread_blocked, id=9884, stack(0x00007f70cd1b5000,0x00007f70cd2b6000)]</span><br><span class="line">  0x00007f712e4c2800 JavaThread &quot;http-nio-8090-exec-2&quot; daemon [_thread_blocked, id=9883, stack(0x00007f70cd2b6000,0x00007f70cd3b7000)]</span><br><span class="line">  0x00007f712e4c1000 JavaThread &quot;http-nio-8090-exec-1&quot; daemon [_thread_blocked, id=9882, stack(0x00007f70cd3b7000,0x00007f70cd4b8000)]</span><br><span class="line">  0x00007f712e47c800 JavaThread &quot;quartzScheduler_QuartzSchedulerThread&quot; [_thread_blocked, id=9881, stack(0x00007f70cd4b8000,0x00007f70cd5b9000)]</span><br><span class="line">  0x00007f712e463000 JavaThread &quot;quartzScheduler_Worker-10&quot; [_thread_blocked, id=9880, stack(0x00007f70cd5b9000,0x00007f70cd6ba000)]</span><br><span class="line">  0x00007f712e460800 JavaThread &quot;quartzScheduler_Worker-9&quot; [_thread_blocked, id=9879, stack(0x00007f70cd6ba000,0x00007f70cd7bb000)]</span><br><span class="line">  0x00007f712e45e800 JavaThread &quot;quartzScheduler_Worker-8&quot; [_thread_blocked, id=9878, stack(0x00007f70cd7bb000,0x00007f70cd8bc000)]</span><br><span class="line">  0x00007f712e45c800 JavaThread &quot;quartzScheduler_Worker-7&quot; [_thread_blocked, id=9877, stack(0x00007f70cd8bc000,0x00007f70cd9bd000)]</span><br><span class="line">  0x00007f712e45a800 JavaThread &quot;quartzScheduler_Worker-6&quot; [_thread_blocked, id=9876, stack(0x00007f70cd9bd000,0x00007f70cdabe000)]</span><br><span class="line">  0x00007f712e458800 JavaThread &quot;quartzScheduler_Worker-5&quot; [_thread_blocked, id=9875, stack(0x00007f70e805c000,0x00007f70e815d000)]</span><br><span class="line">  0x00007f712e456800 JavaThread &quot;quartzScheduler_Worker-4&quot; [_thread_blocked, id=9874, stack(0x00007f70e815d000,0x00007f70e825e000)]</span><br><span class="line">  0x00007f712e455000 JavaThread &quot;quartzScheduler_Worker-3&quot; [_thread_blocked, id=9873, stack(0x00007f70e825e000,0x00007f70e835f000)]</span><br><span class="line">  0x00007f712e453000 JavaThread &quot;quartzScheduler_Worker-2&quot; [_thread_blocked, id=9872, stack(0x00007f70e835f000,0x00007f70e8460000)]</span><br><span class="line">  0x00007f712e451000 JavaThread &quot;quartzScheduler_Worker-1&quot; [_thread_blocked, id=9871, stack(0x00007f70e8460000,0x00007f70e8561000)]</span><br><span class="line">  0x00007f712dc59000 JavaThread &quot;mysql-cj-abandoned-connection-cleanup&quot; daemon [_thread_blocked, id=9869, stack(0x00007f70e8b61000,0x00007f70e8c62000)]</span><br><span class="line">  0x00007f712d527000 JavaThread &quot;container-0&quot; [_thread_blocked, id=9868, stack(0x00007f70e8e62000,0x00007f70e8f63000)]</span><br><span class="line">  0x00007f712da25800 JavaThread &quot;Catalina-utility-2&quot; [_thread_blocked, id=9867, stack(0x00007f70e8f63000,0x00007f70e9064000)]</span><br><span class="line">  0x00007f712da20800 JavaThread &quot;Catalina-utility-1&quot; [_thread_blocked, id=9866, stack(0x00007f70eacd6000,0x00007f70eadd7000)]</span><br><span class="line">  0x00007f709c003000 JavaThread &quot;logback-8&quot; daemon [_thread_blocked, id=9862, stack(0x00007f70ea6d2000,0x00007f70ea7d3000)]</span><br><span class="line">  0x00007f709c001000 JavaThread &quot;logback-7&quot; daemon [_thread_blocked, id=9861, stack(0x00007f70ea7d3000,0x00007f70ea8d4000)]</span><br><span class="line">  0x00007f7098005000 JavaThread &quot;logback-6&quot; daemon [_thread_blocked, id=9860, stack(0x00007f70ea8d4000,0x00007f70ea9d5000)]</span><br><span class="line">  0x00007f7098003800 JavaThread &quot;logback-5&quot; daemon [_thread_blocked, id=9859, stack(0x00007f70ea9d5000,0x00007f70eaad6000)]</span><br><span class="line">  0x00007f712d8cb800 JavaThread &quot;AsyncAppender-Worker-ASYNC_httpInfoLog&quot; daemon [_thread_blocked, id=9857, stack(0x00007f70eadd7000,0x00007f70eaed8000)]</span><br><span class="line">  0x00007f712d8ca000 JavaThread &quot;AsyncAppender-Worker-ASYNC_fileErrorLog&quot; daemon [_thread_blocked, id=9856, stack(0x00007f70eaed8000,0x00007f70eafd9000)]</span><br><span class="line">  0x00007f712d8c8000 JavaThread &quot;AsyncAppender-Worker-ASYNC_fileInfoLog&quot; daemon [_thread_blocked, id=9855, stack(0x00007f70eafd9000,0x00007f70eb0da000)]</span><br><span class="line">  0x00007f712d8c6000 JavaThread &quot;AsyncAppender-Worker-ASYNC_fileDebugLog&quot; daemon [_thread_blocked, id=9854, stack(0x00007f70eb0da000,0x00007f70eb1db000)]</span><br><span class="line">  0x00007f712d8c4800 JavaThread &quot;AsyncAppender-Worker-ASYNC_consoleLog&quot; daemon [_thread_blocked, id=9853, stack(0x00007f70eb1db000,0x00007f70eb2dc000)]</span><br><span class="line">  0x00007f712d8bc000 JavaThread &quot;logback-4&quot; daemon [_thread_blocked, id=9852, stack(0x00007f70eb2dc000,0x00007f70eb3dd000)]</span><br><span class="line">  0x00007f712d8ba800 JavaThread &quot;logback-3&quot; daemon [_thread_blocked, id=9851, stack(0x00007f70eb3dd000,0x00007f70eb4de000)]</span><br><span class="line">  0x00007f712d8b6800 JavaThread &quot;logback-2&quot; daemon [_thread_blocked, id=9850, stack(0x00007f70eb4de000,0x00007f70eb5df000)]</span><br><span class="line">  0x00007f712d8ad000 JavaThread &quot;logback-1&quot; daemon [_thread_blocked, id=9849, stack(0x00007f70f00a6000,0x00007f70f01a7000)]</span><br><span class="line">  0x00007f712c87e000 JavaThread &quot;Service Thread&quot; daemon [_thread_blocked, id=9846, stack(0x00007f70f06ca000,0x00007f70f07cb000)]</span><br><span class="line">  0x00007f712c86e800 JavaThread &quot;C1 CompilerThread2&quot; daemon [_thread_blocked, id=9845, stack(0x00007f70f07cc000,0x00007f70f08cc000)]</span><br><span class="line">=&gt;0x00007f712c86c800 JavaThread &quot;C2 CompilerThread1&quot; daemon [_thread_in_native, id=9844, stack(0x00007f70f08cd000,0x00007f70f09cd000)]</span><br><span class="line">  0x00007f712c86a000 JavaThread &quot;C2 CompilerThread0&quot; daemon [_thread_blocked, id=9843, stack(0x00007f70f09ce000,0x00007f70f0ace000)]</span><br><span class="line">  0x00007f712c868000 JavaThread &quot;Signal Dispatcher&quot; daemon [_thread_blocked, id=9842, stack(0x00007f70f0ace000,0x00007f70f0bcf000)]</span><br><span class="line">  0x00007f712c866000 JavaThread &quot;Surrogate Locker Thread (Concurrent GC)&quot; daemon [_thread_blocked, id=9841, stack(0x00007f70f0bcf000,0x00007f70f0cd0000)]</span><br><span class="line">  0x00007f712c839000 JavaThread &quot;Finalizer&quot; daemon [_thread_blocked, id=9840, stack(0x00007f70f0cd0000,0x00007f70f0dd1000)]</span><br><span class="line">  0x00007f712c836800 JavaThread &quot;Reference Handler&quot; daemon [_thread_blocked, id=9839, stack(0x00007f70f0dd1000,0x00007f70f0ed2000)]</span><br><span class="line"></span><br><span class="line">Other Threads:</span><br><span class="line">  0x00007f712c831800 VMThread [stack: 0x00007f70f0ed3000,0x00007f70f0fd3000] [id=9838]</span><br><span class="line">  0x00007f712c881800 WatcherThread [stack: 0x00007f70f05ca000,0x00007f70f06ca000] [id=9847]</span><br><span class="line"></span><br><span class="line">VM state:not at safepoint (normal execution)</span><br><span class="line"></span><br><span class="line">VM Mutex/Monitor currently owned by a thread: None</span><br><span class="line"></span><br><span class="line">Heap:</span><br><span class="line"> garbage-first heap   total 2097152K, used 388797K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 355 young (363520K), 3 survivors (3072K)</span><br><span class="line"> Metaspace       used 60202K, capacity 63104K, committed 63360K, reserved 1105920K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line"></span><br><span class="line">Heap Regions: (Y=young(eden), SU=young(survivor), HS=humongous(starts), HC=humongous(continues), CS=collection set, F=free, TS=gc time stamp, PTAMS=previous top-at-mark-start, NTAMS=next top-at-mark-start)</span><br><span class="line">            TS     9 PTAMS 0x0000000080000000 NTAMS 0x0000000080000000 space 1024K, 100% used [0x0000000080000000, 0x0000000080100000, 0x0000000080100000)</span><br><span class="line">            TS     9 PTAMS 0x0000000080100000 NTAMS 0x0000000080100000 space 1024K, 100% used [0x0000000080100000, 0x0000000080200000, 0x0000000080200000)</span><br><span class="line">            TS     9 PTAMS 0x0000000080200000 NTAMS 0x0000000080200000 space 1024K, 100% used [0x0000000080200000, 0x0000000080300000, 0x0000000080300000)</span><br><span class="line">            TS     9 PTAMS 0x0000000080300000 NTAMS 0x0000000080300000 space 1024K,  99% used [0x0000000080300000, 0x00000000803ffff8, 0x0000000080400000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080400000 NTAMS 0x0000000080400000 space 1024K, 100% used [0x0000000080400000, 0x0000000080500000, 0x0000000080500000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080500000 NTAMS 0x0000000080500000 space 1024K, 100% used [0x0000000080500000, 0x0000000080600000, 0x0000000080600000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080600000 NTAMS 0x0000000080600000 space 1024K, 100% used [0x0000000080600000, 0x0000000080700000, 0x0000000080700000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080700000 NTAMS 0x0000000080700000 space 1024K, 100% used [0x0000000080700000, 0x0000000080800000, 0x0000000080800000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080800000 NTAMS 0x0000000080800000 space 1024K, 100% used [0x0000000080800000, 0x0000000080900000, 0x0000000080900000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080900000 NTAMS 0x0000000080900000 space 1024K, 100% used [0x0000000080900000, 0x0000000080a00000, 0x0000000080a00000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080a00000 NTAMS 0x0000000080a00000 space 1024K, 100% used [0x0000000080a00000, 0x0000000080b00000, 0x0000000080b00000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080b00000 NTAMS 0x0000000080b00000 space 1024K, 100% used [0x0000000080b00000, 0x0000000080c00000, 0x0000000080c00000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080c00000 NTAMS 0x0000000080c00000 space 1024K, 100% used [0x0000000080c00000, 0x0000000080d00000, 0x0000000080d00000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080d00000 NTAMS 0x0000000080d00000 space 1024K, 100% used [0x0000000080d00000, 0x0000000080e00000, 0x0000000080e00000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080e00000 NTAMS 0x0000000080e00000 space 1024K, 100% used [0x0000000080e00000, 0x0000000080f00000, 0x0000000080f00000)</span><br><span class="line">            TS    11 PTAMS 0x0000000080f00000 NTAMS 0x0000000080f00000 space 1024K, 100% used [0x0000000080f00000, 0x0000000081000000, 0x0000000081000000)</span><br><span class="line">            TS    11 PTAMS 0x0000000081000000 NTAMS 0x0000000081000000 space 1024K, 100% used [0x0000000081000000, 0x0000000081100000, 0x0000000081100000)</span><br><span class="line">            TS    11 PTAMS 0x0000000081100000 NTAMS 0x0000000081100000 space 1024K, 100% used [0x0000000081100000, 0x0000000081200000, 0x0000000081200000)</span><br><span class="line">            TS    11 PTAMS 0x0000000081200000 NTAMS 0x0000000081200000 space 1024K, 100% used [0x0000000081200000, 0x0000000081300000, 0x0000000081300000)</span><br><span class="line">            TS    11 PTAMS 0x0000000081300000 NTAMS 0x0000000081300000 space 1024K, 100% used [0x0000000081300000, 0x0000000081400000, 0x0000000081400000)</span><br><span class="line">            TS    13 PTAMS 0x0000000081400000 NTAMS 0x0000000081400000 space 1024K, 100% used [0x0000000081400000, 0x0000000081500000, 0x0000000081500000)</span><br><span class="line">            TS    39 PTAMS 0x0000000081500000 NTAMS 0x0000000081500000 space 1024K, 100% used [0x0000000081500000, 0x0000000081600000, 0x0000000081600000)</span><br><span class="line">            TS    39 PTAMS 0x0000000081600000 NTAMS 0x0000000081600000 space 1024K, 100% used [0x0000000081600000, 0x0000000081700000, 0x0000000081700000)</span><br><span class="line">            TS    41 PTAMS 0x0000000081700000 NTAMS 0x0000000081700000 space 1024K, 100% used [0x0000000081700000, 0x0000000081800000, 0x0000000081800000)</span><br><span class="line">            TS    41 PTAMS 0x0000000081800000 NTAMS 0x0000000081800000 space 1024K, 100% used [0x0000000081800000, 0x0000000081900000, 0x0000000081900000)</span><br><span class="line">            TS    41 PTAMS 0x0000000081900000 NTAMS 0x0000000081900000 space 1024K,  85% used [0x0000000081900000, 0x00000000819daa00, 0x0000000081a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000081a00000 NTAMS 0x0000000081a00000 space 1024K,   0% used [0x0000000081a00000, 0x0000000081a00000, 0x0000000081b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000081b00000 NTAMS 0x0000000081b00000 space 1024K,   0% used [0x0000000081b00000, 0x0000000081b00000, 0x0000000081c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000081c00000 NTAMS 0x0000000081c00000 space 1024K,   0% used [0x0000000081c00000, 0x0000000081c00000, 0x0000000081d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000081d00000 NTAMS 0x0000000081d00000 space 1024K,   0% used [0x0000000081d00000, 0x0000000081d00000, 0x0000000081e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000081e00000 NTAMS 0x0000000081e00000 space 1024K,   0% used [0x0000000081e00000, 0x0000000081e00000, 0x0000000081f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000081f00000 NTAMS 0x0000000081f00000 space 1024K,   0% used [0x0000000081f00000, 0x0000000081f00000, 0x0000000082000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082000000 NTAMS 0x0000000082000000 space 1024K,   0% used [0x0000000082000000, 0x0000000082000000, 0x0000000082100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082100000 NTAMS 0x0000000082100000 space 1024K,   0% used [0x0000000082100000, 0x0000000082100000, 0x0000000082200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082200000 NTAMS 0x0000000082200000 space 1024K,   0% used [0x0000000082200000, 0x0000000082200000, 0x0000000082300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082300000 NTAMS 0x0000000082300000 space 1024K,   0% used [0x0000000082300000, 0x0000000082300000, 0x0000000082400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082400000 NTAMS 0x0000000082400000 space 1024K,   0% used [0x0000000082400000, 0x0000000082400000, 0x0000000082500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082500000 NTAMS 0x0000000082500000 space 1024K,   0% used [0x0000000082500000, 0x0000000082500000, 0x0000000082600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082600000 NTAMS 0x0000000082600000 space 1024K,   0% used [0x0000000082600000, 0x0000000082600000, 0x0000000082700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082700000 NTAMS 0x0000000082700000 space 1024K,   0% used [0x0000000082700000, 0x0000000082700000, 0x0000000082800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082800000 NTAMS 0x0000000082800000 space 1024K,   0% used [0x0000000082800000, 0x0000000082800000, 0x0000000082900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082900000 NTAMS 0x0000000082900000 space 1024K,   0% used [0x0000000082900000, 0x0000000082900000, 0x0000000082a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082a00000 NTAMS 0x0000000082a00000 space 1024K,   0% used [0x0000000082a00000, 0x0000000082a00000, 0x0000000082b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082b00000 NTAMS 0x0000000082b00000 space 1024K,   0% used [0x0000000082b00000, 0x0000000082b00000, 0x0000000082c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082c00000 NTAMS 0x0000000082c00000 space 1024K,   0% used [0x0000000082c00000, 0x0000000082c00000, 0x0000000082d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082d00000 NTAMS 0x0000000082d00000 space 1024K,   0% used [0x0000000082d00000, 0x0000000082d00000, 0x0000000082e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082e00000 NTAMS 0x0000000082e00000 space 1024K,   0% used [0x0000000082e00000, 0x0000000082e00000, 0x0000000082f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000082f00000 NTAMS 0x0000000082f00000 space 1024K,   0% used [0x0000000082f00000, 0x0000000082f00000, 0x0000000083000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083000000 NTAMS 0x0000000083000000 space 1024K,   0% used [0x0000000083000000, 0x0000000083000000, 0x0000000083100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083100000 NTAMS 0x0000000083100000 space 1024K,   0% used [0x0000000083100000, 0x0000000083100000, 0x0000000083200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083200000 NTAMS 0x0000000083200000 space 1024K,   0% used [0x0000000083200000, 0x0000000083200000, 0x0000000083300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083300000 NTAMS 0x0000000083300000 space 1024K,   0% used [0x0000000083300000, 0x0000000083300000, 0x0000000083400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083400000 NTAMS 0x0000000083400000 space 1024K,   0% used [0x0000000083400000, 0x0000000083400000, 0x0000000083500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083500000 NTAMS 0x0000000083500000 space 1024K,   0% used [0x0000000083500000, 0x0000000083500000, 0x0000000083600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083600000 NTAMS 0x0000000083600000 space 1024K,   0% used [0x0000000083600000, 0x0000000083600000, 0x0000000083700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083700000 NTAMS 0x0000000083700000 space 1024K,   0% used [0x0000000083700000, 0x0000000083700000, 0x0000000083800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083800000 NTAMS 0x0000000083800000 space 1024K,   0% used [0x0000000083800000, 0x0000000083800000, 0x0000000083900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083900000 NTAMS 0x0000000083900000 space 1024K,   0% used [0x0000000083900000, 0x0000000083900000, 0x0000000083a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083a00000 NTAMS 0x0000000083a00000 space 1024K,   0% used [0x0000000083a00000, 0x0000000083a00000, 0x0000000083b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083b00000 NTAMS 0x0000000083b00000 space 1024K,   0% used [0x0000000083b00000, 0x0000000083b00000, 0x0000000083c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083c00000 NTAMS 0x0000000083c00000 space 1024K,   0% used [0x0000000083c00000, 0x0000000083c00000, 0x0000000083d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083d00000 NTAMS 0x0000000083d00000 space 1024K,   0% used [0x0000000083d00000, 0x0000000083d00000, 0x0000000083e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083e00000 NTAMS 0x0000000083e00000 space 1024K,   0% used [0x0000000083e00000, 0x0000000083e00000, 0x0000000083f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000083f00000 NTAMS 0x0000000083f00000 space 1024K,   0% used [0x0000000083f00000, 0x0000000083f00000, 0x0000000084000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084000000 NTAMS 0x0000000084000000 space 1024K,   0% used [0x0000000084000000, 0x0000000084000000, 0x0000000084100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084100000 NTAMS 0x0000000084100000 space 1024K,   0% used [0x0000000084100000, 0x0000000084100000, 0x0000000084200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084200000 NTAMS 0x0000000084200000 space 1024K,   0% used [0x0000000084200000, 0x0000000084200000, 0x0000000084300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084300000 NTAMS 0x0000000084300000 space 1024K,   0% used [0x0000000084300000, 0x0000000084300000, 0x0000000084400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084400000 NTAMS 0x0000000084400000 space 1024K,   0% used [0x0000000084400000, 0x0000000084400000, 0x0000000084500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084500000 NTAMS 0x0000000084500000 space 1024K,   0% used [0x0000000084500000, 0x0000000084500000, 0x0000000084600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084600000 NTAMS 0x0000000084600000 space 1024K,   0% used [0x0000000084600000, 0x0000000084600000, 0x0000000084700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084700000 NTAMS 0x0000000084700000 space 1024K,   0% used [0x0000000084700000, 0x0000000084700000, 0x0000000084800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084800000 NTAMS 0x0000000084800000 space 1024K,   0% used [0x0000000084800000, 0x0000000084800000, 0x0000000084900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084900000 NTAMS 0x0000000084900000 space 1024K,   0% used [0x0000000084900000, 0x0000000084900000, 0x0000000084a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084a00000 NTAMS 0x0000000084a00000 space 1024K,   0% used [0x0000000084a00000, 0x0000000084a00000, 0x0000000084b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084b00000 NTAMS 0x0000000084b00000 space 1024K,   0% used [0x0000000084b00000, 0x0000000084b00000, 0x0000000084c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084c00000 NTAMS 0x0000000084c00000 space 1024K,   0% used [0x0000000084c00000, 0x0000000084c00000, 0x0000000084d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084d00000 NTAMS 0x0000000084d00000 space 1024K,   0% used [0x0000000084d00000, 0x0000000084d00000, 0x0000000084e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084e00000 NTAMS 0x0000000084e00000 space 1024K,   0% used [0x0000000084e00000, 0x0000000084e00000, 0x0000000084f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000084f00000 NTAMS 0x0000000084f00000 space 1024K,   0% used [0x0000000084f00000, 0x0000000084f00000, 0x0000000085000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085000000 NTAMS 0x0000000085000000 space 1024K,   0% used [0x0000000085000000, 0x0000000085000000, 0x0000000085100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085100000 NTAMS 0x0000000085100000 space 1024K,   0% used [0x0000000085100000, 0x0000000085100000, 0x0000000085200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085200000 NTAMS 0x0000000085200000 space 1024K,   0% used [0x0000000085200000, 0x0000000085200000, 0x0000000085300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085300000 NTAMS 0x0000000085300000 space 1024K,   0% used [0x0000000085300000, 0x0000000085300000, 0x0000000085400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085400000 NTAMS 0x0000000085400000 space 1024K,   0% used [0x0000000085400000, 0x0000000085400000, 0x0000000085500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085500000 NTAMS 0x0000000085500000 space 1024K,   0% used [0x0000000085500000, 0x0000000085500000, 0x0000000085600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085600000 NTAMS 0x0000000085600000 space 1024K,   0% used [0x0000000085600000, 0x0000000085600000, 0x0000000085700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085700000 NTAMS 0x0000000085700000 space 1024K,   0% used [0x0000000085700000, 0x0000000085700000, 0x0000000085800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085800000 NTAMS 0x0000000085800000 space 1024K,   0% used [0x0000000085800000, 0x0000000085800000, 0x0000000085900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085900000 NTAMS 0x0000000085900000 space 1024K,   0% used [0x0000000085900000, 0x0000000085900000, 0x0000000085a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085a00000 NTAMS 0x0000000085a00000 space 1024K,   0% used [0x0000000085a00000, 0x0000000085a00000, 0x0000000085b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085b00000 NTAMS 0x0000000085b00000 space 1024K,   0% used [0x0000000085b00000, 0x0000000085b00000, 0x0000000085c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085c00000 NTAMS 0x0000000085c00000 space 1024K,   0% used [0x0000000085c00000, 0x0000000085c00000, 0x0000000085d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085d00000 NTAMS 0x0000000085d00000 space 1024K,   0% used [0x0000000085d00000, 0x0000000085d00000, 0x0000000085e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085e00000 NTAMS 0x0000000085e00000 space 1024K,   0% used [0x0000000085e00000, 0x0000000085e00000, 0x0000000085f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000085f00000 NTAMS 0x0000000085f00000 space 1024K,   0% used [0x0000000085f00000, 0x0000000085f00000, 0x0000000086000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086000000 NTAMS 0x0000000086000000 space 1024K,   0% used [0x0000000086000000, 0x0000000086000000, 0x0000000086100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086100000 NTAMS 0x0000000086100000 space 1024K,   0% used [0x0000000086100000, 0x0000000086100000, 0x0000000086200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086200000 NTAMS 0x0000000086200000 space 1024K,   0% used [0x0000000086200000, 0x0000000086200000, 0x0000000086300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086300000 NTAMS 0x0000000086300000 space 1024K,   0% used [0x0000000086300000, 0x0000000086300000, 0x0000000086400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086400000 NTAMS 0x0000000086400000 space 1024K,   0% used [0x0000000086400000, 0x0000000086400000, 0x0000000086500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086500000 NTAMS 0x0000000086500000 space 1024K,   0% used [0x0000000086500000, 0x0000000086500000, 0x0000000086600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086600000 NTAMS 0x0000000086600000 space 1024K,   0% used [0x0000000086600000, 0x0000000086600000, 0x0000000086700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086700000 NTAMS 0x0000000086700000 space 1024K,   0% used [0x0000000086700000, 0x0000000086700000, 0x0000000086800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086800000 NTAMS 0x0000000086800000 space 1024K,   0% used [0x0000000086800000, 0x0000000086800000, 0x0000000086900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086900000 NTAMS 0x0000000086900000 space 1024K,   0% used [0x0000000086900000, 0x0000000086900000, 0x0000000086a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086a00000 NTAMS 0x0000000086a00000 space 1024K,   0% used [0x0000000086a00000, 0x0000000086a00000, 0x0000000086b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086b00000 NTAMS 0x0000000086b00000 space 1024K,   0% used [0x0000000086b00000, 0x0000000086b00000, 0x0000000086c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086c00000 NTAMS 0x0000000086c00000 space 1024K,   0% used [0x0000000086c00000, 0x0000000086c00000, 0x0000000086d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086d00000 NTAMS 0x0000000086d00000 space 1024K,   0% used [0x0000000086d00000, 0x0000000086d00000, 0x0000000086e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086e00000 NTAMS 0x0000000086e00000 space 1024K,   0% used [0x0000000086e00000, 0x0000000086e00000, 0x0000000086f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000086f00000 NTAMS 0x0000000086f00000 space 1024K,   0% used [0x0000000086f00000, 0x0000000086f00000, 0x0000000087000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087000000 NTAMS 0x0000000087000000 space 1024K,   0% used [0x0000000087000000, 0x0000000087000000, 0x0000000087100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087100000 NTAMS 0x0000000087100000 space 1024K,   0% used [0x0000000087100000, 0x0000000087100000, 0x0000000087200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087200000 NTAMS 0x0000000087200000 space 1024K,   0% used [0x0000000087200000, 0x0000000087200000, 0x0000000087300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087300000 NTAMS 0x0000000087300000 space 1024K,   0% used [0x0000000087300000, 0x0000000087300000, 0x0000000087400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087400000 NTAMS 0x0000000087400000 space 1024K,   0% used [0x0000000087400000, 0x0000000087400000, 0x0000000087500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087500000 NTAMS 0x0000000087500000 space 1024K,   0% used [0x0000000087500000, 0x0000000087500000, 0x0000000087600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087600000 NTAMS 0x0000000087600000 space 1024K,   0% used [0x0000000087600000, 0x0000000087600000, 0x0000000087700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087700000 NTAMS 0x0000000087700000 space 1024K,   0% used [0x0000000087700000, 0x0000000087700000, 0x0000000087800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087800000 NTAMS 0x0000000087800000 space 1024K,   0% used [0x0000000087800000, 0x0000000087800000, 0x0000000087900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087900000 NTAMS 0x0000000087900000 space 1024K,   0% used [0x0000000087900000, 0x0000000087900000, 0x0000000087a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087a00000 NTAMS 0x0000000087a00000 space 1024K,   0% used [0x0000000087a00000, 0x0000000087a00000, 0x0000000087b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087b00000 NTAMS 0x0000000087b00000 space 1024K,   0% used [0x0000000087b00000, 0x0000000087b00000, 0x0000000087c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087c00000 NTAMS 0x0000000087c00000 space 1024K,   0% used [0x0000000087c00000, 0x0000000087c00000, 0x0000000087d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087d00000 NTAMS 0x0000000087d00000 space 1024K,   0% used [0x0000000087d00000, 0x0000000087d00000, 0x0000000087e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087e00000 NTAMS 0x0000000087e00000 space 1024K,   0% used [0x0000000087e00000, 0x0000000087e00000, 0x0000000087f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000087f00000 NTAMS 0x0000000087f00000 space 1024K,   0% used [0x0000000087f00000, 0x0000000087f00000, 0x0000000088000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088000000 NTAMS 0x0000000088000000 space 1024K,   0% used [0x0000000088000000, 0x0000000088000000, 0x0000000088100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088100000 NTAMS 0x0000000088100000 space 1024K,   0% used [0x0000000088100000, 0x0000000088100000, 0x0000000088200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088200000 NTAMS 0x0000000088200000 space 1024K,   0% used [0x0000000088200000, 0x0000000088200000, 0x0000000088300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088300000 NTAMS 0x0000000088300000 space 1024K,   0% used [0x0000000088300000, 0x0000000088300000, 0x0000000088400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088400000 NTAMS 0x0000000088400000 space 1024K,   0% used [0x0000000088400000, 0x0000000088400000, 0x0000000088500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088500000 NTAMS 0x0000000088500000 space 1024K,   0% used [0x0000000088500000, 0x0000000088500000, 0x0000000088600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088600000 NTAMS 0x0000000088600000 space 1024K,   0% used [0x0000000088600000, 0x0000000088600000, 0x0000000088700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088700000 NTAMS 0x0000000088700000 space 1024K,   0% used [0x0000000088700000, 0x0000000088700000, 0x0000000088800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088800000 NTAMS 0x0000000088800000 space 1024K,   0% used [0x0000000088800000, 0x0000000088800000, 0x0000000088900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088900000 NTAMS 0x0000000088900000 space 1024K,   0% used [0x0000000088900000, 0x0000000088900000, 0x0000000088a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088a00000 NTAMS 0x0000000088a00000 space 1024K,   0% used [0x0000000088a00000, 0x0000000088a00000, 0x0000000088b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088b00000 NTAMS 0x0000000088b00000 space 1024K,   0% used [0x0000000088b00000, 0x0000000088b00000, 0x0000000088c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088c00000 NTAMS 0x0000000088c00000 space 1024K,   0% used [0x0000000088c00000, 0x0000000088c00000, 0x0000000088d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088d00000 NTAMS 0x0000000088d00000 space 1024K,   0% used [0x0000000088d00000, 0x0000000088d00000, 0x0000000088e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088e00000 NTAMS 0x0000000088e00000 space 1024K,   0% used [0x0000000088e00000, 0x0000000088e00000, 0x0000000088f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000088f00000 NTAMS 0x0000000088f00000 space 1024K,   0% used [0x0000000088f00000, 0x0000000088f00000, 0x0000000089000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089000000 NTAMS 0x0000000089000000 space 1024K,   0% used [0x0000000089000000, 0x0000000089000000, 0x0000000089100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089100000 NTAMS 0x0000000089100000 space 1024K,   0% used [0x0000000089100000, 0x0000000089100000, 0x0000000089200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089200000 NTAMS 0x0000000089200000 space 1024K,   0% used [0x0000000089200000, 0x0000000089200000, 0x0000000089300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089300000 NTAMS 0x0000000089300000 space 1024K,   0% used [0x0000000089300000, 0x0000000089300000, 0x0000000089400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089400000 NTAMS 0x0000000089400000 space 1024K,   0% used [0x0000000089400000, 0x0000000089400000, 0x0000000089500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089500000 NTAMS 0x0000000089500000 space 1024K,   0% used [0x0000000089500000, 0x0000000089500000, 0x0000000089600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089600000 NTAMS 0x0000000089600000 space 1024K,   0% used [0x0000000089600000, 0x0000000089600000, 0x0000000089700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089700000 NTAMS 0x0000000089700000 space 1024K,   0% used [0x0000000089700000, 0x0000000089700000, 0x0000000089800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089800000 NTAMS 0x0000000089800000 space 1024K,   0% used [0x0000000089800000, 0x0000000089800000, 0x0000000089900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089900000 NTAMS 0x0000000089900000 space 1024K,   0% used [0x0000000089900000, 0x0000000089900000, 0x0000000089a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089a00000 NTAMS 0x0000000089a00000 space 1024K,   0% used [0x0000000089a00000, 0x0000000089a00000, 0x0000000089b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089b00000 NTAMS 0x0000000089b00000 space 1024K,   0% used [0x0000000089b00000, 0x0000000089b00000, 0x0000000089c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089c00000 NTAMS 0x0000000089c00000 space 1024K,   0% used [0x0000000089c00000, 0x0000000089c00000, 0x0000000089d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089d00000 NTAMS 0x0000000089d00000 space 1024K,   0% used [0x0000000089d00000, 0x0000000089d00000, 0x0000000089e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089e00000 NTAMS 0x0000000089e00000 space 1024K,   0% used [0x0000000089e00000, 0x0000000089e00000, 0x0000000089f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000089f00000 NTAMS 0x0000000089f00000 space 1024K,   0% used [0x0000000089f00000, 0x0000000089f00000, 0x000000008a000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a000000 NTAMS 0x000000008a000000 space 1024K,   0% used [0x000000008a000000, 0x000000008a000000, 0x000000008a100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a100000 NTAMS 0x000000008a100000 space 1024K,   0% used [0x000000008a100000, 0x000000008a100000, 0x000000008a200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a200000 NTAMS 0x000000008a200000 space 1024K,   0% used [0x000000008a200000, 0x000000008a200000, 0x000000008a300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a300000 NTAMS 0x000000008a300000 space 1024K,   0% used [0x000000008a300000, 0x000000008a300000, 0x000000008a400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a400000 NTAMS 0x000000008a400000 space 1024K,   0% used [0x000000008a400000, 0x000000008a400000, 0x000000008a500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a500000 NTAMS 0x000000008a500000 space 1024K,   0% used [0x000000008a500000, 0x000000008a500000, 0x000000008a600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a600000 NTAMS 0x000000008a600000 space 1024K,   0% used [0x000000008a600000, 0x000000008a600000, 0x000000008a700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a700000 NTAMS 0x000000008a700000 space 1024K,   0% used [0x000000008a700000, 0x000000008a700000, 0x000000008a800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a800000 NTAMS 0x000000008a800000 space 1024K,   0% used [0x000000008a800000, 0x000000008a800000, 0x000000008a900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008a900000 NTAMS 0x000000008a900000 space 1024K,   0% used [0x000000008a900000, 0x000000008a900000, 0x000000008aa00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008aa00000 NTAMS 0x000000008aa00000 space 1024K,   0% used [0x000000008aa00000, 0x000000008aa00000, 0x000000008ab00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ab00000 NTAMS 0x000000008ab00000 space 1024K,   0% used [0x000000008ab00000, 0x000000008ab00000, 0x000000008ac00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ac00000 NTAMS 0x000000008ac00000 space 1024K,   0% used [0x000000008ac00000, 0x000000008ac00000, 0x000000008ad00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ad00000 NTAMS 0x000000008ad00000 space 1024K,   0% used [0x000000008ad00000, 0x000000008ad00000, 0x000000008ae00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ae00000 NTAMS 0x000000008ae00000 space 1024K,   0% used [0x000000008ae00000, 0x000000008ae00000, 0x000000008af00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008af00000 NTAMS 0x000000008af00000 space 1024K,   0% used [0x000000008af00000, 0x000000008af00000, 0x000000008b000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b000000 NTAMS 0x000000008b000000 space 1024K,   0% used [0x000000008b000000, 0x000000008b000000, 0x000000008b100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b100000 NTAMS 0x000000008b100000 space 1024K,   0% used [0x000000008b100000, 0x000000008b100000, 0x000000008b200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b200000 NTAMS 0x000000008b200000 space 1024K,   0% used [0x000000008b200000, 0x000000008b200000, 0x000000008b300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b300000 NTAMS 0x000000008b300000 space 1024K,   0% used [0x000000008b300000, 0x000000008b300000, 0x000000008b400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b400000 NTAMS 0x000000008b400000 space 1024K,   0% used [0x000000008b400000, 0x000000008b400000, 0x000000008b500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b500000 NTAMS 0x000000008b500000 space 1024K,   0% used [0x000000008b500000, 0x000000008b500000, 0x000000008b600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b600000 NTAMS 0x000000008b600000 space 1024K,   0% used [0x000000008b600000, 0x000000008b600000, 0x000000008b700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b700000 NTAMS 0x000000008b700000 space 1024K,   0% used [0x000000008b700000, 0x000000008b700000, 0x000000008b800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b800000 NTAMS 0x000000008b800000 space 1024K,   0% used [0x000000008b800000, 0x000000008b800000, 0x000000008b900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008b900000 NTAMS 0x000000008b900000 space 1024K,   0% used [0x000000008b900000, 0x000000008b900000, 0x000000008ba00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ba00000 NTAMS 0x000000008ba00000 space 1024K,   0% used [0x000000008ba00000, 0x000000008ba00000, 0x000000008bb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008bb00000 NTAMS 0x000000008bb00000 space 1024K,   0% used [0x000000008bb00000, 0x000000008bb00000, 0x000000008bc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008bc00000 NTAMS 0x000000008bc00000 space 1024K,   0% used [0x000000008bc00000, 0x000000008bc00000, 0x000000008bd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008bd00000 NTAMS 0x000000008bd00000 space 1024K,   0% used [0x000000008bd00000, 0x000000008bd00000, 0x000000008be00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008be00000 NTAMS 0x000000008be00000 space 1024K,   0% used [0x000000008be00000, 0x000000008be00000, 0x000000008bf00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008bf00000 NTAMS 0x000000008bf00000 space 1024K,   0% used [0x000000008bf00000, 0x000000008bf00000, 0x000000008c000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c000000 NTAMS 0x000000008c000000 space 1024K,   0% used [0x000000008c000000, 0x000000008c000000, 0x000000008c100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c100000 NTAMS 0x000000008c100000 space 1024K,   0% used [0x000000008c100000, 0x000000008c100000, 0x000000008c200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c200000 NTAMS 0x000000008c200000 space 1024K,   0% used [0x000000008c200000, 0x000000008c200000, 0x000000008c300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c300000 NTAMS 0x000000008c300000 space 1024K,   0% used [0x000000008c300000, 0x000000008c300000, 0x000000008c400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c400000 NTAMS 0x000000008c400000 space 1024K,   0% used [0x000000008c400000, 0x000000008c400000, 0x000000008c500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c500000 NTAMS 0x000000008c500000 space 1024K,   0% used [0x000000008c500000, 0x000000008c500000, 0x000000008c600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c600000 NTAMS 0x000000008c600000 space 1024K,   0% used [0x000000008c600000, 0x000000008c600000, 0x000000008c700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c700000 NTAMS 0x000000008c700000 space 1024K,   0% used [0x000000008c700000, 0x000000008c700000, 0x000000008c800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c800000 NTAMS 0x000000008c800000 space 1024K,   0% used [0x000000008c800000, 0x000000008c800000, 0x000000008c900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008c900000 NTAMS 0x000000008c900000 space 1024K,   0% used [0x000000008c900000, 0x000000008c900000, 0x000000008ca00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ca00000 NTAMS 0x000000008ca00000 space 1024K,   0% used [0x000000008ca00000, 0x000000008ca00000, 0x000000008cb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008cb00000 NTAMS 0x000000008cb00000 space 1024K,   0% used [0x000000008cb00000, 0x000000008cb00000, 0x000000008cc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008cc00000 NTAMS 0x000000008cc00000 space 1024K,   0% used [0x000000008cc00000, 0x000000008cc00000, 0x000000008cd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008cd00000 NTAMS 0x000000008cd00000 space 1024K,   0% used [0x000000008cd00000, 0x000000008cd00000, 0x000000008ce00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ce00000 NTAMS 0x000000008ce00000 space 1024K,   0% used [0x000000008ce00000, 0x000000008ce00000, 0x000000008cf00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008cf00000 NTAMS 0x000000008cf00000 space 1024K,   0% used [0x000000008cf00000, 0x000000008cf00000, 0x000000008d000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d000000 NTAMS 0x000000008d000000 space 1024K,   0% used [0x000000008d000000, 0x000000008d000000, 0x000000008d100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d100000 NTAMS 0x000000008d100000 space 1024K,   0% used [0x000000008d100000, 0x000000008d100000, 0x000000008d200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d200000 NTAMS 0x000000008d200000 space 1024K,   0% used [0x000000008d200000, 0x000000008d200000, 0x000000008d300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d300000 NTAMS 0x000000008d300000 space 1024K,   0% used [0x000000008d300000, 0x000000008d300000, 0x000000008d400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d400000 NTAMS 0x000000008d400000 space 1024K,   0% used [0x000000008d400000, 0x000000008d400000, 0x000000008d500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d500000 NTAMS 0x000000008d500000 space 1024K,   0% used [0x000000008d500000, 0x000000008d500000, 0x000000008d600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d600000 NTAMS 0x000000008d600000 space 1024K,   0% used [0x000000008d600000, 0x000000008d600000, 0x000000008d700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d700000 NTAMS 0x000000008d700000 space 1024K,   0% used [0x000000008d700000, 0x000000008d700000, 0x000000008d800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d800000 NTAMS 0x000000008d800000 space 1024K,   0% used [0x000000008d800000, 0x000000008d800000, 0x000000008d900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008d900000 NTAMS 0x000000008d900000 space 1024K,   0% used [0x000000008d900000, 0x000000008d900000, 0x000000008da00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008da00000 NTAMS 0x000000008da00000 space 1024K,   0% used [0x000000008da00000, 0x000000008da00000, 0x000000008db00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008db00000 NTAMS 0x000000008db00000 space 1024K,   0% used [0x000000008db00000, 0x000000008db00000, 0x000000008dc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008dc00000 NTAMS 0x000000008dc00000 space 1024K,   0% used [0x000000008dc00000, 0x000000008dc00000, 0x000000008dd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008dd00000 NTAMS 0x000000008dd00000 space 1024K,   0% used [0x000000008dd00000, 0x000000008dd00000, 0x000000008de00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008de00000 NTAMS 0x000000008de00000 space 1024K,   0% used [0x000000008de00000, 0x000000008de00000, 0x000000008df00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008df00000 NTAMS 0x000000008df00000 space 1024K,   0% used [0x000000008df00000, 0x000000008df00000, 0x000000008e000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e000000 NTAMS 0x000000008e000000 space 1024K,   0% used [0x000000008e000000, 0x000000008e000000, 0x000000008e100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e100000 NTAMS 0x000000008e100000 space 1024K,   0% used [0x000000008e100000, 0x000000008e100000, 0x000000008e200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e200000 NTAMS 0x000000008e200000 space 1024K,   0% used [0x000000008e200000, 0x000000008e200000, 0x000000008e300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e300000 NTAMS 0x000000008e300000 space 1024K,   0% used [0x000000008e300000, 0x000000008e300000, 0x000000008e400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e400000 NTAMS 0x000000008e400000 space 1024K,   0% used [0x000000008e400000, 0x000000008e400000, 0x000000008e500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e500000 NTAMS 0x000000008e500000 space 1024K,   0% used [0x000000008e500000, 0x000000008e500000, 0x000000008e600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e600000 NTAMS 0x000000008e600000 space 1024K,   0% used [0x000000008e600000, 0x000000008e600000, 0x000000008e700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e700000 NTAMS 0x000000008e700000 space 1024K,   0% used [0x000000008e700000, 0x000000008e700000, 0x000000008e800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e800000 NTAMS 0x000000008e800000 space 1024K,   0% used [0x000000008e800000, 0x000000008e800000, 0x000000008e900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008e900000 NTAMS 0x000000008e900000 space 1024K,   0% used [0x000000008e900000, 0x000000008e900000, 0x000000008ea00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ea00000 NTAMS 0x000000008ea00000 space 1024K,   0% used [0x000000008ea00000, 0x000000008ea00000, 0x000000008eb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008eb00000 NTAMS 0x000000008eb00000 space 1024K,   0% used [0x000000008eb00000, 0x000000008eb00000, 0x000000008ec00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ec00000 NTAMS 0x000000008ec00000 space 1024K,   0% used [0x000000008ec00000, 0x000000008ec00000, 0x000000008ed00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ed00000 NTAMS 0x000000008ed00000 space 1024K,   0% used [0x000000008ed00000, 0x000000008ed00000, 0x000000008ee00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ee00000 NTAMS 0x000000008ee00000 space 1024K,   0% used [0x000000008ee00000, 0x000000008ee00000, 0x000000008ef00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ef00000 NTAMS 0x000000008ef00000 space 1024K,   0% used [0x000000008ef00000, 0x000000008ef00000, 0x000000008f000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f000000 NTAMS 0x000000008f000000 space 1024K,   0% used [0x000000008f000000, 0x000000008f000000, 0x000000008f100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f100000 NTAMS 0x000000008f100000 space 1024K,   0% used [0x000000008f100000, 0x000000008f100000, 0x000000008f200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f200000 NTAMS 0x000000008f200000 space 1024K,   0% used [0x000000008f200000, 0x000000008f200000, 0x000000008f300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f300000 NTAMS 0x000000008f300000 space 1024K,   0% used [0x000000008f300000, 0x000000008f300000, 0x000000008f400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f400000 NTAMS 0x000000008f400000 space 1024K,   0% used [0x000000008f400000, 0x000000008f400000, 0x000000008f500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f500000 NTAMS 0x000000008f500000 space 1024K,   0% used [0x000000008f500000, 0x000000008f500000, 0x000000008f600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f600000 NTAMS 0x000000008f600000 space 1024K,   0% used [0x000000008f600000, 0x000000008f600000, 0x000000008f700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f700000 NTAMS 0x000000008f700000 space 1024K,   0% used [0x000000008f700000, 0x000000008f700000, 0x000000008f800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f800000 NTAMS 0x000000008f800000 space 1024K,   0% used [0x000000008f800000, 0x000000008f800000, 0x000000008f900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008f900000 NTAMS 0x000000008f900000 space 1024K,   0% used [0x000000008f900000, 0x000000008f900000, 0x000000008fa00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008fa00000 NTAMS 0x000000008fa00000 space 1024K,   0% used [0x000000008fa00000, 0x000000008fa00000, 0x000000008fb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008fb00000 NTAMS 0x000000008fb00000 space 1024K,   0% used [0x000000008fb00000, 0x000000008fb00000, 0x000000008fc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008fc00000 NTAMS 0x000000008fc00000 space 1024K,   0% used [0x000000008fc00000, 0x000000008fc00000, 0x000000008fd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008fd00000 NTAMS 0x000000008fd00000 space 1024K,   0% used [0x000000008fd00000, 0x000000008fd00000, 0x000000008fe00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008fe00000 NTAMS 0x000000008fe00000 space 1024K,   0% used [0x000000008fe00000, 0x000000008fe00000, 0x000000008ff00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000008ff00000 NTAMS 0x000000008ff00000 space 1024K,   0% used [0x000000008ff00000, 0x000000008ff00000, 0x0000000090000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090000000 NTAMS 0x0000000090000000 space 1024K,   0% used [0x0000000090000000, 0x0000000090000000, 0x0000000090100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090100000 NTAMS 0x0000000090100000 space 1024K,   0% used [0x0000000090100000, 0x0000000090100000, 0x0000000090200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090200000 NTAMS 0x0000000090200000 space 1024K,   0% used [0x0000000090200000, 0x0000000090200000, 0x0000000090300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090300000 NTAMS 0x0000000090300000 space 1024K,   0% used [0x0000000090300000, 0x0000000090300000, 0x0000000090400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090400000 NTAMS 0x0000000090400000 space 1024K,   0% used [0x0000000090400000, 0x0000000090400000, 0x0000000090500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090500000 NTAMS 0x0000000090500000 space 1024K,   0% used [0x0000000090500000, 0x0000000090500000, 0x0000000090600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090600000 NTAMS 0x0000000090600000 space 1024K,   0% used [0x0000000090600000, 0x0000000090600000, 0x0000000090700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090700000 NTAMS 0x0000000090700000 space 1024K,   0% used [0x0000000090700000, 0x0000000090700000, 0x0000000090800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090800000 NTAMS 0x0000000090800000 space 1024K,   0% used [0x0000000090800000, 0x0000000090800000, 0x0000000090900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090900000 NTAMS 0x0000000090900000 space 1024K,   0% used [0x0000000090900000, 0x0000000090900000, 0x0000000090a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090a00000 NTAMS 0x0000000090a00000 space 1024K,   0% used [0x0000000090a00000, 0x0000000090a00000, 0x0000000090b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090b00000 NTAMS 0x0000000090b00000 space 1024K,   0% used [0x0000000090b00000, 0x0000000090b00000, 0x0000000090c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090c00000 NTAMS 0x0000000090c00000 space 1024K,   0% used [0x0000000090c00000, 0x0000000090c00000, 0x0000000090d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090d00000 NTAMS 0x0000000090d00000 space 1024K,   0% used [0x0000000090d00000, 0x0000000090d00000, 0x0000000090e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090e00000 NTAMS 0x0000000090e00000 space 1024K,   0% used [0x0000000090e00000, 0x0000000090e00000, 0x0000000090f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000090f00000 NTAMS 0x0000000090f00000 space 1024K,   0% used [0x0000000090f00000, 0x0000000090f00000, 0x0000000091000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091000000 NTAMS 0x0000000091000000 space 1024K,   0% used [0x0000000091000000, 0x0000000091000000, 0x0000000091100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091100000 NTAMS 0x0000000091100000 space 1024K,   0% used [0x0000000091100000, 0x0000000091100000, 0x0000000091200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091200000 NTAMS 0x0000000091200000 space 1024K,   0% used [0x0000000091200000, 0x0000000091200000, 0x0000000091300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091300000 NTAMS 0x0000000091300000 space 1024K,   0% used [0x0000000091300000, 0x0000000091300000, 0x0000000091400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091400000 NTAMS 0x0000000091400000 space 1024K,   0% used [0x0000000091400000, 0x0000000091400000, 0x0000000091500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091500000 NTAMS 0x0000000091500000 space 1024K,   0% used [0x0000000091500000, 0x0000000091500000, 0x0000000091600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091600000 NTAMS 0x0000000091600000 space 1024K,   0% used [0x0000000091600000, 0x0000000091600000, 0x0000000091700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091700000 NTAMS 0x0000000091700000 space 1024K,   0% used [0x0000000091700000, 0x0000000091700000, 0x0000000091800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091800000 NTAMS 0x0000000091800000 space 1024K,   0% used [0x0000000091800000, 0x0000000091800000, 0x0000000091900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091900000 NTAMS 0x0000000091900000 space 1024K,   0% used [0x0000000091900000, 0x0000000091900000, 0x0000000091a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091a00000 NTAMS 0x0000000091a00000 space 1024K,   0% used [0x0000000091a00000, 0x0000000091a00000, 0x0000000091b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091b00000 NTAMS 0x0000000091b00000 space 1024K,   0% used [0x0000000091b00000, 0x0000000091b00000, 0x0000000091c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091c00000 NTAMS 0x0000000091c00000 space 1024K,   0% used [0x0000000091c00000, 0x0000000091c00000, 0x0000000091d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091d00000 NTAMS 0x0000000091d00000 space 1024K,   0% used [0x0000000091d00000, 0x0000000091d00000, 0x0000000091e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091e00000 NTAMS 0x0000000091e00000 space 1024K,   0% used [0x0000000091e00000, 0x0000000091e00000, 0x0000000091f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000091f00000 NTAMS 0x0000000091f00000 space 1024K,   0% used [0x0000000091f00000, 0x0000000091f00000, 0x0000000092000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092000000 NTAMS 0x0000000092000000 space 1024K,   0% used [0x0000000092000000, 0x0000000092000000, 0x0000000092100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092100000 NTAMS 0x0000000092100000 space 1024K,   0% used [0x0000000092100000, 0x0000000092100000, 0x0000000092200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092200000 NTAMS 0x0000000092200000 space 1024K,   0% used [0x0000000092200000, 0x0000000092200000, 0x0000000092300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092300000 NTAMS 0x0000000092300000 space 1024K,   0% used [0x0000000092300000, 0x0000000092300000, 0x0000000092400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092400000 NTAMS 0x0000000092400000 space 1024K,   0% used [0x0000000092400000, 0x0000000092400000, 0x0000000092500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092500000 NTAMS 0x0000000092500000 space 1024K,   0% used [0x0000000092500000, 0x0000000092500000, 0x0000000092600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092600000 NTAMS 0x0000000092600000 space 1024K,   0% used [0x0000000092600000, 0x0000000092600000, 0x0000000092700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092700000 NTAMS 0x0000000092700000 space 1024K,   0% used [0x0000000092700000, 0x0000000092700000, 0x0000000092800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092800000 NTAMS 0x0000000092800000 space 1024K,   0% used [0x0000000092800000, 0x0000000092800000, 0x0000000092900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092900000 NTAMS 0x0000000092900000 space 1024K,   0% used [0x0000000092900000, 0x0000000092900000, 0x0000000092a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092a00000 NTAMS 0x0000000092a00000 space 1024K,   0% used [0x0000000092a00000, 0x0000000092a00000, 0x0000000092b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092b00000 NTAMS 0x0000000092b00000 space 1024K,   0% used [0x0000000092b00000, 0x0000000092b00000, 0x0000000092c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092c00000 NTAMS 0x0000000092c00000 space 1024K,   0% used [0x0000000092c00000, 0x0000000092c00000, 0x0000000092d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092d00000 NTAMS 0x0000000092d00000 space 1024K,   0% used [0x0000000092d00000, 0x0000000092d00000, 0x0000000092e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092e00000 NTAMS 0x0000000092e00000 space 1024K,   0% used [0x0000000092e00000, 0x0000000092e00000, 0x0000000092f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000092f00000 NTAMS 0x0000000092f00000 space 1024K,   0% used [0x0000000092f00000, 0x0000000092f00000, 0x0000000093000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093000000 NTAMS 0x0000000093000000 space 1024K,   0% used [0x0000000093000000, 0x0000000093000000, 0x0000000093100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093100000 NTAMS 0x0000000093100000 space 1024K,   0% used [0x0000000093100000, 0x0000000093100000, 0x0000000093200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093200000 NTAMS 0x0000000093200000 space 1024K,   0% used [0x0000000093200000, 0x0000000093200000, 0x0000000093300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093300000 NTAMS 0x0000000093300000 space 1024K,   0% used [0x0000000093300000, 0x0000000093300000, 0x0000000093400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093400000 NTAMS 0x0000000093400000 space 1024K,   0% used [0x0000000093400000, 0x0000000093400000, 0x0000000093500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093500000 NTAMS 0x0000000093500000 space 1024K,   0% used [0x0000000093500000, 0x0000000093500000, 0x0000000093600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093600000 NTAMS 0x0000000093600000 space 1024K,   0% used [0x0000000093600000, 0x0000000093600000, 0x0000000093700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093700000 NTAMS 0x0000000093700000 space 1024K,   0% used [0x0000000093700000, 0x0000000093700000, 0x0000000093800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093800000 NTAMS 0x0000000093800000 space 1024K,   0% used [0x0000000093800000, 0x0000000093800000, 0x0000000093900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093900000 NTAMS 0x0000000093900000 space 1024K,   0% used [0x0000000093900000, 0x0000000093900000, 0x0000000093a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093a00000 NTAMS 0x0000000093a00000 space 1024K,   0% used [0x0000000093a00000, 0x0000000093a00000, 0x0000000093b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093b00000 NTAMS 0x0000000093b00000 space 1024K,   0% used [0x0000000093b00000, 0x0000000093b00000, 0x0000000093c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093c00000 NTAMS 0x0000000093c00000 space 1024K,   0% used [0x0000000093c00000, 0x0000000093c00000, 0x0000000093d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093d00000 NTAMS 0x0000000093d00000 space 1024K,   0% used [0x0000000093d00000, 0x0000000093d00000, 0x0000000093e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093e00000 NTAMS 0x0000000093e00000 space 1024K,   0% used [0x0000000093e00000, 0x0000000093e00000, 0x0000000093f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000093f00000 NTAMS 0x0000000093f00000 space 1024K,   0% used [0x0000000093f00000, 0x0000000093f00000, 0x0000000094000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094000000 NTAMS 0x0000000094000000 space 1024K,   0% used [0x0000000094000000, 0x0000000094000000, 0x0000000094100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094100000 NTAMS 0x0000000094100000 space 1024K,   0% used [0x0000000094100000, 0x0000000094100000, 0x0000000094200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094200000 NTAMS 0x0000000094200000 space 1024K,   0% used [0x0000000094200000, 0x0000000094200000, 0x0000000094300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094300000 NTAMS 0x0000000094300000 space 1024K,   0% used [0x0000000094300000, 0x0000000094300000, 0x0000000094400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094400000 NTAMS 0x0000000094400000 space 1024K,   0% used [0x0000000094400000, 0x0000000094400000, 0x0000000094500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094500000 NTAMS 0x0000000094500000 space 1024K,   0% used [0x0000000094500000, 0x0000000094500000, 0x0000000094600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094600000 NTAMS 0x0000000094600000 space 1024K,   0% used [0x0000000094600000, 0x0000000094600000, 0x0000000094700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094700000 NTAMS 0x0000000094700000 space 1024K,   0% used [0x0000000094700000, 0x0000000094700000, 0x0000000094800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094800000 NTAMS 0x0000000094800000 space 1024K,   0% used [0x0000000094800000, 0x0000000094800000, 0x0000000094900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094900000 NTAMS 0x0000000094900000 space 1024K,   0% used [0x0000000094900000, 0x0000000094900000, 0x0000000094a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094a00000 NTAMS 0x0000000094a00000 space 1024K,   0% used [0x0000000094a00000, 0x0000000094a00000, 0x0000000094b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094b00000 NTAMS 0x0000000094b00000 space 1024K,   0% used [0x0000000094b00000, 0x0000000094b00000, 0x0000000094c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094c00000 NTAMS 0x0000000094c00000 space 1024K,   0% used [0x0000000094c00000, 0x0000000094c00000, 0x0000000094d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094d00000 NTAMS 0x0000000094d00000 space 1024K,   0% used [0x0000000094d00000, 0x0000000094d00000, 0x0000000094e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094e00000 NTAMS 0x0000000094e00000 space 1024K,   0% used [0x0000000094e00000, 0x0000000094e00000, 0x0000000094f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000094f00000 NTAMS 0x0000000094f00000 space 1024K,   0% used [0x0000000094f00000, 0x0000000094f00000, 0x0000000095000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095000000 NTAMS 0x0000000095000000 space 1024K,   0% used [0x0000000095000000, 0x0000000095000000, 0x0000000095100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095100000 NTAMS 0x0000000095100000 space 1024K,   0% used [0x0000000095100000, 0x0000000095100000, 0x0000000095200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095200000 NTAMS 0x0000000095200000 space 1024K,   0% used [0x0000000095200000, 0x0000000095200000, 0x0000000095300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095300000 NTAMS 0x0000000095300000 space 1024K,   0% used [0x0000000095300000, 0x0000000095300000, 0x0000000095400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095400000 NTAMS 0x0000000095400000 space 1024K,   0% used [0x0000000095400000, 0x0000000095400000, 0x0000000095500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095500000 NTAMS 0x0000000095500000 space 1024K,   0% used [0x0000000095500000, 0x0000000095500000, 0x0000000095600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095600000 NTAMS 0x0000000095600000 space 1024K,   0% used [0x0000000095600000, 0x0000000095600000, 0x0000000095700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095700000 NTAMS 0x0000000095700000 space 1024K,   0% used [0x0000000095700000, 0x0000000095700000, 0x0000000095800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095800000 NTAMS 0x0000000095800000 space 1024K,   0% used [0x0000000095800000, 0x0000000095800000, 0x0000000095900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095900000 NTAMS 0x0000000095900000 space 1024K,   0% used [0x0000000095900000, 0x0000000095900000, 0x0000000095a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095a00000 NTAMS 0x0000000095a00000 space 1024K,   0% used [0x0000000095a00000, 0x0000000095a00000, 0x0000000095b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095b00000 NTAMS 0x0000000095b00000 space 1024K,   0% used [0x0000000095b00000, 0x0000000095b00000, 0x0000000095c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095c00000 NTAMS 0x0000000095c00000 space 1024K,   0% used [0x0000000095c00000, 0x0000000095c00000, 0x0000000095d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095d00000 NTAMS 0x0000000095d00000 space 1024K,   0% used [0x0000000095d00000, 0x0000000095d00000, 0x0000000095e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095e00000 NTAMS 0x0000000095e00000 space 1024K,   0% used [0x0000000095e00000, 0x0000000095e00000, 0x0000000095f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000095f00000 NTAMS 0x0000000095f00000 space 1024K,   0% used [0x0000000095f00000, 0x0000000095f00000, 0x0000000096000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096000000 NTAMS 0x0000000096000000 space 1024K,   0% used [0x0000000096000000, 0x0000000096000000, 0x0000000096100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096100000 NTAMS 0x0000000096100000 space 1024K,   0% used [0x0000000096100000, 0x0000000096100000, 0x0000000096200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096200000 NTAMS 0x0000000096200000 space 1024K,   0% used [0x0000000096200000, 0x0000000096200000, 0x0000000096300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096300000 NTAMS 0x0000000096300000 space 1024K,   0% used [0x0000000096300000, 0x0000000096300000, 0x0000000096400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096400000 NTAMS 0x0000000096400000 space 1024K,   0% used [0x0000000096400000, 0x0000000096400000, 0x0000000096500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096500000 NTAMS 0x0000000096500000 space 1024K,   0% used [0x0000000096500000, 0x0000000096500000, 0x0000000096600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096600000 NTAMS 0x0000000096600000 space 1024K,   0% used [0x0000000096600000, 0x0000000096600000, 0x0000000096700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096700000 NTAMS 0x0000000096700000 space 1024K,   0% used [0x0000000096700000, 0x0000000096700000, 0x0000000096800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096800000 NTAMS 0x0000000096800000 space 1024K,   0% used [0x0000000096800000, 0x0000000096800000, 0x0000000096900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096900000 NTAMS 0x0000000096900000 space 1024K,   0% used [0x0000000096900000, 0x0000000096900000, 0x0000000096a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096a00000 NTAMS 0x0000000096a00000 space 1024K,   0% used [0x0000000096a00000, 0x0000000096a00000, 0x0000000096b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096b00000 NTAMS 0x0000000096b00000 space 1024K,   0% used [0x0000000096b00000, 0x0000000096b00000, 0x0000000096c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096c00000 NTAMS 0x0000000096c00000 space 1024K,   0% used [0x0000000096c00000, 0x0000000096c00000, 0x0000000096d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096d00000 NTAMS 0x0000000096d00000 space 1024K,   0% used [0x0000000096d00000, 0x0000000096d00000, 0x0000000096e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096e00000 NTAMS 0x0000000096e00000 space 1024K,   0% used [0x0000000096e00000, 0x0000000096e00000, 0x0000000096f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000096f00000 NTAMS 0x0000000096f00000 space 1024K,   0% used [0x0000000096f00000, 0x0000000096f00000, 0x0000000097000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097000000 NTAMS 0x0000000097000000 space 1024K,   0% used [0x0000000097000000, 0x0000000097000000, 0x0000000097100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097100000 NTAMS 0x0000000097100000 space 1024K,   0% used [0x0000000097100000, 0x0000000097100000, 0x0000000097200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097200000 NTAMS 0x0000000097200000 space 1024K,   0% used [0x0000000097200000, 0x0000000097200000, 0x0000000097300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097300000 NTAMS 0x0000000097300000 space 1024K,   0% used [0x0000000097300000, 0x0000000097300000, 0x0000000097400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097400000 NTAMS 0x0000000097400000 space 1024K,   0% used [0x0000000097400000, 0x0000000097400000, 0x0000000097500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097500000 NTAMS 0x0000000097500000 space 1024K,   0% used [0x0000000097500000, 0x0000000097500000, 0x0000000097600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097600000 NTAMS 0x0000000097600000 space 1024K,   0% used [0x0000000097600000, 0x0000000097600000, 0x0000000097700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097700000 NTAMS 0x0000000097700000 space 1024K,   0% used [0x0000000097700000, 0x0000000097700000, 0x0000000097800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097800000 NTAMS 0x0000000097800000 space 1024K,   0% used [0x0000000097800000, 0x0000000097800000, 0x0000000097900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097900000 NTAMS 0x0000000097900000 space 1024K,   0% used [0x0000000097900000, 0x0000000097900000, 0x0000000097a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097a00000 NTAMS 0x0000000097a00000 space 1024K,   0% used [0x0000000097a00000, 0x0000000097a00000, 0x0000000097b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097b00000 NTAMS 0x0000000097b00000 space 1024K,   0% used [0x0000000097b00000, 0x0000000097b00000, 0x0000000097c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097c00000 NTAMS 0x0000000097c00000 space 1024K,   0% used [0x0000000097c00000, 0x0000000097c00000, 0x0000000097d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097d00000 NTAMS 0x0000000097d00000 space 1024K,   0% used [0x0000000097d00000, 0x0000000097d00000, 0x0000000097e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097e00000 NTAMS 0x0000000097e00000 space 1024K,   0% used [0x0000000097e00000, 0x0000000097e00000, 0x0000000097f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000097f00000 NTAMS 0x0000000097f00000 space 1024K,   0% used [0x0000000097f00000, 0x0000000097f00000, 0x0000000098000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098000000 NTAMS 0x0000000098000000 space 1024K,   0% used [0x0000000098000000, 0x0000000098000000, 0x0000000098100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098100000 NTAMS 0x0000000098100000 space 1024K,   0% used [0x0000000098100000, 0x0000000098100000, 0x0000000098200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098200000 NTAMS 0x0000000098200000 space 1024K,   0% used [0x0000000098200000, 0x0000000098200000, 0x0000000098300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098300000 NTAMS 0x0000000098300000 space 1024K,   0% used [0x0000000098300000, 0x0000000098300000, 0x0000000098400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098400000 NTAMS 0x0000000098400000 space 1024K,   0% used [0x0000000098400000, 0x0000000098400000, 0x0000000098500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098500000 NTAMS 0x0000000098500000 space 1024K,   0% used [0x0000000098500000, 0x0000000098500000, 0x0000000098600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098600000 NTAMS 0x0000000098600000 space 1024K,   0% used [0x0000000098600000, 0x0000000098600000, 0x0000000098700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098700000 NTAMS 0x0000000098700000 space 1024K,   0% used [0x0000000098700000, 0x0000000098700000, 0x0000000098800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098800000 NTAMS 0x0000000098800000 space 1024K,   0% used [0x0000000098800000, 0x0000000098800000, 0x0000000098900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098900000 NTAMS 0x0000000098900000 space 1024K,   0% used [0x0000000098900000, 0x0000000098900000, 0x0000000098a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098a00000 NTAMS 0x0000000098a00000 space 1024K,   0% used [0x0000000098a00000, 0x0000000098a00000, 0x0000000098b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098b00000 NTAMS 0x0000000098b00000 space 1024K,   0% used [0x0000000098b00000, 0x0000000098b00000, 0x0000000098c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098c00000 NTAMS 0x0000000098c00000 space 1024K,   0% used [0x0000000098c00000, 0x0000000098c00000, 0x0000000098d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098d00000 NTAMS 0x0000000098d00000 space 1024K,   0% used [0x0000000098d00000, 0x0000000098d00000, 0x0000000098e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098e00000 NTAMS 0x0000000098e00000 space 1024K,   0% used [0x0000000098e00000, 0x0000000098e00000, 0x0000000098f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000098f00000 NTAMS 0x0000000098f00000 space 1024K,   0% used [0x0000000098f00000, 0x0000000098f00000, 0x0000000099000000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099000000 NTAMS 0x0000000099000000 space 1024K,   0% used [0x0000000099000000, 0x0000000099000000, 0x0000000099100000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099100000 NTAMS 0x0000000099100000 space 1024K,   0% used [0x0000000099100000, 0x0000000099100000, 0x0000000099200000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099200000 NTAMS 0x0000000099200000 space 1024K,   0% used [0x0000000099200000, 0x0000000099200000, 0x0000000099300000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099300000 NTAMS 0x0000000099300000 space 1024K,   0% used [0x0000000099300000, 0x0000000099300000, 0x0000000099400000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099400000 NTAMS 0x0000000099400000 space 1024K,   0% used [0x0000000099400000, 0x0000000099400000, 0x0000000099500000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099500000 NTAMS 0x0000000099500000 space 1024K,   0% used [0x0000000099500000, 0x0000000099500000, 0x0000000099600000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099600000 NTAMS 0x0000000099600000 space 1024K,   0% used [0x0000000099600000, 0x0000000099600000, 0x0000000099700000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099700000 NTAMS 0x0000000099700000 space 1024K,   0% used [0x0000000099700000, 0x0000000099700000, 0x0000000099800000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099800000 NTAMS 0x0000000099800000 space 1024K,   0% used [0x0000000099800000, 0x0000000099800000, 0x0000000099900000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099900000 NTAMS 0x0000000099900000 space 1024K,   0% used [0x0000000099900000, 0x0000000099900000, 0x0000000099a00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099a00000 NTAMS 0x0000000099a00000 space 1024K,   0% used [0x0000000099a00000, 0x0000000099a00000, 0x0000000099b00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099b00000 NTAMS 0x0000000099b00000 space 1024K,   0% used [0x0000000099b00000, 0x0000000099b00000, 0x0000000099c00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099c00000 NTAMS 0x0000000099c00000 space 1024K,   0% used [0x0000000099c00000, 0x0000000099c00000, 0x0000000099d00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099d00000 NTAMS 0x0000000099d00000 space 1024K,   0% used [0x0000000099d00000, 0x0000000099d00000, 0x0000000099e00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099e00000 NTAMS 0x0000000099e00000 space 1024K,   0% used [0x0000000099e00000, 0x0000000099e00000, 0x0000000099f00000)</span><br><span class="line">          F TS     0 PTAMS 0x0000000099f00000 NTAMS 0x0000000099f00000 space 1024K,   0% used [0x0000000099f00000, 0x0000000099f00000, 0x000000009a000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a000000 NTAMS 0x000000009a000000 space 1024K,   0% used [0x000000009a000000, 0x000000009a000000, 0x000000009a100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a100000 NTAMS 0x000000009a100000 space 1024K,   0% used [0x000000009a100000, 0x000000009a100000, 0x000000009a200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a200000 NTAMS 0x000000009a200000 space 1024K,   0% used [0x000000009a200000, 0x000000009a200000, 0x000000009a300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a300000 NTAMS 0x000000009a300000 space 1024K,   0% used [0x000000009a300000, 0x000000009a300000, 0x000000009a400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a400000 NTAMS 0x000000009a400000 space 1024K,   0% used [0x000000009a400000, 0x000000009a400000, 0x000000009a500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a500000 NTAMS 0x000000009a500000 space 1024K,   0% used [0x000000009a500000, 0x000000009a500000, 0x000000009a600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a600000 NTAMS 0x000000009a600000 space 1024K,   0% used [0x000000009a600000, 0x000000009a600000, 0x000000009a700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a700000 NTAMS 0x000000009a700000 space 1024K,   0% used [0x000000009a700000, 0x000000009a700000, 0x000000009a800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a800000 NTAMS 0x000000009a800000 space 1024K,   0% used [0x000000009a800000, 0x000000009a800000, 0x000000009a900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009a900000 NTAMS 0x000000009a900000 space 1024K,   0% used [0x000000009a900000, 0x000000009a900000, 0x000000009aa00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009aa00000 NTAMS 0x000000009aa00000 space 1024K,   0% used [0x000000009aa00000, 0x000000009aa00000, 0x000000009ab00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ab00000 NTAMS 0x000000009ab00000 space 1024K,   0% used [0x000000009ab00000, 0x000000009ab00000, 0x000000009ac00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ac00000 NTAMS 0x000000009ac00000 space 1024K,   0% used [0x000000009ac00000, 0x000000009ac00000, 0x000000009ad00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ad00000 NTAMS 0x000000009ad00000 space 1024K,   0% used [0x000000009ad00000, 0x000000009ad00000, 0x000000009ae00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ae00000 NTAMS 0x000000009ae00000 space 1024K,   0% used [0x000000009ae00000, 0x000000009ae00000, 0x000000009af00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009af00000 NTAMS 0x000000009af00000 space 1024K,   0% used [0x000000009af00000, 0x000000009af00000, 0x000000009b000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b000000 NTAMS 0x000000009b000000 space 1024K,   0% used [0x000000009b000000, 0x000000009b000000, 0x000000009b100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b100000 NTAMS 0x000000009b100000 space 1024K,   0% used [0x000000009b100000, 0x000000009b100000, 0x000000009b200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b200000 NTAMS 0x000000009b200000 space 1024K,   0% used [0x000000009b200000, 0x000000009b200000, 0x000000009b300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b300000 NTAMS 0x000000009b300000 space 1024K,   0% used [0x000000009b300000, 0x000000009b300000, 0x000000009b400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b400000 NTAMS 0x000000009b400000 space 1024K,   0% used [0x000000009b400000, 0x000000009b400000, 0x000000009b500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b500000 NTAMS 0x000000009b500000 space 1024K,   0% used [0x000000009b500000, 0x000000009b500000, 0x000000009b600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b600000 NTAMS 0x000000009b600000 space 1024K,   0% used [0x000000009b600000, 0x000000009b600000, 0x000000009b700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b700000 NTAMS 0x000000009b700000 space 1024K,   0% used [0x000000009b700000, 0x000000009b700000, 0x000000009b800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b800000 NTAMS 0x000000009b800000 space 1024K,   0% used [0x000000009b800000, 0x000000009b800000, 0x000000009b900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009b900000 NTAMS 0x000000009b900000 space 1024K,   0% used [0x000000009b900000, 0x000000009b900000, 0x000000009ba00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ba00000 NTAMS 0x000000009ba00000 space 1024K,   0% used [0x000000009ba00000, 0x000000009ba00000, 0x000000009bb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009bb00000 NTAMS 0x000000009bb00000 space 1024K,   0% used [0x000000009bb00000, 0x000000009bb00000, 0x000000009bc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009bc00000 NTAMS 0x000000009bc00000 space 1024K,   0% used [0x000000009bc00000, 0x000000009bc00000, 0x000000009bd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009bd00000 NTAMS 0x000000009bd00000 space 1024K,   0% used [0x000000009bd00000, 0x000000009bd00000, 0x000000009be00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009be00000 NTAMS 0x000000009be00000 space 1024K,   0% used [0x000000009be00000, 0x000000009be00000, 0x000000009bf00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009bf00000 NTAMS 0x000000009bf00000 space 1024K,   0% used [0x000000009bf00000, 0x000000009bf00000, 0x000000009c000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c000000 NTAMS 0x000000009c000000 space 1024K,   0% used [0x000000009c000000, 0x000000009c000000, 0x000000009c100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c100000 NTAMS 0x000000009c100000 space 1024K,   0% used [0x000000009c100000, 0x000000009c100000, 0x000000009c200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c200000 NTAMS 0x000000009c200000 space 1024K,   0% used [0x000000009c200000, 0x000000009c200000, 0x000000009c300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c300000 NTAMS 0x000000009c300000 space 1024K,   0% used [0x000000009c300000, 0x000000009c300000, 0x000000009c400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c400000 NTAMS 0x000000009c400000 space 1024K,   0% used [0x000000009c400000, 0x000000009c400000, 0x000000009c500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c500000 NTAMS 0x000000009c500000 space 1024K,   0% used [0x000000009c500000, 0x000000009c500000, 0x000000009c600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c600000 NTAMS 0x000000009c600000 space 1024K,   0% used [0x000000009c600000, 0x000000009c600000, 0x000000009c700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c700000 NTAMS 0x000000009c700000 space 1024K,   0% used [0x000000009c700000, 0x000000009c700000, 0x000000009c800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c800000 NTAMS 0x000000009c800000 space 1024K,   0% used [0x000000009c800000, 0x000000009c800000, 0x000000009c900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009c900000 NTAMS 0x000000009c900000 space 1024K,   0% used [0x000000009c900000, 0x000000009c900000, 0x000000009ca00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ca00000 NTAMS 0x000000009ca00000 space 1024K,   0% used [0x000000009ca00000, 0x000000009ca00000, 0x000000009cb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009cb00000 NTAMS 0x000000009cb00000 space 1024K,   0% used [0x000000009cb00000, 0x000000009cb00000, 0x000000009cc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009cc00000 NTAMS 0x000000009cc00000 space 1024K,   0% used [0x000000009cc00000, 0x000000009cc00000, 0x000000009cd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009cd00000 NTAMS 0x000000009cd00000 space 1024K,   0% used [0x000000009cd00000, 0x000000009cd00000, 0x000000009ce00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ce00000 NTAMS 0x000000009ce00000 space 1024K,   0% used [0x000000009ce00000, 0x000000009ce00000, 0x000000009cf00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009cf00000 NTAMS 0x000000009cf00000 space 1024K,   0% used [0x000000009cf00000, 0x000000009cf00000, 0x000000009d000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d000000 NTAMS 0x000000009d000000 space 1024K,   0% used [0x000000009d000000, 0x000000009d000000, 0x000000009d100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d100000 NTAMS 0x000000009d100000 space 1024K,   0% used [0x000000009d100000, 0x000000009d100000, 0x000000009d200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d200000 NTAMS 0x000000009d200000 space 1024K,   0% used [0x000000009d200000, 0x000000009d200000, 0x000000009d300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d300000 NTAMS 0x000000009d300000 space 1024K,   0% used [0x000000009d300000, 0x000000009d300000, 0x000000009d400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d400000 NTAMS 0x000000009d400000 space 1024K,   0% used [0x000000009d400000, 0x000000009d400000, 0x000000009d500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d500000 NTAMS 0x000000009d500000 space 1024K,   0% used [0x000000009d500000, 0x000000009d500000, 0x000000009d600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d600000 NTAMS 0x000000009d600000 space 1024K,   0% used [0x000000009d600000, 0x000000009d600000, 0x000000009d700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d700000 NTAMS 0x000000009d700000 space 1024K,   0% used [0x000000009d700000, 0x000000009d700000, 0x000000009d800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d800000 NTAMS 0x000000009d800000 space 1024K,   0% used [0x000000009d800000, 0x000000009d800000, 0x000000009d900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009d900000 NTAMS 0x000000009d900000 space 1024K,   0% used [0x000000009d900000, 0x000000009d900000, 0x000000009da00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009da00000 NTAMS 0x000000009da00000 space 1024K,   0% used [0x000000009da00000, 0x000000009da00000, 0x000000009db00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009db00000 NTAMS 0x000000009db00000 space 1024K,   0% used [0x000000009db00000, 0x000000009db00000, 0x000000009dc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009dc00000 NTAMS 0x000000009dc00000 space 1024K,   0% used [0x000000009dc00000, 0x000000009dc00000, 0x000000009dd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009dd00000 NTAMS 0x000000009dd00000 space 1024K,   0% used [0x000000009dd00000, 0x000000009dd00000, 0x000000009de00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009de00000 NTAMS 0x000000009de00000 space 1024K,   0% used [0x000000009de00000, 0x000000009de00000, 0x000000009df00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009df00000 NTAMS 0x000000009df00000 space 1024K,   0% used [0x000000009df00000, 0x000000009df00000, 0x000000009e000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e000000 NTAMS 0x000000009e000000 space 1024K,   0% used [0x000000009e000000, 0x000000009e000000, 0x000000009e100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e100000 NTAMS 0x000000009e100000 space 1024K,   0% used [0x000000009e100000, 0x000000009e100000, 0x000000009e200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e200000 NTAMS 0x000000009e200000 space 1024K,   0% used [0x000000009e200000, 0x000000009e200000, 0x000000009e300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e300000 NTAMS 0x000000009e300000 space 1024K,   0% used [0x000000009e300000, 0x000000009e300000, 0x000000009e400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e400000 NTAMS 0x000000009e400000 space 1024K,   0% used [0x000000009e400000, 0x000000009e400000, 0x000000009e500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e500000 NTAMS 0x000000009e500000 space 1024K,   0% used [0x000000009e500000, 0x000000009e500000, 0x000000009e600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e600000 NTAMS 0x000000009e600000 space 1024K,   0% used [0x000000009e600000, 0x000000009e600000, 0x000000009e700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e700000 NTAMS 0x000000009e700000 space 1024K,   0% used [0x000000009e700000, 0x000000009e700000, 0x000000009e800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e800000 NTAMS 0x000000009e800000 space 1024K,   0% used [0x000000009e800000, 0x000000009e800000, 0x000000009e900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009e900000 NTAMS 0x000000009e900000 space 1024K,   0% used [0x000000009e900000, 0x000000009e900000, 0x000000009ea00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ea00000 NTAMS 0x000000009ea00000 space 1024K,   0% used [0x000000009ea00000, 0x000000009ea00000, 0x000000009eb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009eb00000 NTAMS 0x000000009eb00000 space 1024K,   0% used [0x000000009eb00000, 0x000000009eb00000, 0x000000009ec00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ec00000 NTAMS 0x000000009ec00000 space 1024K,   0% used [0x000000009ec00000, 0x000000009ec00000, 0x000000009ed00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ed00000 NTAMS 0x000000009ed00000 space 1024K,   0% used [0x000000009ed00000, 0x000000009ed00000, 0x000000009ee00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ee00000 NTAMS 0x000000009ee00000 space 1024K,   0% used [0x000000009ee00000, 0x000000009ee00000, 0x000000009ef00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ef00000 NTAMS 0x000000009ef00000 space 1024K,   0% used [0x000000009ef00000, 0x000000009ef00000, 0x000000009f000000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f000000 NTAMS 0x000000009f000000 space 1024K,   0% used [0x000000009f000000, 0x000000009f000000, 0x000000009f100000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f100000 NTAMS 0x000000009f100000 space 1024K,   0% used [0x000000009f100000, 0x000000009f100000, 0x000000009f200000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f200000 NTAMS 0x000000009f200000 space 1024K,   0% used [0x000000009f200000, 0x000000009f200000, 0x000000009f300000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f300000 NTAMS 0x000000009f300000 space 1024K,   0% used [0x000000009f300000, 0x000000009f300000, 0x000000009f400000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f400000 NTAMS 0x000000009f400000 space 1024K,   0% used [0x000000009f400000, 0x000000009f400000, 0x000000009f500000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f500000 NTAMS 0x000000009f500000 space 1024K,   0% used [0x000000009f500000, 0x000000009f500000, 0x000000009f600000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f600000 NTAMS 0x000000009f600000 space 1024K,   0% used [0x000000009f600000, 0x000000009f600000, 0x000000009f700000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f700000 NTAMS 0x000000009f700000 space 1024K,   0% used [0x000000009f700000, 0x000000009f700000, 0x000000009f800000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f800000 NTAMS 0x000000009f800000 space 1024K,   0% used [0x000000009f800000, 0x000000009f800000, 0x000000009f900000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009f900000 NTAMS 0x000000009f900000 space 1024K,   0% used [0x000000009f900000, 0x000000009f900000, 0x000000009fa00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009fa00000 NTAMS 0x000000009fa00000 space 1024K,   0% used [0x000000009fa00000, 0x000000009fa00000, 0x000000009fb00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009fb00000 NTAMS 0x000000009fb00000 space 1024K,   0% used [0x000000009fb00000, 0x000000009fb00000, 0x000000009fc00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009fc00000 NTAMS 0x000000009fc00000 space 1024K,   0% used [0x000000009fc00000, 0x000000009fc00000, 0x000000009fd00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009fd00000 NTAMS 0x000000009fd00000 space 1024K,   0% used [0x000000009fd00000, 0x000000009fd00000, 0x000000009fe00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009fe00000 NTAMS 0x000000009fe00000 space 1024K,   0% used [0x000000009fe00000, 0x000000009fe00000, 0x000000009ff00000)</span><br><span class="line">          F TS     0 PTAMS 0x000000009ff00000 NTAMS 0x000000009ff00000 space 1024K,   0% used [0x000000009ff00000, 0x000000009ff00000, 0x00000000a0000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0000000 NTAMS 0x00000000a0000000 space 1024K,   0% used [0x00000000a0000000, 0x00000000a0000000, 0x00000000a0100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0100000 NTAMS 0x00000000a0100000 space 1024K,   0% used [0x00000000a0100000, 0x00000000a0100000, 0x00000000a0200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0200000 NTAMS 0x00000000a0200000 space 1024K,   0% used [0x00000000a0200000, 0x00000000a0200000, 0x00000000a0300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0300000 NTAMS 0x00000000a0300000 space 1024K,   0% used [0x00000000a0300000, 0x00000000a0300000, 0x00000000a0400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0400000 NTAMS 0x00000000a0400000 space 1024K,   0% used [0x00000000a0400000, 0x00000000a0400000, 0x00000000a0500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0500000 NTAMS 0x00000000a0500000 space 1024K,   0% used [0x00000000a0500000, 0x00000000a0500000, 0x00000000a0600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0600000 NTAMS 0x00000000a0600000 space 1024K,   0% used [0x00000000a0600000, 0x00000000a0600000, 0x00000000a0700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0700000 NTAMS 0x00000000a0700000 space 1024K,   0% used [0x00000000a0700000, 0x00000000a0700000, 0x00000000a0800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0800000 NTAMS 0x00000000a0800000 space 1024K,   0% used [0x00000000a0800000, 0x00000000a0800000, 0x00000000a0900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0900000 NTAMS 0x00000000a0900000 space 1024K,   0% used [0x00000000a0900000, 0x00000000a0900000, 0x00000000a0a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0a00000 NTAMS 0x00000000a0a00000 space 1024K,   0% used [0x00000000a0a00000, 0x00000000a0a00000, 0x00000000a0b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0b00000 NTAMS 0x00000000a0b00000 space 1024K,   0% used [0x00000000a0b00000, 0x00000000a0b00000, 0x00000000a0c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0c00000 NTAMS 0x00000000a0c00000 space 1024K,   0% used [0x00000000a0c00000, 0x00000000a0c00000, 0x00000000a0d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0d00000 NTAMS 0x00000000a0d00000 space 1024K,   0% used [0x00000000a0d00000, 0x00000000a0d00000, 0x00000000a0e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0e00000 NTAMS 0x00000000a0e00000 space 1024K,   0% used [0x00000000a0e00000, 0x00000000a0e00000, 0x00000000a0f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a0f00000 NTAMS 0x00000000a0f00000 space 1024K,   0% used [0x00000000a0f00000, 0x00000000a0f00000, 0x00000000a1000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1000000 NTAMS 0x00000000a1000000 space 1024K,   0% used [0x00000000a1000000, 0x00000000a1000000, 0x00000000a1100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1100000 NTAMS 0x00000000a1100000 space 1024K,   0% used [0x00000000a1100000, 0x00000000a1100000, 0x00000000a1200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1200000 NTAMS 0x00000000a1200000 space 1024K,   0% used [0x00000000a1200000, 0x00000000a1200000, 0x00000000a1300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1300000 NTAMS 0x00000000a1300000 space 1024K,   0% used [0x00000000a1300000, 0x00000000a1300000, 0x00000000a1400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1400000 NTAMS 0x00000000a1400000 space 1024K,   0% used [0x00000000a1400000, 0x00000000a1400000, 0x00000000a1500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1500000 NTAMS 0x00000000a1500000 space 1024K,   0% used [0x00000000a1500000, 0x00000000a1500000, 0x00000000a1600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1600000 NTAMS 0x00000000a1600000 space 1024K,   0% used [0x00000000a1600000, 0x00000000a1600000, 0x00000000a1700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1700000 NTAMS 0x00000000a1700000 space 1024K,   0% used [0x00000000a1700000, 0x00000000a1700000, 0x00000000a1800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1800000 NTAMS 0x00000000a1800000 space 1024K,   0% used [0x00000000a1800000, 0x00000000a1800000, 0x00000000a1900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1900000 NTAMS 0x00000000a1900000 space 1024K,   0% used [0x00000000a1900000, 0x00000000a1900000, 0x00000000a1a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1a00000 NTAMS 0x00000000a1a00000 space 1024K,   0% used [0x00000000a1a00000, 0x00000000a1a00000, 0x00000000a1b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1b00000 NTAMS 0x00000000a1b00000 space 1024K,   0% used [0x00000000a1b00000, 0x00000000a1b00000, 0x00000000a1c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1c00000 NTAMS 0x00000000a1c00000 space 1024K,   0% used [0x00000000a1c00000, 0x00000000a1c00000, 0x00000000a1d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1d00000 NTAMS 0x00000000a1d00000 space 1024K,   0% used [0x00000000a1d00000, 0x00000000a1d00000, 0x00000000a1e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1e00000 NTAMS 0x00000000a1e00000 space 1024K,   0% used [0x00000000a1e00000, 0x00000000a1e00000, 0x00000000a1f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a1f00000 NTAMS 0x00000000a1f00000 space 1024K,   0% used [0x00000000a1f00000, 0x00000000a1f00000, 0x00000000a2000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2000000 NTAMS 0x00000000a2000000 space 1024K,   0% used [0x00000000a2000000, 0x00000000a2000000, 0x00000000a2100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2100000 NTAMS 0x00000000a2100000 space 1024K,   0% used [0x00000000a2100000, 0x00000000a2100000, 0x00000000a2200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2200000 NTAMS 0x00000000a2200000 space 1024K,   0% used [0x00000000a2200000, 0x00000000a2200000, 0x00000000a2300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2300000 NTAMS 0x00000000a2300000 space 1024K,   0% used [0x00000000a2300000, 0x00000000a2300000, 0x00000000a2400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2400000 NTAMS 0x00000000a2400000 space 1024K,   0% used [0x00000000a2400000, 0x00000000a2400000, 0x00000000a2500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2500000 NTAMS 0x00000000a2500000 space 1024K,   0% used [0x00000000a2500000, 0x00000000a2500000, 0x00000000a2600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2600000 NTAMS 0x00000000a2600000 space 1024K,   0% used [0x00000000a2600000, 0x00000000a2600000, 0x00000000a2700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2700000 NTAMS 0x00000000a2700000 space 1024K,   0% used [0x00000000a2700000, 0x00000000a2700000, 0x00000000a2800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2800000 NTAMS 0x00000000a2800000 space 1024K,   0% used [0x00000000a2800000, 0x00000000a2800000, 0x00000000a2900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2900000 NTAMS 0x00000000a2900000 space 1024K,   0% used [0x00000000a2900000, 0x00000000a2900000, 0x00000000a2a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2a00000 NTAMS 0x00000000a2a00000 space 1024K,   0% used [0x00000000a2a00000, 0x00000000a2a00000, 0x00000000a2b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2b00000 NTAMS 0x00000000a2b00000 space 1024K,   0% used [0x00000000a2b00000, 0x00000000a2b00000, 0x00000000a2c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2c00000 NTAMS 0x00000000a2c00000 space 1024K,   0% used [0x00000000a2c00000, 0x00000000a2c00000, 0x00000000a2d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2d00000 NTAMS 0x00000000a2d00000 space 1024K,   0% used [0x00000000a2d00000, 0x00000000a2d00000, 0x00000000a2e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2e00000 NTAMS 0x00000000a2e00000 space 1024K,   0% used [0x00000000a2e00000, 0x00000000a2e00000, 0x00000000a2f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a2f00000 NTAMS 0x00000000a2f00000 space 1024K,   0% used [0x00000000a2f00000, 0x00000000a2f00000, 0x00000000a3000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3000000 NTAMS 0x00000000a3000000 space 1024K,   0% used [0x00000000a3000000, 0x00000000a3000000, 0x00000000a3100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3100000 NTAMS 0x00000000a3100000 space 1024K,   0% used [0x00000000a3100000, 0x00000000a3100000, 0x00000000a3200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3200000 NTAMS 0x00000000a3200000 space 1024K,   0% used [0x00000000a3200000, 0x00000000a3200000, 0x00000000a3300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3300000 NTAMS 0x00000000a3300000 space 1024K,   0% used [0x00000000a3300000, 0x00000000a3300000, 0x00000000a3400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3400000 NTAMS 0x00000000a3400000 space 1024K,   0% used [0x00000000a3400000, 0x00000000a3400000, 0x00000000a3500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3500000 NTAMS 0x00000000a3500000 space 1024K,   0% used [0x00000000a3500000, 0x00000000a3500000, 0x00000000a3600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3600000 NTAMS 0x00000000a3600000 space 1024K,   0% used [0x00000000a3600000, 0x00000000a3600000, 0x00000000a3700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3700000 NTAMS 0x00000000a3700000 space 1024K,   0% used [0x00000000a3700000, 0x00000000a3700000, 0x00000000a3800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3800000 NTAMS 0x00000000a3800000 space 1024K,   0% used [0x00000000a3800000, 0x00000000a3800000, 0x00000000a3900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3900000 NTAMS 0x00000000a3900000 space 1024K,   0% used [0x00000000a3900000, 0x00000000a3900000, 0x00000000a3a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3a00000 NTAMS 0x00000000a3a00000 space 1024K,   0% used [0x00000000a3a00000, 0x00000000a3a00000, 0x00000000a3b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3b00000 NTAMS 0x00000000a3b00000 space 1024K,   0% used [0x00000000a3b00000, 0x00000000a3b00000, 0x00000000a3c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3c00000 NTAMS 0x00000000a3c00000 space 1024K,   0% used [0x00000000a3c00000, 0x00000000a3c00000, 0x00000000a3d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3d00000 NTAMS 0x00000000a3d00000 space 1024K,   0% used [0x00000000a3d00000, 0x00000000a3d00000, 0x00000000a3e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3e00000 NTAMS 0x00000000a3e00000 space 1024K,   0% used [0x00000000a3e00000, 0x00000000a3e00000, 0x00000000a3f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a3f00000 NTAMS 0x00000000a3f00000 space 1024K,   0% used [0x00000000a3f00000, 0x00000000a3f00000, 0x00000000a4000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4000000 NTAMS 0x00000000a4000000 space 1024K,   0% used [0x00000000a4000000, 0x00000000a4000000, 0x00000000a4100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4100000 NTAMS 0x00000000a4100000 space 1024K,   0% used [0x00000000a4100000, 0x00000000a4100000, 0x00000000a4200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4200000 NTAMS 0x00000000a4200000 space 1024K,   0% used [0x00000000a4200000, 0x00000000a4200000, 0x00000000a4300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4300000 NTAMS 0x00000000a4300000 space 1024K,   0% used [0x00000000a4300000, 0x00000000a4300000, 0x00000000a4400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4400000 NTAMS 0x00000000a4400000 space 1024K,   0% used [0x00000000a4400000, 0x00000000a4400000, 0x00000000a4500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4500000 NTAMS 0x00000000a4500000 space 1024K,   0% used [0x00000000a4500000, 0x00000000a4500000, 0x00000000a4600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4600000 NTAMS 0x00000000a4600000 space 1024K,   0% used [0x00000000a4600000, 0x00000000a4600000, 0x00000000a4700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4700000 NTAMS 0x00000000a4700000 space 1024K,   0% used [0x00000000a4700000, 0x00000000a4700000, 0x00000000a4800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4800000 NTAMS 0x00000000a4800000 space 1024K,   0% used [0x00000000a4800000, 0x00000000a4800000, 0x00000000a4900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4900000 NTAMS 0x00000000a4900000 space 1024K,   0% used [0x00000000a4900000, 0x00000000a4900000, 0x00000000a4a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4a00000 NTAMS 0x00000000a4a00000 space 1024K,   0% used [0x00000000a4a00000, 0x00000000a4a00000, 0x00000000a4b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4b00000 NTAMS 0x00000000a4b00000 space 1024K,   0% used [0x00000000a4b00000, 0x00000000a4b00000, 0x00000000a4c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4c00000 NTAMS 0x00000000a4c00000 space 1024K,   0% used [0x00000000a4c00000, 0x00000000a4c00000, 0x00000000a4d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4d00000 NTAMS 0x00000000a4d00000 space 1024K,   0% used [0x00000000a4d00000, 0x00000000a4d00000, 0x00000000a4e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4e00000 NTAMS 0x00000000a4e00000 space 1024K,   0% used [0x00000000a4e00000, 0x00000000a4e00000, 0x00000000a4f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a4f00000 NTAMS 0x00000000a4f00000 space 1024K,   0% used [0x00000000a4f00000, 0x00000000a4f00000, 0x00000000a5000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5000000 NTAMS 0x00000000a5000000 space 1024K,   0% used [0x00000000a5000000, 0x00000000a5000000, 0x00000000a5100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5100000 NTAMS 0x00000000a5100000 space 1024K,   0% used [0x00000000a5100000, 0x00000000a5100000, 0x00000000a5200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5200000 NTAMS 0x00000000a5200000 space 1024K,   0% used [0x00000000a5200000, 0x00000000a5200000, 0x00000000a5300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5300000 NTAMS 0x00000000a5300000 space 1024K,   0% used [0x00000000a5300000, 0x00000000a5300000, 0x00000000a5400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5400000 NTAMS 0x00000000a5400000 space 1024K,   0% used [0x00000000a5400000, 0x00000000a5400000, 0x00000000a5500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5500000 NTAMS 0x00000000a5500000 space 1024K,   0% used [0x00000000a5500000, 0x00000000a5500000, 0x00000000a5600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5600000 NTAMS 0x00000000a5600000 space 1024K,   0% used [0x00000000a5600000, 0x00000000a5600000, 0x00000000a5700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5700000 NTAMS 0x00000000a5700000 space 1024K,   0% used [0x00000000a5700000, 0x00000000a5700000, 0x00000000a5800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5800000 NTAMS 0x00000000a5800000 space 1024K,   0% used [0x00000000a5800000, 0x00000000a5800000, 0x00000000a5900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5900000 NTAMS 0x00000000a5900000 space 1024K,   0% used [0x00000000a5900000, 0x00000000a5900000, 0x00000000a5a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5a00000 NTAMS 0x00000000a5a00000 space 1024K,   0% used [0x00000000a5a00000, 0x00000000a5a00000, 0x00000000a5b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5b00000 NTAMS 0x00000000a5b00000 space 1024K,   0% used [0x00000000a5b00000, 0x00000000a5b00000, 0x00000000a5c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5c00000 NTAMS 0x00000000a5c00000 space 1024K,   0% used [0x00000000a5c00000, 0x00000000a5c00000, 0x00000000a5d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5d00000 NTAMS 0x00000000a5d00000 space 1024K,   0% used [0x00000000a5d00000, 0x00000000a5d00000, 0x00000000a5e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5e00000 NTAMS 0x00000000a5e00000 space 1024K,   0% used [0x00000000a5e00000, 0x00000000a5e00000, 0x00000000a5f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a5f00000 NTAMS 0x00000000a5f00000 space 1024K,   0% used [0x00000000a5f00000, 0x00000000a5f00000, 0x00000000a6000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6000000 NTAMS 0x00000000a6000000 space 1024K,   0% used [0x00000000a6000000, 0x00000000a6000000, 0x00000000a6100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6100000 NTAMS 0x00000000a6100000 space 1024K,   0% used [0x00000000a6100000, 0x00000000a6100000, 0x00000000a6200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6200000 NTAMS 0x00000000a6200000 space 1024K,   0% used [0x00000000a6200000, 0x00000000a6200000, 0x00000000a6300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6300000 NTAMS 0x00000000a6300000 space 1024K,   0% used [0x00000000a6300000, 0x00000000a6300000, 0x00000000a6400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6400000 NTAMS 0x00000000a6400000 space 1024K,   0% used [0x00000000a6400000, 0x00000000a6400000, 0x00000000a6500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6500000 NTAMS 0x00000000a6500000 space 1024K,   0% used [0x00000000a6500000, 0x00000000a6500000, 0x00000000a6600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6600000 NTAMS 0x00000000a6600000 space 1024K,   0% used [0x00000000a6600000, 0x00000000a6600000, 0x00000000a6700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6700000 NTAMS 0x00000000a6700000 space 1024K,   0% used [0x00000000a6700000, 0x00000000a6700000, 0x00000000a6800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6800000 NTAMS 0x00000000a6800000 space 1024K,   0% used [0x00000000a6800000, 0x00000000a6800000, 0x00000000a6900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6900000 NTAMS 0x00000000a6900000 space 1024K,   0% used [0x00000000a6900000, 0x00000000a6900000, 0x00000000a6a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6a00000 NTAMS 0x00000000a6a00000 space 1024K,   0% used [0x00000000a6a00000, 0x00000000a6a00000, 0x00000000a6b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6b00000 NTAMS 0x00000000a6b00000 space 1024K,   0% used [0x00000000a6b00000, 0x00000000a6b00000, 0x00000000a6c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6c00000 NTAMS 0x00000000a6c00000 space 1024K,   0% used [0x00000000a6c00000, 0x00000000a6c00000, 0x00000000a6d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6d00000 NTAMS 0x00000000a6d00000 space 1024K,   0% used [0x00000000a6d00000, 0x00000000a6d00000, 0x00000000a6e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6e00000 NTAMS 0x00000000a6e00000 space 1024K,   0% used [0x00000000a6e00000, 0x00000000a6e00000, 0x00000000a6f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a6f00000 NTAMS 0x00000000a6f00000 space 1024K,   0% used [0x00000000a6f00000, 0x00000000a6f00000, 0x00000000a7000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7000000 NTAMS 0x00000000a7000000 space 1024K,   0% used [0x00000000a7000000, 0x00000000a7000000, 0x00000000a7100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7100000 NTAMS 0x00000000a7100000 space 1024K,   0% used [0x00000000a7100000, 0x00000000a7100000, 0x00000000a7200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7200000 NTAMS 0x00000000a7200000 space 1024K,   0% used [0x00000000a7200000, 0x00000000a7200000, 0x00000000a7300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7300000 NTAMS 0x00000000a7300000 space 1024K,   0% used [0x00000000a7300000, 0x00000000a7300000, 0x00000000a7400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7400000 NTAMS 0x00000000a7400000 space 1024K,   0% used [0x00000000a7400000, 0x00000000a7400000, 0x00000000a7500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7500000 NTAMS 0x00000000a7500000 space 1024K,   0% used [0x00000000a7500000, 0x00000000a7500000, 0x00000000a7600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7600000 NTAMS 0x00000000a7600000 space 1024K,   0% used [0x00000000a7600000, 0x00000000a7600000, 0x00000000a7700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7700000 NTAMS 0x00000000a7700000 space 1024K,   0% used [0x00000000a7700000, 0x00000000a7700000, 0x00000000a7800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7800000 NTAMS 0x00000000a7800000 space 1024K,   0% used [0x00000000a7800000, 0x00000000a7800000, 0x00000000a7900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7900000 NTAMS 0x00000000a7900000 space 1024K,   0% used [0x00000000a7900000, 0x00000000a7900000, 0x00000000a7a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7a00000 NTAMS 0x00000000a7a00000 space 1024K,   0% used [0x00000000a7a00000, 0x00000000a7a00000, 0x00000000a7b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7b00000 NTAMS 0x00000000a7b00000 space 1024K,   0% used [0x00000000a7b00000, 0x00000000a7b00000, 0x00000000a7c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7c00000 NTAMS 0x00000000a7c00000 space 1024K,   0% used [0x00000000a7c00000, 0x00000000a7c00000, 0x00000000a7d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7d00000 NTAMS 0x00000000a7d00000 space 1024K,   0% used [0x00000000a7d00000, 0x00000000a7d00000, 0x00000000a7e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7e00000 NTAMS 0x00000000a7e00000 space 1024K,   0% used [0x00000000a7e00000, 0x00000000a7e00000, 0x00000000a7f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a7f00000 NTAMS 0x00000000a7f00000 space 1024K,   0% used [0x00000000a7f00000, 0x00000000a7f00000, 0x00000000a8000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8000000 NTAMS 0x00000000a8000000 space 1024K,   0% used [0x00000000a8000000, 0x00000000a8000000, 0x00000000a8100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8100000 NTAMS 0x00000000a8100000 space 1024K,   0% used [0x00000000a8100000, 0x00000000a8100000, 0x00000000a8200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8200000 NTAMS 0x00000000a8200000 space 1024K,   0% used [0x00000000a8200000, 0x00000000a8200000, 0x00000000a8300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8300000 NTAMS 0x00000000a8300000 space 1024K,   0% used [0x00000000a8300000, 0x00000000a8300000, 0x00000000a8400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8400000 NTAMS 0x00000000a8400000 space 1024K,   0% used [0x00000000a8400000, 0x00000000a8400000, 0x00000000a8500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8500000 NTAMS 0x00000000a8500000 space 1024K,   0% used [0x00000000a8500000, 0x00000000a8500000, 0x00000000a8600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8600000 NTAMS 0x00000000a8600000 space 1024K,   0% used [0x00000000a8600000, 0x00000000a8600000, 0x00000000a8700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8700000 NTAMS 0x00000000a8700000 space 1024K,   0% used [0x00000000a8700000, 0x00000000a8700000, 0x00000000a8800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8800000 NTAMS 0x00000000a8800000 space 1024K,   0% used [0x00000000a8800000, 0x00000000a8800000, 0x00000000a8900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8900000 NTAMS 0x00000000a8900000 space 1024K,   0% used [0x00000000a8900000, 0x00000000a8900000, 0x00000000a8a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8a00000 NTAMS 0x00000000a8a00000 space 1024K,   0% used [0x00000000a8a00000, 0x00000000a8a00000, 0x00000000a8b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8b00000 NTAMS 0x00000000a8b00000 space 1024K,   0% used [0x00000000a8b00000, 0x00000000a8b00000, 0x00000000a8c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8c00000 NTAMS 0x00000000a8c00000 space 1024K,   0% used [0x00000000a8c00000, 0x00000000a8c00000, 0x00000000a8d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8d00000 NTAMS 0x00000000a8d00000 space 1024K,   0% used [0x00000000a8d00000, 0x00000000a8d00000, 0x00000000a8e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8e00000 NTAMS 0x00000000a8e00000 space 1024K,   0% used [0x00000000a8e00000, 0x00000000a8e00000, 0x00000000a8f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a8f00000 NTAMS 0x00000000a8f00000 space 1024K,   0% used [0x00000000a8f00000, 0x00000000a8f00000, 0x00000000a9000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9000000 NTAMS 0x00000000a9000000 space 1024K,   0% used [0x00000000a9000000, 0x00000000a9000000, 0x00000000a9100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9100000 NTAMS 0x00000000a9100000 space 1024K,   0% used [0x00000000a9100000, 0x00000000a9100000, 0x00000000a9200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9200000 NTAMS 0x00000000a9200000 space 1024K,   0% used [0x00000000a9200000, 0x00000000a9200000, 0x00000000a9300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9300000 NTAMS 0x00000000a9300000 space 1024K,   0% used [0x00000000a9300000, 0x00000000a9300000, 0x00000000a9400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9400000 NTAMS 0x00000000a9400000 space 1024K,   0% used [0x00000000a9400000, 0x00000000a9400000, 0x00000000a9500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9500000 NTAMS 0x00000000a9500000 space 1024K,   0% used [0x00000000a9500000, 0x00000000a9500000, 0x00000000a9600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9600000 NTAMS 0x00000000a9600000 space 1024K,   0% used [0x00000000a9600000, 0x00000000a9600000, 0x00000000a9700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9700000 NTAMS 0x00000000a9700000 space 1024K,   0% used [0x00000000a9700000, 0x00000000a9700000, 0x00000000a9800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9800000 NTAMS 0x00000000a9800000 space 1024K,   0% used [0x00000000a9800000, 0x00000000a9800000, 0x00000000a9900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9900000 NTAMS 0x00000000a9900000 space 1024K,   0% used [0x00000000a9900000, 0x00000000a9900000, 0x00000000a9a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9a00000 NTAMS 0x00000000a9a00000 space 1024K,   0% used [0x00000000a9a00000, 0x00000000a9a00000, 0x00000000a9b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9b00000 NTAMS 0x00000000a9b00000 space 1024K,   0% used [0x00000000a9b00000, 0x00000000a9b00000, 0x00000000a9c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9c00000 NTAMS 0x00000000a9c00000 space 1024K,   0% used [0x00000000a9c00000, 0x00000000a9c00000, 0x00000000a9d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9d00000 NTAMS 0x00000000a9d00000 space 1024K,   0% used [0x00000000a9d00000, 0x00000000a9d00000, 0x00000000a9e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9e00000 NTAMS 0x00000000a9e00000 space 1024K,   0% used [0x00000000a9e00000, 0x00000000a9e00000, 0x00000000a9f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000a9f00000 NTAMS 0x00000000a9f00000 space 1024K,   0% used [0x00000000a9f00000, 0x00000000a9f00000, 0x00000000aa000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa000000 NTAMS 0x00000000aa000000 space 1024K,   0% used [0x00000000aa000000, 0x00000000aa000000, 0x00000000aa100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa100000 NTAMS 0x00000000aa100000 space 1024K,   0% used [0x00000000aa100000, 0x00000000aa100000, 0x00000000aa200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa200000 NTAMS 0x00000000aa200000 space 1024K,   0% used [0x00000000aa200000, 0x00000000aa200000, 0x00000000aa300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa300000 NTAMS 0x00000000aa300000 space 1024K,   0% used [0x00000000aa300000, 0x00000000aa300000, 0x00000000aa400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa400000 NTAMS 0x00000000aa400000 space 1024K,   0% used [0x00000000aa400000, 0x00000000aa400000, 0x00000000aa500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa500000 NTAMS 0x00000000aa500000 space 1024K,   0% used [0x00000000aa500000, 0x00000000aa500000, 0x00000000aa600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa600000 NTAMS 0x00000000aa600000 space 1024K,   0% used [0x00000000aa600000, 0x00000000aa600000, 0x00000000aa700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa700000 NTAMS 0x00000000aa700000 space 1024K,   0% used [0x00000000aa700000, 0x00000000aa700000, 0x00000000aa800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa800000 NTAMS 0x00000000aa800000 space 1024K,   0% used [0x00000000aa800000, 0x00000000aa800000, 0x00000000aa900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aa900000 NTAMS 0x00000000aa900000 space 1024K,   0% used [0x00000000aa900000, 0x00000000aa900000, 0x00000000aaa00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aaa00000 NTAMS 0x00000000aaa00000 space 1024K,   0% used [0x00000000aaa00000, 0x00000000aaa00000, 0x00000000aab00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aab00000 NTAMS 0x00000000aab00000 space 1024K,   0% used [0x00000000aab00000, 0x00000000aab00000, 0x00000000aac00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aac00000 NTAMS 0x00000000aac00000 space 1024K,   0% used [0x00000000aac00000, 0x00000000aac00000, 0x00000000aad00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aad00000 NTAMS 0x00000000aad00000 space 1024K,   0% used [0x00000000aad00000, 0x00000000aad00000, 0x00000000aae00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aae00000 NTAMS 0x00000000aae00000 space 1024K,   0% used [0x00000000aae00000, 0x00000000aae00000, 0x00000000aaf00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aaf00000 NTAMS 0x00000000aaf00000 space 1024K,   0% used [0x00000000aaf00000, 0x00000000aaf00000, 0x00000000ab000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab000000 NTAMS 0x00000000ab000000 space 1024K,   0% used [0x00000000ab000000, 0x00000000ab000000, 0x00000000ab100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab100000 NTAMS 0x00000000ab100000 space 1024K,   0% used [0x00000000ab100000, 0x00000000ab100000, 0x00000000ab200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab200000 NTAMS 0x00000000ab200000 space 1024K,   0% used [0x00000000ab200000, 0x00000000ab200000, 0x00000000ab300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab300000 NTAMS 0x00000000ab300000 space 1024K,   0% used [0x00000000ab300000, 0x00000000ab300000, 0x00000000ab400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab400000 NTAMS 0x00000000ab400000 space 1024K,   0% used [0x00000000ab400000, 0x00000000ab400000, 0x00000000ab500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab500000 NTAMS 0x00000000ab500000 space 1024K,   0% used [0x00000000ab500000, 0x00000000ab500000, 0x00000000ab600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab600000 NTAMS 0x00000000ab600000 space 1024K,   0% used [0x00000000ab600000, 0x00000000ab600000, 0x00000000ab700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab700000 NTAMS 0x00000000ab700000 space 1024K,   0% used [0x00000000ab700000, 0x00000000ab700000, 0x00000000ab800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab800000 NTAMS 0x00000000ab800000 space 1024K,   0% used [0x00000000ab800000, 0x00000000ab800000, 0x00000000ab900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ab900000 NTAMS 0x00000000ab900000 space 1024K,   0% used [0x00000000ab900000, 0x00000000ab900000, 0x00000000aba00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aba00000 NTAMS 0x00000000aba00000 space 1024K,   0% used [0x00000000aba00000, 0x00000000aba00000, 0x00000000abb00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000abb00000 NTAMS 0x00000000abb00000 space 1024K,   0% used [0x00000000abb00000, 0x00000000abb00000, 0x00000000abc00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000abc00000 NTAMS 0x00000000abc00000 space 1024K,   0% used [0x00000000abc00000, 0x00000000abc00000, 0x00000000abd00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000abd00000 NTAMS 0x00000000abd00000 space 1024K,   0% used [0x00000000abd00000, 0x00000000abd00000, 0x00000000abe00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000abe00000 NTAMS 0x00000000abe00000 space 1024K,   0% used [0x00000000abe00000, 0x00000000abe00000, 0x00000000abf00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000abf00000 NTAMS 0x00000000abf00000 space 1024K,   0% used [0x00000000abf00000, 0x00000000abf00000, 0x00000000ac000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac000000 NTAMS 0x00000000ac000000 space 1024K,   0% used [0x00000000ac000000, 0x00000000ac000000, 0x00000000ac100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac100000 NTAMS 0x00000000ac100000 space 1024K,   0% used [0x00000000ac100000, 0x00000000ac100000, 0x00000000ac200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac200000 NTAMS 0x00000000ac200000 space 1024K,   0% used [0x00000000ac200000, 0x00000000ac200000, 0x00000000ac300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac300000 NTAMS 0x00000000ac300000 space 1024K,   0% used [0x00000000ac300000, 0x00000000ac300000, 0x00000000ac400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac400000 NTAMS 0x00000000ac400000 space 1024K,   0% used [0x00000000ac400000, 0x00000000ac400000, 0x00000000ac500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac500000 NTAMS 0x00000000ac500000 space 1024K,   0% used [0x00000000ac500000, 0x00000000ac500000, 0x00000000ac600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac600000 NTAMS 0x00000000ac600000 space 1024K,   0% used [0x00000000ac600000, 0x00000000ac600000, 0x00000000ac700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac700000 NTAMS 0x00000000ac700000 space 1024K,   0% used [0x00000000ac700000, 0x00000000ac700000, 0x00000000ac800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac800000 NTAMS 0x00000000ac800000 space 1024K,   0% used [0x00000000ac800000, 0x00000000ac800000, 0x00000000ac900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ac900000 NTAMS 0x00000000ac900000 space 1024K,   0% used [0x00000000ac900000, 0x00000000ac900000, 0x00000000aca00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aca00000 NTAMS 0x00000000aca00000 space 1024K,   0% used [0x00000000aca00000, 0x00000000aca00000, 0x00000000acb00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000acb00000 NTAMS 0x00000000acb00000 space 1024K,   0% used [0x00000000acb00000, 0x00000000acb00000, 0x00000000acc00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000acc00000 NTAMS 0x00000000acc00000 space 1024K,   0% used [0x00000000acc00000, 0x00000000acc00000, 0x00000000acd00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000acd00000 NTAMS 0x00000000acd00000 space 1024K,   0% used [0x00000000acd00000, 0x00000000acd00000, 0x00000000ace00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ace00000 NTAMS 0x00000000ace00000 space 1024K,   0% used [0x00000000ace00000, 0x00000000ace00000, 0x00000000acf00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000acf00000 NTAMS 0x00000000acf00000 space 1024K,   0% used [0x00000000acf00000, 0x00000000acf00000, 0x00000000ad000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad000000 NTAMS 0x00000000ad000000 space 1024K,   0% used [0x00000000ad000000, 0x00000000ad000000, 0x00000000ad100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad100000 NTAMS 0x00000000ad100000 space 1024K,   0% used [0x00000000ad100000, 0x00000000ad100000, 0x00000000ad200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad200000 NTAMS 0x00000000ad200000 space 1024K,   0% used [0x00000000ad200000, 0x00000000ad200000, 0x00000000ad300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad300000 NTAMS 0x00000000ad300000 space 1024K,   0% used [0x00000000ad300000, 0x00000000ad300000, 0x00000000ad400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad400000 NTAMS 0x00000000ad400000 space 1024K,   0% used [0x00000000ad400000, 0x00000000ad400000, 0x00000000ad500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad500000 NTAMS 0x00000000ad500000 space 1024K,   0% used [0x00000000ad500000, 0x00000000ad500000, 0x00000000ad600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad600000 NTAMS 0x00000000ad600000 space 1024K,   0% used [0x00000000ad600000, 0x00000000ad600000, 0x00000000ad700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad700000 NTAMS 0x00000000ad700000 space 1024K,   0% used [0x00000000ad700000, 0x00000000ad700000, 0x00000000ad800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad800000 NTAMS 0x00000000ad800000 space 1024K,   0% used [0x00000000ad800000, 0x00000000ad800000, 0x00000000ad900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ad900000 NTAMS 0x00000000ad900000 space 1024K,   0% used [0x00000000ad900000, 0x00000000ad900000, 0x00000000ada00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ada00000 NTAMS 0x00000000ada00000 space 1024K,   0% used [0x00000000ada00000, 0x00000000ada00000, 0x00000000adb00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000adb00000 NTAMS 0x00000000adb00000 space 1024K,   0% used [0x00000000adb00000, 0x00000000adb00000, 0x00000000adc00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000adc00000 NTAMS 0x00000000adc00000 space 1024K,   0% used [0x00000000adc00000, 0x00000000adc00000, 0x00000000add00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000add00000 NTAMS 0x00000000add00000 space 1024K,   0% used [0x00000000add00000, 0x00000000add00000, 0x00000000ade00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ade00000 NTAMS 0x00000000ade00000 space 1024K,   0% used [0x00000000ade00000, 0x00000000ade00000, 0x00000000adf00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000adf00000 NTAMS 0x00000000adf00000 space 1024K,   0% used [0x00000000adf00000, 0x00000000adf00000, 0x00000000ae000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae000000 NTAMS 0x00000000ae000000 space 1024K,   0% used [0x00000000ae000000, 0x00000000ae000000, 0x00000000ae100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae100000 NTAMS 0x00000000ae100000 space 1024K,   0% used [0x00000000ae100000, 0x00000000ae100000, 0x00000000ae200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae200000 NTAMS 0x00000000ae200000 space 1024K,   0% used [0x00000000ae200000, 0x00000000ae200000, 0x00000000ae300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae300000 NTAMS 0x00000000ae300000 space 1024K,   0% used [0x00000000ae300000, 0x00000000ae300000, 0x00000000ae400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae400000 NTAMS 0x00000000ae400000 space 1024K,   0% used [0x00000000ae400000, 0x00000000ae400000, 0x00000000ae500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae500000 NTAMS 0x00000000ae500000 space 1024K,   0% used [0x00000000ae500000, 0x00000000ae500000, 0x00000000ae600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae600000 NTAMS 0x00000000ae600000 space 1024K,   0% used [0x00000000ae600000, 0x00000000ae600000, 0x00000000ae700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae700000 NTAMS 0x00000000ae700000 space 1024K,   0% used [0x00000000ae700000, 0x00000000ae700000, 0x00000000ae800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae800000 NTAMS 0x00000000ae800000 space 1024K,   0% used [0x00000000ae800000, 0x00000000ae800000, 0x00000000ae900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000ae900000 NTAMS 0x00000000ae900000 space 1024K,   0% used [0x00000000ae900000, 0x00000000ae900000, 0x00000000aea00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aea00000 NTAMS 0x00000000aea00000 space 1024K,   0% used [0x00000000aea00000, 0x00000000aea00000, 0x00000000aeb00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aeb00000 NTAMS 0x00000000aeb00000 space 1024K,   0% used [0x00000000aeb00000, 0x00000000aeb00000, 0x00000000aec00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aec00000 NTAMS 0x00000000aec00000 space 1024K,   0% used [0x00000000aec00000, 0x00000000aec00000, 0x00000000aed00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aed00000 NTAMS 0x00000000aed00000 space 1024K,   0% used [0x00000000aed00000, 0x00000000aed00000, 0x00000000aee00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aee00000 NTAMS 0x00000000aee00000 space 1024K,   0% used [0x00000000aee00000, 0x00000000aee00000, 0x00000000aef00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aef00000 NTAMS 0x00000000aef00000 space 1024K,   0% used [0x00000000aef00000, 0x00000000aef00000, 0x00000000af000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af000000 NTAMS 0x00000000af000000 space 1024K,   0% used [0x00000000af000000, 0x00000000af000000, 0x00000000af100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af100000 NTAMS 0x00000000af100000 space 1024K,   0% used [0x00000000af100000, 0x00000000af100000, 0x00000000af200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af200000 NTAMS 0x00000000af200000 space 1024K,   0% used [0x00000000af200000, 0x00000000af200000, 0x00000000af300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af300000 NTAMS 0x00000000af300000 space 1024K,   0% used [0x00000000af300000, 0x00000000af300000, 0x00000000af400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af400000 NTAMS 0x00000000af400000 space 1024K,   0% used [0x00000000af400000, 0x00000000af400000, 0x00000000af500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af500000 NTAMS 0x00000000af500000 space 1024K,   0% used [0x00000000af500000, 0x00000000af500000, 0x00000000af600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af600000 NTAMS 0x00000000af600000 space 1024K,   0% used [0x00000000af600000, 0x00000000af600000, 0x00000000af700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af700000 NTAMS 0x00000000af700000 space 1024K,   0% used [0x00000000af700000, 0x00000000af700000, 0x00000000af800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af800000 NTAMS 0x00000000af800000 space 1024K,   0% used [0x00000000af800000, 0x00000000af800000, 0x00000000af900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000af900000 NTAMS 0x00000000af900000 space 1024K,   0% used [0x00000000af900000, 0x00000000af900000, 0x00000000afa00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000afa00000 NTAMS 0x00000000afa00000 space 1024K,   0% used [0x00000000afa00000, 0x00000000afa00000, 0x00000000afb00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000afb00000 NTAMS 0x00000000afb00000 space 1024K,   0% used [0x00000000afb00000, 0x00000000afb00000, 0x00000000afc00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000afc00000 NTAMS 0x00000000afc00000 space 1024K,   0% used [0x00000000afc00000, 0x00000000afc00000, 0x00000000afd00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000afd00000 NTAMS 0x00000000afd00000 space 1024K,   0% used [0x00000000afd00000, 0x00000000afd00000, 0x00000000afe00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000afe00000 NTAMS 0x00000000afe00000 space 1024K,   0% used [0x00000000afe00000, 0x00000000afe00000, 0x00000000aff00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000aff00000 NTAMS 0x00000000aff00000 space 1024K,   0% used [0x00000000aff00000, 0x00000000aff00000, 0x00000000b0000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0000000 NTAMS 0x00000000b0000000 space 1024K,   0% used [0x00000000b0000000, 0x00000000b0000000, 0x00000000b0100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0100000 NTAMS 0x00000000b0100000 space 1024K,   0% used [0x00000000b0100000, 0x00000000b0100000, 0x00000000b0200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0200000 NTAMS 0x00000000b0200000 space 1024K,   0% used [0x00000000b0200000, 0x00000000b0200000, 0x00000000b0300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0300000 NTAMS 0x00000000b0300000 space 1024K,   0% used [0x00000000b0300000, 0x00000000b0300000, 0x00000000b0400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0400000 NTAMS 0x00000000b0400000 space 1024K,   0% used [0x00000000b0400000, 0x00000000b0400000, 0x00000000b0500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0500000 NTAMS 0x00000000b0500000 space 1024K,   0% used [0x00000000b0500000, 0x00000000b0500000, 0x00000000b0600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0600000 NTAMS 0x00000000b0600000 space 1024K,   0% used [0x00000000b0600000, 0x00000000b0600000, 0x00000000b0700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0700000 NTAMS 0x00000000b0700000 space 1024K,   0% used [0x00000000b0700000, 0x00000000b0700000, 0x00000000b0800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0800000 NTAMS 0x00000000b0800000 space 1024K,   0% used [0x00000000b0800000, 0x00000000b0800000, 0x00000000b0900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0900000 NTAMS 0x00000000b0900000 space 1024K,   0% used [0x00000000b0900000, 0x00000000b0900000, 0x00000000b0a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0a00000 NTAMS 0x00000000b0a00000 space 1024K,   0% used [0x00000000b0a00000, 0x00000000b0a00000, 0x00000000b0b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0b00000 NTAMS 0x00000000b0b00000 space 1024K,   0% used [0x00000000b0b00000, 0x00000000b0b00000, 0x00000000b0c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0c00000 NTAMS 0x00000000b0c00000 space 1024K,   0% used [0x00000000b0c00000, 0x00000000b0c00000, 0x00000000b0d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0d00000 NTAMS 0x00000000b0d00000 space 1024K,   0% used [0x00000000b0d00000, 0x00000000b0d00000, 0x00000000b0e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0e00000 NTAMS 0x00000000b0e00000 space 1024K,   0% used [0x00000000b0e00000, 0x00000000b0e00000, 0x00000000b0f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b0f00000 NTAMS 0x00000000b0f00000 space 1024K,   0% used [0x00000000b0f00000, 0x00000000b0f00000, 0x00000000b1000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1000000 NTAMS 0x00000000b1000000 space 1024K,   0% used [0x00000000b1000000, 0x00000000b1000000, 0x00000000b1100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1100000 NTAMS 0x00000000b1100000 space 1024K,   0% used [0x00000000b1100000, 0x00000000b1100000, 0x00000000b1200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1200000 NTAMS 0x00000000b1200000 space 1024K,   0% used [0x00000000b1200000, 0x00000000b1200000, 0x00000000b1300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1300000 NTAMS 0x00000000b1300000 space 1024K,   0% used [0x00000000b1300000, 0x00000000b1300000, 0x00000000b1400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1400000 NTAMS 0x00000000b1400000 space 1024K,   0% used [0x00000000b1400000, 0x00000000b1400000, 0x00000000b1500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1500000 NTAMS 0x00000000b1500000 space 1024K,   0% used [0x00000000b1500000, 0x00000000b1500000, 0x00000000b1600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1600000 NTAMS 0x00000000b1600000 space 1024K,   0% used [0x00000000b1600000, 0x00000000b1600000, 0x00000000b1700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1700000 NTAMS 0x00000000b1700000 space 1024K,   0% used [0x00000000b1700000, 0x00000000b1700000, 0x00000000b1800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1800000 NTAMS 0x00000000b1800000 space 1024K,   0% used [0x00000000b1800000, 0x00000000b1800000, 0x00000000b1900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1900000 NTAMS 0x00000000b1900000 space 1024K,   0% used [0x00000000b1900000, 0x00000000b1900000, 0x00000000b1a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1a00000 NTAMS 0x00000000b1a00000 space 1024K,   0% used [0x00000000b1a00000, 0x00000000b1a00000, 0x00000000b1b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1b00000 NTAMS 0x00000000b1b00000 space 1024K,   0% used [0x00000000b1b00000, 0x00000000b1b00000, 0x00000000b1c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1c00000 NTAMS 0x00000000b1c00000 space 1024K,   0% used [0x00000000b1c00000, 0x00000000b1c00000, 0x00000000b1d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1d00000 NTAMS 0x00000000b1d00000 space 1024K,   0% used [0x00000000b1d00000, 0x00000000b1d00000, 0x00000000b1e00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1e00000 NTAMS 0x00000000b1e00000 space 1024K,   0% used [0x00000000b1e00000, 0x00000000b1e00000, 0x00000000b1f00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b1f00000 NTAMS 0x00000000b1f00000 space 1024K,   0% used [0x00000000b1f00000, 0x00000000b1f00000, 0x00000000b2000000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2000000 NTAMS 0x00000000b2000000 space 1024K,   0% used [0x00000000b2000000, 0x00000000b2000000, 0x00000000b2100000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2100000 NTAMS 0x00000000b2100000 space 1024K,   0% used [0x00000000b2100000, 0x00000000b2100000, 0x00000000b2200000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2200000 NTAMS 0x00000000b2200000 space 1024K,   0% used [0x00000000b2200000, 0x00000000b2200000, 0x00000000b2300000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2300000 NTAMS 0x00000000b2300000 space 1024K,   0% used [0x00000000b2300000, 0x00000000b2300000, 0x00000000b2400000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2400000 NTAMS 0x00000000b2400000 space 1024K,   0% used [0x00000000b2400000, 0x00000000b2400000, 0x00000000b2500000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2500000 NTAMS 0x00000000b2500000 space 1024K,   0% used [0x00000000b2500000, 0x00000000b2500000, 0x00000000b2600000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2600000 NTAMS 0x00000000b2600000 space 1024K,   0% used [0x00000000b2600000, 0x00000000b2600000, 0x00000000b2700000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2700000 NTAMS 0x00000000b2700000 space 1024K,   0% used [0x00000000b2700000, 0x00000000b2700000, 0x00000000b2800000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2800000 NTAMS 0x00000000b2800000 space 1024K,   0% used [0x00000000b2800000, 0x00000000b2800000, 0x00000000b2900000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2900000 NTAMS 0x00000000b2900000 space 1024K,   0% used [0x00000000b2900000, 0x00000000b2900000, 0x00000000b2a00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2a00000 NTAMS 0x00000000b2a00000 space 1024K,   0% used [0x00000000b2a00000, 0x00000000b2a00000, 0x00000000b2b00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2b00000 NTAMS 0x00000000b2b00000 space 1024K,   0% used [0x00000000b2b00000, 0x00000000b2b00000, 0x00000000b2c00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2c00000 NTAMS 0x00000000b2c00000 space 1024K,   0% used [0x00000000b2c00000, 0x00000000b2c00000, 0x00000000b2d00000)</span><br><span class="line">          F TS     0 PTAMS 0x00000000b2d00000 NTAMS 0x00000000b2d00000 space 1024K,   0% used [0x00000000b2d00000, 0x00000000b2d00000, 0x00000000b2e00000)</span><br><span class="line">          F TS    37 PTAMS 0x00000000b2e00000 NTAMS 0x00000000b2e00000 space 1024K,   0% used [0x00000000b2e00000, 0x00000000b2e00000, 0x00000000b2f00000)</span><br><span class="line">          F TS    37 PTAMS 0x00000000b2f00000 NTAMS 0x00000000b2f00000 space 1024K,   0% used [0x00000000b2f00000, 0x00000000b2f00000, 0x00000000b3000000)</span><br><span class="line">          F TS    37 PTAMS 0x00000000b3000000 NTAMS 0x00000000b3000000 space 1024K,   0% used [0x00000000b3000000, 0x00000000b3000000, 0x00000000b3100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3100000 NTAMS 0x00000000b3100000 space 1024K,   0% used [0x00000000b3100000, 0x00000000b3100000, 0x00000000b3200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3200000 NTAMS 0x00000000b3200000 space 1024K,   0% used [0x00000000b3200000, 0x00000000b3200000, 0x00000000b3300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3300000 NTAMS 0x00000000b3300000 space 1024K,   0% used [0x00000000b3300000, 0x00000000b3300000, 0x00000000b3400000)</span><br><span class="line">    CS SU   TS    41 PTAMS 0x00000000b3400000 NTAMS 0x00000000b3400000 space 1024K,  83% used [0x00000000b3400000, 0x00000000b34d4b70, 0x00000000b3500000)</span><br><span class="line">    CS SU   TS    41 PTAMS 0x00000000b3500000 NTAMS 0x00000000b3500000 space 1024K, 100% used [0x00000000b3500000, 0x00000000b3600000, 0x00000000b3600000)</span><br><span class="line">    CS SU   TS    41 PTAMS 0x00000000b3600000 NTAMS 0x00000000b3600000 space 1024K, 100% used [0x00000000b3600000, 0x00000000b3700000, 0x00000000b3700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3700000 NTAMS 0x00000000b3700000 space 1024K,   0% used [0x00000000b3700000, 0x00000000b3700000, 0x00000000b3800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3800000 NTAMS 0x00000000b3800000 space 1024K,   0% used [0x00000000b3800000, 0x00000000b3800000, 0x00000000b3900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3900000 NTAMS 0x00000000b3900000 space 1024K,   0% used [0x00000000b3900000, 0x00000000b3900000, 0x00000000b3a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3a00000 NTAMS 0x00000000b3a00000 space 1024K,   0% used [0x00000000b3a00000, 0x00000000b3a00000, 0x00000000b3b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3b00000 NTAMS 0x00000000b3b00000 space 1024K,   0% used [0x00000000b3b00000, 0x00000000b3b00000, 0x00000000b3c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3c00000 NTAMS 0x00000000b3c00000 space 1024K,   0% used [0x00000000b3c00000, 0x00000000b3c00000, 0x00000000b3d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3d00000 NTAMS 0x00000000b3d00000 space 1024K,   0% used [0x00000000b3d00000, 0x00000000b3d00000, 0x00000000b3e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3e00000 NTAMS 0x00000000b3e00000 space 1024K,   0% used [0x00000000b3e00000, 0x00000000b3e00000, 0x00000000b3f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b3f00000 NTAMS 0x00000000b3f00000 space 1024K,   0% used [0x00000000b3f00000, 0x00000000b3f00000, 0x00000000b4000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4000000 NTAMS 0x00000000b4000000 space 1024K,   0% used [0x00000000b4000000, 0x00000000b4000000, 0x00000000b4100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4100000 NTAMS 0x00000000b4100000 space 1024K,   0% used [0x00000000b4100000, 0x00000000b4100000, 0x00000000b4200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4200000 NTAMS 0x00000000b4200000 space 1024K,   0% used [0x00000000b4200000, 0x00000000b4200000, 0x00000000b4300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4300000 NTAMS 0x00000000b4300000 space 1024K,   0% used [0x00000000b4300000, 0x00000000b4300000, 0x00000000b4400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4400000 NTAMS 0x00000000b4400000 space 1024K,   0% used [0x00000000b4400000, 0x00000000b4400000, 0x00000000b4500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4500000 NTAMS 0x00000000b4500000 space 1024K,   0% used [0x00000000b4500000, 0x00000000b4500000, 0x00000000b4600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4600000 NTAMS 0x00000000b4600000 space 1024K,   0% used [0x00000000b4600000, 0x00000000b4600000, 0x00000000b4700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4700000 NTAMS 0x00000000b4700000 space 1024K,   0% used [0x00000000b4700000, 0x00000000b4700000, 0x00000000b4800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4800000 NTAMS 0x00000000b4800000 space 1024K,   0% used [0x00000000b4800000, 0x00000000b4800000, 0x00000000b4900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4900000 NTAMS 0x00000000b4900000 space 1024K,   0% used [0x00000000b4900000, 0x00000000b4900000, 0x00000000b4a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4a00000 NTAMS 0x00000000b4a00000 space 1024K,   0% used [0x00000000b4a00000, 0x00000000b4a00000, 0x00000000b4b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4b00000 NTAMS 0x00000000b4b00000 space 1024K,   0% used [0x00000000b4b00000, 0x00000000b4b00000, 0x00000000b4c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4c00000 NTAMS 0x00000000b4c00000 space 1024K,   0% used [0x00000000b4c00000, 0x00000000b4c00000, 0x00000000b4d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4d00000 NTAMS 0x00000000b4d00000 space 1024K,   0% used [0x00000000b4d00000, 0x00000000b4d00000, 0x00000000b4e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4e00000 NTAMS 0x00000000b4e00000 space 1024K,   0% used [0x00000000b4e00000, 0x00000000b4e00000, 0x00000000b4f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b4f00000 NTAMS 0x00000000b4f00000 space 1024K,   0% used [0x00000000b4f00000, 0x00000000b4f00000, 0x00000000b5000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5000000 NTAMS 0x00000000b5000000 space 1024K,   0% used [0x00000000b5000000, 0x00000000b5000000, 0x00000000b5100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5100000 NTAMS 0x00000000b5100000 space 1024K,   0% used [0x00000000b5100000, 0x00000000b5100000, 0x00000000b5200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5200000 NTAMS 0x00000000b5200000 space 1024K,   0% used [0x00000000b5200000, 0x00000000b5200000, 0x00000000b5300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5300000 NTAMS 0x00000000b5300000 space 1024K,   0% used [0x00000000b5300000, 0x00000000b5300000, 0x00000000b5400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5400000 NTAMS 0x00000000b5400000 space 1024K,   0% used [0x00000000b5400000, 0x00000000b5400000, 0x00000000b5500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5500000 NTAMS 0x00000000b5500000 space 1024K,   0% used [0x00000000b5500000, 0x00000000b5500000, 0x00000000b5600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5600000 NTAMS 0x00000000b5600000 space 1024K,   0% used [0x00000000b5600000, 0x00000000b5600000, 0x00000000b5700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5700000 NTAMS 0x00000000b5700000 space 1024K,   0% used [0x00000000b5700000, 0x00000000b5700000, 0x00000000b5800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5800000 NTAMS 0x00000000b5800000 space 1024K,   0% used [0x00000000b5800000, 0x00000000b5800000, 0x00000000b5900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5900000 NTAMS 0x00000000b5900000 space 1024K,   0% used [0x00000000b5900000, 0x00000000b5900000, 0x00000000b5a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5a00000 NTAMS 0x00000000b5a00000 space 1024K,   0% used [0x00000000b5a00000, 0x00000000b5a00000, 0x00000000b5b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5b00000 NTAMS 0x00000000b5b00000 space 1024K,   0% used [0x00000000b5b00000, 0x00000000b5b00000, 0x00000000b5c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5c00000 NTAMS 0x00000000b5c00000 space 1024K,   0% used [0x00000000b5c00000, 0x00000000b5c00000, 0x00000000b5d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5d00000 NTAMS 0x00000000b5d00000 space 1024K,   0% used [0x00000000b5d00000, 0x00000000b5d00000, 0x00000000b5e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5e00000 NTAMS 0x00000000b5e00000 space 1024K,   0% used [0x00000000b5e00000, 0x00000000b5e00000, 0x00000000b5f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b5f00000 NTAMS 0x00000000b5f00000 space 1024K,   0% used [0x00000000b5f00000, 0x00000000b5f00000, 0x00000000b6000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6000000 NTAMS 0x00000000b6000000 space 1024K,   0% used [0x00000000b6000000, 0x00000000b6000000, 0x00000000b6100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6100000 NTAMS 0x00000000b6100000 space 1024K,   0% used [0x00000000b6100000, 0x00000000b6100000, 0x00000000b6200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6200000 NTAMS 0x00000000b6200000 space 1024K,   0% used [0x00000000b6200000, 0x00000000b6200000, 0x00000000b6300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6300000 NTAMS 0x00000000b6300000 space 1024K,   0% used [0x00000000b6300000, 0x00000000b6300000, 0x00000000b6400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6400000 NTAMS 0x00000000b6400000 space 1024K,   0% used [0x00000000b6400000, 0x00000000b6400000, 0x00000000b6500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6500000 NTAMS 0x00000000b6500000 space 1024K,   0% used [0x00000000b6500000, 0x00000000b6500000, 0x00000000b6600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6600000 NTAMS 0x00000000b6600000 space 1024K,   0% used [0x00000000b6600000, 0x00000000b6600000, 0x00000000b6700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6700000 NTAMS 0x00000000b6700000 space 1024K,   0% used [0x00000000b6700000, 0x00000000b6700000, 0x00000000b6800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6800000 NTAMS 0x00000000b6800000 space 1024K,   0% used [0x00000000b6800000, 0x00000000b6800000, 0x00000000b6900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6900000 NTAMS 0x00000000b6900000 space 1024K,   0% used [0x00000000b6900000, 0x00000000b6900000, 0x00000000b6a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6a00000 NTAMS 0x00000000b6a00000 space 1024K,   0% used [0x00000000b6a00000, 0x00000000b6a00000, 0x00000000b6b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6b00000 NTAMS 0x00000000b6b00000 space 1024K,   0% used [0x00000000b6b00000, 0x00000000b6b00000, 0x00000000b6c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6c00000 NTAMS 0x00000000b6c00000 space 1024K,   0% used [0x00000000b6c00000, 0x00000000b6c00000, 0x00000000b6d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6d00000 NTAMS 0x00000000b6d00000 space 1024K,   0% used [0x00000000b6d00000, 0x00000000b6d00000, 0x00000000b6e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6e00000 NTAMS 0x00000000b6e00000 space 1024K,   0% used [0x00000000b6e00000, 0x00000000b6e00000, 0x00000000b6f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b6f00000 NTAMS 0x00000000b6f00000 space 1024K,   0% used [0x00000000b6f00000, 0x00000000b6f00000, 0x00000000b7000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7000000 NTAMS 0x00000000b7000000 space 1024K,   0% used [0x00000000b7000000, 0x00000000b7000000, 0x00000000b7100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7100000 NTAMS 0x00000000b7100000 space 1024K,   0% used [0x00000000b7100000, 0x00000000b7100000, 0x00000000b7200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7200000 NTAMS 0x00000000b7200000 space 1024K,   0% used [0x00000000b7200000, 0x00000000b7200000, 0x00000000b7300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7300000 NTAMS 0x00000000b7300000 space 1024K,   0% used [0x00000000b7300000, 0x00000000b7300000, 0x00000000b7400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7400000 NTAMS 0x00000000b7400000 space 1024K,   0% used [0x00000000b7400000, 0x00000000b7400000, 0x00000000b7500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7500000 NTAMS 0x00000000b7500000 space 1024K,   0% used [0x00000000b7500000, 0x00000000b7500000, 0x00000000b7600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7600000 NTAMS 0x00000000b7600000 space 1024K,   0% used [0x00000000b7600000, 0x00000000b7600000, 0x00000000b7700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7700000 NTAMS 0x00000000b7700000 space 1024K,   0% used [0x00000000b7700000, 0x00000000b7700000, 0x00000000b7800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7800000 NTAMS 0x00000000b7800000 space 1024K,   0% used [0x00000000b7800000, 0x00000000b7800000, 0x00000000b7900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7900000 NTAMS 0x00000000b7900000 space 1024K,   0% used [0x00000000b7900000, 0x00000000b7900000, 0x00000000b7a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7a00000 NTAMS 0x00000000b7a00000 space 1024K,   0% used [0x00000000b7a00000, 0x00000000b7a00000, 0x00000000b7b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7b00000 NTAMS 0x00000000b7b00000 space 1024K,   0% used [0x00000000b7b00000, 0x00000000b7b00000, 0x00000000b7c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7c00000 NTAMS 0x00000000b7c00000 space 1024K,   0% used [0x00000000b7c00000, 0x00000000b7c00000, 0x00000000b7d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7d00000 NTAMS 0x00000000b7d00000 space 1024K,   0% used [0x00000000b7d00000, 0x00000000b7d00000, 0x00000000b7e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7e00000 NTAMS 0x00000000b7e00000 space 1024K,   0% used [0x00000000b7e00000, 0x00000000b7e00000, 0x00000000b7f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b7f00000 NTAMS 0x00000000b7f00000 space 1024K,   0% used [0x00000000b7f00000, 0x00000000b7f00000, 0x00000000b8000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8000000 NTAMS 0x00000000b8000000 space 1024K,   0% used [0x00000000b8000000, 0x00000000b8000000, 0x00000000b8100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8100000 NTAMS 0x00000000b8100000 space 1024K,   0% used [0x00000000b8100000, 0x00000000b8100000, 0x00000000b8200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8200000 NTAMS 0x00000000b8200000 space 1024K,   0% used [0x00000000b8200000, 0x00000000b8200000, 0x00000000b8300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8300000 NTAMS 0x00000000b8300000 space 1024K,   0% used [0x00000000b8300000, 0x00000000b8300000, 0x00000000b8400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8400000 NTAMS 0x00000000b8400000 space 1024K,   0% used [0x00000000b8400000, 0x00000000b8400000, 0x00000000b8500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8500000 NTAMS 0x00000000b8500000 space 1024K,   0% used [0x00000000b8500000, 0x00000000b8500000, 0x00000000b8600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8600000 NTAMS 0x00000000b8600000 space 1024K,   0% used [0x00000000b8600000, 0x00000000b8600000, 0x00000000b8700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8700000 NTAMS 0x00000000b8700000 space 1024K,   0% used [0x00000000b8700000, 0x00000000b8700000, 0x00000000b8800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8800000 NTAMS 0x00000000b8800000 space 1024K,   0% used [0x00000000b8800000, 0x00000000b8800000, 0x00000000b8900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8900000 NTAMS 0x00000000b8900000 space 1024K,   0% used [0x00000000b8900000, 0x00000000b8900000, 0x00000000b8a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8a00000 NTAMS 0x00000000b8a00000 space 1024K,   0% used [0x00000000b8a00000, 0x00000000b8a00000, 0x00000000b8b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8b00000 NTAMS 0x00000000b8b00000 space 1024K,   0% used [0x00000000b8b00000, 0x00000000b8b00000, 0x00000000b8c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8c00000 NTAMS 0x00000000b8c00000 space 1024K,   0% used [0x00000000b8c00000, 0x00000000b8c00000, 0x00000000b8d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8d00000 NTAMS 0x00000000b8d00000 space 1024K,   0% used [0x00000000b8d00000, 0x00000000b8d00000, 0x00000000b8e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8e00000 NTAMS 0x00000000b8e00000 space 1024K,   0% used [0x00000000b8e00000, 0x00000000b8e00000, 0x00000000b8f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b8f00000 NTAMS 0x00000000b8f00000 space 1024K,   0% used [0x00000000b8f00000, 0x00000000b8f00000, 0x00000000b9000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9000000 NTAMS 0x00000000b9000000 space 1024K,   0% used [0x00000000b9000000, 0x00000000b9000000, 0x00000000b9100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9100000 NTAMS 0x00000000b9100000 space 1024K,   0% used [0x00000000b9100000, 0x00000000b9100000, 0x00000000b9200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9200000 NTAMS 0x00000000b9200000 space 1024K,   0% used [0x00000000b9200000, 0x00000000b9200000, 0x00000000b9300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9300000 NTAMS 0x00000000b9300000 space 1024K,   0% used [0x00000000b9300000, 0x00000000b9300000, 0x00000000b9400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9400000 NTAMS 0x00000000b9400000 space 1024K,   0% used [0x00000000b9400000, 0x00000000b9400000, 0x00000000b9500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9500000 NTAMS 0x00000000b9500000 space 1024K,   0% used [0x00000000b9500000, 0x00000000b9500000, 0x00000000b9600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9600000 NTAMS 0x00000000b9600000 space 1024K,   0% used [0x00000000b9600000, 0x00000000b9600000, 0x00000000b9700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9700000 NTAMS 0x00000000b9700000 space 1024K,   0% used [0x00000000b9700000, 0x00000000b9700000, 0x00000000b9800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9800000 NTAMS 0x00000000b9800000 space 1024K,   0% used [0x00000000b9800000, 0x00000000b9800000, 0x00000000b9900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9900000 NTAMS 0x00000000b9900000 space 1024K,   0% used [0x00000000b9900000, 0x00000000b9900000, 0x00000000b9a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9a00000 NTAMS 0x00000000b9a00000 space 1024K,   0% used [0x00000000b9a00000, 0x00000000b9a00000, 0x00000000b9b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9b00000 NTAMS 0x00000000b9b00000 space 1024K,   0% used [0x00000000b9b00000, 0x00000000b9b00000, 0x00000000b9c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9c00000 NTAMS 0x00000000b9c00000 space 1024K,   0% used [0x00000000b9c00000, 0x00000000b9c00000, 0x00000000b9d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9d00000 NTAMS 0x00000000b9d00000 space 1024K,   0% used [0x00000000b9d00000, 0x00000000b9d00000, 0x00000000b9e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9e00000 NTAMS 0x00000000b9e00000 space 1024K,   0% used [0x00000000b9e00000, 0x00000000b9e00000, 0x00000000b9f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000b9f00000 NTAMS 0x00000000b9f00000 space 1024K,   0% used [0x00000000b9f00000, 0x00000000b9f00000, 0x00000000ba000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba000000 NTAMS 0x00000000ba000000 space 1024K,   0% used [0x00000000ba000000, 0x00000000ba000000, 0x00000000ba100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba100000 NTAMS 0x00000000ba100000 space 1024K,   0% used [0x00000000ba100000, 0x00000000ba100000, 0x00000000ba200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba200000 NTAMS 0x00000000ba200000 space 1024K,   0% used [0x00000000ba200000, 0x00000000ba200000, 0x00000000ba300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba300000 NTAMS 0x00000000ba300000 space 1024K,   0% used [0x00000000ba300000, 0x00000000ba300000, 0x00000000ba400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba400000 NTAMS 0x00000000ba400000 space 1024K,   0% used [0x00000000ba400000, 0x00000000ba400000, 0x00000000ba500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba500000 NTAMS 0x00000000ba500000 space 1024K,   0% used [0x00000000ba500000, 0x00000000ba500000, 0x00000000ba600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba600000 NTAMS 0x00000000ba600000 space 1024K,   0% used [0x00000000ba600000, 0x00000000ba600000, 0x00000000ba700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba700000 NTAMS 0x00000000ba700000 space 1024K,   0% used [0x00000000ba700000, 0x00000000ba700000, 0x00000000ba800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba800000 NTAMS 0x00000000ba800000 space 1024K,   0% used [0x00000000ba800000, 0x00000000ba800000, 0x00000000ba900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ba900000 NTAMS 0x00000000ba900000 space 1024K,   0% used [0x00000000ba900000, 0x00000000ba900000, 0x00000000baa00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000baa00000 NTAMS 0x00000000baa00000 space 1024K,   0% used [0x00000000baa00000, 0x00000000baa00000, 0x00000000bab00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bab00000 NTAMS 0x00000000bab00000 space 1024K,   0% used [0x00000000bab00000, 0x00000000bab00000, 0x00000000bac00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bac00000 NTAMS 0x00000000bac00000 space 1024K,   0% used [0x00000000bac00000, 0x00000000bac00000, 0x00000000bad00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bad00000 NTAMS 0x00000000bad00000 space 1024K,   0% used [0x00000000bad00000, 0x00000000bad00000, 0x00000000bae00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bae00000 NTAMS 0x00000000bae00000 space 1024K,   0% used [0x00000000bae00000, 0x00000000bae00000, 0x00000000baf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000baf00000 NTAMS 0x00000000baf00000 space 1024K,   0% used [0x00000000baf00000, 0x00000000baf00000, 0x00000000bb000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb000000 NTAMS 0x00000000bb000000 space 1024K,   0% used [0x00000000bb000000, 0x00000000bb000000, 0x00000000bb100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb100000 NTAMS 0x00000000bb100000 space 1024K,   0% used [0x00000000bb100000, 0x00000000bb100000, 0x00000000bb200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb200000 NTAMS 0x00000000bb200000 space 1024K,   0% used [0x00000000bb200000, 0x00000000bb200000, 0x00000000bb300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb300000 NTAMS 0x00000000bb300000 space 1024K,   0% used [0x00000000bb300000, 0x00000000bb300000, 0x00000000bb400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb400000 NTAMS 0x00000000bb400000 space 1024K,   0% used [0x00000000bb400000, 0x00000000bb400000, 0x00000000bb500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb500000 NTAMS 0x00000000bb500000 space 1024K,   0% used [0x00000000bb500000, 0x00000000bb500000, 0x00000000bb600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb600000 NTAMS 0x00000000bb600000 space 1024K,   0% used [0x00000000bb600000, 0x00000000bb600000, 0x00000000bb700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb700000 NTAMS 0x00000000bb700000 space 1024K,   0% used [0x00000000bb700000, 0x00000000bb700000, 0x00000000bb800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb800000 NTAMS 0x00000000bb800000 space 1024K,   0% used [0x00000000bb800000, 0x00000000bb800000, 0x00000000bb900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bb900000 NTAMS 0x00000000bb900000 space 1024K,   0% used [0x00000000bb900000, 0x00000000bb900000, 0x00000000bba00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bba00000 NTAMS 0x00000000bba00000 space 1024K,   0% used [0x00000000bba00000, 0x00000000bba00000, 0x00000000bbb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bbb00000 NTAMS 0x00000000bbb00000 space 1024K,   0% used [0x00000000bbb00000, 0x00000000bbb00000, 0x00000000bbc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bbc00000 NTAMS 0x00000000bbc00000 space 1024K,   0% used [0x00000000bbc00000, 0x00000000bbc00000, 0x00000000bbd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bbd00000 NTAMS 0x00000000bbd00000 space 1024K,   0% used [0x00000000bbd00000, 0x00000000bbd00000, 0x00000000bbe00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bbe00000 NTAMS 0x00000000bbe00000 space 1024K,   0% used [0x00000000bbe00000, 0x00000000bbe00000, 0x00000000bbf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bbf00000 NTAMS 0x00000000bbf00000 space 1024K,   0% used [0x00000000bbf00000, 0x00000000bbf00000, 0x00000000bc000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc000000 NTAMS 0x00000000bc000000 space 1024K,   0% used [0x00000000bc000000, 0x00000000bc000000, 0x00000000bc100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc100000 NTAMS 0x00000000bc100000 space 1024K,   0% used [0x00000000bc100000, 0x00000000bc100000, 0x00000000bc200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc200000 NTAMS 0x00000000bc200000 space 1024K,   0% used [0x00000000bc200000, 0x00000000bc200000, 0x00000000bc300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc300000 NTAMS 0x00000000bc300000 space 1024K,   0% used [0x00000000bc300000, 0x00000000bc300000, 0x00000000bc400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc400000 NTAMS 0x00000000bc400000 space 1024K,   0% used [0x00000000bc400000, 0x00000000bc400000, 0x00000000bc500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc500000 NTAMS 0x00000000bc500000 space 1024K,   0% used [0x00000000bc500000, 0x00000000bc500000, 0x00000000bc600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc600000 NTAMS 0x00000000bc600000 space 1024K,   0% used [0x00000000bc600000, 0x00000000bc600000, 0x00000000bc700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc700000 NTAMS 0x00000000bc700000 space 1024K,   0% used [0x00000000bc700000, 0x00000000bc700000, 0x00000000bc800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc800000 NTAMS 0x00000000bc800000 space 1024K,   0% used [0x00000000bc800000, 0x00000000bc800000, 0x00000000bc900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bc900000 NTAMS 0x00000000bc900000 space 1024K,   0% used [0x00000000bc900000, 0x00000000bc900000, 0x00000000bca00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bca00000 NTAMS 0x00000000bca00000 space 1024K,   0% used [0x00000000bca00000, 0x00000000bca00000, 0x00000000bcb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bcb00000 NTAMS 0x00000000bcb00000 space 1024K,   0% used [0x00000000bcb00000, 0x00000000bcb00000, 0x00000000bcc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bcc00000 NTAMS 0x00000000bcc00000 space 1024K,   0% used [0x00000000bcc00000, 0x00000000bcc00000, 0x00000000bcd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bcd00000 NTAMS 0x00000000bcd00000 space 1024K,   0% used [0x00000000bcd00000, 0x00000000bcd00000, 0x00000000bce00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bce00000 NTAMS 0x00000000bce00000 space 1024K,   0% used [0x00000000bce00000, 0x00000000bce00000, 0x00000000bcf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bcf00000 NTAMS 0x00000000bcf00000 space 1024K,   0% used [0x00000000bcf00000, 0x00000000bcf00000, 0x00000000bd000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd000000 NTAMS 0x00000000bd000000 space 1024K,   0% used [0x00000000bd000000, 0x00000000bd000000, 0x00000000bd100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd100000 NTAMS 0x00000000bd100000 space 1024K,   0% used [0x00000000bd100000, 0x00000000bd100000, 0x00000000bd200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd200000 NTAMS 0x00000000bd200000 space 1024K,   0% used [0x00000000bd200000, 0x00000000bd200000, 0x00000000bd300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd300000 NTAMS 0x00000000bd300000 space 1024K,   0% used [0x00000000bd300000, 0x00000000bd300000, 0x00000000bd400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd400000 NTAMS 0x00000000bd400000 space 1024K,   0% used [0x00000000bd400000, 0x00000000bd400000, 0x00000000bd500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd500000 NTAMS 0x00000000bd500000 space 1024K,   0% used [0x00000000bd500000, 0x00000000bd500000, 0x00000000bd600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd600000 NTAMS 0x00000000bd600000 space 1024K,   0% used [0x00000000bd600000, 0x00000000bd600000, 0x00000000bd700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd700000 NTAMS 0x00000000bd700000 space 1024K,   0% used [0x00000000bd700000, 0x00000000bd700000, 0x00000000bd800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd800000 NTAMS 0x00000000bd800000 space 1024K,   0% used [0x00000000bd800000, 0x00000000bd800000, 0x00000000bd900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bd900000 NTAMS 0x00000000bd900000 space 1024K,   0% used [0x00000000bd900000, 0x00000000bd900000, 0x00000000bda00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bda00000 NTAMS 0x00000000bda00000 space 1024K,   0% used [0x00000000bda00000, 0x00000000bda00000, 0x00000000bdb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bdb00000 NTAMS 0x00000000bdb00000 space 1024K,   0% used [0x00000000bdb00000, 0x00000000bdb00000, 0x00000000bdc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bdc00000 NTAMS 0x00000000bdc00000 space 1024K,   0% used [0x00000000bdc00000, 0x00000000bdc00000, 0x00000000bdd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bdd00000 NTAMS 0x00000000bdd00000 space 1024K,   0% used [0x00000000bdd00000, 0x00000000bdd00000, 0x00000000bde00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bde00000 NTAMS 0x00000000bde00000 space 1024K,   0% used [0x00000000bde00000, 0x00000000bde00000, 0x00000000bdf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bdf00000 NTAMS 0x00000000bdf00000 space 1024K,   0% used [0x00000000bdf00000, 0x00000000bdf00000, 0x00000000be000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be000000 NTAMS 0x00000000be000000 space 1024K,   0% used [0x00000000be000000, 0x00000000be000000, 0x00000000be100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be100000 NTAMS 0x00000000be100000 space 1024K,   0% used [0x00000000be100000, 0x00000000be100000, 0x00000000be200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be200000 NTAMS 0x00000000be200000 space 1024K,   0% used [0x00000000be200000, 0x00000000be200000, 0x00000000be300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be300000 NTAMS 0x00000000be300000 space 1024K,   0% used [0x00000000be300000, 0x00000000be300000, 0x00000000be400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be400000 NTAMS 0x00000000be400000 space 1024K,   0% used [0x00000000be400000, 0x00000000be400000, 0x00000000be500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be500000 NTAMS 0x00000000be500000 space 1024K,   0% used [0x00000000be500000, 0x00000000be500000, 0x00000000be600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be600000 NTAMS 0x00000000be600000 space 1024K,   0% used [0x00000000be600000, 0x00000000be600000, 0x00000000be700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be700000 NTAMS 0x00000000be700000 space 1024K,   0% used [0x00000000be700000, 0x00000000be700000, 0x00000000be800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be800000 NTAMS 0x00000000be800000 space 1024K,   0% used [0x00000000be800000, 0x00000000be800000, 0x00000000be900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000be900000 NTAMS 0x00000000be900000 space 1024K,   0% used [0x00000000be900000, 0x00000000be900000, 0x00000000bea00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bea00000 NTAMS 0x00000000bea00000 space 1024K,   0% used [0x00000000bea00000, 0x00000000bea00000, 0x00000000beb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000beb00000 NTAMS 0x00000000beb00000 space 1024K,   0% used [0x00000000beb00000, 0x00000000beb00000, 0x00000000bec00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bec00000 NTAMS 0x00000000bec00000 space 1024K,   0% used [0x00000000bec00000, 0x00000000bec00000, 0x00000000bed00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bed00000 NTAMS 0x00000000bed00000 space 1024K,   0% used [0x00000000bed00000, 0x00000000bed00000, 0x00000000bee00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bee00000 NTAMS 0x00000000bee00000 space 1024K,   0% used [0x00000000bee00000, 0x00000000bee00000, 0x00000000bef00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bef00000 NTAMS 0x00000000bef00000 space 1024K,   0% used [0x00000000bef00000, 0x00000000bef00000, 0x00000000bf000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf000000 NTAMS 0x00000000bf000000 space 1024K,   0% used [0x00000000bf000000, 0x00000000bf000000, 0x00000000bf100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf100000 NTAMS 0x00000000bf100000 space 1024K,   0% used [0x00000000bf100000, 0x00000000bf100000, 0x00000000bf200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf200000 NTAMS 0x00000000bf200000 space 1024K,   0% used [0x00000000bf200000, 0x00000000bf200000, 0x00000000bf300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf300000 NTAMS 0x00000000bf300000 space 1024K,   0% used [0x00000000bf300000, 0x00000000bf300000, 0x00000000bf400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf400000 NTAMS 0x00000000bf400000 space 1024K,   0% used [0x00000000bf400000, 0x00000000bf400000, 0x00000000bf500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf500000 NTAMS 0x00000000bf500000 space 1024K,   0% used [0x00000000bf500000, 0x00000000bf500000, 0x00000000bf600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf600000 NTAMS 0x00000000bf600000 space 1024K,   0% used [0x00000000bf600000, 0x00000000bf600000, 0x00000000bf700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf700000 NTAMS 0x00000000bf700000 space 1024K,   0% used [0x00000000bf700000, 0x00000000bf700000, 0x00000000bf800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf800000 NTAMS 0x00000000bf800000 space 1024K,   0% used [0x00000000bf800000, 0x00000000bf800000, 0x00000000bf900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bf900000 NTAMS 0x00000000bf900000 space 1024K,   0% used [0x00000000bf900000, 0x00000000bf900000, 0x00000000bfa00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bfa00000 NTAMS 0x00000000bfa00000 space 1024K,   0% used [0x00000000bfa00000, 0x00000000bfa00000, 0x00000000bfb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bfb00000 NTAMS 0x00000000bfb00000 space 1024K,   0% used [0x00000000bfb00000, 0x00000000bfb00000, 0x00000000bfc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bfc00000 NTAMS 0x00000000bfc00000 space 1024K,   0% used [0x00000000bfc00000, 0x00000000bfc00000, 0x00000000bfd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bfd00000 NTAMS 0x00000000bfd00000 space 1024K,   0% used [0x00000000bfd00000, 0x00000000bfd00000, 0x00000000bfe00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bfe00000 NTAMS 0x00000000bfe00000 space 1024K,   0% used [0x00000000bfe00000, 0x00000000bfe00000, 0x00000000bff00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000bff00000 NTAMS 0x00000000bff00000 space 1024K,   0% used [0x00000000bff00000, 0x00000000bff00000, 0x00000000c0000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0000000 NTAMS 0x00000000c0000000 space 1024K,   0% used [0x00000000c0000000, 0x00000000c0000000, 0x00000000c0100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0100000 NTAMS 0x00000000c0100000 space 1024K,   0% used [0x00000000c0100000, 0x00000000c0100000, 0x00000000c0200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0200000 NTAMS 0x00000000c0200000 space 1024K,   0% used [0x00000000c0200000, 0x00000000c0200000, 0x00000000c0300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0300000 NTAMS 0x00000000c0300000 space 1024K,   0% used [0x00000000c0300000, 0x00000000c0300000, 0x00000000c0400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0400000 NTAMS 0x00000000c0400000 space 1024K,   0% used [0x00000000c0400000, 0x00000000c0400000, 0x00000000c0500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0500000 NTAMS 0x00000000c0500000 space 1024K,   0% used [0x00000000c0500000, 0x00000000c0500000, 0x00000000c0600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0600000 NTAMS 0x00000000c0600000 space 1024K,   0% used [0x00000000c0600000, 0x00000000c0600000, 0x00000000c0700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0700000 NTAMS 0x00000000c0700000 space 1024K,   0% used [0x00000000c0700000, 0x00000000c0700000, 0x00000000c0800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0800000 NTAMS 0x00000000c0800000 space 1024K,   0% used [0x00000000c0800000, 0x00000000c0800000, 0x00000000c0900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0900000 NTAMS 0x00000000c0900000 space 1024K,   0% used [0x00000000c0900000, 0x00000000c0900000, 0x00000000c0a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0a00000 NTAMS 0x00000000c0a00000 space 1024K,   0% used [0x00000000c0a00000, 0x00000000c0a00000, 0x00000000c0b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0b00000 NTAMS 0x00000000c0b00000 space 1024K,   0% used [0x00000000c0b00000, 0x00000000c0b00000, 0x00000000c0c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0c00000 NTAMS 0x00000000c0c00000 space 1024K,   0% used [0x00000000c0c00000, 0x00000000c0c00000, 0x00000000c0d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0d00000 NTAMS 0x00000000c0d00000 space 1024K,   0% used [0x00000000c0d00000, 0x00000000c0d00000, 0x00000000c0e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0e00000 NTAMS 0x00000000c0e00000 space 1024K,   0% used [0x00000000c0e00000, 0x00000000c0e00000, 0x00000000c0f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c0f00000 NTAMS 0x00000000c0f00000 space 1024K,   0% used [0x00000000c0f00000, 0x00000000c0f00000, 0x00000000c1000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1000000 NTAMS 0x00000000c1000000 space 1024K,   0% used [0x00000000c1000000, 0x00000000c1000000, 0x00000000c1100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1100000 NTAMS 0x00000000c1100000 space 1024K,   0% used [0x00000000c1100000, 0x00000000c1100000, 0x00000000c1200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1200000 NTAMS 0x00000000c1200000 space 1024K,   0% used [0x00000000c1200000, 0x00000000c1200000, 0x00000000c1300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1300000 NTAMS 0x00000000c1300000 space 1024K,   0% used [0x00000000c1300000, 0x00000000c1300000, 0x00000000c1400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1400000 NTAMS 0x00000000c1400000 space 1024K,   0% used [0x00000000c1400000, 0x00000000c1400000, 0x00000000c1500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1500000 NTAMS 0x00000000c1500000 space 1024K,   0% used [0x00000000c1500000, 0x00000000c1500000, 0x00000000c1600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1600000 NTAMS 0x00000000c1600000 space 1024K,   0% used [0x00000000c1600000, 0x00000000c1600000, 0x00000000c1700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1700000 NTAMS 0x00000000c1700000 space 1024K,   0% used [0x00000000c1700000, 0x00000000c1700000, 0x00000000c1800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1800000 NTAMS 0x00000000c1800000 space 1024K,   0% used [0x00000000c1800000, 0x00000000c1800000, 0x00000000c1900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1900000 NTAMS 0x00000000c1900000 space 1024K,   0% used [0x00000000c1900000, 0x00000000c1900000, 0x00000000c1a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1a00000 NTAMS 0x00000000c1a00000 space 1024K,   0% used [0x00000000c1a00000, 0x00000000c1a00000, 0x00000000c1b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1b00000 NTAMS 0x00000000c1b00000 space 1024K,   0% used [0x00000000c1b00000, 0x00000000c1b00000, 0x00000000c1c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1c00000 NTAMS 0x00000000c1c00000 space 1024K,   0% used [0x00000000c1c00000, 0x00000000c1c00000, 0x00000000c1d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1d00000 NTAMS 0x00000000c1d00000 space 1024K,   0% used [0x00000000c1d00000, 0x00000000c1d00000, 0x00000000c1e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1e00000 NTAMS 0x00000000c1e00000 space 1024K,   0% used [0x00000000c1e00000, 0x00000000c1e00000, 0x00000000c1f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c1f00000 NTAMS 0x00000000c1f00000 space 1024K,   0% used [0x00000000c1f00000, 0x00000000c1f00000, 0x00000000c2000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2000000 NTAMS 0x00000000c2000000 space 1024K,   0% used [0x00000000c2000000, 0x00000000c2000000, 0x00000000c2100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2100000 NTAMS 0x00000000c2100000 space 1024K,   0% used [0x00000000c2100000, 0x00000000c2100000, 0x00000000c2200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2200000 NTAMS 0x00000000c2200000 space 1024K,   0% used [0x00000000c2200000, 0x00000000c2200000, 0x00000000c2300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2300000 NTAMS 0x00000000c2300000 space 1024K,   0% used [0x00000000c2300000, 0x00000000c2300000, 0x00000000c2400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2400000 NTAMS 0x00000000c2400000 space 1024K,   0% used [0x00000000c2400000, 0x00000000c2400000, 0x00000000c2500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2500000 NTAMS 0x00000000c2500000 space 1024K,   0% used [0x00000000c2500000, 0x00000000c2500000, 0x00000000c2600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2600000 NTAMS 0x00000000c2600000 space 1024K,   0% used [0x00000000c2600000, 0x00000000c2600000, 0x00000000c2700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2700000 NTAMS 0x00000000c2700000 space 1024K,   0% used [0x00000000c2700000, 0x00000000c2700000, 0x00000000c2800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2800000 NTAMS 0x00000000c2800000 space 1024K,   0% used [0x00000000c2800000, 0x00000000c2800000, 0x00000000c2900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2900000 NTAMS 0x00000000c2900000 space 1024K,   0% used [0x00000000c2900000, 0x00000000c2900000, 0x00000000c2a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2a00000 NTAMS 0x00000000c2a00000 space 1024K,   0% used [0x00000000c2a00000, 0x00000000c2a00000, 0x00000000c2b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2b00000 NTAMS 0x00000000c2b00000 space 1024K,   0% used [0x00000000c2b00000, 0x00000000c2b00000, 0x00000000c2c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2c00000 NTAMS 0x00000000c2c00000 space 1024K,   0% used [0x00000000c2c00000, 0x00000000c2c00000, 0x00000000c2d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2d00000 NTAMS 0x00000000c2d00000 space 1024K,   0% used [0x00000000c2d00000, 0x00000000c2d00000, 0x00000000c2e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2e00000 NTAMS 0x00000000c2e00000 space 1024K,   0% used [0x00000000c2e00000, 0x00000000c2e00000, 0x00000000c2f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c2f00000 NTAMS 0x00000000c2f00000 space 1024K,   0% used [0x00000000c2f00000, 0x00000000c2f00000, 0x00000000c3000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3000000 NTAMS 0x00000000c3000000 space 1024K,   0% used [0x00000000c3000000, 0x00000000c3000000, 0x00000000c3100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3100000 NTAMS 0x00000000c3100000 space 1024K,   0% used [0x00000000c3100000, 0x00000000c3100000, 0x00000000c3200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3200000 NTAMS 0x00000000c3200000 space 1024K,   0% used [0x00000000c3200000, 0x00000000c3200000, 0x00000000c3300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3300000 NTAMS 0x00000000c3300000 space 1024K,   0% used [0x00000000c3300000, 0x00000000c3300000, 0x00000000c3400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3400000 NTAMS 0x00000000c3400000 space 1024K,   0% used [0x00000000c3400000, 0x00000000c3400000, 0x00000000c3500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3500000 NTAMS 0x00000000c3500000 space 1024K,   0% used [0x00000000c3500000, 0x00000000c3500000, 0x00000000c3600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3600000 NTAMS 0x00000000c3600000 space 1024K,   0% used [0x00000000c3600000, 0x00000000c3600000, 0x00000000c3700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3700000 NTAMS 0x00000000c3700000 space 1024K,   0% used [0x00000000c3700000, 0x00000000c3700000, 0x00000000c3800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3800000 NTAMS 0x00000000c3800000 space 1024K,   0% used [0x00000000c3800000, 0x00000000c3800000, 0x00000000c3900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3900000 NTAMS 0x00000000c3900000 space 1024K,   0% used [0x00000000c3900000, 0x00000000c3900000, 0x00000000c3a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3a00000 NTAMS 0x00000000c3a00000 space 1024K,   0% used [0x00000000c3a00000, 0x00000000c3a00000, 0x00000000c3b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3b00000 NTAMS 0x00000000c3b00000 space 1024K,   0% used [0x00000000c3b00000, 0x00000000c3b00000, 0x00000000c3c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3c00000 NTAMS 0x00000000c3c00000 space 1024K,   0% used [0x00000000c3c00000, 0x00000000c3c00000, 0x00000000c3d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3d00000 NTAMS 0x00000000c3d00000 space 1024K,   0% used [0x00000000c3d00000, 0x00000000c3d00000, 0x00000000c3e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3e00000 NTAMS 0x00000000c3e00000 space 1024K,   0% used [0x00000000c3e00000, 0x00000000c3e00000, 0x00000000c3f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c3f00000 NTAMS 0x00000000c3f00000 space 1024K,   0% used [0x00000000c3f00000, 0x00000000c3f00000, 0x00000000c4000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4000000 NTAMS 0x00000000c4000000 space 1024K,   0% used [0x00000000c4000000, 0x00000000c4000000, 0x00000000c4100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4100000 NTAMS 0x00000000c4100000 space 1024K,   0% used [0x00000000c4100000, 0x00000000c4100000, 0x00000000c4200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4200000 NTAMS 0x00000000c4200000 space 1024K,   0% used [0x00000000c4200000, 0x00000000c4200000, 0x00000000c4300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4300000 NTAMS 0x00000000c4300000 space 1024K,   0% used [0x00000000c4300000, 0x00000000c4300000, 0x00000000c4400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4400000 NTAMS 0x00000000c4400000 space 1024K,   0% used [0x00000000c4400000, 0x00000000c4400000, 0x00000000c4500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4500000 NTAMS 0x00000000c4500000 space 1024K,   0% used [0x00000000c4500000, 0x00000000c4500000, 0x00000000c4600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4600000 NTAMS 0x00000000c4600000 space 1024K,   0% used [0x00000000c4600000, 0x00000000c4600000, 0x00000000c4700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4700000 NTAMS 0x00000000c4700000 space 1024K,   0% used [0x00000000c4700000, 0x00000000c4700000, 0x00000000c4800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4800000 NTAMS 0x00000000c4800000 space 1024K,   0% used [0x00000000c4800000, 0x00000000c4800000, 0x00000000c4900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4900000 NTAMS 0x00000000c4900000 space 1024K,   0% used [0x00000000c4900000, 0x00000000c4900000, 0x00000000c4a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4a00000 NTAMS 0x00000000c4a00000 space 1024K,   0% used [0x00000000c4a00000, 0x00000000c4a00000, 0x00000000c4b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4b00000 NTAMS 0x00000000c4b00000 space 1024K,   0% used [0x00000000c4b00000, 0x00000000c4b00000, 0x00000000c4c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4c00000 NTAMS 0x00000000c4c00000 space 1024K,   0% used [0x00000000c4c00000, 0x00000000c4c00000, 0x00000000c4d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4d00000 NTAMS 0x00000000c4d00000 space 1024K,   0% used [0x00000000c4d00000, 0x00000000c4d00000, 0x00000000c4e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4e00000 NTAMS 0x00000000c4e00000 space 1024K,   0% used [0x00000000c4e00000, 0x00000000c4e00000, 0x00000000c4f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c4f00000 NTAMS 0x00000000c4f00000 space 1024K,   0% used [0x00000000c4f00000, 0x00000000c4f00000, 0x00000000c5000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5000000 NTAMS 0x00000000c5000000 space 1024K,   0% used [0x00000000c5000000, 0x00000000c5000000, 0x00000000c5100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5100000 NTAMS 0x00000000c5100000 space 1024K,   0% used [0x00000000c5100000, 0x00000000c5100000, 0x00000000c5200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5200000 NTAMS 0x00000000c5200000 space 1024K,   0% used [0x00000000c5200000, 0x00000000c5200000, 0x00000000c5300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5300000 NTAMS 0x00000000c5300000 space 1024K,   0% used [0x00000000c5300000, 0x00000000c5300000, 0x00000000c5400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5400000 NTAMS 0x00000000c5400000 space 1024K,   0% used [0x00000000c5400000, 0x00000000c5400000, 0x00000000c5500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5500000 NTAMS 0x00000000c5500000 space 1024K,   0% used [0x00000000c5500000, 0x00000000c5500000, 0x00000000c5600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5600000 NTAMS 0x00000000c5600000 space 1024K,   0% used [0x00000000c5600000, 0x00000000c5600000, 0x00000000c5700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5700000 NTAMS 0x00000000c5700000 space 1024K,   0% used [0x00000000c5700000, 0x00000000c5700000, 0x00000000c5800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5800000 NTAMS 0x00000000c5800000 space 1024K,   0% used [0x00000000c5800000, 0x00000000c5800000, 0x00000000c5900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5900000 NTAMS 0x00000000c5900000 space 1024K,   0% used [0x00000000c5900000, 0x00000000c5900000, 0x00000000c5a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5a00000 NTAMS 0x00000000c5a00000 space 1024K,   0% used [0x00000000c5a00000, 0x00000000c5a00000, 0x00000000c5b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5b00000 NTAMS 0x00000000c5b00000 space 1024K,   0% used [0x00000000c5b00000, 0x00000000c5b00000, 0x00000000c5c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5c00000 NTAMS 0x00000000c5c00000 space 1024K,   0% used [0x00000000c5c00000, 0x00000000c5c00000, 0x00000000c5d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5d00000 NTAMS 0x00000000c5d00000 space 1024K,   0% used [0x00000000c5d00000, 0x00000000c5d00000, 0x00000000c5e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5e00000 NTAMS 0x00000000c5e00000 space 1024K,   0% used [0x00000000c5e00000, 0x00000000c5e00000, 0x00000000c5f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c5f00000 NTAMS 0x00000000c5f00000 space 1024K,   0% used [0x00000000c5f00000, 0x00000000c5f00000, 0x00000000c6000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6000000 NTAMS 0x00000000c6000000 space 1024K,   0% used [0x00000000c6000000, 0x00000000c6000000, 0x00000000c6100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6100000 NTAMS 0x00000000c6100000 space 1024K,   0% used [0x00000000c6100000, 0x00000000c6100000, 0x00000000c6200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6200000 NTAMS 0x00000000c6200000 space 1024K,   0% used [0x00000000c6200000, 0x00000000c6200000, 0x00000000c6300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6300000 NTAMS 0x00000000c6300000 space 1024K,   0% used [0x00000000c6300000, 0x00000000c6300000, 0x00000000c6400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6400000 NTAMS 0x00000000c6400000 space 1024K,   0% used [0x00000000c6400000, 0x00000000c6400000, 0x00000000c6500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6500000 NTAMS 0x00000000c6500000 space 1024K,   0% used [0x00000000c6500000, 0x00000000c6500000, 0x00000000c6600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6600000 NTAMS 0x00000000c6600000 space 1024K,   0% used [0x00000000c6600000, 0x00000000c6600000, 0x00000000c6700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6700000 NTAMS 0x00000000c6700000 space 1024K,   0% used [0x00000000c6700000, 0x00000000c6700000, 0x00000000c6800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6800000 NTAMS 0x00000000c6800000 space 1024K,   0% used [0x00000000c6800000, 0x00000000c6800000, 0x00000000c6900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6900000 NTAMS 0x00000000c6900000 space 1024K,   0% used [0x00000000c6900000, 0x00000000c6900000, 0x00000000c6a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6a00000 NTAMS 0x00000000c6a00000 space 1024K,   0% used [0x00000000c6a00000, 0x00000000c6a00000, 0x00000000c6b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6b00000 NTAMS 0x00000000c6b00000 space 1024K,   0% used [0x00000000c6b00000, 0x00000000c6b00000, 0x00000000c6c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6c00000 NTAMS 0x00000000c6c00000 space 1024K,   0% used [0x00000000c6c00000, 0x00000000c6c00000, 0x00000000c6d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6d00000 NTAMS 0x00000000c6d00000 space 1024K,   0% used [0x00000000c6d00000, 0x00000000c6d00000, 0x00000000c6e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6e00000 NTAMS 0x00000000c6e00000 space 1024K,   0% used [0x00000000c6e00000, 0x00000000c6e00000, 0x00000000c6f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c6f00000 NTAMS 0x00000000c6f00000 space 1024K,   0% used [0x00000000c6f00000, 0x00000000c6f00000, 0x00000000c7000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7000000 NTAMS 0x00000000c7000000 space 1024K,   0% used [0x00000000c7000000, 0x00000000c7000000, 0x00000000c7100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7100000 NTAMS 0x00000000c7100000 space 1024K,   0% used [0x00000000c7100000, 0x00000000c7100000, 0x00000000c7200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7200000 NTAMS 0x00000000c7200000 space 1024K,   0% used [0x00000000c7200000, 0x00000000c7200000, 0x00000000c7300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7300000 NTAMS 0x00000000c7300000 space 1024K,   0% used [0x00000000c7300000, 0x00000000c7300000, 0x00000000c7400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7400000 NTAMS 0x00000000c7400000 space 1024K,   0% used [0x00000000c7400000, 0x00000000c7400000, 0x00000000c7500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7500000 NTAMS 0x00000000c7500000 space 1024K,   0% used [0x00000000c7500000, 0x00000000c7500000, 0x00000000c7600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7600000 NTAMS 0x00000000c7600000 space 1024K,   0% used [0x00000000c7600000, 0x00000000c7600000, 0x00000000c7700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7700000 NTAMS 0x00000000c7700000 space 1024K,   0% used [0x00000000c7700000, 0x00000000c7700000, 0x00000000c7800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7800000 NTAMS 0x00000000c7800000 space 1024K,   0% used [0x00000000c7800000, 0x00000000c7800000, 0x00000000c7900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7900000 NTAMS 0x00000000c7900000 space 1024K,   0% used [0x00000000c7900000, 0x00000000c7900000, 0x00000000c7a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7a00000 NTAMS 0x00000000c7a00000 space 1024K,   0% used [0x00000000c7a00000, 0x00000000c7a00000, 0x00000000c7b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7b00000 NTAMS 0x00000000c7b00000 space 1024K,   0% used [0x00000000c7b00000, 0x00000000c7b00000, 0x00000000c7c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7c00000 NTAMS 0x00000000c7c00000 space 1024K,   0% used [0x00000000c7c00000, 0x00000000c7c00000, 0x00000000c7d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7d00000 NTAMS 0x00000000c7d00000 space 1024K,   0% used [0x00000000c7d00000, 0x00000000c7d00000, 0x00000000c7e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7e00000 NTAMS 0x00000000c7e00000 space 1024K,   0% used [0x00000000c7e00000, 0x00000000c7e00000, 0x00000000c7f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c7f00000 NTAMS 0x00000000c7f00000 space 1024K,   0% used [0x00000000c7f00000, 0x00000000c7f00000, 0x00000000c8000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8000000 NTAMS 0x00000000c8000000 space 1024K,   0% used [0x00000000c8000000, 0x00000000c8000000, 0x00000000c8100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8100000 NTAMS 0x00000000c8100000 space 1024K,   0% used [0x00000000c8100000, 0x00000000c8100000, 0x00000000c8200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8200000 NTAMS 0x00000000c8200000 space 1024K,   0% used [0x00000000c8200000, 0x00000000c8200000, 0x00000000c8300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8300000 NTAMS 0x00000000c8300000 space 1024K,   0% used [0x00000000c8300000, 0x00000000c8300000, 0x00000000c8400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8400000 NTAMS 0x00000000c8400000 space 1024K,   0% used [0x00000000c8400000, 0x00000000c8400000, 0x00000000c8500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8500000 NTAMS 0x00000000c8500000 space 1024K,   0% used [0x00000000c8500000, 0x00000000c8500000, 0x00000000c8600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8600000 NTAMS 0x00000000c8600000 space 1024K,   0% used [0x00000000c8600000, 0x00000000c8600000, 0x00000000c8700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8700000 NTAMS 0x00000000c8700000 space 1024K,   0% used [0x00000000c8700000, 0x00000000c8700000, 0x00000000c8800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8800000 NTAMS 0x00000000c8800000 space 1024K,   0% used [0x00000000c8800000, 0x00000000c8800000, 0x00000000c8900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8900000 NTAMS 0x00000000c8900000 space 1024K,   0% used [0x00000000c8900000, 0x00000000c8900000, 0x00000000c8a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8a00000 NTAMS 0x00000000c8a00000 space 1024K,   0% used [0x00000000c8a00000, 0x00000000c8a00000, 0x00000000c8b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8b00000 NTAMS 0x00000000c8b00000 space 1024K,   0% used [0x00000000c8b00000, 0x00000000c8b00000, 0x00000000c8c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8c00000 NTAMS 0x00000000c8c00000 space 1024K,   0% used [0x00000000c8c00000, 0x00000000c8c00000, 0x00000000c8d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8d00000 NTAMS 0x00000000c8d00000 space 1024K,   0% used [0x00000000c8d00000, 0x00000000c8d00000, 0x00000000c8e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8e00000 NTAMS 0x00000000c8e00000 space 1024K,   0% used [0x00000000c8e00000, 0x00000000c8e00000, 0x00000000c8f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c8f00000 NTAMS 0x00000000c8f00000 space 1024K,   0% used [0x00000000c8f00000, 0x00000000c8f00000, 0x00000000c9000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9000000 NTAMS 0x00000000c9000000 space 1024K,   0% used [0x00000000c9000000, 0x00000000c9000000, 0x00000000c9100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9100000 NTAMS 0x00000000c9100000 space 1024K,   0% used [0x00000000c9100000, 0x00000000c9100000, 0x00000000c9200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9200000 NTAMS 0x00000000c9200000 space 1024K,   0% used [0x00000000c9200000, 0x00000000c9200000, 0x00000000c9300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9300000 NTAMS 0x00000000c9300000 space 1024K,   0% used [0x00000000c9300000, 0x00000000c9300000, 0x00000000c9400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9400000 NTAMS 0x00000000c9400000 space 1024K,   0% used [0x00000000c9400000, 0x00000000c9400000, 0x00000000c9500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9500000 NTAMS 0x00000000c9500000 space 1024K,   0% used [0x00000000c9500000, 0x00000000c9500000, 0x00000000c9600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9600000 NTAMS 0x00000000c9600000 space 1024K,   0% used [0x00000000c9600000, 0x00000000c9600000, 0x00000000c9700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9700000 NTAMS 0x00000000c9700000 space 1024K,   0% used [0x00000000c9700000, 0x00000000c9700000, 0x00000000c9800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9800000 NTAMS 0x00000000c9800000 space 1024K,   0% used [0x00000000c9800000, 0x00000000c9800000, 0x00000000c9900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9900000 NTAMS 0x00000000c9900000 space 1024K,   0% used [0x00000000c9900000, 0x00000000c9900000, 0x00000000c9a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9a00000 NTAMS 0x00000000c9a00000 space 1024K,   0% used [0x00000000c9a00000, 0x00000000c9a00000, 0x00000000c9b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9b00000 NTAMS 0x00000000c9b00000 space 1024K,   0% used [0x00000000c9b00000, 0x00000000c9b00000, 0x00000000c9c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9c00000 NTAMS 0x00000000c9c00000 space 1024K,   0% used [0x00000000c9c00000, 0x00000000c9c00000, 0x00000000c9d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9d00000 NTAMS 0x00000000c9d00000 space 1024K,   0% used [0x00000000c9d00000, 0x00000000c9d00000, 0x00000000c9e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9e00000 NTAMS 0x00000000c9e00000 space 1024K,   0% used [0x00000000c9e00000, 0x00000000c9e00000, 0x00000000c9f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000c9f00000 NTAMS 0x00000000c9f00000 space 1024K,   0% used [0x00000000c9f00000, 0x00000000c9f00000, 0x00000000ca000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca000000 NTAMS 0x00000000ca000000 space 1024K,   0% used [0x00000000ca000000, 0x00000000ca000000, 0x00000000ca100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca100000 NTAMS 0x00000000ca100000 space 1024K,   0% used [0x00000000ca100000, 0x00000000ca100000, 0x00000000ca200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca200000 NTAMS 0x00000000ca200000 space 1024K,   0% used [0x00000000ca200000, 0x00000000ca200000, 0x00000000ca300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca300000 NTAMS 0x00000000ca300000 space 1024K,   0% used [0x00000000ca300000, 0x00000000ca300000, 0x00000000ca400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca400000 NTAMS 0x00000000ca400000 space 1024K,   0% used [0x00000000ca400000, 0x00000000ca400000, 0x00000000ca500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca500000 NTAMS 0x00000000ca500000 space 1024K,   0% used [0x00000000ca500000, 0x00000000ca500000, 0x00000000ca600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca600000 NTAMS 0x00000000ca600000 space 1024K,   0% used [0x00000000ca600000, 0x00000000ca600000, 0x00000000ca700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca700000 NTAMS 0x00000000ca700000 space 1024K,   0% used [0x00000000ca700000, 0x00000000ca700000, 0x00000000ca800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca800000 NTAMS 0x00000000ca800000 space 1024K,   0% used [0x00000000ca800000, 0x00000000ca800000, 0x00000000ca900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ca900000 NTAMS 0x00000000ca900000 space 1024K,   0% used [0x00000000ca900000, 0x00000000ca900000, 0x00000000caa00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000caa00000 NTAMS 0x00000000caa00000 space 1024K,   0% used [0x00000000caa00000, 0x00000000caa00000, 0x00000000cab00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cab00000 NTAMS 0x00000000cab00000 space 1024K,   0% used [0x00000000cab00000, 0x00000000cab00000, 0x00000000cac00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cac00000 NTAMS 0x00000000cac00000 space 1024K,   0% used [0x00000000cac00000, 0x00000000cac00000, 0x00000000cad00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cad00000 NTAMS 0x00000000cad00000 space 1024K,   0% used [0x00000000cad00000, 0x00000000cad00000, 0x00000000cae00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cae00000 NTAMS 0x00000000cae00000 space 1024K,   0% used [0x00000000cae00000, 0x00000000cae00000, 0x00000000caf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000caf00000 NTAMS 0x00000000caf00000 space 1024K,   0% used [0x00000000caf00000, 0x00000000caf00000, 0x00000000cb000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb000000 NTAMS 0x00000000cb000000 space 1024K,   0% used [0x00000000cb000000, 0x00000000cb000000, 0x00000000cb100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb100000 NTAMS 0x00000000cb100000 space 1024K,   0% used [0x00000000cb100000, 0x00000000cb100000, 0x00000000cb200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb200000 NTAMS 0x00000000cb200000 space 1024K,   0% used [0x00000000cb200000, 0x00000000cb200000, 0x00000000cb300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb300000 NTAMS 0x00000000cb300000 space 1024K,   0% used [0x00000000cb300000, 0x00000000cb300000, 0x00000000cb400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb400000 NTAMS 0x00000000cb400000 space 1024K,   0% used [0x00000000cb400000, 0x00000000cb400000, 0x00000000cb500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb500000 NTAMS 0x00000000cb500000 space 1024K,   0% used [0x00000000cb500000, 0x00000000cb500000, 0x00000000cb600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb600000 NTAMS 0x00000000cb600000 space 1024K,   0% used [0x00000000cb600000, 0x00000000cb600000, 0x00000000cb700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb700000 NTAMS 0x00000000cb700000 space 1024K,   0% used [0x00000000cb700000, 0x00000000cb700000, 0x00000000cb800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb800000 NTAMS 0x00000000cb800000 space 1024K,   0% used [0x00000000cb800000, 0x00000000cb800000, 0x00000000cb900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cb900000 NTAMS 0x00000000cb900000 space 1024K,   0% used [0x00000000cb900000, 0x00000000cb900000, 0x00000000cba00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cba00000 NTAMS 0x00000000cba00000 space 1024K,   0% used [0x00000000cba00000, 0x00000000cba00000, 0x00000000cbb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cbb00000 NTAMS 0x00000000cbb00000 space 1024K,   0% used [0x00000000cbb00000, 0x00000000cbb00000, 0x00000000cbc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cbc00000 NTAMS 0x00000000cbc00000 space 1024K,   0% used [0x00000000cbc00000, 0x00000000cbc00000, 0x00000000cbd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cbd00000 NTAMS 0x00000000cbd00000 space 1024K,   0% used [0x00000000cbd00000, 0x00000000cbd00000, 0x00000000cbe00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cbe00000 NTAMS 0x00000000cbe00000 space 1024K,   0% used [0x00000000cbe00000, 0x00000000cbe00000, 0x00000000cbf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cbf00000 NTAMS 0x00000000cbf00000 space 1024K,   0% used [0x00000000cbf00000, 0x00000000cbf00000, 0x00000000cc000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc000000 NTAMS 0x00000000cc000000 space 1024K,   0% used [0x00000000cc000000, 0x00000000cc000000, 0x00000000cc100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc100000 NTAMS 0x00000000cc100000 space 1024K,   0% used [0x00000000cc100000, 0x00000000cc100000, 0x00000000cc200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc200000 NTAMS 0x00000000cc200000 space 1024K,   0% used [0x00000000cc200000, 0x00000000cc200000, 0x00000000cc300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc300000 NTAMS 0x00000000cc300000 space 1024K,   0% used [0x00000000cc300000, 0x00000000cc300000, 0x00000000cc400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc400000 NTAMS 0x00000000cc400000 space 1024K,   0% used [0x00000000cc400000, 0x00000000cc400000, 0x00000000cc500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc500000 NTAMS 0x00000000cc500000 space 1024K,   0% used [0x00000000cc500000, 0x00000000cc500000, 0x00000000cc600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc600000 NTAMS 0x00000000cc600000 space 1024K,   0% used [0x00000000cc600000, 0x00000000cc600000, 0x00000000cc700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc700000 NTAMS 0x00000000cc700000 space 1024K,   0% used [0x00000000cc700000, 0x00000000cc700000, 0x00000000cc800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc800000 NTAMS 0x00000000cc800000 space 1024K,   0% used [0x00000000cc800000, 0x00000000cc800000, 0x00000000cc900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cc900000 NTAMS 0x00000000cc900000 space 1024K,   0% used [0x00000000cc900000, 0x00000000cc900000, 0x00000000cca00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cca00000 NTAMS 0x00000000cca00000 space 1024K,   0% used [0x00000000cca00000, 0x00000000cca00000, 0x00000000ccb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ccb00000 NTAMS 0x00000000ccb00000 space 1024K,   0% used [0x00000000ccb00000, 0x00000000ccb00000, 0x00000000ccc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ccc00000 NTAMS 0x00000000ccc00000 space 1024K,   0% used [0x00000000ccc00000, 0x00000000ccc00000, 0x00000000ccd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ccd00000 NTAMS 0x00000000ccd00000 space 1024K,   0% used [0x00000000ccd00000, 0x00000000ccd00000, 0x00000000cce00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cce00000 NTAMS 0x00000000cce00000 space 1024K,   0% used [0x00000000cce00000, 0x00000000cce00000, 0x00000000ccf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ccf00000 NTAMS 0x00000000ccf00000 space 1024K,   0% used [0x00000000ccf00000, 0x00000000ccf00000, 0x00000000cd000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd000000 NTAMS 0x00000000cd000000 space 1024K,   0% used [0x00000000cd000000, 0x00000000cd000000, 0x00000000cd100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd100000 NTAMS 0x00000000cd100000 space 1024K,   0% used [0x00000000cd100000, 0x00000000cd100000, 0x00000000cd200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd200000 NTAMS 0x00000000cd200000 space 1024K,   0% used [0x00000000cd200000, 0x00000000cd200000, 0x00000000cd300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd300000 NTAMS 0x00000000cd300000 space 1024K,   0% used [0x00000000cd300000, 0x00000000cd300000, 0x00000000cd400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd400000 NTAMS 0x00000000cd400000 space 1024K,   0% used [0x00000000cd400000, 0x00000000cd400000, 0x00000000cd500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd500000 NTAMS 0x00000000cd500000 space 1024K,   0% used [0x00000000cd500000, 0x00000000cd500000, 0x00000000cd600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd600000 NTAMS 0x00000000cd600000 space 1024K,   0% used [0x00000000cd600000, 0x00000000cd600000, 0x00000000cd700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd700000 NTAMS 0x00000000cd700000 space 1024K,   0% used [0x00000000cd700000, 0x00000000cd700000, 0x00000000cd800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd800000 NTAMS 0x00000000cd800000 space 1024K,   0% used [0x00000000cd800000, 0x00000000cd800000, 0x00000000cd900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cd900000 NTAMS 0x00000000cd900000 space 1024K,   0% used [0x00000000cd900000, 0x00000000cd900000, 0x00000000cda00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cda00000 NTAMS 0x00000000cda00000 space 1024K,   0% used [0x00000000cda00000, 0x00000000cda00000, 0x00000000cdb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cdb00000 NTAMS 0x00000000cdb00000 space 1024K,   0% used [0x00000000cdb00000, 0x00000000cdb00000, 0x00000000cdc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cdc00000 NTAMS 0x00000000cdc00000 space 1024K,   0% used [0x00000000cdc00000, 0x00000000cdc00000, 0x00000000cdd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cdd00000 NTAMS 0x00000000cdd00000 space 1024K,   0% used [0x00000000cdd00000, 0x00000000cdd00000, 0x00000000cde00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cde00000 NTAMS 0x00000000cde00000 space 1024K,   0% used [0x00000000cde00000, 0x00000000cde00000, 0x00000000cdf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cdf00000 NTAMS 0x00000000cdf00000 space 1024K,   0% used [0x00000000cdf00000, 0x00000000cdf00000, 0x00000000ce000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce000000 NTAMS 0x00000000ce000000 space 1024K,   0% used [0x00000000ce000000, 0x00000000ce000000, 0x00000000ce100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce100000 NTAMS 0x00000000ce100000 space 1024K,   0% used [0x00000000ce100000, 0x00000000ce100000, 0x00000000ce200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce200000 NTAMS 0x00000000ce200000 space 1024K,   0% used [0x00000000ce200000, 0x00000000ce200000, 0x00000000ce300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce300000 NTAMS 0x00000000ce300000 space 1024K,   0% used [0x00000000ce300000, 0x00000000ce300000, 0x00000000ce400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce400000 NTAMS 0x00000000ce400000 space 1024K,   0% used [0x00000000ce400000, 0x00000000ce400000, 0x00000000ce500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce500000 NTAMS 0x00000000ce500000 space 1024K,   0% used [0x00000000ce500000, 0x00000000ce500000, 0x00000000ce600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce600000 NTAMS 0x00000000ce600000 space 1024K,   0% used [0x00000000ce600000, 0x00000000ce600000, 0x00000000ce700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce700000 NTAMS 0x00000000ce700000 space 1024K,   0% used [0x00000000ce700000, 0x00000000ce700000, 0x00000000ce800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce800000 NTAMS 0x00000000ce800000 space 1024K,   0% used [0x00000000ce800000, 0x00000000ce800000, 0x00000000ce900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ce900000 NTAMS 0x00000000ce900000 space 1024K,   0% used [0x00000000ce900000, 0x00000000ce900000, 0x00000000cea00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cea00000 NTAMS 0x00000000cea00000 space 1024K,   0% used [0x00000000cea00000, 0x00000000cea00000, 0x00000000ceb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ceb00000 NTAMS 0x00000000ceb00000 space 1024K,   0% used [0x00000000ceb00000, 0x00000000ceb00000, 0x00000000cec00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cec00000 NTAMS 0x00000000cec00000 space 1024K,   0% used [0x00000000cec00000, 0x00000000cec00000, 0x00000000ced00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ced00000 NTAMS 0x00000000ced00000 space 1024K,   0% used [0x00000000ced00000, 0x00000000ced00000, 0x00000000cee00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cee00000 NTAMS 0x00000000cee00000 space 1024K,   0% used [0x00000000cee00000, 0x00000000cee00000, 0x00000000cef00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cef00000 NTAMS 0x00000000cef00000 space 1024K,   0% used [0x00000000cef00000, 0x00000000cef00000, 0x00000000cf000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf000000 NTAMS 0x00000000cf000000 space 1024K,   0% used [0x00000000cf000000, 0x00000000cf000000, 0x00000000cf100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf100000 NTAMS 0x00000000cf100000 space 1024K,   0% used [0x00000000cf100000, 0x00000000cf100000, 0x00000000cf200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf200000 NTAMS 0x00000000cf200000 space 1024K,   0% used [0x00000000cf200000, 0x00000000cf200000, 0x00000000cf300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf300000 NTAMS 0x00000000cf300000 space 1024K,   0% used [0x00000000cf300000, 0x00000000cf300000, 0x00000000cf400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf400000 NTAMS 0x00000000cf400000 space 1024K,   0% used [0x00000000cf400000, 0x00000000cf400000, 0x00000000cf500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf500000 NTAMS 0x00000000cf500000 space 1024K,   0% used [0x00000000cf500000, 0x00000000cf500000, 0x00000000cf600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf600000 NTAMS 0x00000000cf600000 space 1024K,   0% used [0x00000000cf600000, 0x00000000cf600000, 0x00000000cf700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf700000 NTAMS 0x00000000cf700000 space 1024K,   0% used [0x00000000cf700000, 0x00000000cf700000, 0x00000000cf800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf800000 NTAMS 0x00000000cf800000 space 1024K,   0% used [0x00000000cf800000, 0x00000000cf800000, 0x00000000cf900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cf900000 NTAMS 0x00000000cf900000 space 1024K,   0% used [0x00000000cf900000, 0x00000000cf900000, 0x00000000cfa00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cfa00000 NTAMS 0x00000000cfa00000 space 1024K,   0% used [0x00000000cfa00000, 0x00000000cfa00000, 0x00000000cfb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cfb00000 NTAMS 0x00000000cfb00000 space 1024K,   0% used [0x00000000cfb00000, 0x00000000cfb00000, 0x00000000cfc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cfc00000 NTAMS 0x00000000cfc00000 space 1024K,   0% used [0x00000000cfc00000, 0x00000000cfc00000, 0x00000000cfd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cfd00000 NTAMS 0x00000000cfd00000 space 1024K,   0% used [0x00000000cfd00000, 0x00000000cfd00000, 0x00000000cfe00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cfe00000 NTAMS 0x00000000cfe00000 space 1024K,   0% used [0x00000000cfe00000, 0x00000000cfe00000, 0x00000000cff00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000cff00000 NTAMS 0x00000000cff00000 space 1024K,   0% used [0x00000000cff00000, 0x00000000cff00000, 0x00000000d0000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0000000 NTAMS 0x00000000d0000000 space 1024K,   0% used [0x00000000d0000000, 0x00000000d0000000, 0x00000000d0100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0100000 NTAMS 0x00000000d0100000 space 1024K,   0% used [0x00000000d0100000, 0x00000000d0100000, 0x00000000d0200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0200000 NTAMS 0x00000000d0200000 space 1024K,   0% used [0x00000000d0200000, 0x00000000d0200000, 0x00000000d0300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0300000 NTAMS 0x00000000d0300000 space 1024K,   0% used [0x00000000d0300000, 0x00000000d0300000, 0x00000000d0400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0400000 NTAMS 0x00000000d0400000 space 1024K,   0% used [0x00000000d0400000, 0x00000000d0400000, 0x00000000d0500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0500000 NTAMS 0x00000000d0500000 space 1024K,   0% used [0x00000000d0500000, 0x00000000d0500000, 0x00000000d0600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0600000 NTAMS 0x00000000d0600000 space 1024K,   0% used [0x00000000d0600000, 0x00000000d0600000, 0x00000000d0700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0700000 NTAMS 0x00000000d0700000 space 1024K,   0% used [0x00000000d0700000, 0x00000000d0700000, 0x00000000d0800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0800000 NTAMS 0x00000000d0800000 space 1024K,   0% used [0x00000000d0800000, 0x00000000d0800000, 0x00000000d0900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0900000 NTAMS 0x00000000d0900000 space 1024K,   0% used [0x00000000d0900000, 0x00000000d0900000, 0x00000000d0a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0a00000 NTAMS 0x00000000d0a00000 space 1024K,   0% used [0x00000000d0a00000, 0x00000000d0a00000, 0x00000000d0b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0b00000 NTAMS 0x00000000d0b00000 space 1024K,   0% used [0x00000000d0b00000, 0x00000000d0b00000, 0x00000000d0c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0c00000 NTAMS 0x00000000d0c00000 space 1024K,   0% used [0x00000000d0c00000, 0x00000000d0c00000, 0x00000000d0d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0d00000 NTAMS 0x00000000d0d00000 space 1024K,   0% used [0x00000000d0d00000, 0x00000000d0d00000, 0x00000000d0e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0e00000 NTAMS 0x00000000d0e00000 space 1024K,   0% used [0x00000000d0e00000, 0x00000000d0e00000, 0x00000000d0f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d0f00000 NTAMS 0x00000000d0f00000 space 1024K,   0% used [0x00000000d0f00000, 0x00000000d0f00000, 0x00000000d1000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1000000 NTAMS 0x00000000d1000000 space 1024K,   0% used [0x00000000d1000000, 0x00000000d1000000, 0x00000000d1100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1100000 NTAMS 0x00000000d1100000 space 1024K,   0% used [0x00000000d1100000, 0x00000000d1100000, 0x00000000d1200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1200000 NTAMS 0x00000000d1200000 space 1024K,   0% used [0x00000000d1200000, 0x00000000d1200000, 0x00000000d1300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1300000 NTAMS 0x00000000d1300000 space 1024K,   0% used [0x00000000d1300000, 0x00000000d1300000, 0x00000000d1400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1400000 NTAMS 0x00000000d1400000 space 1024K,   0% used [0x00000000d1400000, 0x00000000d1400000, 0x00000000d1500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1500000 NTAMS 0x00000000d1500000 space 1024K,   0% used [0x00000000d1500000, 0x00000000d1500000, 0x00000000d1600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1600000 NTAMS 0x00000000d1600000 space 1024K,   0% used [0x00000000d1600000, 0x00000000d1600000, 0x00000000d1700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1700000 NTAMS 0x00000000d1700000 space 1024K,   0% used [0x00000000d1700000, 0x00000000d1700000, 0x00000000d1800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1800000 NTAMS 0x00000000d1800000 space 1024K,   0% used [0x00000000d1800000, 0x00000000d1800000, 0x00000000d1900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1900000 NTAMS 0x00000000d1900000 space 1024K,   0% used [0x00000000d1900000, 0x00000000d1900000, 0x00000000d1a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1a00000 NTAMS 0x00000000d1a00000 space 1024K,   0% used [0x00000000d1a00000, 0x00000000d1a00000, 0x00000000d1b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1b00000 NTAMS 0x00000000d1b00000 space 1024K,   0% used [0x00000000d1b00000, 0x00000000d1b00000, 0x00000000d1c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1c00000 NTAMS 0x00000000d1c00000 space 1024K,   0% used [0x00000000d1c00000, 0x00000000d1c00000, 0x00000000d1d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1d00000 NTAMS 0x00000000d1d00000 space 1024K,   0% used [0x00000000d1d00000, 0x00000000d1d00000, 0x00000000d1e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1e00000 NTAMS 0x00000000d1e00000 space 1024K,   0% used [0x00000000d1e00000, 0x00000000d1e00000, 0x00000000d1f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d1f00000 NTAMS 0x00000000d1f00000 space 1024K,   0% used [0x00000000d1f00000, 0x00000000d1f00000, 0x00000000d2000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2000000 NTAMS 0x00000000d2000000 space 1024K,   0% used [0x00000000d2000000, 0x00000000d2000000, 0x00000000d2100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2100000 NTAMS 0x00000000d2100000 space 1024K,   0% used [0x00000000d2100000, 0x00000000d2100000, 0x00000000d2200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2200000 NTAMS 0x00000000d2200000 space 1024K,   0% used [0x00000000d2200000, 0x00000000d2200000, 0x00000000d2300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2300000 NTAMS 0x00000000d2300000 space 1024K,   0% used [0x00000000d2300000, 0x00000000d2300000, 0x00000000d2400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2400000 NTAMS 0x00000000d2400000 space 1024K,   0% used [0x00000000d2400000, 0x00000000d2400000, 0x00000000d2500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2500000 NTAMS 0x00000000d2500000 space 1024K,   0% used [0x00000000d2500000, 0x00000000d2500000, 0x00000000d2600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2600000 NTAMS 0x00000000d2600000 space 1024K,   0% used [0x00000000d2600000, 0x00000000d2600000, 0x00000000d2700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2700000 NTAMS 0x00000000d2700000 space 1024K,   0% used [0x00000000d2700000, 0x00000000d2700000, 0x00000000d2800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2800000 NTAMS 0x00000000d2800000 space 1024K,   0% used [0x00000000d2800000, 0x00000000d2800000, 0x00000000d2900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2900000 NTAMS 0x00000000d2900000 space 1024K,   0% used [0x00000000d2900000, 0x00000000d2900000, 0x00000000d2a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2a00000 NTAMS 0x00000000d2a00000 space 1024K,   0% used [0x00000000d2a00000, 0x00000000d2a00000, 0x00000000d2b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2b00000 NTAMS 0x00000000d2b00000 space 1024K,   0% used [0x00000000d2b00000, 0x00000000d2b00000, 0x00000000d2c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2c00000 NTAMS 0x00000000d2c00000 space 1024K,   0% used [0x00000000d2c00000, 0x00000000d2c00000, 0x00000000d2d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2d00000 NTAMS 0x00000000d2d00000 space 1024K,   0% used [0x00000000d2d00000, 0x00000000d2d00000, 0x00000000d2e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2e00000 NTAMS 0x00000000d2e00000 space 1024K,   0% used [0x00000000d2e00000, 0x00000000d2e00000, 0x00000000d2f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d2f00000 NTAMS 0x00000000d2f00000 space 1024K,   0% used [0x00000000d2f00000, 0x00000000d2f00000, 0x00000000d3000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3000000 NTAMS 0x00000000d3000000 space 1024K,   0% used [0x00000000d3000000, 0x00000000d3000000, 0x00000000d3100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3100000 NTAMS 0x00000000d3100000 space 1024K,   0% used [0x00000000d3100000, 0x00000000d3100000, 0x00000000d3200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3200000 NTAMS 0x00000000d3200000 space 1024K,   0% used [0x00000000d3200000, 0x00000000d3200000, 0x00000000d3300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3300000 NTAMS 0x00000000d3300000 space 1024K,   0% used [0x00000000d3300000, 0x00000000d3300000, 0x00000000d3400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3400000 NTAMS 0x00000000d3400000 space 1024K,   0% used [0x00000000d3400000, 0x00000000d3400000, 0x00000000d3500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3500000 NTAMS 0x00000000d3500000 space 1024K,   0% used [0x00000000d3500000, 0x00000000d3500000, 0x00000000d3600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3600000 NTAMS 0x00000000d3600000 space 1024K,   0% used [0x00000000d3600000, 0x00000000d3600000, 0x00000000d3700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3700000 NTAMS 0x00000000d3700000 space 1024K,   0% used [0x00000000d3700000, 0x00000000d3700000, 0x00000000d3800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3800000 NTAMS 0x00000000d3800000 space 1024K,   0% used [0x00000000d3800000, 0x00000000d3800000, 0x00000000d3900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3900000 NTAMS 0x00000000d3900000 space 1024K,   0% used [0x00000000d3900000, 0x00000000d3900000, 0x00000000d3a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3a00000 NTAMS 0x00000000d3a00000 space 1024K,   0% used [0x00000000d3a00000, 0x00000000d3a00000, 0x00000000d3b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3b00000 NTAMS 0x00000000d3b00000 space 1024K,   0% used [0x00000000d3b00000, 0x00000000d3b00000, 0x00000000d3c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3c00000 NTAMS 0x00000000d3c00000 space 1024K,   0% used [0x00000000d3c00000, 0x00000000d3c00000, 0x00000000d3d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3d00000 NTAMS 0x00000000d3d00000 space 1024K,   0% used [0x00000000d3d00000, 0x00000000d3d00000, 0x00000000d3e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3e00000 NTAMS 0x00000000d3e00000 space 1024K,   0% used [0x00000000d3e00000, 0x00000000d3e00000, 0x00000000d3f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d3f00000 NTAMS 0x00000000d3f00000 space 1024K,   0% used [0x00000000d3f00000, 0x00000000d3f00000, 0x00000000d4000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4000000 NTAMS 0x00000000d4000000 space 1024K,   0% used [0x00000000d4000000, 0x00000000d4000000, 0x00000000d4100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4100000 NTAMS 0x00000000d4100000 space 1024K,   0% used [0x00000000d4100000, 0x00000000d4100000, 0x00000000d4200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4200000 NTAMS 0x00000000d4200000 space 1024K,   0% used [0x00000000d4200000, 0x00000000d4200000, 0x00000000d4300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4300000 NTAMS 0x00000000d4300000 space 1024K,   0% used [0x00000000d4300000, 0x00000000d4300000, 0x00000000d4400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4400000 NTAMS 0x00000000d4400000 space 1024K,   0% used [0x00000000d4400000, 0x00000000d4400000, 0x00000000d4500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4500000 NTAMS 0x00000000d4500000 space 1024K,   0% used [0x00000000d4500000, 0x00000000d4500000, 0x00000000d4600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4600000 NTAMS 0x00000000d4600000 space 1024K,   0% used [0x00000000d4600000, 0x00000000d4600000, 0x00000000d4700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4700000 NTAMS 0x00000000d4700000 space 1024K,   0% used [0x00000000d4700000, 0x00000000d4700000, 0x00000000d4800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4800000 NTAMS 0x00000000d4800000 space 1024K,   0% used [0x00000000d4800000, 0x00000000d4800000, 0x00000000d4900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4900000 NTAMS 0x00000000d4900000 space 1024K,   0% used [0x00000000d4900000, 0x00000000d4900000, 0x00000000d4a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4a00000 NTAMS 0x00000000d4a00000 space 1024K,   0% used [0x00000000d4a00000, 0x00000000d4a00000, 0x00000000d4b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4b00000 NTAMS 0x00000000d4b00000 space 1024K,   0% used [0x00000000d4b00000, 0x00000000d4b00000, 0x00000000d4c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4c00000 NTAMS 0x00000000d4c00000 space 1024K,   0% used [0x00000000d4c00000, 0x00000000d4c00000, 0x00000000d4d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4d00000 NTAMS 0x00000000d4d00000 space 1024K,   0% used [0x00000000d4d00000, 0x00000000d4d00000, 0x00000000d4e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4e00000 NTAMS 0x00000000d4e00000 space 1024K,   0% used [0x00000000d4e00000, 0x00000000d4e00000, 0x00000000d4f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d4f00000 NTAMS 0x00000000d4f00000 space 1024K,   0% used [0x00000000d4f00000, 0x00000000d4f00000, 0x00000000d5000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5000000 NTAMS 0x00000000d5000000 space 1024K,   0% used [0x00000000d5000000, 0x00000000d5000000, 0x00000000d5100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5100000 NTAMS 0x00000000d5100000 space 1024K,   0% used [0x00000000d5100000, 0x00000000d5100000, 0x00000000d5200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5200000 NTAMS 0x00000000d5200000 space 1024K,   0% used [0x00000000d5200000, 0x00000000d5200000, 0x00000000d5300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5300000 NTAMS 0x00000000d5300000 space 1024K,   0% used [0x00000000d5300000, 0x00000000d5300000, 0x00000000d5400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5400000 NTAMS 0x00000000d5400000 space 1024K,   0% used [0x00000000d5400000, 0x00000000d5400000, 0x00000000d5500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5500000 NTAMS 0x00000000d5500000 space 1024K,   0% used [0x00000000d5500000, 0x00000000d5500000, 0x00000000d5600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5600000 NTAMS 0x00000000d5600000 space 1024K,   0% used [0x00000000d5600000, 0x00000000d5600000, 0x00000000d5700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5700000 NTAMS 0x00000000d5700000 space 1024K,   0% used [0x00000000d5700000, 0x00000000d5700000, 0x00000000d5800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5800000 NTAMS 0x00000000d5800000 space 1024K,   0% used [0x00000000d5800000, 0x00000000d5800000, 0x00000000d5900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5900000 NTAMS 0x00000000d5900000 space 1024K,   0% used [0x00000000d5900000, 0x00000000d5900000, 0x00000000d5a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5a00000 NTAMS 0x00000000d5a00000 space 1024K,   0% used [0x00000000d5a00000, 0x00000000d5a00000, 0x00000000d5b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5b00000 NTAMS 0x00000000d5b00000 space 1024K,   0% used [0x00000000d5b00000, 0x00000000d5b00000, 0x00000000d5c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5c00000 NTAMS 0x00000000d5c00000 space 1024K,   0% used [0x00000000d5c00000, 0x00000000d5c00000, 0x00000000d5d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5d00000 NTAMS 0x00000000d5d00000 space 1024K,   0% used [0x00000000d5d00000, 0x00000000d5d00000, 0x00000000d5e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5e00000 NTAMS 0x00000000d5e00000 space 1024K,   0% used [0x00000000d5e00000, 0x00000000d5e00000, 0x00000000d5f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d5f00000 NTAMS 0x00000000d5f00000 space 1024K,   0% used [0x00000000d5f00000, 0x00000000d5f00000, 0x00000000d6000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6000000 NTAMS 0x00000000d6000000 space 1024K,   0% used [0x00000000d6000000, 0x00000000d6000000, 0x00000000d6100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6100000 NTAMS 0x00000000d6100000 space 1024K,   0% used [0x00000000d6100000, 0x00000000d6100000, 0x00000000d6200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6200000 NTAMS 0x00000000d6200000 space 1024K,   0% used [0x00000000d6200000, 0x00000000d6200000, 0x00000000d6300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6300000 NTAMS 0x00000000d6300000 space 1024K,   0% used [0x00000000d6300000, 0x00000000d6300000, 0x00000000d6400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6400000 NTAMS 0x00000000d6400000 space 1024K,   0% used [0x00000000d6400000, 0x00000000d6400000, 0x00000000d6500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6500000 NTAMS 0x00000000d6500000 space 1024K,   0% used [0x00000000d6500000, 0x00000000d6500000, 0x00000000d6600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6600000 NTAMS 0x00000000d6600000 space 1024K,   0% used [0x00000000d6600000, 0x00000000d6600000, 0x00000000d6700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6700000 NTAMS 0x00000000d6700000 space 1024K,   0% used [0x00000000d6700000, 0x00000000d6700000, 0x00000000d6800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6800000 NTAMS 0x00000000d6800000 space 1024K,   0% used [0x00000000d6800000, 0x00000000d6800000, 0x00000000d6900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6900000 NTAMS 0x00000000d6900000 space 1024K,   0% used [0x00000000d6900000, 0x00000000d6900000, 0x00000000d6a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6a00000 NTAMS 0x00000000d6a00000 space 1024K,   0% used [0x00000000d6a00000, 0x00000000d6a00000, 0x00000000d6b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6b00000 NTAMS 0x00000000d6b00000 space 1024K,   0% used [0x00000000d6b00000, 0x00000000d6b00000, 0x00000000d6c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6c00000 NTAMS 0x00000000d6c00000 space 1024K,   0% used [0x00000000d6c00000, 0x00000000d6c00000, 0x00000000d6d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6d00000 NTAMS 0x00000000d6d00000 space 1024K,   0% used [0x00000000d6d00000, 0x00000000d6d00000, 0x00000000d6e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6e00000 NTAMS 0x00000000d6e00000 space 1024K,   0% used [0x00000000d6e00000, 0x00000000d6e00000, 0x00000000d6f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d6f00000 NTAMS 0x00000000d6f00000 space 1024K,   0% used [0x00000000d6f00000, 0x00000000d6f00000, 0x00000000d7000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7000000 NTAMS 0x00000000d7000000 space 1024K,   0% used [0x00000000d7000000, 0x00000000d7000000, 0x00000000d7100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7100000 NTAMS 0x00000000d7100000 space 1024K,   0% used [0x00000000d7100000, 0x00000000d7100000, 0x00000000d7200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7200000 NTAMS 0x00000000d7200000 space 1024K,   0% used [0x00000000d7200000, 0x00000000d7200000, 0x00000000d7300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7300000 NTAMS 0x00000000d7300000 space 1024K,   0% used [0x00000000d7300000, 0x00000000d7300000, 0x00000000d7400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7400000 NTAMS 0x00000000d7400000 space 1024K,   0% used [0x00000000d7400000, 0x00000000d7400000, 0x00000000d7500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7500000 NTAMS 0x00000000d7500000 space 1024K,   0% used [0x00000000d7500000, 0x00000000d7500000, 0x00000000d7600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7600000 NTAMS 0x00000000d7600000 space 1024K,   0% used [0x00000000d7600000, 0x00000000d7600000, 0x00000000d7700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7700000 NTAMS 0x00000000d7700000 space 1024K,   0% used [0x00000000d7700000, 0x00000000d7700000, 0x00000000d7800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7800000 NTAMS 0x00000000d7800000 space 1024K,   0% used [0x00000000d7800000, 0x00000000d7800000, 0x00000000d7900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7900000 NTAMS 0x00000000d7900000 space 1024K,   0% used [0x00000000d7900000, 0x00000000d7900000, 0x00000000d7a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7a00000 NTAMS 0x00000000d7a00000 space 1024K,   0% used [0x00000000d7a00000, 0x00000000d7a00000, 0x00000000d7b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7b00000 NTAMS 0x00000000d7b00000 space 1024K,   0% used [0x00000000d7b00000, 0x00000000d7b00000, 0x00000000d7c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7c00000 NTAMS 0x00000000d7c00000 space 1024K,   0% used [0x00000000d7c00000, 0x00000000d7c00000, 0x00000000d7d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7d00000 NTAMS 0x00000000d7d00000 space 1024K,   0% used [0x00000000d7d00000, 0x00000000d7d00000, 0x00000000d7e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7e00000 NTAMS 0x00000000d7e00000 space 1024K,   0% used [0x00000000d7e00000, 0x00000000d7e00000, 0x00000000d7f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d7f00000 NTAMS 0x00000000d7f00000 space 1024K,   0% used [0x00000000d7f00000, 0x00000000d7f00000, 0x00000000d8000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8000000 NTAMS 0x00000000d8000000 space 1024K,   0% used [0x00000000d8000000, 0x00000000d8000000, 0x00000000d8100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8100000 NTAMS 0x00000000d8100000 space 1024K,   0% used [0x00000000d8100000, 0x00000000d8100000, 0x00000000d8200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8200000 NTAMS 0x00000000d8200000 space 1024K,   0% used [0x00000000d8200000, 0x00000000d8200000, 0x00000000d8300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8300000 NTAMS 0x00000000d8300000 space 1024K,   0% used [0x00000000d8300000, 0x00000000d8300000, 0x00000000d8400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8400000 NTAMS 0x00000000d8400000 space 1024K,   0% used [0x00000000d8400000, 0x00000000d8400000, 0x00000000d8500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8500000 NTAMS 0x00000000d8500000 space 1024K,   0% used [0x00000000d8500000, 0x00000000d8500000, 0x00000000d8600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8600000 NTAMS 0x00000000d8600000 space 1024K,   0% used [0x00000000d8600000, 0x00000000d8600000, 0x00000000d8700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8700000 NTAMS 0x00000000d8700000 space 1024K,   0% used [0x00000000d8700000, 0x00000000d8700000, 0x00000000d8800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8800000 NTAMS 0x00000000d8800000 space 1024K,   0% used [0x00000000d8800000, 0x00000000d8800000, 0x00000000d8900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8900000 NTAMS 0x00000000d8900000 space 1024K,   0% used [0x00000000d8900000, 0x00000000d8900000, 0x00000000d8a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8a00000 NTAMS 0x00000000d8a00000 space 1024K,   0% used [0x00000000d8a00000, 0x00000000d8a00000, 0x00000000d8b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8b00000 NTAMS 0x00000000d8b00000 space 1024K,   0% used [0x00000000d8b00000, 0x00000000d8b00000, 0x00000000d8c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8c00000 NTAMS 0x00000000d8c00000 space 1024K,   0% used [0x00000000d8c00000, 0x00000000d8c00000, 0x00000000d8d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8d00000 NTAMS 0x00000000d8d00000 space 1024K,   0% used [0x00000000d8d00000, 0x00000000d8d00000, 0x00000000d8e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8e00000 NTAMS 0x00000000d8e00000 space 1024K,   0% used [0x00000000d8e00000, 0x00000000d8e00000, 0x00000000d8f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d8f00000 NTAMS 0x00000000d8f00000 space 1024K,   0% used [0x00000000d8f00000, 0x00000000d8f00000, 0x00000000d9000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9000000 NTAMS 0x00000000d9000000 space 1024K,   0% used [0x00000000d9000000, 0x00000000d9000000, 0x00000000d9100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9100000 NTAMS 0x00000000d9100000 space 1024K,   0% used [0x00000000d9100000, 0x00000000d9100000, 0x00000000d9200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9200000 NTAMS 0x00000000d9200000 space 1024K,   0% used [0x00000000d9200000, 0x00000000d9200000, 0x00000000d9300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9300000 NTAMS 0x00000000d9300000 space 1024K,   0% used [0x00000000d9300000, 0x00000000d9300000, 0x00000000d9400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9400000 NTAMS 0x00000000d9400000 space 1024K,   0% used [0x00000000d9400000, 0x00000000d9400000, 0x00000000d9500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9500000 NTAMS 0x00000000d9500000 space 1024K,   0% used [0x00000000d9500000, 0x00000000d9500000, 0x00000000d9600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9600000 NTAMS 0x00000000d9600000 space 1024K,   0% used [0x00000000d9600000, 0x00000000d9600000, 0x00000000d9700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9700000 NTAMS 0x00000000d9700000 space 1024K,   0% used [0x00000000d9700000, 0x00000000d9700000, 0x00000000d9800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9800000 NTAMS 0x00000000d9800000 space 1024K,   0% used [0x00000000d9800000, 0x00000000d9800000, 0x00000000d9900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9900000 NTAMS 0x00000000d9900000 space 1024K,   0% used [0x00000000d9900000, 0x00000000d9900000, 0x00000000d9a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9a00000 NTAMS 0x00000000d9a00000 space 1024K,   0% used [0x00000000d9a00000, 0x00000000d9a00000, 0x00000000d9b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9b00000 NTAMS 0x00000000d9b00000 space 1024K,   0% used [0x00000000d9b00000, 0x00000000d9b00000, 0x00000000d9c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9c00000 NTAMS 0x00000000d9c00000 space 1024K,   0% used [0x00000000d9c00000, 0x00000000d9c00000, 0x00000000d9d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9d00000 NTAMS 0x00000000d9d00000 space 1024K,   0% used [0x00000000d9d00000, 0x00000000d9d00000, 0x00000000d9e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9e00000 NTAMS 0x00000000d9e00000 space 1024K,   0% used [0x00000000d9e00000, 0x00000000d9e00000, 0x00000000d9f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000d9f00000 NTAMS 0x00000000d9f00000 space 1024K,   0% used [0x00000000d9f00000, 0x00000000d9f00000, 0x00000000da000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da000000 NTAMS 0x00000000da000000 space 1024K,   0% used [0x00000000da000000, 0x00000000da000000, 0x00000000da100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da100000 NTAMS 0x00000000da100000 space 1024K,   0% used [0x00000000da100000, 0x00000000da100000, 0x00000000da200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da200000 NTAMS 0x00000000da200000 space 1024K,   0% used [0x00000000da200000, 0x00000000da200000, 0x00000000da300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da300000 NTAMS 0x00000000da300000 space 1024K,   0% used [0x00000000da300000, 0x00000000da300000, 0x00000000da400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da400000 NTAMS 0x00000000da400000 space 1024K,   0% used [0x00000000da400000, 0x00000000da400000, 0x00000000da500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da500000 NTAMS 0x00000000da500000 space 1024K,   0% used [0x00000000da500000, 0x00000000da500000, 0x00000000da600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da600000 NTAMS 0x00000000da600000 space 1024K,   0% used [0x00000000da600000, 0x00000000da600000, 0x00000000da700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da700000 NTAMS 0x00000000da700000 space 1024K,   0% used [0x00000000da700000, 0x00000000da700000, 0x00000000da800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da800000 NTAMS 0x00000000da800000 space 1024K,   0% used [0x00000000da800000, 0x00000000da800000, 0x00000000da900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000da900000 NTAMS 0x00000000da900000 space 1024K,   0% used [0x00000000da900000, 0x00000000da900000, 0x00000000daa00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000daa00000 NTAMS 0x00000000daa00000 space 1024K,   0% used [0x00000000daa00000, 0x00000000daa00000, 0x00000000dab00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dab00000 NTAMS 0x00000000dab00000 space 1024K,   0% used [0x00000000dab00000, 0x00000000dab00000, 0x00000000dac00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dac00000 NTAMS 0x00000000dac00000 space 1024K,   0% used [0x00000000dac00000, 0x00000000dac00000, 0x00000000dad00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dad00000 NTAMS 0x00000000dad00000 space 1024K,   0% used [0x00000000dad00000, 0x00000000dad00000, 0x00000000dae00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dae00000 NTAMS 0x00000000dae00000 space 1024K,   0% used [0x00000000dae00000, 0x00000000dae00000, 0x00000000daf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000daf00000 NTAMS 0x00000000daf00000 space 1024K,   0% used [0x00000000daf00000, 0x00000000daf00000, 0x00000000db000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db000000 NTAMS 0x00000000db000000 space 1024K,   0% used [0x00000000db000000, 0x00000000db000000, 0x00000000db100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db100000 NTAMS 0x00000000db100000 space 1024K,   0% used [0x00000000db100000, 0x00000000db100000, 0x00000000db200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db200000 NTAMS 0x00000000db200000 space 1024K,   0% used [0x00000000db200000, 0x00000000db200000, 0x00000000db300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db300000 NTAMS 0x00000000db300000 space 1024K,   0% used [0x00000000db300000, 0x00000000db300000, 0x00000000db400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db400000 NTAMS 0x00000000db400000 space 1024K,   0% used [0x00000000db400000, 0x00000000db400000, 0x00000000db500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db500000 NTAMS 0x00000000db500000 space 1024K,   0% used [0x00000000db500000, 0x00000000db500000, 0x00000000db600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db600000 NTAMS 0x00000000db600000 space 1024K,   0% used [0x00000000db600000, 0x00000000db600000, 0x00000000db700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db700000 NTAMS 0x00000000db700000 space 1024K,   0% used [0x00000000db700000, 0x00000000db700000, 0x00000000db800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db800000 NTAMS 0x00000000db800000 space 1024K,   0% used [0x00000000db800000, 0x00000000db800000, 0x00000000db900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000db900000 NTAMS 0x00000000db900000 space 1024K,   0% used [0x00000000db900000, 0x00000000db900000, 0x00000000dba00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dba00000 NTAMS 0x00000000dba00000 space 1024K,   0% used [0x00000000dba00000, 0x00000000dba00000, 0x00000000dbb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dbb00000 NTAMS 0x00000000dbb00000 space 1024K,   0% used [0x00000000dbb00000, 0x00000000dbb00000, 0x00000000dbc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dbc00000 NTAMS 0x00000000dbc00000 space 1024K,   0% used [0x00000000dbc00000, 0x00000000dbc00000, 0x00000000dbd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dbd00000 NTAMS 0x00000000dbd00000 space 1024K,   0% used [0x00000000dbd00000, 0x00000000dbd00000, 0x00000000dbe00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dbe00000 NTAMS 0x00000000dbe00000 space 1024K,   0% used [0x00000000dbe00000, 0x00000000dbe00000, 0x00000000dbf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dbf00000 NTAMS 0x00000000dbf00000 space 1024K,   0% used [0x00000000dbf00000, 0x00000000dbf00000, 0x00000000dc000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc000000 NTAMS 0x00000000dc000000 space 1024K,   0% used [0x00000000dc000000, 0x00000000dc000000, 0x00000000dc100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc100000 NTAMS 0x00000000dc100000 space 1024K,   0% used [0x00000000dc100000, 0x00000000dc100000, 0x00000000dc200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc200000 NTAMS 0x00000000dc200000 space 1024K,   0% used [0x00000000dc200000, 0x00000000dc200000, 0x00000000dc300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc300000 NTAMS 0x00000000dc300000 space 1024K,   0% used [0x00000000dc300000, 0x00000000dc300000, 0x00000000dc400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc400000 NTAMS 0x00000000dc400000 space 1024K,   0% used [0x00000000dc400000, 0x00000000dc400000, 0x00000000dc500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc500000 NTAMS 0x00000000dc500000 space 1024K,   0% used [0x00000000dc500000, 0x00000000dc500000, 0x00000000dc600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc600000 NTAMS 0x00000000dc600000 space 1024K,   0% used [0x00000000dc600000, 0x00000000dc600000, 0x00000000dc700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc700000 NTAMS 0x00000000dc700000 space 1024K,   0% used [0x00000000dc700000, 0x00000000dc700000, 0x00000000dc800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc800000 NTAMS 0x00000000dc800000 space 1024K,   0% used [0x00000000dc800000, 0x00000000dc800000, 0x00000000dc900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dc900000 NTAMS 0x00000000dc900000 space 1024K,   0% used [0x00000000dc900000, 0x00000000dc900000, 0x00000000dca00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dca00000 NTAMS 0x00000000dca00000 space 1024K,   0% used [0x00000000dca00000, 0x00000000dca00000, 0x00000000dcb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dcb00000 NTAMS 0x00000000dcb00000 space 1024K,   0% used [0x00000000dcb00000, 0x00000000dcb00000, 0x00000000dcc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dcc00000 NTAMS 0x00000000dcc00000 space 1024K,   0% used [0x00000000dcc00000, 0x00000000dcc00000, 0x00000000dcd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dcd00000 NTAMS 0x00000000dcd00000 space 1024K,   0% used [0x00000000dcd00000, 0x00000000dcd00000, 0x00000000dce00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dce00000 NTAMS 0x00000000dce00000 space 1024K,   0% used [0x00000000dce00000, 0x00000000dce00000, 0x00000000dcf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dcf00000 NTAMS 0x00000000dcf00000 space 1024K,   0% used [0x00000000dcf00000, 0x00000000dcf00000, 0x00000000dd000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd000000 NTAMS 0x00000000dd000000 space 1024K,   0% used [0x00000000dd000000, 0x00000000dd000000, 0x00000000dd100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd100000 NTAMS 0x00000000dd100000 space 1024K,   0% used [0x00000000dd100000, 0x00000000dd100000, 0x00000000dd200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd200000 NTAMS 0x00000000dd200000 space 1024K,   0% used [0x00000000dd200000, 0x00000000dd200000, 0x00000000dd300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd300000 NTAMS 0x00000000dd300000 space 1024K,   0% used [0x00000000dd300000, 0x00000000dd300000, 0x00000000dd400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd400000 NTAMS 0x00000000dd400000 space 1024K,   0% used [0x00000000dd400000, 0x00000000dd400000, 0x00000000dd500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd500000 NTAMS 0x00000000dd500000 space 1024K,   0% used [0x00000000dd500000, 0x00000000dd500000, 0x00000000dd600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd600000 NTAMS 0x00000000dd600000 space 1024K,   0% used [0x00000000dd600000, 0x00000000dd600000, 0x00000000dd700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd700000 NTAMS 0x00000000dd700000 space 1024K,   0% used [0x00000000dd700000, 0x00000000dd700000, 0x00000000dd800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd800000 NTAMS 0x00000000dd800000 space 1024K,   0% used [0x00000000dd800000, 0x00000000dd800000, 0x00000000dd900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dd900000 NTAMS 0x00000000dd900000 space 1024K,   0% used [0x00000000dd900000, 0x00000000dd900000, 0x00000000dda00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dda00000 NTAMS 0x00000000dda00000 space 1024K,   0% used [0x00000000dda00000, 0x00000000dda00000, 0x00000000ddb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ddb00000 NTAMS 0x00000000ddb00000 space 1024K,   0% used [0x00000000ddb00000, 0x00000000ddb00000, 0x00000000ddc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ddc00000 NTAMS 0x00000000ddc00000 space 1024K,   0% used [0x00000000ddc00000, 0x00000000ddc00000, 0x00000000ddd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ddd00000 NTAMS 0x00000000ddd00000 space 1024K,   0% used [0x00000000ddd00000, 0x00000000ddd00000, 0x00000000dde00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dde00000 NTAMS 0x00000000dde00000 space 1024K,   0% used [0x00000000dde00000, 0x00000000dde00000, 0x00000000ddf00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ddf00000 NTAMS 0x00000000ddf00000 space 1024K,   0% used [0x00000000ddf00000, 0x00000000ddf00000, 0x00000000de000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de000000 NTAMS 0x00000000de000000 space 1024K,   0% used [0x00000000de000000, 0x00000000de000000, 0x00000000de100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de100000 NTAMS 0x00000000de100000 space 1024K,   0% used [0x00000000de100000, 0x00000000de100000, 0x00000000de200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de200000 NTAMS 0x00000000de200000 space 1024K,   0% used [0x00000000de200000, 0x00000000de200000, 0x00000000de300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de300000 NTAMS 0x00000000de300000 space 1024K,   0% used [0x00000000de300000, 0x00000000de300000, 0x00000000de400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de400000 NTAMS 0x00000000de400000 space 1024K,   0% used [0x00000000de400000, 0x00000000de400000, 0x00000000de500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de500000 NTAMS 0x00000000de500000 space 1024K,   0% used [0x00000000de500000, 0x00000000de500000, 0x00000000de600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de600000 NTAMS 0x00000000de600000 space 1024K,   0% used [0x00000000de600000, 0x00000000de600000, 0x00000000de700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de700000 NTAMS 0x00000000de700000 space 1024K,   0% used [0x00000000de700000, 0x00000000de700000, 0x00000000de800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de800000 NTAMS 0x00000000de800000 space 1024K,   0% used [0x00000000de800000, 0x00000000de800000, 0x00000000de900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000de900000 NTAMS 0x00000000de900000 space 1024K,   0% used [0x00000000de900000, 0x00000000de900000, 0x00000000dea00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dea00000 NTAMS 0x00000000dea00000 space 1024K,   0% used [0x00000000dea00000, 0x00000000dea00000, 0x00000000deb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000deb00000 NTAMS 0x00000000deb00000 space 1024K,   0% used [0x00000000deb00000, 0x00000000deb00000, 0x00000000dec00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dec00000 NTAMS 0x00000000dec00000 space 1024K,   0% used [0x00000000dec00000, 0x00000000dec00000, 0x00000000ded00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000ded00000 NTAMS 0x00000000ded00000 space 1024K,   0% used [0x00000000ded00000, 0x00000000ded00000, 0x00000000dee00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dee00000 NTAMS 0x00000000dee00000 space 1024K,   0% used [0x00000000dee00000, 0x00000000dee00000, 0x00000000def00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000def00000 NTAMS 0x00000000def00000 space 1024K,   0% used [0x00000000def00000, 0x00000000def00000, 0x00000000df000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df000000 NTAMS 0x00000000df000000 space 1024K,   0% used [0x00000000df000000, 0x00000000df000000, 0x00000000df100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df100000 NTAMS 0x00000000df100000 space 1024K,   0% used [0x00000000df100000, 0x00000000df100000, 0x00000000df200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df200000 NTAMS 0x00000000df200000 space 1024K,   0% used [0x00000000df200000, 0x00000000df200000, 0x00000000df300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df300000 NTAMS 0x00000000df300000 space 1024K,   0% used [0x00000000df300000, 0x00000000df300000, 0x00000000df400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df400000 NTAMS 0x00000000df400000 space 1024K,   0% used [0x00000000df400000, 0x00000000df400000, 0x00000000df500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df500000 NTAMS 0x00000000df500000 space 1024K,   0% used [0x00000000df500000, 0x00000000df500000, 0x00000000df600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df600000 NTAMS 0x00000000df600000 space 1024K,   0% used [0x00000000df600000, 0x00000000df600000, 0x00000000df700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df700000 NTAMS 0x00000000df700000 space 1024K,   0% used [0x00000000df700000, 0x00000000df700000, 0x00000000df800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df800000 NTAMS 0x00000000df800000 space 1024K,   0% used [0x00000000df800000, 0x00000000df800000, 0x00000000df900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000df900000 NTAMS 0x00000000df900000 space 1024K,   0% used [0x00000000df900000, 0x00000000df900000, 0x00000000dfa00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dfa00000 NTAMS 0x00000000dfa00000 space 1024K,   0% used [0x00000000dfa00000, 0x00000000dfa00000, 0x00000000dfb00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dfb00000 NTAMS 0x00000000dfb00000 space 1024K,   0% used [0x00000000dfb00000, 0x00000000dfb00000, 0x00000000dfc00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dfc00000 NTAMS 0x00000000dfc00000 space 1024K,   0% used [0x00000000dfc00000, 0x00000000dfc00000, 0x00000000dfd00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dfd00000 NTAMS 0x00000000dfd00000 space 1024K,   0% used [0x00000000dfd00000, 0x00000000dfd00000, 0x00000000dfe00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dfe00000 NTAMS 0x00000000dfe00000 space 1024K,   0% used [0x00000000dfe00000, 0x00000000dfe00000, 0x00000000dff00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000dff00000 NTAMS 0x00000000dff00000 space 1024K,   0% used [0x00000000dff00000, 0x00000000dff00000, 0x00000000e0000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0000000 NTAMS 0x00000000e0000000 space 1024K,   0% used [0x00000000e0000000, 0x00000000e0000000, 0x00000000e0100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0100000 NTAMS 0x00000000e0100000 space 1024K,   0% used [0x00000000e0100000, 0x00000000e0100000, 0x00000000e0200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0200000 NTAMS 0x00000000e0200000 space 1024K,   0% used [0x00000000e0200000, 0x00000000e0200000, 0x00000000e0300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0300000 NTAMS 0x00000000e0300000 space 1024K,   0% used [0x00000000e0300000, 0x00000000e0300000, 0x00000000e0400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0400000 NTAMS 0x00000000e0400000 space 1024K,   0% used [0x00000000e0400000, 0x00000000e0400000, 0x00000000e0500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0500000 NTAMS 0x00000000e0500000 space 1024K,   0% used [0x00000000e0500000, 0x00000000e0500000, 0x00000000e0600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0600000 NTAMS 0x00000000e0600000 space 1024K,   0% used [0x00000000e0600000, 0x00000000e0600000, 0x00000000e0700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0700000 NTAMS 0x00000000e0700000 space 1024K,   0% used [0x00000000e0700000, 0x00000000e0700000, 0x00000000e0800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0800000 NTAMS 0x00000000e0800000 space 1024K,   0% used [0x00000000e0800000, 0x00000000e0800000, 0x00000000e0900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0900000 NTAMS 0x00000000e0900000 space 1024K,   0% used [0x00000000e0900000, 0x00000000e0900000, 0x00000000e0a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0a00000 NTAMS 0x00000000e0a00000 space 1024K,   0% used [0x00000000e0a00000, 0x00000000e0a00000, 0x00000000e0b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0b00000 NTAMS 0x00000000e0b00000 space 1024K,   0% used [0x00000000e0b00000, 0x00000000e0b00000, 0x00000000e0c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0c00000 NTAMS 0x00000000e0c00000 space 1024K,   0% used [0x00000000e0c00000, 0x00000000e0c00000, 0x00000000e0d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0d00000 NTAMS 0x00000000e0d00000 space 1024K,   0% used [0x00000000e0d00000, 0x00000000e0d00000, 0x00000000e0e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0e00000 NTAMS 0x00000000e0e00000 space 1024K,   0% used [0x00000000e0e00000, 0x00000000e0e00000, 0x00000000e0f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e0f00000 NTAMS 0x00000000e0f00000 space 1024K,   0% used [0x00000000e0f00000, 0x00000000e0f00000, 0x00000000e1000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1000000 NTAMS 0x00000000e1000000 space 1024K,   0% used [0x00000000e1000000, 0x00000000e1000000, 0x00000000e1100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1100000 NTAMS 0x00000000e1100000 space 1024K,   0% used [0x00000000e1100000, 0x00000000e1100000, 0x00000000e1200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1200000 NTAMS 0x00000000e1200000 space 1024K,   0% used [0x00000000e1200000, 0x00000000e1200000, 0x00000000e1300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1300000 NTAMS 0x00000000e1300000 space 1024K,   0% used [0x00000000e1300000, 0x00000000e1300000, 0x00000000e1400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1400000 NTAMS 0x00000000e1400000 space 1024K,   0% used [0x00000000e1400000, 0x00000000e1400000, 0x00000000e1500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1500000 NTAMS 0x00000000e1500000 space 1024K,   0% used [0x00000000e1500000, 0x00000000e1500000, 0x00000000e1600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1600000 NTAMS 0x00000000e1600000 space 1024K,   0% used [0x00000000e1600000, 0x00000000e1600000, 0x00000000e1700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1700000 NTAMS 0x00000000e1700000 space 1024K,   0% used [0x00000000e1700000, 0x00000000e1700000, 0x00000000e1800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1800000 NTAMS 0x00000000e1800000 space 1024K,   0% used [0x00000000e1800000, 0x00000000e1800000, 0x00000000e1900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1900000 NTAMS 0x00000000e1900000 space 1024K,   0% used [0x00000000e1900000, 0x00000000e1900000, 0x00000000e1a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1a00000 NTAMS 0x00000000e1a00000 space 1024K,   0% used [0x00000000e1a00000, 0x00000000e1a00000, 0x00000000e1b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1b00000 NTAMS 0x00000000e1b00000 space 1024K,   0% used [0x00000000e1b00000, 0x00000000e1b00000, 0x00000000e1c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1c00000 NTAMS 0x00000000e1c00000 space 1024K,   0% used [0x00000000e1c00000, 0x00000000e1c00000, 0x00000000e1d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1d00000 NTAMS 0x00000000e1d00000 space 1024K,   0% used [0x00000000e1d00000, 0x00000000e1d00000, 0x00000000e1e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1e00000 NTAMS 0x00000000e1e00000 space 1024K,   0% used [0x00000000e1e00000, 0x00000000e1e00000, 0x00000000e1f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e1f00000 NTAMS 0x00000000e1f00000 space 1024K,   0% used [0x00000000e1f00000, 0x00000000e1f00000, 0x00000000e2000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2000000 NTAMS 0x00000000e2000000 space 1024K,   0% used [0x00000000e2000000, 0x00000000e2000000, 0x00000000e2100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2100000 NTAMS 0x00000000e2100000 space 1024K,   0% used [0x00000000e2100000, 0x00000000e2100000, 0x00000000e2200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2200000 NTAMS 0x00000000e2200000 space 1024K,   0% used [0x00000000e2200000, 0x00000000e2200000, 0x00000000e2300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2300000 NTAMS 0x00000000e2300000 space 1024K,   0% used [0x00000000e2300000, 0x00000000e2300000, 0x00000000e2400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2400000 NTAMS 0x00000000e2400000 space 1024K,   0% used [0x00000000e2400000, 0x00000000e2400000, 0x00000000e2500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2500000 NTAMS 0x00000000e2500000 space 1024K,   0% used [0x00000000e2500000, 0x00000000e2500000, 0x00000000e2600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2600000 NTAMS 0x00000000e2600000 space 1024K,   0% used [0x00000000e2600000, 0x00000000e2600000, 0x00000000e2700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2700000 NTAMS 0x00000000e2700000 space 1024K,   0% used [0x00000000e2700000, 0x00000000e2700000, 0x00000000e2800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2800000 NTAMS 0x00000000e2800000 space 1024K,   0% used [0x00000000e2800000, 0x00000000e2800000, 0x00000000e2900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2900000 NTAMS 0x00000000e2900000 space 1024K,   0% used [0x00000000e2900000, 0x00000000e2900000, 0x00000000e2a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2a00000 NTAMS 0x00000000e2a00000 space 1024K,   0% used [0x00000000e2a00000, 0x00000000e2a00000, 0x00000000e2b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2b00000 NTAMS 0x00000000e2b00000 space 1024K,   0% used [0x00000000e2b00000, 0x00000000e2b00000, 0x00000000e2c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2c00000 NTAMS 0x00000000e2c00000 space 1024K,   0% used [0x00000000e2c00000, 0x00000000e2c00000, 0x00000000e2d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2d00000 NTAMS 0x00000000e2d00000 space 1024K,   0% used [0x00000000e2d00000, 0x00000000e2d00000, 0x00000000e2e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2e00000 NTAMS 0x00000000e2e00000 space 1024K,   0% used [0x00000000e2e00000, 0x00000000e2e00000, 0x00000000e2f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e2f00000 NTAMS 0x00000000e2f00000 space 1024K,   0% used [0x00000000e2f00000, 0x00000000e2f00000, 0x00000000e3000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3000000 NTAMS 0x00000000e3000000 space 1024K,   0% used [0x00000000e3000000, 0x00000000e3000000, 0x00000000e3100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3100000 NTAMS 0x00000000e3100000 space 1024K,   0% used [0x00000000e3100000, 0x00000000e3100000, 0x00000000e3200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3200000 NTAMS 0x00000000e3200000 space 1024K,   0% used [0x00000000e3200000, 0x00000000e3200000, 0x00000000e3300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3300000 NTAMS 0x00000000e3300000 space 1024K,   0% used [0x00000000e3300000, 0x00000000e3300000, 0x00000000e3400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3400000 NTAMS 0x00000000e3400000 space 1024K,   0% used [0x00000000e3400000, 0x00000000e3400000, 0x00000000e3500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3500000 NTAMS 0x00000000e3500000 space 1024K,   0% used [0x00000000e3500000, 0x00000000e3500000, 0x00000000e3600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3600000 NTAMS 0x00000000e3600000 space 1024K,   0% used [0x00000000e3600000, 0x00000000e3600000, 0x00000000e3700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3700000 NTAMS 0x00000000e3700000 space 1024K,   0% used [0x00000000e3700000, 0x00000000e3700000, 0x00000000e3800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3800000 NTAMS 0x00000000e3800000 space 1024K,   0% used [0x00000000e3800000, 0x00000000e3800000, 0x00000000e3900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3900000 NTAMS 0x00000000e3900000 space 1024K,   0% used [0x00000000e3900000, 0x00000000e3900000, 0x00000000e3a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3a00000 NTAMS 0x00000000e3a00000 space 1024K,   0% used [0x00000000e3a00000, 0x00000000e3a00000, 0x00000000e3b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3b00000 NTAMS 0x00000000e3b00000 space 1024K,   0% used [0x00000000e3b00000, 0x00000000e3b00000, 0x00000000e3c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3c00000 NTAMS 0x00000000e3c00000 space 1024K,   0% used [0x00000000e3c00000, 0x00000000e3c00000, 0x00000000e3d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3d00000 NTAMS 0x00000000e3d00000 space 1024K,   0% used [0x00000000e3d00000, 0x00000000e3d00000, 0x00000000e3e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3e00000 NTAMS 0x00000000e3e00000 space 1024K,   0% used [0x00000000e3e00000, 0x00000000e3e00000, 0x00000000e3f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e3f00000 NTAMS 0x00000000e3f00000 space 1024K,   0% used [0x00000000e3f00000, 0x00000000e3f00000, 0x00000000e4000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4000000 NTAMS 0x00000000e4000000 space 1024K,   0% used [0x00000000e4000000, 0x00000000e4000000, 0x00000000e4100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4100000 NTAMS 0x00000000e4100000 space 1024K,   0% used [0x00000000e4100000, 0x00000000e4100000, 0x00000000e4200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4200000 NTAMS 0x00000000e4200000 space 1024K,   0% used [0x00000000e4200000, 0x00000000e4200000, 0x00000000e4300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4300000 NTAMS 0x00000000e4300000 space 1024K,   0% used [0x00000000e4300000, 0x00000000e4300000, 0x00000000e4400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4400000 NTAMS 0x00000000e4400000 space 1024K,   0% used [0x00000000e4400000, 0x00000000e4400000, 0x00000000e4500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4500000 NTAMS 0x00000000e4500000 space 1024K,   0% used [0x00000000e4500000, 0x00000000e4500000, 0x00000000e4600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4600000 NTAMS 0x00000000e4600000 space 1024K,   0% used [0x00000000e4600000, 0x00000000e4600000, 0x00000000e4700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4700000 NTAMS 0x00000000e4700000 space 1024K,   0% used [0x00000000e4700000, 0x00000000e4700000, 0x00000000e4800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4800000 NTAMS 0x00000000e4800000 space 1024K,   0% used [0x00000000e4800000, 0x00000000e4800000, 0x00000000e4900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4900000 NTAMS 0x00000000e4900000 space 1024K,   0% used [0x00000000e4900000, 0x00000000e4900000, 0x00000000e4a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4a00000 NTAMS 0x00000000e4a00000 space 1024K,   0% used [0x00000000e4a00000, 0x00000000e4a00000, 0x00000000e4b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4b00000 NTAMS 0x00000000e4b00000 space 1024K,   0% used [0x00000000e4b00000, 0x00000000e4b00000, 0x00000000e4c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4c00000 NTAMS 0x00000000e4c00000 space 1024K,   0% used [0x00000000e4c00000, 0x00000000e4c00000, 0x00000000e4d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4d00000 NTAMS 0x00000000e4d00000 space 1024K,   0% used [0x00000000e4d00000, 0x00000000e4d00000, 0x00000000e4e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4e00000 NTAMS 0x00000000e4e00000 space 1024K,   0% used [0x00000000e4e00000, 0x00000000e4e00000, 0x00000000e4f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e4f00000 NTAMS 0x00000000e4f00000 space 1024K,   0% used [0x00000000e4f00000, 0x00000000e4f00000, 0x00000000e5000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5000000 NTAMS 0x00000000e5000000 space 1024K,   0% used [0x00000000e5000000, 0x00000000e5000000, 0x00000000e5100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5100000 NTAMS 0x00000000e5100000 space 1024K,   0% used [0x00000000e5100000, 0x00000000e5100000, 0x00000000e5200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5200000 NTAMS 0x00000000e5200000 space 1024K,   0% used [0x00000000e5200000, 0x00000000e5200000, 0x00000000e5300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5300000 NTAMS 0x00000000e5300000 space 1024K,   0% used [0x00000000e5300000, 0x00000000e5300000, 0x00000000e5400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5400000 NTAMS 0x00000000e5400000 space 1024K,   0% used [0x00000000e5400000, 0x00000000e5400000, 0x00000000e5500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5500000 NTAMS 0x00000000e5500000 space 1024K,   0% used [0x00000000e5500000, 0x00000000e5500000, 0x00000000e5600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5600000 NTAMS 0x00000000e5600000 space 1024K,   0% used [0x00000000e5600000, 0x00000000e5600000, 0x00000000e5700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5700000 NTAMS 0x00000000e5700000 space 1024K,   0% used [0x00000000e5700000, 0x00000000e5700000, 0x00000000e5800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5800000 NTAMS 0x00000000e5800000 space 1024K,   0% used [0x00000000e5800000, 0x00000000e5800000, 0x00000000e5900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5900000 NTAMS 0x00000000e5900000 space 1024K,   0% used [0x00000000e5900000, 0x00000000e5900000, 0x00000000e5a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5a00000 NTAMS 0x00000000e5a00000 space 1024K,   0% used [0x00000000e5a00000, 0x00000000e5a00000, 0x00000000e5b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5b00000 NTAMS 0x00000000e5b00000 space 1024K,   0% used [0x00000000e5b00000, 0x00000000e5b00000, 0x00000000e5c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5c00000 NTAMS 0x00000000e5c00000 space 1024K,   0% used [0x00000000e5c00000, 0x00000000e5c00000, 0x00000000e5d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5d00000 NTAMS 0x00000000e5d00000 space 1024K,   0% used [0x00000000e5d00000, 0x00000000e5d00000, 0x00000000e5e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5e00000 NTAMS 0x00000000e5e00000 space 1024K,   0% used [0x00000000e5e00000, 0x00000000e5e00000, 0x00000000e5f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e5f00000 NTAMS 0x00000000e5f00000 space 1024K,   0% used [0x00000000e5f00000, 0x00000000e5f00000, 0x00000000e6000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6000000 NTAMS 0x00000000e6000000 space 1024K,   0% used [0x00000000e6000000, 0x00000000e6000000, 0x00000000e6100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6100000 NTAMS 0x00000000e6100000 space 1024K,   0% used [0x00000000e6100000, 0x00000000e6100000, 0x00000000e6200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6200000 NTAMS 0x00000000e6200000 space 1024K,   0% used [0x00000000e6200000, 0x00000000e6200000, 0x00000000e6300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6300000 NTAMS 0x00000000e6300000 space 1024K,   0% used [0x00000000e6300000, 0x00000000e6300000, 0x00000000e6400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6400000 NTAMS 0x00000000e6400000 space 1024K,   0% used [0x00000000e6400000, 0x00000000e6400000, 0x00000000e6500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6500000 NTAMS 0x00000000e6500000 space 1024K,   0% used [0x00000000e6500000, 0x00000000e6500000, 0x00000000e6600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6600000 NTAMS 0x00000000e6600000 space 1024K,   0% used [0x00000000e6600000, 0x00000000e6600000, 0x00000000e6700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6700000 NTAMS 0x00000000e6700000 space 1024K,   0% used [0x00000000e6700000, 0x00000000e6700000, 0x00000000e6800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6800000 NTAMS 0x00000000e6800000 space 1024K,   0% used [0x00000000e6800000, 0x00000000e6800000, 0x00000000e6900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6900000 NTAMS 0x00000000e6900000 space 1024K,   0% used [0x00000000e6900000, 0x00000000e6900000, 0x00000000e6a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6a00000 NTAMS 0x00000000e6a00000 space 1024K,   0% used [0x00000000e6a00000, 0x00000000e6a00000, 0x00000000e6b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6b00000 NTAMS 0x00000000e6b00000 space 1024K,   0% used [0x00000000e6b00000, 0x00000000e6b00000, 0x00000000e6c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6c00000 NTAMS 0x00000000e6c00000 space 1024K,   0% used [0x00000000e6c00000, 0x00000000e6c00000, 0x00000000e6d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6d00000 NTAMS 0x00000000e6d00000 space 1024K,   0% used [0x00000000e6d00000, 0x00000000e6d00000, 0x00000000e6e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6e00000 NTAMS 0x00000000e6e00000 space 1024K,   0% used [0x00000000e6e00000, 0x00000000e6e00000, 0x00000000e6f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e6f00000 NTAMS 0x00000000e6f00000 space 1024K,   0% used [0x00000000e6f00000, 0x00000000e6f00000, 0x00000000e7000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7000000 NTAMS 0x00000000e7000000 space 1024K,   0% used [0x00000000e7000000, 0x00000000e7000000, 0x00000000e7100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7100000 NTAMS 0x00000000e7100000 space 1024K,   0% used [0x00000000e7100000, 0x00000000e7100000, 0x00000000e7200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7200000 NTAMS 0x00000000e7200000 space 1024K,   0% used [0x00000000e7200000, 0x00000000e7200000, 0x00000000e7300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7300000 NTAMS 0x00000000e7300000 space 1024K,   0% used [0x00000000e7300000, 0x00000000e7300000, 0x00000000e7400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7400000 NTAMS 0x00000000e7400000 space 1024K,   0% used [0x00000000e7400000, 0x00000000e7400000, 0x00000000e7500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7500000 NTAMS 0x00000000e7500000 space 1024K,   0% used [0x00000000e7500000, 0x00000000e7500000, 0x00000000e7600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7600000 NTAMS 0x00000000e7600000 space 1024K,   0% used [0x00000000e7600000, 0x00000000e7600000, 0x00000000e7700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7700000 NTAMS 0x00000000e7700000 space 1024K,   0% used [0x00000000e7700000, 0x00000000e7700000, 0x00000000e7800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7800000 NTAMS 0x00000000e7800000 space 1024K,   0% used [0x00000000e7800000, 0x00000000e7800000, 0x00000000e7900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7900000 NTAMS 0x00000000e7900000 space 1024K,   0% used [0x00000000e7900000, 0x00000000e7900000, 0x00000000e7a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7a00000 NTAMS 0x00000000e7a00000 space 1024K,   0% used [0x00000000e7a00000, 0x00000000e7a00000, 0x00000000e7b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7b00000 NTAMS 0x00000000e7b00000 space 1024K,   0% used [0x00000000e7b00000, 0x00000000e7b00000, 0x00000000e7c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7c00000 NTAMS 0x00000000e7c00000 space 1024K,   0% used [0x00000000e7c00000, 0x00000000e7c00000, 0x00000000e7d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7d00000 NTAMS 0x00000000e7d00000 space 1024K,   0% used [0x00000000e7d00000, 0x00000000e7d00000, 0x00000000e7e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7e00000 NTAMS 0x00000000e7e00000 space 1024K,   0% used [0x00000000e7e00000, 0x00000000e7e00000, 0x00000000e7f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e7f00000 NTAMS 0x00000000e7f00000 space 1024K,   0% used [0x00000000e7f00000, 0x00000000e7f00000, 0x00000000e8000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8000000 NTAMS 0x00000000e8000000 space 1024K,   0% used [0x00000000e8000000, 0x00000000e8000000, 0x00000000e8100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8100000 NTAMS 0x00000000e8100000 space 1024K,   0% used [0x00000000e8100000, 0x00000000e8100000, 0x00000000e8200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8200000 NTAMS 0x00000000e8200000 space 1024K,   0% used [0x00000000e8200000, 0x00000000e8200000, 0x00000000e8300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8300000 NTAMS 0x00000000e8300000 space 1024K,   0% used [0x00000000e8300000, 0x00000000e8300000, 0x00000000e8400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8400000 NTAMS 0x00000000e8400000 space 1024K,   0% used [0x00000000e8400000, 0x00000000e8400000, 0x00000000e8500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8500000 NTAMS 0x00000000e8500000 space 1024K,   0% used [0x00000000e8500000, 0x00000000e8500000, 0x00000000e8600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8600000 NTAMS 0x00000000e8600000 space 1024K,   0% used [0x00000000e8600000, 0x00000000e8600000, 0x00000000e8700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8700000 NTAMS 0x00000000e8700000 space 1024K,   0% used [0x00000000e8700000, 0x00000000e8700000, 0x00000000e8800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8800000 NTAMS 0x00000000e8800000 space 1024K,   0% used [0x00000000e8800000, 0x00000000e8800000, 0x00000000e8900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8900000 NTAMS 0x00000000e8900000 space 1024K,   0% used [0x00000000e8900000, 0x00000000e8900000, 0x00000000e8a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8a00000 NTAMS 0x00000000e8a00000 space 1024K,   0% used [0x00000000e8a00000, 0x00000000e8a00000, 0x00000000e8b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8b00000 NTAMS 0x00000000e8b00000 space 1024K,   0% used [0x00000000e8b00000, 0x00000000e8b00000, 0x00000000e8c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8c00000 NTAMS 0x00000000e8c00000 space 1024K,   0% used [0x00000000e8c00000, 0x00000000e8c00000, 0x00000000e8d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8d00000 NTAMS 0x00000000e8d00000 space 1024K,   0% used [0x00000000e8d00000, 0x00000000e8d00000, 0x00000000e8e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8e00000 NTAMS 0x00000000e8e00000 space 1024K,   0% used [0x00000000e8e00000, 0x00000000e8e00000, 0x00000000e8f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e8f00000 NTAMS 0x00000000e8f00000 space 1024K,   0% used [0x00000000e8f00000, 0x00000000e8f00000, 0x00000000e9000000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9000000 NTAMS 0x00000000e9000000 space 1024K,   0% used [0x00000000e9000000, 0x00000000e9000000, 0x00000000e9100000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9100000 NTAMS 0x00000000e9100000 space 1024K,   0% used [0x00000000e9100000, 0x00000000e9100000, 0x00000000e9200000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9200000 NTAMS 0x00000000e9200000 space 1024K,   0% used [0x00000000e9200000, 0x00000000e9200000, 0x00000000e9300000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9300000 NTAMS 0x00000000e9300000 space 1024K,   0% used [0x00000000e9300000, 0x00000000e9300000, 0x00000000e9400000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9400000 NTAMS 0x00000000e9400000 space 1024K,   0% used [0x00000000e9400000, 0x00000000e9400000, 0x00000000e9500000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9500000 NTAMS 0x00000000e9500000 space 1024K,   0% used [0x00000000e9500000, 0x00000000e9500000, 0x00000000e9600000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9600000 NTAMS 0x00000000e9600000 space 1024K,   0% used [0x00000000e9600000, 0x00000000e9600000, 0x00000000e9700000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9700000 NTAMS 0x00000000e9700000 space 1024K,   0% used [0x00000000e9700000, 0x00000000e9700000, 0x00000000e9800000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9800000 NTAMS 0x00000000e9800000 space 1024K,   0% used [0x00000000e9800000, 0x00000000e9800000, 0x00000000e9900000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9900000 NTAMS 0x00000000e9900000 space 1024K,   0% used [0x00000000e9900000, 0x00000000e9900000, 0x00000000e9a00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9a00000 NTAMS 0x00000000e9a00000 space 1024K,   0% used [0x00000000e9a00000, 0x00000000e9a00000, 0x00000000e9b00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9b00000 NTAMS 0x00000000e9b00000 space 1024K,   0% used [0x00000000e9b00000, 0x00000000e9b00000, 0x00000000e9c00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9c00000 NTAMS 0x00000000e9c00000 space 1024K,   0% used [0x00000000e9c00000, 0x00000000e9c00000, 0x00000000e9d00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9d00000 NTAMS 0x00000000e9d00000 space 1024K,   0% used [0x00000000e9d00000, 0x00000000e9d00000, 0x00000000e9e00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9e00000 NTAMS 0x00000000e9e00000 space 1024K,   0% used [0x00000000e9e00000, 0x00000000e9e00000, 0x00000000e9f00000)</span><br><span class="line">          F TS    41 PTAMS 0x00000000e9f00000 NTAMS 0x00000000e9f00000 space 1024K,   0% used [0x00000000e9f00000, 0x00000000e9f00000, 0x00000000ea000000)</span><br><span class="line">       Y    TS    41 PTAMS 0x00000000ea000000 NTAMS 0x00000000ea000000 space 1024K,  50% used [0x00000000ea000000, 0x00000000ea0807f8, 0x00000000ea100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea100000 NTAMS 0x00000000ea100000 space 1024K, 100% used [0x00000000ea100000, 0x00000000ea200000, 0x00000000ea200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea200000 NTAMS 0x00000000ea200000 space 1024K, 100% used [0x00000000ea200000, 0x00000000ea300000, 0x00000000ea300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea300000 NTAMS 0x00000000ea300000 space 1024K, 100% used [0x00000000ea300000, 0x00000000ea400000, 0x00000000ea400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea400000 NTAMS 0x00000000ea400000 space 1024K, 100% used [0x00000000ea400000, 0x00000000ea500000, 0x00000000ea500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea500000 NTAMS 0x00000000ea500000 space 1024K, 100% used [0x00000000ea500000, 0x00000000ea600000, 0x00000000ea600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea600000 NTAMS 0x00000000ea600000 space 1024K, 100% used [0x00000000ea600000, 0x00000000ea700000, 0x00000000ea700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea700000 NTAMS 0x00000000ea700000 space 1024K, 100% used [0x00000000ea700000, 0x00000000ea800000, 0x00000000ea800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea800000 NTAMS 0x00000000ea800000 space 1024K, 100% used [0x00000000ea800000, 0x00000000ea900000, 0x00000000ea900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ea900000 NTAMS 0x00000000ea900000 space 1024K, 100% used [0x00000000ea900000, 0x00000000eaa00000, 0x00000000eaa00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eaa00000 NTAMS 0x00000000eaa00000 space 1024K, 100% used [0x00000000eaa00000, 0x00000000eab00000, 0x00000000eab00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eab00000 NTAMS 0x00000000eab00000 space 1024K, 100% used [0x00000000eab00000, 0x00000000eac00000, 0x00000000eac00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eac00000 NTAMS 0x00000000eac00000 space 1024K, 100% used [0x00000000eac00000, 0x00000000ead00000, 0x00000000ead00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ead00000 NTAMS 0x00000000ead00000 space 1024K, 100% used [0x00000000ead00000, 0x00000000eae00000, 0x00000000eae00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eae00000 NTAMS 0x00000000eae00000 space 1024K, 100% used [0x00000000eae00000, 0x00000000eaf00000, 0x00000000eaf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eaf00000 NTAMS 0x00000000eaf00000 space 1024K, 100% used [0x00000000eaf00000, 0x00000000eb000000, 0x00000000eb000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb000000 NTAMS 0x00000000eb000000 space 1024K, 100% used [0x00000000eb000000, 0x00000000eb100000, 0x00000000eb100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb100000 NTAMS 0x00000000eb100000 space 1024K, 100% used [0x00000000eb100000, 0x00000000eb200000, 0x00000000eb200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb200000 NTAMS 0x00000000eb200000 space 1024K, 100% used [0x00000000eb200000, 0x00000000eb300000, 0x00000000eb300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb300000 NTAMS 0x00000000eb300000 space 1024K, 100% used [0x00000000eb300000, 0x00000000eb400000, 0x00000000eb400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb400000 NTAMS 0x00000000eb400000 space 1024K, 100% used [0x00000000eb400000, 0x00000000eb500000, 0x00000000eb500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb500000 NTAMS 0x00000000eb500000 space 1024K, 100% used [0x00000000eb500000, 0x00000000eb600000, 0x00000000eb600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb600000 NTAMS 0x00000000eb600000 space 1024K, 100% used [0x00000000eb600000, 0x00000000eb700000, 0x00000000eb700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb700000 NTAMS 0x00000000eb700000 space 1024K, 100% used [0x00000000eb700000, 0x00000000eb800000, 0x00000000eb800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb800000 NTAMS 0x00000000eb800000 space 1024K, 100% used [0x00000000eb800000, 0x00000000eb900000, 0x00000000eb900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eb900000 NTAMS 0x00000000eb900000 space 1024K, 100% used [0x00000000eb900000, 0x00000000eba00000, 0x00000000eba00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eba00000 NTAMS 0x00000000eba00000 space 1024K, 100% used [0x00000000eba00000, 0x00000000ebb00000, 0x00000000ebb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ebb00000 NTAMS 0x00000000ebb00000 space 1024K, 100% used [0x00000000ebb00000, 0x00000000ebc00000, 0x00000000ebc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ebc00000 NTAMS 0x00000000ebc00000 space 1024K, 100% used [0x00000000ebc00000, 0x00000000ebd00000, 0x00000000ebd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ebd00000 NTAMS 0x00000000ebd00000 space 1024K, 100% used [0x00000000ebd00000, 0x00000000ebe00000, 0x00000000ebe00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ebe00000 NTAMS 0x00000000ebe00000 space 1024K, 100% used [0x00000000ebe00000, 0x00000000ebf00000, 0x00000000ebf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ebf00000 NTAMS 0x00000000ebf00000 space 1024K, 100% used [0x00000000ebf00000, 0x00000000ec000000, 0x00000000ec000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec000000 NTAMS 0x00000000ec000000 space 1024K, 100% used [0x00000000ec000000, 0x00000000ec100000, 0x00000000ec100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec100000 NTAMS 0x00000000ec100000 space 1024K, 100% used [0x00000000ec100000, 0x00000000ec200000, 0x00000000ec200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec200000 NTAMS 0x00000000ec200000 space 1024K, 100% used [0x00000000ec200000, 0x00000000ec300000, 0x00000000ec300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec300000 NTAMS 0x00000000ec300000 space 1024K, 100% used [0x00000000ec300000, 0x00000000ec400000, 0x00000000ec400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec400000 NTAMS 0x00000000ec400000 space 1024K, 100% used [0x00000000ec400000, 0x00000000ec500000, 0x00000000ec500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec500000 NTAMS 0x00000000ec500000 space 1024K, 100% used [0x00000000ec500000, 0x00000000ec600000, 0x00000000ec600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec600000 NTAMS 0x00000000ec600000 space 1024K, 100% used [0x00000000ec600000, 0x00000000ec700000, 0x00000000ec700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec700000 NTAMS 0x00000000ec700000 space 1024K, 100% used [0x00000000ec700000, 0x00000000ec800000, 0x00000000ec800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec800000 NTAMS 0x00000000ec800000 space 1024K, 100% used [0x00000000ec800000, 0x00000000ec900000, 0x00000000ec900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ec900000 NTAMS 0x00000000ec900000 space 1024K, 100% used [0x00000000ec900000, 0x00000000eca00000, 0x00000000eca00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eca00000 NTAMS 0x00000000eca00000 space 1024K, 100% used [0x00000000eca00000, 0x00000000ecb00000, 0x00000000ecb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ecb00000 NTAMS 0x00000000ecb00000 space 1024K, 100% used [0x00000000ecb00000, 0x00000000ecc00000, 0x00000000ecc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ecc00000 NTAMS 0x00000000ecc00000 space 1024K, 100% used [0x00000000ecc00000, 0x00000000ecd00000, 0x00000000ecd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ecd00000 NTAMS 0x00000000ecd00000 space 1024K, 100% used [0x00000000ecd00000, 0x00000000ece00000, 0x00000000ece00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ece00000 NTAMS 0x00000000ece00000 space 1024K, 100% used [0x00000000ece00000, 0x00000000ecf00000, 0x00000000ecf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ecf00000 NTAMS 0x00000000ecf00000 space 1024K, 100% used [0x00000000ecf00000, 0x00000000ed000000, 0x00000000ed000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed000000 NTAMS 0x00000000ed000000 space 1024K, 100% used [0x00000000ed000000, 0x00000000ed100000, 0x00000000ed100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed100000 NTAMS 0x00000000ed100000 space 1024K, 100% used [0x00000000ed100000, 0x00000000ed200000, 0x00000000ed200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed200000 NTAMS 0x00000000ed200000 space 1024K, 100% used [0x00000000ed200000, 0x00000000ed300000, 0x00000000ed300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed300000 NTAMS 0x00000000ed300000 space 1024K, 100% used [0x00000000ed300000, 0x00000000ed400000, 0x00000000ed400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed400000 NTAMS 0x00000000ed400000 space 1024K, 100% used [0x00000000ed400000, 0x00000000ed500000, 0x00000000ed500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed500000 NTAMS 0x00000000ed500000 space 1024K, 100% used [0x00000000ed500000, 0x00000000ed600000, 0x00000000ed600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed600000 NTAMS 0x00000000ed600000 space 1024K, 100% used [0x00000000ed600000, 0x00000000ed700000, 0x00000000ed700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed700000 NTAMS 0x00000000ed700000 space 1024K, 100% used [0x00000000ed700000, 0x00000000ed800000, 0x00000000ed800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed800000 NTAMS 0x00000000ed800000 space 1024K, 100% used [0x00000000ed800000, 0x00000000ed900000, 0x00000000ed900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ed900000 NTAMS 0x00000000ed900000 space 1024K, 100% used [0x00000000ed900000, 0x00000000eda00000, 0x00000000eda00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eda00000 NTAMS 0x00000000eda00000 space 1024K, 100% used [0x00000000eda00000, 0x00000000edb00000, 0x00000000edb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000edb00000 NTAMS 0x00000000edb00000 space 1024K, 100% used [0x00000000edb00000, 0x00000000edc00000, 0x00000000edc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000edc00000 NTAMS 0x00000000edc00000 space 1024K, 100% used [0x00000000edc00000, 0x00000000edd00000, 0x00000000edd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000edd00000 NTAMS 0x00000000edd00000 space 1024K, 100% used [0x00000000edd00000, 0x00000000ede00000, 0x00000000ede00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ede00000 NTAMS 0x00000000ede00000 space 1024K, 100% used [0x00000000ede00000, 0x00000000edf00000, 0x00000000edf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000edf00000 NTAMS 0x00000000edf00000 space 1024K, 100% used [0x00000000edf00000, 0x00000000ee000000, 0x00000000ee000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee000000 NTAMS 0x00000000ee000000 space 1024K, 100% used [0x00000000ee000000, 0x00000000ee100000, 0x00000000ee100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee100000 NTAMS 0x00000000ee100000 space 1024K, 100% used [0x00000000ee100000, 0x00000000ee200000, 0x00000000ee200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee200000 NTAMS 0x00000000ee200000 space 1024K, 100% used [0x00000000ee200000, 0x00000000ee300000, 0x00000000ee300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee300000 NTAMS 0x00000000ee300000 space 1024K, 100% used [0x00000000ee300000, 0x00000000ee400000, 0x00000000ee400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee400000 NTAMS 0x00000000ee400000 space 1024K, 100% used [0x00000000ee400000, 0x00000000ee500000, 0x00000000ee500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee500000 NTAMS 0x00000000ee500000 space 1024K, 100% used [0x00000000ee500000, 0x00000000ee600000, 0x00000000ee600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee600000 NTAMS 0x00000000ee600000 space 1024K, 100% used [0x00000000ee600000, 0x00000000ee700000, 0x00000000ee700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee700000 NTAMS 0x00000000ee700000 space 1024K, 100% used [0x00000000ee700000, 0x00000000ee800000, 0x00000000ee800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee800000 NTAMS 0x00000000ee800000 space 1024K, 100% used [0x00000000ee800000, 0x00000000ee900000, 0x00000000ee900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ee900000 NTAMS 0x00000000ee900000 space 1024K, 100% used [0x00000000ee900000, 0x00000000eea00000, 0x00000000eea00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eea00000 NTAMS 0x00000000eea00000 space 1024K, 100% used [0x00000000eea00000, 0x00000000eeb00000, 0x00000000eeb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eeb00000 NTAMS 0x00000000eeb00000 space 1024K, 100% used [0x00000000eeb00000, 0x00000000eec00000, 0x00000000eec00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eec00000 NTAMS 0x00000000eec00000 space 1024K, 100% used [0x00000000eec00000, 0x00000000eed00000, 0x00000000eed00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eed00000 NTAMS 0x00000000eed00000 space 1024K, 100% used [0x00000000eed00000, 0x00000000eee00000, 0x00000000eee00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eee00000 NTAMS 0x00000000eee00000 space 1024K, 100% used [0x00000000eee00000, 0x00000000eef00000, 0x00000000eef00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eef00000 NTAMS 0x00000000eef00000 space 1024K, 100% used [0x00000000eef00000, 0x00000000ef000000, 0x00000000ef000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef000000 NTAMS 0x00000000ef000000 space 1024K, 100% used [0x00000000ef000000, 0x00000000ef100000, 0x00000000ef100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef100000 NTAMS 0x00000000ef100000 space 1024K, 100% used [0x00000000ef100000, 0x00000000ef200000, 0x00000000ef200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef200000 NTAMS 0x00000000ef200000 space 1024K, 100% used [0x00000000ef200000, 0x00000000ef300000, 0x00000000ef300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef300000 NTAMS 0x00000000ef300000 space 1024K, 100% used [0x00000000ef300000, 0x00000000ef400000, 0x00000000ef400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef400000 NTAMS 0x00000000ef400000 space 1024K, 100% used [0x00000000ef400000, 0x00000000ef500000, 0x00000000ef500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef500000 NTAMS 0x00000000ef500000 space 1024K, 100% used [0x00000000ef500000, 0x00000000ef600000, 0x00000000ef600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef600000 NTAMS 0x00000000ef600000 space 1024K, 100% used [0x00000000ef600000, 0x00000000ef700000, 0x00000000ef700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef700000 NTAMS 0x00000000ef700000 space 1024K, 100% used [0x00000000ef700000, 0x00000000ef800000, 0x00000000ef800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef800000 NTAMS 0x00000000ef800000 space 1024K, 100% used [0x00000000ef800000, 0x00000000ef900000, 0x00000000ef900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ef900000 NTAMS 0x00000000ef900000 space 1024K, 100% used [0x00000000ef900000, 0x00000000efa00000, 0x00000000efa00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000efa00000 NTAMS 0x00000000efa00000 space 1024K, 100% used [0x00000000efa00000, 0x00000000efb00000, 0x00000000efb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000efb00000 NTAMS 0x00000000efb00000 space 1024K, 100% used [0x00000000efb00000, 0x00000000efc00000, 0x00000000efc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000efc00000 NTAMS 0x00000000efc00000 space 1024K, 100% used [0x00000000efc00000, 0x00000000efd00000, 0x00000000efd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000efd00000 NTAMS 0x00000000efd00000 space 1024K, 100% used [0x00000000efd00000, 0x00000000efe00000, 0x00000000efe00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000efe00000 NTAMS 0x00000000efe00000 space 1024K, 100% used [0x00000000efe00000, 0x00000000eff00000, 0x00000000eff00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000eff00000 NTAMS 0x00000000eff00000 space 1024K, 100% used [0x00000000eff00000, 0x00000000f0000000, 0x00000000f0000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0000000 NTAMS 0x00000000f0000000 space 1024K, 100% used [0x00000000f0000000, 0x00000000f0100000, 0x00000000f0100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0100000 NTAMS 0x00000000f0100000 space 1024K, 100% used [0x00000000f0100000, 0x00000000f0200000, 0x00000000f0200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0200000 NTAMS 0x00000000f0200000 space 1024K, 100% used [0x00000000f0200000, 0x00000000f0300000, 0x00000000f0300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0300000 NTAMS 0x00000000f0300000 space 1024K, 100% used [0x00000000f0300000, 0x00000000f0400000, 0x00000000f0400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0400000 NTAMS 0x00000000f0400000 space 1024K, 100% used [0x00000000f0400000, 0x00000000f0500000, 0x00000000f0500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0500000 NTAMS 0x00000000f0500000 space 1024K, 100% used [0x00000000f0500000, 0x00000000f0600000, 0x00000000f0600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0600000 NTAMS 0x00000000f0600000 space 1024K, 100% used [0x00000000f0600000, 0x00000000f0700000, 0x00000000f0700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0700000 NTAMS 0x00000000f0700000 space 1024K, 100% used [0x00000000f0700000, 0x00000000f0800000, 0x00000000f0800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0800000 NTAMS 0x00000000f0800000 space 1024K, 100% used [0x00000000f0800000, 0x00000000f0900000, 0x00000000f0900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0900000 NTAMS 0x00000000f0900000 space 1024K, 100% used [0x00000000f0900000, 0x00000000f0a00000, 0x00000000f0a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0a00000 NTAMS 0x00000000f0a00000 space 1024K, 100% used [0x00000000f0a00000, 0x00000000f0b00000, 0x00000000f0b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0b00000 NTAMS 0x00000000f0b00000 space 1024K, 100% used [0x00000000f0b00000, 0x00000000f0c00000, 0x00000000f0c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0c00000 NTAMS 0x00000000f0c00000 space 1024K, 100% used [0x00000000f0c00000, 0x00000000f0d00000, 0x00000000f0d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0d00000 NTAMS 0x00000000f0d00000 space 1024K, 100% used [0x00000000f0d00000, 0x00000000f0e00000, 0x00000000f0e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0e00000 NTAMS 0x00000000f0e00000 space 1024K, 100% used [0x00000000f0e00000, 0x00000000f0f00000, 0x00000000f0f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f0f00000 NTAMS 0x00000000f0f00000 space 1024K, 100% used [0x00000000f0f00000, 0x00000000f1000000, 0x00000000f1000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1000000 NTAMS 0x00000000f1000000 space 1024K, 100% used [0x00000000f1000000, 0x00000000f1100000, 0x00000000f1100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1100000 NTAMS 0x00000000f1100000 space 1024K, 100% used [0x00000000f1100000, 0x00000000f1200000, 0x00000000f1200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1200000 NTAMS 0x00000000f1200000 space 1024K, 100% used [0x00000000f1200000, 0x00000000f1300000, 0x00000000f1300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1300000 NTAMS 0x00000000f1300000 space 1024K, 100% used [0x00000000f1300000, 0x00000000f1400000, 0x00000000f1400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1400000 NTAMS 0x00000000f1400000 space 1024K, 100% used [0x00000000f1400000, 0x00000000f1500000, 0x00000000f1500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1500000 NTAMS 0x00000000f1500000 space 1024K, 100% used [0x00000000f1500000, 0x00000000f1600000, 0x00000000f1600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1600000 NTAMS 0x00000000f1600000 space 1024K, 100% used [0x00000000f1600000, 0x00000000f1700000, 0x00000000f1700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1700000 NTAMS 0x00000000f1700000 space 1024K, 100% used [0x00000000f1700000, 0x00000000f1800000, 0x00000000f1800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1800000 NTAMS 0x00000000f1800000 space 1024K, 100% used [0x00000000f1800000, 0x00000000f1900000, 0x00000000f1900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1900000 NTAMS 0x00000000f1900000 space 1024K, 100% used [0x00000000f1900000, 0x00000000f1a00000, 0x00000000f1a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1a00000 NTAMS 0x00000000f1a00000 space 1024K, 100% used [0x00000000f1a00000, 0x00000000f1b00000, 0x00000000f1b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1b00000 NTAMS 0x00000000f1b00000 space 1024K, 100% used [0x00000000f1b00000, 0x00000000f1c00000, 0x00000000f1c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1c00000 NTAMS 0x00000000f1c00000 space 1024K, 100% used [0x00000000f1c00000, 0x00000000f1d00000, 0x00000000f1d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1d00000 NTAMS 0x00000000f1d00000 space 1024K, 100% used [0x00000000f1d00000, 0x00000000f1e00000, 0x00000000f1e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1e00000 NTAMS 0x00000000f1e00000 space 1024K, 100% used [0x00000000f1e00000, 0x00000000f1f00000, 0x00000000f1f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f1f00000 NTAMS 0x00000000f1f00000 space 1024K, 100% used [0x00000000f1f00000, 0x00000000f2000000, 0x00000000f2000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2000000 NTAMS 0x00000000f2000000 space 1024K, 100% used [0x00000000f2000000, 0x00000000f2100000, 0x00000000f2100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2100000 NTAMS 0x00000000f2100000 space 1024K, 100% used [0x00000000f2100000, 0x00000000f2200000, 0x00000000f2200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2200000 NTAMS 0x00000000f2200000 space 1024K, 100% used [0x00000000f2200000, 0x00000000f2300000, 0x00000000f2300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2300000 NTAMS 0x00000000f2300000 space 1024K, 100% used [0x00000000f2300000, 0x00000000f2400000, 0x00000000f2400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2400000 NTAMS 0x00000000f2400000 space 1024K, 100% used [0x00000000f2400000, 0x00000000f2500000, 0x00000000f2500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2500000 NTAMS 0x00000000f2500000 space 1024K, 100% used [0x00000000f2500000, 0x00000000f2600000, 0x00000000f2600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2600000 NTAMS 0x00000000f2600000 space 1024K, 100% used [0x00000000f2600000, 0x00000000f2700000, 0x00000000f2700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2700000 NTAMS 0x00000000f2700000 space 1024K, 100% used [0x00000000f2700000, 0x00000000f2800000, 0x00000000f2800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2800000 NTAMS 0x00000000f2800000 space 1024K, 100% used [0x00000000f2800000, 0x00000000f2900000, 0x00000000f2900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2900000 NTAMS 0x00000000f2900000 space 1024K, 100% used [0x00000000f2900000, 0x00000000f2a00000, 0x00000000f2a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2a00000 NTAMS 0x00000000f2a00000 space 1024K, 100% used [0x00000000f2a00000, 0x00000000f2b00000, 0x00000000f2b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2b00000 NTAMS 0x00000000f2b00000 space 1024K, 100% used [0x00000000f2b00000, 0x00000000f2c00000, 0x00000000f2c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2c00000 NTAMS 0x00000000f2c00000 space 1024K, 100% used [0x00000000f2c00000, 0x00000000f2d00000, 0x00000000f2d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2d00000 NTAMS 0x00000000f2d00000 space 1024K, 100% used [0x00000000f2d00000, 0x00000000f2e00000, 0x00000000f2e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2e00000 NTAMS 0x00000000f2e00000 space 1024K, 100% used [0x00000000f2e00000, 0x00000000f2f00000, 0x00000000f2f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f2f00000 NTAMS 0x00000000f2f00000 space 1024K, 100% used [0x00000000f2f00000, 0x00000000f3000000, 0x00000000f3000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3000000 NTAMS 0x00000000f3000000 space 1024K, 100% used [0x00000000f3000000, 0x00000000f3100000, 0x00000000f3100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3100000 NTAMS 0x00000000f3100000 space 1024K, 100% used [0x00000000f3100000, 0x00000000f3200000, 0x00000000f3200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3200000 NTAMS 0x00000000f3200000 space 1024K, 100% used [0x00000000f3200000, 0x00000000f3300000, 0x00000000f3300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3300000 NTAMS 0x00000000f3300000 space 1024K, 100% used [0x00000000f3300000, 0x00000000f3400000, 0x00000000f3400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3400000 NTAMS 0x00000000f3400000 space 1024K, 100% used [0x00000000f3400000, 0x00000000f3500000, 0x00000000f3500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3500000 NTAMS 0x00000000f3500000 space 1024K, 100% used [0x00000000f3500000, 0x00000000f3600000, 0x00000000f3600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3600000 NTAMS 0x00000000f3600000 space 1024K, 100% used [0x00000000f3600000, 0x00000000f3700000, 0x00000000f3700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3700000 NTAMS 0x00000000f3700000 space 1024K, 100% used [0x00000000f3700000, 0x00000000f3800000, 0x00000000f3800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3800000 NTAMS 0x00000000f3800000 space 1024K, 100% used [0x00000000f3800000, 0x00000000f3900000, 0x00000000f3900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3900000 NTAMS 0x00000000f3900000 space 1024K, 100% used [0x00000000f3900000, 0x00000000f3a00000, 0x00000000f3a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3a00000 NTAMS 0x00000000f3a00000 space 1024K, 100% used [0x00000000f3a00000, 0x00000000f3b00000, 0x00000000f3b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3b00000 NTAMS 0x00000000f3b00000 space 1024K, 100% used [0x00000000f3b00000, 0x00000000f3c00000, 0x00000000f3c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3c00000 NTAMS 0x00000000f3c00000 space 1024K, 100% used [0x00000000f3c00000, 0x00000000f3d00000, 0x00000000f3d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3d00000 NTAMS 0x00000000f3d00000 space 1024K, 100% used [0x00000000f3d00000, 0x00000000f3e00000, 0x00000000f3e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3e00000 NTAMS 0x00000000f3e00000 space 1024K, 100% used [0x00000000f3e00000, 0x00000000f3f00000, 0x00000000f3f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f3f00000 NTAMS 0x00000000f3f00000 space 1024K, 100% used [0x00000000f3f00000, 0x00000000f4000000, 0x00000000f4000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4000000 NTAMS 0x00000000f4000000 space 1024K, 100% used [0x00000000f4000000, 0x00000000f4100000, 0x00000000f4100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4100000 NTAMS 0x00000000f4100000 space 1024K, 100% used [0x00000000f4100000, 0x00000000f4200000, 0x00000000f4200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4200000 NTAMS 0x00000000f4200000 space 1024K, 100% used [0x00000000f4200000, 0x00000000f4300000, 0x00000000f4300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4300000 NTAMS 0x00000000f4300000 space 1024K, 100% used [0x00000000f4300000, 0x00000000f4400000, 0x00000000f4400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4400000 NTAMS 0x00000000f4400000 space 1024K, 100% used [0x00000000f4400000, 0x00000000f4500000, 0x00000000f4500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4500000 NTAMS 0x00000000f4500000 space 1024K, 100% used [0x00000000f4500000, 0x00000000f4600000, 0x00000000f4600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4600000 NTAMS 0x00000000f4600000 space 1024K, 100% used [0x00000000f4600000, 0x00000000f4700000, 0x00000000f4700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4700000 NTAMS 0x00000000f4700000 space 1024K, 100% used [0x00000000f4700000, 0x00000000f4800000, 0x00000000f4800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4800000 NTAMS 0x00000000f4800000 space 1024K, 100% used [0x00000000f4800000, 0x00000000f4900000, 0x00000000f4900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4900000 NTAMS 0x00000000f4900000 space 1024K, 100% used [0x00000000f4900000, 0x00000000f4a00000, 0x00000000f4a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4a00000 NTAMS 0x00000000f4a00000 space 1024K, 100% used [0x00000000f4a00000, 0x00000000f4b00000, 0x00000000f4b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4b00000 NTAMS 0x00000000f4b00000 space 1024K, 100% used [0x00000000f4b00000, 0x00000000f4c00000, 0x00000000f4c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4c00000 NTAMS 0x00000000f4c00000 space 1024K, 100% used [0x00000000f4c00000, 0x00000000f4d00000, 0x00000000f4d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4d00000 NTAMS 0x00000000f4d00000 space 1024K, 100% used [0x00000000f4d00000, 0x00000000f4e00000, 0x00000000f4e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4e00000 NTAMS 0x00000000f4e00000 space 1024K, 100% used [0x00000000f4e00000, 0x00000000f4f00000, 0x00000000f4f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f4f00000 NTAMS 0x00000000f4f00000 space 1024K, 100% used [0x00000000f4f00000, 0x00000000f5000000, 0x00000000f5000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5000000 NTAMS 0x00000000f5000000 space 1024K, 100% used [0x00000000f5000000, 0x00000000f5100000, 0x00000000f5100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5100000 NTAMS 0x00000000f5100000 space 1024K, 100% used [0x00000000f5100000, 0x00000000f5200000, 0x00000000f5200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5200000 NTAMS 0x00000000f5200000 space 1024K, 100% used [0x00000000f5200000, 0x00000000f5300000, 0x00000000f5300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5300000 NTAMS 0x00000000f5300000 space 1024K, 100% used [0x00000000f5300000, 0x00000000f5400000, 0x00000000f5400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5400000 NTAMS 0x00000000f5400000 space 1024K, 100% used [0x00000000f5400000, 0x00000000f5500000, 0x00000000f5500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5500000 NTAMS 0x00000000f5500000 space 1024K, 100% used [0x00000000f5500000, 0x00000000f5600000, 0x00000000f5600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5600000 NTAMS 0x00000000f5600000 space 1024K, 100% used [0x00000000f5600000, 0x00000000f5700000, 0x00000000f5700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5700000 NTAMS 0x00000000f5700000 space 1024K, 100% used [0x00000000f5700000, 0x00000000f5800000, 0x00000000f5800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5800000 NTAMS 0x00000000f5800000 space 1024K, 100% used [0x00000000f5800000, 0x00000000f5900000, 0x00000000f5900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5900000 NTAMS 0x00000000f5900000 space 1024K, 100% used [0x00000000f5900000, 0x00000000f5a00000, 0x00000000f5a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5a00000 NTAMS 0x00000000f5a00000 space 1024K, 100% used [0x00000000f5a00000, 0x00000000f5b00000, 0x00000000f5b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5b00000 NTAMS 0x00000000f5b00000 space 1024K, 100% used [0x00000000f5b00000, 0x00000000f5c00000, 0x00000000f5c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5c00000 NTAMS 0x00000000f5c00000 space 1024K, 100% used [0x00000000f5c00000, 0x00000000f5d00000, 0x00000000f5d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5d00000 NTAMS 0x00000000f5d00000 space 1024K, 100% used [0x00000000f5d00000, 0x00000000f5e00000, 0x00000000f5e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5e00000 NTAMS 0x00000000f5e00000 space 1024K, 100% used [0x00000000f5e00000, 0x00000000f5f00000, 0x00000000f5f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f5f00000 NTAMS 0x00000000f5f00000 space 1024K, 100% used [0x00000000f5f00000, 0x00000000f6000000, 0x00000000f6000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6000000 NTAMS 0x00000000f6000000 space 1024K, 100% used [0x00000000f6000000, 0x00000000f6100000, 0x00000000f6100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6100000 NTAMS 0x00000000f6100000 space 1024K, 100% used [0x00000000f6100000, 0x00000000f6200000, 0x00000000f6200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6200000 NTAMS 0x00000000f6200000 space 1024K, 100% used [0x00000000f6200000, 0x00000000f6300000, 0x00000000f6300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6300000 NTAMS 0x00000000f6300000 space 1024K, 100% used [0x00000000f6300000, 0x00000000f6400000, 0x00000000f6400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6400000 NTAMS 0x00000000f6400000 space 1024K, 100% used [0x00000000f6400000, 0x00000000f6500000, 0x00000000f6500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6500000 NTAMS 0x00000000f6500000 space 1024K, 100% used [0x00000000f6500000, 0x00000000f6600000, 0x00000000f6600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6600000 NTAMS 0x00000000f6600000 space 1024K, 100% used [0x00000000f6600000, 0x00000000f6700000, 0x00000000f6700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6700000 NTAMS 0x00000000f6700000 space 1024K, 100% used [0x00000000f6700000, 0x00000000f6800000, 0x00000000f6800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6800000 NTAMS 0x00000000f6800000 space 1024K, 100% used [0x00000000f6800000, 0x00000000f6900000, 0x00000000f6900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6900000 NTAMS 0x00000000f6900000 space 1024K, 100% used [0x00000000f6900000, 0x00000000f6a00000, 0x00000000f6a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6a00000 NTAMS 0x00000000f6a00000 space 1024K, 100% used [0x00000000f6a00000, 0x00000000f6b00000, 0x00000000f6b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6b00000 NTAMS 0x00000000f6b00000 space 1024K, 100% used [0x00000000f6b00000, 0x00000000f6c00000, 0x00000000f6c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6c00000 NTAMS 0x00000000f6c00000 space 1024K, 100% used [0x00000000f6c00000, 0x00000000f6d00000, 0x00000000f6d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6d00000 NTAMS 0x00000000f6d00000 space 1024K, 100% used [0x00000000f6d00000, 0x00000000f6e00000, 0x00000000f6e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6e00000 NTAMS 0x00000000f6e00000 space 1024K, 100% used [0x00000000f6e00000, 0x00000000f6f00000, 0x00000000f6f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f6f00000 NTAMS 0x00000000f6f00000 space 1024K, 100% used [0x00000000f6f00000, 0x00000000f7000000, 0x00000000f7000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7000000 NTAMS 0x00000000f7000000 space 1024K, 100% used [0x00000000f7000000, 0x00000000f7100000, 0x00000000f7100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7100000 NTAMS 0x00000000f7100000 space 1024K, 100% used [0x00000000f7100000, 0x00000000f7200000, 0x00000000f7200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7200000 NTAMS 0x00000000f7200000 space 1024K, 100% used [0x00000000f7200000, 0x00000000f7300000, 0x00000000f7300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7300000 NTAMS 0x00000000f7300000 space 1024K, 100% used [0x00000000f7300000, 0x00000000f7400000, 0x00000000f7400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7400000 NTAMS 0x00000000f7400000 space 1024K, 100% used [0x00000000f7400000, 0x00000000f7500000, 0x00000000f7500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7500000 NTAMS 0x00000000f7500000 space 1024K, 100% used [0x00000000f7500000, 0x00000000f7600000, 0x00000000f7600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7600000 NTAMS 0x00000000f7600000 space 1024K, 100% used [0x00000000f7600000, 0x00000000f7700000, 0x00000000f7700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7700000 NTAMS 0x00000000f7700000 space 1024K, 100% used [0x00000000f7700000, 0x00000000f7800000, 0x00000000f7800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7800000 NTAMS 0x00000000f7800000 space 1024K, 100% used [0x00000000f7800000, 0x00000000f7900000, 0x00000000f7900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7900000 NTAMS 0x00000000f7900000 space 1024K, 100% used [0x00000000f7900000, 0x00000000f7a00000, 0x00000000f7a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7a00000 NTAMS 0x00000000f7a00000 space 1024K, 100% used [0x00000000f7a00000, 0x00000000f7b00000, 0x00000000f7b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7b00000 NTAMS 0x00000000f7b00000 space 1024K, 100% used [0x00000000f7b00000, 0x00000000f7c00000, 0x00000000f7c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7c00000 NTAMS 0x00000000f7c00000 space 1024K, 100% used [0x00000000f7c00000, 0x00000000f7d00000, 0x00000000f7d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7d00000 NTAMS 0x00000000f7d00000 space 1024K, 100% used [0x00000000f7d00000, 0x00000000f7e00000, 0x00000000f7e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7e00000 NTAMS 0x00000000f7e00000 space 1024K, 100% used [0x00000000f7e00000, 0x00000000f7f00000, 0x00000000f7f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f7f00000 NTAMS 0x00000000f7f00000 space 1024K, 100% used [0x00000000f7f00000, 0x00000000f8000000, 0x00000000f8000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8000000 NTAMS 0x00000000f8000000 space 1024K, 100% used [0x00000000f8000000, 0x00000000f8100000, 0x00000000f8100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8100000 NTAMS 0x00000000f8100000 space 1024K, 100% used [0x00000000f8100000, 0x00000000f8200000, 0x00000000f8200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8200000 NTAMS 0x00000000f8200000 space 1024K, 100% used [0x00000000f8200000, 0x00000000f8300000, 0x00000000f8300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8300000 NTAMS 0x00000000f8300000 space 1024K, 100% used [0x00000000f8300000, 0x00000000f8400000, 0x00000000f8400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8400000 NTAMS 0x00000000f8400000 space 1024K, 100% used [0x00000000f8400000, 0x00000000f8500000, 0x00000000f8500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8500000 NTAMS 0x00000000f8500000 space 1024K, 100% used [0x00000000f8500000, 0x00000000f8600000, 0x00000000f8600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8600000 NTAMS 0x00000000f8600000 space 1024K, 100% used [0x00000000f8600000, 0x00000000f8700000, 0x00000000f8700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8700000 NTAMS 0x00000000f8700000 space 1024K, 100% used [0x00000000f8700000, 0x00000000f8800000, 0x00000000f8800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8800000 NTAMS 0x00000000f8800000 space 1024K, 100% used [0x00000000f8800000, 0x00000000f8900000, 0x00000000f8900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8900000 NTAMS 0x00000000f8900000 space 1024K, 100% used [0x00000000f8900000, 0x00000000f8a00000, 0x00000000f8a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8a00000 NTAMS 0x00000000f8a00000 space 1024K, 100% used [0x00000000f8a00000, 0x00000000f8b00000, 0x00000000f8b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8b00000 NTAMS 0x00000000f8b00000 space 1024K, 100% used [0x00000000f8b00000, 0x00000000f8c00000, 0x00000000f8c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8c00000 NTAMS 0x00000000f8c00000 space 1024K, 100% used [0x00000000f8c00000, 0x00000000f8d00000, 0x00000000f8d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8d00000 NTAMS 0x00000000f8d00000 space 1024K, 100% used [0x00000000f8d00000, 0x00000000f8e00000, 0x00000000f8e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8e00000 NTAMS 0x00000000f8e00000 space 1024K, 100% used [0x00000000f8e00000, 0x00000000f8f00000, 0x00000000f8f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f8f00000 NTAMS 0x00000000f8f00000 space 1024K, 100% used [0x00000000f8f00000, 0x00000000f9000000, 0x00000000f9000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9000000 NTAMS 0x00000000f9000000 space 1024K, 100% used [0x00000000f9000000, 0x00000000f9100000, 0x00000000f9100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9100000 NTAMS 0x00000000f9100000 space 1024K, 100% used [0x00000000f9100000, 0x00000000f9200000, 0x00000000f9200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9200000 NTAMS 0x00000000f9200000 space 1024K, 100% used [0x00000000f9200000, 0x00000000f9300000, 0x00000000f9300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9300000 NTAMS 0x00000000f9300000 space 1024K, 100% used [0x00000000f9300000, 0x00000000f9400000, 0x00000000f9400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9400000 NTAMS 0x00000000f9400000 space 1024K, 100% used [0x00000000f9400000, 0x00000000f9500000, 0x00000000f9500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9500000 NTAMS 0x00000000f9500000 space 1024K, 100% used [0x00000000f9500000, 0x00000000f9600000, 0x00000000f9600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9600000 NTAMS 0x00000000f9600000 space 1024K, 100% used [0x00000000f9600000, 0x00000000f9700000, 0x00000000f9700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9700000 NTAMS 0x00000000f9700000 space 1024K, 100% used [0x00000000f9700000, 0x00000000f9800000, 0x00000000f9800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9800000 NTAMS 0x00000000f9800000 space 1024K, 100% used [0x00000000f9800000, 0x00000000f9900000, 0x00000000f9900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9900000 NTAMS 0x00000000f9900000 space 1024K, 100% used [0x00000000f9900000, 0x00000000f9a00000, 0x00000000f9a00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9a00000 NTAMS 0x00000000f9a00000 space 1024K, 100% used [0x00000000f9a00000, 0x00000000f9b00000, 0x00000000f9b00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9b00000 NTAMS 0x00000000f9b00000 space 1024K, 100% used [0x00000000f9b00000, 0x00000000f9c00000, 0x00000000f9c00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9c00000 NTAMS 0x00000000f9c00000 space 1024K, 100% used [0x00000000f9c00000, 0x00000000f9d00000, 0x00000000f9d00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9d00000 NTAMS 0x00000000f9d00000 space 1024K, 100% used [0x00000000f9d00000, 0x00000000f9e00000, 0x00000000f9e00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9e00000 NTAMS 0x00000000f9e00000 space 1024K, 100% used [0x00000000f9e00000, 0x00000000f9f00000, 0x00000000f9f00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000f9f00000 NTAMS 0x00000000f9f00000 space 1024K, 100% used [0x00000000f9f00000, 0x00000000fa000000, 0x00000000fa000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa000000 NTAMS 0x00000000fa000000 space 1024K, 100% used [0x00000000fa000000, 0x00000000fa100000, 0x00000000fa100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa100000 NTAMS 0x00000000fa100000 space 1024K, 100% used [0x00000000fa100000, 0x00000000fa200000, 0x00000000fa200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa200000 NTAMS 0x00000000fa200000 space 1024K, 100% used [0x00000000fa200000, 0x00000000fa300000, 0x00000000fa300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa300000 NTAMS 0x00000000fa300000 space 1024K, 100% used [0x00000000fa300000, 0x00000000fa400000, 0x00000000fa400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa400000 NTAMS 0x00000000fa400000 space 1024K, 100% used [0x00000000fa400000, 0x00000000fa500000, 0x00000000fa500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa500000 NTAMS 0x00000000fa500000 space 1024K, 100% used [0x00000000fa500000, 0x00000000fa600000, 0x00000000fa600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa600000 NTAMS 0x00000000fa600000 space 1024K, 100% used [0x00000000fa600000, 0x00000000fa700000, 0x00000000fa700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa700000 NTAMS 0x00000000fa700000 space 1024K, 100% used [0x00000000fa700000, 0x00000000fa800000, 0x00000000fa800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa800000 NTAMS 0x00000000fa800000 space 1024K, 100% used [0x00000000fa800000, 0x00000000fa900000, 0x00000000fa900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fa900000 NTAMS 0x00000000fa900000 space 1024K, 100% used [0x00000000fa900000, 0x00000000faa00000, 0x00000000faa00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000faa00000 NTAMS 0x00000000faa00000 space 1024K, 100% used [0x00000000faa00000, 0x00000000fab00000, 0x00000000fab00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fab00000 NTAMS 0x00000000fab00000 space 1024K, 100% used [0x00000000fab00000, 0x00000000fac00000, 0x00000000fac00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fac00000 NTAMS 0x00000000fac00000 space 1024K, 100% used [0x00000000fac00000, 0x00000000fad00000, 0x00000000fad00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fad00000 NTAMS 0x00000000fad00000 space 1024K, 100% used [0x00000000fad00000, 0x00000000fae00000, 0x00000000fae00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fae00000 NTAMS 0x00000000fae00000 space 1024K, 100% used [0x00000000fae00000, 0x00000000faf00000, 0x00000000faf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000faf00000 NTAMS 0x00000000faf00000 space 1024K, 100% used [0x00000000faf00000, 0x00000000fb000000, 0x00000000fb000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb000000 NTAMS 0x00000000fb000000 space 1024K, 100% used [0x00000000fb000000, 0x00000000fb100000, 0x00000000fb100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb100000 NTAMS 0x00000000fb100000 space 1024K, 100% used [0x00000000fb100000, 0x00000000fb200000, 0x00000000fb200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb200000 NTAMS 0x00000000fb200000 space 1024K, 100% used [0x00000000fb200000, 0x00000000fb300000, 0x00000000fb300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb300000 NTAMS 0x00000000fb300000 space 1024K, 100% used [0x00000000fb300000, 0x00000000fb400000, 0x00000000fb400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb400000 NTAMS 0x00000000fb400000 space 1024K, 100% used [0x00000000fb400000, 0x00000000fb500000, 0x00000000fb500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb500000 NTAMS 0x00000000fb500000 space 1024K, 100% used [0x00000000fb500000, 0x00000000fb600000, 0x00000000fb600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb600000 NTAMS 0x00000000fb600000 space 1024K, 100% used [0x00000000fb600000, 0x00000000fb700000, 0x00000000fb700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb700000 NTAMS 0x00000000fb700000 space 1024K, 100% used [0x00000000fb700000, 0x00000000fb800000, 0x00000000fb800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb800000 NTAMS 0x00000000fb800000 space 1024K, 100% used [0x00000000fb800000, 0x00000000fb900000, 0x00000000fb900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fb900000 NTAMS 0x00000000fb900000 space 1024K, 100% used [0x00000000fb900000, 0x00000000fba00000, 0x00000000fba00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fba00000 NTAMS 0x00000000fba00000 space 1024K, 100% used [0x00000000fba00000, 0x00000000fbb00000, 0x00000000fbb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fbb00000 NTAMS 0x00000000fbb00000 space 1024K, 100% used [0x00000000fbb00000, 0x00000000fbc00000, 0x00000000fbc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fbc00000 NTAMS 0x00000000fbc00000 space 1024K, 100% used [0x00000000fbc00000, 0x00000000fbd00000, 0x00000000fbd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fbd00000 NTAMS 0x00000000fbd00000 space 1024K, 100% used [0x00000000fbd00000, 0x00000000fbe00000, 0x00000000fbe00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fbe00000 NTAMS 0x00000000fbe00000 space 1024K, 100% used [0x00000000fbe00000, 0x00000000fbf00000, 0x00000000fbf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fbf00000 NTAMS 0x00000000fbf00000 space 1024K, 100% used [0x00000000fbf00000, 0x00000000fc000000, 0x00000000fc000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc000000 NTAMS 0x00000000fc000000 space 1024K, 100% used [0x00000000fc000000, 0x00000000fc100000, 0x00000000fc100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc100000 NTAMS 0x00000000fc100000 space 1024K, 100% used [0x00000000fc100000, 0x00000000fc200000, 0x00000000fc200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc200000 NTAMS 0x00000000fc200000 space 1024K, 100% used [0x00000000fc200000, 0x00000000fc300000, 0x00000000fc300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc300000 NTAMS 0x00000000fc300000 space 1024K, 100% used [0x00000000fc300000, 0x00000000fc400000, 0x00000000fc400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc400000 NTAMS 0x00000000fc400000 space 1024K, 100% used [0x00000000fc400000, 0x00000000fc500000, 0x00000000fc500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc500000 NTAMS 0x00000000fc500000 space 1024K, 100% used [0x00000000fc500000, 0x00000000fc600000, 0x00000000fc600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc600000 NTAMS 0x00000000fc600000 space 1024K, 100% used [0x00000000fc600000, 0x00000000fc700000, 0x00000000fc700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc700000 NTAMS 0x00000000fc700000 space 1024K, 100% used [0x00000000fc700000, 0x00000000fc800000, 0x00000000fc800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc800000 NTAMS 0x00000000fc800000 space 1024K, 100% used [0x00000000fc800000, 0x00000000fc900000, 0x00000000fc900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fc900000 NTAMS 0x00000000fc900000 space 1024K, 100% used [0x00000000fc900000, 0x00000000fca00000, 0x00000000fca00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fca00000 NTAMS 0x00000000fca00000 space 1024K, 100% used [0x00000000fca00000, 0x00000000fcb00000, 0x00000000fcb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fcb00000 NTAMS 0x00000000fcb00000 space 1024K, 100% used [0x00000000fcb00000, 0x00000000fcc00000, 0x00000000fcc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fcc00000 NTAMS 0x00000000fcc00000 space 1024K, 100% used [0x00000000fcc00000, 0x00000000fcd00000, 0x00000000fcd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fcd00000 NTAMS 0x00000000fcd00000 space 1024K, 100% used [0x00000000fcd00000, 0x00000000fce00000, 0x00000000fce00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fce00000 NTAMS 0x00000000fce00000 space 1024K, 100% used [0x00000000fce00000, 0x00000000fcf00000, 0x00000000fcf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fcf00000 NTAMS 0x00000000fcf00000 space 1024K, 100% used [0x00000000fcf00000, 0x00000000fd000000, 0x00000000fd000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd000000 NTAMS 0x00000000fd000000 space 1024K, 100% used [0x00000000fd000000, 0x00000000fd100000, 0x00000000fd100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd100000 NTAMS 0x00000000fd100000 space 1024K, 100% used [0x00000000fd100000, 0x00000000fd200000, 0x00000000fd200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd200000 NTAMS 0x00000000fd200000 space 1024K, 100% used [0x00000000fd200000, 0x00000000fd300000, 0x00000000fd300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd300000 NTAMS 0x00000000fd300000 space 1024K, 100% used [0x00000000fd300000, 0x00000000fd400000, 0x00000000fd400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd400000 NTAMS 0x00000000fd400000 space 1024K, 100% used [0x00000000fd400000, 0x00000000fd500000, 0x00000000fd500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd500000 NTAMS 0x00000000fd500000 space 1024K, 100% used [0x00000000fd500000, 0x00000000fd600000, 0x00000000fd600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd600000 NTAMS 0x00000000fd600000 space 1024K, 100% used [0x00000000fd600000, 0x00000000fd700000, 0x00000000fd700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd700000 NTAMS 0x00000000fd700000 space 1024K, 100% used [0x00000000fd700000, 0x00000000fd800000, 0x00000000fd800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd800000 NTAMS 0x00000000fd800000 space 1024K, 100% used [0x00000000fd800000, 0x00000000fd900000, 0x00000000fd900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fd900000 NTAMS 0x00000000fd900000 space 1024K, 100% used [0x00000000fd900000, 0x00000000fda00000, 0x00000000fda00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fda00000 NTAMS 0x00000000fda00000 space 1024K, 100% used [0x00000000fda00000, 0x00000000fdb00000, 0x00000000fdb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fdb00000 NTAMS 0x00000000fdb00000 space 1024K, 100% used [0x00000000fdb00000, 0x00000000fdc00000, 0x00000000fdc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fdc00000 NTAMS 0x00000000fdc00000 space 1024K, 100% used [0x00000000fdc00000, 0x00000000fdd00000, 0x00000000fdd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fdd00000 NTAMS 0x00000000fdd00000 space 1024K, 100% used [0x00000000fdd00000, 0x00000000fde00000, 0x00000000fde00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fde00000 NTAMS 0x00000000fde00000 space 1024K, 100% used [0x00000000fde00000, 0x00000000fdf00000, 0x00000000fdf00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fdf00000 NTAMS 0x00000000fdf00000 space 1024K, 100% used [0x00000000fdf00000, 0x00000000fe000000, 0x00000000fe000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe000000 NTAMS 0x00000000fe000000 space 1024K, 100% used [0x00000000fe000000, 0x00000000fe100000, 0x00000000fe100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe100000 NTAMS 0x00000000fe100000 space 1024K, 100% used [0x00000000fe100000, 0x00000000fe200000, 0x00000000fe200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe200000 NTAMS 0x00000000fe200000 space 1024K, 100% used [0x00000000fe200000, 0x00000000fe300000, 0x00000000fe300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe300000 NTAMS 0x00000000fe300000 space 1024K, 100% used [0x00000000fe300000, 0x00000000fe400000, 0x00000000fe400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe400000 NTAMS 0x00000000fe400000 space 1024K, 100% used [0x00000000fe400000, 0x00000000fe500000, 0x00000000fe500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe500000 NTAMS 0x00000000fe500000 space 1024K, 100% used [0x00000000fe500000, 0x00000000fe600000, 0x00000000fe600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe600000 NTAMS 0x00000000fe600000 space 1024K, 100% used [0x00000000fe600000, 0x00000000fe700000, 0x00000000fe700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe700000 NTAMS 0x00000000fe700000 space 1024K, 100% used [0x00000000fe700000, 0x00000000fe800000, 0x00000000fe800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe800000 NTAMS 0x00000000fe800000 space 1024K, 100% used [0x00000000fe800000, 0x00000000fe900000, 0x00000000fe900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fe900000 NTAMS 0x00000000fe900000 space 1024K, 100% used [0x00000000fe900000, 0x00000000fea00000, 0x00000000fea00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fea00000 NTAMS 0x00000000fea00000 space 1024K, 100% used [0x00000000fea00000, 0x00000000feb00000, 0x00000000feb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000feb00000 NTAMS 0x00000000feb00000 space 1024K, 100% used [0x00000000feb00000, 0x00000000fec00000, 0x00000000fec00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fec00000 NTAMS 0x00000000fec00000 space 1024K, 100% used [0x00000000fec00000, 0x00000000fed00000, 0x00000000fed00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fed00000 NTAMS 0x00000000fed00000 space 1024K, 100% used [0x00000000fed00000, 0x00000000fee00000, 0x00000000fee00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fee00000 NTAMS 0x00000000fee00000 space 1024K, 100% used [0x00000000fee00000, 0x00000000fef00000, 0x00000000fef00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fef00000 NTAMS 0x00000000fef00000 space 1024K, 100% used [0x00000000fef00000, 0x00000000ff000000, 0x00000000ff000000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff000000 NTAMS 0x00000000ff000000 space 1024K, 100% used [0x00000000ff000000, 0x00000000ff100000, 0x00000000ff100000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff100000 NTAMS 0x00000000ff100000 space 1024K, 100% used [0x00000000ff100000, 0x00000000ff200000, 0x00000000ff200000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff200000 NTAMS 0x00000000ff200000 space 1024K, 100% used [0x00000000ff200000, 0x00000000ff300000, 0x00000000ff300000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff300000 NTAMS 0x00000000ff300000 space 1024K, 100% used [0x00000000ff300000, 0x00000000ff400000, 0x00000000ff400000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff400000 NTAMS 0x00000000ff400000 space 1024K, 100% used [0x00000000ff400000, 0x00000000ff500000, 0x00000000ff500000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff500000 NTAMS 0x00000000ff500000 space 1024K, 100% used [0x00000000ff500000, 0x00000000ff600000, 0x00000000ff600000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff600000 NTAMS 0x00000000ff600000 space 1024K, 100% used [0x00000000ff600000, 0x00000000ff700000, 0x00000000ff700000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff700000 NTAMS 0x00000000ff700000 space 1024K, 100% used [0x00000000ff700000, 0x00000000ff800000, 0x00000000ff800000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff800000 NTAMS 0x00000000ff800000 space 1024K, 100% used [0x00000000ff800000, 0x00000000ff900000, 0x00000000ff900000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ff900000 NTAMS 0x00000000ff900000 space 1024K, 100% used [0x00000000ff900000, 0x00000000ffa00000, 0x00000000ffa00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ffa00000 NTAMS 0x00000000ffa00000 space 1024K, 100% used [0x00000000ffa00000, 0x00000000ffb00000, 0x00000000ffb00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ffb00000 NTAMS 0x00000000ffb00000 space 1024K, 100% used [0x00000000ffb00000, 0x00000000ffc00000, 0x00000000ffc00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ffc00000 NTAMS 0x00000000ffc00000 space 1024K, 100% used [0x00000000ffc00000, 0x00000000ffd00000, 0x00000000ffd00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ffd00000 NTAMS 0x00000000ffd00000 space 1024K, 100% used [0x00000000ffd00000, 0x00000000ffe00000, 0x00000000ffe00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000ffe00000 NTAMS 0x00000000ffe00000 space 1024K, 100% used [0x00000000ffe00000, 0x00000000fff00000, 0x00000000fff00000)</span><br><span class="line">    CS Y    TS    41 PTAMS 0x00000000fff00000 NTAMS 0x00000000fff00000 space 1024K, 100% used [0x00000000fff00000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line"></span><br><span class="line">Card table byte_map: [0x00007f711c8fc000,0x00007f711ccfd000] byte_map_base: 0x00007f711c4fc000</span><br><span class="line"></span><br><span class="line">Marking Bits (Prev, Next): (CMBitMap*) 0x00007f712c035238, (CMBitMap*) 0x00007f712c0352f0</span><br><span class="line"> Prev Bits: [0x00007f70f5fff000, 0x00007f70f7fff000)</span><br><span class="line"> Next Bits: [0x00007f70f3ffe000, 0x00007f70f5ffe000)</span><br><span class="line"></span><br><span class="line">Polling page: 0x00007f7133782000</span><br><span class="line"></span><br><span class="line">CodeCache: size=245760Kb used=25164Kb max_used=25322Kb free=220595Kb</span><br><span class="line"> bounds [0x00007f711d000000, 0x00007f711e910000, 0x00007f712c000000]</span><br><span class="line"> total_blobs=7775 nmethods=7195 adapters=493</span><br><span class="line"> compilation: enabled</span><br><span class="line"></span><br><span class="line">Compilation events (10 events):</span><br><span class="line">Event: 21659.199 Thread 0x00007f712c86c800 9296       4       com.mysql.cj.QueryInfo::getQueryReturnType (398 bytes)</span><br><span class="line">Event: 21659.221 Thread 0x00007f712c86a000 nmethod 9295 0x00007f711e4310d0 code [0x00007f711e431280, 0x00007f711e431c80]</span><br><span class="line">Event: 21659.261 Thread 0x00007f712c86c800 nmethod 9296 0x00007f711e01d150 code [0x00007f711e01d4a0, 0x00007f711e01e7c0]</span><br><span class="line">Event: 21694.537 Thread 0x00007f712c86a000 9297   !   4       org.apache.catalina.core.StandardContext::getLoader (38 bytes)</span><br><span class="line">Event: 21694.552 Thread 0x00007f712c86a000 nmethod 9297 0x00007f711e6aadd0 code [0x00007f711e6aaf80, 0x00007f711e6ab608]</span><br><span class="line">Event: 21776.121 Thread 0x00007f712c86c800 9298       4       java.util.Formatter$FormatSpecifier::localizedMagnitude (327 bytes)</span><br><span class="line">Event: 21776.167 Thread 0x00007f712c86c800 nmethod 9298 0x00007f711e196390 code [0x00007f711e1965c0, 0x00007f711e197530]</span><br><span class="line">Event: 21776.195 Thread 0x00007f712c86a000 9299   !   4       java.util.Calendar::clone (108 bytes)</span><br><span class="line">Event: 21776.223 Thread 0x00007f712c86a000 nmethod 9299 0x00007f711e01c1d0 code [0x00007f711e01c360, 0x00007f711e01ce28]</span><br><span class="line">Event: 21839.573 Thread 0x00007f712c86c800 9300   !   4       com.mysql.cj.NativeSession::execSQL (577 bytes)</span><br><span class="line"></span><br><span class="line">GC Heap History (10 events):</span><br><span class="line">Event: 15656.667 GC heap before</span><br><span class="line">&#123;Heap before GC invocations=16 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 1278990K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 1228 young (1257472K), 6 survivors (6144K)</span><br><span class="line"> Metaspace       used 60137K, capacity 63032K, committed 63104K, reserved 1103872K</span><br><span class="line">  class space    used 7252K, capacity 7750K, committed 7808K, reserved 1048576K</span><br><span class="line">Event: 15656.692 GC heap after</span><br><span class="line">Heap after GC invocations=17 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 27150K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 6 young (6144K), 6 survivors (6144K)</span><br><span class="line"> Metaspace       used 60137K, capacity 63032K, committed 63104K, reserved 1103872K</span><br><span class="line">  class space    used 7252K, capacity 7750K, committed 7808K, reserved 1048576K</span><br><span class="line">&#125;</span><br><span class="line">Event: 17097.362 GC heap before</span><br><span class="line">&#123;Heap before GC invocations=17 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 1278478K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 1228 young (1257472K), 6 survivors (6144K)</span><br><span class="line"> Metaspace       used 60151K, capacity 63040K, committed 63104K, reserved 1103872K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">Event: 17097.389 GC heap after</span><br><span class="line">Heap after GC invocations=18 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 27150K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 6 young (6144K), 6 survivors (6144K)</span><br><span class="line"> Metaspace       used 60151K, capacity 63040K, committed 63104K, reserved 1103872K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">&#125;</span><br><span class="line">Event: 18538.173 GC heap before</span><br><span class="line">&#123;Heap before GC invocations=18 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 1278478K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 1228 young (1257472K), 6 survivors (6144K)</span><br><span class="line"> Metaspace       used 60163K, capacity 63104K, committed 63360K, reserved 1105920K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">Event: 18538.197 GC heap after</span><br><span class="line">Heap after GC invocations=19 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 27662K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 6 young (6144K), 6 survivors (6144K)</span><br><span class="line"> Metaspace       used 60163K, capacity 63104K, committed 63360K, reserved 1105920K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">&#125;</span><br><span class="line">Event: 19978.293 GC heap before</span><br><span class="line">&#123;Heap before GC invocations=19 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 1278990K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 1228 young (1257472K), 6 survivors (6144K)</span><br><span class="line"> Metaspace       used 60174K, capacity 63104K, committed 63360K, reserved 1105920K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">Event: 19978.320 GC heap after</span><br><span class="line">Heap after GC invocations=20 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 27102K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 3 young (3072K), 3 survivors (3072K)</span><br><span class="line"> Metaspace       used 60174K, capacity 63104K, committed 63360K, reserved 1105920K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">&#125;</span><br><span class="line">Event: 21476.125 GC heap before</span><br><span class="line">&#123;Heap before GC invocations=20 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 1281502K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 1228 young (1257472K), 3 survivors (3072K)</span><br><span class="line"> Metaspace       used 60202K, capacity 63104K, committed 63360K, reserved 1105920K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">Event: 21476.145 GC heap after</span><br><span class="line">Heap after GC invocations=21 (full 0):</span><br><span class="line"> garbage-first heap   total 2097152K, used 29373K [0x0000000080000000, 0x0000000100000000, 0x0000000100000000)</span><br><span class="line">  region size 1024K, 3 young (3072K), 3 survivors (3072K)</span><br><span class="line"> Metaspace       used 60202K, capacity 63104K, committed 63360K, reserved 1105920K</span><br><span class="line">  class space    used 7254K, capacity 7752K, committed 7808K, reserved 1048576K</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Deoptimization events (10 events):</span><br><span class="line">Event: 7136.139 Thread 0x00007f712e451000 Uncommon trap: reason=unreached action=reinterpret pc=0x00007f711e555ccc method=sun.reflect.Reflection.verifyMemberAccess(Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/Object;I)Z @ 8</span><br><span class="line">Event: 7136.139 Thread 0x00007f712e451000 Uncommon trap: reason=class_check action=maybe_recompile pc=0x00007f711d7be900 method=java.lang.Throwable.&lt;init&gt;(Ljava/lang/String;Ljava/lang/Throwable;)V @ 24</span><br><span class="line">Event: 7136.139 Thread 0x00007f712e451000 Uncommon trap: reason=unloaded action=reinterpret pc=0x00007f711d62fd00 method=com.mysql.cj.NativeSession.checkClosed()V @ 55</span><br><span class="line">Event: 7385.120 Thread 0x00007f712e453000 Uncommon trap: reason=unloaded action=reinterpret pc=0x00007f711e24f8b0 method=java.util.Collections.unmodifiableList(Ljava/util/List;)Ljava/util/List; @ 18</span><br><span class="line">Event: 8036.746 Thread 0x00007f712d8c8000 Uncommon trap: reason=unreached action=reinterpret pc=0x00007f711e603e70 method=java.util.concurrent.locks.AbstractQueuedSynchronizer.isOnSyncQueue(Ljava/util/concurrent/locks/AbstractQueuedSynchronizer$Node;)Z @ 13</span><br><span class="line">Event: 8936.124 Thread 0x00007f712e460800 Uncommon trap: reason=class_check action=maybe_recompile pc=0x00007f711d7be900 method=java.lang.Throwable.&lt;init&gt;(Ljava/lang/String;Ljava/lang/Throwable;)V @ 24</span><br><span class="line">Event: 8936.126 Thread 0x00007f712e455000 Uncommon trap: reason=class_check action=maybe_recompile pc=0x00007f711d7be900 method=java.lang.Throwable.&lt;init&gt;(Ljava/lang/String;Ljava/lang/Throwable;)V @ 24</span><br><span class="line">Event: 10379.130 Thread 0x00007f712d8c8000 Uncommon trap: reason=unreached action=reinterpret pc=0x00007f711e80bc94 method=java.util.concurrent.locks.AbstractQueuedSynchronizer.findNodeFromTail(Ljava/util/concurrent/locks/AbstractQueuedSynchronizer$Node;)Z @ 7</span><br><span class="line">Event: 14276.124 Thread 0x00007f712e453000 Uncommon trap: reason=null_check action=make_not_entrant pc=0x00007f711d92b014 method=java.lang.Class.reflectionData()Ljava/lang/Class$ReflectionData; @ 24</span><br><span class="line">Event: 18896.120 Thread 0x00007f712e47c800 Uncommon trap: reason=unreached action=reinterpret pc=0x00007f711e6ab5ec method=java.util.TreeMap.deleteEntry(Ljava/util/TreeMap$Entry;)V @ 92</span><br><span class="line"></span><br><span class="line">Internal exceptions (10 events):</span><br><span class="line">Event: 7136.137 Thread 0x00007f712e451000 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000f63fa6b8) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 7136.137 Thread 0x00007f712e451000 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000f63fb088) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 7136.137 Thread 0x00007f712e451000 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000f6291fc8) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 7136.137 Thread 0x00007f712e451000 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000f6292948) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 7136.138 Thread 0x00007f712e451000 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000f62a72f0) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 7136.138 Thread 0x00007f712e451000 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000f62a7cb0) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 14276.124 Thread 0x00007f712e453000 Implicit null exception at 0x00007f711d92a4f9 to 0x00007f711d92b005</span><br><span class="line">Event: 16004.325 Thread 0x00007f712da25800 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000edc5b778) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 16004.325 Thread 0x00007f712da25800 Exception &lt;a &#x27;java/security/PrivilegedActionException&#x27;&gt; (0x00000000edc5bcd8) thrown at [/HUDSON/workspace/8-2-build-linux-amd64/jdk8u31/2394/hotspot/src/share/vm/prims/jvm.cpp, line 1312]</span><br><span class="line">Event: 18896.120 Thread 0x00007f712e47c800 Implicit null exception at 0x00007f711e6ab00c to 0x00007f711e6ab5bd</span><br><span class="line"></span><br><span class="line">Events (10 events):</span><br><span class="line">Event: 21536.127 Executing VM operation: RevokeBias done</span><br><span class="line">Event: 21599.200 Executing VM operation: BulkRevokeBias</span><br><span class="line">Event: 21599.202 Executing VM operation: BulkRevokeBias done</span><br><span class="line">Event: 21656.135 Thread 0x00007f712c86e800 flushing nmethod 0x00007f711e2644d0</span><br><span class="line">Event: 21659.223 Thread 0x00007f712c86a000 flushing nmethod 0x00007f711e632790</span><br><span class="line">Event: 21659.224 Thread 0x00007f712c86a000 flushing nmethod 0x00007f711e6aaad0</span><br><span class="line">Event: 21719.204 Executing VM operation: BulkRevokeBias</span><br><span class="line">Event: 21719.205 Executing VM operation: BulkRevokeBias done</span><br><span class="line">Event: 21839.565 Executing VM operation: BulkRevokeBias</span><br><span class="line">Event: 21839.566 Executing VM operation: BulkRevokeBias done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Dynamic libraries:</span><br><span class="line">00400000-00401000 r-xp 00000000 fd:00 661361                             /usr/java/jdk1.8.0_31/bin/java</span><br><span class="line">00600000-00601000 rw-p 00000000 fd:00 661361                             /usr/java/jdk1.8.0_31/bin/java</span><br><span class="line">01791000-01c1d000 rw-p 00000000 00:00 0                                  [heap]</span><br><span class="line">80000000-1007a0000 rw-p 00000000 00:00 0 </span><br><span class="line">1007a0000-140000000 ---p 00000000 00:00 0 </span><br><span class="line">7f708e9f6000-7f708ea36000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708ea36000-7f708ebf9000 ---p 00000000 00:00 0 </span><br><span class="line">7f708ebf9000-7f708ecf7000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708ecf7000-7f708ecfa000 ---p 00000000 00:00 0 </span><br><span class="line">7f708ecfa000-7f708edf8000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708edf8000-7f708edfb000 ---p 00000000 00:00 0 </span><br><span class="line">7f708edfb000-7f708f0f9000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708f0f9000-7f708f2f9000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708f2f9000-7f708f2fc000 ---p 00000000 00:00 0 </span><br><span class="line">7f708f2fc000-7f708f3fa000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708f3fa000-7f708f3fd000 ---p 00000000 00:00 0 </span><br><span class="line">7f708f3fd000-7f708f6fb000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708f6fb000-7f708f6fe000 ---p 00000000 00:00 0 </span><br><span class="line">7f708f6fe000-7f708f7fc000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708f7fc000-7f708f7ff000 ---p 00000000 00:00 0 </span><br><span class="line">7f708f7ff000-7f708fafd000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708fafd000-7f708fb00000 ---p 00000000 00:00 0 </span><br><span class="line">7f708fb00000-7f708fbfe000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708fbfe000-7f708fc01000 ---p 00000000 00:00 0 </span><br><span class="line">7f708fc01000-7f708fcff000 rw-p 00000000 00:00 0 </span><br><span class="line">7f708fcff000-7f708fd02000 ---p 00000000 00:00 0 </span><br><span class="line">7f708fd02000-7f7090000000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7090000000-7f709027d000 rw-p 00000000 00:00 0 </span><br><span class="line">7f709027d000-7f7094000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7094000000-7f7094043000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7094043000-7f7098000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7098000000-7f709804c000 rw-p 00000000 00:00 0 </span><br><span class="line">7f709804c000-7f709c000000 ---p 00000000 00:00 0 </span><br><span class="line">7f709c000000-7f709c04a000 rw-p 00000000 00:00 0 </span><br><span class="line">7f709c04a000-7f70a0000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70a0000000-7f70a004a000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70a004a000-7f70a4000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70a4000000-7f70a4033000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70a4033000-7f70a8000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70a8000000-7f70a8046000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70a8046000-7f70ac000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ac000000-7f70ac021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ac021000-7f70b0000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70b0000000-7f70b0640000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70b0640000-7f70b4000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70b4000000-7f70b4280000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70b4280000-7f70b8000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70b8000000-7f70b8957000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70b8957000-7f70bc000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70bc000000-7f70bc0a9000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70bc0a9000-7f70c0000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70c0000000-7f70c1bc7000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70c1bc7000-7f70c4000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70c4000000-7f70c60aa000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70c60aa000-7f70c8000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70c8000000-7f70c806d000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70c806d000-7f70cc000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cc0a8000-7f70cc0ab000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cc0ab000-7f70cc1a9000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cc1a9000-7f70cc1ac000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cc1ac000-7f70cc4aa000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cc4aa000-7f70cc4ad000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cc4ad000-7f70cc5ab000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cc5ab000-7f70cc5ae000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cc5ae000-7f70cc6ac000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cc6ac000-7f70cc6af000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cc6af000-7f70cc7ad000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cc7ad000-7f70cc7b0000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cc7b0000-7f70ccaae000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ccaae000-7f70ccab1000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ccab1000-7f70ccbaf000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ccbaf000-7f70ccbb2000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ccbb2000-7f70cccb0000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cccb0000-7f70cccb3000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cccb3000-7f70ccdb1000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ccdb1000-7f70ccdb4000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ccdb4000-7f70cceb2000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cceb2000-7f70cceb5000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cceb5000-7f70ccfb3000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ccfb3000-7f70ccfb6000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ccfb6000-7f70cd0b4000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd0b4000-7f70cd0b7000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd0b7000-7f70cd1b5000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd1b5000-7f70cd1b8000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd1b8000-7f70cd2b6000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd2b6000-7f70cd2b9000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd2b9000-7f70cd3b7000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd3b7000-7f70cd3ba000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd3ba000-7f70cd4b8000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd4b8000-7f70cd4bb000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd4bb000-7f70cd5b9000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd5b9000-7f70cd5bc000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd5bc000-7f70cd6ba000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd6ba000-7f70cd6bd000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd6bd000-7f70cd7bb000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd7bb000-7f70cd7be000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd7be000-7f70cd8bc000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd8bc000-7f70cd8bf000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd8bf000-7f70cd9bd000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cd9bd000-7f70cd9c0000 ---p 00000000 00:00 0 </span><br><span class="line">7f70cd9c0000-7f70cdabe000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70cdabe000-7f70d4000000 r--p 00000000 fd:00 805307884                  /usr/lib/locale/locale-archive</span><br><span class="line">7f70d4000000-7f70d494a000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70d494a000-7f70d8000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70d8000000-7f70d808b000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70d808b000-7f70dc000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70dc000000-7f70dc15d000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70dc15d000-7f70e0000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e0000000-7f70e0085000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e0085000-7f70e4000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e4000000-7f70e4021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e4021000-7f70e8000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e805c000-7f70e805f000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e805f000-7f70e815d000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e815d000-7f70e8160000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e8160000-7f70e825e000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e825e000-7f70e8261000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e8261000-7f70e835f000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e835f000-7f70e8362000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e8362000-7f70e8460000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e8460000-7f70e8463000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e8463000-7f70e8761000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e8761000-7f70e8961000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e8961000-7f70e8b61000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e8b61000-7f70e8b64000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e8b64000-7f70e8e62000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e8e62000-7f70e8e65000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e8e65000-7f70e8f63000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e8f63000-7f70e8f66000 ---p 00000000 00:00 0 </span><br><span class="line">7f70e8f66000-7f70e9064000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e9064000-7f70e9079000 r-xp 00000000 fd:00 84                         /usr/lib64/libgcc_s-4.8.5-20150702.so.1</span><br><span class="line">7f70e9079000-7f70e9278000 ---p 00015000 fd:00 84                         /usr/lib64/libgcc_s-4.8.5-20150702.so.1</span><br><span class="line">7f70e9278000-7f70e9279000 r--p 00014000 fd:00 84                         /usr/lib64/libgcc_s-4.8.5-20150702.so.1</span><br><span class="line">7f70e9279000-7f70e927a000 rw-p 00015000 fd:00 84                         /usr/lib64/libgcc_s-4.8.5-20150702.so.1</span><br><span class="line">7f70e927a000-7f70e92ac000 r-xp 00000000 fd:00 806141408                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libsunec.so</span><br><span class="line">7f70e92ac000-7f70e94ab000 ---p 00032000 fd:00 806141408                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libsunec.so</span><br><span class="line">7f70e94ab000-7f70e94b1000 rw-p 00031000 fd:00 806141408                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libsunec.so</span><br><span class="line">7f70e94b1000-7f70e96c1000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e96c1000-7f70e98c1000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e98c1000-7f70e9ac1000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e9ac1000-7f70e9ad2000 r-xp 00000000 fd:00 806145409                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libnio.so</span><br><span class="line">7f70e9ad2000-7f70e9cd1000 ---p 00011000 fd:00 806145409                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libnio.so</span><br><span class="line">7f70e9cd1000-7f70e9cd2000 rw-p 00010000 fd:00 806145409                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libnio.so</span><br><span class="line">7f70e9cd2000-7f70e9ed2000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70e9ed2000-7f70ea0d2000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ea0d2000-7f70ea2d2000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ea2d2000-7f70ea4d2000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ea4d2000-7f70ea6d2000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ea6d2000-7f70ea6d5000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ea6d5000-7f70ea7d3000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ea7d3000-7f70ea7d6000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ea7d6000-7f70ea8d4000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ea8d4000-7f70ea8d7000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ea8d7000-7f70ea9d5000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ea9d5000-7f70ea9d8000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ea9d8000-7f70eacd6000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eacd6000-7f70eacd9000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eacd9000-7f70eadd7000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eadd7000-7f70eadda000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eadda000-7f70eaed8000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eaed8000-7f70eaedb000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eaedb000-7f70eafd9000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eafd9000-7f70eafdc000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eafdc000-7f70eb0da000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eb0da000-7f70eb0dd000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eb0dd000-7f70eb1db000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eb1db000-7f70eb1de000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eb1de000-7f70eb2dc000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eb2dc000-7f70eb2df000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eb2df000-7f70eb3dd000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eb3dd000-7f70eb3e0000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eb3e0000-7f70eb4de000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eb4de000-7f70eb4e1000 ---p 00000000 00:00 0 </span><br><span class="line">7f70eb4e1000-7f70eb7df000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70eb7df000-7f70ebadf000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ebadf000-7f70ebaf5000 r-xp 00000000 fd:00 806141426                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libnet.so</span><br><span class="line">7f70ebaf5000-7f70ebcf5000 ---p 00016000 fd:00 806141426                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libnet.so</span><br><span class="line">7f70ebcf5000-7f70ebcf6000 rw-p 00016000 fd:00 806141426                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libnet.so</span><br><span class="line">7f70ebcf6000-7f70ebcfe000 r-xp 00000000 fd:00 806141409                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libmanagement.so</span><br><span class="line">7f70ebcfe000-7f70ebefe000 ---p 00008000 fd:00 806141409                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libmanagement.so</span><br><span class="line">7f70ebefe000-7f70ebeff000 rw-p 00008000 fd:00 806141409                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libmanagement.so</span><br><span class="line">7f70ebeff000-7f70ebf00000 ---p 00000000 00:00 0 </span><br><span class="line">7f70ebf00000-7f70ec000000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ec000000-7f70ec021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70ec021000-7f70f0000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f0091000-7f70f00a6000 r--s 000ff000 fd:00 537997655                  /usr/java/jdk1.8.0_31/jre/lib/resources.jar</span><br><span class="line">7f70f00a6000-7f70f00a9000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f00a9000-7f70f03a7000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f03a7000-7f70f05a7000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f05a7000-7f70f05c9000 r--s 0038e000 fd:00 269702315                  /usr/java/jdk1.8.0_31/jre/lib/ext/cldrdata.jar</span><br><span class="line">7f70f05c9000-7f70f05ca000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f05ca000-7f70f06ca000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f06ca000-7f70f06cd000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f06cd000-7f70f07cb000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f07cb000-7f70f07cf000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f07cf000-7f70f08cc000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f08cc000-7f70f08d0000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f08d0000-7f70f09cd000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f09cd000-7f70f09d1000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f09d1000-7f70f0ace000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f0ace000-7f70f0ad1000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f0ad1000-7f70f0bcf000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f0bcf000-7f70f0bd2000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f0bd2000-7f70f0cd0000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f0cd0000-7f70f0cd3000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f0cd3000-7f70f0dd1000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f0dd1000-7f70f0dd4000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f0dd4000-7f70f0ed2000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f0ed2000-7f70f0ed3000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f0ed3000-7f70f1022000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f1022000-7f70f11f7000 r--s 03c68000 fd:00 537997654                  /usr/java/jdk1.8.0_31/jre/lib/rt.jar</span><br><span class="line">7f70f11f7000-7f70f19f7000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f19f7000-7f70f3efd000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f3efd000-7f70f3efe000 ---p 00000000 00:00 0 </span><br><span class="line">7f70f3efe000-7f70f8000000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f8000000-7f70f8021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70f8021000-7f70fc000000 ---p 00000000 00:00 0 </span><br><span class="line">7f70fc000000-7f70fc021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f70fc021000-7f7100000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7100000000-7f7100021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7100021000-7f7104000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7104000000-7f7104021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7104021000-7f7108000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7108000000-7f7108021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7108021000-7f710c000000 ---p 00000000 00:00 0 </span><br><span class="line">7f710c000000-7f710c021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f710c021000-7f7110000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7110000000-7f7110024000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7110024000-7f7114000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7114000000-7f7114021000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7114021000-7f7118000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7118000000-7f7118039000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7118039000-7f711c000000 ---p 00000000 00:00 0 </span><br><span class="line">7f711c004000-7f711c8fc000 rw-p 00000000 00:00 0 </span><br><span class="line">7f711c8fc000-7f711ccfd000 rw-p 00000000 00:00 0 </span><br><span class="line">7f711ccfd000-7f711ccfe000 ---p 00000000 00:00 0 </span><br><span class="line">7f711ccfe000-7f711cdfe000 rw-p 00000000 00:00 0 </span><br><span class="line">7f711cdfe000-7f711cdff000 ---p 00000000 00:00 0 </span><br><span class="line">7f711cdff000-7f711ceff000 rw-p 00000000 00:00 0 </span><br><span class="line">7f711ceff000-7f711cf00000 ---p 00000000 00:00 0 </span><br><span class="line">7f711cf00000-7f711d000000 rw-p 00000000 00:00 0 </span><br><span class="line">7f711d000000-7f711e910000 rwxp 00000000 00:00 0 </span><br><span class="line">7f711e910000-7f712c000000 ---p 00000000 00:00 0 </span><br><span class="line">7f712c000000-7f712e51d000 rw-p 00000000 00:00 0 </span><br><span class="line">7f712e51d000-7f7130000000 ---p 00000000 00:00 0 </span><br><span class="line">7f7130003000-7f7130005000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7130005000-7f713000b000 r--s 002f7000 fd:00 537997662                  /usr/java/jdk1.8.0_31/jre/lib/charsets.jar</span><br><span class="line">7f713000b000-7f7130011000 r--s 0003e000 fd:00 269702316                  /usr/java/jdk1.8.0_31/jre/lib/ext/sunjce_provider.jar</span><br><span class="line">7f7130011000-7f7130012000 r--s 00009000 fd:00 269702321                  /usr/java/jdk1.8.0_31/jre/lib/ext/sunec.jar</span><br><span class="line">7f7130012000-7f713001c000 r--s 0021b000 fd:00 269702314                  /usr/java/jdk1.8.0_31/jre/lib/ext/localedata.jar</span><br><span class="line">7f713001c000-7f713009d000 rw-p 00000000 00:00 0 </span><br><span class="line">7f713009d000-7f713009e000 ---p 00000000 00:00 0 </span><br><span class="line">7f713009e000-7f713019e000 rw-p 00000000 00:00 0 </span><br><span class="line">7f713019e000-7f713019f000 ---p 00000000 00:00 0 </span><br><span class="line">7f713019f000-7f71306a3000 rw-p 00000000 00:00 0 </span><br><span class="line">7f71306a3000-7f71306a4000 ---p 00000000 00:00 0 </span><br><span class="line">7f71306a4000-7f71307a4000 rw-p 00000000 00:00 0 </span><br><span class="line">7f71307a4000-7f71307a5000 ---p 00000000 00:00 0 </span><br><span class="line">7f71307a5000-7f71308a5000 rw-p 00000000 00:00 0 </span><br><span class="line">7f71308a5000-7f71308a6000 ---p 00000000 00:00 0 </span><br><span class="line">7f71308a6000-7f71309a6000 rw-p 00000000 00:00 0 </span><br><span class="line">7f71309a6000-7f71309a7000 ---p 00000000 00:00 0 </span><br><span class="line">7f71309a7000-7f7130b0c000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7130b0c000-7f7130e67000 ---p 00000000 00:00 0 </span><br><span class="line">7f7130e67000-7f7130e81000 r-xp 00000000 fd:00 806141433                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libzip.so</span><br><span class="line">7f7130e81000-7f7131081000 ---p 0001a000 fd:00 806141433                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libzip.so</span><br><span class="line">7f7131081000-7f7131082000 rw-p 0001a000 fd:00 806141433                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libzip.so</span><br><span class="line">7f7131082000-7f713108e000 r-xp 00000000 fd:00 34891                      /usr/lib64/libnss_files-2.17.so</span><br><span class="line">7f713108e000-7f713128d000 ---p 0000c000 fd:00 34891                      /usr/lib64/libnss_files-2.17.so</span><br><span class="line">7f713128d000-7f713128e000 r--p 0000b000 fd:00 34891                      /usr/lib64/libnss_files-2.17.so</span><br><span class="line">7f713128e000-7f713128f000 rw-p 0000c000 fd:00 34891                      /usr/lib64/libnss_files-2.17.so</span><br><span class="line">7f713128f000-7f7131295000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7131295000-7f71312bf000 r-xp 00000000 fd:00 806141439                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libjava.so</span><br><span class="line">7f71312bf000-7f71314bf000 ---p 0002a000 fd:00 806141439                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libjava.so</span><br><span class="line">7f71314bf000-7f71314c1000 rw-p 0002a000 fd:00 806141439                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libjava.so</span><br><span class="line">7f71314c1000-7f71314ce000 r-xp 00000000 fd:00 806145414                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libverify.so</span><br><span class="line">7f71314ce000-7f71316ce000 ---p 0000d000 fd:00 806145414                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libverify.so</span><br><span class="line">7f71316ce000-7f71316d0000 rw-p 0000d000 fd:00 806145414                  /usr/java/jdk1.8.0_31/jre/lib/amd64/libverify.so</span><br><span class="line">7f71316d0000-7f71316d7000 r-xp 00000000 fd:00 34903                      /usr/lib64/librt-2.17.so</span><br><span class="line">7f71316d7000-7f71318d6000 ---p 00007000 fd:00 34903                      /usr/lib64/librt-2.17.so</span><br><span class="line">7f71318d6000-7f71318d7000 r--p 00006000 fd:00 34903                      /usr/lib64/librt-2.17.so</span><br><span class="line">7f71318d7000-7f71318d8000 rw-p 00007000 fd:00 34903                      /usr/lib64/librt-2.17.so</span><br><span class="line">7f71318d8000-7f71319d9000 r-xp 00000000 fd:00 34881                      /usr/lib64/libm-2.17.so</span><br><span class="line">7f71319d9000-7f7131bd8000 ---p 00101000 fd:00 34881                      /usr/lib64/libm-2.17.so</span><br><span class="line">7f7131bd8000-7f7131bd9000 r--p 00100000 fd:00 34881                      /usr/lib64/libm-2.17.so</span><br><span class="line">7f7131bd9000-7f7131bda000 rw-p 00101000 fd:00 34881                      /usr/lib64/libm-2.17.so</span><br><span class="line">7f7131bda000-7f7132848000 r-xp 00000000 fd:00 651510                     /usr/java/jdk1.8.0_31/jre/lib/amd64/server/libjvm.so</span><br><span class="line">7f7132848000-7f7132a47000 ---p 00c6e000 fd:00 651510                     /usr/java/jdk1.8.0_31/jre/lib/amd64/server/libjvm.so</span><br><span class="line">7f7132a47000-7f7132b1d000 rw-p 00c6d000 fd:00 651510                     /usr/java/jdk1.8.0_31/jre/lib/amd64/server/libjvm.so</span><br><span class="line">7f7132b1d000-7f7132b60000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7132b60000-7f7132d24000 r-xp 00000000 fd:00 34873                      /usr/lib64/libc-2.17.so</span><br><span class="line">7f7132d24000-7f7132f23000 ---p 001c4000 fd:00 34873                      /usr/lib64/libc-2.17.so</span><br><span class="line">7f7132f23000-7f7132f27000 r--p 001c3000 fd:00 34873                      /usr/lib64/libc-2.17.so</span><br><span class="line">7f7132f27000-7f7132f29000 rw-p 001c7000 fd:00 34873                      /usr/lib64/libc-2.17.so</span><br><span class="line">7f7132f29000-7f7132f2e000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7132f2e000-7f7132f30000 r-xp 00000000 fd:00 34879                      /usr/lib64/libdl-2.17.so</span><br><span class="line">7f7132f30000-7f7133130000 ---p 00002000 fd:00 34879                      /usr/lib64/libdl-2.17.so</span><br><span class="line">7f7133130000-7f7133131000 r--p 00002000 fd:00 34879                      /usr/lib64/libdl-2.17.so</span><br><span class="line">7f7133131000-7f7133132000 rw-p 00003000 fd:00 34879                      /usr/lib64/libdl-2.17.so</span><br><span class="line">7f7133132000-7f7133147000 r-xp 00000000 fd:00 502698                     /usr/java/jdk1.8.0_31/lib/amd64/jli/libjli.so</span><br><span class="line">7f7133147000-7f7133346000 ---p 00015000 fd:00 502698                     /usr/java/jdk1.8.0_31/lib/amd64/jli/libjli.so</span><br><span class="line">7f7133346000-7f7133347000 rw-p 00014000 fd:00 502698                     /usr/java/jdk1.8.0_31/lib/amd64/jli/libjli.so</span><br><span class="line">7f7133347000-7f713335e000 r-xp 00000000 fd:00 34899                      /usr/lib64/libpthread-2.17.so</span><br><span class="line">7f713335e000-7f713355d000 ---p 00017000 fd:00 34899                      /usr/lib64/libpthread-2.17.so</span><br><span class="line">7f713355d000-7f713355e000 r--p 00016000 fd:00 34899                      /usr/lib64/libpthread-2.17.so</span><br><span class="line">7f713355e000-7f713355f000 rw-p 00017000 fd:00 34899                      /usr/lib64/libpthread-2.17.so</span><br><span class="line">7f713355f000-7f7133563000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7133563000-7f7133585000 r-xp 00000000 fd:00 34866                      /usr/lib64/ld-2.17.so</span><br><span class="line">7f7133585000-7f7133589000 r--s 00039000 fd:00 269702317                  /usr/java/jdk1.8.0_31/jre/lib/ext/sunpkcs11.jar</span><br><span class="line">7f7133589000-7f713358c000 r--s 00019000 fd:00 537997637                  /usr/java/jdk1.8.0_31/jre/lib/jce.jar</span><br><span class="line">7f713358c000-7f7133593000 r--s 023e8000 fd:00 665900                     /usr/local/amAgent/amagent-V100R001B012.jar</span><br><span class="line">7f7133593000-7f713366f000 rw-p 00000000 00:00 0 </span><br><span class="line">7f713366f000-7f7133677000 rw-s 00000000 fd:00 806023512                  /tmp/hsperfdata_root/9824</span><br><span class="line">7f7133677000-7f713367b000 ---p 00000000 00:00 0 </span><br><span class="line">7f713367b000-7f713377c000 rw-p 00000000 00:00 0 </span><br><span class="line">7f713377c000-7f7133781000 r--s 00093000 fd:00 537997641                  /usr/java/jdk1.8.0_31/jre/lib/jsse.jar</span><br><span class="line">7f7133781000-7f7133782000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7133782000-7f7133783000 r--p 00000000 00:00 0 </span><br><span class="line">7f7133783000-7f7133784000 rw-p 00000000 00:00 0 </span><br><span class="line">7f7133784000-7f7133785000 r--p 00021000 fd:00 34866                      /usr/lib64/ld-2.17.so</span><br><span class="line">7f7133785000-7f7133786000 rw-p 00022000 fd:00 34866                      /usr/lib64/ld-2.17.so</span><br><span class="line">7f7133786000-7f7133787000 rw-p 00000000 00:00 0 </span><br><span class="line">7ffd4e54f000-7ffd4e570000 rw-p 00000000 00:00 0                          [stack]</span><br><span class="line">7ffd4e5cb000-7ffd4e5cd000 r-xp 00000000 00:00 0                          [vdso]</span><br><span class="line">ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]</span><br><span class="line"></span><br><span class="line">VM Arguments:</span><br><span class="line">jvm_args: -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m -Xms2048m -Xmx2048m -XX:+UseG1GC </span><br><span class="line">java_command: /usr/local/amAgent/amagent-V100R001B012.jar --spring.config.additional-location=/usr/local/amAgent/application.yml</span><br><span class="line">java_class_path (initial): /usr/local/amAgent/amagent-V100R001B012.jar</span><br><span class="line">Launcher Type: SUN_STANDARD</span><br><span class="line"></span><br><span class="line">Environment Variables:</span><br><span class="line">JAVA_HOME=/usr/java/jdk1.8.0_31</span><br><span class="line">CLASSPATH=.:/usr/java/jdk1.8.0_31/lib/tools.jar:/usr/java/jdk1.8.0_31/lib/dt.jar</span><br><span class="line">PATH=/usr/java/jdk1.8.0_31/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line"></span><br><span class="line">Signal Handlers:</span><br><span class="line">SIGSEGV: [libjvm.so+0xa7a650], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGBUS: [libjvm.so+0xa7a650], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGFPE: [libjvm.so+0x8e28f0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGPIPE: [libjvm.so+0x8e28f0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGXFSZ: [libjvm.so+0x8e28f0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGILL: [libjvm.so+0x8e28f0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGUSR1: SIG_DFL, sa_mask[0]=00000000000000000000000000000000, sa_flags=none</span><br><span class="line">SIGUSR2: [libjvm.so+0x8e4120], sa_mask[0]=00000000000000000000000000000000, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGHUP: SIG_IGN, sa_mask[0]=00000000000000000000000000000000, sa_flags=none</span><br><span class="line">SIGINT: SIG_IGN, sa_mask[0]=00000000000000000000000000000000, sa_flags=none</span><br><span class="line">SIGTERM: [libjvm.so+0x8e54e0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line">SIGQUIT: [libjvm.so+0x8e54e0], sa_mask[0]=11111111011111111101111111111110, sa_flags=SA_RESTART|SA_SIGINFO</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------  S Y S T E M  ---------------</span><br><span class="line"></span><br><span class="line">OS:CentOS Linux release 7.9.2009 (Core)</span><br><span class="line"></span><br><span class="line">uname:Linux 3.10.0-1160.el7.x86_64 #1 SMP Mon Oct 19 16:18:59 UTC 2020 x86_64</span><br><span class="line">libc:glibc 2.17 NPTL 2.17 </span><br><span class="line">rlimit: STACK 8192k, CORE 0k, NPROC 31191, NOFILE 65535, AS infinity</span><br><span class="line">load average:0.00 0.01 0.05</span><br><span class="line"></span><br><span class="line">/proc/meminfo:</span><br><span class="line">MemTotal:        8008972 kB</span><br><span class="line">MemFree:         4570420 kB</span><br><span class="line">MemAvailable:    5763288 kB</span><br><span class="line">Buffers:            2108 kB</span><br><span class="line">Cached:          1427372 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:          2760396 kB</span><br><span class="line">Inactive:         254056 kB</span><br><span class="line">Active(anon):    1605600 kB</span><br><span class="line">Inactive(anon):    37648 kB</span><br><span class="line">Active(file):    1154796 kB</span><br><span class="line">Inactive(file):   216408 kB</span><br><span class="line">Unevictable:           0 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">SwapTotal:       8388604 kB</span><br><span class="line">SwapFree:        8388604 kB</span><br><span class="line">Dirty:               504 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:       1585080 kB</span><br><span class="line">Mapped:            42140 kB</span><br><span class="line">Shmem:             58168 kB</span><br><span class="line">Slab:             113472 kB</span><br><span class="line">SReclaimable:      86328 kB</span><br><span class="line">SUnreclaim:        27144 kB</span><br><span class="line">KernelStack:        4256 kB</span><br><span class="line">PageTables:         7544 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:    12393088 kB</span><br><span class="line">Committed_AS:    2715896 kB</span><br><span class="line">VmallocTotal:   34359738367 kB</span><br><span class="line">VmallocUsed:      158512 kB</span><br><span class="line">VmallocChunk:   34359341052 kB</span><br><span class="line">Percpu:              704 kB</span><br><span class="line">HardwareCorrupted:     0 kB</span><br><span class="line">AnonHugePages:   1484800 kB</span><br><span class="line">CmaTotal:              0 kB</span><br><span class="line">CmaFree:               0 kB</span><br><span class="line">HugePages_Total:       0</span><br><span class="line">HugePages_Free:        0</span><br><span class="line">HugePages_Rsvd:        0</span><br><span class="line">HugePages_Surp:        0</span><br><span class="line">Hugepagesize:       2048 kB</span><br><span class="line">DirectMap4k:      104320 kB</span><br><span class="line">DirectMap2M:     8284160 kB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CPU:total 4 (1 cores per cpu, 1 threads per core) family 6 model 45 stepping 2, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, avx, aes, clmul, tsc, tscinvbit, tscinv</span><br><span class="line"></span><br><span class="line">/proc/cpuinfo:</span><br><span class="line">processor	: 0</span><br><span class="line">vendor_id	: GenuineIntel</span><br><span class="line">cpu family	: 6</span><br><span class="line">model		: 45</span><br><span class="line">model name	: Intel(R) Xeon(R) CPU E5-2640 v4 @ 2.40GHz</span><br><span class="line">stepping	: 2</span><br><span class="line">microcode	: 0xb00003e</span><br><span class="line">cpu MHz		: 2397.223</span><br><span class="line">cache size	: 25600 KB</span><br><span class="line">physical id	: 0</span><br><span class="line">siblings	: 1</span><br><span class="line">core id		: 0</span><br><span class="line">cpu cores	: 1</span><br><span class="line">apicid		: 0</span><br><span class="line">initial apicid	: 0</span><br><span class="line">fpu		: yes</span><br><span class="line">fpu_exception	: yes</span><br><span class="line">cpuid level	: 13</span><br><span class="line">wp		: yes</span><br><span class="line">flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc eagerfpu pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx hypervisor lahf_lm ssbd ibrs ibpb stibp tsc_adjust arat md_clear spec_ctrl intel_stibp flush_l1d arch_capabilities</span><br><span class="line">bogomips	: 4794.44</span><br><span class="line">clflush size	: 64</span><br><span class="line">cache_alignment	: 64</span><br><span class="line">address sizes	: 43 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">vendor_id	: GenuineIntel</span><br><span class="line">cpu family	: 6</span><br><span class="line">model		: 45</span><br><span class="line">model name	: Intel(R) Xeon(R) CPU E5-2640 v4 @ 2.40GHz</span><br><span class="line">stepping	: 2</span><br><span class="line">microcode	: 0xb00003e</span><br><span class="line">cpu MHz		: 2397.223</span><br><span class="line">cache size	: 25600 KB</span><br><span class="line">physical id	: 2</span><br><span class="line">siblings	: 1</span><br><span class="line">core id		: 0</span><br><span class="line">cpu cores	: 1</span><br><span class="line">apicid		: 2</span><br><span class="line">initial apicid	: 2</span><br><span class="line">fpu		: yes</span><br><span class="line">fpu_exception	: yes</span><br><span class="line">cpuid level	: 13</span><br><span class="line">wp		: yes</span><br><span class="line">flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc eagerfpu pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx hypervisor lahf_lm ssbd ibrs ibpb stibp tsc_adjust arat md_clear spec_ctrl intel_stibp flush_l1d arch_capabilities</span><br><span class="line">bogomips	: 4794.44</span><br><span class="line">clflush size	: 64</span><br><span class="line">cache_alignment	: 64</span><br><span class="line">address sizes	: 43 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">vendor_id	: GenuineIntel</span><br><span class="line">cpu family	: 6</span><br><span class="line">model		: 45</span><br><span class="line">model name	: Intel(R) Xeon(R) CPU E5-2640 v4 @ 2.40GHz</span><br><span class="line">stepping	: 2</span><br><span class="line">microcode	: 0xb00003e</span><br><span class="line">cpu MHz		: 2397.223</span><br><span class="line">cache size	: 25600 KB</span><br><span class="line">physical id	: 4</span><br><span class="line">siblings	: 1</span><br><span class="line">core id		: 0</span><br><span class="line">cpu cores	: 1</span><br><span class="line">apicid		: 4</span><br><span class="line">initial apicid	: 4</span><br><span class="line">fpu		: yes</span><br><span class="line">fpu_exception	: yes</span><br><span class="line">cpuid level	: 13</span><br><span class="line">wp		: yes</span><br><span class="line">flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc eagerfpu pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx hypervisor lahf_lm ssbd ibrs ibpb stibp tsc_adjust arat md_clear spec_ctrl intel_stibp flush_l1d arch_capabilities</span><br><span class="line">bogomips	: 4794.44</span><br><span class="line">clflush size	: 64</span><br><span class="line">cache_alignment	: 64</span><br><span class="line">address sizes	: 43 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">vendor_id	: GenuineIntel</span><br><span class="line">cpu family	: 6</span><br><span class="line">model		: 45</span><br><span class="line">model name	: Intel(R) Xeon(R) CPU E5-2640 v4 @ 2.40GHz</span><br><span class="line">stepping	: 2</span><br><span class="line">microcode	: 0xb00003e</span><br><span class="line">cpu MHz		: 2397.223</span><br><span class="line">cache size	: 25600 KB</span><br><span class="line">physical id	: 6</span><br><span class="line">siblings	: 1</span><br><span class="line">core id		: 0</span><br><span class="line">cpu cores	: 1</span><br><span class="line">apicid		: 6</span><br><span class="line">initial apicid	: 6</span><br><span class="line">fpu		: yes</span><br><span class="line">fpu_exception	: yes</span><br><span class="line">cpuid level	: 13</span><br><span class="line">wp		: yes</span><br><span class="line">flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc eagerfpu pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx hypervisor lahf_lm ssbd ibrs ibpb stibp tsc_adjust arat md_clear spec_ctrl intel_stibp flush_l1d arch_capabilities</span><br><span class="line">bogomips	: 4794.44</span><br><span class="line">clflush size	: 64</span><br><span class="line">cache_alignment	: 64</span><br><span class="line">address sizes	: 43 bits physical, 48 bits virtual</span><br><span class="line">power management:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Memory: 4k page, physical 8008972k(4570420k free), swap 8388604k(8388604k free)</span><br><span class="line"></span><br><span class="line">vm_info: Java HotSpot(TM) 64-Bit Server VM (25.31-b07) for linux-amd64 JRE (1.8.0_31-b13), built on Dec 17 2014 20:40:15 by &quot;java_re&quot; with gcc 4.3.0 20080428 (Red Hat 4.3.0-8)</span><br><span class="line"></span><br><span class="line">time: Mon Oct 23 21:49:03 2023</span><br><span class="line">elapsed time: 21839 seconds (0d 6h 3m 59s)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="问题原因分析"><span id="inline-blue">问题原因分析</span></span></h1><p>日志输出关键部分信息：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> JRE version: Java(TM) SE Runtime Environment (8.0_31-b13) (build 1.8.0_31-b13)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Java VM: Java HotSpot(TM) 64-Bit Server VM (25.31-b07 mixed mode linux-amd64 compressed oops)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Problematic frame:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> V  [libjvm.so+0x858e15]  LoadKlassNode::make(PhaseGVN&amp;, Node*, Node*, TypePtr const*, TypeKlassPtr const*)+0x45</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># If you would like to submit a bug report, please visit:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   http://bugreport.java.com/bugreport/crash.jsp</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"></span><br><span class="line"><span class="bash">---------------  T H R E A D  ---------------</span></span><br><span class="line"></span><br><span class="line">Current thread (0x00007f712c86c800):  JavaThread &quot;C2 CompilerThread1&quot; daemon [_thread_in_native, id=9844, stack(0x00007f70f08cd000,0x00007f70f09cd000)]</span><br></pre></td></tr></table></figure>

<p>当前线程C2 CompilerThread1 出现jvm编译异常导致奔溃，异常堆栈信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Stack: [0x00007f70f08cd000,0x00007f70f09cd000],  sp=0x00007f70f09c9da0,  free space=1011k</span><br><span class="line">Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)</span><br><span class="line">V  [libjvm.so+0x858e15]  LoadKlassNode::make(PhaseGVN&amp;, Node*, Node*, TypePtr const*, TypeKlassPtr const*)+0x45</span><br><span class="line">V  [libjvm.so+0x552736]  Parse::catch_inline_exceptions(SafePointNode*)+0x946</span><br><span class="line">V  [libjvm.so+0x9099ca]  Parse::do_exceptions()+0xba</span><br><span class="line">V  [libjvm.so+0x90c5b0]  Parse::do_one_block()+0x180</span><br><span class="line">V  [libjvm.so+0x90c827]  Parse::do_all_blocks()+0x127</span><br><span class="line">V  [libjvm.so+0x910c18]  Parse::Parse(JVMState*, ciMethod*, float, Parse*)+0x7b8</span><br><span class="line">V  [libjvm.so+0x3e7ed9]  ParseGenerator::generate(JVMState*, Parse*)+0x99</span><br><span class="line">V  [libjvm.so+0x49356c]  Compile::Compile(ciEnv*, C2Compiler*, ciMethod*, int, bool, bool, bool)+0x126c</span><br><span class="line">V  [libjvm.so+0x3e69b8]  C2Compiler::compile_method(ciEnv*, ciMethod*, int)+0x198</span><br><span class="line">V  [libjvm.so+0x49bdea]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xc8a</span><br><span class="line">V  [libjvm.so+0x49e7c0]  CompileBroker::compiler_thread_loop()+0x620</span><br><span class="line">V  [libjvm.so+0xa2a9ef]  JavaThread::thread_main_inner()+0xdf</span><br><span class="line">V  [libjvm.so+0xa2ab1c]  JavaThread::run()+0x11c</span><br><span class="line">V  [libjvm.so+0x8e8158]  java_start(Thread*)+0x108</span><br><span class="line">C  [libpthread.so.0+0x7ea5]  start_thread+0xc5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Current CompileTask:</span><br><span class="line">C2:21839588 9300   !   4       com.mysql.cj.NativeSession::execSQL (577 bytes)</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">查找了Java8 C2编译器相关资料，发现可能是由于jdk版本低版本C2 编译器存在JIT(即时编译)BUG,通过调试bug代码，发现当前测试使用的jdk版本存在编译问题，版本升级之后，测试正常。</span><br><span class="line">测试脚本</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">public class C2Bug &#123;</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        int i = 8;</span><br><span class="line">        while ((i -= 3) &gt; 0);</span><br><span class="line">        System. out .println(&quot;i = &quot; + i);</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        C2Bug c2bug = new C2Bug();</span><br><span class="line">        for (int i = 0; i &lt; 50000; i++) &#123;</span><br><span class="line">            c2bug.test();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正常jdk版本1.8.0_333编译输出：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br><span class="line">i = -1</span><br></pre></td></tr></table></figure>

<p>异常jdk版本1.8.0_31编译输出：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br><span class="line">i = /</span><br></pre></td></tr></table></figure>

<h1><span id="参考"><span id="inline-blue">参考</span></span></h1><p><a href="https://www.jianshu.com/p/04c83f718248">https://www.jianshu.com/p/04c83f718248</a><br><a href="https://blog.csdn.net/weixin_42437633/article/details/122908943">https://blog.csdn.net/weixin_42437633/article/details/122908943</a></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot+Mybatis+Druid批量更新 multi-statement not allow异常</title>
    <url>/SpringBoot/blogs/SpringBoot+Mybatis+Druid%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0%20multi-statement%20not%20allow%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83span"><span id="inline-blue">项目环境</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a><ul>
<li><a href="#span-idinline-blue%E6%96%B9%E6%A1%88%E4%B8%80span"><span id="inline-blue">方案一</span></a></li>
<li><a href="#span-idinline-blue%E6%96%B9%E6%A1%88%E4%BA%8Cspan"><span id="inline-blue">方案二</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="项目环境"><span id="inline-blue">项目环境</span></span></h1><p>SpringBoot: 2.2.6.RELEASE<br>SpringCloud: 2021.0.5<br>Druid: 1.1.22<br>Mybatis-plus: 3.3.1</p>
<p>多条SQL语句同时执行更新操作，提示报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Error updating database. Cause: java.sql.SQLException: sql injection violation, multi-statement not allow </span><br></pre></td></tr></table></figure>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>mysql默认不支持批量更新<br>Druid的multiStatementAllow默认是false</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><h2><span id="方案一"><span id="inline-blue">方案一</span></span></h2><p>mysql连接url参数添加allowMultiQueries=true<br>如果配置了druid 注释掉 filters: wall，加上<br>    filter:<br>    wall:<br>    config:<br>    multi-statement-allow: true<br>    none-base-statement-allow: true<br>参考示例如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">mysql</span></span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver	spring.datasource.url=jdbc:mysql://10.9.216.14:3306/ihome_album?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=GMT%2B8&amp;allowMultiQueries=true</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=coship</span><br><span class="line">spring.datasource.name=ihome_album</span><br><span class="line">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">spring.datasource.initial-size=5</span><br><span class="line">spring.datasource.min-idle=5</span><br><span class="line">spring.datasource.max-active=20</span><br><span class="line">spring.datasource.max-wait=3000</span><br><span class="line">spring.datasource.time-between-eviction-runs-millis=60000</span><br><span class="line">spring.datasource.min-evectable-idle-time-millis=300000</span><br><span class="line">spring.datasource.validation-query=SELECT &#x27;1&#x27; FROM dual</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">druid</span></span><br><span class="line">spring.datasource.druid.filter.wall.config.multi-statement-allow=true</span><br><span class="line">spring.datasource.druid.filter.wall.config.none-base-statement-allow=true	</span><br></pre></td></tr></table></figure>

<h2><span id="方案二"><span id="inline-blue">方案二</span></span></h2><p>DataSourceProperties配置类添加SQL多条更新支持</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ffcs.platform.common.config.datasource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.wall.WallConfig;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.wall.WallFilter;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Primary;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSourceProperties</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String url;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="keyword">private</span> String password;</span><br><span class="line">	<span class="keyword">private</span> String driverClassName;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> initialSize;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> minIdle;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> maxActive;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> maxWait;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> timeBetweenEvictionRunsMillis;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> minEvictableIdleTimeMillis;</span><br><span class="line">	<span class="keyword">private</span> String validationQuery;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testWhileIdle;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testOnBorrow;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> testOnReturn;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> poolPreparedStatements;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> maxPoolPreparedStatementPerConnectionSize;</span><br><span class="line">	<span class="keyword">private</span> String filters;</span><br><span class="line">	<span class="keyword">private</span> String connectionProperties;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="meta">@Primary</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		DruidDataSource datasource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">		datasource.setUrl(<span class="keyword">this</span>.url);</span><br><span class="line">		datasource.setUsername(<span class="keyword">this</span>.username);</span><br><span class="line">		datasource.setPassword(<span class="keyword">this</span>.password);</span><br><span class="line">		datasource.setDriverClassName(<span class="keyword">this</span>.driverClassName);</span><br><span class="line">		datasource.setInitialSize(<span class="keyword">this</span>.initialSize);</span><br><span class="line">		datasource.setMinIdle(<span class="keyword">this</span>.minIdle);</span><br><span class="line">		datasource.setMaxActive(<span class="keyword">this</span>.maxActive);</span><br><span class="line">		datasource.setMaxWait((<span class="keyword">long</span>)<span class="keyword">this</span>.maxWait);</span><br><span class="line">		datasource.setTimeBetweenEvictionRunsMillis((<span class="keyword">long</span>)<span class="keyword">this</span>.timeBetweenEvictionRunsMillis);</span><br><span class="line">		datasource.setMinEvictableIdleTimeMillis((<span class="keyword">long</span>)<span class="keyword">this</span>.minEvictableIdleTimeMillis);</span><br><span class="line">		datasource.setValidationQuery(<span class="keyword">this</span>.validationQuery);</span><br><span class="line">		datasource.setTestWhileIdle(<span class="keyword">this</span>.testWhileIdle);</span><br><span class="line">		datasource.setTestOnBorrow(<span class="keyword">this</span>.testOnBorrow);</span><br><span class="line">		datasource.setTestOnReturn(<span class="keyword">this</span>.testOnReturn);</span><br><span class="line">		datasource.setPoolPreparedStatements(<span class="keyword">this</span>.poolPreparedStatements);</span><br><span class="line">		datasource.setMaxPoolPreparedStatementPerConnectionSize(<span class="keyword">this</span>.maxPoolPreparedStatementPerConnectionSize);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			datasource.setFilters(<span class="keyword">this</span>.filters);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			log.error(<span class="string">&quot;druid configuration initialization filter: &quot;</span> + e);</span><br><span class="line">		&#125;</span><br><span class="line">		datasource.setConnectionProperties(<span class="keyword">this</span>.connectionProperties);</span><br><span class="line">		List filterList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		filterList.add(wallFilter());</span><br><span class="line">		datasource.setProxyFilters(filterList);</span><br><span class="line">		log.debug(<span class="string">&quot;druid configuration datasource 成功&quot;</span> + datasource);</span><br><span class="line">		log.debug(<span class="string">&quot;druid configuration datasource 成功&quot;</span> + <span class="keyword">this</span>.name);</span><br><span class="line">		<span class="keyword">return</span> datasource;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> WallFilter <span class="title">wallFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		WallFilter wallFilter = <span class="keyword">new</span> WallFilter();</span><br><span class="line">		wallFilter.setConfig(wallConfig());</span><br><span class="line">		<span class="keyword">return</span> wallFilter;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> WallConfig <span class="title">wallConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		WallConfig wallConfig = <span class="keyword">new</span> WallConfig();</span><br><span class="line">		<span class="comment">//允许一次执行多条语句</span></span><br><span class="line">		wallConfig.setMultiStatementAllow(<span class="keyword">true</span>);</span><br><span class="line">		<span class="comment">//是否允许非以上基本语句的其他语句</span></span><br><span class="line">		wallConfig.setNoneBaseStatementAllow(<span class="keyword">true</span>);</span><br><span class="line">		<span class="comment">//是否进行严格的语法检测</span></span><br><span class="line">		wallConfig.setStrictSyntaxCheck(<span class="keyword">false</span>);</span><br><span class="line">		<span class="keyword">return</span> wallConfig;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
        <tag>Druid</tag>
        <tag>Mybatis-plus</tag>
      </tags>
  </entry>
  <entry>
    <title>Java进程占用系统内存超过堆分配大小原因</title>
    <url>/Maven/blogs/Java%E8%BF%9B%E7%A8%8B%E5%8D%A0%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E8%B6%85%E8%BF%87%E5%A0%86%E5%88%86%E9%85%8D%E5%A4%A7%E5%B0%8F%E5%8E%9F%E5%9B%A0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83span"><span id="inline-blue">项目环境</span></a></li>
<li><a href="#span-idinline-blue%E7%B3%BB%E7%BB%9F%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8span"><span id="inline-blue">系统内存占用</span></a></li>
<li><a href="#span-idinline-bluenative-memory-trackingspan"><span id="inline-blue">Native Memory Tracking</span></a><ul>
<li><a href="#span-idinline-blue%E5%BC%80%E5%90%AFspan"><span id="inline-blue">开启</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8Bspan"><span id="inline-blue">查看</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E4%BE%8Bspan"><span id="inline-blue">实例</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="项目环境"><span id="inline-blue">项目环境</span></span></h1><p>JDK: 1.8.0_321<br>JVM配置信息： </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -DSTOP.PORT=8074 -Djava.net.preferIPv4Stack=true -server -Xms3G -Xmx3G -Xmn1600G -XX:MetaspaceSize=600M -XX:MaxMetaspaceSize=600M  -XX:SurvivorRatio=32 -XX:MaxTenuringThreshold=3 -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:CMSFullGCsBeforeCompaction=0 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=90 -XX:SoftRefLRUPolicyMSPerMB=0   -Djava.util.logging.config.file=&quot;$IEPG_HOME/iepg/conf/log4j.xml&quot; -Djava.io.tmpdir=work -jar start.jar &amp;</span><br></pre></td></tr></table></figure>
<h1><span id="系统内存占用"><span id="inline-blue">系统内存占用</span></span></h1><p><img src="/images/Java/Java_20230919_001.png" alt="Java内存占用"></p>
<h1><span id="native-memory-tracking"><span id="inline-blue">Native Memory Tracking</span></span></h1><p>ava8给HotSpot VM引入了Native Memory Tracking (NMT)特性，可以用于追踪JVM的内部内存使用</p>
<h2><span id="开启"><span id="inline-blue">开启</span></span></h2><p>-XX:NativeMemoryTracking=[off|summary|detail]。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-XX:NativeMemoryTracking=summary</span><br></pre></td></tr></table></figure>
<p>使用-XX:NativeMemoryTracking=summary可以用于开启NMT，其中该值默认为off，可以设置为summary或者detail来开启；开启的话，大概会增加5%-10%的性能消耗</p>
<h2><span id="查看"><span id="inline-blue">查看</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jcmd &lt;pid&gt; VM.native_memory [summary | detail | baseline | summary.diff | detail.diff | shutdown] [scale= KB | MB | GB]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> summary: 分类内存使用情况.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> detail: 详细内存使用情况，除了summary信息之外还包含了虚拟内存使用情况。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> baseline: 创建内存使用快照，方便和后面做对比</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> summary.diff: 和上一次baseline的summary对比</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> detail.diff: 和上一次baseline的detail对比</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> shutdown: 关闭NMT</span></span><br></pre></td></tr></table></figure>
<h2><span id="实例"><span id="inline-blue">实例</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jcmd 16000 VM.native_memory summary scale=MB</span><br></pre></td></tr></table></figure>
<p><img src="/images/Java/Java_20230919_002.png" alt="Java内存占用分析"></p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Swagger提示Unable to render this definition</title>
    <url>/Swagger/blogs/Swagger%E6%8F%90%E7%A4%BAUnable%20to%20render%20this%20definition/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83span"><span id="inline-blue">项目环境</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="项目环境"><span id="inline-blue">项目环境</span></span></h1><p>SpringBoot: 2.2.6.RELEASE<br>SpringCloud: 2021.0.5<br>Swagger UI: 2.9.2</p>
<p>微服务添加Swagger支持，通过网关访问提示如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Unable to render this definition</span><br><span class="line">The provided definition does not specify a valid version field.</span><br><span class="line"></span><br><span class="line">Please indicate a valid Swagger or OpenAPI version field. Supported version fields are swagger: &quot;2.0&quot; and those that match openapi: 3.0.n (for example, openapi: 3.0.0).</span><br></pre></td></tr></table></figure>
<p>提示版本信息无效，但通过微服务自身的端口直接访问/api-docs能够获取到模块对应的接口信息，通过比对不对模块返回的接口数据，发现返回的数据结构不一致，报错的模块返回信息被封装了一层结构，导致Swagger无法解析。<br>查看项目源码，最终定位到是由以下位置ResponseAdvice类导致该问题</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"> <span class="meta">@Priority(3)</span></span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseAdvice</span></span></span><br><span class="line"><span class="class">   <span class="keyword">implements</span> <span class="title">ResponseBodyAdvice</span>&lt;<span class="title">Object</span>&gt;</span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(MethodParameter methodParameter, Class aClass)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> Object <span class="title">beforeBodyWrite</span><span class="params">(Object o, MethodParameter methodParameter, MediaType mediaType, Class aClass, ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       </span><br><span class="line">     <span class="keyword">if</span> ((o <span class="keyword">instanceof</span> String))</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="keyword">return</span> JSONObject.toJSONString(ResultData.success(o));</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> ((o <span class="keyword">instanceof</span> ResultData)) &#123;</span><br><span class="line">       <span class="keyword">return</span> o;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> ResultData.success(o);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>所有的返回数据外层都是{“code”:””,”msg”:””,”data”:[]}这样的结构，导致Swagger无法解析。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>在代码判断逻辑排除掉Swagger接口相关的返回信息</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"> <span class="meta">@Priority(3)</span></span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseAdvice</span></span></span><br><span class="line"><span class="class">   <span class="keyword">implements</span> <span class="title">ResponseBodyAdvice</span>&lt;<span class="title">Object</span>&gt;</span></span><br><span class="line"><span class="class"> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(MethodParameter methodParameter, Class aClass)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">public</span> Object <span class="title">beforeBodyWrite</span><span class="params">(Object o, MethodParameter methodParameter, MediaType mediaType, Class aClass, ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="comment">// 判断当前请求是否是 Swagger 相关的请求</span></span><br><span class="line">       <span class="keyword">if</span> (serverHttpRequest.getURI().getPath().startsWith(<span class="string">&quot;/swagger&quot;</span>) || serverHttpRequest.getURI().getPath().startsWith(<span class="string">&quot;/v2/api-docs&quot;</span>)) &#123;</span><br><span class="line">           <span class="keyword">return</span> o;</span><br><span class="line">       &#125;</span><br><span class="line">     <span class="keyword">if</span> ((o <span class="keyword">instanceof</span> String))</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="keyword">return</span> JSONObject.toJSONString(ResultData.success(o));</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> ((o <span class="keyword">instanceof</span> ResultData)) &#123;</span><br><span class="line">       <span class="keyword">return</span> o;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> ResultData.success(o);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Swagger/Swagger_20230918_001.png" alt="Swagger集成"></p>
]]></content>
      <categories>
        <category>Swagger</category>
      </categories>
      <tags>
        <tag>Swagger</tag>
      </tags>
  </entry>
  <entry>
    <title>maven项目打包将依赖移动至外部lib目录</title>
    <url>/Java/blogs/Maven%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E5%B0%86%E4%BE%9D%E8%B5%96%E7%A7%BB%E5%8A%A8%E8%87%B3%E5%A4%96%E9%83%A8lib%E7%9B%AE%E5%BD%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目编译打成jar包后，依赖的lib被以源代码形式添加进了源码包目录，导致项目真实的源码目录和依赖混淆，希望能够将项目源码和依赖jar包区分开来，剔除多余的配置文件信息</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>maven项目打包只保存项目的classpath信息，jar包内部MANNIFEST.MF文件信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Manifest-Version: 1.0</span><br><span class="line">Archiver-Version: Plexus Archiver</span><br><span class="line">Built-By: 909754</span><br><span class="line">Class-Path: lib/aopalliance-1.0.jar lib/asm-5.2.jar lib/asm-tree-5.2.j</span><br><span class="line"> ar lib/aspectjrt-1.6.9.jar lib/aspectjweaver-1.6.9.jar lib/c3p0-0.9.1</span><br><span class="line"> .2.jar lib/cas-client-core-3.5.0.jar lib/slf4j-api-1.7.1.jar lib/cgli</span><br><span class="line"> b-3.2.5.jar lib/ant-1.9.6.jar lib/ant-launcher-1.9.6.jar lib/commons-</span><br><span class="line"> beanutils-1.8.3.jar lib/commons-codec-1.10.jar lib/commons-collection</span><br><span class="line"> s-3.2.2.jar lib/commons-logging-1.2.jar lib/commons-net-3.5.jar lib/c</span><br><span class="line"> ommons-pool2-2.4.3.jar lib/druid-1.0.8.jar lib/ehcache-2.10.1.jar lib</span><br><span class="line"> /elastic-job-core-1.0.6.jar lib/lombok-1.16.4.jar lib/curator-framewo</span><br><span class="line"> rk-2.10.0.jar lib/curator-client-2.10.0.jar lib/zookeeper-3.4.6.jar l</span><br><span class="line"> ib/jline-0.9.94.jar lib/netty-3.7.0.Final.jar lib/curator-recipes-2.1</span><br><span class="line"> 0.0.jar lib/curator-test-2.10.0.jar lib/javassist-3.18.1-GA.jar lib/c</span><br><span class="line"> ommons-math-2.2.jar lib/ezmorph-1.0.3.jar lib/ganymed-ssh2-build210.j</span><br><span class="line"> ar lib/groovy-2.4.5.jar lib/gson-2.8.5.jar lib/guava-19.0.jar lib/hib</span><br><span class="line"> ernate-jpa-2.1-api-1.0.0.Final.jar lib/javax.inject-1.jar lib/jcl-ove</span><br><span class="line"> r-slf4j-1.7.7.jar lib/jdom-1.0.jar lib/jedis-2.9.1.jar lib/joda-time-</span><br><span class="line"> 2.9.9.jar lib/json-lib-2.1.jar lib/jsoup-1.11.1.jar lib/jstl-1.2.jar </span><br><span class="line"> lib/jta-1.1.jar lib/jzlib-1.0.7.jar lib/metrics-core-3.1.0.jar lib/mo</span><br><span class="line"> ngo-java-driver-3.3.0.jar lib/mybatis-3.1.1.jar lib/mybatis-spring-1.</span><br><span class="line"> 1.1.jar lib/spring-core-3.1.1.RELEASE.jar lib/spring-tx-3.1.1.RELEASE</span><br><span class="line"> .jar lib/mysql-connector-java-5.1.39.jar lib/ognl-3.0.1.jar lib/javas</span><br><span class="line"> sist-3.11.0.GA.jar lib/ojdbc6-11.2.0.4.jar lib/ucp-11.2.0.4.jar lib/o</span><br><span class="line"> raclepki-11.2.0.4.jar lib/osdt_cert-11.2.0.4.jar lib/osdt_core-11.2.0</span><br><span class="line"> .4.jar lib/simplefan-11.2.0.4.jar lib/ons-11.2.0.4.jar lib/oro-2.0.8.</span><br><span class="line"> jar lib/quartz-2.2.1.jar lib/rome-1.7.1.jar lib/rome-utils-1.7.1.jar </span><br><span class="line"> lib/jdom2-2.0.6.jar lib/xmemcached-1.4.2.jar lib/velocity-1.7.jar lib</span><br><span class="line"> /pinyin4j-2.5.0.jar lib/spring-context-5.3.20.jar lib/spring-aop-5.3.</span><br><span class="line"> 20.jar lib/spring-beans-5.3.20.jar lib/spring-expression-5.3.20.jar l</span><br><span class="line"> ib/spring-webmvc-5.3.20.jar lib/spring-web-5.3.20.jar lib/spring-jdbc</span><br><span class="line"> -5.3.20.jar lib/spring-data-mongodb-1.9.10.RELEASE.jar lib/spring-dat</span><br><span class="line"> a-mongodb-cross-store-1.9.10.RELEASE.jar lib/spring-aspects-4.2.9.REL</span><br><span class="line"> EASE.jar lib/spring-orm-4.2.9.RELEASE.jar lib/spring-data-commons-1.1</span><br><span class="line"> 2.10.RELEASE.jar lib/commons-io-2.5.jar lib/commons-lang3-3.4.jar lib</span><br><span class="line"> /jackson-annotations-2.8.8.jar lib/jackson-core-2.8.8.jar lib/jackson</span><br><span class="line"> -databind-2.8.8.1.jar lib/Java-WebSocket-1.3.0.jar lib/slf4j-log4j12-</span><br><span class="line"> 1.7.2.jar lib/log4j-1.2.17.jar lib/poi-3.9.jar lib/poi-ooxml-3.9.jar </span><br><span class="line"> lib/poi-ooxml-schemas-3.9.jar lib/xmlbeans-2.5.0.jar lib/stax-api-1.0</span><br><span class="line"> .1.jar lib/dom4j-1.6.1.jar lib/xml-apis-1.0.b2.jar lib/commons-fileup</span><br><span class="line"> load-1.2.2.jar lib/commons-configuration-1.8.jar lib/commons-lang-2.5</span><br><span class="line"> .jar lib/commons-collections4-4.1.jar lib/sdp-cbb-license-V300R002B01</span><br><span class="line"> .jar lib/hutool-core-5.6.5.jar</span><br><span class="line">Created-By: Apache Maven 3.5.4</span><br><span class="line">Build-Jdk: 1.8.0_333</span><br><span class="line">Main-Class: com.coship.estool.EsToolMain</span><br></pre></td></tr></table></figure>
<p>只记录了应用的启动类com.coship.estool.EsToolMain及jar包依赖所在位置信息<br>maven打包插件配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">			  <span class="comment">&lt;!-- 添加依赖信息 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></span><br><span class="line">			  <span class="comment">&lt;!-- 设置依赖所在目录 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></span><br><span class="line">			  <span class="comment">&lt;!-- 启动类所在位置 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.coship.estool.EsToolMain<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>prepare-package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">			  <span class="comment">&lt;!-- 打包后将依赖的jar包拷贝至target/lib目录 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">overWriteReleases</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWriteReleases</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">overWriteSnapshots</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWriteSnapshots</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">overWriteIfNewer</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overWriteIfNewer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>jar启动读取外部配置文件实现</title>
    <url>/Java/blogs/jar%E5%90%AF%E5%8A%A8%E8%AF%BB%E5%8F%96%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-blue%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4span"><span id="inline-blue">启动命令</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>项目编译打成jar包后，配置文件包含在jar包内部不方便修改，希望实现本地启动读取classpath路径下的配置信息，在生产环境部署的情况下读取同级目录下的配置信息</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>通过静态工具类读取配置信息<br>1、本地开发时读取资源目录下的配置文件信息<br>2、打成jar包部署时，资源文件放置在jar包同级conf目录下</p>
<p>maven打包时将配置文件拷贝至target目录下，依赖以下插件实现：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">						<span class="comment">&lt;!-- 拷贝至target目录 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;build.directory&#125;<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">								<span class="comment">&lt;!-- 资源文件原始路径 --&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>PropertiesUtil工具类实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.base.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(PropertiesUtil.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; configMap = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        loadProperties();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化propertiies</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Properties <span class="title">loadProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        InputStream in = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//优先从jar包同级conf目录获取配置文件</span></span><br><span class="line">        String confPath = System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        confPath = confPath + File.separator +<span class="string">&quot;conf&quot;</span>+ File.separator+ <span class="string">&quot;application.properties&quot;</span>;</span><br><span class="line">        File file = <span class="keyword">new</span> File(confPath);</span><br><span class="line">        <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;配置文件路径----&gt;&gt;&quot;</span> + confPath);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                in = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(confPath));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//未传入路径时，读取项目classpath路径下配置文件信息</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;项目路径[&quot;</span> + confPath + <span class="string">&quot;]下无连接信息，从classpath路径下加载&quot;</span>);</span><br><span class="line">            in = PropertiesUtil.class.getClassLoader().getResourceAsStream(<span class="string">&quot;conf/application.properties&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(in);</span><br><span class="line">            configMap = <span class="keyword">new</span> HashMap&lt;&gt;(properties.keySet().size());</span><br><span class="line">            logger.info(<span class="string">&quot;init properties&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Object keyObj : properties.keySet()) &#123;</span><br><span class="line">                String key = keyObj.toString();</span><br><span class="line">                Object objs = properties.get(key);</span><br><span class="line">                logger.info(key + <span class="string">&quot;:&quot;</span> + objs);</span><br><span class="line">                configMap.put(key.trim(), objs.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> properties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getSimpleValue</span><span class="params">(String key, String defaultValue)</span> </span>&#123;</span><br><span class="line">        String value = configMap.get(key);</span><br><span class="line">        <span class="keyword">if</span> (value == <span class="keyword">null</span> || value.trim().length() == <span class="number">0</span>) &#123;</span><br><span class="line">            value = defaultValue;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">assert</span> StringUtils.isNotBlank(value);</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getSimpleValue</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> configMap.get(key).toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getHttpPort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.valueOf(getSimpleValue(<span class="string">&quot;server.http.port&quot;</span>, <span class="string">&quot;8056&quot;</span>)).intValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getEsSQLPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getSimpleValue(<span class="string">&quot;es.sql.path&quot;</span>,<span class="string">&quot;/_sql&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getEsSQLExplainPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getSimpleValue(<span class="string">&quot;es.sql.explain.path&quot;</span>,<span class="string">&quot;/_sql/_explain&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p> jar包启动命令，启动时指定log4j.properties配置文件<br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//file:标识必须存在，表示从本地路径加载  &amp;代表后台启动，否则xshell窗口关闭的情况下，进程停止</span><br><span class="line"> java -jar -Dlog4j.configuration=file:./conf/log4j.properties XXX.jar &amp;</span><br></pre></td></tr></table></figure></p>
<h1><span id="启动命令"><span id="inline-blue">启动命令</span></span></h1><p> start.sh<br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash">!/bin/sh</span></span><br><span class="line">BINDIR=`dirname $0`</span><br><span class="line">if [ -n &quot;$BINDIR&quot; ] ; then</span><br><span class="line">    BINDIR=`cd $BINDIR &gt; /dev/null 2&gt;&amp;1 &amp;&amp; pwd`</span><br><span class="line">fi</span><br><span class="line">cd $BINDIR</span><br><span class="line">(java -jar -Dlog4j.configuration=file:./conf/log4j.properties EsTool_V1.0.0.jar &amp;)</span><br></pre></td></tr></table></figure><br> stop.sh<br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash">!/bin/sh</span></span><br><span class="line">ps -ef|grep &#x27;EsTool_V1.0.0.jar&#x27; | grep -v &quot;grep&quot; | awk &#x27;&#123;print $2&#125;&#x27; | xargs kill -9</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Elasticsearch-SQL插件安装.</title>
    <url>/Elasticsearch/blogs/Elasticsearch-SQL%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E6%8F%92%E4%BB%B6span"><span id="inline-blue">插件</span></a></li>
<li><a href="#span-idinline-blueelasticsearch-sql%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85span"><span id="inline-blue">Elasticsearch-SQL在线安装</span></a></li>
<li><a href="#span-idinline-blueelasticsearch-sql%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85span"><span id="inline-blue">Elasticsearch-SQL离线安装</span></a></li>
<li><a href="#span-idinline-bluees-sql-site-standalone%E5%AE%89%E8%A3%85span"><span id="inline-blue">es-sql-site-standalone安装</span></a></li>
<li><a href="#span-idinline-bluees-sql-site-standalone%E5%90%AF%E5%8A%A8span"><span id="inline-blue">es-sql-site-standalone启动</span></a></li>
<li><a href="#span-idinline-blueelasticsearch-sql%E5%92%8Cx-pack-sql%E5%B7%AE%E5%BC%82span"><span id="inline-blue">Elasticsearch-SQL和x-pack-sql差异</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>Elasticsearch-7.15.1</p>
<h1><span id="插件"><span id="inline-blue">插件</span></span></h1><p>Elasticsearch-SQL-7.15.1.0 : es SQL查询插件<br>es-sql-site-standalone ： es SQL查询前端<br>下载地址：链接：<a href="https://pan.baidu.com/s/1wyUFPOU6uywOOAhw2f9QEA">https://pan.baidu.com/s/1wyUFPOU6uywOOAhw2f9QEA</a><br>提取码：z2od</p>
<h1><span id="elasticsearch-sql在线安装"><span id="inline-blue">Elasticsearch-SQL在线安装</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Elasticsearch主目录下执行</span></span><br><span class="line">./bin/elasticsearch-plugin install https://github.com/NLPchina/elasticsearch-sql/releases/download/7.15.1.0/elasticsearch-sql-7.15.1.0.zip</span><br></pre></td></tr></table></figure>

<h1><span id="elasticsearch-sql离线安装"><span id="inline-blue">Elasticsearch-SQL离线安装</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">自行下载对应压缩包https://github.com/NLPchina/elasticsearch-sql/releases/download/7.15.1.0/elasticsearch-sql-7.15.1.0.zip,并将其上传至服务器/home目录，执行以下命令</span></span><br><span class="line">cd /usr/local/ELK/elasticsearch-7.15.1/</span><br><span class="line">./bin/elasticsearch-plugin install file:/home/elasticsearch-sql-7.15.1.0.zip</span><br></pre></td></tr></table></figure>
<h1><span id="es-sql-site-standalone安装"><span id="inline-blue">es-sql-site-standalone安装</span></span></h1><p>在Elasticsearch主目录下创建文件夹global_plugins,将es-sql-site-standalone.zip上传到该目录下，执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unzip es-sql-site-standalone.zip -d es-sql-site</span><br></pre></td></tr></table></figure>
<p>修改访问的配置端口：<br>/usr/local/ELK/elasticsearch-7.15.1/global_plugins/es-sql-site/site-server/site_configuration.json</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;port&quot;:8080</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Elasticsearch-SQL api访问路径变更：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Since 7.5.0.0, the path /_sql is changed to /_nlpcn/sql, and the path /_sql/_explain is changed to /_nlpcn/sql/explain.</span><br></pre></td></tr></table></figure>
<p>修改/usr/local/ELK/elasticsearch-7.15.1/global_plugins/es-sql-site/_site/controllers.js<br>184行和250行分别将_sql路径变更为_nlpcn/sql、_sql/_explain变更为_nlpcn/sql/explain</p>
<p>修改es配置：<br>ES的elasticsearch.yml，增加跨域的配置(需要重启es才能生效) </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http.cors.enabled: true  </span><br><span class="line">http.cors.allow-origin: &quot;*&quot;</span><br></pre></td></tr></table></figure>
<p>编辑controllers.js文件,修改es访问地址：/usr/local/ELK/elasticsearch-7.15.1/global_plugins/es-sql-site/_site/controllers.js</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if (location.protocol == &quot;file&quot;) &#123;</span><br><span class="line">                              url = &quot;http://localhost:9200&quot;</span><br><span class="line">                      &#125;</span><br><span class="line">                      else &#123;</span><br><span class="line">                              url = location.protocol+&#x27;//&#x27; + location.hostname + (location.port ? &#x27;:&#x27;+location.port : &#x27;&#x27;);</span><br><span class="line">                      &#125;</span><br><span class="line">              &#125;</span><br></pre></td></tr></table></figure>
<p>修改url地址为ES服务器的地址：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if (location.protocol == &quot;file&quot;) &#123;</span><br><span class="line">                               url = &quot;http://10.9.216.12:9200&quot;</span><br><span class="line">                       &#125;</span><br><span class="line">                       else &#123;</span><br><span class="line">                               url = &quot;http://10.9.216.12:19200&quot;;</span><br><span class="line">                       &#125;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="es-sql-site-standalone启动"><span id="inline-blue">es-sql-site-standalone启动</span></span></h1><p>es-sql-site-standalone插件需要node环境支持，除此之外需要连接外网<br>有外网的情况下启动：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/ELK/elasticsearch-7.15.1/global_plugins/es-sql-site/site-server</span><br><span class="line">npm install express --save</span><br><span class="line">node node-server.js</span><br></pre></td></tr></table></figure>
<p>访问验证：<br><img src="/images/elasticsearch/es_20230802_001.png" alt="Elasticsearch-SQL"><br>无外网的情况下，将es-sql-site-standalone.zip上传到tomcat的webapps目录下解压,将es-sql-site-standalone作为一个web服务对外提供访问</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tomcat8/webapps/</span><br><span class="line">unzip es-sql-site-standalone.zip -d sql</span><br></pre></td></tr></table></figure>
<p>端口和es访问地址及api接口路径修改方式和上述相同，自行修改。</p>
<p>访问验证：<br>启动tomcat，访问 ip:端口/sql/_site/<br><img src="/images/elasticsearch/es_20230802_002.png" alt="Elasticsearch-SQL"></p>
<h1><span id="elasticsearch-sql和x-pack-sql差异"><span id="inline-blue">Elasticsearch-SQL和x-pack-sql差异</span></span></h1><p>Elasticsearch-SQL接口访问<br>访问地址<br><a href="http://10.26.0.22:9200/_nlpcn/sql">http://10.26.0.22:9200/_nlpcn/sql</a><br>参数信息,直接写查询SQL<br>{<br>    SELECT * FROM nginx-error-2023.08.01<br>}</p>
<p><img src="/images/elasticsearch/es_20230802_003.png" alt="Elasticsearch-SQL"><br>x-pack-sql接口访问<br>访问地址<br><a href="http://10.26.0.22:9200/_sql">http://10.26.0.22:9200/_sql</a><br>参数信息,索引需要用\转义双引号包起来，否则查询失败<br>{<br>  “query”: “SELECT * FROM &quot;nginx-error-2023.08.01&quot; “<br>}</p>
<p><img src="/images/elasticsearch/es_20230802_004.png" alt="Elasticsearch-SQL"></p>
]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux tar.xz格式压缩文件解压命令</title>
    <url>/Linux/blogs/Linux%20tar.xz%E6%A0%BC%E5%BC%8F%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%8E%8Bspan"><span id="inline-blue">解压</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><pre><code>tar.xz格式的压缩包和tar.gz格式解压命令不一样，记录一下</code></pre>
<h1><span id="解压"><span id="inline-blue">解压</span></span></h1><p>压缩文件名：glibc-2.27.tar.xz</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进行两次解压</span></span><br><span class="line"><span class="meta">#</span><span class="bash">先解压xz</span></span><br><span class="line">xz -d glibc-2.27.tar.xz</span><br><span class="line"><span class="meta">#</span><span class="bash">在解压tar格式</span></span><br><span class="line">tar -xvf glibc-2.27.tar</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux curl命令GET&amp;POST请求示例</title>
    <url>/Linux/blogs/Linux%20curl%E5%91%BD%E4%BB%A4GET&amp;POST%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8B/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-bluecurl%E5%91%BD%E4%BB%A4span"><span id="inline-blue">curl命令</span></a></li>
<li><a href="#span-idinline-blueget%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8Bspan"><span id="inline-blue">GET请求示例</span></a></li>
<li><a href="#span-idinline-bluepost%E8%AF%B7%E6%B1%82%E7%A4%BA%E4%BE%8Bspan"><span id="inline-blue">POST请求示例</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><pre><code>因为VPN的原因导致不能直接通过第三方工具请求接口数据，需要直接在服务器上请求对应服务接口</code></pre>
<h1><span id="curl命令"><span id="inline-blue">curl命令</span></span></h1><p>选项<br> -X  指定请求的方式  GET/POST<br> -H  指定请求的头部信息<br> -d  指定请求的参数内容</p>
<h1><span id="get请求示例"><span id="inline-blue">GET请求示例</span></span></h1> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl htttp://10.9.216.12:8080/iepg/getMarquee?terminalType=1&amp;version=20000</span><br></pre></td></tr></table></figure>
<h1><span id="post请求示例"><span id="inline-blue">POST请求示例</span></span></h1><p> 向指定接口发送xml报文并指定头部请求信息<br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -X POST http://10.9.219.31:8080/GetItemData \</span><br><span class="line">  -H &quot;Content-Type: application/xml&quot; \</span><br><span class="line">  -H &quot;Host: 10.9.212.55:8080&quot; \</span><br><span class="line">  -H &quot;Connection: Keep-Alive&quot; \</span><br><span class="line">  -d &quot;&lt;GetItemData titleAssetId=&#x27;OTHE0000000001237979&#x27; portalId=&#x27;1&#x27; client=&#x27;8591102716069168&#x27; account=&#x27;8591102716069168&#x27; languageCode=&#x27;Zh-CN&#x27; profile=&#x27;1&#x27; /&gt;&quot;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>WildFly请求过滤重写实现</title>
    <url>/WildFly/blogs/WildFly%E8%AF%B7%E6%B1%82%E8%BF%87%E6%BB%A4%E9%87%8D%E5%86%99%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-bluewildfly%E8%BF%87%E6%BB%A4%E5%99%A8%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">WildFly过滤器实现</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AEundertow%E5%AD%90%E7%B3%BB%E7%BB%9Fspan"><span id="inline-blue">配置undertow子系统</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>WildFly容器部署项目偶现400 Bad request请求，在排查环境没有结果的情况下希望通过记录wildFly的请求，分析请求内容处理这一异常请求。</p>
<h1><span id="wildfly过滤器实现"><span id="inline-blue">WildFly过滤器实现</span></span></h1><p>初始化maven项目custom-filter<br>pom.xml文件定义如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;name&gt;custom-undertow-filter&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.coship.wildfly.undertow.custom.filter&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;custom-undertow-filter&lt;/artifactId&gt;</span><br><span class="line">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">    &lt;version&gt;1.0&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;slf4j-version&gt;1.7.12&lt;/slf4j-version&gt;</span><br><span class="line">        &lt;undertow-core-version&gt;2.2.16.Final&lt;/undertow-core-version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            We want to exclude module.xml from the artifact, it does not belong there.</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;resources&gt;</span><br><span class="line">            &lt;resource&gt;</span><br><span class="line">                &lt;directory&gt;src/main/resources&lt;/directory&gt;</span><br><span class="line">                &lt;excludes&gt;</span><br><span class="line">                    &lt;exclude&gt;module.xml&lt;/exclude&gt;</span><br><span class="line">                &lt;/excludes&gt;</span><br><span class="line">            &lt;/resource&gt;</span><br><span class="line">        &lt;/resources&gt;</span><br><span class="line">        &lt;pluginManagement&gt;</span><br><span class="line">            &lt;plugins&gt;</span><br><span class="line">                &lt;plugin&gt;</span><br><span class="line">                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</span><br><span class="line">                    &lt;configuration&gt;</span><br><span class="line">                        &lt;source&gt;1.8&lt;/source&gt;</span><br><span class="line">                        &lt;target&gt;1.8&lt;/target&gt;</span><br><span class="line">                    &lt;/configuration&gt;</span><br><span class="line">                &lt;/plugin&gt;</span><br><span class="line">                &lt;plugin&gt;</span><br><span class="line">                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;</span><br><span class="line">                    &lt;executions&gt;</span><br><span class="line">                        &lt;execution&gt;</span><br><span class="line">                            &lt;id&gt;attach-sources&lt;/id&gt;</span><br><span class="line">                            &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">                            &lt;goals&gt;</span><br><span class="line">                                &lt;goal&gt;jar&lt;/goal&gt;</span><br><span class="line">                            &lt;/goals&gt;</span><br><span class="line">                        &lt;/execution&gt;</span><br><span class="line">                    &lt;/executions&gt;</span><br><span class="line">                &lt;/plugin&gt;</span><br><span class="line">            &lt;/plugins&gt;</span><br><span class="line">        &lt;/pluginManagement&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;slf4j-version&#125;&lt;/version&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;slf4j-version&#125;&lt;/version&gt;</span><br><span class="line">                &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;io.undertow&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;undertow-core&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;undertow-core-version&#125;&lt;/version&gt;</span><br><span class="line">                &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">        &lt;/dependencies&gt;</span><br><span class="line">    &lt;/dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;io.undertow&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;undertow-core&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;commons-lang&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.4&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<p>项目只包含一个java类RewriteRequestURLHandler,实现如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.wildfly.undertow.custom.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.undertow.server.HttpHandler;</span><br><span class="line"><span class="keyword">import</span> io.undertow.server.HttpServerExchange;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang.StringEscapeUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RewriteRequestURLHandler</span> <span class="keyword">implements</span> <span class="title">HttpHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(RewriteRequestURLHandler.class);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">private</span> HttpHandler next;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Illegal whitespace encoding at the beginning and end of the URL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span>  String escapedCharactersInUrl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  String <span class="title">getEscapedCharactersInUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> escapedCharactersInUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">setEscapedCharactersInUrl</span><span class="params">(String param)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.escapedCharactersInUrl = param;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RewriteRequestURLHandler</span><span class="params">(HttpHandler next)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(HttpServerExchange exchange)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        String requestURI = exchange.getRequestURI();</span><br><span class="line">        String requestPath = exchange.getRequestPath();</span><br><span class="line">        String relativePath = exchange.getRelativePath();</span><br><span class="line">        log.info(<span class="string">&quot;rewrite before: requestURI&quot;</span>+requestURI+<span class="string">&quot;,length:&quot;</span>+requestURI.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite before: requestPath&quot;</span>+requestPath+<span class="string">&quot;,length:&quot;</span>+requestPath.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite before: relativePath&quot;</span>+relativePath+<span class="string">&quot;,length:&quot;</span>+relativePath.length());</span><br><span class="line">        <span class="keyword">if</span>(!isEmpty(escapedCharactersInUrl))&#123;</span><br><span class="line">            String [] escapedCharacters   = escapedCharactersInUrl.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(String escapedCharacter : escapedCharacters)&#123;</span><br><span class="line">                <span class="keyword">if</span>(requestURI.indexOf(escapedCharacter) == <span class="number">0</span> || requestURI.lastIndexOf(escapedCharacter) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    requestURI = trim(requestURI,escapedCharacter);</span><br><span class="line">                    exchange.setRequestURI(requestURI);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(requestPath.indexOf(escapedCharacter) == <span class="number">0</span> || requestPath.lastIndexOf(escapedCharacter) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    requestPath = trim(requestPath,escapedCharacter);</span><br><span class="line">                    exchange.setRequestPath(requestPath);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(relativePath.indexOf(escapedCharacter) == <span class="number">0</span> || relativePath.lastIndexOf(escapedCharacter) != -<span class="number">1</span>)&#123;</span><br><span class="line">                    relativePath = trim(relativePath,escapedCharacter);</span><br><span class="line">                    exchange.setRelativePath(relativePath);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;rewrite after: requestURI&quot;</span>+requestURI+<span class="string">&quot;,length:&quot;</span>+requestURI.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite after: requestPath&quot;</span>+requestPath+<span class="string">&quot;,length:&quot;</span>+requestPath.length());</span><br><span class="line">        log.info(<span class="string">&quot;rewrite after: relativePath&quot;</span>+relativePath+<span class="string">&quot;,length:&quot;</span>+relativePath.length());</span><br><span class="line">        next.handleRequest(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Remove illegal characters that appear at the beginning and end of the request URL</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> substr</span></span><br><span class="line"><span class="comment">     * example http://10.9.212.55:28080/GettItemData%20 -&gt;  http://10.9.212.55:28080/GettItemData</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">trim</span><span class="params">(String str, String substr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> beginIndexFlag;</span><br><span class="line">        <span class="keyword">boolean</span> endIndexFlag;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> beginIndex = str.indexOf(substr) == <span class="number">0</span> ? substr.length() : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> endIndex = str.lastIndexOf(substr) + substr.length() == str.length() ? str.lastIndexOf(substr) : str.length();</span><br><span class="line">            str = str.substring(beginIndex, endIndex);</span><br><span class="line">            beginIndexFlag = (str.indexOf(substr) == <span class="number">0</span>);</span><br><span class="line">            endIndexFlag = (str.lastIndexOf(substr) + substr.length() == str.length());</span><br><span class="line">        &#125; <span class="keyword">while</span> (beginIndexFlag || endIndexFlag);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * determine if the string is empty</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">isEmpty</span><span class="params">(String str)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (str == <span class="keyword">null</span> || str.isEmpty());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>项目配置文件module.xml如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">module</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:module:1.6&quot;</span> <span class="attr">name</span>=<span class="string">&quot;com.coship.wildfly.undertow.custom.filter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource-root</span> <span class="attr">path</span>=<span class="string">&quot;custom-undertow-filter-1.0.jar&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;io.undertow.core&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;org.slf4j&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上就是自定义过滤器的实现，但是想要让WildFly加载自定义过滤器还需要做一下准备工作。<br>1、将custom-filter项目通过maven install打包后生成custom-filter-1.0.jar和module.xml文件上传服务器，在WildFly的主目录下module子目录下创建custom-filter项目的包目录,并创建子目录main,上传刚才打包的jar包和module.xml到main目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/fujian_sdp/wildfly26-portal/modules</span><br><span class="line">mkdir com/coship/wildfly/undertow/custom/filter/main</span><br></pre></td></tr></table></figure>
<p>custom-filter项目的包目录：com.coship.wildfly.undertow.custom.filter<br>WIldFly的module目录：/usr/local/fujian_sdp/wildfly26-portal/modules<br>如下图所示：<br><img src="/images/WildFly/WildFly_20230728_001.png" alt="WildFly过滤器重写"></p>
<h1><span id="配置undertow子系统"><span id="inline-blue">配置undertow子系统</span></span></h1><p>在undertow子系统声明filter,文件所在路径参考：/usr/local/fujian_sdp/wildfly26-portal/standalone/configuration/standalone.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:undertow:3.0&quot;</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line">   <span class="tag">&lt;<span class="name">filters</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">      <span class="tag">&lt;<span class="name">filter</span> <span class="attr">name</span>=<span class="string">&quot;response-time&quot;</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">module</span>=<span class="string">&quot;com.novaordis.playground.wildfly.undertow.customfilter:1&quot;</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">class-name</span>=<span class="string">&quot;com.novaordis.playground.wildfly.undertow.customfilter.ResponseTimeHandler&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>配置filter额外参数</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;value1&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>为明确主机请求声明过滤器引用</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:undertow:3.0&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">      <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">location</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">           ...</span><br><span class="line">           <span class="tag">&lt;<span class="name">filter-ref</span> <span class="attr">name</span>=<span class="string">&quot;response-time&quot;</span>/&gt;</span></span><br><span class="line">           ...</span><br><span class="line">      <span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>WildFly</category>
      </categories>
      <tags>
        <tag>WildFly</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker容器实现自定义IP</title>
    <url>/Docker/blogs/Docker%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89IP/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E5%B7%A5%E5%85%B7span"><span id="inline-blue">工具</span></a></li>
<li><a href="#span-idinline-bluebridge-util%E5%AE%89%E8%A3%85span"><span id="inline-blue">bridge-util安装</span></a></li>
<li><a href="#span-idinline-bluepipework%E5%AE%89%E8%A3%85span"><span id="inline-blue">pipework安装</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%B9%E5%99%A8%E8%87%AA%E5%AE%9A%E4%B9%89ipspan"><span id="inline-blue">容器自定义IP</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>应用使用docker容器化后，需要跨宿主机访问，实现要求是宿主机和内部容器可以互通，且外部主机可以直接访问容器服务</p>
<h2><span id="工具"><span id="inline-blue">工具</span></span></h2><p>bridge-util : linux系统网桥管理工具<br>pipework : Docker 网络增强插件</p>
<h2><span id="bridge-util安装"><span id="inline-blue">bridge-util安装</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum搜索bridge-util所在源</span><br><span class="line">[root@S21614 ~]# yum search bridge</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">==================================================================== N/S matched: bridge ====================================================================</span><br><span class="line">bridge-utils.x86_64 : Utilities for configuring the linux ethernet bridge</span><br><span class="line">cockpit-bridge.x86_64 : Cockpit bridge server-side component</span><br><span class="line">at-spi2-atk.x86_64 : A GTK+ module that bridges ATK to D-Bus at-spi</span><br><span class="line">at-spi2-atk-devel.x86_64 : A GTK+ module that bridges ATK to D-Bus at-spi</span><br><span class="line">ebtables.x86_64 : Ethernet Bridge frame table administration tool</span><br><span class="line">kaccessible.x86_64 : An accessibility bridge plugin</span><br><span class="line"></span><br><span class="line">  Name and summary matches only, use &quot;search all&quot; for everything.</span><br><span class="line"><span class="meta">  #</span><span class="bash">独立安装bridge-utils.x86_64</span></span><br><span class="line">[root@S21614 ~]# yum -y install bridge-utils.x86_64</span><br></pre></td></tr></table></figure>
<p>如果没有yum环境可以使用离线安装方式，离线安装包地址：<br><a href="https://www.linuxfromscratch.org/blfs/view/svn/basicnet/bridge-utils.html">https://www.linuxfromscratch.org/blfs/view/svn/basicnet/bridge-utils.html</a></p>
<h2><span id="pipework安装"><span id="inline-blue">pipework安装</span></span></h2><p><a id="download" href="/images/docker/pipwork/pipework"><i class="fa fa-download"></i><span>pipework下载</span> </a><br>上传至服务器/usr/bin/目录下，并执行一下命令赋予可执行权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod a+x /usr/bin/pipework</span><br></pre></td></tr></table></figure>

<h2><span id="容器自定义ip"><span id="inline-blue">容器自定义IP</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">拉取nginx镜像</span></span><br><span class="line">docker pull centos</span><br><span class="line"><span class="meta">#</span><span class="bash">生成容器centos7_1、centos7_2</span></span><br><span class="line">docker run -itd --name centos7_1 --net=none eeb6ee3f44bd /bin/bash</span><br><span class="line">docker run -itd --name centos7_2 --net=none eeb6ee3f44bd /bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash">生成网桥，并将容器ip与网桥添加关联，为容器设置自定义IP 10.9.216.101对应设置IP地址,10.9.216.254是网关</span></span><br><span class="line">pipework br0 centos7_1 10.9.216.101/24@10.9.216.254</span><br><span class="line">pipework br0 centos7_2 10.9.216.102/24@10.9.216.254</span><br><span class="line">[root@S21614 ~]# ifconfig</span><br><span class="line">br0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 10.9.216.14  netmask 255.255.255.0  broadcast 0.0.0.0</span><br><span class="line">        inet6 fe80::cd2:b8ff:fe65:6480  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        inet6 10:9:216:0:10a5:faff:fe02:85b9  prefixlen 64  scopeid 0x0&lt;global&gt;</span><br><span class="line">        ether 12:a5:fa:02:85:b9  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 66482  bytes 3751391 (3.5 MiB)</span><br><span class="line">        RX errors 0  dropped 490  overruns 0  frame 0</span><br><span class="line">        TX packets 64499  bytes 87368127 (83.3 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">docker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line">        ether 02:42:66:bb:45:a6  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">eno1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet6 10:9:216:0:42f2:e9ff:fe0d:cfb4  prefixlen 64  scopeid 0x0&lt;global&gt;</span><br><span class="line">        inet6 fe80::42f2:e9ff:fe0d:cfb4  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 40:f2:e9:0d:cf:b4  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 72999  bytes 5265597 (5.0 MiB)</span><br><span class="line">        RX errors 0  dropped 8  overruns 0  frame 0</span><br><span class="line">        TX packets 92671  bytes 93048588 (88.7 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line">        device memory 0xa9a60000-a9a7ffff  </span><br><span class="line"><span class="meta">#</span><span class="bash">将eno1网卡的ip地址移植到bro网桥,添加bro和eno1网关关联，为bro网桥和网关添加路由，以下命令必须在一行执行，否则会出现ssh断掉不能连接的情况</span></span><br><span class="line">ip addr add 10.9.216.14/24 dev br0; \</span><br><span class="line">ip addr del 10.9.216.14/24 dev eno1; \</span><br><span class="line">brctl addif br0 eno1; \</span><br><span class="line">route del default; \</span><br><span class="line">route add default gw 10.9.216.254 dev br0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">删除网桥和网卡eno1关联(如果ssh断掉的情况下需要执行以下命令删除网卡和网桥关联，这一步需要机房登陆服务器操作)</span></span><br><span class="line">brctl delif br0 eno1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">brctl 相关命令</span></span><br><span class="line"></span><br><span class="line">参数	说明	示例</span><br><span class="line">addbr &lt;bridge&gt;	创建网桥	brctl addbr br10</span><br><span class="line">delbr &lt;bridge&gt;	删除网桥	brctl delbr br10</span><br><span class="line">addif &lt;bridge&gt; &lt;device&gt;	将网卡接口接入网桥	brctl addif br10 eth0</span><br><span class="line">delif &lt;bridge&gt; &lt;device&gt;	删除网桥接入的网卡接口	brctl delif br10 eth0</span><br><span class="line">show &lt;bridge&gt;	查询网桥信息	brctl show br10</span><br><span class="line">stp &lt;bridge&gt; &#123;on|off&#125;	启用禁用 STP	brctl stp br10 off/on</span><br><span class="line">showstp &lt;bridge&gt;	查看网桥 STP 信息	brctl showstp br10</span><br><span class="line">setfd &lt;bridge&gt; &lt;time&gt;	设置网桥延迟	brctl setfd br10 10</span><br><span class="line">showmacs &lt;bridge&gt;	查看 mac 信息	brctl showmacs br10</span><br></pre></td></tr></table></figure>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>宿主机访问容器centos7_1: 10.9.216.101</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21614 ~]# ping 10.9.216.101</span><br><span class="line">PING 10.9.216.101 (10.9.216.101) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=1 ttl=64 time=0.162 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=2 ttl=64 time=0.047 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=3 ttl=64 time=0.048 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=4 ttl=64 time=0.048 ms</span><br><span class="line">^X64 bytes from 10.9.216.101: icmp_seq=5 ttl=64 time=0.067 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=6 ttl=64 time=0.048 ms</span><br></pre></td></tr></table></figure>

<p>宿主机访问容器centos7_2: 10.9.216.102</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@S21614 ~]# ping 10.9.216.102</span><br><span class="line">PING 10.9.216.102 (10.9.216.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=1 ttl=64 time=0.160 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=2 ttl=64 time=0.052 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=3 ttl=64 time=0.048 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=4 ttl=64 time=0.048 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=5 ttl=64 time=0.048 ms</span><br></pre></td></tr></table></figure>

<p>容器centos7_1访问宿主机10.9.216.14</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入容器centos7_1内部</span></span><br><span class="line">[root@S21614 ~]# docker exec -it centos7_1 /bin/bash</span><br><span class="line">[root@f843b5d71fdb /]# ping 10.9.216.14</span><br><span class="line">PING 10.9.216.14 (10.9.216.14) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=1 ttl=64 time=0.109 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=2 ttl=64 time=0.059 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=3 ttl=64 time=0.056 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=4 ttl=64 time=0.058 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=5 ttl=64 time=0.056 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=6 ttl=64 time=0.056 ms</span><br></pre></td></tr></table></figure>
<p>容器centos7_1(10.9.216.101)访问容器centos7_2(10.9.216.102)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@f843b5d71fdb /]# ping 10.9.216.102</span><br><span class="line">PING 10.9.216.102 (10.9.216.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=1 ttl=64 time=0.197 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=2 ttl=64 time=0.075 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=3 ttl=64 time=0.070 ms</span><br><span class="line">64 bytes from 10.9.216.102: icmp_seq=4 ttl=64 time=0.069 ms</span><br></pre></td></tr></table></figure>
<p>容器centos7_2访问宿主机10.9.216.14</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@9210f0ab69fe /]# ping 10.9.216.14 </span><br><span class="line">PING 10.9.216.14 (10.9.216.14) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=1 ttl=64 time=0.088 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=2 ttl=64 time=0.060 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=3 ttl=64 time=0.057 ms</span><br><span class="line">64 bytes from 10.9.216.14: icmp_seq=4 ttl=64 time=0.070 ms</span><br></pre></td></tr></table></figure>
<p>容器centos7_2(10.9.216.101)访问容器centos7_1(10.9.216.102)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">进入容器centos7_2内部</span></span><br><span class="line">[root@S21614 ~]# docker exec -it centos7_2 /bin/bash</span><br><span class="line">[root@9210f0ab69fe /]# ping 10.9.216.101</span><br><span class="line">PING 10.9.216.101 (10.9.216.101) 56(84) bytes of data.</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=1 ttl=64 time=0.114 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=2 ttl=64 time=0.082 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=3 ttl=64 time=0.072 ms</span><br><span class="line">64 bytes from 10.9.216.101: icmp_seq=4 ttl=64 time=0.070 ms</span><br></pre></td></tr></table></figure>
<p>服务器重启之后网桥信息会丢失，需要重新配置</p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Tcpdump抓包</title>
    <url>/Linux/blogs/Tcpdump%E6%8A%93%E5%8C%85/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-bluetcpdump%E5%91%BD%E4%BB%A4span"><span id="inline-blue">tcpdump命令</span></a></li>
<li><a href="#span-idinline-blue%E7%A4%BA%E4%BE%8Bspan"><span id="inline-blue">示例</span></a></li>
<li><a href="#span-idinline-blue%E5%85%B3%E9%94%AE%E5%AD%97%E6%90%9C%E7%B4%A2span"><span id="inline-blue">关键字搜索</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><pre><code>抓取Linux服务器上来自某一特定IP地址和端口的请求信息</code></pre>
<h1><span id="tcpdump命令"><span id="inline-blue">tcpdump命令</span></span></h1><p>选项<br> -i  # 指定监听网络接口<br> -w  # 将捕获到的信息保存到文件中，且不分析和打印在屏幕<br> -r  # 从文件中读取数据<br> -n  # 不把 ip 转化成域名<br> -t  # 在每行的输出中不显示时间<br> -v  # 产生详细的输出<br> -vv # 产生比-v选项更为详细的输出<br> -c  #  指定收取数据包的次数<br> -C  # 与 -w FILE 选项配合使用<br> -Q  #  选择是入方向还是出方向的数据包<br> -q  # 简洁地打印输出<br> -s  # 指定每个包捕获的长度<br> -A   # 以 ASCII 格式打印出所有的分组并且读取此文件<br> -e  # 在输出行打印出数据链路层的头部信息<br> -F  # 指定使用哪个文件的过滤表达式抓包<br> -l  # 对标准输出进行行缓冲</p>
<h1><span id="示例"><span id="inline-blue">示例</span></span></h1><p> 抓取源地址10.9212.55请求目的地址10.9.219.31对应8080端口请求信息<br> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tcpdump -i eth1 port 8080 and src host 10.9.212.55 and dst host 10.9.219.31 -s 0 -vv -w /tmp/1.cap</span><br></pre></td></tr></table></figure></p>
<h1><span id="关键字搜索"><span id="inline-blue">关键字搜索</span></span></h1><p> 报文通过wireshark打开后点击下图中的搜索图标，将搜索类型修改为字符串，在搜索框填写关键字，点击查找即开始查找。<br> <img src="/images/linux/Linux_20230728_001.png" alt="wireshark分析"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Tcpdump</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker部署Minio，分享地址为Docker内ip地址问题</title>
    <url>/Minio/blogs/Docker%E9%83%A8%E7%BD%B2minio%EF%BC%8C%E5%88%86%E4%BA%AB%E5%9C%B0%E5%9D%80%E4%B8%BADocker%E5%86%85ip%E5%9C%B0%E5%9D%80%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="背景"><span id="inline-blue">背景</span></span></h2><p>通过Docker拉取minio镜像，生成容器访问后发现分享的地址是docker容器内部的ip地址，导致无法访问</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>拉取minio镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull minio/minio</span><br></pre></td></tr></table></figure>
<p>生成容器并后台启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 9000:9000 -p 9091:9091 --name=minio --restart=always -e &quot;MINIO_SERVER_URL=http://192.168.99.100:9000&quot; -e &quot;MINIO_ACCESS_KEY=admin&quot; -e &quot;MINIO_SECRET_KEY=admin123&quot; -v /d/minio/upload/data:/data -v /d/minio/upload/data:/root/.minio  minio/minio server /data --console-address &quot;:9091&quot; --address &quot;:9000&quot;</span><br></pre></td></tr></table></figure>

<p>-e “MINIO_SERVER_URL=<a href="http://192.168.99.100:9000&quot;">http://192.168.99.100:9000&quot;</a>  参数指定生成minio应用程序分享地址环境变量</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>再次上传文件并分享后分享图片链接地址</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http://192.168.99.100:9000/test/logo.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=YLMFB2ERQR4GQDRZ0IRA%2F20230718%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20230718T081006Z&amp;X-Amz-Expires=604800&amp;X-Amz-Security-Token=eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NLZXkiOiJZTE1GQjJFUlFSNEdRRFJaMElSQSIsImV4cCI6MTY4OTY3MTI1MSwicGFyZW50IjoiYWRtaW4ifQ.hiSBI9bahX8crhponMuIglPWArfm5Y4-PcW5MTdPsKdXnWJeyiIDumvCTh9Pg1eNsnHkKxNQnx-yOeWfUgIU1g&amp;X-Amz-SignedHeaders=host&amp;versionId=null&amp;X-Amz-Signature=139e32da7c2541b2cc16d01d2157256196711f24afb8034046eebbccf6e728ef</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Minio</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Minio</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx反向代理导致接口响应超时</title>
    <url>/Nginx/blogs/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AF%BC%E8%87%B4%E6%8E%A5%E5%8F%A3%E5%93%8D%E5%BA%94%E8%B6%85%E6%97%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84span"><span id="inline-blue">代理访问路径</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E8%AF%A6%E6%83%85span"><span id="inline-blue">配置详情</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="代理访问路径"><span id="inline-blue">代理访问路径</span></span></h2><p>接口真实访问地址：<a href="http://10.26.0.19:9001/prodtest/admin/user/getCaptcha?width=140&amp;height=50">http://10.26.0.19:9001/prodtest/admin/user/getCaptcha?width=140&amp;height=50</a></p>
<p>接口代理访问地址：<a href="http://10.26.0.19:8080/prodtest/admin/user/getCaptcha?width=140&amp;height=50">http://10.26.0.19:8080/prodtest/admin/user/getCaptcha?width=140&amp;height=50</a></p>
<h2><span id="配置详情"><span id="inline-blue">配置详情</span></span></h2><p>前端访问接口耗时接近10秒，nginx代理超时配置配置多少都是等待超时然后请求报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">		client_max_body_size 1024m; </span><br><span class="line">        listen       8080;</span><br><span class="line">        server_name  10.26.0.19;</span><br><span class="line">		try_files $uri $uri/ /index.html;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line"><span class="meta">			#</span><span class="bash">gzip_static on; <span class="comment"># 开启后查找.gz结尾的文件直接返回，不进行压缩</span></span></span><br><span class="line">			gzip_min_length 1k; # 文件大于1K才进行压缩</span><br><span class="line">			gzip_http_version 1.1; # 设置gzip针对的http协议版本</span><br><span class="line">			gzip_comp_level 9; # 压缩级别，1-9，数字越大压缩越好，越占用cpu</span><br><span class="line">			gzip_types  text/css application/javascript; # 进行压缩的文件类型</span><br><span class="line">			autoindex on;</span><br><span class="line">            root   /home/prodtest/dist-protest;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">			try_files $uri $uri/ /index.html;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line"><span class="meta">		#</span><span class="bash"> 反向代理</span></span><br><span class="line">        location /prodtest &#123;</span><br><span class="line">			 #gzip_static on; # 开启后查找.gz结尾的文件直接返回，不进行压缩</span><br><span class="line">			 gzip_min_length 1k; # 文件大于1K才进行压缩</span><br><span class="line">			 gzip_http_version 1.1; # 设置gzip针对的http协议版本</span><br><span class="line">			 gzip_comp_level 9; # 压缩级别，1-9，数字越大压缩越好，越占用cpu</span><br><span class="line">			 gzip_types  text/css application/javascript; # 进行压缩的文件类型</span><br><span class="line">             proxy_pass http://10.26.0.19:9001/prodtest;</span><br><span class="line">             proxy_set_header Host 10.26.0.19;</span><br><span class="line">             proxy_connect_timeout 10;</span><br><span class="line">             proxy_send_timeout 10;</span><br><span class="line">             proxy_read_timeout 10;</span><br><span class="line">             send_timeout 10;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="原因"><span id="inline-blue">原因</span></span></h2><p>域名解析导致<br> 文件/etc/resolv.conf配置内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">; generated by /usr/sbin/dhclient-script</span></span><br><span class="line">search openstacklocal novalocal</span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 114.114.114.114</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 8.8.8.8</span></span><br><span class="line">nameserver 10.26.0.2</span><br><span class="line">nameserver 10.26.0.1</span><br><span class="line">nameserver 10.26.0.3</span><br></pre></td></tr></table></figure>
<p>search openstacklocal novalocal<br>search 的作用：<br>当访问的域名不能被DNS解析时，resolver会将该域名加上search后面指定的参数，重新请求DNS，直到被正确解析或试完search指定的列表为止。<br>示例：主机名为app1.novalocal，请求主机名对应的服务nacos，端口连接变成app1.novalocal.novalocal</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@app1.novalocal etc]# lsof -i:9848</span><br><span class="line">COMMAND   PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME</span><br><span class="line">java     5579 root   73u  IPv6 37126139      0t0  TCP app1.novalocal.novalocal:51446-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java     5579 root   76u  IPv6 37130258      0t0  TCP app1.novalocal.novalocal:51452-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java     9071 root    9u  IPv6 32331770      0t0  TCP app1.novalocal:58587-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java     9071 root   72u  IPv6 32329519      0t0  TCP app1.novalocal:58598-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    28503 root   25u  IPv6 37128402      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:51446 (ESTABLISHED)</span><br><span class="line">java    28503 root  200u  IPv6 31969988      0t0  TCP *:9848 (LISTEN)</span><br><span class="line">java    28503 root  284u  IPv6 32242521      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:57686 (ESTABLISHED)</span><br><span class="line">java    28503 root  287u  IPv6 37128424      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:51452 (ESTABLISHED)</span><br><span class="line">java    28503 root  289u  IPv6 32126224      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56532 (ESTABLISHED)</span><br><span class="line">java    28503 root  290u  IPv6 32329520      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:58598 (ESTABLISHED)</span><br><span class="line">java    28503 root  292u  IPv6 32242558      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:57700 (ESTABLISHED)</span><br><span class="line">java    28503 root  295u  IPv6 32128146      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56550 (ESTABLISHED)</span><br><span class="line">java    28503 root  296u  IPv6 32331775      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:58587 (ESTABLISHED)</span><br><span class="line">java    28503 root  299u  IPv6 32125133      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56558 (ESTABLISHED)</span><br><span class="line">java    28503 root  303u  IPv6 32125156      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56582 (ESTABLISHED)</span><br><span class="line">java    28503 root  304u  IPv6 32121662      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56572 (ESTABLISHED)</span><br><span class="line">java    28503 root  306u  IPv6 32127363      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56598 (ESTABLISHED)</span><br><span class="line">java    28503 root  307u  IPv6 32125183      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56587 (ESTABLISHED)</span><br><span class="line">java    28503 root  317u  IPv6 32123270      0t0  TCP app1.novalocal:9848-&gt;app1.novalocal:56614 (ESTABLISHED)</span><br><span class="line">java    28551 root   10u  IPv6 32242520      0t0  TCP app1.novalocal:57686-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    28551 root   24u  IPv6 32238089      0t0  TCP app1.novalocal:57700-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32458 root    6u  IPv6 32124384      0t0  TCP app1.novalocal:56532-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32458 root   77u  IPv6 32121614      0t0  TCP app1.novalocal:56550-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32542 root    7u  IPv6 32125129      0t0  TCP app1.novalocal:56558-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32542 root   76u  IPv6 32125155      0t0  TCP app1.novalocal:56582-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32580 root    7u  IPv6 32125151      0t0  TCP app1.novalocal:56572-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32580 root   76u  IPv6 32123269      0t0  TCP app1.novalocal:56614-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32627 root   77u  IPv6 32122582      0t0  TCP app1.novalocal:56598-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br><span class="line">java    32627 root   78u  IPv6 32124395      0t0  TCP app1.novalocal:56587-&gt;app1.novalocal:9848 (ESTABLISHED)</span><br></pre></td></tr></table></figure>


<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>修改/etc/resolv.conf配置内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">; generated by /usr/sbin/dhclient-script</span></span><br><span class="line"><span class="meta">#</span><span class="bash">search openstacklocal novalocal</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 114.114.114.114</span></span><br><span class="line"><span class="meta">#</span><span class="bash">nameserver 8.8.8.8</span></span><br><span class="line">nameserver 10.26.0.2</span><br><span class="line">nameserver 10.26.0.1</span><br><span class="line">nameserver 10.26.0.3</span><br></pre></td></tr></table></figure>

<p>修改/etc/hosts配置内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">60.190.232.46 open.ys7.com</span></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">10.26.0.19 app1</span><br></pre></td></tr></table></figure>
<p>重新请求恢复正常。</p>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringCloud微服务打包排除指定配置文件</title>
    <url>/SpringCloud/blogs/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%89%93%E5%8C%85%E6%8E%92%E9%99%A4%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>Maven: 3.5.4<br>微服务打成jar通过nacos下发配置，本地配置文件配置项冲突导致nacos配置中心配置被覆盖</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>排除项目src/main/resources路径下application-${spring.profiles.active}.properties文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">finalName</span>&gt;</span>ffcs-admin-biz<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>application-*.properties<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>SpringCloud</category>
      </categories>
      <tags>
        <tag>Maven</tag>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL数据文件迁移</title>
    <url>/MySQL/blogs/MySQL%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E8%BF%81%E7%A7%BB/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%83%8C%E6%99%AFspan"><span id="inline-blue">背景</span></a></li>
<li><a href="#span-idinline-blue%E8%BF%81%E7%A7%BB%E6%AD%A5%E9%AA%A4span"><span id="inline-blue">迁移步骤</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="背景"><span id="inline-blue">背景</span></span></h1><p>一次更新服务器内核之后导致服务器挂掉，在多次尝试无法恢复的情况下选择重装系统，但服务器上的安装的服务MySQL数据需要进行备份，数据文件通过镜像挂载的方式备份到本地，包括MySQL配置文件/etc/my.cnf<br>原始MySQL版本: 5.5.60<br>重装MySQL版本: 5.7.33</p>
<p>原始数据目录所在位置/home/mysql/data<br>重装数据目录所在位置/home/mysql/data</p>
<h1><span id="迁移步骤"><span id="inline-blue">迁移步骤</span></span></h1><ol>
<li><p>数据文件上传至重装后的MySQL数据目录<br>采用/bin/cp原生命令可避免cp命令别名导致的交互式确认删除的问题。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/bak/mysql</span><br><span class="line">/bin/cp -rf * /home/mysql/data</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新给拷贝后的数据文件目录赋予MySQL用户权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /home/mysql/data</span><br><span class="line">chown -R mysql:mysql mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启MySQL服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Dokcer常用命令</title>
    <url>/Docker/blogs/Dokcer%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8Bdocker%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">查看Docker版本信息</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8Bdocker%E8%AF%A6%E6%83%85span"><span id="inline-blue">查看Docker详情</span></a></li>
<li><a href="#span-idinline-blue%E6%93%8D%E4%BD%9C%E9%95%9C%E5%83%8Fspan"><span id="inline-blue">操作镜像</span></a></li>
<li><a href="#span-idinline-blue%E6%93%8D%E4%BD%9C%E5%AE%B9%E5%99%A8span"><span id="inline-blue">操作容器</span></a></li>
<li><a href="#span-idinline-bluedocker-compose%E5%B7%A5%E5%85%B7span"><span id="inline-blue">docker-compose工具</span></a></li>
<li><a href="#span-idinline-blue%E6%B8%85%E7%90%86%E8%99%9A%E6%82%AC%E9%95%9C%E5%83%8Fspan"><span id="inline-blue">清理虚悬镜像</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Windows7
DockerToolbox-18.03.0-ce.exe</code></pre>
<h1><span id="查看docker版本信息"><span id="inline-blue">查看Docker版本信息</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker version </span><br></pre></td></tr></table></figure>
<h1><span id="查看docker详情"><span id="inline-blue">查看Docker详情</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker info </span><br></pre></td></tr></table></figure>
<h1><span id="操作镜像"><span id="inline-blue">操作镜像</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看镜像</span></span><br><span class="line">docker image ls </span><br><span class="line"><span class="meta">#</span><span class="bash">列出镜像列表</span></span><br><span class="line">docker image list</span><br><span class="line"><span class="meta">#</span><span class="bash">拉取镜像  docker pull mysql:5.7</span></span><br><span class="line">docker pull 镜像:标签  </span><br><span class="line"><span class="meta">#</span><span class="bash">删除镜像 docker rmi mysql-5.7(镜像名或image ID 前四位)</span></span><br><span class="line">docker rmi 镜像名</span><br><span class="line"><span class="meta">#</span><span class="bash">批量删除镜像</span></span><br><span class="line">docker rmi -f $(docker images -a -q)</span><br><span class="line"><span class="meta">#</span><span class="bash">删除虚悬镜像</span></span><br><span class="line">docker image prune</span><br></pre></td></tr></table></figure>

<h1><span id="操作容器"><span id="inline-blue">操作容器</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查看正在运行容器</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="meta">#</span><span class="bash">查看所有容器</span></span><br><span class="line">docker ps -a </span><br><span class="line"><span class="meta">#</span><span class="bash">批量删除所有容器</span></span><br><span class="line">docker rm -vf $(docker ps -a -q)</span><br><span class="line"><span class="meta">#</span><span class="bash">停止容器 docker stop mysql5.7(容器名或容器ID)</span></span><br><span class="line">docker stop 容器名</span><br><span class="line"><span class="meta">#</span><span class="bash">查看容器日志 docker logs 容器名或容器ID</span></span><br><span class="line">docker logs mysql5.7</span><br><span class="line"><span class="meta">#</span><span class="bash">进入容器内部</span></span><br><span class="line">docker exec -it mysql5.7 /bin/bash</span><br></pre></td></tr></table></figure>

<h1><span id="docker-compose工具"><span id="inline-blue">docker-compose工具</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">启动容器  -d:后台启动 --build:重建镜像 容器名可跟多个,docker-compose编排工具需要结合docker-compose.yml使用</span></span><br><span class="line">docker-compose up -d --build 容器名</span><br><span class="line"><span class="meta">#</span><span class="bash">停止所有容器</span></span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure>

<h1><span id="清理虚悬镜像"><span id="inline-blue">清理虚悬镜像</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">清理没有容器使用的镜像</span></span><br><span class="line"><span class="meta">#</span><span class="bash">清理构建缓存</span></span><br><span class="line">docker image prune</span><br><span class="line"><span class="meta">#</span><span class="bash">清理 Docker 系统中未被使用的资源​​，释放磁盘空间</span></span><br><span class="line"><span class="meta">#</span><span class="bash">作用范围</span></span><br><span class="line"><span class="meta">#</span><span class="bash">1 虚悬镜像</span></span><br><span class="line"><span class="meta">#</span><span class="bash">2 挺值得容器</span></span><br><span class="line"><span class="meta">#</span><span class="bash">3 未被使用的网络</span></span><br><span class="line"><span class="meta">#</span><span class="bash">4 构建缓存</span></span><br><span class="line">docker system prune</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dokcer镜像导入导出</title>
    <url>/Docker/blogs/Dokcer%E9%95%9C%E5%83%8F%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%87%BAspan"><span id="inline-blue">导出</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%85%A5span"><span id="inline-blue">导入</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Windows7
DockerToolbox-18.03.0-ce.exe</code></pre>
<h1><span id="导出"><span id="inline-blue">导出</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">rm -rf  images</span><br><span class="line">docker images &gt; images.txt</span><br><span class="line">awk &#x27;&#123;print $1&#125;&#x27; images.txt &gt; REPOSITORY.txt</span><br><span class="line">sed -i &#x27;1d&#x27; REPOSITORY.txt</span><br><span class="line">mkdir images</span><br><span class="line">touch tarname.txt</span><br><span class="line">while read LINE</span><br><span class="line">do</span><br><span class="line">docker save $LINE &gt; ./images/$&#123;LINE//\//_&#125;.tar</span><br><span class="line">echo &quot;$&#123;LINE//\//_&#125;.tar&quot; &gt;&gt; tarname.txt</span><br><span class="line">done &lt; REPOSITORY.txt</span><br><span class="line">rm -rf images.txt REPOSITORY.txt</span><br><span class="line">cp import.sh ./images/</span><br><span class="line">echo &quot;images export finish&quot;</span><br></pre></td></tr></table></figure>
<h1><span id="导入"><span id="inline-blue">导入</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">while read LINE</span><br><span class="line">do</span><br><span class="line">docker  load -i ./images/$LINE</span><br><span class="line">echo ok</span><br><span class="line">done &lt; tarname.txt</span><br><span class="line">echo finish</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker pull错误 Error response from</title>
    <url>/Docker/blogs/Docker%20pull%E9%94%99%E8%AF%AF%20Error%20response%20from/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><pre><code>Windows7
DockerToolbox-18.03.0-ce.exe</code></pre>
<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>执行以下命令拉取nginx镜像提示</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull nginx </span><br></pre></td></tr></table></figure>
<p>Error response from daemon: Get <a href="https://registry-1.docker.io/v2/">https://registry-1.docker.io/v2/</a>: dial tcp: look<br>up registry-1.docker.io on 10.0.2.3:53: read udp 10.0.2.15:54424-&gt;10.0.2.3:53: i</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>这类错误，因为虚拟机启动后默认使用10.0.2.3作为dns首选解析地址，这个地址在虚拟机肯定是不能识别的，得用8.8.8.8和114.114.114.114。在这里被坑了好久，对于Docker Toolbox来说，需要修改的是DNS域名解析，具体文件是/etc/resolv.conf，但是修改的是哪个resolv.conf文件需要明确。<br>使用Docker Quickstart Terminal启动的是VirtualBox。VirtualBox是一个开源的虚拟机软件，可在其上启动更多操作系统。在VirtualBox的目录下，也有/etc/resolv.conf这个文件，但是在VirtualBox启动一个新的操作系统后，若操作系统内部也有/etc/resolv.conf，就会覆盖VirtualBox目录下的有/etc/resolv.conf。，之前一直在修改VirtualBox目录下的/etc/resolv.conf，导致dns解析一直失败。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>使用docker-machine ssh  命令进入自建的操作系统，因为resolv.conf是只读的，因此需要输入sudo vi /etc/resolv.conf开始修改。修改完成后，按ESC输入 :wq 保存。<br><img src="/images/docker/docker_20230630_001.png" alt="Docker镜像"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo近期文章设置</title>
    <url>/Hexo/blogs/hexo%E8%BF%91%E6%9C%9F%E6%96%87%E7%AB%A0%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h2><span id="近期文章设置"><span id="inline-blue">近期文章设置</span></span></h2><p>新建 source/_data/sidebar.njk 文件(如没有对应目录则自行创建)，内容如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;# RecentPosts #&#125;</span><br><span class="line">&#123;%- if theme<span class="selector-class">.recent_posts</span> %&#125;</span><br><span class="line">  &lt;div class=&quot;links-of-recent-posts motion-element&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;links-of-recent-posts-title&quot;&gt;</span><br><span class="line">      &#123;%- if theme<span class="selector-class">.recent_posts</span><span class="selector-class">.icon</span> %&#125;</span><br><span class="line">      &lt;i class=&quot;&#123;&#123; theme.recent_posts.icon &#125;&#125; fa-fw&quot;&gt;&lt;/i&gt;</span><br><span class="line">      &#123;%- endif %&#125;</span><br><span class="line">      &#123;&#123; theme<span class="selector-class">.recent_posts</span><span class="selector-class">.title</span> &#125;&#125;</span><br><span class="line">    &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;ul class=&quot;links-of-recent-posts-list&quot;&gt;</span><br><span class="line">      &#123;%- set posts = site.posts.sort(&#x27;date&#x27;, &#x27;desc&#x27;).toArray() %&#125;</span><br><span class="line">      &#123;%- for post in posts.slice(&#x27;0&#x27;, theme.recent_posts.max_count) %&#125;</span><br><span class="line">        &lt;li class=&quot;links-of-recent-posts-item&quot;&gt;</span><br><span class="line">          &#123;&#123; next_url(post<span class="selector-class">.path</span>, post<span class="selector-class">.title</span>, &#123;title: post.path&#125;) &#125;&#125;</span><br><span class="line">        &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">      &#123;%- endfor %&#125;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line">  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改next主题下_config.yml配置文件,取消 custom_file_path 中的 sidebar 和 style 两个注释，并新增 recent_posts 内容。variable 应该是设置另外的功能时打开的，和此处无关。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="string">source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br><span class="line"></span><br><span class="line"><span class="attr">recent_posts:</span></span><br><span class="line"><span class="comment"># 块标题</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">最近文章</span></span><br><span class="line"><span class="comment"># 图标</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-history</span></span><br><span class="line"><span class="comment"># 最多多少文章链接</span></span><br><span class="line">  <span class="attr">max_count:</span> <span class="number">5</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在 next主题目录下source/_data/styles.styl 文件中添加以下内容(文件不存在新建即可):</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 近期文章</span><br><span class="line"><span class="selector-class">.links-of-recent-posts</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8125em</span></span><br><span class="line">  margin-top: <span class="number">10px</span></span><br><span class="line"></span><br><span class="line">.links-of-recent-posts-title</span><br><span class="line">  font-size: <span class="number">1.03em</span></span><br><span class="line">  font-weight: <span class="number">600</span></span><br><span class="line">  margin-top: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">.links-of-recent-posts-list</span><br><span class="line">  list-style: none</span><br><span class="line">  margin: <span class="number">0</span></span><br><span class="line">  padding: <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo修改链接文字样式</title>
    <url>/Hexo/blogs/Hexo%E4%BF%AE%E6%94%B9%E9%93%BE%E6%8E%A5%E6%96%87%E5%AD%97%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="修改链接文字样式"><span id="inline-blue">修改链接文字样式</span></span></h2><p>打开themes\next\source\css\_common\components\post\post.styl添加以下代码:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line"> <span class="attribute">border-bottom</span>: none;</span><br><span class="line"> &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">   <span class="attribute">color</span>: <span class="number">#ff106c</span>;</span><br><span class="line">   <span class="attribute">text-decoration</span>: underline;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>










]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven本地jar包注册</title>
    <url>/Maven/blogs/Maven%E6%9C%AC%E5%9C%B0jar%E5%8C%85%E6%B3%A8%E5%86%8C/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>maven项目加载依赖出现jar在中央仓库访问正常，但本地下载失败，导致项目一直爆红。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn install:install-file -Dfile&#x3D;C:\Users\909754\Downloads\maven_jar\spring-boot-configuration-processor-2.2.6.RELEASE.jar    -DgroupId&#x3D;org.springframework.boot -DartifactId&#x3D;spring-boot-configuration-processor  -Dversion&#x3D;2.2.6.RELEASE -Dpackaging&#x3D;jar</span><br></pre></td></tr></table></figure>
<p>参数说明：<br>install:install-file：jar包注册命令<br>-Dfile: 指定主车道本地仓库的绝对路径地址<br>-DgroupId：groupId<br>-DartifactId：artifactId<br>-Dversion：版本号<br>-Dpackaging：打包方式(pom、war、jar)</p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>解决syntax error near unexpected token `checkEnv问题</title>
    <url>/Linux/blogs/%E8%A7%A3%E5%86%B3syntax%20error%20near%20unexpected%20token%20%60checkEnv%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>windows环境下编辑修改了setup.sh脚本文件，重新打包放到linux环境安装提示syntax error near unexpected token `</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">: command not found</span><br><span class="line">&#x27;setup.sh: line 38: syntax error near unexpeted token `checkEnv</span><br></pre></td></tr></table></figure>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>windows里写的shell脚本放到linux系统里运行就会提示上述错误,两个平台的系统换行符不一致导致<br>notepad++编辑器打开后，点击上方菜单栏视图-&gt;显示符号-&gt;显示所有符号<br><img src="/images/linux/Linux_20230505_001.png" alt="Linux脚本编辑"></p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>点击上方菜单栏编辑-&gt;文档格式转换-&gt;转为unix(LF)<br><img src="/images/linux/Linux_20230505_002.png" alt="Linux脚本编辑"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>WildFly日志设置</title>
    <url>/JAXB/blogs/WildFly%E6%97%A5%E5%BF%97%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%AE%9A%E4%B9%89handlerspan"><span id="inline-blue">定义handler</span></a></li>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E5%88%9B%E5%BB%BA%E7%9A%84handlerspan"><span id="inline-blue">使用创建的handler</span></a></li>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E5%88%9B%E5%BB%BA%E7%9A%84handlerspan-1"><span id="inline-blue">使用创建的handler</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="定义handler"><span id="inline-blue">定义handler</span></span></h1><p>/usr/local/wildfly26-portal/standalone/configuration/standalone.xml文件添加handler</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">periodic-size-rotating-file-handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">autoflush</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">formatter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">named-formatter</span> <span class="attr">name</span>=<span class="string">&quot;PATTERN&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">file</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.log.dir&quot;</span> <span class="attr">path</span>=<span class="string">&quot;server.log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">suffix</span> <span class="attr">value</span>=<span class="string">&quot;.yyyy-MM-dd&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rotate-size</span> <span class="attr">value</span>=<span class="string">&quot;100m&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">max-backup-index</span> <span class="attr">value</span>=<span class="string">&quot;65535&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">periodic-size-rotating-file-handler</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>standalone.xml完整内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">server</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:19.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.clustering.infinispan&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.connector&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.deployment-scanner&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.ee&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.ejb3&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jaxrs&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jdr&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jmx&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jpa&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.jsf&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.logging&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.mail&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.naming&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.pojo&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.remoting&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.sar&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.transactions&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.webservices&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.as.weld&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.batch.jberet&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.bean-validation&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.clustering.web&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.core-management&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.discovery&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.ee-security&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.elytron&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.elytron-oidc-client&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.health&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.io&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.metrics&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.microprofile.config-smallrye&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.microprofile.jwt-smallrye&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.microprofile.opentracing-smallrye&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.request-controller&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.security.manager&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extension</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.undertow&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">management</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">audit-log</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formatters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">json-formatter</span> <span class="attr">name</span>=<span class="string">&quot;json-formatter&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">formatters</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">file-handler</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">formatter</span>=<span class="string">&quot;json-formatter&quot;</span> <span class="attr">path</span>=<span class="string">&quot;audit-log.log&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.data.dir&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">log-boot</span>=<span class="string">&quot;true&quot;</span> <span class="attr">log-read-only</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enabled</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">handler</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">audit-log</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">management-interfaces</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http-interface</span> <span class="attr">http-authentication-factory</span>=<span class="string">&quot;management-http-authentication&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-upgrade</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">sasl-authentication-factory</span>=<span class="string">&quot;management-sasl-authentication&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">http</span>=<span class="string">&quot;management-http&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">http-interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">management-interfaces</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">access-control</span> <span class="attr">provider</span>=<span class="string">&quot;simple&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">role-mapping</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">role</span> <span class="attr">name</span>=<span class="string">&quot;SuperUser&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">user</span> <span class="attr">name</span>=<span class="string">&quot;$local&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">role</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">role-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">access-control</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">management</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:logging:8.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">console-handler</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">formatter</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">named-formatter</span> <span class="attr">name</span>=<span class="string">&quot;COLOR-PATTERN&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">console-handler</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">periodic-size-rotating-file-handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">autoflush</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">formatter</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">named-formatter</span> <span class="attr">name</span>=<span class="string">&quot;PATTERN&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">file</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.log.dir&quot;</span> <span class="attr">path</span>=<span class="string">&quot;server.log&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">suffix</span> <span class="attr">value</span>=<span class="string">&quot;.yyyy-MM-dd&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">rotate-size</span> <span class="attr">value</span>=<span class="string">&quot;100m&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">max-backup-index</span> <span class="attr">value</span>=<span class="string">&quot;65535&quot;</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">append</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">periodic-size-rotating-file-handler</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;com.arjuna&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;io.jaegertracing.Configuration&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;org.jboss.as.config&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;org.jboss.stdio&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;ERROR&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">logger</span> <span class="attr">category</span>=<span class="string">&quot;sun.rmi&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;WARN&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">root-logger</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">root-logger</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formatter</span> <span class="attr">name</span>=<span class="string">&quot;PATTERN&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern-formatter</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; %-5p [%c] (%t) %s%e%n&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formatter</span> <span class="attr">name</span>=<span class="string">&quot;COLOR-PATTERN&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern-formatter</span> <span class="attr">pattern</span>=<span class="string">&quot;%K&#123;level&#125;%d&#123;HH:mm:ss,SSS&#125; %-5p [%c] (%t) %s%e%n&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">formatter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:batch-jberet:2.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-job-repository</span> <span class="attr">name</span>=<span class="string">&quot;in-memory&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-thread-pool</span> <span class="attr">name</span>=<span class="string">&quot;batch&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">job-repository</span> <span class="attr">name</span>=<span class="string">&quot;in-memory&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">in-memory</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">job-repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thread-pool</span> <span class="attr">name</span>=<span class="string">&quot;batch&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;30&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thread-pool</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:bean-validation:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:core-management:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:datasources:6.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">datasources</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">datasource</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/datasources/ExampleDS&quot;</span> <span class="attr">pool-name</span>=<span class="string">&quot;ExampleDS&quot;</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">use-java-context</span>=<span class="string">&quot;true&quot;</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;$&#123;wildfly.datasources.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-url</span>&gt;</span>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE<span class="tag">&lt;/<span class="name">connection-url</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">security</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">user-name</span>&gt;</span>sa<span class="tag">&lt;/<span class="name">user-name</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">password</span>&gt;</span>sa<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">security</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">datasource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">drivers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&quot;h2&quot;</span> <span class="attr">module</span>=<span class="string">&quot;com.h2database.h2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">xa-datasource-class</span>&gt;</span>org.h2.jdbcx.JdbcDataSource<span class="tag">&lt;/<span class="name">xa-datasource-class</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">drivers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">datasources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:deployment-scanner:2.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">deployment-scanner</span> <span class="attr">path</span>=<span class="string">&quot;deployments&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.base.dir&quot;</span> <span class="attr">scan-interval</span>=<span class="string">&quot;5000&quot;</span> <span class="attr">runtime-failure-causes-rollback</span>=<span class="string">&quot;$&#123;jboss.deployment.scanner.rollback.on.failure:false&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:discovery:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:distributable-web:2.0&quot;</span> <span class="attr">default-session-management</span>=<span class="string">&quot;default&quot;</span> <span class="attr">default-single-sign-on-management</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">infinispan-session-management</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">cache-container</span>=<span class="string">&quot;web&quot;</span> <span class="attr">granularity</span>=<span class="string">&quot;SESSION&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-affinity</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">infinispan-session-management</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">infinispan-single-sign-on-management</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">cache-container</span>=<span class="string">&quot;web&quot;</span> <span class="attr">cache</span>=<span class="string">&quot;sso&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">local-routing</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:ee:6.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">spec-descriptor-property-replacement</span>&gt;</span>false<span class="tag">&lt;/<span class="name">spec-descriptor-property-replacement</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">concurrent</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">context-services</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">context-service</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/context/default&quot;</span> <span class="attr">use-transaction-setup-provider</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">context-services</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">managed-thread-factories</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">managed-thread-factory</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/factory/default&quot;</span> <span class="attr">context-service</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">managed-thread-factories</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">managed-executor-services</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">managed-executor-service</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/executor/default&quot;</span> <span class="attr">context-service</span>=<span class="string">&quot;default&quot;</span> <span class="attr">hung-task-termination-period</span>=<span class="string">&quot;0&quot;</span> <span class="attr">hung-task-threshold</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">keepalive-time</span>=<span class="string">&quot;5000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">managed-executor-services</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">managed-scheduled-executor-services</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">managed-scheduled-executor-service</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/ee/concurrency/scheduler/default&quot;</span> <span class="attr">context-service</span>=<span class="string">&quot;default&quot;</span> <span class="attr">hung-task-termination-period</span>=<span class="string">&quot;0&quot;</span> <span class="attr">hung-task-threshold</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">keepalive-time</span>=<span class="string">&quot;3000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">managed-scheduled-executor-services</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">concurrent</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-bindings</span> <span class="attr">context-service</span>=<span class="string">&quot;java:jboss/ee/concurrency/context/default&quot;</span> <span class="attr">datasource</span>=<span class="string">&quot;java:jboss/datasources/ExampleDS&quot;</span> <span class="attr">managed-executor-service</span>=<span class="string">&quot;java:jboss/ee/concurrency/executor/default&quot;</span> <span class="attr">managed-scheduled-executor-service</span>=<span class="string">&quot;java:jboss/ee/concurrency/scheduler/default&quot;</span> <span class="attr">managed-thread-factory</span>=<span class="string">&quot;java:jboss/ee/concurrency/factory/default&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:ee-security:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:ejb3:9.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">session-bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">stateless</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean-instance-pool-ref</span> <span class="attr">pool-name</span>=<span class="string">&quot;slsb-strict-max-pool&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">stateless</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">stateful</span> <span class="attr">default-access-timeout</span>=<span class="string">&quot;5000&quot;</span> <span class="attr">cache-ref</span>=<span class="string">&quot;simple&quot;</span> <span class="attr">passivation-disabled-cache-ref</span>=<span class="string">&quot;simple&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">singleton</span> <span class="attr">default-access-timeout</span>=<span class="string">&quot;5000&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">session-bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pools</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean-instance-pools</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strict-max-pool</span> <span class="attr">name</span>=<span class="string">&quot;mdb-strict-max-pool&quot;</span> <span class="attr">derive-size</span>=<span class="string">&quot;from-cpu-count&quot;</span> <span class="attr">instance-acquisition-timeout</span>=<span class="string">&quot;5&quot;</span> <span class="attr">instance-acquisition-timeout-unit</span>=<span class="string">&quot;MINUTES&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">strict-max-pool</span> <span class="attr">name</span>=<span class="string">&quot;slsb-strict-max-pool&quot;</span> <span class="attr">derive-size</span>=<span class="string">&quot;from-worker-pools&quot;</span> <span class="attr">instance-acquisition-timeout</span>=<span class="string">&quot;5&quot;</span> <span class="attr">instance-acquisition-timeout-unit</span>=<span class="string">&quot;MINUTES&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean-instance-pools</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">pools</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">caches</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">&quot;simple&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">cache</span> <span class="attr">name</span>=<span class="string">&quot;distributable&quot;</span> <span class="attr">passivation-store-ref</span>=<span class="string">&quot;infinispan&quot;</span> <span class="attr">aliases</span>=<span class="string">&quot;passivating clustered&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">caches</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">passivation-stores</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">passivation-store</span> <span class="attr">name</span>=<span class="string">&quot;infinispan&quot;</span> <span class="attr">cache-container</span>=<span class="string">&quot;ejb&quot;</span> <span class="attr">max-size</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">passivation-stores</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">async</span> <span class="attr">thread-pool-name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timer-service</span> <span class="attr">thread-pool-name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">default-data-store</span>=<span class="string">&quot;default-file-store&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">data-stores</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">file-data-store</span> <span class="attr">name</span>=<span class="string">&quot;default-file-store&quot;</span> <span class="attr">path</span>=<span class="string">&quot;timer-service-data&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.data.dir&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">data-stores</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timer-service</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote</span> <span class="attr">cluster</span>=<span class="string">&quot;ejb&quot;</span> <span class="attr">connectors</span>=<span class="string">&quot;http-remoting-connector&quot;</span> <span class="attr">thread-pool-name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">channel-creation-options</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">name</span>=<span class="string">&quot;MAX_OUTBOUND_MESSAGES&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1234&quot;</span> <span class="attr">type</span>=<span class="string">&quot;remoting&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">channel-creation-options</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">remote</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thread-pools</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thread-pool</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;60&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thread-pool</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thread-pools</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-security-domain</span> <span class="attr">value</span>=<span class="string">&quot;other&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">application-security-domain</span> <span class="attr">name</span>=<span class="string">&quot;other&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-missing-method-permissions-deny-access</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">statistics</span> <span class="attr">enabled</span>=<span class="string">&quot;$&#123;wildfly.ejb3.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">log-system-exceptions</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:elytron:15.0&quot;</span> <span class="attr">final-providers</span>=<span class="string">&quot;combined-providers&quot;</span> <span class="attr">disallowed-providers</span>=<span class="string">&quot;OracleUcrypto&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">providers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">aggregate-providers</span> <span class="attr">name</span>=<span class="string">&quot;combined-providers&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">providers</span> <span class="attr">name</span>=<span class="string">&quot;elytron&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">providers</span> <span class="attr">name</span>=<span class="string">&quot;openssl&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">aggregate-providers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-loader</span> <span class="attr">name</span>=<span class="string">&quot;elytron&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.security.elytron&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-loader</span> <span class="attr">name</span>=<span class="string">&quot;openssl&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.openssl&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">providers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">audit-logging</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">file-audit-log</span> <span class="attr">name</span>=<span class="string">&quot;local-audit&quot;</span> <span class="attr">path</span>=<span class="string">&quot;audit.log&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.log.dir&quot;</span> <span class="attr">format</span>=<span class="string">&quot;JSON&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">audit-logging</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">security-domains</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">security-domain</span> <span class="attr">name</span>=<span class="string">&quot;ManagementDomain&quot;</span> <span class="attr">default-realm</span>=<span class="string">&quot;ManagementRealm&quot;</span> <span class="attr">permission-mapper</span>=<span class="string">&quot;default-permission-mapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;ManagementRealm&quot;</span> <span class="attr">role-decoder</span>=<span class="string">&quot;groups-to-roles&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span> <span class="attr">role-mapper</span>=<span class="string">&quot;super-user-mapper&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">security-domain</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">security-domain</span> <span class="attr">name</span>=<span class="string">&quot;ApplicationDomain&quot;</span> <span class="attr">default-realm</span>=<span class="string">&quot;ApplicationRealm&quot;</span> <span class="attr">permission-mapper</span>=<span class="string">&quot;default-permission-mapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;ApplicationRealm&quot;</span> <span class="attr">role-decoder</span>=<span class="string">&quot;groups-to-roles&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">realm</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">security-domain</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">security-domains</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">security-realms</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">identity-realm</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span> <span class="attr">identity</span>=<span class="string">&quot;$local&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">properties-realm</span> <span class="attr">name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">users-properties</span> <span class="attr">path</span>=<span class="string">&quot;application-users.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span> <span class="attr">digest-realm-name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groups-properties</span> <span class="attr">path</span>=<span class="string">&quot;application-roles.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">properties-realm</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">properties-realm</span> <span class="attr">name</span>=<span class="string">&quot;ManagementRealm&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">users-properties</span> <span class="attr">path</span>=<span class="string">&quot;mgmt-users.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span> <span class="attr">digest-realm-name</span>=<span class="string">&quot;ManagementRealm&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groups-properties</span> <span class="attr">path</span>=<span class="string">&quot;mgmt-groups.properties&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">properties-realm</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">security-realms</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">simple-permission-mapper</span> <span class="attr">name</span>=<span class="string">&quot;default-permission-mapper&quot;</span> <span class="attr">mapping-mode</span>=<span class="string">&quot;first&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission-mapping</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">principal</span> <span class="attr">name</span>=<span class="string">&quot;anonymous&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;default-permissions&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">permission-mapping</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission-mapping</span> <span class="attr">match-all</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;login-permission&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;default-permissions&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">permission-mapping</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">simple-permission-mapper</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constant-realm-mapper</span> <span class="attr">name</span>=<span class="string">&quot;local&quot;</span> <span class="attr">realm-name</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">simple-role-decoder</span> <span class="attr">name</span>=<span class="string">&quot;groups-to-roles&quot;</span> <span class="attr">attribute</span>=<span class="string">&quot;groups&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constant-role-mapper</span> <span class="attr">name</span>=<span class="string">&quot;super-user-mapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">role</span> <span class="attr">name</span>=<span class="string">&quot;SuperUser&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">constant-role-mapper</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">permission-sets</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;login-permission&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.wildfly.security.auth.permission.LoginPermission&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">permission-set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">permission-set</span> <span class="attr">name</span>=<span class="string">&quot;default-permissions&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.wildfly.extension.batch.jberet.deployment.BatchPermission&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.extension.batch.jberet&quot;</span> <span class="attr">target-name</span>=<span class="string">&quot;*&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.wildfly.transaction.client.RemoteTransactionPermission&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.wildfly.transaction.client&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class-name</span>=<span class="string">&quot;org.jboss.ejb.client.RemoteEJBPermission&quot;</span> <span class="attr">module</span>=<span class="string">&quot;org.jboss.ejb-client&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">permission-set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">permission-sets</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;management-http-authentication&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ManagementDomain&quot;</span> <span class="attr">http-server-mechanism-factory</span>=<span class="string">&quot;global&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;DIGEST&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ManagementRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">http-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;application-http-authentication&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span> <span class="attr">http-server-mechanism-factory</span>=<span class="string">&quot;global&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;BASIC&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">http-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-http-server-mechanism-factory</span> <span class="attr">name</span>=<span class="string">&quot;global&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">http</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sasl</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sasl-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;management-sasl-authentication&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;configured&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ManagementDomain&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;JBOSS-LOCAL-USER&quot;</span> <span class="attr">realm-mapper</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;DIGEST-MD5&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ManagementRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">sasl-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sasl-authentication-factory</span> <span class="attr">name</span>=<span class="string">&quot;application-sasl-authentication&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;configured&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;JBOSS-LOCAL-USER&quot;</span> <span class="attr">realm-mapper</span>=<span class="string">&quot;local&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mechanism</span> <span class="attr">mechanism-name</span>=<span class="string">&quot;DIGEST-MD5&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">mechanism-realm</span> <span class="attr">realm-name</span>=<span class="string">&quot;ApplicationRealm&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">mechanism</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mechanism-configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">sasl-authentication-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configurable-sasl-server-factory</span> <span class="attr">name</span>=<span class="string">&quot;configured&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;elytron&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wildfly.sasl.local-user.default-user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$local&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wildfly.sasl.local-user.challenge-path&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.server.temp.dir&#125;/auth&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configurable-sasl-server-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mechanism-provider-filtering-sasl-server-factory</span> <span class="attr">name</span>=<span class="string">&quot;elytron&quot;</span> <span class="attr">sasl-server-factory</span>=<span class="string">&quot;global&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">filters</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">provider-name</span>=<span class="string">&quot;WildFlyElytron&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">filters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">mechanism-provider-filtering-sasl-server-factory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">provider-sasl-server-factory</span> <span class="attr">name</span>=<span class="string">&quot;global&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">sasl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tls</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-store</span> <span class="attr">name</span>=<span class="string">&quot;applicationKS&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;Coship7000?&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">implementation</span> <span class="attr">type</span>=<span class="string">&quot;JKS&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">file</span> <span class="attr">path</span>=<span class="string">&quot;coship_pair.jks&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-store</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-manager</span> <span class="attr">name</span>=<span class="string">&quot;applicationKM&quot;</span> <span class="attr">key-store</span>=<span class="string">&quot;applicationKS&quot;</span> <span class="attr">generate-self-signed-certificate-host</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;Coship7000?&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-manager</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">server-ssl-context</span> <span class="attr">name</span>=<span class="string">&quot;applicationSSC&quot;</span> <span class="attr">key-manager</span>=<span class="string">&quot;applicationKM&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tls</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:elytron-oidc-client:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:health:1.0&quot;</span> <span class="attr">security-enabled</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:infinispan:13.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;ejb&quot;</span> <span class="attr">default-cache</span>=<span class="string">&quot;passivation&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;PROTOSTREAM&quot;</span> <span class="attr">aliases</span>=<span class="string">&quot;sfsb&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.wildfly.clustering.ejb.infinispan&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;passivation&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">file-store</span> <span class="attr">passivation</span>=<span class="string">&quot;true&quot;</span> <span class="attr">purge</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;web&quot;</span> <span class="attr">default-cache</span>=<span class="string">&quot;passivation&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;PROTOSTREAM&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.wildfly.clustering.web.infinispan&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;passivation&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">file-store</span> <span class="attr">passivation</span>=<span class="string">&quot;true&quot;</span> <span class="attr">purge</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;sso&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;server&quot;</span> <span class="attr">default-cache</span>=<span class="string">&quot;default&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;PROTOSTREAM&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.wildfly.clustering.server&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cache-container</span> <span class="attr">name</span>=<span class="string">&quot;hibernate&quot;</span> <span class="attr">marshaller</span>=<span class="string">&quot;JBOSS&quot;</span> <span class="attr">modules</span>=<span class="string">&quot;org.infinispan.hibernate-cache&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;entity&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">heap-memory</span> <span class="attr">size</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">max-idle</span>=<span class="string">&quot;100000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;local-query&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">heap-memory</span> <span class="attr">size</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">max-idle</span>=<span class="string">&quot;100000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;timestamps&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">interval</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">local-cache</span> <span class="attr">name</span>=<span class="string">&quot;pending-puts&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">expiration</span> <span class="attr">max-idle</span>=<span class="string">&quot;60000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">local-cache</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">cache-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:io:3.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">worker</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">buffer-pool</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jaxrs:2.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jca:5.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">archive-validation</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">fail-on-error</span>=<span class="string">&quot;true&quot;</span> <span class="attr">fail-on-warn</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean-validation</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">default-workmanager</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">short-running-threads</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">core-threads</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">queue-length</span> <span class="attr">count</span>=<span class="string">&quot;500&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;1000&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;30&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">short-running-threads</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">long-running-threads</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">core-threads</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">queue-length</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">max-threads</span> <span class="attr">count</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">keepalive-time</span> <span class="attr">time</span>=<span class="string">&quot;10&quot;</span> <span class="attr">unit</span>=<span class="string">&quot;seconds&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">long-running-threads</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">default-workmanager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cached-connection-manager</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jdr:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jmx:1.3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">expose-resolved-model</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">expose-expression-model</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remoting-connector</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jpa:1.1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jpa</span> <span class="attr">default-extended-persistence-inheritance</span>=<span class="string">&quot;DEEP&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:jsf:1.1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:mail:4.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mail-session</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:jboss/mail/Default&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">smtp-server</span> <span class="attr">outbound-socket-binding-ref</span>=<span class="string">&quot;mail-smtp&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">mail-session</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:metrics:1.0&quot;</span> <span class="attr">security-enabled</span>=<span class="string">&quot;false&quot;</span> <span class="attr">exposed-subsystems</span>=<span class="string">&quot;*&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;$&#123;wildfly.metrics.prefix:wildfly&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:microprofile-config-smallrye:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:microprofile-jwt-smallrye:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:wildfly:microprofile-opentracing-smallrye:3.0&quot;</span> <span class="attr">default-tracer</span>=<span class="string">&quot;jaeger&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jaeger-tracer</span> <span class="attr">name</span>=<span class="string">&quot;jaeger&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">sampler-configuration</span> <span class="attr">sampler-type</span>=<span class="string">&quot;const&quot;</span> <span class="attr">sampler-param</span>=<span class="string">&quot;1.0&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">jaeger-tracer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:naming:2.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote-naming</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:pojo:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:remoting:4.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http-connector</span> <span class="attr">name</span>=<span class="string">&quot;http-remoting-connector&quot;</span> <span class="attr">connector-ref</span>=<span class="string">&quot;default&quot;</span> <span class="attr">sasl-authentication-factory</span>=<span class="string">&quot;application-sasl-authentication&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:request-controller:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:resource-adapters:6.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:sar:1.0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:security-manager:1.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">deployment-permissions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maximum-set</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">permission</span> <span class="attr">class</span>=<span class="string">&quot;java.security.AllPermission&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">maximum-set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">deployment-permissions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:transactions:6.0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">core-environment</span> <span class="attr">node-identifier</span>=<span class="string">&quot;$&#123;jboss.tx.node.id:1&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">process-id</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">uuid</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">process-id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">core-environment</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">recovery-environment</span> <span class="attr">socket-binding</span>=<span class="string">&quot;txn-recovery-environment&quot;</span> <span class="attr">status-socket-binding</span>=<span class="string">&quot;txn-status-manager&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">coordinator-environment</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;$&#123;wildfly.transactions.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">object-store</span> <span class="attr">path</span>=<span class="string">&quot;tx-object-store&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.data.dir&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:undertow:12.0&quot;</span> <span class="attr">default-server</span>=<span class="string">&quot;default-server&quot;</span> <span class="attr">default-virtual-host</span>=<span class="string">&quot;default-host&quot;</span> <span class="attr">default-servlet-container</span>=<span class="string">&quot;default&quot;</span> <span class="attr">default-security-domain</span>=<span class="string">&quot;other&quot;</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;$&#123;wildfly.undertow.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">buffer-cache</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">server</span> <span class="attr">name</span>=<span class="string">&quot;default-server&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-listener</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span> <span class="attr">socket-binding</span>=<span class="string">&quot;http&quot;</span> <span class="attr">redirect-socket</span>=<span class="string">&quot;https&quot;</span> <span class="attr">enable-http2</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">https-listener</span> <span class="attr">name</span>=<span class="string">&quot;https&quot;</span> <span class="attr">socket-binding</span>=<span class="string">&quot;https&quot;</span> <span class="attr">ssl-context</span>=<span class="string">&quot;applicationSSC&quot;</span> <span class="attr">enable-http2</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&quot;default-host&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- &lt;location name=&quot;/&quot; handler=&quot;welcome-content&quot;/&gt; --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">http-invoker</span> <span class="attr">http-authentication-factory</span>=<span class="string">&quot;application-http-authentication&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">servlet-container</span> <span class="attr">name</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">jsp-config</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">websockets</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">servlet-container</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;handlers&gt;</span></span><br><span class="line"><span class="comment">                &lt;file name=&quot;welcome-content&quot; path=&quot;$&#123;jboss.home.dir&#125;/welcome-content&quot;/&gt;</span></span><br><span class="line"><span class="comment">            &lt;/handlers&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">application-security-domain</span> <span class="attr">name</span>=<span class="string">&quot;other&quot;</span> <span class="attr">security-domain</span>=<span class="string">&quot;ApplicationDomain&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">application-security-domains</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">subsystem</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;subsystem xmlns=&quot;urn:jboss:domain:webservices:2.0&quot; statistics-enabled=&quot;$&#123;wildfly.webservices.statistics-enabled:$&#123;wildfly.statistics-enabled:false&#125;&#125;&quot;&gt;</span></span><br><span class="line"><span class="comment">            &lt;wsdl-host&gt;$&#123;jboss.bind.address:127.0.0.1&#125;&lt;/wsdl-host&gt;</span></span><br><span class="line"><span class="comment">            &lt;endpoint-config name=&quot;Standard-Endpoint-Config&quot;/&gt;</span></span><br><span class="line"><span class="comment">            &lt;endpoint-config name=&quot;Recording-Endpoint-Config&quot;&gt;</span></span><br><span class="line"><span class="comment">                &lt;pre-handler-chain name=&quot;recording-handlers&quot; protocol-bindings=&quot;##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM&quot;&gt;</span></span><br><span class="line"><span class="comment">                    &lt;handler name=&quot;RecordingHandler&quot; class=&quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;/&gt;</span></span><br><span class="line"><span class="comment">                &lt;/pre-handler-chain&gt;</span></span><br><span class="line"><span class="comment">            &lt;/endpoint-config&gt;</span></span><br><span class="line"><span class="comment">            &lt;client-config name=&quot;Standard-Client-Config&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;/subsystem&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">subsystem</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:domain:weld:4.0&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interfaces</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;any&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">any-address</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;management&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inet-address</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.bind.address.management:127.0.0.1&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;public&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inet-address</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.bind.address:127.0.0.1&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interfaces</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">socket-binding-group</span> <span class="attr">name</span>=<span class="string">&quot;standard-sockets&quot;</span> <span class="attr">default-interface</span>=<span class="string">&quot;any&quot;</span> <span class="attr">port-offset</span>=<span class="string">&quot;$&#123;jboss.socket.binding.port-offset:8&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;socket-binding name=&quot;ajp&quot; port=&quot;$&#123;jboss.ajp.port:8009&#125;&quot;/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;http&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.http.port:18888&#125;&quot;</span> <span class="attr">fixed-port</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;https&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.https.port:8443&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-http&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.http.port:9990&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-https&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.https.port:9993&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-recovery-environment&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4712&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-status-manager&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4713&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">outbound-socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;mail-smtp&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote-destination</span> <span class="attr">host</span>=<span class="string">&quot;$&#123;jboss.mail.server.host:localhost&#125;&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.mail.server.port:25&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">outbound-socket-binding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">socket-binding-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1><span id="使用创建的handler"><span id="inline-blue">使用创建的handler</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">root-logger</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">level</span> <span class="attr">name</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">handlers</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">handler</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">handlers</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">root-logger</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="使用创建的handler"><span id="inline-blue">使用创建的handler</span></span></h1><p><img src="/images/WildFly/WildFly_20230427_001.png" alt="wildFly日志优化"></p>
]]></content>
      <categories>
        <category>JAXB</category>
      </categories>
      <tags>
        <tag>WildFly</tag>
      </tags>
  </entry>
  <entry>
    <title>JAXB性能优化</title>
    <url>/JAXB/blogs/JAXB%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%A7%8Bjaxbutilspan"><span id="inline-blue">原始JAXBUtil</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-bluejaxb%E4%BC%98%E5%8C%96span"><span id="inline-blue">JAXB优化</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>接口并发压力测试下，RPS耗时非常严重，使用jstack命令抓取堆栈，发现线程在JAXBUtil.jaxbStreamToBean(JAXBUtil.java:314)方法耗时特别严重。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;http-0.0.0.0-8080-472&quot;</span> daemon prio=<span class="number">10</span> tid=<span class="number">0x00007f4a00371000</span> nid=<span class="number">0x11891</span> runnable [<span class="number">0x00007f46c003d000</span>]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at java.util.zip.ZipFile.getEntry(Native Method)</span><br><span class="line">	at java.util.zip.ZipFile.getEntry(ZipFile.java:<span class="number">162</span>)</span><br><span class="line">	- locked &lt;<span class="number">0x0000000744023910</span>&gt; (a java.util.jar.JarFile)</span><br><span class="line">	at java.util.jar.JarFile.getEntry(JarFile.java:<span class="number">208</span>)</span><br><span class="line">	at java.util.jar.JarFile.getJarEntry(JarFile.java:<span class="number">191</span>)</span><br><span class="line">	at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:<span class="number">757</span>)</span><br><span class="line">	at sun.misc.URLClassPath.getResource(URLClassPath.java:<span class="number">169</span>)</span><br><span class="line">	at sun.misc.URLClassPath.getResource(URLClassPath.java:<span class="number">221</span>)</span><br><span class="line">	at java.lang.ClassLoader.getBootstrapResource(ClassLoader.java:<span class="number">1151</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResource(ClassLoader.java:<span class="number">1000</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResource(ClassLoader.java:<span class="number">998</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResource(ClassLoader.java:<span class="number">998</span>)</span><br><span class="line">	at org.jboss.classloader.plugins.loader.ClassLoaderToLoaderAdapter.getResource(ClassLoaderToLoaderAdapter.java:<span class="number">117</span>)</span><br><span class="line">	at org.jboss.classloader.spi.ClassLoaderDomain.getResourceFromParent(ClassLoaderDomain.java:<span class="number">475</span>)</span><br><span class="line">	at org.jboss.classloader.spi.ClassLoaderDomain.beforeGetResource(ClassLoaderDomain.java:<span class="number">431</span>)</span><br><span class="line">	at org.jboss.classloader.spi.base.BaseClassLoaderDomain.getResource(BaseClassLoaderDomain.java:<span class="number">418</span>)</span><br><span class="line">	at org.jboss.classloader.spi.base.BaseClassLoaderDomain.getResource(BaseClassLoaderDomain.java:<span class="number">1136</span>)</span><br><span class="line">	at org.jboss.classloader.spi.base.BaseClassLoader.getResource(BaseClassLoader.java:<span class="number">473</span>)</span><br><span class="line">	at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:<span class="number">1193</span>)</span><br><span class="line">	at org.apache.xerces.parsers.SecuritySupport$<span class="number">6.</span>run(Unknown Source)</span><br><span class="line">	at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">	at org.apache.xerces.parsers.SecuritySupport.getResourceAsStream(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.ObjectFactory.findJarServiceProvider(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.jaxp.SAXParserImpl.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(Unknown Source)</span><br><span class="line">	at javax.xml.bind.helpers.AbstractUnmarshallerImpl.getXMLReader(AbstractUnmarshallerImpl.java:<span class="number">86</span>)</span><br><span class="line">	at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:<span class="number">137</span>)</span><br><span class="line">	at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:<span class="number">184</span>)</span><br><span class="line">	at com.coship.dhm.usm.util.JAXBUtil.jaxbStreamToBean(JAXBUtil.java:<span class="number">269</span>)</span><br><span class="line">	at com.coship.dhm.usm.util.JAXBUtil.jaxbStreamToBean(JAXBUtil.java:<span class="number">314</span>)</span><br><span class="line">	at com.longvision.adapter.ngod.a7.getfoldercontents.action.GetRootContentsAction.getRootContents(GetRootContentsAction.java:<span class="number">77</span>)</span><br><span class="line">	at sun.reflect.GeneratedMethodAccessor437.invoke(Unknown Source)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">25</span>)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Method.java:<span class="number">597</span>)</span><br><span class="line">	at ognl.OgnlRuntime.invokeMethod(OgnlRuntime.java:<span class="number">892</span>)</span><br><span class="line">	at ognl.OgnlRuntime.callAppropriateMethod(OgnlRuntime.java:<span class="number">1294</span>)</span><br><span class="line">	at ognl.ObjectMethodAccessor.callMethod(ObjectMethodAccessor.java:<span class="number">68</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethodWithDebugInfo(XWorkMethodAccessor.java:<span class="number">117</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.accessor.XWorkMethodAccessor.callMethod(XWorkMethodAccessor.java:<span class="number">108</span>)</span><br><span class="line">	at ognl.OgnlRuntime.callMethod(OgnlRuntime.java:<span class="number">1370</span>)</span><br><span class="line">	at ognl.ASTMethod.getValueBody(ASTMethod.java:<span class="number">91</span>)</span><br><span class="line">	at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:<span class="number">212</span>)</span><br><span class="line">	at ognl.SimpleNode.getValue(SimpleNode.java:<span class="number">258</span>)</span><br><span class="line">	at ognl.Ognl.getValue(Ognl.java:<span class="number">467</span>)</span><br><span class="line">	at ognl.Ognl.getValue(Ognl.java:<span class="number">431</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.OgnlUtil$<span class="number">3.</span>execute(OgnlUtil.java:<span class="number">352</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.OgnlUtil.compileAndExecuteMethod(OgnlUtil.java:<span class="number">404</span>)</span><br><span class="line">	at com.opensymphony.xwork2.ognl.OgnlUtil.callMethod(OgnlUtil.java:<span class="number">350</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:<span class="number">430</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:<span class="number">290</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">251</span>)</span><br><span class="line">	at com.longvision.adapter.ngod.interceptor.InterfaceMonitor.doService(InterfaceMonitor.java:<span class="number">220</span>)</span><br><span class="line">	at com.longvision.adapter.ngod.interceptor.InterfaceMonitor.intercept(InterfaceMonitor.java:<span class="number">147</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.DeprecationInterceptor.intercept(DeprecationInterceptor.java:<span class="number">41</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:<span class="number">256</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:<span class="number">168</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:<span class="number">265</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:<span class="number">76</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:<span class="number">138</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:<span class="number">229</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:<span class="number">229</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:<span class="number">191</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:<span class="number">73</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.DateTextFieldInterceptor.intercept(DateTextFieldInterceptor.java:<span class="number">125</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:<span class="number">91</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:<span class="number">253</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:<span class="number">100</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:<span class="number">141</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:<span class="number">145</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:<span class="number">171</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:<span class="number">98</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:<span class="number">140</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:<span class="number">164</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:<span class="number">193</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:<span class="number">189</span>)</span><br><span class="line">	at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:<span class="number">245</span>)</span><br><span class="line">	at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:<span class="number">54</span>)</span><br><span class="line">	at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:<span class="number">575</span>)</span><br><span class="line">	at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:<span class="number">434</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">206</span>)</span><br><span class="line">	at com.coship.system.filter.SystemFilter.doFilter(SystemFilter.java:<span class="number">57</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">206</span>)</span><br><span class="line">	at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:<span class="number">96</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:<span class="number">206</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:<span class="number">235</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:<span class="number">191</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:<span class="number">190</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:<span class="number">92</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:<span class="number">126</span>)</span><br><span class="line">	at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:<span class="number">70</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:<span class="number">127</span>)</span><br><span class="line">	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:<span class="number">102</span>)</span><br><span class="line">	at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:<span class="number">158</span>)</span><br><span class="line">	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:<span class="number">109</span>)</span><br><span class="line">	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:<span class="number">330</span>)</span><br><span class="line">	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:<span class="number">829</span>)</span><br><span class="line">	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:<span class="number">598</span>)</span><br><span class="line">	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:<span class="number">447</span>)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:<span class="number">662</span>)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="原始jaxbutil"><span id="inline-blue">原始JAXBUtil</span></span></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.JAXBContext;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.JAXBException;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Marshaller;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Unmarshaller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.exception.AAAException;</span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.util.StringUtil;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JAXB工具类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 903889</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JAXBUtil</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Object</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String ENCODING = <span class="string">&quot;UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = Logger.getLogger(JAXBUtil.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, JAXBContext&gt; JAXBContextMap = <span class="keyword">new</span> Hashtable&lt;String, JAXBContext&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t 待转换为XML格式的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">String <span class="title">jaxbBeanToStr</span><span class="params">(T t)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Marshaller marshaller = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        String xmlString = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayOutputStream outs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            outs = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            JAXBContext context = getJAXBContext(t.getClass());</span><br><span class="line">            marshaller = context.createMarshaller();</span><br><span class="line"></span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_ENCODING, ENCODING);<span class="comment">// UTF-8</span></span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, <span class="keyword">true</span>);</span><br><span class="line">            marshaller.marshal(t, outs);</span><br><span class="line">            xmlString = <span class="keyword">new</span> String(outs.toByteArray(), ENCODING);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//修改为非chunked格式响应</span></span><br><span class="line">                    <span class="comment">//outs.flush();</span></span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e1)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> xmlString;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用JAXB处理从Bean到流的过程，此方法供写XML使用</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t</span></span><br><span class="line"><span class="comment">     *            包含内容的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outs</span></span><br><span class="line"><span class="comment">     *            一个干净的输出流，经过处理后，内容会注入到该流中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> JAXBException</span></span><br><span class="line"><span class="comment">     *             当包含内容的对象和JAXB模板class不匹配时抛出，实际此处不会抛出该异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">jaxbBeanToStream</span><span class="params">(T t, OutputStream outs)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            String xmlString = jaxbBeanToStr(t);</span><br><span class="line">            outs.write(xmlString.getBytes(ENCODING));</span><br><span class="line"></span><br><span class="line">            log.info(<span class="string">&quot;\n==================================&quot;</span> + t.getClass().getName()</span><br><span class="line">                    + <span class="string">&quot;===返回结果=======================================\n&quot;</span> + xmlString);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//修改为非chunked格式响应</span></span><br><span class="line">                    <span class="comment">//outs.flush();</span></span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable ex)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, String requestXML)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Unmarshaller um = <span class="keyword">null</span>;</span><br><span class="line">        T result = <span class="keyword">null</span>;</span><br><span class="line">        ByteArrayInputStream ins = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            JAXBContext context = getJAXBContext(clazz);</span><br><span class="line">            um = context.createUnmarshaller();</span><br><span class="line">            ins = <span class="keyword">new</span> ByteArrayInputStream(requestXML.getBytes(ENCODING));</span><br><span class="line">            <span class="comment">// 输出流内容</span></span><br><span class="line">            result = (T) um.unmarshal(ins);<span class="comment">// 编码问题再前面已经处理，只需要按JVM的编码处理即可</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;解析XML文件出错,请检查发送报文！&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (ins != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    ins.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable ex)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, InputStream inputStream)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String requestXML;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            requestXML = convertStreamToString(inputStream);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (log.isInfoEnabled())</span><br><span class="line">            &#123;</span><br><span class="line">                log.info(<span class="string">&quot;---requestXML---&quot;</span> + requestXML);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;解析XML文件出错,请检查发送报文！&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jaxbStreamToBean(clazz, requestXML);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 简单创建实例,缓存</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> JAXBException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> JAXBContext <span class="title">getJAXBContext</span><span class="params">(Class&lt;?&gt; clazz)</span> <span class="keyword">throws</span> JAXBException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        JAXBContext context = JAXBContextMap.get(clazz.getName());</span><br><span class="line">        <span class="keyword">if</span> (context == <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            context = JAXBContext.newInstance(clazz);</span><br><span class="line">            JAXBContextMap.put(clazz.getName(), context);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">convertStreamToString</span><span class="params">(InputStream is)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e1)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        String line = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sb.append(line + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (IOException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(String errorCode, String errorMessage, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(errorCode) &amp;&amp; StringUtil.isNil(errorMessage))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line"></span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(Exception e, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            String errorCode = <span class="keyword">null</span>;</span><br><span class="line">            String errorMessage = <span class="keyword">null</span>;</span><br><span class="line">            NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">            <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AAAException)</span><br><span class="line">            &#123;</span><br><span class="line">                AAAException iepgRuntimeException = (AAAException) e;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(iepgRuntimeException.getErrCode()) &amp;&amp; StringUtil.isNil(e.getMessage()))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = iepgRuntimeException.getErrCode();</span><br><span class="line">                    errorMessage = e.getMessage();</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (AAAException e1)</span><br><span class="line">            &#123;</span><br><span class="line">                log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>main方法多线程执行的情况下缓存几乎没有作用，耗时特别严重。<br><img src="/images/JAXB/JAXB_20230421_001.png" alt="JAXB性能优化"></p>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>JAXBContent类是线程安全的、Unmarshal、Marshal是非线程安全的。<br>JAXBContent采用单例进行实例化，map缓存class对应的JAXBContent实例。<br>多线程的情况下执行发现缓存的JAXBContent没有作用，在jaxbBeanToStr和jaxbStreamToBean添加synchorized修饰的情况下，性能有很大提升，但在接口高并发的情况下，两个方法都有获取同步锁的消耗。同时Unmarshal、Marshal的编码和解码有一定耗时，综合考虑之下，决定采用官方推荐用法，将JAXBContent实例交由spring管理，unmarshal,marshall采用线程池实现,jaxb对应的spring文件如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;    </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- Pool (un)marshallers to improve performance --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jaxbContext&quot;</span> <span class="attr">class</span>=<span class="string">&quot;javax.xml.bind.JAXBContext&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">factory-method</span>=<span class="string">&quot;newInstance&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.SessionStop<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.request.RequestPlaylist<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.request.RequestSecret<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.UsmDcssDelete<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.response.ContentRef<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.response.PhysicalPlaylist<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;<span class="name">value</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Class&quot;</span>&gt;</span>com.coship.usm.action.bean.response.RespSecret<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;marshallerTarget&quot;</span> <span class="attr">class</span>=<span class="string">&quot;javax.xml.bind.Marshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">factory-bean</span>=<span class="string">&quot;jaxbContext&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;createMarshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	 </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;unmarshallerTarget&quot;</span> <span class="attr">class</span>=<span class="string">&quot;javax.xml.bind.Unmarshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">factory-bean</span>=<span class="string">&quot;jaxbContext&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;createUnmarshaller&quot;</span></span></span><br><span class="line"><span class="tag">	    <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;poolTargetSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.target.CommonsPoolTargetSource&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;marshallerTarget&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	 </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;unmarshallerPoolTargetSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.target.CommonsPoolTargetSource&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;unmarshallerTarget&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;marshaller&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">value</span>=<span class="string">&quot;marshaller&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;poolTargetSource&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	 </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;unmarshaller&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">qualifier</span> <span class="attr">value</span>=<span class="string">&quot;unmarshaller&quot;</span> /&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;unmarshallerPoolTargetSource&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>applicationContext-jaxb.xml文件放在/src/main/resources目录下即可。<br>constructor-arg节点配置的是由@XmlRootElement注解的xml根节点类路径，多个接口的情况下需要都配置上。</p>
<h1><span id="jaxb优化"><span id="inline-blue">JAXB优化</span></span></h1><p>JAXB.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.JAXBException;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Marshaller;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Unmarshaller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.exception.AAAException;</span><br><span class="line"><span class="keyword">import</span> com.coship.dhm.aaa.commons.util.StringUtil;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JAXB工具类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JAXBUtil</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Object</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String ENCODING = <span class="string">&quot;UTF-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = Logger.getLogger(JAXBUtil.class);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Unmarshaller unmarshaller = (Unmarshaller) SpringContextUtil.getBean(<span class="string">&quot;unmarshaller&quot;</span>);;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Marshaller marshaller = (Marshaller) SpringContextUtil.getBean(<span class="string">&quot;marshaller&quot;</span>);;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t 待转换为XML格式的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  &lt;T&gt;   <span class="function">String <span class="title">jaxbBeanToStr</span><span class="params">(T t)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String xmlString = <span class="keyword">null</span>;</span><br><span class="line">        Date startTime = <span class="keyword">new</span> Date();</span><br><span class="line">        ByteArrayOutputStream outs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            outs = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_ENCODING, ENCODING);<span class="comment">// UTF-8</span></span><br><span class="line">            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, <span class="keyword">true</span>);</span><br><span class="line">            marshaller.marshal(t, outs);</span><br><span class="line">            xmlString = <span class="keyword">new</span> String(outs.toByteArray(), ENCODING);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(e.getMessage(),e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    outs.flush();</span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e1)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Date endTime = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(<span class="string">&quot;marshaller耗时：&quot;</span>+(endTime.getTime()-startTime.getTime())+<span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> xmlString;       </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, String requestXML)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        </span><br><span class="line">        T result = <span class="keyword">null</span>;</span><br><span class="line">        Date startTime = <span class="keyword">new</span> Date();</span><br><span class="line">        ByteArrayInputStream ins = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;	</span><br><span class="line">                ins = <span class="keyword">new</span> ByteArrayInputStream(requestXML.getBytes(ENCODING));</span><br><span class="line">                <span class="comment">// 输出流内容</span></span><br><span class="line">                result = (T) unmarshaller.unmarshal(ins);<span class="comment">// 编码问题再前面已经处理，只需要按JVM的编码处理即可   </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;JAXBUtil.jaxbStreamToBean(): Error parsing XML file, please check the sending message!&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (ins != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    ins.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable egnoreEx)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Date endTime = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(<span class="string">&quot;unmarshaller耗时：&quot;</span>+(endTime.getTime()-startTime.getTime())+<span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用JAXB处理从Bean到流的过程，此方法供写XML使用</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t</span></span><br><span class="line"><span class="comment">     *            包含内容的对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outs</span></span><br><span class="line"><span class="comment">     *            一个干净的输出流，经过处理后，内容会注入到该流中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IepgRuntimeException </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> JAXBException</span></span><br><span class="line"><span class="comment">     *             当包含内容的对象和JAXB模板class不匹配时抛出，实际此处不会抛出该异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">jaxbBeanToStream</span><span class="params">(T t, OutputStream outs)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            String xmlString = jaxbBeanToStr(t);</span><br><span class="line">            outs.write(xmlString.getBytes(ENCODING));</span><br><span class="line"></span><br><span class="line">            log.info(<span class="string">&quot;\n==================================&quot;</span> + t.getClass().getName()</span><br><span class="line">                    + <span class="string">&quot;===返回结果=======================================\n&quot;</span> + xmlString);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//修改为非chunked格式响应</span></span><br><span class="line">                    <span class="comment">//outs.flush();</span></span><br><span class="line">                    outs.close();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Throwable ex)</span><br><span class="line">            &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">jaxbStreamToBean</span><span class="params">(Class&lt;T&gt; clazz, InputStream inputStream)</span> <span class="keyword">throws</span> AAAException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String requestXML;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            requestXML = convertStreamToString(inputStream);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (log.isInfoEnabled())</span><br><span class="line">            &#123;</span><br><span class="line">                log.info(<span class="string">&quot;---requestXML---&quot;</span> + requestXML);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;解析XML文件出错,请检查发送报文！&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AAAException(<span class="string">&quot;405&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jaxbStreamToBean(clazz, requestXML);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">convertStreamToString</span><span class="params">(InputStream is)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (UnsupportedEncodingException e1)</span><br><span class="line">        &#123;</span><br><span class="line">            log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        String line = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sb.append(line + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                is.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (IOException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(String errorCode, String errorMessage, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(errorCode) &amp;&amp; StringUtil.isNil(errorMessage))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line"></span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下发错误码</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sendErrorMessage</span><span class="params">(Exception e, OutputStream outs)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (outs != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            String errorCode = <span class="keyword">null</span>;</span><br><span class="line">            String errorMessage = <span class="keyword">null</span>;</span><br><span class="line">            NavServerResponse navServerResponse = <span class="keyword">new</span> NavServerResponse();</span><br><span class="line">            <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AAAException)</span><br><span class="line">            &#123;</span><br><span class="line">                AAAException iepgRuntimeException = (AAAException) e;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (StringUtil.isNil(iepgRuntimeException.getErrCode()) &amp;&amp; StringUtil.isNil(e.getMessage()))</span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">                    errorMessage = <span class="string">&quot;UNKNOWN_ERROR&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    errorCode = iepgRuntimeException.getErrCode();</span><br><span class="line">                    errorMessage = e.getMessage();</span><br><span class="line">                &#125;</span><br><span class="line">                navServerResponse.setCode(errorCode);</span><br><span class="line">                navServerResponse.setMessage(errorMessage);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                jaxbBeanToStream(navServerResponse, outs);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (AAAException e1)</span><br><span class="line">            &#123;</span><br><span class="line">                log.error(<span class="string">&quot;sendErrorMessage exception！&quot;</span>, e1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SpringContextUtil.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.Unmarshaller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringContextUtil</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> ClassPathXmlApplicationContext context;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span></span><br><span class="line">        &#123;</span><br><span class="line">            context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;spring/*.xml&quot;</span>);    </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ApplicationContext <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Holder.context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getBean</span><span class="params">(String name)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (T) Holder.context.getBean(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	Unmarshaller unmarshaller =(Unmarshaller)  SpringContextUtil.getBean(<span class="string">&quot;unmarshaller&quot;</span>);</span><br><span class="line">        System.out.println(unmarshaller.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>JAXBTest.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.coship.usm.base;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.coship.usm.action.bean.request.RequestPlaylist;</span><br><span class="line"><span class="keyword">import</span> com.coship.usm.action.bean.response.PhysicalPlaylist;</span><br><span class="line"><span class="keyword">import</span> com.coship.usm.util.JAXBUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JAXBTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;num;i++)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">				</span><br><span class="line">				<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">					<span class="keyword">try</span> </span><br><span class="line">					&#123;</span><br><span class="line">						RequestPlaylist requestPlaylist = <span class="keyword">new</span> RequestPlaylist();</span><br><span class="line">						requestPlaylist.setDeviceID(<span class="string">&quot;111&quot;</span>);</span><br><span class="line">						requestPlaylist.setPT(<span class="string">&quot;11&quot;</span>);</span><br><span class="line">						requestPlaylist.setSessionID(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">						requestPlaylist.setSMName(<span class="string">&quot;name111&quot;</span>);</span><br><span class="line">						requestPlaylist.setUsage(<span class="string">&quot;50&quot;</span>);</span><br><span class="line">						JAXBUtil.jaxbBeanToStr(requestPlaylist);</span><br><span class="line">						</span><br><span class="line">						</span><br><span class="line">				    	String requestXML = <span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot; standalone=\&quot;yes\&quot;?&gt;\r\n&quot;</span> + </span><br><span class="line">				    			<span class="string">&quot;&lt;RequestPlaylist deviceID=\&quot;111\&quot; PT=\&quot;11\&quot; sessionID=\&quot;111\&quot; SMName=\&quot;name111\&quot; useage=\&quot;50\&quot;/&gt;&quot;</span>;</span><br><span class="line">						</span><br><span class="line">				    	JAXBUtil.jaxbStreamToBean(PhysicalPlaylist.class, requestXML);</span><br><span class="line">				    	</span><br><span class="line">					&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">						e.printStackTrace();</span><br><span class="line">					&#125;</span><br><span class="line">					</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;).start();		</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/images/JAXB/JAXB_20230421_002.png" alt="JAXB性能优化验证"></p>
]]></content>
      <categories>
        <category>JAXB</category>
      </categories>
      <tags>
        <tag>JAXB</tag>
      </tags>
  </entry>
  <entry>
    <title>Locust接口压力性能问题</title>
    <url>/Locust/blogs/Locust%E6%8E%A5%E5%8F%A3%E5%8E%8B%E5%8A%9B%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%84%9A%E6%9C%AC%E5%86%85%E5%AE%B9span"><span id="inline-blue">脚本内容</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a><ul>
<li><a href="#span-idinline-blue%E5%8D%95%E6%9C%BA%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8Fspan"><span id="inline-blue">单机主从模式</span></a></li>
<li><a href="#span-idinline-blue%E5%A4%9A%E6%9C%BA%E4%B8%BB%E4%BB%8E%E6%A8%A1%E5%BC%8Fspan"><span id="inline-blue">多机主从模式</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>使用locust做接口压力测试，发现RPS在550个用户的并发压力下急剧下降，查看接口所在服务器的cpu、内存、IO、网络传输状态都是正常。<br>查看cpu使用情况命令：top<br>多核的情况下使用mpstat -P ALL 2 1000 可以查看具体每个核上的压力<br>查看内存使用情况命令：free -g<br>查看IO使用情况命令：iostat<br>查看磁盘使用情况命令：dstat<br>查看网络连接、路由表信息命令：netstat</p>
<p>locust的启动命令：locust -f getprograms.py -P 8888<br>-P:指定启动端口<br>-f:指定压测脚本<br>上述命令在压测脚本所在目录执行。</p>
<h1><span id="脚本内容"><span id="inline-blue">脚本内容</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">from locust import task, between</span><br><span class="line">from locust.contrib.fasthttp import FastHttpUser</span><br><span class="line">from locust.user import HttpUser</span><br><span class="line">import datetime</span><br><span class="line">import uuid</span><br><span class="line">import hashlib</span><br><span class="line">import queue</span><br><span class="line">import random</span><br><span class="line">import time</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">class httpResponse(HttpUser):</span><br><span class="line">    network_timeout = 5.0</span><br><span class="line">    connection_timeout = 5.0</span><br><span class="line">    wait_time = between(0.9, 1.1)</span><br><span class="line"></span><br><span class="line">    @task</span><br><span class="line">    def GetPrograms(self):</span><br><span class="line">        #put_data =&quot;&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27; standalone=&#x27;yes&#x27;?&gt;&lt;GetPrograms client=&#x27;8350110822716631&#x27; portalId=&#x27;1&#x27; account=&#x27;8350110822716631&#x27; languageCode=&#x27;Zh-CN&#x27; regionCode=&#x27;1&#x27; profile=&#x27;1.0&#x27; startDateTime=&#x27;20230406060000&#x27; days=&#x27;0&#x27; serviceType=&#x27;BTV&#x27; channelIds=&#x27;103301311&#x27;/&gt;\n&quot;</span><br><span class="line">        put_data =&quot;&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27; standalone=&#x27;yes&#x27;?&gt;&lt;GetPrograms client=&#x27;8350110822716631&#x27; portalId=&#x27;1&#x27; account=&#x27;8350110822716631&#x27; languageCode=&#x27;Zh-CN&#x27; regionCode=&#x27;1&#x27; profile=&#x27;1.0&#x27; startDateTime=&#x27;20230415120000&#x27; days=&#x27;0&#x27; serviceType=&#x27;BTV&#x27; channelIds=&#x27;105523956&#x27;/&gt;\n&quot;</span><br><span class="line">        headers = &#123;</span><br><span class="line">           &quot;Content-Type&quot;: &quot;application/xml&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        url = &#x27;GetPrograms&#x27;</span><br><span class="line">    #     # try:</span><br><span class="line">    #     #     self.client.get(url, name=&quot;layoutScheduleList&quot;)</span><br><span class="line">    #     # except Exception as e:</span><br><span class="line">    #     #     time.sleep(3)</span><br><span class="line">    #     #     raise e</span><br><span class="line">        self.client.post(url, data=put_data, headers=headers, name=&quot;GetPrograms&quot;)</span><br></pre></td></tr></table></figure>

<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>locust对多核系统支持不是很好，常规启动的情况下locust会把所有的压力给到一个cpu核心，导致单核cpu占用过高后，RPS急剧下降。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>采用单机主从模式或则多机主从模式</p>
<h2><span id="单机主从模式"><span id="inline-blue">单机主从模式</span></span></h2><p>启动主节点命令： locust -f getprograms.py -P 8888 –master<br>启动从节点命令： locust -f getprograms.py -P 8888 –worker<br>上述命令可以打开多个linux窗口，针对同一个脚本执行，不需要拷贝多份脚本。</p>
<h2><span id="多机主从模式"><span id="inline-blue">多机主从模式</span></span></h2><p>启动主节点命令： locust -f getprograms.py -P 8888 –master<br>启动从节点命令： locust -f getprograms.py -P 8888 -master-host=10.9.217.33<br>上述命令可以打开多个linux窗口，针对同一个脚本执行，不需要拷贝多份脚本。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Locust/Locust_20230421_001.png" alt="Jboss容器自启动"></p>
]]></content>
      <categories>
        <category>Locust</category>
      </categories>
      <tags>
        <tag>Locust</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux查看当前目录空间占用</title>
    <url>/Linux/blogs/Linux%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%9B%AE%E5%BD%95%E7%A9%BA%E9%97%B4%E5%8D%A0%E7%94%A8/</url>
    <content><![CDATA[<h2><span id="查看空间占用"><span id="inline-blue">查看空间占用</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN elasticsearch-2.4.4]# ls</span><br><span class="line">bin  config  data  EsToolNew  jdk1.7.0_67  lib  LICENSE.txt  logs  modules  NOTICE.txt  pid  plugins  README.textile</span><br><span class="line"><span class="meta">#</span><span class="bash">查看当前目录占用情况</span></span><br><span class="line">[root@lwdCSCDN elasticsearch-2.4.4]# du -sh *</span><br><span class="line">336K	bin</span><br><span class="line">16K	config</span><br><span class="line">31G	data</span><br><span class="line">20M	EsToolNew</span><br><span class="line">285M	jdk1.7.0_67</span><br><span class="line">25M	lib</span><br><span class="line">12K	LICENSE.txt</span><br><span class="line">229M	logs</span><br><span class="line">5.0M	modules</span><br><span class="line">4.0K	NOTICE.txt</span><br><span class="line">4.0K	pid</span><br><span class="line">21M	plugins</span><br><span class="line">12K	README.textile</span><br></pre></td></tr></table></figure>
<h2><span id="查看指定层级空间占用"><span id="inline-blue">查看指定层级空间占用</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN elasticsearch-2.4.4]# du -h --max-depth=2</span><br><span class="line">6.7M	./EsToolNew/logs</span><br><span class="line">4.0K	./EsToolNew/json</span><br><span class="line">4.0K	./EsToolNew/arthas-output</span><br><span class="line">20M	./EsToolNew</span><br><span class="line">31G	./data/recommend</span><br><span class="line">31G	./data</span><br><span class="line">142M	./jdk1.7.0_67/jre</span><br><span class="line">1.8M	./jdk1.7.0_67/man</span><br><span class="line">756K	./jdk1.7.0_67/bin</span><br><span class="line">208K	./jdk1.7.0_67/include</span><br><span class="line">116M	./jdk1.7.0_67/lib</span><br><span class="line">5.0M	./jdk1.7.0_67/db</span><br><span class="line">285M	./jdk1.7.0_67</span><br><span class="line">336K	./bin</span><br><span class="line">229M	./logs</span><br><span class="line">25M	./lib</span><br><span class="line">92K	./modules/reindex</span><br><span class="line">512K	./modules/lang-expression</span><br><span class="line">4.4M	./modules/lang-groovy</span><br><span class="line">5.0M	./modules</span><br><span class="line">9.3M	./plugins/sql</span><br><span class="line">9.5M	./plugins/ik</span><br><span class="line">964K	./plugins/bigdesk</span><br><span class="line">216K	./plugins/marvel-agent</span><br><span class="line">164K	./plugins/license</span><br><span class="line">21M	./plugins</span><br><span class="line">4.0K	./config/scripts</span><br><span class="line">16K	./config</span><br><span class="line">31G	.</span><br></pre></td></tr></table></figure>
<p>参数说明：<br>    -a或-all 显示目录中个别文件的大小。<br>-b或-bytes 显示目录或文件大小时，以byte为单位。<br>-c或–total 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。<br>-D或–dereference-args 显示指定符号连接的源文件大小。<br>-h或–human-readable 以K，M，G为单位，提高信息的可读性。<br>-H或–si 与-h参数相同，但是K，M，G是以1000为换算单位。<br>-k或–kilobytes 以1024 bytes为单位。<br>-l或–count-links 重复计算硬件连接的文件。<br>-L&lt;符号连接&gt;或–dereference&lt;符号连接&gt; 显示选项中所指定符号连接的源文件大小。<br>-m或–megabytes 以1MB为单位。<br>-s或–summarize 仅显示总计。<br>-S或–separate-dirs 显示个别目录的大小时，并不含其子目录的大小。<br>-x或–one-file-xystem 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。<br>-X&lt;文件&gt;或–exclude-from=&lt;文件&gt; 在&lt;文件&gt;指定目录或文件。<br>–exclude=&lt;目录或文件&gt; 略过指定的目录或文件。<br>–max-depth=&lt;目录层数&gt; 超过指定层数的目录后，予以忽略。<br>–help 显示帮助。<br>–version 显示版本信息。</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux文件清空操作</title>
    <url>/Linux/blogs/Linux%E6%96%87%E4%BB%B6%E6%B8%85%E7%A9%BA%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h2><span id="文件清空"><span id="inline-blue">文件清空</span></span></h2><p>windows7 64</p>
<h3><span id="使用重定向的方法"><span id="inline-blue">使用重定向的方法</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> test.txt</span> </span><br></pre></td></tr></table></figure>

<h3><span id="使用true命令重定向清空文件"><span id="inline-blue">使用true命令重定向清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">true &gt; test.txt</span><br></pre></td></tr></table></figure>

<h3><span id="使用catcpdd命令及devnull设备来清空文件"><span id="inline-blue">使用cat/cp/dd命令及/dev/null设备来清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /dev/null &gt;  test.txt</span><br><span class="line">cp -f /dev/null test.txt </span><br><span class="line">dd if=/dev/null of=test.txt</span><br></pre></td></tr></table></figure>
<h3><span id="使用echo命令清空文件"><span id="inline-blue">使用echo命令清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo -n &quot;&quot; &gt; test.txt    ==&gt;要加上&quot;-n&quot;参数，默认情况下会&quot;\n&quot;，也就是回车符</span><br></pre></td></tr></table></figure>

<h3><span id="使用truncate命令清空文件"><span id="inline-blue">使用truncate命令清空文件</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">truncate -s 0 test.txt   -s参数用来设定文件的大小，清空文件，就设定为0；</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux环境查看class文件编译版本信息</title>
    <url>/Linux/blogs/Linux%E7%8E%AF%E5%A2%83%E6%9F%A5%E7%9C%8Bclass%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<h2><span id="查看class文件编译版本信息"><span id="inline-blue">查看class文件编译版本信息</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN common]# javap -v CommonContent.class </span><br><span class="line">Classfile /usr/local/moui_nanjing/V242/coship-oms/webapps/oms/WEB-INF/classes/com/coship/oms/common/CommonContent.class</span><br><span class="line">  Last modified 2021-11-16; size 474 bytes</span><br><span class="line">  MD5 checksum def74d7189fc3d20401e9070e4c8ad37</span><br><span class="line">  Compiled from &quot;CommonContent.java&quot;</span><br><span class="line">public class com.coship.oms.common.CommonContent</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 52</span><br><span class="line"><span class="meta">#</span><span class="bash"> major version: 52  代表是java编译版本为1.8</span></span><br></pre></td></tr></table></figure>
<h2><span id="java编译器版本对应关系"><span id="inline-blue">Java编译器版本对应关系</span></span></h2><pre><code>Unsupported major.minor version 52.0 对应于 JDK1.8（JRE1.8） </code></pre>
<p>　　Unsupported major.minor version 51.0 对应于 JDK1.7（JRE1.7） </p>
<p>　　Unsupported major.minor version 50.0 对应于 JDK1.6（JRE1.6） </p>
<p>　　Unsupported major.minor version 49.0 对应于 JDK1.5（JRE1.5）</p>
<h2><span id="兼容关系"><span id="inline-blue">兼容关系</span></span></h2><p>Java低版本编译的jar包，可以在高版本Java编译环境下运行，反之，Java高版本编译的jar包不能在低版本Java环境运行</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Ant从Maven的pom.xml文件获取内容</title>
    <url>/Maven/blogs/Ant%E4%BB%8EMaven%E7%9A%84pom.xml%E6%96%87%E4%BB%B6%E8%8E%B7%E5%8F%96%E5%86%85%E5%AE%B9/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluebuildxml%E8%AF%BB%E5%8F%96pomxml%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">build.xml读取pom.xml版本信息</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="buildxml读取pomxml版本信息"><span id="inline-blue">build.xml读取pom.xml版本信息</span></span></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#引入pom.xml文件，以xml方式读取文件内容，节点属性以pom.project开始</span><br><span class="line">&lt;xmlproperty file&#x3D;&quot;pom.xml&quot; prefix&#x3D;&quot;pom&quot; &#x2F;&gt;</span><br><span class="line">&lt;echo&gt;The version is $&#123;pom.project.version&#125;&lt;&#x2F;echo&gt;</span><br></pre></td></tr></table></figure>
<p>读取pom.xml文件中properties节点下的log4j-version信息<br>pom.xml文件中的内容如下</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="name">java-version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java-version</span>&gt;</span></span><br><span class="line">  		<span class="comment">&lt;!-- maven打包忽略 test目录编译、不执行测试用例--&gt;</span></span><br><span class="line">  		<span class="tag">&lt;<span class="name">maven.test.skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">maven.test.skip</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">org.springframework-version</span>&gt;</span>3.0.5.RELEASE<span class="tag">&lt;/<span class="name">org.springframework-version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">org.apache.struts-version</span>&gt;</span>2.3.32<span class="tag">&lt;/<span class="name">org.apache.struts-version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">log4j-version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">log4j-version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ant的构建文件build.xml用法如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xmlproperty</span> <span class="attr">file</span>=<span class="string">&quot;pom.xml&quot;</span> <span class="attr">prefix</span>=<span class="string">&quot;pom&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">echo</span>&gt;</span>The version is $&#123;pom.project.properties.log4j-version&#125;<span class="tag">&lt;/<span class="name">echo</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Maven/Maven_20230303_001.png" alt="ant读取pom文件信息"></p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows删除文件失败解决办法</title>
    <url>/Windows/blogs/Windows%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>远程工具向日葵采用复制粘贴方式拷贝文件至远程vpn环境卡死，取消一直不能成功的情况下在系统进程结束相关的进程，结果eclipse开发工具编译相关的项目文件提示之前拷贝文件的目录在执行mvn clean命令过程中无法删除，在工具外部执行强制删除也是一样的现象，无法修改文件的属性（不能变更文件夹的所有者和权限信息）</p>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>文件夹被远程工具占用<br>定位方法：<br>windows任务栏右键启动任务管理器，打开资源监视器<br>搜索框填写被占用的文件夹名称，查找出对应的句柄，右键结束占用即可。<br><img src="/images/Windows/Windows_20230302_001.png" alt="任务管理器"><br><img src="/images/Windows/Windows_20230302_002.png" alt="资源监视器"></p>
]]></content>
      <categories>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>aapt_linux_64解析apk异常</title>
    <url>/Java/blogs/aapt_linux_64%E8%A7%A3%E6%9E%90apk%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">问题原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>./aapt_linux_64 d badging qMGFk7zYMWcN.apk<br>参数b标识dump<br>参数badging标识输出详细信息，执行提示如下错误</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./aapt_linux_64 d badging qMGFk7zYMWcN.apk</span><br><span class="line">./aapt_linux_64: error while loading shared libraries: libstdc++.so.6: wrong ELF class: ELFCLASS64</span><br></pre></td></tr></table></figure>
<h1><span id="问题原因"><span id="inline-blue">问题原因</span></span></h1><p>aapt_linux_64工具是32位，目前系统普遍是64位，导致调用32位的库函数失败<br>64位库函数所在目录/usr/lib64<br>32为库函数所在目录/usr/lib</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>将/usr/lib目录下libstdc++.so.6指向32为库函数文件<br>准备一个32位libstdc++.so.6文件，例如libstdc++.so.6.0.13<br>将原始/usr/lib目录下libstdc++.so.6删除，并创建软连接指向libstdc++.so.6.0.13</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/lib</span><br><span class="line"><span class="meta">#</span><span class="bash">删除原始软连接</span> </span><br><span class="line">rm -f libstdc++.so.6</span><br><span class="line"><span class="meta">#</span><span class="bash">创建软连接</span></span><br><span class="line">ln -s libstdc++.so.6.0.13 libstdc++.so.6</span><br></pre></td></tr></table></figure>
<p>查看一个库函数是32位还是64位</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">file libstdc++.so.6.0.13</span><br><span class="line">libstdc++.so.6.0.13: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, stripped</span><br></pre></td></tr></table></figure>
<p>定位一个库函数所在目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">locate命令从数据库文件内查找，效率比find高</span></span><br><span class="line">locate libstdc++.so.6</span><br><span class="line">/usr/lib/libstdc++.so.6</span><br><span class="line">/usr/lib/libstdc++.so.6.0.13</span><br><span class="line">/usr/lib/libstdc++.so.6.0.26</span><br><span class="line">/usr/lib/libstdc++.so.6.bak</span><br><span class="line">/usr/lib64/libstdc++.so.6</span><br><span class="line">/usr/lib64/libstdc++.so.6.0.13</span><br><span class="line">/usr/lib64/libstdc++.so.6.0.26</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN home]# ./aapt_linux_64 d  badging qMGFk7zYMWcN.apk</span><br><span class="line">./aapt_linux_64: /usr/lib/libz.so.1: no version information available (required by ./aapt_linux_64)</span><br><span class="line">package: name=&#x27;com.goke.lmm&#x27; versionCode=&#x27;20220721&#x27; versionName=&#x27;1.29&#x27;</span><br><span class="line">sdkVersion:&#x27;19&#x27;</span><br><span class="line">targetSdkVersion:&#x27;25&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.GET_TASKS&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.READ_EXTERNAL_STORAGE&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.WRITE_EXTERNAL_STORAGE&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.INTERNET&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.GOKE_SYSTEM_MANAGER_SERVICE&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.SYSTEM_ALERT_WINDOW&#x27;</span><br><span class="line">uses-permission:&#x27;android.permission.ACCESS_NETWORK_STATE&#x27;</span><br><span class="line">application-label:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ca:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-da:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fa:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ja:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-nb:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-de:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-af:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-bg:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-th:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fi:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hi:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-vi:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sk:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-uk:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-el:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-nl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-tl:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-am:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-in:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ko:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ro:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ar:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-tr:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-cs:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-es:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-it:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-lt:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pt:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hu:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ru:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zu:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-lv:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sv:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-iw:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sw:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-bs_BA:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-fr_CA:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-lo_LA:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-en_GB:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-bn_BD:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-et_EE:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ka_GE:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ky_KG:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-km_KH:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zh_HK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-si_LK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-mk_MK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ur_PK:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-sq_AL:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-hy_AM:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-my_MM:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zh_CN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pa_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ta_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-te_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ml_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-en_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-kn_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-mr_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-gu_IN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-mn_MN:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ne_NP:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pt_BR:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-gl_ES:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-eu_ES:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-is_IS:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-es_US:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-pt_PT:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-en_AU:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-zh_TW:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-be_BY:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-ms_MY:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-az_AZ:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-kk_KZ:&#x27;媒体中心&#x27;</span><br><span class="line">application-label-uz_UZ:&#x27;媒体中心&#x27;</span><br><span class="line">application-icon-120:&#x27;res/mipmap-mdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-160:&#x27;res/mipmap-mdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-240:&#x27;res/mipmap-hdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-320:&#x27;res/mipmap-xhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-480:&#x27;res/mipmap-xxhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-640:&#x27;res/mipmap-xxxhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-icon-65534:&#x27;res/mipmap-xxxhdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application: label=&#x27;媒体中心&#x27; icon=&#x27;res/mipmap-mdpi-v4/localplayers_icon.png&#x27;</span><br><span class="line">application-debuggable</span><br><span class="line">launchable-activity: name=&#x27;com.goke.lmm.MainActivity&#x27;  label=&#x27;&#x27; icon=&#x27;&#x27;</span><br><span class="line">uses-feature:&#x27;android.hardware.touchscreen&#x27;</span><br><span class="line">uses-implied-feature:&#x27;android.hardware.touchscreen&#x27;,&#x27;assumed you require a touch screen unless explicitly made optional&#x27;</span><br><span class="line">uses-feature:&#x27;android.hardware.screen.landscape&#x27;</span><br><span class="line">uses-implied-feature:&#x27;android.hardware.screen.landscape&#x27;,&#x27;one or more activities have specified a landscape orientation&#x27;</span><br><span class="line">main</span><br><span class="line">other-activities</span><br><span class="line">supports-screens: &#x27;small&#x27; &#x27;normal&#x27; &#x27;large&#x27; &#x27;xlarge&#x27;</span><br><span class="line">supports-any-density: &#x27;true&#x27;</span><br><span class="line">locales: &#x27;--_--&#x27; &#x27;ca&#x27; &#x27;da&#x27; &#x27;fa&#x27; &#x27;ja&#x27; &#x27;nb&#x27; &#x27;de&#x27; &#x27;af&#x27; &#x27;bg&#x27; &#x27;th&#x27; &#x27;fi&#x27; &#x27;hi&#x27; &#x27;vi&#x27; &#x27;sk&#x27; &#x27;uk&#x27; &#x27;el&#x27; &#x27;nl&#x27; &#x27;pl&#x27; &#x27;sl&#x27; &#x27;tl&#x27; &#x27;am&#x27; &#x27;in&#x27; &#x27;ko&#x27; &#x27;ro&#x27; &#x27;ar&#x27; &#x27;</span><br><span class="line">fr&#x27; &#x27;hr&#x27; &#x27;sr&#x27; &#x27;tr&#x27; &#x27;cs&#x27; &#x27;es&#x27; &#x27;it&#x27; &#x27;lt&#x27; &#x27;pt&#x27; &#x27;hu&#x27; &#x27;ru&#x27; &#x27;zu&#x27; &#x27;lv&#x27; &#x27;sv&#x27; &#x27;iw&#x27; &#x27;sw&#x27; &#x27;bs_BA&#x27; &#x27;fr_CA&#x27; &#x27;lo_LA&#x27; &#x27;en_GB&#x27; &#x27;bn_BD&#x27; &#x27;et_EE&#x27; &#x27;ka_GE&#x27; &#x27;ky_KG&#x27; &#x27;km_KH&#x27; &#x27;zh_HK&#x27; &#x27;si_LK&#x27; &#x27;mk_MK&#x27; &#x27;ur_PK&#x27; &#x27;sq_AL&#x27; &#x27;hy_AM&#x27; &#x27;my_MM&#x27; &#x27;zh_CN&#x27; &#x27;pa_IN&#x27; &#x27;ta_IN&#x27; &#x27;te_IN&#x27; &#x27;ml_IN&#x27; &#x27;en_IN&#x27; &#x27;kn_IN&#x27; &#x27;mr_IN&#x27; &#x27;gu_IN&#x27; &#x27;mn_MN&#x27; &#x27;ne_NP&#x27; &#x27;pt_BR&#x27; &#x27;gl_ES&#x27; &#x27;eu_ES&#x27; &#x27;is_IS&#x27; &#x27;es_US&#x27; &#x27;pt_PT&#x27; &#x27;en_AU&#x27; &#x27;zh_TW&#x27; &#x27;be_BY&#x27; &#x27;ms_MY&#x27; &#x27;az_AZ&#x27; &#x27;kk_KZ&#x27; &#x27;uz_UZ&#x27;densities: &#x27;120&#x27; &#x27;160&#x27; &#x27;240&#x27; &#x27;320&#x27; &#x27;480&#x27; &#x27;640&#x27; &#x27;65534&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>排查二维码接口访问异常</title>
    <url>/Java/blogs/%E6%8E%92%E6%9F%A5%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%8E%A5%E5%8F%A3%E8%AE%BF%E9%97%AE%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>请求获取二维码接口异常，异常信息如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">The server encountered an internal error () that prevented it from fulfilling this request.&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;exception&lt;/b&gt; &lt;pre&gt;java.lang.IllegalStateException: getOutputStream() has already been called for this response</span><br><span class="line">	org.apache.catalina.connector.Response.getWriter(Response.java:619)</span><br><span class="line">	org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)</span><br><span class="line">	org.apache.velocity.tools.view.VelocityViewServlet.mergeTemplate(VelocityViewServlet.java:315)</span><br><span class="line">	org.apache.velocity.tools.view.VelocityViewServlet.doRequest(VelocityViewServlet.java:220)</span><br><span class="line">	org.apache.velocity.tools.view.VelocityViewServlet.doGet(VelocityViewServlet.java:182)</span><br><span class="line">	javax.servlet.http.HttpServlet.service(HttpServlet.java:617)</span><br><span class="line">	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)</span><br><span class="line">	org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:164)</span><br><span class="line">	org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:191)</span><br><span class="line">	com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:372)</span><br><span class="line">	com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:276)</span><br><span class="line">	org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)</span><br><span class="line">	org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:575)</span><br><span class="line">	org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:81)</span><br><span class="line">	org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:99)</span><br><span class="line">	com.coship.system.filter.SystemFilter.doFilter(SystemFilter.java:59)</span><br><span class="line">	org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)</span><br></pre></td></tr></table></figure>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>1、接口之前一直是正常的，最近修改了访问的jsp页面，但逻辑没怎么变动，按照道理应该是没问题的，网上查询对应的错误信息，都表示与同时response.getWriter()与response.getOutputStream() 冲突有关，但排查代码后发现并没有使用上的冲突，并且之前一直是好的。<br>2、服务部署在jboss容器/usr/local/portal/wildfly26-portal/standalone/deployments/portal.war目录，其中替换了部分逻辑页面<br>3、日志目录bin/portal/log/info下莫名生成名为NotifyGetPaymentAction文件，打开发现是jsp文件，与替换页面的时间点一致，猜测问题可能是由于这个文件引起的，删除后重启，接口访问正常。</p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Jboss应用接口无响应</title>
    <url>/Jboss/blogs/Jboss%E5%BA%94%E7%94%A8%E6%8E%A5%E5%8F%A3%E6%97%A0%E5%93%8D%E5%BA%94/</url>
    <content><![CDATA[<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>java应用程序接口请求数据无响应，抓取堆栈日志如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">2022-11-15 13:37:15</span><br><span class="line">Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.131-b11 mixed mode):</span><br><span class="line"></span><br><span class="line">&quot;Attach Listener&quot; #174 daemon prio=9 os_prio=0 tid=0x0000000013c90000 nid=0x2c5e waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;DestroyJavaVM&quot; #173 prio=5 os_prio=0 tid=0x00000000135ec800 nid=0x3f64 waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- None</span><br><span class="line"></span><br><span class="line">&quot;pool-3-thread-80&quot; #171 prio=5 os_prio=0 tid=0x0000000015635000 nid=0x4012 runnable [0x000000004c29a000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.epollWait(Native Method)</span><br><span class="line">	at sun.nio.ch.EPollArrayWrapper.poll(EPollArrayWrapper.java:269)</span><br><span class="line">	at sun.nio.ch.EPollSelectorImpl.doSelect(EPollSelectorImpl.java:93)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:86)</span><br><span class="line">	- locked &lt;0x00000000f4b008f0&gt; (a sun.nio.ch.Util$3)</span><br><span class="line">	- locked &lt;0x00000000f4b008e0&gt; (a java.util.Collections$UnmodifiableSet)</span><br><span class="line">	- locked &lt;0x00000000f4b00900&gt; (a sun.nio.ch.EPollSelectorImpl)</span><br><span class="line">	at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:97)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.SelectorUtil.select(SelectorUtil.java:68)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.select(AbstractNioSelector.java:434)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:212)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)</span><br><span class="line">	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)</span><br><span class="line">	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)</span><br><span class="line">	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)</span><br><span class="line">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:748)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">	- &lt;0x00000000f4b009d0&gt; (a java.util.concurrent.ThreadPoolExecutor$Worker)</span><br><span class="line">	</span><br></pre></td></tr></table></figure>


<p>搜索了下堆栈关键字信息,网上解释说这个问题是由于jdk的漏洞导致，但这个问题是最近才发现，所以继续查找对应的可能信息</p>
<h1><span id="分析"><span id="inline-blue">分析</span></span></h1><p>查看文件打开数设置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -a</span><br></pre></td></tr></table></figure>
<p><img src="/images/Jboss/20221117_Jboss_001.png" alt="Jboss接口无响应"><br>尝试更改/etc/profile,/etc/security/limits.conf文件,添加ulimit -HSn 65535<br>发现更改之后即使重启也没法生效，参考网上的解决方案：<a href="https://blog.csdn.net/Daphnisz/article/details/124079757">https://blog.csdn.net/Daphnisz/article/details/124079757</a><br>大概意思是PAM选项没有开启的情况下导致修改不生效(PAM，Pluggable Authentication Modules，可插拔认证模块)</p>
<p>添加参数支持<br>1、修改openssh配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在文件末尾添加：UsePAM yes</span></span><br><span class="line">vim /etc/ssh/sshd_config</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2、重启ssh服务</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure>
<p>3、验证</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -n</span><br></pre></td></tr></table></figure>

<p>发现无法生效，继续排查原因发现在系统日志目录下/var/log/messages,打印错误信息，提示UsePAM参数不支持，参考网上解决方案<a href="https://www.jianshu.com/p/db918237644a%EF%BC%8C">https://www.jianshu.com/p/db918237644a，</a><br>意思是说openssh模块开始安装的时候没有添加–with-pam 选项，导致PAM参数无法更改。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>在不重装openssh模块的前提下：<br>应用程序的文件打开数实际是由/proc/pid/limits文件控制，如果能修改为65535，那也能规避这个问题。通过将应用重启命令加入到自启动(rc.local),添加命令内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -HSn 65535</span><br><span class="line">cd /usr/local/ulms/jboss/bin;</span><br><span class="line">sh start.sh;</span><br></pre></td></tr></table></figure>

<p>这样修改之后如果重启jboss，则参数恢复到1024,将ulimit -HSn 65535添加到start.sh文件开始位置,<br>保证即使重启也能生效，避免应用程序接口响应现象不一致的问题。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>20601为应用程序进程号</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /proc/20601/limits</span><br></pre></td></tr></table></figure>

<p><img src="/images/Jboss/20221117_Jboss_002.png" alt="验证"></p>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL树形结构辅助函数</title>
    <url>/MySQL/blogs/MySQL%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A1%A8%E7%BB%93%E6%9E%84span"><span id="inline-blue">表结构</span></a></li>
<li><a href="#span-idinline-bluequerychildrenspan"><span id="inline-blue">queryChildren</span></a></li>
<li><a href="#span-idinline-bluegetparentlistspan"><span id="inline-blue">getParentList</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="表结构"><span id="inline-blue">表结构</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_iepg_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 16:39:42</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `area`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `area`  (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `parentId` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `remark` <span class="type">varchar</span>(<span class="number">256</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;025&#x27;</span>, <span class="string">&#x27;南京市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南京各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;1502&#x27;</span>, <span class="string">&#x27;江宁&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;江宁布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;1503&#x27;</span>, <span class="string">&#x27;六合&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;1504&#x27;</span>, <span class="string">&#x27;浦口&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1053&#x27;</span>, <span class="string">&#x27;1505&#x27;</span>, <span class="string">&#x27;雨花&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;1506&#x27;</span>, <span class="string">&#x27;高淳&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;1509&#x27;</span>, <span class="string">&#x27;溧水&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;0516&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;徐州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1058&#x27;</span>, <span class="string">&#x27;3202&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;0518&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;连云港各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;3209&#x27;</span>, <span class="string">&#x27;东海&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1061&#x27;</span>, <span class="string">&#x27;3212&#x27;</span>, <span class="string">&#x27;赣榆&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1062&#x27;</span>, <span class="string">&#x27;3025&#x27;</span>, <span class="string">&#x27;灌南&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1063&#x27;</span>, <span class="string">&#x27;3023&#x27;</span>, <span class="string">&#x27;灌云&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1064&#x27;</span>, <span class="string">&#x27;3201&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;0513&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南通各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1066&#x27;</span>, <span class="string">&#x27;3310&#x27;</span>, <span class="string">&#x27;如东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1067&#x27;</span>, <span class="string">&#x27;3305&#x27;</span>, <span class="string">&#x27;通州&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1068&#x27;</span>, <span class="string">&#x27;3308&#x27;</span>, <span class="string">&#x27;启东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1069&#x27;</span>, <span class="string">&#x27;3307&#x27;</span>, <span class="string">&#x27;海门&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1070&#x27;</span>, <span class="string">&#x27;3301&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;0515&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;盐城各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1072&#x27;</span>, <span class="string">&#x27;3022&#x27;</span>, <span class="string">&#x27;阜宁&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1073&#x27;</span>, <span class="string">&#x27;3096&#x27;</span>, <span class="string">&#x27;射阳&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1074&#x27;</span>, <span class="string">&#x27;3054&#x27;</span>, <span class="string">&#x27;滨海&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1075&#x27;</span>, <span class="string">&#x27;3053&#x27;</span>, <span class="string">&#x27;建湖&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1076&#x27;</span>, <span class="string">&#x27;3061&#x27;</span>, <span class="string">&#x27;大丰&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1077&#x27;</span>, <span class="string">&#x27;3052&#x27;</span>, <span class="string">&#x27;东台&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1078&#x27;</span>, <span class="string">&#x27;3055&#x27;</span>, <span class="string">&#x27;响水&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1079&#x27;</span>, <span class="string">&#x27;3051&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;0519&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;常州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1081&#x27;</span>, <span class="string">&#x27;3316&#x27;</span>, <span class="string">&#x27;金坛&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1082&#x27;</span>, <span class="string">&#x27;3065&#x27;</span>, <span class="string">&#x27;溧阳&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1084&#x27;</span>, <span class="string">&#x27;3032&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1085&#x27;</span>, <span class="string">&#x27;0000&#x27;</span>, <span class="string">&#x27;默认布局&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1086&#x27;</span>, <span class="string">&#x27;3204&#x27;</span>, <span class="string">&#x27;丰县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1087&#x27;</span>, <span class="string">&#x27;3095&#x27;</span>, <span class="string">&#x27;贾汪&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;3203&#x27;</span>, <span class="string">&#x27;新沂&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;3024&#x27;</span>, <span class="string">&#x27;铜山&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;3210&#x27;</span>, <span class="string">&#x27;邳州&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1091&#x27;</span>, <span class="string">&#x27;3211&#x27;</span>, <span class="string">&#x27;睢宁&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1092&#x27;</span>, <span class="string">&#x27;3213&#x27;</span>, <span class="string">&#x27;沛县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;0527&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;宿迁各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;3103&#x27;</span>, <span class="string">&#x27;泗阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1095&#x27;</span>, <span class="string">&#x27;3102&#x27;</span>, <span class="string">&#x27;泗洪&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1096&#x27;</span>, <span class="string">&#x27;3064&#x27;</span>, <span class="string">&#x27;沭阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;3101&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;0514&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;扬州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;3205&#x27;</span>, <span class="string">&#x27;仪征&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1100&#x27;</span>, <span class="string">&#x27;3206&#x27;</span>, <span class="string">&#x27;江都&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1101&#x27;</span>, <span class="string">&#x27;3207&#x27;</span>, <span class="string">&#x27;高邮&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;3208&#x27;</span>, <span class="string">&#x27;宝应&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;0517&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;淮安市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1104&#x27;</span>, <span class="string">&#x27;3020&#x27;</span>, <span class="string">&#x27;涟水&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1105&#x27;</span>, <span class="string">&#x27;3021&#x27;</span>, <span class="string">&#x27;淮安区&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1106&#x27;</span>, <span class="string">&#x27;3031&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1107&#x27;</span>, <span class="string">&#x27;3036&#x27;</span>, <span class="string">&#x27;淮阴&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1108&#x27;</span>, <span class="string">&#x27;3037&#x27;</span>, <span class="string">&#x27;洪泽&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1109&#x27;</span>, <span class="string">&#x27;3038&#x27;</span>, <span class="string">&#x27;金湖&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1110&#x27;</span>, <span class="string">&#x27;3063&#x27;</span>, <span class="string">&#x27;盱眙&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;0511&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;镇江市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1112&#x27;</span>, <span class="string">&#x27;3001&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;3004&#x27;</span>, <span class="string">&#x27;扬中&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1114&#x27;</span>, <span class="string">&#x27;3006&#x27;</span>, <span class="string">&#x27;句容&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1116&#x27;</span>, <span class="string">&#x27;3011&#x27;</span>, <span class="string">&#x27;丹徒&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;0523&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1118&#x27;</span>, <span class="string">&#x27;3002&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州分公司&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1119&#x27;</span>, <span class="string">&#x27;3005&#x27;</span>, <span class="string">&#x27;兴化&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州兴化广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1120&#x27;</span>, <span class="string">&#x27;3035&#x27;</span>, <span class="string">&#x27;泰兴&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州泰兴广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1121&#x27;</span>, <span class="string">&#x27;3034&#x27;</span>, <span class="string">&#x27;靖江&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州靖江广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1122&#x27;</span>, <span class="string">&#x27;3033&#x27;</span>, <span class="string">&#x27;姜堰&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州姜堰广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;3317&#x27;</span>, <span class="string">&#x27;武进&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1124&#x27;</span>, <span class="string">&#x27;3056&#x27;</span>, <span class="string">&#x27;盐都&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;3329&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;1510&#x27;</span>, <span class="string">&#x27;栖霞&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;南京市-栖霞区&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;0555&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1130&#x27;</span>, <span class="string">&#x27;3302&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1131&#x27;</span>, <span class="string">&#x27;3113&#x27;</span>, <span class="string">&#x27;丹阳&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;最新修改的区域码&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1133&#x27;</span>, <span class="string">&#x27;0666&#x27;</span>, <span class="string">&#x27;测试布局-单引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1134&#x27;</span>, <span class="string">&#x27;0777&#x27;</span>, <span class="string">&#x27;测试布局-双引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;0510&#x27;</span>, <span class="string">&#x27;无锡市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1136&#x27;</span>, <span class="string">&#x27;199000000001&#x27;</span>, <span class="string">&#x27;用直镇&#x27;</span>, <span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1137&#x27;</span>, <span class="string">&#x27;100000000012&#x27;</span>, <span class="string">&#x27;智慧会龙&#x27;</span>, <span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1142&#x27;</span>, <span class="string">&#x27;3304&#x27;</span>, <span class="string">&#x27;海安&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;1002&#x27;</span>, <span class="string">&#x27;南京&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1144&#x27;</span>, <span class="string">&#x27;100000000236&#x27;</span>, <span class="string">&#x27;江苏有线南京分公司镇名测试&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;南京一镇一屏测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1147&#x27;</span>, <span class="string">&#x27;100000000296&#x27;</span>, <span class="string">&#x27;江苏省公安厅视频会议&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1148&#x27;</span>, <span class="string">&#x27;100000000317&#x27;</span>, <span class="string">&#x27;雪堰镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1149&#x27;</span>, <span class="string">&#x27;100000000318&#x27;</span>, <span class="string">&#x27;前黄镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1150&#x27;</span>, <span class="string">&#x27;100000000319&#x27;</span>, <span class="string">&#x27;礼嘉镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1151&#x27;</span>, <span class="string">&#x27;100000000320&#x27;</span>, <span class="string">&#x27;南夏墅街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1152&#x27;</span>, <span class="string">&#x27;100000000321&#x27;</span>, <span class="string">&#x27;湖塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1153&#x27;</span>, <span class="string">&#x27;100000000322&#x27;</span>, <span class="string">&#x27;牛塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1154&#x27;</span>, <span class="string">&#x27;100000000323&#x27;</span>, <span class="string">&#x27;洛阳镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1155&#x27;</span>, <span class="string">&#x27;100000000324&#x27;</span>, <span class="string">&#x27;横林镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1156&#x27;</span>, <span class="string">&#x27;100000000325&#x27;</span>, <span class="string">&#x27;遥观镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1157&#x27;</span>, <span class="string">&#x27;100000000326&#x27;</span>, <span class="string">&#x27;横山桥镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1158&#x27;</span>, <span class="string">&#x27;100000000327&#x27;</span>, <span class="string">&#x27;郑陆镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1159&#x27;</span>, <span class="string">&#x27;100000000328&#x27;</span>, <span class="string">&#x27;奔牛镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1160&#x27;</span>, <span class="string">&#x27;100000000329&#x27;</span>, <span class="string">&#x27;邹区镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1161&#x27;</span>, <span class="string">&#x27;100000000330&#x27;</span>, <span class="string">&#x27;嘉泽镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1162&#x27;</span>, <span class="string">&#x27;100000000331&#x27;</span>, <span class="string">&#x27;湟里镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1163&#x27;</span>, <span class="string">&#x27;100000000332&#x27;</span>, <span class="string">&#x27;西湖街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1164&#x27;</span>, <span class="string">&#x27;200000000571&#x27;</span>, <span class="string">&#x27;邗江区西湖镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1165&#x27;</span>, <span class="string">&#x27;200000000570&#x27;</span>, <span class="string">&#x27;邗江区杨寿镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1166&#x27;</span>, <span class="string">&#x27;200000000572&#x27;</span>, <span class="string">&#x27;邗江区沙头镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1167&#x27;</span>, <span class="string">&#x27;3062&#x27;</span>, <span class="string">&#x27;如皋&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1169&#x27;</span>, <span class="string">&#x27;100000000336&#x27;</span>, <span class="string">&#x27;溧水本地&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;溧水一镇一屏&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1170&#x27;</span>, <span class="string">&#x27;100000000356&#x27;</span>, <span class="string">&#x27;高淳本地&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1173&#x27;</span>, <span class="string">&#x27;100000000376&#x27;</span>, <span class="string">&#x27;溧水石湫镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1174&#x27;</span>, <span class="string">&#x27;100000000380&#x27;</span>, <span class="string">&#x27;溧水晶桥镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1175&#x27;</span>, <span class="string">&#x27;100000000381&#x27;</span>, <span class="string">&#x27;溧水柘塘镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1176&#x27;</span>, <span class="string">&#x27;100000000378&#x27;</span>, <span class="string">&#x27;溧水白马镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1177&#x27;</span>, <span class="string">&#x27;100000000382&#x27;</span>, <span class="string">&#x27;溧水东屏镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1178&#x27;</span>, <span class="string">&#x27;100000000377&#x27;</span>, <span class="string">&#x27;溧水洪蓝镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1179&#x27;</span>, <span class="string">&#x27;100000000379&#x27;</span>, <span class="string">&#x27;溧水和凤镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1180&#x27;</span>, <span class="string">&#x27;00010&#x27;</span>, <span class="string">&#x27;多屏同看测试组&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1181&#x27;</span>, <span class="string">&#x27;1000000002777&#x27;</span>, <span class="string">&#x27;邳州铁富&#x27;</span>, <span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1182&#x27;</span>, <span class="string">&#x27;100000000396&#x27;</span>, <span class="string">&#x27;石湖乡石湖村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1183&#x27;</span>, <span class="string">&#x27;100000000422&#x27;</span>, <span class="string">&#x27;大彭镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1184&#x27;</span>, <span class="string">&#x27;100000000420&#x27;</span>, <span class="string">&#x27;柳新镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1185&#x27;</span>, <span class="string">&#x27;200000000860&#x27;</span>, <span class="string">&#x27;邗江区瓜洲镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1186&#x27;</span>, <span class="string">&#x27;100000000432&#x27;</span>, <span class="string">&#x27;柳泉镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1188&#x27;</span>, <span class="string">&#x27;15111&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1189&#x27;</span>, <span class="string">&#x27;100000000520&#x27;</span>, <span class="string">&#x27;石湖乡团池村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1190&#x27;</span>, <span class="string">&#x27;100000000524&#x27;</span>, <span class="string">&#x27;石湖乡廖塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1191&#x27;</span>, <span class="string">&#x27;100000000523&#x27;</span>, <span class="string">&#x27;石湖乡池庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1192&#x27;</span>, <span class="string">&#x27;100000000522&#x27;</span>, <span class="string">&#x27;石湖乡乔团村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1193&#x27;</span>, <span class="string">&#x27;100000000521&#x27;</span>, <span class="string">&#x27;石湖乡尤庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1194&#x27;</span>, <span class="string">&#x27;100000000525&#x27;</span>, <span class="string">&#x27;石湖乡驻地&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1195&#x27;</span>, <span class="string">&#x27;100000000518&#x27;</span>, <span class="string">&#x27;石湖乡水库村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1196&#x27;</span>, <span class="string">&#x27;100000000516&#x27;</span>, <span class="string">&#x27;石湖乡大娄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1197&#x27;</span>, <span class="string">&#x27;100000000476&#x27;</span>, <span class="string">&#x27;石湖乡尤塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1198&#x27;</span>, <span class="string">&#x27;100000000517&#x27;</span>, <span class="string">&#x27;石湖乡黄塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1199&#x27;</span>, <span class="string">&#x27;100000000519&#x27;</span>, <span class="string">&#x27;石湖乡贺庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1200&#x27;</span>, <span class="string">&#x27;100000000616&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1201&#x27;</span>, <span class="string">&#x27;200000765252&#x27;</span>, <span class="string">&#x27;宿迁龙河镇1&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1202&#x27;</span>, <span class="string">&#x27;200000775202&#x27;</span>, <span class="string">&#x27;宿迁新庄&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1203&#x27;</span>, <span class="string">&#x27;200000000063&#x27;</span>, <span class="string">&#x27;大仪镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1204&#x27;</span>, <span class="string">&#x27;200000000069&#x27;</span>, <span class="string">&#x27;十二圩镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1206&#x27;</span>, <span class="string">&#x27;200000000900&#x27;</span>, <span class="string">&#x27;广陵区李典镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1207&#x27;</span>, <span class="string">&#x27;200000000920&#x27;</span>, <span class="string">&#x27;邗江区甘泉街道&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1208&#x27;</span>, <span class="string">&#x27;200000000940&#x27;</span>, <span class="string">&#x27;甘泉街道双塘村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1209&#x27;</span>, <span class="string">&#x27;200000782202&#x27;</span>, <span class="string">&#x27;宝应射阳湖&#x27;</span>, <span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1210&#x27;</span>, <span class="string">&#x27;200000784202&#x27;</span>, <span class="string">&#x27;山左口乡北古寨村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1213&#x27;</span>, <span class="string">&#x27;200000787202&#x27;</span>, <span class="string">&#x27;新安街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1214&#x27;</span>, <span class="string">&#x27;200000762204&#x27;</span>, <span class="string">&#x27;zyh603&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;流化测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;200000789208&#x27;</span>, <span class="string">&#x27;草桥&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1216&#x27;</span>, <span class="string">&#x27;200000788203&#x27;</span>, <span class="string">&#x27;高场&#x27;</span>, <span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1217&#x27;</span>, <span class="string">&#x27;200000787203&#x27;</span>, <span class="string">&#x27;钟吾街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1218&#x27;</span>, <span class="string">&#x27;200000789202&#x27;</span>, <span class="string">&#x27;北沟街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1219&#x27;</span>, <span class="string">&#x27;200000789203&#x27;</span>, <span class="string">&#x27;墨河街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1220&#x27;</span>, <span class="string">&#x27;200000789204&#x27;</span>, <span class="string">&#x27;唐店街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1221&#x27;</span>, <span class="string">&#x27;200000789205&#x27;</span>, <span class="string">&#x27;瓦窑镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1222&#x27;</span>, <span class="string">&#x27;200000789206&#x27;</span>, <span class="string">&#x27;港头镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1223&#x27;</span>, <span class="string">&#x27;200000789207&#x27;</span>, <span class="string">&#x27;合沟镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1224&#x27;</span>, <span class="string">&#x27;200000789209&#x27;</span>, <span class="string">&#x27;窑湾镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1225&#x27;</span>, <span class="string">&#x27;200000789210&#x27;</span>, <span class="string">&#x27;棋盘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1226&#x27;</span>, <span class="string">&#x27;200000789211&#x27;</span>, <span class="string">&#x27;马陵山镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1227&#x27;</span>, <span class="string">&#x27;200000789212&#x27;</span>, <span class="string">&#x27;新店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1228&#x27;</span>, <span class="string">&#x27;200000789213&#x27;</span>, <span class="string">&#x27;邵店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1229&#x27;</span>, <span class="string">&#x27;200000789214&#x27;</span>, <span class="string">&#x27;时集镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1230&#x27;</span>, <span class="string">&#x27;200000789215&#x27;</span>, <span class="string">&#x27;高流镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1231&#x27;</span>, <span class="string">&#x27;200000789216&#x27;</span>, <span class="string">&#x27;阿湖镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1232&#x27;</span>, <span class="string">&#x27;200000789217&#x27;</span>, <span class="string">&#x27;双塘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1233&#x27;</span>, <span class="string">&#x27;200000788202&#x27;</span>, <span class="string">&#x27;人民医院&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1235&#x27;</span>, <span class="string">&#x27;200000793202&#x27;</span>, <span class="string">&#x27;西岗街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1236&#x27;</span>, <span class="string">&#x27;200000793203&#x27;</span>, <span class="string">&#x27;八卦洲街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1237&#x27;</span>, <span class="string">&#x27;200000795202&#x27;</span>, <span class="string">&#x27;临河镇&#x27;</span>, <span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1238&#x27;</span>, <span class="string">&#x27;200000800202&#x27;</span>, <span class="string">&#x27;桠溪镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1239&#x27;</span>, <span class="string">&#x27;200000800203&#x27;</span>, <span class="string">&#x27;漆桥镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1240&#x27;</span>, <span class="string">&#x27;200000800204&#x27;</span>, <span class="string">&#x27;砖墙镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1241&#x27;</span>, <span class="string">&#x27;200000802202&#x27;</span>, <span class="string">&#x27;横溪街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1242&#x27;</span>, <span class="string">&#x27;200000802203&#x27;</span>, <span class="string">&#x27;秣陵街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1243&#x27;</span>, <span class="string">&#x27;200000804202&#x27;</span>, <span class="string">&#x27;竹镇镇&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1244&#x27;</span>, <span class="string">&#x27;200000802204&#x27;</span>, <span class="string">&#x27;桥林镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1245&#x27;</span>, <span class="string">&#x27;200000802205&#x27;</span>, <span class="string">&#x27;汤泉镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1246&#x27;</span>, <span class="string">&#x27;200000802206&#x27;</span>, <span class="string">&#x27;星甸镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1247&#x27;</span>, <span class="string">&#x27;200000804203&#x27;</span>, <span class="string">&#x27;雄州街道&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1248&#x27;</span>, <span class="string">&#x27;200000805202&#x27;</span>, <span class="string">&#x27;蒋王街道四联村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1249&#x27;</span>, <span class="string">&#x27;200000805203&#x27;</span>, <span class="string">&#x27;蒋王街道悦来村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="querychildren"><span id="inline-blue">queryChildren</span></span></h1><p>查询当前节点的孩子节点集合(包含自身节点)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_oms_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 17:36:07</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Function structure for queryChildren</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> `queryChildren`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> `queryChildren`(<span class="keyword">parameter</span> <span class="type">INT</span>)</span><br><span class="line"> <span class="keyword">RETURNS</span> <span class="type">varchar</span>(<span class="number">4000</span>) CHARSET utf8</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> sTemp TEXT(<span class="number">60000</span>);</span><br><span class="line">    <span class="keyword">DECLARE</span> sTempChd TEXT(<span class="number">30000</span>);</span><br><span class="line">    <span class="keyword">SET</span> sTemp <span class="operator">=</span> <span class="string">&#x27;-1&#x27;</span>;</span><br><span class="line">    <span class="keyword">SET</span> sTempChd <span class="operator">=</span><span class="built_in">CAST</span>(<span class="keyword">parameter</span> <span class="keyword">AS</span> <span class="type">CHAR</span>);</span><br><span class="line">    WHILE (sTempChd <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>) DO</span><br><span class="line">        <span class="keyword">SET</span> sTemp <span class="operator">=</span> CONCAT(sTemp,<span class="string">&#x27;,&#x27;</span>,sTempChd);</span><br><span class="line">        <span class="keyword">SELECT</span> GROUP_CONCAT(id) <span class="keyword">INTO</span> sTempChd <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> FIND_IN_SET(PARENTID,sTempChd)<span class="operator">&gt;</span><span class="number">0</span>;				</span><br><span class="line">    <span class="keyword">END</span> WHILE;</span><br><span class="line">    <span class="keyword">RETURN</span> sTemp;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>调用示例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> queryChildren(<span class="number">1048</span>);<span class="operator">/</span><span class="operator">/</span>待查询节点ID</span><br></pre></td></tr></table></figure>
<h1><span id="getparentlist"><span id="inline-blue">getParentList</span></span></h1><p>查询当前节点的父级节点(包含自身节点)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_oms_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 17:36:45</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Function structure for getParentList</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> `getParentList`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> `getParentList`(rootId <span class="type">varchar</span>(<span class="number">100</span>))</span><br><span class="line"> <span class="keyword">RETURNS</span> <span class="type">varchar</span>(<span class="number">1000</span>) CHARSET utf8</span><br><span class="line"><span class="keyword">BEGIN</span>   </span><br><span class="line"><span class="keyword">DECLARE</span> fid <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>;   </span><br><span class="line"><span class="keyword">DECLARE</span> str <span class="type">varchar</span>(<span class="number">1000</span>) <span class="keyword">default</span> rootId;   </span><br><span class="line">  </span><br><span class="line">WHILE rootId <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>  do   </span><br><span class="line">    <span class="keyword">SET</span> fid <span class="operator">=</span>(<span class="keyword">SELECT</span> parentId <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> id <span class="operator">=</span> rootId);   </span><br><span class="line">    IF fid <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">THEN</span>   </span><br><span class="line">        <span class="keyword">SET</span> str <span class="operator">=</span> concat(str, <span class="string">&#x27;,&#x27;</span>, fid);   </span><br><span class="line">        <span class="keyword">SET</span> rootId <span class="operator">=</span> fid;   </span><br><span class="line">    <span class="keyword">ELSE</span>   </span><br><span class="line">        <span class="keyword">SET</span> rootId <span class="operator">=</span> fid;   </span><br><span class="line">    <span class="keyword">END</span> IF;   </span><br><span class="line"><span class="keyword">END</span> WHILE;   </span><br><span class="line"><span class="keyword">return</span> str;  </span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>调用SQL示例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> getParentList(<span class="number">1048</span>)<span class="operator">/</span><span class="operator">/</span>待查询节点ID</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL多级区域递归统计实现</title>
    <url>/MySQL/blogs/MySQL%E5%A4%9A%E7%BA%A7%E5%8C%BA%E5%9F%9F%E9%80%92%E5%BD%92%E7%BB%9F%E8%AE%A1%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A6%81%E6%B1%82span"><span id="inline-blue">要求</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="要求"><span id="inline-blue">要求</span></span></h1><p>按照一级城市统计单引擎、双引擎、总数来统计盒子的数量<br>appType:0 单引擎<br>appType:1 双引擎<br>原始数据表结构</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#区域表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `area` (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `parentId` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `remark` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;	</span><br><span class="line"></span><br><span class="line">#上报表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `smartcard_district_relation` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `smartCardId` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;智能卡号&#x27;</span>,</span><br><span class="line">  `statusCode` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;状态码&#x27;</span>,</span><br><span class="line">  `districtCode` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;分公司编码&#x27;</span>,</span><br><span class="line">  `appType` <span class="type">varchar</span>(<span class="number">5</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;盒子类型：0为传统盒子，1为智能盒子&#x27;</span>,</span><br><span class="line">  `factoryName` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;厂商名称&#x27;</span>,</span><br><span class="line">  `createTime` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建/更新时间&#x27;</span>,</span><br><span class="line">  `queryEndTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `queryStartTime` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `sn` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `idx_smartCardId` (`smartCardId`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">1462231</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT<span class="operator">=</span><span class="string">&#x27;智能卡和分公司编码关联表&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>创建caculateTVboxTotal存储过程及辅助函数queryChildren</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Procedure structure for caculateTVboxTotal</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> `caculateTVboxTotal`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> `caculateTVboxTotal`()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">		</span><br><span class="line">			<span class="comment">/*  游标异常停止标识  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_clear_stop_flag <span class="type">INT</span>(<span class="number">13</span>);</span><br><span class="line">		<span class="comment">/* 区域ID  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_areaId <span class="type">INT</span>(<span class="number">13</span>);		</span><br><span class="line">		<span class="comment">/* 区域码  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_areaCode <span class="type">VARCHAR</span>(<span class="number">60</span>);		</span><br><span class="line">		<span class="comment">/* 任务完成标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_done <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">FALSE</span> ; </span><br><span class="line">		<span class="comment">/*  定义游标 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_cursor <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> (<span class="keyword">SELECT</span> <span class="keyword">distinct</span> areaId,areaCode <span class="keyword">FROM</span> first_level_area );</span><br><span class="line">		<span class="comment">/* 循环结束标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> CONTINUE HANDLER <span class="keyword">FOR</span> <span class="keyword">NOT</span> FOUND <span class="keyword">SET</span> out_done <span class="operator">=</span> <span class="literal">TRUE</span> ; </span><br><span class="line">		</span><br><span class="line">		<span class="comment">/*区域临时表 */</span></span><br><span class="line">		<span class="keyword">DROP</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> t_area;</span><br><span class="line">		<span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> `t_area` (</span><br><span class="line">		`id` <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">		`areaCode` <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">		`areaName` <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">		`parentId` <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">		`remark` <span class="type">varchar</span>(<span class="number">256</span>),</span><br><span class="line">		 KEY `id`(id),</span><br><span class="line">		 KEY `areaCode`(areaCode)</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/* 一级区域临时表，存储一级区域*/</span></span><br><span class="line">		<span class="keyword">DROP</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> first_level_area;</span><br><span class="line">		<span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> first_level_area </span><br><span class="line">			(</span><br><span class="line">			 areaId <span class="type">INT</span>(<span class="number">13</span>),</span><br><span class="line">			 areaCode <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 KEY `areaId` (areaId)</span><br><span class="line">			);</span><br><span class="line">			<span class="comment">/* 一级区域子区域关联表，存储一级区域及子区域集合的关联关系，包含一级区域名称*/</span></span><br><span class="line">			<span class="keyword">DROP</span> TEMPORARY <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> first_level_area_relation;</span><br><span class="line">		  <span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> first_level_area_relation </span><br><span class="line">			(</span><br><span class="line">			 currentAreaCode <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 childAreaCode <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 currentAreaName <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">			 KEY `relation_currentAreaCode` (currentAreaCode),</span><br><span class="line">			  KEY `relation_childAreaCode` (childAreaCode)</span><br><span class="line">			);</span><br><span class="line">			REPLACE <span class="keyword">INTO</span> t_area <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> AREA;</span><br><span class="line">			REPLACE <span class="keyword">INTO</span> first_level_area  <span class="keyword">SELECT</span> ID,areaCode <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> parentId <span class="operator">=</span> <span class="number">-1</span>;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">			</span><br><span class="line">		<span class="comment">/* 遍历游标 */</span></span><br><span class="line">		<span class="keyword">OPEN</span> out_cursor ; </span><br><span class="line">		WHILE <span class="keyword">NOT</span> out_done DO </span><br><span class="line">				<span class="keyword">FETCH</span> out_cursor <span class="keyword">INTO</span> v_areaId,v_areaCode; </span><br><span class="line">				IF <span class="keyword">NOT</span> out_done <span class="keyword">THEN</span> 	</span><br><span class="line">						REPLACE <span class="keyword">INTO</span> first_level_area_relation</span><br><span class="line">						<span class="keyword">SELECT</span> w.areaCode,h.areaCode childAreaCode,w.areaName <span class="keyword">FROM</span> </span><br><span class="line">						(</span><br><span class="line">							<span class="comment">/* 生成一级区域和子区域集合的关联关系 */</span></span><br><span class="line">							<span class="keyword">SELECT</span> q.areaCode,t.childAreaId,q.areaName</span><br><span class="line">							<span class="keyword">FROM</span></span><br><span class="line">							(</span><br><span class="line">								<span class="keyword">SELECT</span> v_areaId <span class="keyword">AS</span> current_areaId,substring_index(substring_index(a.childs,<span class="string">&#x27;,&#x27;</span>,b.help_topic_id<span class="operator">+</span><span class="number">1</span>),<span class="string">&#x27;,&#x27;</span>,<span class="number">-1</span>) childAreaId</span><br><span class="line">								<span class="keyword">FROM</span> </span><br><span class="line">								(<span class="keyword">SELECT</span> queryChildren(v_areaId) childs) a</span><br><span class="line">								<span class="keyword">JOIN</span></span><br><span class="line">								mysql.help_topic b</span><br><span class="line">								<span class="keyword">ON</span> b.help_topic_id <span class="operator">&lt;</span> (length(a.childs) <span class="operator">-</span> length(REPLACE(a.childs,<span class="string">&#x27;,&#x27;</span>,<span class="string">&#x27;&#x27;</span>))<span class="operator">+</span><span class="number">1</span>)</span><br><span class="line">							) t,area q</span><br><span class="line">							<span class="keyword">WHERE</span> t.current_areaId <span class="operator">=</span> q.id</span><br><span class="line">							<span class="keyword">AND</span> t.childAreaId <span class="operator">&lt;&gt;</span> <span class="string">&#x27;-1&#x27;</span></span><br><span class="line">							) w,area h</span><br><span class="line">						<span class="keyword">WHERE</span> w.childAreaId <span class="operator">=</span> h.id;</span><br><span class="line">				<span class="keyword">END</span> IF; </span><br><span class="line">		<span class="keyword">END</span> WHILE; </span><br><span class="line">		<span class="keyword">CLOSE</span> out_cursor ;</span><br><span class="line">		<span class="comment">/* 统计SQL ,利用中间表first_level_area_relation*/</span></span><br><span class="line">		<span class="keyword">SELECT</span></span><br><span class="line">		tq.currentAreaName <span class="keyword">AS</span> &quot;所属地区&quot;,</span><br><span class="line">		tq.currentAreaCode <span class="keyword">AS</span> &quot;区域码&quot;,</span><br><span class="line">		tq.currentAreaName <span class="keyword">AS</span> &quot;区域名称&quot;,</span><br><span class="line">		<span class="built_in">sum</span>(</span><br><span class="line">			<span class="keyword">CASE</span></span><br><span class="line">			<span class="keyword">WHEN</span> appType <span class="operator">=</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">				<span class="number">1</span></span><br><span class="line">			<span class="keyword">ELSE</span></span><br><span class="line">				<span class="number">0</span></span><br><span class="line">			<span class="keyword">END</span></span><br><span class="line">		) <span class="keyword">AS</span> &quot;单引擎数量&quot;,</span><br><span class="line">		<span class="built_in">sum</span>(</span><br><span class="line">			<span class="keyword">CASE</span></span><br><span class="line">			<span class="keyword">WHEN</span> appType <span class="operator">=</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">				<span class="number">1</span></span><br><span class="line">			<span class="keyword">ELSE</span></span><br><span class="line">				<span class="number">0</span></span><br><span class="line">			<span class="keyword">END</span></span><br><span class="line">		) <span class="keyword">AS</span> &quot;双引擎数量&quot;,</span><br><span class="line">		<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">AS</span> &quot;该地区盒子总数量&quot;</span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		smartcard_district_relation s,t_area a,first_level_area_relation tq</span><br><span class="line">		<span class="keyword">WHERE</span> s.districtCode <span class="operator">=</span> tq.childAreaCode</span><br><span class="line">		<span class="keyword">AND</span> tq.childAreaCode <span class="operator">=</span> a.areaCode</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> tq.currentAreaCode</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span>  tq.currentAreaName,tq.currentAreaCode;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Function structure for queryChildren</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> `queryChildren`;</span><br><span class="line">delimiter ;;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> `queryChildren`(<span class="keyword">parameter</span> <span class="type">INT</span>)</span><br><span class="line"> <span class="keyword">RETURNS</span> <span class="type">varchar</span>(<span class="number">4000</span>) CHARSET utf8</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> sTemp TEXT(<span class="number">60000</span>);</span><br><span class="line">    <span class="keyword">DECLARE</span> sTempChd TEXT(<span class="number">30000</span>);</span><br><span class="line">    <span class="keyword">SET</span> sTemp <span class="operator">=</span> <span class="string">&#x27;-1&#x27;</span>;</span><br><span class="line">    <span class="keyword">SET</span> sTempChd <span class="operator">=</span><span class="built_in">CAST</span>(<span class="keyword">parameter</span> <span class="keyword">AS</span> <span class="type">CHAR</span>);</span><br><span class="line">    WHILE (sTempChd <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>) DO</span><br><span class="line">        <span class="keyword">SET</span> sTemp <span class="operator">=</span> CONCAT(sTemp,<span class="string">&#x27;,&#x27;</span>,sTempChd);</span><br><span class="line">        <span class="keyword">SELECT</span> GROUP_CONCAT(id) <span class="keyword">INTO</span> sTempChd <span class="keyword">FROM</span> t_area <span class="keyword">WHERE</span> FIND_IN_SET(PARENTID,sTempChd)<span class="operator">&gt;</span><span class="number">0</span>;				</span><br><span class="line">    <span class="keyword">END</span> WHILE;</span><br><span class="line">    <span class="keyword">RETURN</span> sTemp;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">call</span> caculateTVboxTotal;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL列转行实现</title>
    <url>/MySQL/blogs/MySQL%E5%88%97%E8%BD%AC%E8%A1%8C%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A6%81%E6%B1%82span"><span id="inline-blue">要求</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="要求"><span id="inline-blue">要求</span></span></h1><p>将字段存储的规则信息拆分为多行<br><img src="/images/mysql/mysql_20230109_003.png" alt="原始表"><br><img src="/images/mysql/mysql_20230109_004.png" alt="新表"></p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>借助mysql.help_topic辅助表实现</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.help_topic_id<span class="operator">+</span><span class="number">1</span>,substring_index(substring_index(a.parentId,<span class="string">&#x27;,&#x27;</span>,b.help_topic_id<span class="operator">+</span><span class="number">1</span>),<span class="string">&#x27;,&#x27;</span>,<span class="number">-1</span>) parentId</span><br><span class="line">								<span class="keyword">FROM</span> </span><br><span class="line">								(<span class="keyword">SELECT</span> <span class="string">&#x27;0516,0518,0523,0513,0511,0527,0515,0519,0000,0514,025,0510,0555,0517&#x27;</span> <span class="keyword">AS</span> parentId) a</span><br><span class="line">								<span class="keyword">JOIN</span></span><br><span class="line">								mysql.help_topic b</span><br><span class="line">								</span><br><span class="line">								<span class="keyword">ON</span> b.help_topic_id <span class="operator">&lt;</span> (length(a.parentId) <span class="operator">-</span> length(REPLACE(a.parentId,<span class="string">&#x27;,&#x27;</span>,<span class="string">&#x27;&#x27;</span>))<span class="operator">+</span><span class="number">1</span>)	</span><br></pre></td></tr></table></figure>
<p>关键点：<br>b.help_topic_id &lt; (length(a.parentId) - length(REPLACE(a.parentId,’,’,’’))+1)<br>限制help_topic表的连接查询行数与需要拆分字段信息一致<br>substring_index(substring_index(a.parentId,’,’,b.help_topic_id+1),’,’,-1)<br>help_topic_id递增依次取到对应位置截取的数据信息<br>substring_index函数<br>作用：<br>    返回第 count 次出现的分隔符 delim 之前的 expr 的子字符串<br>参数：<br>    expr：一个 STRING 或 BINARY 表达式。<br>    delim：一个与 expr 类型（指定分隔符）匹配的表达式。<br>    count：用于统计分隔符数量的 INTEGER 表达式。<br>返回：<br>    结果与类型 expr 匹配。<br>    如果 count 为正，则返回最终的分隔符左侧的所有内容（从左侧开始计算）。<br>    如果 count 为负，则返回最终的分隔符右侧的所有内容（从右侧开始计算）。<br>用法示例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> substring_index(<span class="string">&#x27;1,2,3,4&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="number">1</span>,<span class="number">2</span></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL行转列实现</title>
    <url>/MySQL/blogs/MySQL%E8%A1%8C%E8%BD%AC%E5%88%97%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E8%A6%81%E6%B1%82span"><span id="inline-blue">要求</span></a></li>
<li><a href="#span-idinline-blue%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">实现</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="要求"><span id="inline-blue">要求</span></span></h1><p>原始表数据：</p>
<p><img src="/images/mysql/mysql_20230109_001.png" alt="原表"><br>新表数据：<br><img src="/images/mysql/mysql_20230109_002.png" alt="新表"><br>将父级区域对应的子区域集合合并展现</p>
<h1><span id="实现"><span id="inline-blue">实现</span></span></h1><p>通过group_concat函数实现行转列<br>原始表结构</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> Navicat Premium Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment"> Source Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Source Server Version : 50560</span></span><br><span class="line"><span class="comment"> Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment"> Source Schema         : nanjing_iepg_xw</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Target Server Type    : MySQL</span></span><br><span class="line"><span class="comment"> Target Server Version : 50560</span></span><br><span class="line"><span class="comment"> File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> Date: 09/01/2023 16:39:42</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `area`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `area`  (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `areaName` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `parentId` <span class="type">varchar</span>(<span class="number">20</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `remark` <span class="type">varchar</span>(<span class="number">256</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of area</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;025&#x27;</span>, <span class="string">&#x27;南京市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南京各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;1502&#x27;</span>, <span class="string">&#x27;江宁&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;江宁布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;1503&#x27;</span>, <span class="string">&#x27;六合&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;1504&#x27;</span>, <span class="string">&#x27;浦口&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1053&#x27;</span>, <span class="string">&#x27;1505&#x27;</span>, <span class="string">&#x27;雨花&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;1506&#x27;</span>, <span class="string">&#x27;高淳&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;1509&#x27;</span>, <span class="string">&#x27;溧水&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;0516&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;徐州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1058&#x27;</span>, <span class="string">&#x27;3202&#x27;</span>, <span class="string">&#x27;徐州市&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;0518&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;连云港各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;3209&#x27;</span>, <span class="string">&#x27;东海&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1061&#x27;</span>, <span class="string">&#x27;3212&#x27;</span>, <span class="string">&#x27;赣榆&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1062&#x27;</span>, <span class="string">&#x27;3025&#x27;</span>, <span class="string">&#x27;灌南&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1063&#x27;</span>, <span class="string">&#x27;3023&#x27;</span>, <span class="string">&#x27;灌云&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1064&#x27;</span>, <span class="string">&#x27;3201&#x27;</span>, <span class="string">&#x27;连云港市&#x27;</span>, <span class="string">&#x27;1059&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;0513&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;南通各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1066&#x27;</span>, <span class="string">&#x27;3310&#x27;</span>, <span class="string">&#x27;如东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1067&#x27;</span>, <span class="string">&#x27;3305&#x27;</span>, <span class="string">&#x27;通州&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1068&#x27;</span>, <span class="string">&#x27;3308&#x27;</span>, <span class="string">&#x27;启东&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1069&#x27;</span>, <span class="string">&#x27;3307&#x27;</span>, <span class="string">&#x27;海门&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1070&#x27;</span>, <span class="string">&#x27;3301&#x27;</span>, <span class="string">&#x27;南通市&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;0515&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;盐城各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1072&#x27;</span>, <span class="string">&#x27;3022&#x27;</span>, <span class="string">&#x27;阜宁&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1073&#x27;</span>, <span class="string">&#x27;3096&#x27;</span>, <span class="string">&#x27;射阳&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1074&#x27;</span>, <span class="string">&#x27;3054&#x27;</span>, <span class="string">&#x27;滨海&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1075&#x27;</span>, <span class="string">&#x27;3053&#x27;</span>, <span class="string">&#x27;建湖&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1076&#x27;</span>, <span class="string">&#x27;3061&#x27;</span>, <span class="string">&#x27;大丰&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1077&#x27;</span>, <span class="string">&#x27;3052&#x27;</span>, <span class="string">&#x27;东台&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1078&#x27;</span>, <span class="string">&#x27;3055&#x27;</span>, <span class="string">&#x27;响水&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1079&#x27;</span>, <span class="string">&#x27;3051&#x27;</span>, <span class="string">&#x27;盐城市&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;0519&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;常州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1081&#x27;</span>, <span class="string">&#x27;3316&#x27;</span>, <span class="string">&#x27;金坛&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1082&#x27;</span>, <span class="string">&#x27;3065&#x27;</span>, <span class="string">&#x27;溧阳&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1084&#x27;</span>, <span class="string">&#x27;3032&#x27;</span>, <span class="string">&#x27;常州市&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1085&#x27;</span>, <span class="string">&#x27;0000&#x27;</span>, <span class="string">&#x27;默认布局&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1086&#x27;</span>, <span class="string">&#x27;3204&#x27;</span>, <span class="string">&#x27;丰县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1087&#x27;</span>, <span class="string">&#x27;3095&#x27;</span>, <span class="string">&#x27;贾汪&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;3203&#x27;</span>, <span class="string">&#x27;新沂&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;3024&#x27;</span>, <span class="string">&#x27;铜山&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;3210&#x27;</span>, <span class="string">&#x27;邳州&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1091&#x27;</span>, <span class="string">&#x27;3211&#x27;</span>, <span class="string">&#x27;睢宁&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1092&#x27;</span>, <span class="string">&#x27;3213&#x27;</span>, <span class="string">&#x27;沛县&#x27;</span>, <span class="string">&#x27;1057&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;0527&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;宿迁各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;3103&#x27;</span>, <span class="string">&#x27;泗阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1095&#x27;</span>, <span class="string">&#x27;3102&#x27;</span>, <span class="string">&#x27;泗洪&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1096&#x27;</span>, <span class="string">&#x27;3064&#x27;</span>, <span class="string">&#x27;沭阳&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;3101&#x27;</span>, <span class="string">&#x27;宿迁市&#x27;</span>, <span class="string">&#x27;1093&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;0514&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;扬州各地市布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;3205&#x27;</span>, <span class="string">&#x27;仪征&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1100&#x27;</span>, <span class="string">&#x27;3206&#x27;</span>, <span class="string">&#x27;江都&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1101&#x27;</span>, <span class="string">&#x27;3207&#x27;</span>, <span class="string">&#x27;高邮&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;3208&#x27;</span>, <span class="string">&#x27;宝应&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;0517&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;淮安市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1104&#x27;</span>, <span class="string">&#x27;3020&#x27;</span>, <span class="string">&#x27;涟水&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1105&#x27;</span>, <span class="string">&#x27;3021&#x27;</span>, <span class="string">&#x27;淮安区&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1106&#x27;</span>, <span class="string">&#x27;3031&#x27;</span>, <span class="string">&#x27;淮安市&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1107&#x27;</span>, <span class="string">&#x27;3036&#x27;</span>, <span class="string">&#x27;淮阴&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1108&#x27;</span>, <span class="string">&#x27;3037&#x27;</span>, <span class="string">&#x27;洪泽&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1109&#x27;</span>, <span class="string">&#x27;3038&#x27;</span>, <span class="string">&#x27;金湖&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1110&#x27;</span>, <span class="string">&#x27;3063&#x27;</span>, <span class="string">&#x27;盱眙&#x27;</span>, <span class="string">&#x27;1103&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;0511&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;镇江市各区县布局&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1112&#x27;</span>, <span class="string">&#x27;3001&#x27;</span>, <span class="string">&#x27;镇江市&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;3004&#x27;</span>, <span class="string">&#x27;扬中&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1114&#x27;</span>, <span class="string">&#x27;3006&#x27;</span>, <span class="string">&#x27;句容&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1116&#x27;</span>, <span class="string">&#x27;3011&#x27;</span>, <span class="string">&#x27;丹徒&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;0523&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1118&#x27;</span>, <span class="string">&#x27;3002&#x27;</span>, <span class="string">&#x27;泰州市&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州分公司&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1119&#x27;</span>, <span class="string">&#x27;3005&#x27;</span>, <span class="string">&#x27;兴化&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州兴化广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1120&#x27;</span>, <span class="string">&#x27;3035&#x27;</span>, <span class="string">&#x27;泰兴&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州泰兴广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1121&#x27;</span>, <span class="string">&#x27;3034&#x27;</span>, <span class="string">&#x27;靖江&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州靖江广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1122&#x27;</span>, <span class="string">&#x27;3033&#x27;</span>, <span class="string">&#x27;姜堰&#x27;</span>, <span class="string">&#x27;1117&#x27;</span>, <span class="string">&#x27;泰州姜堰广电&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;3317&#x27;</span>, <span class="string">&#x27;武进&#x27;</span>, <span class="string">&#x27;1080&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1124&#x27;</span>, <span class="string">&#x27;3056&#x27;</span>, <span class="string">&#x27;盐都&#x27;</span>, <span class="string">&#x27;1071&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;3329&#x27;</span>, <span class="string">&#x27;扬州市&#x27;</span>, <span class="string">&#x27;1098&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;1510&#x27;</span>, <span class="string">&#x27;栖霞&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;南京市-栖霞区&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;0555&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1130&#x27;</span>, <span class="string">&#x27;3302&#x27;</span>, <span class="string">&#x27;马鞍山市&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1131&#x27;</span>, <span class="string">&#x27;3113&#x27;</span>, <span class="string">&#x27;丹阳&#x27;</span>, <span class="string">&#x27;1111&#x27;</span>, <span class="string">&#x27;最新修改的区域码&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1133&#x27;</span>, <span class="string">&#x27;0666&#x27;</span>, <span class="string">&#x27;测试布局-单引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1134&#x27;</span>, <span class="string">&#x27;0777&#x27;</span>, <span class="string">&#x27;测试布局-双引擎&#x27;</span>, <span class="string">&#x27;1129&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;0510&#x27;</span>, <span class="string">&#x27;无锡市&#x27;</span>, <span class="string">&#x27;-1&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1136&#x27;</span>, <span class="string">&#x27;199000000001&#x27;</span>, <span class="string">&#x27;用直镇&#x27;</span>, <span class="string">&#x27;1135&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1137&#x27;</span>, <span class="string">&#x27;100000000012&#x27;</span>, <span class="string">&#x27;智慧会龙&#x27;</span>, <span class="string">&#x27;1113&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1142&#x27;</span>, <span class="string">&#x27;3304&#x27;</span>, <span class="string">&#x27;海安&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;1002&#x27;</span>, <span class="string">&#x27;南京&#x27;</span>, <span class="string">&#x27;1048&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1144&#x27;</span>, <span class="string">&#x27;100000000236&#x27;</span>, <span class="string">&#x27;江苏有线南京分公司镇名测试&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;南京一镇一屏测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1147&#x27;</span>, <span class="string">&#x27;100000000296&#x27;</span>, <span class="string">&#x27;江苏省公安厅视频会议&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1148&#x27;</span>, <span class="string">&#x27;100000000317&#x27;</span>, <span class="string">&#x27;雪堰镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1149&#x27;</span>, <span class="string">&#x27;100000000318&#x27;</span>, <span class="string">&#x27;前黄镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1150&#x27;</span>, <span class="string">&#x27;100000000319&#x27;</span>, <span class="string">&#x27;礼嘉镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1151&#x27;</span>, <span class="string">&#x27;100000000320&#x27;</span>, <span class="string">&#x27;南夏墅街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1152&#x27;</span>, <span class="string">&#x27;100000000321&#x27;</span>, <span class="string">&#x27;湖塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1153&#x27;</span>, <span class="string">&#x27;100000000322&#x27;</span>, <span class="string">&#x27;牛塘镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1154&#x27;</span>, <span class="string">&#x27;100000000323&#x27;</span>, <span class="string">&#x27;洛阳镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1155&#x27;</span>, <span class="string">&#x27;100000000324&#x27;</span>, <span class="string">&#x27;横林镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1156&#x27;</span>, <span class="string">&#x27;100000000325&#x27;</span>, <span class="string">&#x27;遥观镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1157&#x27;</span>, <span class="string">&#x27;100000000326&#x27;</span>, <span class="string">&#x27;横山桥镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1158&#x27;</span>, <span class="string">&#x27;100000000327&#x27;</span>, <span class="string">&#x27;郑陆镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1159&#x27;</span>, <span class="string">&#x27;100000000328&#x27;</span>, <span class="string">&#x27;奔牛镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1160&#x27;</span>, <span class="string">&#x27;100000000329&#x27;</span>, <span class="string">&#x27;邹区镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1161&#x27;</span>, <span class="string">&#x27;100000000330&#x27;</span>, <span class="string">&#x27;嘉泽镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1162&#x27;</span>, <span class="string">&#x27;100000000331&#x27;</span>, <span class="string">&#x27;湟里镇&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1163&#x27;</span>, <span class="string">&#x27;100000000332&#x27;</span>, <span class="string">&#x27;西湖街道&#x27;</span>, <span class="string">&#x27;1123&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1164&#x27;</span>, <span class="string">&#x27;200000000571&#x27;</span>, <span class="string">&#x27;邗江区西湖镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1165&#x27;</span>, <span class="string">&#x27;200000000570&#x27;</span>, <span class="string">&#x27;邗江区杨寿镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1166&#x27;</span>, <span class="string">&#x27;200000000572&#x27;</span>, <span class="string">&#x27;邗江区沙头镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1167&#x27;</span>, <span class="string">&#x27;3062&#x27;</span>, <span class="string">&#x27;如皋&#x27;</span>, <span class="string">&#x27;1065&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1169&#x27;</span>, <span class="string">&#x27;100000000336&#x27;</span>, <span class="string">&#x27;溧水本地&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;溧水一镇一屏&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1170&#x27;</span>, <span class="string">&#x27;100000000356&#x27;</span>, <span class="string">&#x27;高淳本地&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1173&#x27;</span>, <span class="string">&#x27;100000000376&#x27;</span>, <span class="string">&#x27;溧水石湫镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1174&#x27;</span>, <span class="string">&#x27;100000000380&#x27;</span>, <span class="string">&#x27;溧水晶桥镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1175&#x27;</span>, <span class="string">&#x27;100000000381&#x27;</span>, <span class="string">&#x27;溧水柘塘镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1176&#x27;</span>, <span class="string">&#x27;100000000378&#x27;</span>, <span class="string">&#x27;溧水白马镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1177&#x27;</span>, <span class="string">&#x27;100000000382&#x27;</span>, <span class="string">&#x27;溧水东屏镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1178&#x27;</span>, <span class="string">&#x27;100000000377&#x27;</span>, <span class="string">&#x27;溧水洪蓝镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1179&#x27;</span>, <span class="string">&#x27;100000000379&#x27;</span>, <span class="string">&#x27;溧水和凤镇一镇一屏&#x27;</span>, <span class="string">&#x27;1056&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1180&#x27;</span>, <span class="string">&#x27;00010&#x27;</span>, <span class="string">&#x27;多屏同看测试组&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1181&#x27;</span>, <span class="string">&#x27;1000000002777&#x27;</span>, <span class="string">&#x27;邳州铁富&#x27;</span>, <span class="string">&#x27;1090&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1182&#x27;</span>, <span class="string">&#x27;100000000396&#x27;</span>, <span class="string">&#x27;石湖乡石湖村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1183&#x27;</span>, <span class="string">&#x27;100000000422&#x27;</span>, <span class="string">&#x27;大彭镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1184&#x27;</span>, <span class="string">&#x27;100000000420&#x27;</span>, <span class="string">&#x27;柳新镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1185&#x27;</span>, <span class="string">&#x27;200000000860&#x27;</span>, <span class="string">&#x27;邗江区瓜洲镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1186&#x27;</span>, <span class="string">&#x27;100000000432&#x27;</span>, <span class="string">&#x27;柳泉镇&#x27;</span>, <span class="string">&#x27;1089&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1188&#x27;</span>, <span class="string">&#x27;15111&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1189&#x27;</span>, <span class="string">&#x27;100000000520&#x27;</span>, <span class="string">&#x27;石湖乡团池村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1190&#x27;</span>, <span class="string">&#x27;100000000524&#x27;</span>, <span class="string">&#x27;石湖乡廖塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1191&#x27;</span>, <span class="string">&#x27;100000000523&#x27;</span>, <span class="string">&#x27;石湖乡池庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1192&#x27;</span>, <span class="string">&#x27;100000000522&#x27;</span>, <span class="string">&#x27;石湖乡乔团村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1193&#x27;</span>, <span class="string">&#x27;100000000521&#x27;</span>, <span class="string">&#x27;石湖乡尤庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1194&#x27;</span>, <span class="string">&#x27;100000000525&#x27;</span>, <span class="string">&#x27;石湖乡驻地&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1195&#x27;</span>, <span class="string">&#x27;100000000518&#x27;</span>, <span class="string">&#x27;石湖乡水库村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1196&#x27;</span>, <span class="string">&#x27;100000000516&#x27;</span>, <span class="string">&#x27;石湖乡大娄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1197&#x27;</span>, <span class="string">&#x27;100000000476&#x27;</span>, <span class="string">&#x27;石湖乡尤塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1198&#x27;</span>, <span class="string">&#x27;100000000517&#x27;</span>, <span class="string">&#x27;石湖乡黄塘村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1199&#x27;</span>, <span class="string">&#x27;100000000519&#x27;</span>, <span class="string">&#x27;石湖乡贺庄村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1200&#x27;</span>, <span class="string">&#x27;100000000616&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;宿迁龙河镇&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1201&#x27;</span>, <span class="string">&#x27;200000765252&#x27;</span>, <span class="string">&#x27;宿迁龙河镇1&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1202&#x27;</span>, <span class="string">&#x27;200000775202&#x27;</span>, <span class="string">&#x27;宿迁新庄&#x27;</span>, <span class="string">&#x27;1097&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1203&#x27;</span>, <span class="string">&#x27;200000000063&#x27;</span>, <span class="string">&#x27;大仪镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1204&#x27;</span>, <span class="string">&#x27;200000000069&#x27;</span>, <span class="string">&#x27;十二圩镇&#x27;</span>, <span class="string">&#x27;1099&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1206&#x27;</span>, <span class="string">&#x27;200000000900&#x27;</span>, <span class="string">&#x27;广陵区李典镇&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1207&#x27;</span>, <span class="string">&#x27;200000000920&#x27;</span>, <span class="string">&#x27;邗江区甘泉街道&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1208&#x27;</span>, <span class="string">&#x27;200000000940&#x27;</span>, <span class="string">&#x27;甘泉街道双塘村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1209&#x27;</span>, <span class="string">&#x27;200000782202&#x27;</span>, <span class="string">&#x27;宝应射阳湖&#x27;</span>, <span class="string">&#x27;1102&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1210&#x27;</span>, <span class="string">&#x27;200000784202&#x27;</span>, <span class="string">&#x27;山左口乡北古寨村&#x27;</span>, <span class="string">&#x27;1060&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1213&#x27;</span>, <span class="string">&#x27;200000787202&#x27;</span>, <span class="string">&#x27;新安街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1214&#x27;</span>, <span class="string">&#x27;200000762204&#x27;</span>, <span class="string">&#x27;zyh603&#x27;</span>, <span class="string">&#x27;1143&#x27;</span>, <span class="string">&#x27;流化测试&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;200000789208&#x27;</span>, <span class="string">&#x27;草桥&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1216&#x27;</span>, <span class="string">&#x27;200000788203&#x27;</span>, <span class="string">&#x27;高场&#x27;</span>, <span class="string">&#x27;1215&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1217&#x27;</span>, <span class="string">&#x27;200000787203&#x27;</span>, <span class="string">&#x27;钟吾街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1218&#x27;</span>, <span class="string">&#x27;200000789202&#x27;</span>, <span class="string">&#x27;北沟街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1219&#x27;</span>, <span class="string">&#x27;200000789203&#x27;</span>, <span class="string">&#x27;墨河街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1220&#x27;</span>, <span class="string">&#x27;200000789204&#x27;</span>, <span class="string">&#x27;唐店街道&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1221&#x27;</span>, <span class="string">&#x27;200000789205&#x27;</span>, <span class="string">&#x27;瓦窑镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1222&#x27;</span>, <span class="string">&#x27;200000789206&#x27;</span>, <span class="string">&#x27;港头镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1223&#x27;</span>, <span class="string">&#x27;200000789207&#x27;</span>, <span class="string">&#x27;合沟镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1224&#x27;</span>, <span class="string">&#x27;200000789209&#x27;</span>, <span class="string">&#x27;窑湾镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1225&#x27;</span>, <span class="string">&#x27;200000789210&#x27;</span>, <span class="string">&#x27;棋盘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1226&#x27;</span>, <span class="string">&#x27;200000789211&#x27;</span>, <span class="string">&#x27;马陵山镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1227&#x27;</span>, <span class="string">&#x27;200000789212&#x27;</span>, <span class="string">&#x27;新店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1228&#x27;</span>, <span class="string">&#x27;200000789213&#x27;</span>, <span class="string">&#x27;邵店镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1229&#x27;</span>, <span class="string">&#x27;200000789214&#x27;</span>, <span class="string">&#x27;时集镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1230&#x27;</span>, <span class="string">&#x27;200000789215&#x27;</span>, <span class="string">&#x27;高流镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1231&#x27;</span>, <span class="string">&#x27;200000789216&#x27;</span>, <span class="string">&#x27;阿湖镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1232&#x27;</span>, <span class="string">&#x27;200000789217&#x27;</span>, <span class="string">&#x27;双塘镇&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1233&#x27;</span>, <span class="string">&#x27;200000788202&#x27;</span>, <span class="string">&#x27;人民医院&#x27;</span>, <span class="string">&#x27;1088&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1235&#x27;</span>, <span class="string">&#x27;200000793202&#x27;</span>, <span class="string">&#x27;西岗街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1236&#x27;</span>, <span class="string">&#x27;200000793203&#x27;</span>, <span class="string">&#x27;八卦洲街道&#x27;</span>, <span class="string">&#x27;1128&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1237&#x27;</span>, <span class="string">&#x27;200000795202&#x27;</span>, <span class="string">&#x27;临河镇&#x27;</span>, <span class="string">&#x27;1094&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1238&#x27;</span>, <span class="string">&#x27;200000800202&#x27;</span>, <span class="string">&#x27;桠溪镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1239&#x27;</span>, <span class="string">&#x27;200000800203&#x27;</span>, <span class="string">&#x27;漆桥镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1240&#x27;</span>, <span class="string">&#x27;200000800204&#x27;</span>, <span class="string">&#x27;砖墙镇&#x27;</span>, <span class="string">&#x27;1054&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1241&#x27;</span>, <span class="string">&#x27;200000802202&#x27;</span>, <span class="string">&#x27;横溪街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1242&#x27;</span>, <span class="string">&#x27;200000802203&#x27;</span>, <span class="string">&#x27;秣陵街道&#x27;</span>, <span class="string">&#x27;1050&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1243&#x27;</span>, <span class="string">&#x27;200000804202&#x27;</span>, <span class="string">&#x27;竹镇镇&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1244&#x27;</span>, <span class="string">&#x27;200000802204&#x27;</span>, <span class="string">&#x27;桥林镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1245&#x27;</span>, <span class="string">&#x27;200000802205&#x27;</span>, <span class="string">&#x27;汤泉镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1246&#x27;</span>, <span class="string">&#x27;200000802206&#x27;</span>, <span class="string">&#x27;星甸镇&#x27;</span>, <span class="string">&#x27;1052&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1247&#x27;</span>, <span class="string">&#x27;200000804203&#x27;</span>, <span class="string">&#x27;雄州街道&#x27;</span>, <span class="string">&#x27;1051&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1248&#x27;</span>, <span class="string">&#x27;200000805202&#x27;</span>, <span class="string">&#x27;蒋王街道四联村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `area` <span class="keyword">VALUES</span> (<span class="string">&#x27;1249&#x27;</span>, <span class="string">&#x27;200000805203&#x27;</span>, <span class="string">&#x27;蒋王街道悦来村&#x27;</span>, <span class="string">&#x27;1127&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>查询SQL：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> parentId,GROUP_CONCAT(<span class="keyword">DISTINCT</span> areaCode) </span><br><span class="line"><span class="keyword">FROM</span> AREA</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> parentId</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> parentId</span><br><span class="line"><span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Jsp页面访问异常</title>
    <url>/Jsp/blogs/Jsp%E9%A1%B5%E9%9D%A2%E8%AE%BF%E9%97%AE%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-bluejsp%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9Fspan"><span id="inline-blue">Jsp声明周期</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-bluejsp%E7%BC%96%E8%AF%91%E6%96%87%E4%BB%B6%E7%94%9F%E6%88%90%E4%BD%8D%E7%BD%AEspan"><span id="inline-blue">Jsp编译文件生成位置</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>后台管理页面请求Jsp异常，报错信息如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP ERROR 500 javax.servlet.ServletException: org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">URI:	&#x2F;oms&#x2F;manager&#x2F;mould&#x2F;listpage</span><br><span class="line">STATUS:	500</span><br><span class="line">MESSAGE:	javax.servlet.ServletException: org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">SERVLET:	spring-front-controller</span><br><span class="line">CAUSED BY:	javax.servlet.ServletException: org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">CAUSED BY:	org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br><span class="line">CAUSED BY:	java.lang.ClassNotFoundException: org.apache.jsp.views.mould_005fcoder.mould_005fcoder_005flist_jsp</span><br></pre></td></tr></table></figure>
<h1><span id="jsp声明周期"><span id="inline-blue">Jsp声明周期</span></span></h1><p>1、第一次访问JSP，会验证一下是否第一次访问，然后把JSP转化成java(Servlet),再编译成class文件。</p>
<p>2、生成的class文件中会自动生成几个方法：jspInit()、jspDestroy()、jspService().Tomcat仅仅在第一次请求时，调用jspInit()方法，然后调用jspService()进行处理。</p>
<p>3、之后的每个请求，都会分配一个线程调用jspService()方法。</p>
<p>4、如果页面被销毁或者关闭，都会调用jspDestroy由于该文件是常驻内存的，又是多线程调用，所以访问的效率和速度都会很快。</p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>Jsp文件编译失败导致访问失败，对比之前正常的版本发现Jsp文件内容缺失。</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">String path =request.getContextPath();</span><br><span class="line">String userLanguage = com.coship.oms.tools.config.ConfigService.getLanguageCode();</span><br><span class="line">String userLanguage2 = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;&quot;</span>==userLanguage || <span class="keyword">null</span>==userLanguage)&#123;</span><br><span class="line">	  userLanguage2 = <span class="string">&quot;-zh_CN&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	  <span class="keyword">if</span>(<span class="string">&quot;-en_US&quot;</span>.equalsIgnoreCase(userLanguage))&#123;</span><br><span class="line">		  userLanguage2 = <span class="string">&quot;-en_US&quot;</span>;</span><br><span class="line">	  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		  userLanguage2 = userLanguage;</span><br><span class="line">	  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/jetty/Jsp/Jetty_Jsp_2023_01_06_001.png" alt="下拉联动验证"></p>
<h1><span id="jsp编译文件生成位置"><span id="inline-blue">Jsp编译文件生成位置</span></span></h1><p>Tomcat:<br>    Linux: /usr/local/AMS/apache-tomcat-8.0.18/work/Catalina/localhost/myAM/org/apache/jsp<br>    windows:<br>        windows环境下eclipse对应tomcat部署位置映射有三种情况<br>        Use workspace metadata<br>            工作空间下,例如:F:workspace.metadata.pluginsorg.eclipse.wst.server.coretmp0<br>　　    Use Tomcat installation<br>            Tomcat安装路径下,例如：D:\Tomcat\BI_WH_WORK\apache-tomcat-7.0.20\apache-tomcat-7.0.20\work\Catalina\localhost\biPortal\org\apache\jsp<br>　　    Use custom location<br>            自定义安装路径下,例如：D:\Tomcat\BI_WH_WORK\apache-tomcat-7.0.20\apache-tomcat-7.0.20\work\Catalina\localhost\biPortal\org\apache\jsp<br>Jetty：<br>    Linux：<br>        /usr/local/moui_tianjin/oms/coship-oms/work/jetty-0_0_0_0-18080-oms-_oms-any-/jsp/org/apache/jsp</p>
]]></content>
      <categories>
        <category>Jsp</category>
      </categories>
      <tags>
        <tag>Jetty</tag>
        <tag>Jsp</tag>
      </tags>
  </entry>
  <entry>
    <title>RFC 7230 and RFC 3986</title>
    <url>/Tomcat/blogs/RFC%207230%20and%20RFC%203986/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95span"><span id="inline-blue">解决办法</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>tomcat由版本8.0.38升级为8.5.41，请求接口报错，错误信息如下：<br><a href="http://10.9.212.55:8080/SPSmartCMS/json/content_list.jspx?channelIds%5B%5D=156&amp;first=0&amp;count=7">http://10.9.212.55:8080/SPSmartCMS/json/content_list.jspx?channelIds[]=156&amp;first=0&amp;count=7</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP Status 400 – Bad Request</span><br><span class="line">Type Exception Report</span><br><span class="line"></span><br><span class="line">Message Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986</span><br><span class="line"></span><br><span class="line">Description The server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).</span><br><span class="line"></span><br><span class="line">Exception</span><br><span class="line"></span><br><span class="line">java.lang.IllegalArgumentException: Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986</span><br><span class="line">	org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:483)</span><br><span class="line">	org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:684)</span><br><span class="line">	org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)</span><br><span class="line">	org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)</span><br><span class="line">	org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)</span><br><span class="line">	org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)</span><br><span class="line">	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)</span><br><span class="line">	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)</span><br><span class="line">	org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class="line">	java.lang.Thread.run(Thread.java:745)</span><br></pre></td></tr></table></figure>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>参考<a href="https://www.cnblogs.com/DDgougou/p/11668073.html">https://www.cnblogs.com/DDgougou/p/11668073.html</a><br>大致原因是因为tomcat版本版本升级之后对url请求特殊字符有严格的编码要求,[]字符不符合编码规范。</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><p>D:\Tomcat\smartCMS_GZ\apache-tomcat-8.5.41\conf\server.xml，修改connector节点，增加配置内容如下：<br>relaxedQueryChars=”[,]”</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> <span class="attr">relaxedQueryChars</span>=<span class="string">&quot;[,]&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>重启Tomcat服务，接口请求正常。</p>
]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>checkbox控件置灰导致form表单提交失败</title>
    <url>/Jsp/blogs/checkbox%E6%8E%A7%E4%BB%B6%E7%BD%AE%E7%81%B0%E5%AF%BC%E8%87%B4form%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4%E5%A4%B1%E8%B4%A5/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>checkbox置灰后提交获取对应的值失败<br>置灰代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//遍历checkbox，对应权限ID为7、71、7101、7102不置灰</span></span><br><span class="line">$(<span class="string">&quot;:checkbox&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value == <span class="number">7</span> || <span class="built_in">this</span>.value == <span class="number">71</span> || <span class="built_in">this</span>.value == <span class="number">7101</span> || <span class="built_in">this</span>.value == <span class="number">7102</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">this</span>.checked) &#123;</span><br><span class="line">                <span class="built_in">this</span>.checked = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">this</span>.disabled = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>测试之后发现后台拿不到默认选中的checkbox参数值。</p>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>form表单提交之前恢复checkbox的disabled属性，再进行表单提交</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumbit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//恢复checkbox状态disabled</span></span><br><span class="line">    $(<span class="string">&quot;:checkbox&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.disabled) &#123;</span><br><span class="line">            <span class="built_in">this</span>.disabled = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="built_in">document</span>.getElementById(<span class="string">&quot;AssignPrivileges&quot;</span>).submit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Jsp</category>
      </categories>
      <tags>
        <tag>Jsp</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven项目插件使用</title>
    <url>/Maven/blogs/Maven%E9%A1%B9%E7%9B%AE%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1><span id="maven生成war包包含空文件"><span id="inline-blue">maven生成war包包含空文件</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">includeEmptyDirectories</span>&gt;</span>true<span class="tag">&lt;/<span class="name">includeEmptyDirectories</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="maven生成war包包含子模块资源文件"><span id="inline-blue">maven生成war包包含子模块资源文件</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>process-sources<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">	           <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;basedir&#125;/target/classes/<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;pom.basedir&#125;/../action.portal.operators/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;basedir&#125;/../bss.common/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/*.src<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;basedir&#125;/../bss.dao.oracle/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">resource</span>&gt;</span> </span><br><span class="line">				<span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="maven生成war包子模块jar包依赖以class文件呈现"><span id="inline-blue">maven生成war包子模块jar包依赖以class文件呈现</span></span></h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>unpack<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>prepare-package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>unpack<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactItems</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj.sme<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bss.common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span>&gt;</span>**/*.class<span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">overWrite</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWrite</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/classes<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj.sme<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bss.dao.oracle<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">type</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">includes</span>&gt;</span>**/*.class<span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">overWrite</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWrite</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/classes<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">artifactItem</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">artifactItems</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="解决本地依赖导致模块之间传递依赖失效"><span id="inline-blue">解决本地依赖导致模块之间传递依赖失效</span></span></h1><p>pom.xml文件内正常使用依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdp-cbb-rights<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>V300R003B065<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加maven-install-plugin实现本地jar注册</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">		        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">id</span>&gt;</span>install-sdp-cbb-rights<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>clean<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;pom.basedir&#125;/../bss.parent/lib/sdp-cbb-rights-V300R003B065.jar<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">repositoryLayout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">repositoryLayout</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.coship.sdp.fj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		    			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdp-cbb-rights<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">version</span>&gt;</span>V300R003B065<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">generatePom</span>&gt;</span>true<span class="tag">&lt;/<span class="name">generatePom</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">		                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>install-file<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">		            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">		        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>添加完成之后执行如下命令</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">mvn clean</span><br></pre></td></tr></table></figure>
<p>右键项目maven-&gt;update project,勾选Force update Snapshots/Release</p>
<h1><span id="war包生成指定忽略指定目录"><span id="inline-blue">war包生成指定忽略指定目录</span></span></h1><p>添加maven-war-plugin插件,指定忽略/WEB-INF/lib_bak目录下的jar包</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">warSourceExcludes</span>&gt;</span></span><br><span class="line">					   	**/WEB-INF/lib_bak/*.jar</span><br><span class="line">					<span class="tag">&lt;/<span class="name">warSourceExcludes</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Eclipse还原Maven依赖</title>
    <url>/Maven/blogs/Eclipse%E8%BF%98%E5%8E%9FMaven%E4%BE%9D%E8%B5%96/</url>
    <content><![CDATA[<h2><span id="现象"><span id="inline-blue">现象</span></span></h2><p>eclipse移除项目Maven依赖之后发现无法添加</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>打开项目下.classpath文件<br><img src="/images/Maven/20221025_Maven_001.png" alt="Maven依赖恢复"><br>添加如下内容</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">classpathentry</span> <span class="attr">kind</span>=<span class="string">&quot;con&quot;</span> <span class="attr">path</span>=<span class="string">&quot;org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">attributes</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;maven.pomderived&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;org.eclipse.jst.component.dependency&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/lib&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">classpathentry</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加后内容如下：<br><img src="/images/Maven/20221025_Maven_002.png" alt="Maven依赖恢复"></p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/Maven/20221025_Maven_003.png" alt="Maven依赖恢复"></p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
        <tag>Eclipse</tag>
      </tags>
  </entry>
  <entry>
    <title>Js实现下拉框联动回显功能</title>
    <url>/Jsp/blogs/Js%E5%AE%9E%E7%8E%B0%E4%B8%8B%E6%8B%89%E6%A1%86%E8%81%94%E5%8A%A8%E5%9B%9E%E6%98%BE%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluejsp%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E9%A1%B9span"><span id="inline-blue">jsp页面添加依赖项</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8B%E6%8B%89%E6%A1%86%E5%AE%9A%E4%B9%89span"><span id="inline-blue">下拉框定义</span></a></li>
<li><a href="#span-idinline-bluejs%E8%81%94%E5%8A%A8%E5%AE%9E%E7%8E%B0span"><span id="inline-blue">js联动实现</span></a></li>
<li><a href="#span-idinline-blue%E6%95%B0%E6%8D%AE%E5%9B%9E%E6%98%BEspan"><span id="inline-blue">数据回显</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="jsp页面添加依赖项"><span id="inline-blue">jsp页面添加依赖项</span></span></h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;s&quot;</span> uri=<span class="string">&quot;/struts-tags&quot;</span>%&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;s:url value=&#x27;js/cdnmanage.pagination.js&#x27;/&gt;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1><span id="下拉框定义"><span id="inline-blue">下拉框定义</span></span></h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;label&gt;&lt;s:text name=&quot;grmmanage.log.moduleName&quot; /&gt;&lt;/label&gt;</span><br><span class="line">&lt;select name=<span class="string">&quot;logBean.moduleName&quot;</span> id=<span class="string">&quot;moduleName&quot;</span> onchange=<span class="string">&quot;setAction(this.options[this.selectedIndex].text);&quot;</span>  onselect=<span class="string">&quot;setAction(this.options[this.selectedIndex].text);&quot;</span> style=<span class="string">&quot;width:120px&quot;</span>&gt;</span><br><span class="line">	&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;全部&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;21&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==21&#125;&quot;&gt;selected&lt;/s:if&gt; &gt;角色管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;22&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==22&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;用户管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;31&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==31&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;IPQAM导入管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;32&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==32&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;IPQAM管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;33&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==33&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;规则管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;34&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==34&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;设备类型管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;41&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==41&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;区域管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;42&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==42&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;区域导入管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;51&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==51&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;推流导入管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;52&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==52&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;推流管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;53&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==53&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;VSGROUP管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;54&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==54&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;vs分配管理&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;71&quot; &lt;s:if test=&quot;%&#123;logBean.moduleName==71&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;修改密码&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;label&gt;&lt;s:text name=&quot;grmmanage.log.actionType&quot; /&gt;&lt;/label&gt;</span><br><span class="line">&lt;select name=<span class="string">&quot;logBean.actionType&quot;</span> id=<span class="string">&quot;actionType&quot;</span> style=<span class="string">&quot;width:120px&quot;</span>&gt;</span><br><span class="line">	&lt;option value=&quot;&quot; selected=&quot;selected&quot;&gt;全部&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h1><span id="js联动实现"><span id="inline-blue">js联动实现</span></span></h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">	<span class="comment">//下拉选项数组定义</span></span><br><span class="line">	<span class="keyword">var</span> actionArr = [];</span><br><span class="line">	<span class="keyword">var</span> moduleArr =</span><br><span class="line">		[</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;角色管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;21&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;用户管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;22&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;IPQAM导入管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;31&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;IPQAM管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;32&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;规则管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;33&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;设备类型管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;34&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;区域管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;41&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;区域导入管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;42&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">txt</span>: <span class="string">&#x27;推流导入管理&#x27;</span>, <span class="attr">val</span>: <span class="string">&quot;51&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;推流管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;52&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;VSGROUP管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;53&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs分配管理&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;54&quot;</span>&#125;,</span><br><span class="line">			&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改密码&#x27;</span>,<span class="attr">val</span>:<span class="string">&quot;71&quot;</span>&#125;</span><br><span class="line">			];</span><br><span class="line">	<span class="keyword">var</span> actionArrInitial = [];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;角色管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;211&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;212&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;更新角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;213&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;分配用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;216&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;分配权限&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;217&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">	];</span><br><span class="line">	actionArr[<span class="string">&#x27;用户管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;221&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;222&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;重置密码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;223&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;修改用户&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;224&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;更新用户角色&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;225&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;锁定用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;226&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;解锁用户&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;227&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">actionArr[<span class="string">&#x27;IPQAM导入管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;导入数据&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3101&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;IPQAM管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;QAM新增&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3201&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;QAM删除&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3202&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;数据下载&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3203&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;频点新增&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3205&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;频点修改&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3206&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除频点&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3207&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;规则管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增规则&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3301&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除规则&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3302&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	 actionArr[<span class="string">&#x27;设备类型管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增设备类型&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3401&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除设备类型&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;3402&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	actionArr[<span class="string">&#x27;区域管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4101&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;批量删除区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4102&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4103&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4104&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;区域码下载&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4105&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;批量修改Vs区域码&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4106&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">actionArr[<span class="string">&#x27;区域导入管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;导入数据&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;4201&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">actionArr[<span class="string">&#x27;推流导入管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;导入数据&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5101&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	  actionArr[<span class="string">&#x27;推流管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增推流服务&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5201&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;批量上线&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5202&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;批量下线&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5203&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改推流服务&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5204&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除推流服务&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5205&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;批量修改端口组&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5206&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增流输出&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5209&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;修改流输出&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5210&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;删除流输出&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5211&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;新增卷标信息&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5212&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;修改卷标信息&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5213&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;删除卷标信息&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5214&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	   actionArr[<span class="string">&#x27;VSGROUP管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs群组下线&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5301&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs群组修改&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5302&#x27;</span>&#125;,</span><br><span class="line">		&#123;<span class="attr">txt</span>:<span class="string">&#x27;vs群组删除&#x27;</span>, <span class="attr">val</span>:<span class="string">&#x27;5303&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	   actionArr[<span class="string">&#x27;vs分配管理&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;SM新增vs关联&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5401&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;SM取消vs关联&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;5402&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	   actionArr[<span class="string">&#x27;修改密码&#x27;</span>] =</span><br><span class="line">	[</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;修改&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;7101&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">txt</span>: <span class="string">&#x27;重置&#x27;</span>, <span class="attr">val</span>: <span class="string">&#x27;7102&#x27;</span>&#125;</span><br><span class="line">	];</span><br><span class="line"></span><br><span class="line">	<span class="comment">//初始化操作行为</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setAction</span>(<span class="params">moduleName</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (actionArr[moduleName] != <span class="literal">null</span> &amp;&amp; actionArr[moduleName] != <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; actionArr[moduleName] != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">		setSelectOption(<span class="string">&#x27;actionType&#x27;</span>, actionArr[moduleName], <span class="string">&#x27;全部&#x27;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		setSelectOption(<span class="string">&#x27;actionType&#x27;</span>, actionArrInitial, <span class="string">&#x27;全部&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//移除下拉选项</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeOptions</span>(<span class="params">selectObj</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> selectObj != <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">		selectObj = <span class="built_in">document</span>.getElementById(selectObj);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 原有选项计数</span></span><br><span class="line">	<span class="keyword">var</span> len = selectObj.options.length;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">		<span class="comment">// 移除当前选项</span></span><br><span class="line">		selectObj.options[<span class="number">0</span>] = <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据moduleId设置actionId下拉项</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setSelectOption</span>(<span class="params">selectObj, optionList, firstOption</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> selectObj != <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">		selectObj = <span class="built_in">document</span>.getElementById(selectObj);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 清空选项</span></span><br><span class="line">	removeOptions(selectObj);</span><br><span class="line">	<span class="comment">// 选项计数</span></span><br><span class="line">	<span class="keyword">var</span> start = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 如果需要添加第一个选项</span></span><br><span class="line">	<span class="keyword">if</span> (firstOption) &#123;</span><br><span class="line">		selectObj.options[<span class="number">0</span>] = <span class="keyword">new</span> Option(firstOption, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">		<span class="comment">// 选项计数从 1 开始</span></span><br><span class="line">		start++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> len = optionList.length;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">		<span class="comment">// 设置 option</span></span><br><span class="line">		selectObj.options[start] = <span class="keyword">new</span> Option(optionList[i].txt, optionList[i].val);</span><br><span class="line">		<span class="comment">// 计数加 1</span></span><br><span class="line">		start++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="数据回显"><span id="inline-blue">数据回显</span></span></h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">jQuery(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; moduleArr.length; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> (moduleArr[i].val == <span class="string">&#x27;&lt;s:property value=&quot;logBean.moduleName&quot;/&gt;&#x27;</span>) &#123;</span><br><span class="line">			setAction(moduleArr[i].txt);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> count = $(<span class="string">&quot;#actionType option&quot;</span>)</span><br><span class="line">		.length;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> ($(<span class="string">&quot;#actionType&quot;</span>)</span><br><span class="line">			.get(<span class="number">0</span>)</span><br><span class="line">			.options[i].value == <span class="string">&#x27;&lt;s:property value=&quot;logBean.actionType&quot;/&gt;&#x27;</span>) &#123;</span><br><span class="line">			$(<span class="string">&quot;#actionType&quot;</span>)</span><br><span class="line">				.get(<span class="number">0</span>)</span><br><span class="line">				.options[i].selected = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/js/js_2022_09_27_001.png" alt="下拉联动验证"></p>
]]></content>
      <categories>
        <category>Jsp</category>
      </categories>
      <tags>
        <tag>Jsp</tag>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven打包项目编译跳过测试类</title>
    <url>/Maven/blogs/Maven%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE%E7%BC%96%E8%AF%91%E8%B7%B3%E8%BF%87%E6%B5%8B%E8%AF%95%E7%B1%BB/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%BC%96%E8%AF%91%E5%BF%BD%E7%95%A5%E6%B5%8B%E8%AF%95%E7%B1%BBspan"><span id="inline-blue">编译忽略测试类</span></a><ul>
<li><a href="#%E6%8F%92%E4%BB%B6%E4%BE%9D%E8%B5%96%E9%80%89%E9%A1%B9%E6%8E%A7%E5%88%B6">插件依赖选项控制</a></li>
<li><a href="#properties%E9%85%8D%E7%BD%AE%E9%A1%B9">properties配置项</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="编译忽略测试类"><span id="inline-blue">编译忽略测试类</span></span></h1><h2><span id="插件依赖选项控制">插件依赖选项控制</span></h2><p>编译插件依赖项添加<skiptests>true</skiptests>条目</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">source</span>&gt;</span>$&#123;java-version&#125;<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">target</span>&gt;</span>$&#123;java-version&#125;<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">encoding</span>&gt;</span>$&#123;project.encoding&#125;<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此方法不执行测试用例，但会编译测试用例类，生成的class文件保存在target/test-classes下。</p>
<h2><span id="properties配置项">properties配置项</span></h2><p><properties>节点新增&lt;maven.test.skip&gt;true&lt;/maven.test.skip&gt;条目</properties></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">java-version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java-version</span>&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!-- maven打包忽略 test目录编译、不执行测试用例--&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">maven.test.skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">maven.test.skip</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">org.springframework-version</span>&gt;</span>3.0.5.RELEASE<span class="tag">&lt;/<span class="name">org.springframework-version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">org.apache.struts-version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">org.apache.struts-version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">log4j-version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">log4j-version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此方法不执行测试用例，也不编译测试用例类。</p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>gc日志回收设置</title>
    <url>/Jboss/blogs/gc%E6%97%A5%E5%BF%97%E5%9B%9E%E6%94%B6%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-bluegc%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">gc参数设置</span></a><ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">配置信息</a></li>
</ul>
</li>
<li><a href="#span-idinline-bluegc%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BAspan"><span id="inline-blue">gc日志输出</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="gc参数设置"><span id="inline-blue">gc参数设置</span></span></h1><p>文件名称：run.conf<br>文件路径：/usr/local/sdp_trunk/usm/jboss5/bin</p>
<h2><span id="配置信息">配置信息</span></h2> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span></span><br><span class="line"><span class="bash">d=`date  <span class="string">&#x27;+%Y%m%d&#x27;</span>`</span></span><br><span class="line">if [ &quot;x$JAVA_OPTS&quot; = &quot;x&quot; ]; then</span><br><span class="line">   JAVA_OPTS=&quot;-Xms4G -Xmx4G -Xmn1400M -XX:PermSize=512M -XX:MaxPermSize=512M</span><br><span class="line">        -XX:+PrintGCDetails</span><br><span class="line">        -XX:+PrintGCDateStamps</span><br><span class="line">        -XX:+PrintTenuringDistribution</span><br><span class="line">        -XX:+PrintHeapAtGC</span><br><span class="line">        -XX:+PrintReferenceGC</span><br><span class="line">        -XX:+PrintGCApplicationStoppedTime</span><br><span class="line">        -XX:+PrintSafepointStatistics</span><br><span class="line">        -XX:PrintSafepointStatisticsCount=1</span><br><span class="line">        -Xloggc:/usr/local/sdp_trunk/usm/jboss5/server/default/log/gc-$d.log</span><br><span class="line">    -XX:SurvivorRatio=20 -XX:MaxTenuringThreshold=5 -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:CMSFul</span><br><span class="line">lGCsBeforeCompaction=0 -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled -XX:+CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=85 -XX:SoftRefLRUPolicyMSPerMB=0 -XX:-ReduceInitialCardMarks -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h1><span id="gc日志输出"><span id="inline-blue">gc日志输出</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Total time for which application threads were stopped: 0.0002160 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002200 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002860 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0004960 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002400 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0006370 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002700 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002550 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001760 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001270 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000820 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001410 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001400 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001320 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000810 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001170 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000880 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0002370 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000780 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0007060 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000590 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000560 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0000480 seconds</span><br><span class="line">Total time for which application threads were stopped: 0.0001760 seconds</span><br><span class="line">&#123;Heap before GC invocations=0 (full 0):</span><br><span class="line"> par new generation   total 1368448K, used 443248K [0x00000006e0000000, 0x0000000737800000, 0x0000000737800000)</span><br><span class="line">  eden space 1303296K,  34% used [0x00000006e0000000, 0x00000006fb0dc230, 0x000000072f8c0000)</span><br><span class="line">  from space 65152K,   0% used [0x000000072f8c0000, 0x000000072f8c0000, 0x0000000733860000)</span><br><span class="line">  to   space 65152K,   0% used [0x0000000733860000, 0x0000000733860000, 0x0000000737800000)</span><br><span class="line"> concurrent mark-sweep generation total 2760704K, used 0K [0x0000000737800000, 0x00000007e0000000, 0x00000007e0000000)</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>Jboss启动加载异常处理</title>
    <url>/Jboss/blogs/Jboss%E5%90%AF%E5%8A%A8%E5%8A%A0%E8%BD%BD%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90span"><span id="inline-blue">原因分析</span></a><ul>
<li><a href="#%E5%BC%82%E5%B8%B8%E5%86%85%E5%AE%B9">异常内容</a></li>
<li><a href="#%E6%AD%A3%E5%B8%B8%E5%86%85%E5%AE%B9">正常内容</a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2022-08-11 11:01:09,709 INFO  [org.quartz.core.QuartzScheduler] (main) Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.</span><br><span class="line">2022-08-11 11:01:09,981 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (main) Error installing to Start: name=jboss:database=localDB,service=Hypersonic state=Create mode=Manual requiredState=Installed</span><br><span class="line">java.sql.SQLException: error in script file line: 1 Unexpected token: TP in statement [tp]</span><br><span class="line">	at org.hsqldb.jdbc.Util.sqlException(Unknown Source)</span><br><span class="line">	at org.hsqldb.jdbc.jdbcConnection.&lt;init&gt;(Unknown Source)</span><br><span class="line">	at org.hsqldb.jdbcDriver.getConnection(Unknown Source)</span><br><span class="line">	at org.hsqldb.jdbcDriver.connect(Unknown Source)</span><br><span class="line">	at java.sql.DriverManager.getConnection(DriverManager.java:582)</span><br><span class="line">	at java.sql.DriverManager.getConnection(DriverManager.java:185)</span><br><span class="line">	at org.jboss.jdbc.HypersonicDatabase.getConnection(HypersonicDatabase.java:777)</span><br><span class="line">	at org.jboss.jdbc.HypersonicDatabase.startStandaloneDatabase(HypersonicDatabase.java:625)</span><br><span class="line">	at org.jboss.jdbc.HypersonicDatabase.startService(HypersonicDatabase.java:568)</span><br><span class="line">	at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:376)</span><br><span class="line">	at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:322)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Method.java:597)</span><br><span class="line">	at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)</span><br><span class="line">	at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)</span><br><span class="line">	at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)</span><br><span class="line">	at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)</span><br><span class="line">	at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)</span><br><span class="line">	at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:189)</span><br><span class="line">	at $Proxy38.start(Unknown Source)</span><br><span class="line">	at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)</span><br><span class="line">	at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)</span><br><span class="line">	at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)</span><br><span class="line">	at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)</span><br><span class="line">	at org.jboss.system.ServiceController.doChange(ServiceController.java:688)</span><br><span class="line">	at org.jboss.system.ServiceController.start(ServiceController.java:460)</span><br><span class="line">	at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)</span><br><span class="line">	at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)</span><br><span class="line">	at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)</span><br><span class="line">	at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)</span><br><span class="line">	at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)</span><br><span class="line">	at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)</span><br><span class="line">	at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)</span><br><span class="line">	at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)</span><br><span class="line">	at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)</span><br><span class="line">	at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)</span><br><span class="line">	at org.jboss.Main.boot(Main.java:221)</span><br><span class="line">	at org.jboss.Main$1.run(Main.java:556)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:662)</span><br><span class="line">2022-08-11 11:01:09,986 ERROR </span><br></pre></td></tr></table></figure>
<h1><span id="原因分析"><span id="inline-blue">原因分析</span></span></h1><p>根据报错信息跟踪Jboss默认加载hsqldb数据库信息，查看/usr/local/sdp_trunk/usm/jboss5/server/default/data/hypersonic对应路径数据库文件，发现localDB.script文件内容输出异常。</p>
<h2><span id="异常内容">异常内容</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">7993&amp;weekday=7&amp;forward=programJson&amp;pageSize=8&amp;curPage=3&amp;checkFavorite=Y jump to：/data/btv_programJson.htm takes time:12ms</span><br><span class="line">2015-11-22 20:21:39,791 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 107]---TvProgramAction-- start userId=7305766,forward=programJson,channelId=102800</span><br><span class="line">2015-11-22 20:21:39,791 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 243]---TvProgramAction-- 节目单查询时间weekday=6,startTime:Fri Nov 20 00:00:00 CST 2015----toTime:Sat Nov 21 00:00:00 CST 2015</span><br><span class="line">2015-11-22 20:21:39,792 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 253]---TvProgramAction-- The number of queries to the program46</span><br><span class="line">2015-11-22 20:21:39,792 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 286]---TvProgramAction-- after removed the program which does not meet the time conditions,PageInfo pageSize=8,countPage=6</span><br><span class="line">2015-11-22 20:21:39,801 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 346]-Single-channel video programming background to use the time to take=10ms</span><br><span class="line">2015-11-22 20:21:39,802 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.tv.TvProgramAction exec 356]---TvProgramAction-- end ,forward=programJson</span><br><span class="line">2015-11-22 20:21:39,802 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.BaseAction execute 74]---------------/iPG/T-nsp/TvProgram.do?userId=7305766&amp;channelId=102800&amp;weekday=6&amp;forward=programJson&amp;pageSize=8&amp;curPage=1&amp;checkFavorite=Y jump to：/data/btv_programJson.htm takes time:11ms</span><br><span class="line">2015-11-22 20:21:39,821 [http-0.0.0.0-80-92] [INFO]-[com.coship.ws.client.ClientProxy getAuthorizationProxy 45]-getAuthorizationProxy:userId:6790927aaa:http://10.80.0.80:8080/AAA/AuthorizationService</span><br><span class="line">2015-11-22 20:21:39,824 [http-0.0.0.0-80-92] [INFO]-[com.coship.epg.service.mod.impl.AuthorityServiceImpl productAuthorizationBat 329]-productAuthorizationBat:com.coship.authorize.service.ProductAuthoReq@51040d1e[productId=100008,userId=6790927,__equalsCalc=&lt;null&gt;,__hashCodeCalc=false]</span><br><span class="line">2015-11-22 20:21:39,827 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.action.mod.CheckBuyAction exec 105]-Authentication sateType 2: userId7435005 catalogResource ID:176964</span><br><span class="line">2015-11-22 20:21:39,827 [http-0.0.0.0-80-12] [INFO]-[com.coship.ws.client.ClientProxy getAuthorizationProxy 45]-getAuthorizationProxy:userId:7435005aaa:http://10.80.0.44:8080/AAA/AuthorizationService</span><br><span class="line">2015-11-22 20:21:39,830 [http-0.0.0.0-80-12] [INFO]-[com.coship.epg.service.mod.impl.AuthorityServiceImpl productAuthorizationBat 329]-productAuthorizationBat:com.coship.authorize.service.ProductAuthoReq@60f9561f[productId=100008,userId=7435005,__equalsCalc=&lt;null&gt;,__hashCodeCalc=false]</span><br><span class="line">2015-11-22 20:21:39,831 [http-0.0.0.0-80-92] [INFO]-[com.coship.epg.service.mod.impl.AuthorityServiceImpl productAuthorizationBat 334]-pro</span><br></pre></td></tr></table></figure>
<h2><span id="正常内容">正常内容</span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE SCHEMA PUBLIC AUTHORIZATION DBA</span><br><span class="line">CREATE MEMORY TABLE JBM_DUAL(DUMMY INTEGER NOT NULL PRIMARY KEY)</span><br><span class="line">CREATE MEMORY TABLE JBM_MSG_REF(MESSAGE_ID BIGINT NOT NULL,CHANNEL_ID BIGINT NOT NULL,TRANSACTION_ID BIGINT,STATE CHAR(1),ORD BIGINT,PAGE_ORD BIGINT,DELIVERY_COUNT INTEGER,SCHED_DELIVERY BIGINT,PRIMARY KEY(MESSAGE_ID,CHANNEL_ID))</span><br><span class="line">CREATE INDEX JBM_MSG_REF_TX ON JBM_MSG_REF(TRANSACTION_ID,STATE)</span><br><span class="line">CREATE MEMORY TABLE JBM_MSG(MESSAGE_ID BIGINT NOT NULL PRIMARY KEY,RELIABLE CHAR(1),EXPIRATION BIGINT,TIMESTAMP BIGINT,PRIORITY TINYINT,TYPE TINYINT,HEADERS LONGVARBINARY,PAYLOAD LONGVARBINARY)</span><br><span class="line">CREATE MEMORY TABLE JBM_TX(NODE_ID INTEGER,TRANSACTION_ID BIGINT NOT NULL PRIMARY KEY,BRANCH_QUAL VARBINARY(254),FORMAT_ID INTEGER,GLOBAL_TXID VARBINARY(254))</span><br><span class="line">CREATE MEMORY TABLE JBM_COUNTER(NAME VARCHAR(255) NOT NULL PRIMARY KEY,NEXT_ID BIGINT)</span><br><span class="line">CREATE MEMORY TABLE JBM_ID_CACHE(NODE_ID INTEGER NOT NULL,CNTR INTEGER NOT NULL,JBM_ID VARCHAR(255),PRIMARY KEY(NODE_ID,CNTR))</span><br><span class="line">CREATE MEMORY TABLE JBM_USER(USER_ID VARCHAR(32) NOT NULL PRIMARY KEY,PASSWD VARCHAR(32) NOT NULL,CLIENTID VARCHAR(128))</span><br><span class="line">CREATE MEMORY TABLE JBM_ROLE(ROLE_ID VARCHAR(32) NOT NULL,USER_ID VARCHAR(32) NOT NULL,PRIMARY KEY(USER_ID,ROLE_ID))</span><br><span class="line">CREATE MEMORY TABLE JBM_POSTOFFICE(POSTOFFICE_NAME VARCHAR(255) NOT NULL,NODE_ID INTEGER NOT NULL,QUEUE_NAME VARCHAR(255) NOT NULL,CONDITION VARCHAR(1023),SELECTOR VARCHAR(1023),CHANNEL_ID BIGINT,CLUSTERED CHAR(1),ALL_NODES CHAR(1),PRIMARY KEY(POSTOFFICE_NAME,NODE_ID,QUEUE_NAME))</span><br><span class="line">CREATE MEMORY TABLE TIMERS(TIMERID VARCHAR(80) NOT NULL,TARGETID VARCHAR(250) NOT NULL,INITIALDATE TIMESTAMP NOT NULL,TIMERINTERVAL BIGINT,INSTANCEPK VARBINARY,INFO VARBINARY,CONSTRAINT TIMERS_PK PRIMARY KEY(TIMERID,TARGETID))</span><br><span class="line">CREATE USER SA PASSWORD &quot;&quot;</span><br><span class="line">GRANT DBA TO SA</span><br><span class="line">SET WRITE_DELAY 10</span><br><span class="line">SET SCHEMA PUBLIC</span><br><span class="line">INSERT INTO JBM_DUAL VALUES(1)</span><br><span class="line">INSERT INTO JBM_COUNTER VALUES(&#39;CHANNEL_ID&#39;,120)</span><br><span class="line">INSERT INTO JBM_COUNTER VALUES(&#39;MESSAGE_ID&#39;,49152)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;dynsub&#39;,&#39;dynsub&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;guest&#39;,&#39;guest&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;j2ee&#39;,&#39;j2ee&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;john&#39;,&#39;needle&#39;,&#39;DurableSubscriberExample&#39;)</span><br><span class="line">INSERT INTO JBM_USER VALUES(&#39;nobody&#39;,&#39;nobody&#39;,NULL)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;durpublisher&#39;,&#39;dynsub&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;publisher&#39;,&#39;dynsub&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;guest&#39;,&#39;guest&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;j2ee&#39;,&#39;guest&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;john&#39;,&#39;guest&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;durpublisher&#39;,&#39;john&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;publisher&#39;,&#39;john&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;subscriber&#39;,&#39;john&#39;)</span><br><span class="line">INSERT INTO JBM_ROLE VALUES(&#39;noacc&#39;,&#39;nobody&#39;)</span><br><span class="line">INSERT INTO JBM_POSTOFFICE VALUES(&#39;JMS post office&#39;,0,&#39;DLQ&#39;,&#39;queue.DLQ&#39;,NULL,1,&#39;N&#39;,&#39;N&#39;)</span><br><span class="line">INSERT INTO JBM_POSTOFFICE VALUES(&#39;JMS post office&#39;,0,&#39;ExpiryQueue&#39;,&#39;queue.ExpiryQueue&#39;,NULL,0,&#39;N&#39;,&#39;N&#39;)</span><br></pre></td></tr></table></figure>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>cd /usr/local/sdp_trunk/usm/jboss5/server/default/data/hypersonic 拷贝一份正常文件localDB.script，覆盖启动异常文件<br>重新启动Jboss</p>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>WildFly容器配置</title>
    <url>/WildFly/blogs/WildFly%E5%AE%B9%E5%99%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">下载</span></a></li>
<li><a href="#span-idinline-blue%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">目录说明</span></a></li>
<li><a href="#span-idinline-blue%E6%A8%A1%E5%BC%8F%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">模式说明</span></a><ul>
<li><a href="#domain%E6%A8%A1%E5%BC%8F">domain模式</a></li>
<li><a href="#standalone%E6%A8%A1%E5%BC%8F">standalone模式</a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E6%B3%A8%E5%86%8Cmysql%E6%95%B0%E6%8D%AE%E6%BA%90%E6%A8%A1%E5%9D%97%E9%A9%B1%E5%8A%A8span"><span id="inline-blue">注册MySQL数据源模块驱动</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AEjndi%E6%95%B0%E6%8D%AE%E6%BA%90span"><span id="inline-blue">配置项目JNDI数据源</span></a></li>
<li><a href="#span-idinline-blue%E5%BC%80%E5%90%AF%E5%A4%96%E9%83%A8%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AEspan"><span id="inline-blue">开启外部主机访问</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AEsslspan"><span id="inline-blue">配置SSL</span></a><ul>
<li><a href="#%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6%E5%91%BD%E4%BB%A4">生成证书命令</a></li>
<li><a href="#%E5%AF%BC%E5%87%BA%E8%AF%81%E4%B9%A6%E5%91%BD%E4%BB%A4">导出证书命令</a></li>
<li><a href="#keytool%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0">keyTool命令参数</a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AEsslspan"><span id="inline-blue">应用配置SSL</span></a></li>
<li><a href="#span-idinline-blue%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E9%85%8D%E7%BD%AEsslspan"><span id="inline-blue">管理后台配置SSL</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E7%AE%A1%E7%90%86%E5%91%98span"><span id="inline-blue">添加管理员</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a><ul>
<li><a href="#google%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E5%85%A5%E8%AF%81%E4%B9%A6">Google浏览器导入证书</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="下载"><span id="inline-blue">下载</span></span></h1><p>官网下载地址：<a href="https://www.wildfly.org/downloads/">https://www.wildfly.org/downloads/</a></p>
<p>容器版本：wildfly-26.1.0.Final</p>
<h1><span id="目录说明"><span id="inline-blue">目录说明</span></span></h1><p>appclient – application client 客户端<br>bin – 各种脚本的位置<br>docs – 各种文档信息和配置例子<br>domain – domain mode 的专门目录<br>standalone – standalone server 的专门目录<br>modules – server中的各种模块<br>welcome-content – 默认的欢迎页面<br>WildFly启动分为单机和域模式，启动脚本对应bin目录下standalone.sh和domain.sh</p>
<h1><span id="模式说明"><span id="inline-blue">模式说明</span></span></h1><h2><span id="domain模式">domain模式</span></h2><pre><code>configuration – 配置文件目录
content – Host Controller工作时候的内部区域
lib – server运行时依赖的lib
log – 日志目录
tmp – 临时文件
servers – 要部署的程序目录</code></pre>
<h2><span id="standalone模式">standalone模式</span></h2><pre><code>configuration – 配置文件目录
data – server运行时的持久化存储信息
deployments – 要部署的程序目录
lib – server运行时依赖的lib
log – 日志目录
tmp – 临时文件</code></pre>
<h1><span id="注册mysql数据源模块驱动"><span id="inline-blue">注册MySQL数据源模块驱动</span></span></h1><p>创建mysql模块依赖文件目录及相应文件内容<br>cd /usr/local/WildFly/modules/system/layers/base/com<br>#创建mysql模块所在目录<br>mkdir -p  mysql/main<br>cd mysql/main<br>#创建module.xml文件，内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  ~ JBoss, Home of Professional Open Source.</span></span><br><span class="line"><span class="comment">  ~ Copyright 2010, Red Hat, Inc., and individual contributors</span></span><br><span class="line"><span class="comment">  ~ as indicated by the @author tags. See the copyright.txt file in the</span></span><br><span class="line"><span class="comment">  ~ distribution for a full listing of individual contributors.</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~ This is free software; you can redistribute it and/or modify it</span></span><br><span class="line"><span class="comment">  ~ under the terms of the GNU Lesser General Public License as</span></span><br><span class="line"><span class="comment">  ~ published by the Free Software Foundation; either version 2.1 of</span></span><br><span class="line"><span class="comment">  ~ the License, or (at your option) any later version.</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~ This software is distributed in the hope that it will be useful,</span></span><br><span class="line"><span class="comment">  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span><br><span class="line"><span class="comment">  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span></span><br><span class="line"><span class="comment">  ~ Lesser General Public License for more details.</span></span><br><span class="line"><span class="comment">  ~</span></span><br><span class="line"><span class="comment">  ~ You should have received a copy of the GNU Lesser General Public</span></span><br><span class="line"><span class="comment">  ~ License along with this software; if not, write to the Free</span></span><br><span class="line"><span class="comment">  ~ Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA</span></span><br><span class="line"><span class="comment">  ~ 02110-1301 USA, or see the FSF site: http://www.fsf.org.</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;com.mysql&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:jboss:module:1.9&quot;</span> &gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jboss.api&quot;</span> <span class="attr">value</span>=<span class="string">&quot;private&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">     <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">resource-root</span> <span class="attr">path</span>=<span class="string">&quot;mysql-connector-java-5.1.12.jar&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;javax.api&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;javax.transaction.api&quot;</span>/&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="name">module</span> <span class="attr">name</span>=<span class="string">&quot;javax.servlet.api&quot;</span> <span class="attr">optional</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>mysql 驱动jar包名称，根据项目可自行更改。<br>将mysql-connector-java-5.1.12.jar文件上传到目录/usr/local/WildFly/modules/system/layers/base/com/mysql/main</p>
<h1><span id="配置项目jndi数据源"><span id="inline-blue">配置项目JNDI数据源</span></span></h1><p>cd /usr/local/WildFly/standalone/configuration<br>vim standalone.xml<br>在datasources节点下新增如下内容:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">datasource</span> <span class="attr">jndi-name</span>=<span class="string">&quot;java:/grm&quot;</span> <span class="attr">pool-name</span>=<span class="string">&quot;grm&quot;</span> <span class="attr">statistics-enabled</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-url</span>&gt;</span>jdbc:mysql://10.9.212.55:3306/global_fj<span class="tag">&lt;/<span class="name">connection-url</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver-class</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">driver-class</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-property</span> <span class="attr">name</span>=<span class="string">&quot;databaseName&quot;</span>&gt;</span></span><br><span class="line">                        global_fj</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">connection-property</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-property</span> <span class="attr">name</span>=<span class="string">&quot;useUnicode&quot;</span>&gt;</span></span><br><span class="line">                        true</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">connection-property</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">connection-property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span>&gt;</span></span><br><span class="line">                        utf8</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">connection-property</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">driver</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">pool</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">min-pool-size</span>&gt;</span>30<span class="tag">&lt;/<span class="name">min-pool-size</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">initial-pool-size</span>&gt;</span>30<span class="tag">&lt;/<span class="name">initial-pool-size</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">max-pool-size</span>&gt;</span>50<span class="tag">&lt;/<span class="name">max-pool-size</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">use-strict-min</span>&gt;</span>false<span class="tag">&lt;/<span class="name">use-strict-min</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">pool</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">security</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">user-name</span>&gt;</span>root<span class="tag">&lt;/<span class="name">user-name</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">password</span>&gt;</span>coship<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">security</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">validation</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">valid-connection-checker</span> <span class="attr">class-name</span>=<span class="string">&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">check-valid-connection-sql</span>&gt;</span>select 1 from dual<span class="tag">&lt;/<span class="name">check-valid-connection-sql</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">validate-on-match</span>&gt;</span>true<span class="tag">&lt;/<span class="name">validate-on-match</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exception-sorter</span> <span class="attr">class-name</span>=<span class="string">&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">validation</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">datasource</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更改JDNI名称，连接池名称，数据库IP、数据库名称、用户名、密码<br>配置mysql驱动，在drivers节点下新增driver节点，内容如下 :</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&quot;mysql&quot;</span> <span class="attr">module</span>=<span class="string">&quot;com.mysql&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">driver-class</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">driver-class</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">xa-datasource-class</span>&gt;</span>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource<span class="tag">&lt;/<span class="name">xa-datasource-class</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">driver</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="开启外部主机访问"><span id="inline-blue">开启外部主机访问</span></span></h1><p>Interfaces节点下修改配置如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">interfaces</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;any&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">any-address</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;management&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">any-address</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;public&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">inet-address</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jboss.bind.address:127.0.0.1&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interfaces</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">socket-binding-group</span> <span class="attr">name</span>=<span class="string">&quot;standard-sockets&quot;</span> <span class="attr">default-interface</span>=<span class="string">&quot;any&quot;</span> <span class="attr">port-offset</span>=<span class="string">&quot;$&#123;jboss.socket.binding.port-offset:0&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;ajp&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.ajp.port:8009&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;http&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.http.port:8080&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;https&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.https.port:8443&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-http&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.http.port:9990&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;management-https&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;management&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.management.https.port:9993&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-recovery-environment&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4712&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;txn-status-manager&quot;</span> <span class="attr">port</span>=<span class="string">&quot;4713&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">outbound-socket-binding</span> <span class="attr">name</span>=<span class="string">&quot;mail-smtp&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">remote-destination</span> <span class="attr">host</span>=<span class="string">&quot;$&#123;jboss.mail.server.host:localhost&#125;&quot;</span> <span class="attr">port</span>=<span class="string">&quot;$&#123;jboss.mail.server.port:25&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">outbound-socket-binding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">socket-binding-group</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1><span id="配置ssl"><span id="inline-blue">配置SSL</span></span></h1><p>通过jdk工具keyTool生成证书</p>
<h2><span id="生成证书命令">生成证书命令</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd  /home</span><br><span class="line">keytool -genkey -alias coship  -keyalg RSA -keysize 2048 -validity 3650 -ext SAN=dns:www.grm.com,ip:10.9.216.12  -keystore /home/certificate.jks -storepass coshipOk698 -dname &quot;CN=www.grm.com, OU=www.grm.com, O=www.grm.com, L=wuhan, ST=wuhan, C=cn&quot;</span><br></pre></td></tr></table></figure>

<h2><span id="导出证书命令">导出证书命令</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">keytool -export -trustcacerts -alias coship -file /home/cas.crt -keystore /home/certificate.jks -storepass coshipOk698</span><br></pre></td></tr></table></figure>
<h2><span id="keytool命令参数">keyTool命令参数</span></h2><p>-genkey      在用户主目录中创建一个默认文件”.keystore”,还会产生一个mykey的别名，mykey中包含用户的公钥、私钥和证书<br>(在没有指定生成位置的情况下,keystore会存在用户系统默认目录，如：对于window xp系统，会生成在系统的C:/Documents and Settings/UserName/文件名为“.keystore”)<br>-alias       产生别名<br>-keystore    指定密钥库的名称(产生的各类信息将不在.keystore文件中)<br>-keyalg      指定密钥的算法 (如 RSA  DSA（如果不指定默认采用DSA）)<br>-validity    指定创建的证书有效期多少天<br>-keysize     指定密钥长度<br>-storepass   指定密钥库的密码(获取keystore信息所需的密码)<br>-keypass     指定别名条目的密码(私钥的密码)<br>-dname       指定证书拥有者信息 例如：  “CN=名字与姓氏,OU=组织单位名称,O=组织名称,L=城市或区域名称,ST=州或省份名称,C=单位的两字母国家代码”<br>-list        显示密钥库中的证书信息      keytool -list -v -keystore 指定keystore -storepass 密码<br>-v           显示密钥库中的证书详细信息<br>-export      将别名指定的证书导出到文件  keytool -export -alias 需要导出的别名 -keystore 指定keystore -file 指定导出的证书位置及证书名称 -storepass 密码<br>-file        参数指定导出到文件的文件名<br>-delete      删除密钥库中某条目          keytool -delete -alias 指定需删除的别  -keystore 指定keystore  -storepass 密码<br>-printcert   查看导出的证书信息          keytool -printcert -file yushan.crt<br>-keypasswd   修改密钥库中指定条目口令    keytool -keypasswd -alias 需修改的别名 -keypass 旧密码 -new  新密码  -storepass keystore密码  -keystore sage<br>-storepasswd 修改keystore口令      keytool -storepasswd -keystore e:/yushan.keystore(需修改口令的keystore) -storepass 123456(原始密码) -new yushan(新密码)<br>-import      将已签名数字证书导入密钥库  keytool -import -alias 指定导入条目的别名 -keystore 指定keystore -file 需导入的证书</p>
<p>/home路径下生成两个文件certificate.jks、cas.crt，将certificate.jks文件拷贝至/usr/local/WildFly/standalone/configuration目录下，浏览器访问后台需要导入cas.crt证书文件（导入到受信任的根证书颁发机构）</p>
<h1><span id="应用配置ssl"><span id="inline-blue">应用配置SSL</span></span></h1><p>cd /usr/local/GRM/WildFly/standalone/configuration/<br>standalone.xml文件tls节点更改如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tls</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-store</span> <span class="attr">name</span>=<span class="string">&quot;applicationKS&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;coshipOk698&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">implementation</span> <span class="attr">type</span>=<span class="string">&quot;JKS&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">file</span> <span class="attr">path</span>=<span class="string">&quot;certificate.jks&quot;</span> <span class="attr">relative-to</span>=<span class="string">&quot;jboss.server.config.dir&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-store</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-stores</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">key-manager</span> <span class="attr">name</span>=<span class="string">&quot;applicationKM&quot;</span> <span class="attr">key-store</span>=<span class="string">&quot;applicationKS&quot;</span> <span class="attr">generate-self-signed-certificate-host</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">credential-reference</span> <span class="attr">clear-text</span>=<span class="string">&quot;coshipOk698&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">key-manager</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">key-managers</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">server-ssl-context</span> <span class="attr">name</span>=<span class="string">&quot;applicationSSC&quot;</span> <span class="attr">key-manager</span>=<span class="string">&quot;applicationKM&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">server-ssl-contexts</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tls</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="管理后台配置ssl"><span id="inline-blue">管理后台配置SSL</span></span></h1><p>cd /usr/local/GRM/WildFly/standalone/configuration/ standalone.xml文件management-interfaces节点更新内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">management-interfaces</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">http-interface</span> <span class="attr">http-authentication-factory</span>=<span class="string">&quot;management-http-authentication&quot;</span> <span class="attr">ssl-context</span>=<span class="string">&quot;applicationSSC&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">http-upgrade</span> <span class="attr">enabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">sasl-authentication-factory</span>=<span class="string">&quot;management-sasl-authentication&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">socket-binding</span> <span class="attr">http</span>=<span class="string">&quot;management-http&quot;</span> <span class="attr">https</span>=<span class="string">&quot;management-https&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">http-interface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">management-interfaces</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1><span id="添加管理员"><span id="inline-blue">添加管理员</span></span></h1><p>cd /usr/local/GRM/WildFly/bin<br> sh add-user.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">What type of user do you wish to add? </span><br><span class="line"> a) Management User (mgmt-users.properties) //管理域用户</span><br><span class="line"> b) Application User (application-users.properties) //应用程序域用户（目前没有使用）</span><br><span class="line">(a): a</span><br><span class="line"></span><br><span class="line">Enter the details of the new user to add. //设置用户名</span><br><span class="line">Using realm &#x27;ManagementRealm&#x27; as discovered from the existing property files.</span><br><span class="line">Username : system</span><br><span class="line">Password recommendations are listed below. To modify these restrictions edit the add-user.properties configuration file.</span><br><span class="line"> - The password should be different from the username</span><br><span class="line"> - The password should not be one of the following restricted values &#123;root, admin, administrator&#125;</span><br><span class="line"> - The password should contain at least 8 characters, 1 alphabetic character(s), 1 digit(s), 1 non-alphanumeric symbol(s)//密码要求至少长度为8位，至少包含一个字母、一个数字、一个特殊字符</span><br><span class="line">Password : </span><br><span class="line">Re-enter Password : </span><br><span class="line">What groups do you want this user to belong to? (Please enter a comma separated list, or leave blank for none)[  ]: </span><br><span class="line">About to add user &#x27;system&#x27; for realm &#x27;ManagementRealm&#x27;</span><br><span class="line">Is this correct yes/no? y //添加在管理控制域</span><br><span class="line">Added user &#x27;system&#x27; to file &#x27;/usr/local/GRM/WildFly/standalone/configuration/mgmt-users.properties&#x27;</span><br><span class="line">Added user &#x27;system&#x27; to file &#x27;/usr/local/GRM/WildFly/domain/configuration/mgmt-users.properties&#x27;</span><br><span class="line">Added user &#x27;system&#x27; with groups  to file &#x27;/usr/local/GRM/WildFly/standalone/configuration/mgmt-groups.properties&#x27;</span><br><span class="line">Added user &#x27;system&#x27; with groups  to file &#x27;/usr/local/GRM/WildFly/domain/configuration/mgmt-groups.properties&#x27;</span><br><span class="line">Is this new user going to be used for one AS process to connect to another AS process? </span><br><span class="line">e.g. for a slave host controller connecting to the master or for a Remoting connection for server to server Jakarta Enterprise Beans calls</span><br><span class="line">.yes/no? no //不需要主从模式设置为no</span><br></pre></td></tr></table></figure>

<p>默认管理员添加完成后，重启即可通过管理员访问管理后台。</p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p>SSL配置完成后<br>服务器配置域名：<br>新增条目 10.9.216.12 <a href="http://www.grm.com/">www.grm.com</a><br>vim /etc/hosts  </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4 12.erm.com</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">10.9.212.49 1.erm.com</span><br><span class="line">140.82.113.3 github.com</span><br><span class="line">10.9.216.12 www.grm.com</span><br></pre></td></tr></table></figure>
<p>Windows客户端域名配置：<br>新增条目 10.9.216.12 <a href="http://www.grm.com/">www.grm.com</a><br>vim C:\Windows\System32\drivers\etc\hosts</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">GitHub  start</span></span><br><span class="line"><span class="meta">#</span><span class="bash">192.30.255.112 github.com</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">202.160.130.66 github.global.ssl.fastly.net</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Github end</span></span><br><span class="line">185.199.108.153 vanishke.github.io</span><br><span class="line">185.199.109.153 vanishke.github.io</span><br><span class="line">185.199.110.153 vanishke.github.io</span><br><span class="line">185.199.111.153 vanishke.github.io</span><br><span class="line">140.82.113.3 github.com</span><br><span class="line">185.199.108.153 eclipse-jetty.github.io</span><br><span class="line">185.199.108.153 xzer.github.io</span><br><span class="line">140.82.112.4 github.com</span><br><span class="line">104.21.50.214 www.onlinedoctranslator.com127.0.0.1       activate.navicat.com</span><br><span class="line">162.159.152.4 medium.com</span><br><span class="line">10.9.216.12 www.grm.com</span><br></pre></td></tr></table></figure>

<h2><span id="google浏览器导入证书">Google浏览器导入证书</span></h2><p>谷歌浏览器访问chrome://settings/privacy<br><img src="/images/WildFly/WildFly_2022_08_26_001.png" alt="导入证书"></p>
<p>启动WildFly<br>cd /usr/local/GRM/WildFly/bin<br>sh standalone.xml &amp; </p>
<p>访问WildFly管理后台</p>
<p><a href="https://www.grm.com:9993/console/index.html">https://www.grm.com:9993/console/index.html</a><br><img src="/images/WildFly/WildFly_2022_08_26_002.png" alt="WildFly容器配置"></p>
]]></content>
      <categories>
        <category>WildFly</category>
      </categories>
      <tags>
        <tag>WildFly</tag>
        <tag>Https</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux查找指定class文件所在位置</title>
    <url>/Linux/blogs/Linux%E6%9F%A5%E6%89%BE%E6%8C%87%E5%AE%9Aclass%E6%96%87%E4%BB%B6%E6%89%80%E5%9C%A8%E4%BD%8D%E7%BD%AE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AFspan"><span id="inline-blue">使用场景</span></a></li>
<li><a href="#span-idinline-blue%E5%91%BD%E4%BB%A4%E8%B0%83%E7%94%A8span"><span id="inline-blue">命令调用</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9Cspan"><span id="inline-blue">查询结果</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="使用场景"><span id="inline-blue">使用场景</span></span></h1><p>线上应用异常日志打印信息关联某个class文件，但不确定具体存在那个jar包</p>
<h1><span id="命令调用"><span id="inline-blue">命令调用</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls *.jar | while read jarfile; do</span><br><span class="line">    echo &quot;$jarfile&quot;</span><br><span class="line">    jar -tf $jarfile | grep &quot;Integer.class&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h1><span id="查询结果"><span id="inline-blue">查询结果</span></span></h1><p><img src="/images/linux/Linux_20220715_001.png" alt="Jboss容器自启动"></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>基于Jboss容器自动启动脚本工具</title>
    <url>/Jboss/blogs/%E5%9F%BA%E4%BA%8EJboss%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%9B%AE%E7%9A%84span"><span id="inline-blue">目的</span></a></li>
<li><a href="#span-idinline-blue%E8%84%9A%E6%9C%AC%E5%86%85%E5%AE%B9span"><span id="inline-blue">脚本内容</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="目的"><span id="inline-blue">目的</span></span></h1><p>解决服务器同级目录下,多个模块使用Jboss容器自动启动脚本设置。</p>
<h1><span id="脚本内容"><span id="inline-blue">脚本内容</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">搜索jboss start.sh&amp;stop.sh脚本所在目录，先执行stop.sh,两秒之后执行start.sh启动</span></span><br><span class="line">function restart_module()&#123;</span><br><span class="line">   cd $1</span><br><span class="line">   sh stop.sh &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">   sleep 2</span><br><span class="line">   sh start.sh &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p_path=`pwd`</span><br><span class="line"><span class="meta">#</span><span class="bash"> 去掉BAK、soft和depg目录</span></span><br><span class="line">start_loction=`find $p_path \( -path $p_path/BAK -o -path $p_path/soft  -o -path $p_path/depg \) -prune -o -name start.sh`</span><br><span class="line">for i in $start_loction; do</span><br><span class="line">    if [ -f $i ]; then</span><br><span class="line">       start_path=`dirname $i`</span><br><span class="line">       echo $start_path</span><br><span class="line">       restart_module $start_path</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>将脚本上传至需要设置自动启动的项目同级目录下，执行 chmod a+x *.sh<br><img src="/images/Jboss/Jboss_20220712_001.png" alt="Jboss容器自启动"></p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">startsdp.sh脚本</span></span><br><span class="line">sh startsdp.sh</span><br></pre></td></tr></table></figure>
<p>命令执行之后会打印启动执行的脚本所在位置。<br><img src="/images/Jboss/Jboss_20220712_002.png" alt="Jboss容器自启动"></p>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>Jetty访问jsp失败原因分析</title>
    <url>/Jetty/blogs/Jetty%E8%AE%BF%E9%97%AEjsp%E5%A4%B1%E8%B4%A5%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90span"><span id="inline-blue">原因分析</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">HTTP ERROR 404</span><br><span class="line"></span><br><span class="line">Problem accessing /cache/cosole.jsp. Reason:</span><br><span class="line"></span><br><span class="line">Not Found</span><br></pre></td></tr></table></figure>
<h1><span id="原因分析"><span id="inline-blue">原因分析</span></span></h1><p>应用部署到Jetty之后，因为jetty没有work目录的原因，导致jetty使用的是/tmp目录<br>对应jetty配置文件内容如下：<br>文件路径：/usr/local/iepg-jetty/bin/jetty.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">209 ##################################################</span><br><span class="line">210 # Set tmp if not already set.</span><br><span class="line">211 ##################################################</span><br><span class="line">212 TMPDIR=$&#123;TMPDIR:-/tmp&#125;</span><br><span class="line">213 </span><br></pre></td></tr></table></figure>

<p>从以上脚本文件设置得知jetty确实使用的是系统临时文件目录,查看对应目录缺失没有jsp编译生成的class文件，猜测可能是系统定时任务会自动清理对应的临时文件目录。<br>查看系统对应的定时任务设置，查找到对应的内容信息。<br>系统临时目录清除任务路径：/etc/cron.daily/<br>系统临时目录清除任务名称：tmpwatch</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/sh</span></span><br><span class="line">flags=-umc</span><br><span class="line">/usr/sbin/tmpwatch &quot;$flags&quot; -x /tmp/.X11-unix -x /tmp/.XIM-unix \</span><br><span class="line">        -x /tmp/.font-unix -x /tmp/.ICE-unix -x /tmp/.Test-unix \</span><br><span class="line">        -X &#x27;/tmp/hsperfdata_*&#x27; 10d /tmp</span><br><span class="line">/usr/sbin/tmpwatch &quot;$flags&quot; 30d /var/tmp</span><br><span class="line">for d in /var/&#123;cache/man,catman&#125;/&#123;cat?,X11R6/cat?,local/cat?&#125;; do</span><br><span class="line">    if [ -d &quot;$d&quot; ]; then</span><br><span class="line">        /usr/sbin/tmpwatch &quot;$flags&quot; -f 30d &quot;$d&quot;</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>tmpwatch脚本作用是根据创建时间清除/tmp目录下指定时间没有被访问过的文件(10天)<br>命令参数详情如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-u, --atime		基于访问时间来删除文件，默认的。</span><br><span class="line">-m, --mtime		基于修改时间来删除文件。</span><br><span class="line">-c, --ctime		基于创建时间来删除文件，对于目录，基于mtime。</span><br><span class="line">-M, --dirmtime	删除目录基于目录的修改时间而不是访问时间。</span><br><span class="line">-a, --all		删除所有的文件类型，不只是普通文件，符号链接和目录。</span><br><span class="line">-d, --nodirs	不尝试删除目录，即使是空目录。</span><br><span class="line">-d, --nosymlinks	不尝试删除符号链接。</span><br><span class="line">-f, --force		强制删除。</span><br><span class="line">-q, --quiet		只报告错误信息。</span><br><span class="line">-s, --fuser		如果文件已经是打开状态在删除前，尝试使用“定影”命令。默认不启用。</span><br><span class="line">-t, --test		仅作测试，并不真的删除文件或目录。</span><br><span class="line">-U, --exclude-user=user	不删除属于谁的文件。</span><br><span class="line">-v, --verbose	打印详细信息。</span><br><span class="line">-x, --exclude=path	排除路径，如果路径是一个目录，它包含的所有文件被排除了。如果路径不存在，它必须是一个绝对路径不包含符号链接。</span><br><span class="line">-X, --exclude-pattern=pattern	排除某规则下的路径。</span><br></pre></td></tr></table></figure>
<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p><strong><em>方案1</em></strong><br>jetty主目录下新建work目录<br><img src="/images/jetty/jetty_2022_07_06_001.png" alt="Jetty临时目录设置"></p>
<p><strong><em>方案2</em></strong><br>重新指定jetty临时文件目录<br>编辑bin目录下jetty.sh文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">TMPDIR=$&#123;TMPDIR:-/tmp&#125;</span><br><span class="line">改为</span><br><span class="line">TMPDIR=$&#123;TMPDIR:-/usr/local/tmp&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Jetty</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>Jboss-5.1.0.GA启动报错解决</title>
    <url>/Jboss/blogs/Jboss-5.1.0.GA%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88span"><span id="inline-blue">解决方案</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">10:13:23,908 INFO  [JMXKernel] Legacy JMX core initialized</span><br><span class="line">10:13:24,590 ERROR [AbstractKernelController] Error installing to Instantiated: name=AttachmentStore state=Described</span><br><span class="line">java.lang.IllegalArgumentException: Wrong arguments. new for target java.lang.reflect.Constructor expected=[java.net.URI] actual=[java.io.</span><br><span class="line">File]	at org.jboss.reflect.plugins.introspection.ReflectionUtils.handleErrors(ReflectionUtils.java:395)</span><br><span class="line">	at org.jboss.reflect.plugins.introspection.ReflectionUtils.newInstance(ReflectionUtils.java:153)</span><br><span class="line">	at org.jboss.reflect.plugins.introspection.ReflectConstructorInfoImpl.newInstance(ReflectConstructorInfoImpl.java:106)</span><br><span class="line">	at org.jboss.joinpoint.plugins.BasicConstructorJoinPoint.dispatch(BasicConstructorJoinPoint.java:80)</span><br><span class="line">	at org.jboss.aop.microcontainer.integration.AOPConstructorJoinpoint.createTarget(AOPConstructorJoinpoint.java:282)</span><br><span class="line">	at org.jboss.aop.microcontainer.integration.AOPConstructorJoinpoint.dispatch(AOPConstructorJoinpoint.java:103)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.KernelControllerContextAction$JoinpointDispatchWrapper.execute(KernelControllerContextActio</span><br><span class="line">n.java:241)	at org.jboss.kernel.plugins.dependency.ExecutionWrapper.execute(ExecutionWrapper.java:47)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchExecutionWrapper(KernelControllerContextAction.java:1</span><br><span class="line">09)	at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchJoinPoint(KernelControllerContextAction.java:70)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.InstantiateAction.installActionInternal(InstantiateAction.java:66)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54)</span><br><span class="line">	at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42)</span><br><span class="line">	at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)</span><br><span class="line">	at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:774)</span><br><span class="line">	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:540)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deployBean(AbstractKernelDeployer.java:319)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deployBeans(AbstractKernelDeployer.java:297)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.AbstractKernelDeployer.deploy(AbstractKernelDeployer.java:130)</span><br><span class="line">	at org.jboss.kernel.plugins.deployment.BasicKernelDeployer.deploy(BasicKernelDeployer.java:76)</span><br><span class="line">	at org.jboss.bootstrap.microcontainer.TempBasicXMLDeployer.deploy(TempBasicXMLDeployer.java:91)</span><br><span class="line">	at org.jboss.bootstrap.microcontainer.TempBasicXMLDeployer.deploy(TempBasicXMLDeployer.java:161)</span><br><span class="line">	at org.jboss.bootstrap.microcontainer.ServerImpl.doStart(ServerImpl.java:138)</span><br><span class="line">	at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:450)</span><br><span class="line">	at org.jboss.Main.boot(Main.java:221)</span><br><span class="line">	at org.jboss.Main$1.run(Main.java:556)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Failed to boot JBoss:</span><br><span class="line">java.lang.IllegalStateException: Incompletely deployed:</span><br><span class="line"></span><br></pre></td></tr></table></figure>










<h1><span id="解决方案"><span id="inline-blue">解决方案</span></span></h1><p>修改以下文件对应节点内容：/usr/local/GRM/jboss-5.1.0.GA/server/default/conf/bootstrap/profile.xml<br>修改前：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;!-- The attachment store --&gt;</span><br><span class="line">        &lt;bean name=&quot;AttachmentStore&quot; class=&quot;org.jboss.system.server.profileservice.repository.AbstractAttachmentStore&quot;&gt;</span><br><span class="line">                &lt;constructor&gt;&lt;parameter&gt;&lt;inject bean=&quot;BootstrapProfileFactory&quot; property=&quot;attachmentStoreRoot&quot; /&gt;&lt;/parameter&gt;&lt;/constructor&gt;</span><br><span class="line">                &lt;property name=&quot;mainDeployer&quot;&gt;&lt;inject bean=&quot;MainDeployer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;serializer&quot;&gt;&lt;inject bean=&quot;AttachmentsSerializer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;persistenceFactory&quot;&gt;&lt;inject bean=&quot;PersistenceFactory&quot; /&gt;&lt;/property&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;!-- The attachment store --&gt;</span><br><span class="line">        &lt;bean name=&quot;AttachmentStore&quot; class=&quot;org.jboss.system.server.profileservice.repository.AbstractAttachmentStore&quot;&gt;</span><br><span class="line">                &lt;constructor&gt;&lt;parameter class=&quot;java.io.File&quot;&gt;&lt;inject bean=&quot;BootstrapProfileFactory&quot; property=&quot;attachmentStoreRoot&quot; /&gt;&lt;/parameter&gt;&lt;/constructor&gt;</span><br><span class="line">                &lt;property name=&quot;mainDeployer&quot;&gt;&lt;inject bean=&quot;MainDeployer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;serializer&quot;&gt;&lt;inject bean=&quot;AttachmentsSerializer&quot; /&gt;&lt;/property&gt;</span><br><span class="line">                &lt;property name=&quot;persistenceFactory&quot;&gt;&lt;inject bean=&quot;PersistenceFactory&quot; /&gt;&lt;/property&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>Freemarker宏模板实现Ztree栏目树</title>
    <url>/Ztree/blogs/Freemarker%E5%AE%8F%E6%A8%A1%E6%9D%BF%E5%AE%9E%E7%8E%B0Ztree%E6%A0%8F%E7%9B%AE%E6%A0%91/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">版本信息</span></a></li>
<li><a href="#span-idinline-blue%E5%85%B3%E9%94%AE%E7%82%B9span"><span id="inline-blue">关键点</span></a></li>
<li><a href="#span-idinline-blue%E9%A1%B5%E9%9D%A2%E5%AE%9E%E7%8E%B0%E7%BB%86%E8%8A%82span"><span id="inline-blue">页面实现细节</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="版本信息"><span id="inline-blue">版本信息</span></span></h1><p>Freemarker: 2.3.24<br>Ztree：JQuery zTree core v3.5.17-beta.2</p>
<h1><span id="关键点"><span id="inline-blue">关键点</span></span></h1><blockquote>
<p>因为使用hibernate的缘故，栏目节点的parent为对象，而非简单数据类型，这里将影响到ztree初始化节点key设置，pIdKey设置为parentNode.id。<br>栏目模板的递归调用,后台返回的节点存在children节点，可以递归得到所有数据节点。</p>
</blockquote>
<h1><span id="页面实现细节"><span id="inline-blue">页面实现细节</span></span></h1><p>页面引入ztree依赖资源文件：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;base&#125;/res/ztree/css/ztree.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;base&#125;/res/ztree/js/jquery.ztree.all-3.5.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ztree初始化:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> settingss = </span><br><span class="line">				 &#123;</span><br><span class="line">		                data: </span><br><span class="line">		                &#123;</span><br><span class="line">		                    simpleData: </span><br><span class="line">		                    &#123;</span><br><span class="line">		                        enable: <span class="literal">true</span>,  </span><br><span class="line">		                        idKey: <span class="string">&quot;id&quot;</span>,  <span class="comment">//节点标识,对应后台返回数据节点ID</span></span><br><span class="line">		                        pIdKey: <span class="string">&quot;parent.id&quot;</span>, <span class="comment">//父节点对象关联，对应后台返回数据节点parentId  </span></span><br><span class="line">		                        rootPId: -<span class="number">1</span>  <span class="comment">//父节点不存在情况下使用根节点适配</span></span><br><span class="line">		                     &#125;,</span><br><span class="line">		                    key: </span><br><span class="line">		                    &#123;</span><br><span class="line">		                        name: <span class="string">&quot;name&quot;</span>  <span class="comment">//节点显示名称</span></span><br><span class="line">		                     &#125;</span><br><span class="line">		                       </span><br><span class="line">		                &#125;,</span><br><span class="line">			           check:</span><br><span class="line">			            &#123;</span><br><span class="line">			                enable:<span class="literal">true</span>,  <span class="comment">//开启节点checkbox选项</span></span><br><span class="line">			                nocheckInherit:<span class="literal">false</span>  <span class="comment">//是否有级联，当前节点受到父节点和子节点状态影响 </span></span><br><span class="line">			            &#125;</span><br><span class="line">		            &#125;;</span><br><span class="line">				 $.ajax(&#123;</span><br><span class="line">		                    type:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">		                    url:<span class="string">&quot;v_tree_channels.do&quot;</span>, <span class="comment">//请求后台方法获取数据</span></span><br><span class="line">		                    <span class="keyword">async</span>:<span class="literal">false</span>,</span><br><span class="line">		                    success:<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span></span><br><span class="line"><span class="function">		                    </span>&#123;   </span><br><span class="line">			                     <span class="keyword">var</span>  zTreeObj = $.fn.zTree.init($(<span class="string">&quot;#channels&quot;</span>), settingss, res); </span><br><span class="line">			                     <span class="comment">//默认不展开所有栏目</span></span><br><span class="line">			                     zTreeObj.expandAll(<span class="literal">false</span>);  </span><br><span class="line">		                     &#125;</span><br><span class="line">	                    &#125;);</span><br></pre></td></tr></table></figure>
<p>页面元素设置：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;channels&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ztree&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:150px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ztree调用初始化<br>模板如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;#macro channelTree list&gt;</span><br><span class="line">[</span><br><span class="line">&lt;#list list as channel&gt;</span><br><span class="line">		&#123;</span><br><span class="line">		&quot;id&quot;: $&#123;channel.id&#125;,</span><br><span class="line">		&quot;name&quot;: &quot;$&#123;channel.name&#125;&quot;,</span><br><span class="line">		&quot;open&quot;: &lt;#if channel.child?size gt 0&gt;true&lt;#else&gt;false&lt;/#if&gt;,</span><br><span class="line">		&lt;#if channel.child?size gt 0&gt;</span><br><span class="line">		&quot;children&quot;:</span><br><span class="line">				&lt;@channelTree list = channel.child /&gt;</span><br><span class="line">		&lt;#else&gt;</span><br><span class="line">		&quot;children&quot;:[]</span><br><span class="line">		&lt;/#if&gt;</span><br><span class="line">		&#125;&lt;#if channel_has_next&gt;,&lt;/#if&gt;</span><br><span class="line">	&lt;/#list&gt;</span><br><span class="line">	]</span><br><span class="line">&lt;/#macro&gt;</span><br><span class="line">&lt;@channelTree list = channelList /&gt;</span><br></pre></td></tr></table></figure>

<p>tree模板数据展现json格式:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">			&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;156&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;今日高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;217&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;161&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;新闻公告&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;162&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;部门动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;163&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;市长信箱&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;164&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;乡镇园区&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;165&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;办事大厅&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;166&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;政务公开&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;167&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;企业风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;168&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;最新院线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;169&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;学霸宝盒&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;170&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;热播追剧&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;222&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文明实践&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;258&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;259&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文明创建&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;260&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文化高邮&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;261&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;志愿服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;262&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;变废为宝&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;263&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;曝光台&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;264&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文旅在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;265&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;266&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;医疗服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;267&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;智慧残联&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;223&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;清风高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;229&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;230&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;一线传真&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;231&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;派驻监督&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;232&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;监督曝光&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;233&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;党纪法规&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;234&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;三务公开&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;235&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;236&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;医疗服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;237&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;三农在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;238&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;乡镇风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;224&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;智慧党建&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;239&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;240&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;组工动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;241&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;秦邮英才&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;242&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;党员培训&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;243&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;红色教育&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;244&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;最新院线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;245&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;246&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;企业风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;247&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;部门动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;248&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;乡镇风采&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;225&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;法治高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;279&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;280&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;法治动态&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;281&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;普法在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;282&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;以案释法&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;283&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;司法救助&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;284&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;三农在线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;472&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;有事好商量&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;226&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;文旅在线&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;249&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宣传视频&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;250&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;A级景区&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;251&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;景区慧眼&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;252&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;清水潭&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;253&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;运河西堤&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;254&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;高邮美食&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;255&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;温馨住宿&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;256&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;珠湖小镇&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;257&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;好事成双伴手礼&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;227&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;慧眼高邮&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		[]</span><br><span class="line">		</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;228&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;百姓生活&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">		  [</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;268&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;最新院线&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;269&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;热播剧&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;270&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;学霸宝盒&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;271&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;物价公示&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;272&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;精品农园&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;273&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;医疗服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;274&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;教育服务&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;275&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;公交出行&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">                []</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;276&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;高邮美食&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;277&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;孝乐神州&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;file&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">				[]</span><br><span class="line">				</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">				<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;278&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;应急常识&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;classes&quot;</span>: <span class="string">&quot;folder&quot;</span>,</span><br><span class="line">				<span class="attr">&quot;hasChildren&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">&quot;children&quot;</span> :</span><br><span class="line">                []</span><br><span class="line">				&#125;</span><br><span class="line">		 ]</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br></pre></td></tr></table></figure>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Freemarker/Freemarker_20220701_001.png" alt="Freemarker宏模板实现ztree栏目树01"></p>
]]></content>
      <categories>
        <category>Ztree</category>
      </categories>
      <tags>
        <tag>Freemarker</tag>
        <tag>Ztree</tag>
      </tags>
  </entry>
  <entry>
    <title>C3p0连接池泄漏分析</title>
    <url>/MySQL/blogs/C3p0%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%B3%84%E6%BC%8F%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%88%86%E6%9E%90span"><span id="inline-blue">分析</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>线上环境接口突然访问异常，cpu和内存占用率都很低，但出现大量端口close_wait状态。</p>
<h1><span id="分析"><span id="inline-blue">分析</span></span></h1><p>通过jstack命令抓取了当时故障点的堆栈日志。借助IBM Thread and Monitor Dump Analyzer for Java工具查看当时接口请求状态详情。</p>
<p>工具下载地址：链接：<a href="https://pan.baidu.com/s/108SB4IywcpspqPrSAwmpEw">https://pan.baidu.com/s/108SB4IywcpspqPrSAwmpEw</a><br>提取码：3bnk</p>
<p><img src="/images/linux/LM_20220602_001.png" alt="堆栈工具使用"><br><img src="/images/linux/LM_20220602_002.png" alt="堆栈工具使用"><br><img src="/images/linux/LM_20220602_003.png" alt="堆栈工具使用"></p>
<p>堆栈日志显示调用链一直在等待dasource可用,检查c3p0配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://10.9.216.12:3306/nanjing_iepg_xw?createDatabaseIfNotExist=true&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeB</span><br><span class="line">ehavior=convertToNull&amp;transformedBitIsBoolean=true&amp;pinGlobalTxToPhysicalConnection=true&amp;autoReconnect=truejdbc.username=root</span><br><span class="line">jdbc.password=coship</span><br><span class="line"></span><br><span class="line">c3p0.acquireIncrement=1</span><br><span class="line">c3p0.initialPoolSize=5</span><br><span class="line">c3p0.idleConnectionTestPeriod=3600</span><br><span class="line">c3p0.minPoolSize=5</span><br><span class="line">c3p0.maxPoolSize=5</span><br><span class="line">c3p0.maxStatements=100</span><br><span class="line">c3p0.numHelperThreads=10</span><br><span class="line">c3p0.maxIdleTime=60</span><br><span class="line">c3p0.testConnectionOnCheckout=false</span><br><span class="line">c3p0.preferredTestQuery=SELECT 1 FROM DUAL </span><br><span class="line">c3p0.breakAfterAcquireFailure=false</span><br><span class="line">c3p0.acquireRetryAttempts=30</span><br><span class="line"><span class="meta">#</span><span class="bash">c3p0.checkoutTimeout=3000</span></span><br><span class="line"><span class="meta">#</span><span class="bash">c3p0.unreturnedConnectionTimeout=100</span></span><br><span class="line"><span class="meta">#</span><span class="bash">c3p0.debugUnreturnedConnectionStackTraces=<span class="literal">true</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nodeType: beijing=1;wuhan=2</span></span><br><span class="line">sync.sequenceGeneratorDao.nodeType=1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">schedule task timer int [0~23]</span> </span><br><span class="line">cacheRefreshHour=3</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>配置连接池最大连接20，最小为5,初始化大小5,正常来说应该没有问题。猜测可能程序调用存在连接泄漏<br>通过添加unreturnedConnectionTimeout、debugUnreturnedConnectionStackTraces参数追踪可能出现连接泄漏的程序调用点。应用程序重启后发现日志打印泄漏点。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[INFO][2022-05-30 20:16:42,011][resourcepool.BasicResourcePool][Logging the stack trace by which the overdue resource was checked-out.]</span><br><span class="line">java.lang.Exception: DEBUG STACK TRACE: Overdue resource check-out stack trace.</span><br><span class="line">	at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:588)</span><br><span class="line">	at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutAndMarkConnectionInUse(C3P0PooledConnectionPool.java:758)</span><br><span class="line">	at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:685)</span><br><span class="line">	at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:140)</span><br><span class="line">	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)</span><br><span class="line">	at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:35)</span><br><span class="line">	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:106)</span><br><span class="line">	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:136)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.connection(StatementPreparerImpl.java:50)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:149)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)</span><br><span class="line">	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:151)</span><br><span class="line">	at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:2082)</span><br><span class="line">	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2012)</span><br><span class="line">	at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1990)</span><br><span class="line">	at org.hibernate.loader.Loader.doQuery(Loader.java:949)</span><br><span class="line">	at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:351)</span><br><span class="line">	at org.hibernate.loader.Loader.doList(Loader.java:2787)</span><br><span class="line">	at org.hibernate.loader.Loader.doList(Loader.java:2770)</span><br><span class="line">	at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2604)</span><br><span class="line">	at org.hibernate.loader.Loader.list(Loader.java:2599)</span><br><span class="line">	at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:109)</span><br><span class="line">	at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1979)</span><br><span class="line">	at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:370)</span><br><span class="line">	at org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:392)</span><br><span class="line">	at com.coship.core.dal.base.DalScheduleJob.isDbOnline(DalScheduleJob.java:61)</span><br><span class="line">	at com.coship.core.dal.base.DalScheduleJob.executeInternal(DalScheduleJob.java:24)</span><br><span class="line">	at org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:75)</span><br><span class="line">	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)</span><br><span class="line">	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)</span><br><span class="line">[INFO][2022-05-30 20:18:00,010][base.DalScheduleJob][开始刷新缓存数据]</span><br></pre></td></tr></table></figure>

<p>发现泄漏点存在于DalScheduleJob.isDbOnline()方法内部，查看对应代码记录，发现确实是因为hibernate的session使用之后未关闭导致，在调小数据库连接池大小和接口请求一段时间之后很快复现异常情况。修改代码解决连接溢出。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDbOnline</span><span class="params">()</span></span>&#123;</span><br><span class="line">		</span><br><span class="line">		Session session = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			session = sessionFactory.openSession();</span><br><span class="line">			Criteria criteria = session.createCriteria(Asset.class);</span><br><span class="line">			criteria.add(Restrictions.eq(<span class="string">&quot;resourceCode&quot;</span>, <span class="keyword">new</span> Long(<span class="number">10008</span>)));</span><br><span class="line">			criteria.uniqueResult();</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			logger.error(<span class="string">&quot;刷新缓存前检测数据库连接出错&quot;</span>, e);</span><br><span class="line">		&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">			<span class="comment">//故障点，未关闭连接</span></span><br><span class="line">			<span class="keyword">if</span>(session != <span class="keyword">null</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				session.close();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>后续应用接口请求正常，没有再出现相应情况。</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>C3p0</tag>
        <tag>MySQL</tag>
        <tag>Hibernate</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL数据丢失原因</title>
    <url>/MySQL/blogs/MySQL%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E5%8E%9F%E5%9B%A0/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%B0%E8%B1%A1span"><span id="inline-blue">现象</span></a></li>
<li><a href="#span-idinline-blue%E5%8E%9F%E5%9B%A0span"><span id="inline-blue">原因</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>线上数据使用mysqldump命令导出的脚本，导入本地MySQL数据库，发现重命名后的数据库名称居然将原始数据库删除，导出命令如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>p <span class="comment">--single-transaction  --add-drop-database --databases iepg  &gt; iepg.sql</span></span><br></pre></td></tr></table></figure>
<p>导出后的脚本文件内容如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*!40101 SET NAMES utf8 */</span>;</span><br><span class="line"><span class="comment">/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */</span>;</span><br><span class="line"><span class="comment">/*!40103 SET TIME_ZONE=&#x27;+00:00&#x27; */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE=&#x27;NO_AUTO_VALUE_ON_ZERO&#x27; */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Position to start replication or point-in-time recovery from</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- CHANGE MASTER TO MASTER_LOG_FILE=&#x27;mysql-bin.000114&#x27;, MASTER_LOG_POS=146667627;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Current Database: `iepg`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40000 DROP DATABASE IF EXISTS `iepg`*/</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE <span class="comment">/*!32312 IF NOT EXISTS*/</span> `iepg_xw` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8 */</span>;</span><br><span class="line"></span><br><span class="line">USE `iepg_xw`;</span><br><span class="line"></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Table structure for table `apkupdatedatetimerange`</span></span><br><span class="line"><span class="comment">--</span></span><br></pre></td></tr></table></figure>
<p>将/*!40101 SET NAMES utf8 */放到MySQL控制到执行，发现居然执行成功了。<br><img src="/images/Linux//Linux_MySQL_20220527_001.png" alt="MySQL数据丢失"></p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>/*! MySQL-specific code */ 这种注释是mysql注释中的特殊一种,通过使用叹号在注释中,注释中的代码就会被执行.</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Visio反向生成数据库模型图</title>
    <url>/MySQL/blogs/Visio%E5%8F%8D%E5%90%91%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%9E%8B%E5%9B%BE/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%AE%89%E8%A3%85mysql-odbc%E9%A9%B1%E5%8A%A8span"><span id="inline-blue">安装MySQL ODBC驱动</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90span"><span id="inline-blue">配置数据源</span></a></li>
<li><a href="#span-idinline-bluevisio%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%9E%8B%E5%9B%BEspan"><span id="inline-blue">Visio生成数据库模型图</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="安装mysql-odbc驱动"><span id="inline-blue">安装MySQL ODBC驱动</span></span></h1><p>官网地址: <a href="https://dev.mysql.com/downloads/connector/odbc/5.1.html">https://dev.mysql.com/downloads/connector/odbc/5.1.html</a><br>选择对应操作系统版本,类型安装包下载(msi格式)，下载完按照提示安装。</p>
<h1><span id="配置数据源"><span id="inline-blue">配置数据源</span></span></h1><p>打开 开始菜单-&gt;控制面板-》管理工具-》数据源配置<br>配置详情如下图<br><img src="/images/Windows/MySQL/WM_20220620_001.png" alt="MySQL系统数据源配置01"></p>
<p>数据库连接信息，信息填完之后测试一下连接是否可用，检查参数是否正常。<br><img src="/images/Windows/MySQL/WM_20220620_002.png" alt="MySQL系统数据源配置02"></p>
<h1><span id="visio生成数据库模型图"><span id="inline-blue">Visio生成数据库模型图</span></span></h1><p>创建对应类型visio文件,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_003.png" alt="MySQL系统数据源配置03"></p>
<p>新增数据源,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_004.png" alt="MySQL系统数据源配置04"></p>
<p>选择数据源连接驱动类型,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_005.png" alt="MySQL系统数据源配置05"></p>
<p>数据库连接详情配置,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_006.png" alt="MySQL系统数据源配置06"></p>
<p>校验用户名和密码,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_007.png" alt="MySQL系统数据源配置07"></p>
<p>选择数据库反向导出设置,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_008.png" alt="MySQL系统数据源配置08"></p>
<p>选择需要生成关系的数据库表项,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_009.png" alt="MySQL系统数据源配置09"></p>
<p>导出表项在当前文件生成数据对象,如下图：<br><img src="/images/Windows/MySQL/WM_20220620_010.png" alt="MySQL系统数据源配置10"></p>
<h1><span id="验证"><span id="inline-blue">验证</span></span></h1><p><img src="/images/Windows/MySQL/WM_20220620_011.png" alt="MySQL系统数据源配置11"></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Windows</tag>
        <tag>Visio</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL注册为Windows服务</title>
    <url>/MySQL/blogs/MySQL%E6%B3%A8%E5%86%8C%E4%B8%BAwindows%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8Fspan"><span id="inline-blue">配置环境变量</span></a></li>
<li><a href="#span-idinline-blue%E6%B3%A8%E5%86%8C%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">注册服务</span></a></li>
<li><a href="#span-idinline-blue%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81span"><span id="inline-blue">修改密码</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="配置环境变量"><span id="inline-blue">配置环境变量</span></span></h1><p>新建系统变量名：MySQL_HOME:<br>路径：D:\MySQL5.6\mysql-5.6.41-winx64\mysql-5.6.41-winx64<br><img src="/images/Windows/MySQL/WM_20220523_001.png" alt="MySQL注册服务"></p>
<h1><span id="注册服务"><span id="inline-blue">注册服务</span></span></h1><figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">#<span class="built_in">cd</span>命令进入MySQL bin目录，执行以下命令</span><br><span class="line">#MySQL为注册的服务名称</span><br><span class="line">#--defaults-file参数指定对应启动配置文件</span><br><span class="line">#注意生成的默认密码</span><br><span class="line">mysqld install MySQL --defaults-file=&quot;D:\MySQL5.<span class="number">6</span>\mysql-<span class="number">5</span>.<span class="number">6</span>.<span class="number">41</span>-winx64\mysql-<span class="number">5</span>.<span class="number">6</span>.<span class="number">41</span>-winx64\my-default.ini&quot;</span><br></pre></td></tr></table></figure>

<h1><span id="修改密码"><span id="inline-blue">修改密码</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#方式一</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> password <span class="keyword">for</span> 用户名<span class="variable">@localhost</span> <span class="operator">=</span> password(<span class="string">&#x27;新密码&#x27;</span>);</span><br><span class="line">#方式二</span><br><span class="line">mysql<span class="operator">&gt;</span> mysqladmin <span class="operator">-</span>u用户名 <span class="operator">-</span>p旧密码 password 新密码;</span><br><span class="line">#方式三</span><br><span class="line">mysql<span class="operator">&gt;</span> use mysql;</span><br><span class="line">mysql<span class="operator">&gt;</span> update <span class="keyword">user</span> <span class="keyword">set</span> password<span class="operator">=</span>password(<span class="string">&#x27;123456&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> host<span class="operator">=</span><span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> flush privileges;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo大文件推送github失败</title>
    <url>/Hexo/blogs/Hexo%E5%A4%A7%E6%96%87%E4%BB%B6%E6%8E%A8%E9%80%81Github%E5%A4%B1%E8%B4%A5/</url>
    <content><![CDATA[<h2><span id="问题现象"><span id="inline-blue">问题现象</span></span></h2><p>hexo站点根目录目录下执行hexo d命令报错</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">remote: Resolving deltas: 100% (405/405), done.</span><br><span class="line">    remote: error: GH001: Large files detected. You may want to try Git Large File Storage - https://vanishke.github.com.</span><br><span class="line">    remote: error: Trace: 09c8c1ad5d3478b3692c72197ee5a8c6e76e583e0b76a35add8ac329b445be02</span><br><span class="line">    remote: error: See http://git.io/iEPt8g for more information.</span><br><span class="line">    remote: error: File images/mysql/test.sql is 108.72 MB; this exceeds GitHub’s file size limit of 100.00 MB</span><br></pre></td></tr></table></figure>

<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><p>删除对应位置上的文件，发现部署之后仍然报错，该问题需要清空hexo根目录下.deploy_git文件夹，重新部署成功</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/hexo/github/hexo_github_2022_05_19_001.png" alt="分享"></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo彩色标签云</title>
    <url>/Hexo/blogs/Hexo%E5%BD%A9%E8%89%B2%E6%A0%87%E7%AD%BE%E4%BA%91/</url>
    <content><![CDATA[<h2><span id="彩色标签云"><span id="inline-blue">彩色标签云</span></span></h2><p>在/themes/next/layout/目录下，新增tag-color.swig文件，加入下方代码：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">     var alltags = document.getElementsByClassName(&#x27;tag-cloud-tags&#x27;);</span><br><span class="line">     var tags = alltags[0].getElementsByTagName(&#x27;a&#x27;);</span><br><span class="line">     for (var i = tags.length - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">       var r=Math.floor(Math.random()*75+130);</span><br><span class="line">       var g=Math.floor(Math.random()*75+100);</span><br><span class="line">       var b=Math.floor(Math.random()*75+80);</span><br><span class="line">       tags[i].style.background = &quot;rgb(&quot;+r+&quot;,&quot;+g+&quot;,&quot;+b+&quot;)&quot;;</span><br><span class="line">     &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span>&#123;</span><br><span class="line">    <span class="comment">/*font-family: Helvetica, Tahoma, Arial;*/</span></span><br><span class="line">    <span class="comment">/*font-weight: 100;*/</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">counter-reset</span>: tags;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">5px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span>:before&#123;</span><br><span class="line">    content: <span class="string">&quot;?&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.tag-cloud-tags</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">     <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">5px</span> <span class="number">15px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">4</span>);</span><br><span class="line">     <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">     <span class="comment">/*box-shadow: 10px 10px 15px 2px rgba(0,0,0,.12), 0 0 6px 0 rgba(104, 104, 105, 0.1);*/</span></span><br><span class="line">     <span class="attribute">transition-duration</span>: <span class="number">0.15s</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>在/themes/next/layout/page.swig/中引入tag-color.swig：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">在下方加上 &#123;% include &#x27;tag-color.swig&#x27; %&#125; 代码</span><br><span class="line">&lt;div class=&quot;tag-cloud&quot;&gt;</span><br><span class="line">          &lt;!--    &lt;div class=&quot;tag-cloud-title&quot;&gt;</span><br><span class="line">                &#123;&#123; _p(&#x27;counter.tag_cloud&#x27;, site.tags.length) &#125;&#125;</span><br><span class="line">            &lt;/<span class="selector-tag">div</span>&gt;  --&gt;</span><br><span class="line">             &lt;div class=&quot;tag-cloud-tags&quot; id=&quot;tags&quot;&gt;</span><br><span class="line">			  &#123;&#123; tagcloud(&#123;min_font: <span class="number">16</span>, max_font: <span class="number">16</span>, amount: <span class="number">300</span>, color: true, start_color: <span class="string">&#x27;#FFF&#x27;</span>, end_color: <span class="string">&#x27;#FFF&#x27;</span>&#125;) &#125;&#125;            </span><br><span class="line">		  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">		&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">     &#123;% include &#x27;tag-color.swig&#x27; %&#125;	</span><br></pre></td></tr></table></figure>
<p>或者将上方代码直接添加到下方</p>
<h2><span id="将标签云放到首页"><span id="inline-blue">将标签云放到首页</span></span></h2><p>在路径：/themes/next/layout/index.swig 中</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;% block <span class="attribute">content</span> %&#125;下面添加下方代码</span><br><span class="line">&#123;% block <span class="attribute">content</span> %&#125;</span><br><span class="line"></span><br><span class="line">	&lt;div class=&quot;tag-cloud&quot;&gt;</span><br><span class="line">	  &lt;div class=&quot;tag-cloud-tags&quot; id=&quot;tags&quot;&gt;</span><br><span class="line">		&#123;&#123; tagcloud(&#123;min_font: <span class="number">16</span>, max_font: <span class="number">16</span>, amount: <span class="number">300</span>, color: true, start_color: <span class="string">&#x27;#fff&#x27;</span>, end_color: <span class="string">&#x27;#fff&#x27;</span>&#125;) &#125;&#125;</span><br><span class="line">	  &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">	&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">	&lt;br&gt;</span><br><span class="line">&#123;% include &#x27;tag-color.swig&#x27; %&#125;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo修改加载特效</title>
    <url>/Hexo/blogs/Hexo%E4%BF%AE%E6%94%B9%E5%8A%A0%E8%BD%BD%E7%89%B9%E6%95%88/</url>
    <content><![CDATA[<h2><span id="修改加载特效"><span id="inline-blue">修改加载特效</span></span></h2><p>搜索pace，找到如下代码：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 页面顶部加载条</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Progress bar <span class="keyword">in</span> the top during page loading.</span></span><br><span class="line">pace: true</span><br><span class="line"><span class="meta">#</span><span class="bash"> Themes list:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-big-counter</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-bounce</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-barber-shop</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-atom</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-circle</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-radar</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-center-simple</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-corner-indicator</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-fill-left</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-flash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-loading-bar</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-mac-osx</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pace-theme-minimal</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> For example</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pace_theme: pace-theme-center-simple</span></span><br><span class="line">pace_theme: pace-theme-minimal  #默认设置，可以修改为上述任何一个</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo修改[read more]按钮样式</title>
    <url>/Hexo/blogs/Hexo%E4%BF%AE%E6%94%B9%5Bread%20more%5D%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><p>修改themes\next\source\css_custom\custom.styl文件，加入自定义样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">// <span class="selector-attr">[Read More]</span>按钮样式</span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">transition-property</span>: unset;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.post-button</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.35</span>);</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#a166ab</span> <span class="number">0%</span>, <span class="number">#ef4e7b</span> <span class="number">25%</span>, <span class="number">#f37055</span> <span class="number">50%</span>, <span class="number">#ef4e7b</span> <span class="number">75%</span>, <span class="number">#a166ab</span> <span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>










]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo头像设置</title>
    <url>/Hexo/blogs/Hexo%E5%A4%B4%E5%83%8F%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h2><span id="hexo头像设置"><span id="inline-blue">hexo头像设置</span></span></h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"># 修改themes\next\source\css\_common\components\sidebar\sidebar-author<span class="selector-class">.styl</span>,新增以下代码:</span><br><span class="line">.site-author-image &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: $site-author-image-padding;</span><br><span class="line">  <span class="attribute">max-width</span>: $site-author-image-width;</span><br><span class="line">  <span class="attribute">height</span>: $site-author-image-height;</span><br><span class="line">  <span class="attribute">border</span>: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line">  //设置圆形</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span> all;</span><br><span class="line">&#125;</span><br><span class="line">   //旋转</span><br><span class="line"> <span class="selector-class">.site-author-image</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">   <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2><span id="添加头像"><span id="inline-blue">添加头像</span></span></h2><p>打开themes/next下的_config.yml文件，搜索 Sidebar Avatar关键字，去掉avatar前面的#</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line"># in theme directory(source/images): /images/avatar.jpg</span><br><span class="line"># in site  <span class="built_in">directory</span>(source/uploads): /uploads/avatar.jpg</span><br><span class="line">avatar: /images/avatar.png</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo文章添加样式</title>
    <url>/Hexo/blogs/Hexo%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="标题添加背景色"><span id="inline-blue">标题添加背景色</span></span></h2><p>打开themes/next/source/css/_custom 下的 custom.styl 文件,添加属性样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 颜色块-黄</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-yellow</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#f0ad4e</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 颜色块-绿</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-green</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 颜色块-蓝</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-blue</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#2780e3</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 颜色块-紫</span><br><span class="line"><span class="selector-tag">span</span><span class="selector-id">#inline-purple</span> &#123;</span><br><span class="line"><span class="attribute">display</span>:inline;</span><br><span class="line"><span class="attribute">padding</span>:.<span class="number">2em</span> .<span class="number">6em</span> .<span class="number">3em</span>;</span><br><span class="line"><span class="attribute">font-size</span>:<span class="number">80%</span>;</span><br><span class="line"><span class="attribute">font-weight</span>:bold;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line"><span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">white-space</span>:nowrap;</span><br><span class="line"><span class="attribute">vertical-align</span>:baseline;</span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">background-color</span>: <span class="number">#9954bb</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在你需要编辑的文章地方。放置如下代码</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;span id=&quot;inline-blue&quot;&gt; 站点配置文件 &lt;/span&gt;</span><br><span class="line">&lt;span id=&quot;inline-purple&quot;&gt; 主题配置文件 &lt;/span&gt;</span><br><span class="line">&lt;span id=&quot;inline-yellow&quot;&gt; 站点配置文件 &lt;/span&gt;</span><br><span class="line">&lt;span id=&quot;inline-green&quot;&gt; 主题配置文件 &lt;/span&gt;</span><br></pre></td></tr></table></figure>






]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo新建404</title>
    <url>/Hexo/blogs/Hexo%E6%96%B0%E5%BB%BA404/</url>
    <content><![CDATA[<h2><span id="新建404"><span id="inline-blue">新建404</span></span></h2><p>在站点根目录下,输入 hexo new page 404,默认在Hexo 站点下/source/404/index.md<br>打开新建的404界面，在顶部插入一行，写上permalink: /404，这表示指定该页固定链接为 http://“主页”/404.html</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">permalink: /404</span><br><span class="line">---</span><br><span class="line">title: #404 Not Found：该页无法显示</span><br><span class="line">date: 2017-09-06 15:37:18</span><br><span class="line">comments: false</span><br><span class="line">permalink: /404</span><br><span class="line">---</span><br></pre></td></tr></table></figure>









]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo文章添加阴影效果</title>
    <url>/Hexo/blogs/Hexo%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E9%98%B4%E5%BD%B1%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<h2><span id="文章添加阴影效果"><span id="inline-blue">文章添加阴影效果</span></span></h2><p>打开themes/next/source/css/_custom/custom.styl文件添加:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">  -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>










]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo统计功能</title>
    <url>/Hexo/blogs/Hexo%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure>

<p>修改themes/next/_config.yml主题配置文件，搜索关键字post_wordcount,修改如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">post_wordcount:</span><br><span class="line">  item_text: true</span><br><span class="line">  wordcount: true #单篇文章字数</span><br><span class="line">  min2read: true #单篇阅读时长</span><br><span class="line">  totalcount: true #站点总字数</span><br><span class="line">  separated_meta: true</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo文章置顶功能</title>
    <url>/Hexo/blogs/Hexo%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="移除默认安装的插件"><span id="inline-blue">移除默认安装的插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br></pre></td></tr></table></figure>

<h2><span id="安装新插件"><span id="inline-blue">安装新插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure>

<h2><span id="置顶操作"><span id="inline-blue">置顶操作</span></span></h2><p>文章开头分割部分添加</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">top: true</span><br></pre></td></tr></table></figure>
<p>多篇文章置顶，控制顺序，数值较大的排在前面</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">top:n</span><br></pre></td></tr></table></figure>

<h2><span id="设置置顶图标"><span id="inline-blue">设置置顶图标</span></span></h2><p>打开 /themes/next/layout/_macro/post.swig文件，在&lt;div class=&quot;post-meta&quot;&gt;下方，插入如下代码：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">    &amp;lt;i class=&amp;quot;fa fa-thumb-tack&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;</span><br><span class="line">    &amp;lt;font color=7D26CD&amp;gt;置顶&amp;lt;/font&amp;gt;</span><br><span class="line">   &amp;lt;span class=&amp;quot;post-meta-divider&amp;quot;&amp;gt;|&amp;lt;/span&amp;gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>如下图所示位置：</p>
<p><img src="/images/hexo/next/hexo_next_2021_01_10_002.png" alt="hexo文章置顶图标"></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo安装本地搜索功能</title>
    <url>/Hexo/blogs/Hexo%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>



<h2><span id="新增配置"><span id="inline-blue">新增配置</span></span></h2><p>修改hexo/_config.yml站点配置文件，新增以下内容到任意位置：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">path: search.xml</span><br><span class="line">field: post</span><br><span class="line">format: html</span><br><span class="line">limit: 10000</span><br></pre></td></tr></table></figure>

<h2><span id="修改主题配置文件开启本地搜索功能"><span id="inline-blue">修改主题配置文件，开启本地搜索功能</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Local search</span></span><br><span class="line">local_search:</span><br><span class="line">enable: true  </span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo安装渲染引擎</title>
    <url>/Hexo/blogs/Hexo%E5%AE%89%E8%A3%85%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/</url>
    <content><![CDATA[<h2><span id="卸载默认引擎"><span id="inline-blue">卸载默认引擎</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked –save</span><br></pre></td></tr></table></figure>



<h2><span id="安装新渲染引擎和katex引擎"><span id="inline-blue">安装新渲染引擎和katex引擎</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-markdown-it --save</span><br><span class="line">npm install markdown-it-katex --save</span><br></pre></td></tr></table></figure>

<h2><span id="引擎设置"><span id="inline-blue">引擎设置</span></span></h2><p>修改hexo根目录下_config.xml</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Markdown-it config</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki/</span></span></span><br><span class="line">markdown:</span><br><span class="line">  render:</span><br><span class="line">    html: true</span><br><span class="line">    xhtmlOut: false</span><br><span class="line">    breaks: true</span><br><span class="line">    linkify: true</span><br><span class="line">    typographer: true</span><br><span class="line">    quotes: &#x27;“”‘’&#x27;</span><br><span class="line">  plugins:</span><br><span class="line">  anchors:</span><br><span class="line">    level: 2</span><br><span class="line">    collisionSuffix: &#x27;&#x27;</span><br><span class="line"></span><br><span class="line">math:</span><br><span class="line">  engine: &#x27;katex&#x27;   </span><br><span class="line">  katex:</span><br><span class="line">    css: https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css</span><br><span class="line">    js: https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js</span><br><span class="line">    config:</span><br><span class="line">      # KaTeX config</span><br><span class="line">      throwOnError: false</span><br><span class="line">      errorColor: &quot;#cc0000&quot;   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="开启next主题math支持"><span id="inline-blue">开启NexT主题math支持</span></span></h2><p>修改next主题下_config.xml</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Math Formulas Render Support</span></span><br><span class="line">math:</span><br><span class="line"><span class="meta">  #</span><span class="bash"> Default (<span class="literal">true</span>) will load mathjax / katex script on demand.</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> That is it only render those page <span class="built_in">which</span> has `mathjax: <span class="literal">true</span>` <span class="keyword">in</span> Front-matter.</span></span><br><span class="line"><span class="meta">  #</span><span class="bash"> If you <span class="built_in">set</span> it to <span class="literal">false</span>, it will load mathjax / katex srcipt EVERY PAGE.</span></span><br><span class="line">  per_page: true</span><br><span class="line"></span><br><span class="line"><span class="meta">  #</span><span class="bash"> hexo-renderer-pandoc (or hexo-renderer-kramed) required <span class="keyword">for</span> full MathJax support.</span></span><br><span class="line">  mathjax:</span><br><span class="line">    enable: false</span><br><span class="line">    # See: https://mhchem.github.io/MathJax-mhchem/</span><br><span class="line">    mhchem: false</span><br><span class="line"></span><br><span class="line"><span class="meta">  #</span><span class="bash"> hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin) required <span class="keyword">for</span> full Katex support.</span></span><br><span class="line">  katex:</span><br><span class="line">    enable: true</span><br><span class="line">    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span><br><span class="line">    copy_tex: false</span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo安装Next问题</title>
    <url>/Hexo/blogs/Hexo%E5%AE%89%E8%A3%85Next%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2><span id="问题描述"><span id="inline-blue">问题描述</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Cloning into &#x27;themes/next&#x27;...</span><br><span class="line">remote: Enumerating objects: 12037, done.</span><br><span class="line">error: RPC failed; curl 18 transfer closed with outstanding read data remaining</span><br><span class="line">error: 1285 bytes of body are still expected</span><br><span class="line">fetch-pack: unexpected disconnect while reading sideband packet</span><br><span class="line">fatal: early EOF</span><br><span class="line">fatal: index-pack failed</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="问题原因"><span id="inline-blue">问题原因</span></span></h2><p>curl的postBuffer的默认值太小，我们需要调整它的大小，在终端重新配置大小</p>
<h2><span id="解决办法"><span id="inline-blue">解决办法</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --global http.postBuffer 524288000  //设置为500M</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看参数配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --list</span></span><br><span class="line">diff.astextplain.textconv=astextplain</span><br><span class="line">filter.lfs.clean=git-lfs clean -- %f</span><br><span class="line">filter.lfs.smudge=git-lfs smudge -- %f</span><br><span class="line">filter.lfs.process=git-lfs filter-process</span><br><span class="line">filter.lfs.required=true</span><br><span class="line">http.sslbackend=openssl</span><br><span class="line">http.sslcainfo=D:/Git/mingw64/ssl/certs/ca-bundle.crt</span><br><span class="line">core.autocrlf=true</span><br><span class="line">core.fscache=true</span><br><span class="line">core.symlinks=false</span><br><span class="line">pull.rebase=false</span><br><span class="line">credential.helper=manager-core</span><br><span class="line">credential.https://dev.azure.com.usehttppath=true</span><br><span class="line">init.defaultbranch=master</span><br><span class="line">user.name=vanishke</span><br><span class="line">user.email=18685129726@163.com</span><br><span class="line">http.postbuffer=524288000</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo安装GitHub插件</title>
    <url>/Hexo/blogs/Hexo%E5%AE%89%E8%A3%85GitHub%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="上传配置"><span id="inline-blue">上传配置</span></span></h2><p>hexo配置和文件文件添加如下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/userName/repoName.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>



<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><p>安装GitHub部署插件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<h2><span id="测试部署"><span id="inline-blue">测试部署</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo d   </span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Vsftpd同时监听ipv4和ipv6</title>
    <url>/FTP/blogs/Vsftpd%E5%90%8C%E6%97%B6%E7%9B%91%E5%90%ACipv4%E5%92%8Cipv6/</url>
    <content><![CDATA[<h2><span id="vsftpd配置文件说明"><span id="inline-blue">vsftpd配置文件说明</span></span></h2><p>文件名称：vsftpd.conf<br>文件路径：/etc/vsftpd/vsftpd.conf<br>配置说明：<br>不监听ipv6<br>listen_ipv6=NO<br>监听ipv4<br>listen_ipv4=YES<br>listen_ipv6和listen_ipv4配置项不能同时启用，需要配置两份配置文件vsftpd.conf和vsftpd_ipv6.conf(直接拷贝一份vsftpd.conf并改名,修改对应配置项放在同级目录即可)</p>
<p>vsftpd.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#不监听ipv6</span></span></span><br><span class="line">listen_ipv6=NO</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#监听ipv4</span></span></span><br><span class="line">listen_ipv4=YES</span><br></pre></td></tr></table></figure>
<p>vsftpd_ipv6.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#监听ipv6</span></span></span><br><span class="line">listen_ipv6=YES</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#不监听ipv4</span></span></span><br><span class="line">listen_ipv4=NO</span><br></pre></td></tr></table></figure>
<h2><span id="重启vsftpd服务"><span id="inline-blue">重启vsftpd服务</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN vsftpd]# service vsftpd restart</span><br><span class="line">关闭 vsftpd：                                              [确定]</span><br><span class="line">为 vsftpd 启动 vsftpd：                                    [确定]</span><br><span class="line">为 vsftpd_ipv6 启动 vsftpd：                               [确定]</span><br></pre></td></tr></table></figure>
<h2><span id="ipv4格式"><span id="inline-blue">ipv4格式</span></span></h2><p><a href="ftp://oracle:oracle@10.9.216.12/">ftp://oracle:oracle@10.9.216.12:21</a><br><img src="/images/linux/LF_20220422_001.png" alt="ipv4格式访问"></p>
<h2><span id="ipv6格式"><span id="inline-blue">ipv6格式</span></span></h2><p>ipv6格式访问xftp需要xftp5版本支持<br><a href="ftp://oracle:oracle@[10:9:216::12]/">ftp://oracle:oracle@[10:9:216::12]:21</a><br><img src="/images/linux/LF_20220422_002.png" alt="ipv6格式访问"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>FTP</tag>
        <tag>Vsftpd</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL导入报错解决</title>
    <url>/MySQL/blogs/MySQL%E5%AF%BC%E5%85%A5%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p><img src="/images/mysql/mysql_20211022_001.png" alt="导入报错"></p>
<h1><span id="原因"><span id="inline-blue">原因</span></span></h1><p>脚本内容如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">01</span>_create_table_squence.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">02</span>_create_table_operate.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">03</span>_create_table_sysinit.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">04</span>_init_data.sql;</span><br><span class="line">source .<span class="operator">/</span><span class="keyword">sql</span><span class="operator">/</span><span class="number">05</span>_urm_data.sql;</span><br></pre></td></tr></table></figure>
<p>source 命令将分号作为文件名称解析导致导入报错，调整后导入正常</p>
<p>source命令记录<br>导入脚本所在路径与执行脚本位置在同一路径(绝对路径和相对路径均可，引用正确即可)<br>source命令后不可有分号，否则导入失败</p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL存储过程</title>
    <url>/MySQL/blogs/MySQL%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<h2><span id="存储过程"><span id="inline-blue">存储过程</span></span></h2><p>存储过程使用游标清理过期布局数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Navicat MySQL Data Transfer</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Source Server         : 10.9.216.12</span></span><br><span class="line"><span class="comment">Source Server Version : 50560</span></span><br><span class="line"><span class="comment">Source Host           : 10.9.216.12:3306</span></span><br><span class="line"><span class="comment">Source Database       : nanjing_iepg</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Target Server Type    : MYSQL</span></span><br><span class="line"><span class="comment">Target Server Version : 50599</span></span><br><span class="line"><span class="comment">File Encoding         : 65001</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Date: 2022-04-12 09:59:53</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Procedure structure for `clearPubCell`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> IF <span class="keyword">EXISTS</span> `clearPubCell`;</span><br><span class="line">DELIMITER ;;</span><br><span class="line"><span class="keyword">CREATE</span> DEFINER<span class="operator">=</span>`root`@`<span class="operator">%</span>` <span class="keyword">PROCEDURE</span> `clearPubCell`()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">		<span class="comment">/* 存储过程使用游标清理过期发布布局Plan</span></span><br><span class="line"><span class="comment">		*	pubareaversion表同一area和version条件下只保留两个最新发布布局</span></span><br><span class="line"><span class="comment">		*	借助临时表暂存需要清理的布局planId(解决由于select查询结果为空导致游标异常退出)</span></span><br><span class="line"><span class="comment">		*	通过查询出的planId清理pubareaversion、pubcell</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">/*  游标异常停止标识  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_clear_stop_flag <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">		<span class="comment">/* 区域码  */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_areaCode <span class="type">VARCHAR</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;</span><br><span class="line">		<span class="comment">/* 版本信息 */</span></span><br><span class="line">	  <span class="keyword">DECLARE</span> v_version <span class="type">VARCHAR</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>;</span><br><span class="line">		<span class="comment">/* 任务完成标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_done <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="literal">FALSE</span> ; </span><br><span class="line">		<span class="comment">/*  定义游标 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> out_cursor <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> (<span class="keyword">SELECT</span> <span class="keyword">distinct</span> areaCode,version <span class="keyword">FROM</span> pubareaversion);</span><br><span class="line">		<span class="comment">/* 循环结束标识 */</span></span><br><span class="line">		<span class="keyword">DECLARE</span> CONTINUE HANDLER <span class="keyword">FOR</span> <span class="keyword">NOT</span> FOUND <span class="keyword">SET</span> out_done <span class="operator">=</span> <span class="literal">TRUE</span> ; </span><br><span class="line">		<span class="comment">/* 创建临时表  记录需要清理的布局planId*/</span></span><br><span class="line">		<span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> temp_planId;</span><br><span class="line">		 <span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> temp_planId </span><br><span class="line">			(</span><br><span class="line">			 planId <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span></span><br><span class="line">			);</span><br><span class="line">		<span class="comment">/* 遍历游标 */</span></span><br><span class="line">		<span class="keyword">OPEN</span> out_cursor ; </span><br><span class="line">		WHILE <span class="keyword">NOT</span> out_done DO </span><br><span class="line">				<span class="keyword">FETCH</span> out_cursor <span class="keyword">INTO</span> v_areaCode,v_version; </span><br><span class="line">				IF <span class="keyword">NOT</span> out_done <span class="keyword">THEN</span> 	</span><br><span class="line">						REPLACE <span class="keyword">INTO</span> temp_planId</span><br><span class="line">						<span class="keyword">SELECT</span> planId</span><br><span class="line">						<span class="keyword">FROM</span> pubareaversion</span><br><span class="line">						<span class="keyword">WHERE</span> areaCode <span class="operator">=</span> v_areaCode</span><br><span class="line">						<span class="keyword">AND</span> version <span class="operator">=</span> v_version </span><br><span class="line">						<span class="keyword">ORDER</span> <span class="keyword">BY</span> updateTime</span><br><span class="line">						<span class="keyword">DESC</span> </span><br><span class="line">						LIMIT <span class="number">2</span>,<span class="number">2000</span>; <span class="comment">/* 查询从第二条记录开始的2000记录，发布布局超出2000的情况下需要做修改(limit 2,-1 这种语言高级版本MySQL已修复 ,-1表示无穷) */</span></span><br><span class="line">				<span class="keyword">END</span> IF; </span><br><span class="line">		<span class="keyword">END</span> WHILE; </span><br><span class="line">		<span class="keyword">CLOSE</span> out_cursor ;</span><br><span class="line">		<span class="comment">/* 清理pubcell、pubareaversion对应记录 */</span></span><br><span class="line">		<span class="keyword">DELETE</span> <span class="keyword">FROM</span> pubcell <span class="keyword">where</span> pubcell.planId <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> planId <span class="keyword">from</span> temp_planId );</span><br><span class="line">		<span class="keyword">DELETE</span> <span class="keyword">FROM</span> pubareaversion <span class="keyword">where</span> pubareaversion.planId <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> planId <span class="keyword">from</span> temp_planId );</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a id="download" href="/images/mysql/test.sql"><i class="fa fa-download"></i><span>测试数据脚本</span> </a></p>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows环境下FTP常用命令</title>
    <url>/FTP/blogs/Windows%E7%8E%AF%E5%A2%83%E4%B8%8BFTP%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blueftp%E7%99%BB%E9%99%86span"><span id="inline-blue">FTP登陆</span></a></li>
<li><a href="#span-idinline-blue%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6span"><span id="inline-blue">上传文件</span></a><ul>
<li><a href="#span-idinline-blue%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0span"><span id="inline-blue">单个文件上传</span></a></li>
<li><a href="#span-idinline-blue%E6%89%B9%E9%87%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0span"><span id="inline-blue">批量文件上传</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6span"><span id="inline-blue">下载文件</span></a><ul>
<li><a href="#span-idinline-blue%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">单个文件下载</span></a></li>
<li><a href="#span-idinline-blue%E6%89%B9%E9%87%8F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">批量文件下载</span></a></li>
</ul>
</li>
<li><a href="#span-idinline-blue%E5%88%87%E6%8D%A2%E7%9B%AE%E5%BD%95span"><span id="inline-blue">切换目录</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">查看目录信息</span></a></li>
<li><a href="#span-idinline-blue%E6%8C%87%E5%AE%9A%E6%9C%AC%E5%9C%B0%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95span"><span id="inline-blue">指定本地工作目录</span></a></li>
<li><a href="#span-idinline-blue%E8%BF%9E%E6%8E%A5%E5%92%8C%E5%85%B3%E9%97%AD%E5%91%BD%E4%BB%A4span"><span id="inline-blue">连接和关闭命令</span></a></li>
<li><a href="#span-idinline-blue%E9%80%80%E5%87%BAftp%E5%91%BD%E4%BB%A4span"><span id="inline-blue">退出FTP命令</span></a></li>
<li><a href="#span-idinline-blueftp%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AFspan"><span id="inline-blue">FTP命令帮助信息</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="ftp登陆"><span id="inline-blue">FTP登陆</span></span></h2><p>FTP地址:10.9.212.55<br>FTP用户名:report_cd<br>FTP密码:report_cd</p>
<p>用于上传和下载的本地工作目录:E:\program</p>
<p>运行命令行工具cmd.exe(C:\Windows\System32\cmd.exe)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">切换目录为本地工作目录(先切盘符，再<span class="built_in">cd</span>到具体路径)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">e:</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"><span class="built_in">cd</span> program</span></span><br><span class="line"><span class="meta">#</span><span class="bash">FTP登陆 IP地址或域名</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ftp 10.9.212.55</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_001.png" alt="FTP登陆"></p>
<h2><span id="上传文件"><span id="inline-blue">上传文件</span></span></h2><h3><span id="单个文件上传"><span id="inline-blue">单个文件上传</span></span></h3><p>put命令或send均可实现单个文件上传</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> put 11479.jpg</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> send 11481.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_002.png" alt="FTP上传"><br><img src="/images/Windows/FTP/WF_20220315_003.png" alt="FTP上传"></p>
<h3><span id="批量文件上传"><span id="inline-blue">批量文件上传</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将批量上传用户提示关闭(prompt命令自动切换用户提示状态)</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> prompt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">支持通配符格式</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">mput *.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_004.png" alt="FTP上传"></p>
<h2><span id="下载文件"><span id="inline-blue">下载文件</span></span></h2><h3><span id="单个文件下载"><span id="inline-blue">单个文件下载</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> get 101614000t5m.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_005.png" alt="FTP下载"></p>
<h3><span id="批量文件下载"><span id="inline-blue">批量文件下载</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"> mget *.jpg</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_006.png" alt="FTP下载"></p>
<h2><span id="切换目录"><span id="inline-blue">切换目录</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">directory为对应的目录名称</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash"><span class="built_in">cd</span> directory</span></span><br></pre></td></tr></table></figure>

<h2><span id="查看目录信息"><span id="inline-blue">查看目录信息</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash">ls</span></span><br></pre></td></tr></table></figure>
<h2><span id="指定本地工作目录"><span id="inline-blue">指定本地工作目录</span></span></h2><p>lcd命令可指定FTP用户的本地工作目录(上传和下载的文件均放置在这个目录)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">本地工作目录为绝对路径</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">lcd E:\program</span></span><br></pre></td></tr></table></figure>
<h2><span id="连接和关闭命令"><span id="inline-blue">连接和关闭命令</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打开连接</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">open 10.9.212.55</span></span><br><span class="line"><span class="meta">#</span><span class="bash">关闭连接</span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">close 10.9.212.55</span></span><br></pre></td></tr></table></figure>

<h2><span id="退出ftp命令"><span id="inline-blue">退出FTP命令</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"><span class="built_in">bye</span></span></span><br><span class="line"><span class="meta">ftp&gt;</span><span class="bash">quit</span></span><br></pre></td></tr></table></figure>

<h2><span id="ftp命令帮助信息"><span id="inline-blue">FTP命令帮助信息</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">ftp&gt;</span><span class="bash"><span class="built_in">help</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/images/Windows/FTP/WF_20220315_007.png" alt="FTP命令帮助信息"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>FTP</tag>
      </tags>
  </entry>
  <entry>
    <title>Easyui-tree三级区域树回显</title>
    <url>/Easyui/blogs/Easyui-tree%E4%B8%89%E7%BA%A7%E5%8C%BA%E5%9F%9F%E6%A0%91%E5%9B%9E%E6%98%BE/</url>
    <content><![CDATA[<h2><span id="多层级区域树加载"><span id="inline-blue">多层级区域树加载</span></span></h2><h3><span id="树的数据格式tree-data-format">树的数据格式（Tree Data Format）</span></h3><p>每个节点可以包括下列属性：</p>
<ul>
<li>id：节点的 id，它对于加载远程数据很重要。</li>
<li>text：要显示的节点文本。</li>
<li>state：节点状态，’open’ 或 ‘closed’，默认是 ‘open’。当设置为 ‘closed’ 时，该节点有子节点，并且将从远程站点加载它们。</li>
<li>checked：指示节点是否被选中。</li>
<li>attributes：给一个节点添加的自定义属性。</li>
<li>children：定义了一些子节点的节点数组。</li>
</ul>
<p>接口返回tree初始化数据json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">	<span class="attr">&quot;select&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">&quot;children&quot;</span>: [&#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1175</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;区域测试(10110)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;open&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1172</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;区域测试2(11111)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;open&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1135</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;无锡市(0510)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1129</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;马鞍山市(0555)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1117</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;泰州市(0523)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1111</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;镇江市(0511)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1103</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;淮安市(0517)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1098</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;扬州市(0514)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1093</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;宿迁市(0527)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1085</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;默认布局(0000)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;open&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1080</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;常州市(0519)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1071</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;盐城市(0515)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1065</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;南通市(0513)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1059</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;连云港市(0518)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1057</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;徐州市(0516)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		<span class="attr">&quot;id&quot;</span>: <span class="number">1048</span>,</span><br><span class="line">		<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;南京市(025)&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;state&quot;</span>: <span class="string">&quot;closed&quot;</span></span><br><span class="line">	&#125;],</span><br><span class="line">	<span class="attr">&quot;id&quot;</span>: <span class="string">&quot;-1&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;根区域(-1)&quot;</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>选择三层叶子结点，返回回显指定区域加载异常，提示错误信息如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">jquery-1.8.3.min.js:2 Uncaught TypeError: Cannot read property &#39;target&#39; of null</span><br><span class="line">    at doSelectAppoint (listpage?areaId&#x3D;1147:2453)</span><br><span class="line">    at Object.success (listpage?areaId&#x3D;1147:2088)</span><br><span class="line">    at l (jquery-1.8.3.min.js:2)</span><br><span class="line">    at Object.fireWith [as resolveWith] (jquery-1.8.3.min.js:2)</span><br><span class="line">    at T (jquery-1.8.3.min.js:2)</span><br><span class="line">    at r (jquery-1.8.3.min.js:2)</span><br><span class="line">    at Object.send (jquery-1.8.3.min.js:2)</span><br><span class="line">    at Function.ajax (jquery-1.8.3.min.js:2)</span><br><span class="line">    at expandArea (listpage?areaId&#x3D;1147:2060)</span><br><span class="line">    at HTMLUListElement.onLoadSuccess (listpage?areaId&#x3D;1147:1922)</span><br></pre></td></tr></table></figure>

<h4><span id="原因分析">原因分析</span></h4><p>初始化区域数据默认只给到二级节点，三级叶子节点未生成，导致调用异常，后面通过tree对应官方api文档里面append方法递归生成对应父节点集合的叶子结点，发现在叶子节点为多节点情况下递归调用发生死循环导致页面加载页面。</p>
<h4><span id="解决方案">解决方案</span></h4><p>后台提供findById()方法，返回对应节点父节点集合，通过递归从二级节点开始加载对应的子节点集合，生成节点方法改为expandAll(),从二级节点一直加载到其对应的叶子节点，判断当前回显的叶子节点是否选中。</p>
<p>findById方法返回数据如下显示</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;id&quot;</span>: <span class="number">1147</span>,</span><br><span class="line">	<span class="attr">&quot;createTime&quot;</span>: <span class="string">&quot;2020-11-25 14:36:24&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;lastUpdateTime&quot;</span>: <span class="string">&quot;2021-01-05 01:27:12&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;lastUpdateTimeStart&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;lastUpdateTimeEnd&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;createTimeStart&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;createTimeEnd&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;idList&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;queryGroupId&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;queryGroupIds&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;notCompareId&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;areaName&quot;</span>: <span class="string">&quot;江苏省公安厅视频会议&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;areaCode&quot;</span>: <span class="string">&quot;100000000296&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;remark&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;pubState&quot;</span>: <span class="string">&quot;online&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;relateState&quot;</span>: <span class="string">&quot;online&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;parentId&quot;</span>: <span class="number">1143</span>,</span><br><span class="line">	<span class="attr">&quot;codeList&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;locateNameList&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;isLeaf&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;江苏省公安厅视频会议(100000000296)&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;state&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;right&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;search&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">	<span class="attr">&quot;parentIds&quot;</span>: <span class="string">&quot;1147,1143,1048,-1&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>parentIds:返回当前选中节点的父节点集合（包括自身）。</p>
<h4><span id="加载实现">加载实现</span></h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 区域树初始化加载</span></span><br><span class="line">onLoadSuccess:<span class="function"><span class="keyword">function</span>(<span class="params">node,data</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(areaId!=<span class="string">&quot;&quot;</span> &amp;&amp; areaId!=<span class="literal">null</span>)&#123;</span><br><span class="line">				</span><br><span class="line">				expandArea(areaId);</span><br><span class="line">                <span class="comment">//doSelectAppoint(areaId);</span></span><br><span class="line">                <span class="comment">//setTimeout(doSelectAppoint(areaId),2000);</span></span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">var</span> nodeThis=$(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;find&#x27;</span>,cId);</span><br><span class="line">				<span class="keyword">if</span>(nodeThis==<span class="string">&quot;&quot;</span>||nodeThis==<span class="literal">undefined</span>)&#123;<span class="comment">//节点找不到的情况下默认根节点</span></span><br><span class="line">					cId=-<span class="number">1</span>;</span><br><span class="line">					nodeThis=$(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;find&#x27;</span>,-<span class="number">1</span>)</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(nodeThis == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">var</span> first = $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;getChildren&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">                    $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;select&#x27;</span>,first.target);</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;select&#x27;</span>,nodeThis.target);</span><br><span class="line">                &#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//setTimeout(function()&#123;doRight(node,data);&#125;, 500);</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//节点递归加载实现</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * easyui-tree 区域树回显实现</span></span><br><span class="line"><span class="comment"> * 默认异常情况下显示根节点</span></span><br><span class="line"><span class="comment"> * 借助parentIds父节点记录集合，currentNode、parentNode实现自动扩展加载三层叶子结点</span></span><br><span class="line"><span class="comment"> * expandAll 扩展当前节点下的所有叶子节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">expandArea</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = globalWebAppURL+<span class="string">&quot;/manager/area/findById?id=&quot;</span>+areaId;</span><br><span class="line">    <span class="keyword">var</span> parentNode = <span class="literal">null</span>;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        url: url,</span><br><span class="line">        <span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> fatherId = data.parentId;</span><br><span class="line">            <span class="keyword">if</span>(fatherId)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="keyword">var</span> parentIds =<span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    			<span class="keyword">if</span>(data.parentIds != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">    				parentIds = data.parentIds.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    			&#125;</span><br><span class="line">    			<span class="comment">//父节点记录集合升序排序，目的是初始化区域树按照原有顺序加载</span></span><br><span class="line">				parentIds.sort(compare);</span><br><span class="line">				<span class="keyword">var</span> len=parentIds.length;</span><br><span class="line">                <span class="comment">//从二层节点开始</span></span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">var</span> index = <span class="number">1</span>;index&lt;len; index++) </span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">var</span> currentNode = $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;find&#x27;</span>,parentIds[index]);</span><br><span class="line">                      <span class="comment">//父节点为空</span></span><br><span class="line">					<span class="keyword">if</span> (currentNode == <span class="literal">null</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						 currentNode = parentNode;</span><br><span class="line">                        	<span class="comment">//父节点找不到的情况下默认初始化根节点</span></span><br><span class="line">						 <span class="keyword">if</span>(currentNode == <span class="literal">null</span>)</span><br><span class="line">							 &#123;</span><br><span class="line">								 areaId = <span class="literal">null</span>;</span><br><span class="line">				                 doSelectAppoint(-<span class="number">1</span>);</span><br><span class="line">				                 <span class="keyword">break</span>;</span><br><span class="line">							 &#125;</span><br><span class="line">						 <span class="keyword">else</span></span><br><span class="line">							 &#123;</span><br><span class="line">                                 <span class="comment">//如果当前节点为空说明，说明当前节点未加载，需要借助父节点expandAll()方法加载对应的子节点集合</span></span><br><span class="line">				                $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;expandAll&#x27;</span>,currentNode.target);</span><br><span class="line">							 &#125;</span><br><span class="line">		                 </span><br><span class="line">					&#125;</span><br><span class="line">                     <span class="comment">//父节点存在，进行下一层遍历</span></span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						 parentNode = currentNode;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;expand&#x27;</span>,parentNode.target);</span><br><span class="line">    <span class="keyword">var</span> selectNode =  $(<span class="string">&quot;#areaTree&quot;</span>).tree(<span class="string">&#x27;getSelected&#x27;</span>);</span><br><span class="line">    <span class="comment">//父节点展开导致当前节点选中效果失效，没有选中的节点的情况下，回显历史记录节点</span></span><br><span class="line">    <span class="keyword">if</span>(selectNode== <span class="literal">null</span>)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;doSelectAppoint(id);&#125;, <span class="number">2000</span>);</span><br><span class="line">    	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Easyui</category>
      </categories>
      <tags>
        <tag>Easyui</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux查看cpu配置信息</title>
    <url>/Linux/blogs/Linux%E6%9F%A5%E7%9C%8Bcpu%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<h2><span id="cpu信息"><span id="inline-blue">cpu信息</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#查看cpu信息(配置)</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo | grep name | cut -f2 -d: | uniq -c</span><br><span class="line">      8  Intel(R) Xeon(R) CPU E5-2609 0 @ 2.40GHz</span><br><span class="line">	  </span><br><span class="line">#查看物理cpu个数</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line"># 查看每个物理CPU中core的个数(即核数)</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo| grep &quot;cpu cores&quot;| uniq</span><br><span class="line">cpu cores	: 4</span><br><span class="line"></span><br><span class="line"># 查看逻辑CPU的个数</span><br><span class="line">[root@lwdCSCDN ~]# cat &#x2F;proc&#x2F;cpuinfo| grep &quot;processor&quot;| wc -l</span><br><span class="line">8</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ELK环境搭建实践</title>
    <url>/Elasticsearch/blogs/ELK%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%AE%9E%E8%B7%B5/</url>
    <content><![CDATA[<h2><span id="工具安装包下载"><span id="inline-blue">工具安装包下载</span></span></h2><p><a id="download" href="https://www.elastic.co/cn/what-is/elk-stack"><i class="fa fa-download"></i><span>elasticsearch官方地址</span> </a><br><a id="download" href="https://pan.baidu.com/s/1oaa1tRrbKokXyE1ZqEHpSg"><i class="fa fa-download"></i><span>百度云地址</span> </a>  提取码：op7h</p>
<p>Elasticsearch、logstash、kibana 三者使用同一版本7.15.1</p>
<h2><span id="elasticsearch"><span id="inline-blue">Elasticsearch</span></span></h2><pre><code>上传安装包到指定的目录 /usr/local/ELK/ </code></pre>
<p><img src="/images/elasticsearch/es_20211009_001.png" alt="ELK安装目录">    </p>
<p>解压elasticsearch安装包，cd命令进入解压目录/usr/local/ELK/elasticsearch-7.15.1</p>
<p>ElasticSearch 配置文件实例</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ======================== Elasticsearch Configuration =========================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> Elasticsearch comes with reasonable defaults for most settings.</span></span><br><span class="line"><span class="comment">#       Before you set out to tweak and tune the configuration, make sure you</span></span><br><span class="line"><span class="comment">#       understand what are you trying to accomplish and the consequences.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The primary way of configuring a node is via this file. This template lists</span></span><br><span class="line"><span class="comment"># the most important settings you may want to configure for a production cluster.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please consult the documentation for further information on configuration options:</span></span><br><span class="line"><span class="comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Cluster -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for your cluster:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-application</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ------------------------------------ Node ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node-1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Add custom attributes to the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#node.attr.rack: r1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Paths ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to directory where to store the data (separate multiple locations by comma):</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.data:</span> <span class="string">/usr/local/ELK/elasticsearch-7.15.1/data/</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to log files:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">path.logs:</span> <span class="string">/usr/local/ELK/elasticsearch-7.15.1/logs</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Memory -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Lock the memory on startup:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#bootstrap.memory_lock: true</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Make sure that the heap size is set to about half the memory available</span></span><br><span class="line"><span class="comment"># on the system and that the owner of the process is allowed to use this</span></span><br><span class="line"><span class="comment"># limit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Elasticsearch performs poorly when the system is swapping the memory.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Network -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch is only accessible on localhost. Set a different</span></span><br><span class="line"><span class="comment"># address here to expose this node on the network:</span></span><br><span class="line"><span class="comment">#绑定访问IP地址  </span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">10.9</span><span class="number">.216</span><span class="number">.12</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># By default Elasticsearch listens for HTTP traffic on the first free port it</span></span><br><span class="line"><span class="comment"># finds starting at 9200. Set a specific HTTP port here:</span></span><br><span class="line"><span class="comment"># 访问端口</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the network module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># --------------------------------- Discovery ----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Pass an initial list of hosts to perform discovery when this node is started:</span></span><br><span class="line"><span class="comment"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span></span><br><span class="line"><span class="comment"># 集群节点IP地址</span></span><br><span class="line"><span class="attr">discovery.seed_hosts:</span> [<span class="string">&quot;10.9.216.12&quot;</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span></span><br><span class="line"><span class="comment">#节点名称</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;node-1&quot;</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the discovery and cluster formation module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Various -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Require explicit names when deleting indices:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#action.destructive_requires_name: true</span></span><br><span class="line"><span class="comment"># 解决 system call filters failed to install; check the logs and fix your configuration or disable system call filters at your own risk</span></span><br><span class="line"><span class="attr">bootstrap.system_call_filter:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># 是否支持跨域，默认为false</span></span><br><span class="line"><span class="attr">http.cors.enabled:</span> <span class="literal">true</span> </span><br><span class="line"><span class="comment"># 当设置允许跨域，默认为*,表示支持所有域名，如果我们只是允许某些网站能访问，那么可以使用正则表达式。比如只允许本地地址。 /https?:\/\/localhost(:[0-9]+)?/</span></span><br><span class="line"><span class="attr">http.cors.allow-origin:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="comment"># kibana页面警告 x设置为true则在节点上启用X-Pack安全特性，false表示禁用X-Pack安全特性。（PS：推荐明确设置这个值）</span></span><br><span class="line"><span class="attr">pack.security.enabled:</span> <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2><span id="安装head插件"><span id="inline-blue">安装head插件</span></span></h2><p>head插件地址：git://github.com/mobz/elasticsearch-head.git<br>下载之后将插件上传到Elasticsearch目录，创建一个自定义目录（放在原有plugins目录启动会报错）<br>global_plugins为自行创建目录，plugins为原有目录<br><img src="/images/elasticsearch/es_20211009_002.png" alt="head插件目录"><br>head插件启动需要nodeJs环境，没有的情况下安装一下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN global_plugins]# node -v</span><br><span class="line">v10.15.3</span><br></pre></td></tr></table></figure>

<p>ElasticSearch不能以Root用户启动，创建指定ElasticSearch用户</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加群组</span></span><br><span class="line">groupadd es</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加用户指定群组和密码</span></span><br><span class="line">useradd es -g es -p es</span><br><span class="line"><span class="meta">#</span><span class="bash"> 给对应目录赋予权限</span></span><br><span class="line">chown -R es:es /usr/local/ELK/elasticsearch-7.15.1/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到es用户</span></span><br><span class="line">su es</span><br></pre></td></tr></table></figure>

<p>更改es用户默认文件数配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/security/limits.conf </span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加如下内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> max open files config <span class="keyword">for</span> elasticsearch</span></span><br><span class="line"></span><br><span class="line">es soft noproc 65536</span><br><span class="line">es hard noproc 131072</span><br><span class="line">es soft nofile 65536</span><br><span class="line">es hard nofile 65536</span><br><span class="line"></span><br><span class="line"> vim /etc/security/limits.d/90-nproc.conf</span><br><span class="line"> </span><br><span class="line">es soft noproc 65536</span><br><span class="line">es hard noproc 131072</span><br><span class="line">es soft nofile 65536</span><br><span class="line">es hard nofile 65536</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改完上述文件重启服务器才能生效，使用ulimit -a 命令查看对应用户的参数是否生效</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-bash-4.1$ ulimit -a</span><br><span class="line">core file size          (blocks, -c) 0</span><br><span class="line">data seg size           (kbytes, -d) unlimited</span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited</span><br><span class="line">pending signals                 (-i) 255258</span><br><span class="line">max locked memory       (kbytes, -l) 64</span><br><span class="line">max memory size         (kbytes, -m) unlimited</span><br><span class="line">open files                      (-n) 65535</span><br><span class="line">pipe size            (512 bytes, -p) 8</span><br><span class="line">POSIX message queues     (bytes, -q) 819200</span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) unlimited</span><br><span class="line">cpu time               (seconds, -t) unlimited</span><br><span class="line">max user processes              (-u) 10000</span><br><span class="line">virtual memory          (kbytes, -v) unlimited</span><br><span class="line">file locks                      (-x) unlimited</span><br></pre></td></tr></table></figure>

<p>如果上述修改没有生效，可能/etc/profile 内部有做特殊指定,修改对应配置后执行source /etc/profile命令后生效(只能在当前窗口生效，之前打开的窗口没有作用)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /etc/profile</span><br><span class="line">export REDIS_HOME=/usr/local/bin/redis</span><br><span class="line">export PATH=$PATH:$REDIS_HOME/bin</span><br><span class="line"></span><br><span class="line">ulimit -u 10000</span><br><span class="line">ulimit -n 65535</span><br><span class="line">ulimit -d unlimited</span><br><span class="line">ulimit -m unlimited</span><br><span class="line">ulimit -s unlimited</span><br><span class="line">ulimit -t unlimited</span><br><span class="line">ulimit -v unlimited </span><br></pre></td></tr></table></figure>
<p>提供临时设置的命令(当前窗口生效)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ulimit -HSn 65535</span><br></pre></td></tr></table></figure>

<p>修改ElasticSearch启动jdk配置，7.15.1版本默认自带jDK，修改启动脚本，指定JDK路径ES_JAVA_HOME(必须为ES_JAVA_HOME,JAVA_HOME Elasticsearch不识别)<br>cd /usr/local/ELK/elasticsearch-7.15.1/bin</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# vim elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> CONTROLLING STARTUP:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># This script relies on a few environment variables to determine startup</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> behavior, those variables are:</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   ES_PATH_CONF -- Path to config directory</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   ES_JAVA_OPTS -- External Java Opts on top of the defaults <span class="built_in">set</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Optionally, exact memory values can be set using the `ES_JAVA_OPTS`. Example</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> values are <span class="string">&quot;512m&quot;</span>, and <span class="string">&quot;10g&quot;</span>.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment">#   ES_JAVA_OPTS=&quot;-Xms8g -Xmx8g&quot; ./bin/elasticsearch</span></span></span><br><span class="line"></span><br><span class="line">export ES_JAVA_HOME=&quot;/usr/local/ELK/elasticsearch-7.15.1/jdk&quot;</span><br><span class="line">source &quot;`dirname &quot;$0&quot;`&quot;/elasticsearch-env</span><br></pre></td></tr></table></figure>

<p>启动elsaticsearch</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-bash-4.1$ ./elasticsearch</span><br><span class="line">WARNING: A terminally deprecated method in java.lang.System has been called</span><br><span class="line">WARNING: System::setSecurityManager has been called by org.elasticsearch.bootstrap.Elasticsearch (file:/usr/local/ELK/elasticsearch-7.15.1/lib/elasticsearch-7.15.1.jar)</span><br><span class="line">WARNING: Please consider reporting this to the maintainers of org.elasticsearch.bootstrap.Elasticsearch</span><br><span class="line">WARNING: System::setSecurityManager will be removed in a future release</span><br><span class="line">/usr/local/ELK/elasticsearch-7.15.1/modules/x-pack-ml/platform/linux-x86_64/bin/controller: /lib64/libz.so.1: no version information available (required by /usr/local/ELK/elasticsearch-7.15.1/modules/x-pack-ml/platform/linux-x86_64/bin/../lib/libxml2.so.2)</span><br><span class="line">WARNING: A terminally deprecated method in java.lang.System has been called</span><br><span class="line">WARNING: System::setSecurityManager has been called by org.elasticsearch.bootstrap.Security (file:/usr/local/ELK/elasticsearch-7.15.1/lib/elasticsearch-7.15.1.jar)</span><br><span class="line">WARNING: Please consider reporting this to the maintainers of org.elasticsearch.bootstrap.Security</span><br><span class="line">WARNING: System::setSecurityManager will be removed in a future release</span><br><span class="line">[2021-11-09T11:04:38,343][INFO ][o.e.n.Node               ] [node-1] version[7.15.1], pid[24509], build[default/tar/83c34f456ae29d60e94d886e455e6a3409bba9ed/2021-10-07T21:56:19.031608185Z], OS[Linux/2.6.32-279.el6.x86_64/amd64], JVM[Eclipse Adoptium/OpenJDK 64-Bit Server VM/17/17+35]</span><br><span class="line">[2021-11-09T11:04:38,345][INFO ][o.e.n.Node               ] [node-1] JVM home [/usr/local/ELK/elasticsearch-7.15.1/jdk], using bundled JDK [true]</span><br><span class="line">[2021-11-09T11:04:38,345][INFO ][o.e.n.Node               ] [node-1] JVM arguments [-Xshare:auto, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -XX:+ShowCodeDetailsInExceptionMessages, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dio.netty.allocator.numDirectArenas=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.locale.providers=SPI,COMPAT, --add-opens=java.base/java.io=ALL-UNNAMED, -XX:+UseG1GC, -Djava.io.tmpdir=/tmp/elasticsearch-11155009717091530414, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -Xms15963m, -Xmx15963m, -XX:MaxDirectMemorySize=8371830784, -XX:InitiatingHeapOccupancyPercent=30, -XX:G1ReservePercent=25, -Des.path.home=/usr/local/ELK/elasticsearch-7.15.1, -Des.path.conf=/usr/local/ELK/elasticsearch-7.15.1/config, -Des.distribution.flavor=default, -Des.distribution.type=tar, -Des.bundled_jdk=true]</span><br><span class="line">[2021-11-09T11:04:41,505][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [aggs-matrix-stats]</span><br><span class="line">[2021-11-09T11:04:41,506][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [analysis-common]</span><br></pre></td></tr></table></figure>

<p>访问验证<br><img src="/images/elasticsearch/es_20211009_003.png" alt="ElasticSearch启动验证"></p>
<p>Head插件配置，修改Elasticsearch地址<br>文件所在位置：/usr/local/ELK/elasticsearch-7.15.1/global_plugins/elasticsearch-head/_site/app.js<br>搜索localhost:9200，将其改为对应地址即可</p>
<p>Head插件启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span>/usr/<span class="built_in">local</span>/ELK/elasticsearch-7.15.1/global_plugins/elasticsearch-head</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> npm install</span></span><br><span class="line">-bash-4.1$ npm run start</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> elasticsearch-head@0.0.0 start /usr/<span class="built_in">local</span>/ELK/elasticsearch-7.15.1/global_plugins/elasticsearch-head</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> grunt server</span></span><br><span class="line"></span><br><span class="line">Running &quot;connect:server&quot; (connect) task</span><br><span class="line">Waiting forever...</span><br><span class="line">Started connect web server on http://localhost:9100</span><br></pre></td></tr></table></figure>

<p><img src="/images/elasticsearch/es_20211009_004.png" alt="head插件访问"></p>
<h2><span id="logstash安装"><span id="inline-blue">logstash安装</span></span></h2><p>解压安装包，进入对应的目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN ELK]# tar -zxvf logstash-7.15.1-linux-x86_64.tar.gz</span><br><span class="line">[root@lwdCSCDN ELK]# cd logstash-7.15.1</span><br><span class="line"><span class="meta">#</span><span class="bash">指定JDK地址</span></span><br><span class="line">[root@lwdCSCDN bin]# vim logstash</span><br><span class="line">[root@lwdCSCDN bin]# vim logstash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Run logstash</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Usage:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   bin/logstash &lt;<span class="built_in">command</span>&gt; [arguments]</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># See &#x27;bin/logstash --help&#x27; for a list of commands.</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Supported environment variables:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   LS_JAVA_OPTS=<span class="string">&quot;xxx&quot;</span> to append extra options to the JVM options provided by logstash</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># Development environment variables:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">   DEBUG=1 to output debugging information</span></span><br><span class="line">export JAVA_HOME=&quot;/usr/local/ELK/logstash-7.15.1/jdk&quot;</span><br></pre></td></tr></table></figure>
<p>在/usr/local/ELK/logstash-7.15.1/config对应目录下，创建logstash.conf配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">input&#123;</span><br><span class="line">    file&#123;</span><br><span class="line">        path =&gt;&quot;/usr/local/ELK/logstash-7.15.1/logs/test.log&quot;</span><br><span class="line">        start_position=&gt;&quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">filter&#123;</span><br><span class="line">    grok&#123;</span><br><span class="line">        match=&gt;&#123;</span><br><span class="line">            &quot;message&quot;=&gt;&quot;%&#123;DATA:clientIp&#125; - - \[%&#123;HTTPDATE:accessTime&#125;\] \&quot;%&#123;DATA:method&#125; %&#123;DATA:requestPath&#125; %&#123;DATA:httpversion&#125;\&quot; %&#123;DATA:retcode&#125; %&#123;DATA:size&#125; \&quot;%&#123;DATA:fromHtml&#125;\&quot; \&quot;%&#123;DATA:useragent&#125;\&quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        remove_field=&gt;&quot;message&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    date&#123;</span><br><span class="line">        match=&gt;[&quot;accessTime&quot;,&quot;dd/MMM/yyyy:HH:mm:ss Z&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output&#123;</span><br><span class="line">    stdout&#123;</span><br><span class="line">        codec=&gt;rubydebug</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">input &#123;</span><br><span class="line">    stdin&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">                  hosts =&gt; [&quot;10.9.216.12:9200&quot;]</span><br><span class="line">                  index =&gt; &quot;test_index&quot;</span><br><span class="line">          &#125;</span><br><span class="line">          stdout &#123; codec =&gt; rubydebug&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建测试日志文件，与配置文件指定一致/usr/local/ELK/logstash-7.15.1/logs，日志内容如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ot@cdh4 test]# vim access_log.2018-04-10.log</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/css/component.css HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/EasePack.min.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/TweenLite.min.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/rAF.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/js/demo-1.js HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:22 +0800] &quot;GET /static/logshow/img/demo-1-bg.jpg HTTP/1.1&quot; 304 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:30 +0800] &quot;GET / HTTP/1.1&quot; 302 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:30 +0800] &quot;GET /login HTTP/1.1&quot; 200 3271</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:36 +0800] &quot;POST /login HTTP/1.1&quot; 302 -</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:36 +0800] &quot;GET / HTTP/1.1&quot; 200 11776</span><br><span class="line">10.2.17.9 - - [10/Apr/2018:09:06:36 +0800] &quot;GET /static/css/font-awesome.min.css?v=4.4.0 HTTP/1.1&quot; 304 -</span><br></pre></td></tr></table></figure>

<p>logstash启动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# ./logstash -f ../config/logstash.conf</span><br><span class="line">Using JAVA_HOME defined java: /usr/local/ELK/logstash-7.15.1/jdk</span><br><span class="line">WARNING, using JAVA_HOME while Logstash distribution comes with a bundled JDK</span><br><span class="line">OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.</span><br><span class="line">Sending Logstash logs to /usr/local/ELK/logstash-7.15.1/logs which is now configured via log4j2.properties</span><br><span class="line">[2021-11-09T14:48:34,143][INFO ][logstash.runner          ] Log4j configuration path used is: /usr/local/ELK/logstash-7.15.1/config/log4j2.properties</span><br><span class="line">[2021-11-09T14:48:34,188][INFO ][logstash.runner          ] Starting Logstash &#123;&quot;logstash.version&quot;=&gt;&quot;7.15.1&quot;, &quot;jruby.version&quot;=&gt;&quot;jruby 9.2.19.0 (2.5.8) 2021-06-15 55810c552b OpenJDK 64-Bit Server VM 11.0.12+7 on 11.0.12+7 +indy +jit [linux-x86_64]&quot;&#125;</span><br><span class="line">[2021-11-09T14:48:34,571][WARN ][logstash.config.source.multilocal] Ignoring the &#x27;pipelines.yml&#x27; file because modules or command line options are specified</span><br><span class="line">[2021-11-09T14:48:36,409][INFO ][logstash.agent           ] Successfully started Logstash API endpoint &#123;:port=&gt;9600&#125;</span><br><span class="line">[2021-11-09T14:48:37,287][INFO ][org.reflections.Reflections] Reflections took 138 ms to scan 1 urls, producing 120 keys and 417 values </span><br><span class="line">[2021-11-09T14:48:39,422][INFO ][logstash.outputs.elasticsearch][main] New Elasticsearch output &#123;:class=&gt;&quot;LogStash::Outputs::ElasticSearch&quot;, :hosts=&gt;[&quot;//10.9.216.12:9200&quot;]&#125;</span><br><span class="line">[2021-11-09T14:48:39,926][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch pool URLs updated &#123;:changes=&gt;&#123;:removed=&gt;[], :added=&gt;[http://10.9.216.12:9200/]&#125;&#125;</span><br><span class="line">[2021-11-09T14:48:40,123][WARN ][logstash.outputs.elasticsearch][main] Restored connection to ES instance &#123;:url=&gt;&quot;http://10.9.216.12:9200/&quot;&#125;</span><br><span class="line">[2021-11-09T14:48:40,184][INFO ][logstash.outputs.elasticsearch][main] Elasticsearch version determined (7.15.1) &#123;:es_version=&gt;7&#125;</span><br><span class="line">[2021-11-09T14:48:40,186][WARN ][logstash.outputs.elasticsearch][main] Detected a 6.x and above cluster: the `type` event field won&#x27;t be used to determine the document _type &#123;:es_version=&gt;7&#125;</span><br><span class="line">[2021-11-09T14:48:40,414][INFO ][logstash.outputs.elasticsearch][main] Using a default mapping template &#123;:es_version=&gt;7, :ecs_compatibility=&gt;:disabled&#125;</span><br><span class="line">[2021-11-09T14:48:40,616][INFO ][logstash.javapipeline    ][main] Starting pipeline &#123;:pipeline_id=&gt;&quot;main&quot;, &quot;pipeline.workers&quot;=&gt;8, &quot;pipeline.batch.size&quot;=&gt;125, &quot;pipeline.batch.delay&quot;=&gt;50, &quot;pipeline.max_inflight&quot;=&gt;1000, &quot;pipeline.sources&quot;=&gt;[&quot;/usr/local/ELK/logstash-7.15.1/config/logstash.conf&quot;], :thread=&gt;&quot;#&lt;Thread:0xc0227a3 run&gt;&quot;&#125;</span><br><span class="line">[2021-11-09T14:48:42,101][INFO ][logstash.javapipeline    ][main] Pipeline Java execution initialization time &#123;&quot;seconds&quot;=&gt;1.48&#125;</span><br><span class="line">[2021-11-09T14:48:42,199][INFO ][logstash.inputs.file     ][main] No sincedb_path set, generating one based on the &quot;path&quot; setting &#123;:sincedb_path=&gt;&quot;/usr/local/ELK/logstash-7.15.1/data/plugins/inputs/file/.sincedb_564ad11bfc2bcd7fe5ec10ca0ee07d07&quot;, :path=&gt;[&quot;/usr/local/ELK/logstash-7.15.1/logs/test.log&quot;]&#125;</span><br><span class="line">WARNING: An illegal reflective access operation has occurred</span><br><span class="line">WARNING: Illegal reflective access by com.jrubystdinchannel.StdinChannelLibrary$Reader (file:/usr/local/ELK/logstash-7.15.1/vendor/bundle/jruby/2.5.0/gems/jruby-stdin-channel-0.2.0-java/lib/jruby_stdin_channel/jruby_stdin_channel.jar) to field java.io.FilterInputStream.in</span><br><span class="line">WARNING: Please consider reporting this to the maintainers of com.jrubystdinchannel.StdinChannelLibrary$Reader</span><br><span class="line">WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations</span><br><span class="line">WARNING: All illegal access operations will be denied in a future release</span><br><span class="line">[2021-11-09T14:48:42,292][INFO ][logstash.javapipeline    ][main] Pipeline started &#123;&quot;pipeline.id&quot;=&gt;&quot;main&quot;&#125;</span><br><span class="line">The stdin plugin is now waiting for input:</span><br><span class="line">[2021-11-09T14:48:42,375][INFO ][logstash.agent           ] Pipelines running &#123;:count=&gt;1, :running_pipelines=&gt;[:main], :non_running_pipelines=&gt;[]&#125;</span><br><span class="line">[2021-11-09T14:48:42,381][INFO ][filewatch.observingtail  ][main][9a1656b2353e9b2608f8d58d6e356237ac498ca7b95fbed910c53ba565f0606a] START, creating Discoverer, Watch with file and sincedb collections</span><br></pre></td></tr></table></figure>
<p>-f 参数指定启动配置文件<br>启动成功后，logstash监控控制台输出，在控制台随意输入一些信息，logstash会将信息存入Elasticsearch,可以通过Head插件查看</p>
<h2><span id="kibana安装"><span id="inline-blue">kibana安装</span></span></h2><p>解压对应安装包，进入对应目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN ELK]# tar -zxvf kibana-7.15.1-linux-x86_64.tar.gz</span><br><span class="line">[root@lwdCSCDN ELK]# cd kibana-7.15.1-linux-x86_64</span><br><span class="line"><span class="meta">#</span><span class="bash">编辑配置文件，配置ElasticSearch地址、修改语言配置、启用默认端口</span></span><br><span class="line">[root@lwdCSCDN config]# vim /usr/local/ELK/kibana-7.15.1-linux-x86_64/config/kibana.yml</span><br><span class="line"><span class="meta">#</span><span class="bash"> Kibana is served by a back end server. This setting specifies the port to use.</span></span><br><span class="line">server.port: 5601</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies the address to <span class="built_in">which</span> the Kibana server will <span class="built_in">bind</span>. IP addresses and host names are both valid values.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> The default is <span class="string">&#x27;localhost&#x27;</span>, <span class="built_in">which</span> usually means remote machines will not be able to connect.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> To allow connections from remote users, <span class="built_in">set</span> this parameter to a non-loopback address.</span></span><br><span class="line">server.host: &quot;0.0.0.0&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enables you to specify a path to mount Kibana at <span class="keyword">if</span> you are running behind a proxy.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Use the `server.rewriteBasePath` setting to tell Kibana <span class="keyword">if</span> it should remove the basePath</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> from requests it receives, and to prevent a deprecation warning at startup.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This setting cannot end <span class="keyword">in</span> a slash.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.basePath: <span class="string">&quot;&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies whether Kibana should rewrite requests that are prefixed with</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> `server.basePath` or require that they are rewritten by your reverse proxy.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> This setting was effectively always `<span class="literal">false</span>` before Kibana 6.3 and will</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> default to `<span class="literal">true</span>` starting <span class="keyword">in</span> Kibana 7.0.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.rewriteBasePath: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies the public URL at <span class="built_in">which</span> Kibana is available <span class="keyword">for</span> end users. If</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> `server.basePath` is configured this URL should end with the same basePath.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.publicBaseUrl: <span class="string">&quot;&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The maximum payload size <span class="keyword">in</span> bytes <span class="keyword">for</span> incoming server requests.</span></span><br><span class="line">server.maxPayload: 1048576</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The Kibana server<span class="string">&#x27;s name.  This is used for display purposes.</span></span></span><br><span class="line">server.name: &quot;kibana&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The URLs of the Elasticsearch instances to use <span class="keyword">for</span> all your queries.</span></span><br><span class="line">elasticsearch.hosts: [&quot;http://10.9.216.12:9200&quot;]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Kibana uses an index <span class="keyword">in</span> Elasticsearch to store saved searches, visualizations and</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> dashboards. Kibana creates a new index <span class="keyword">if</span> the index doesn<span class="string">&#x27;t already exist.</span></span></span><br><span class="line">kibana.index: &quot;.kibana&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The default application to load.</span></span><br><span class="line">kibana.defaultAppId: &quot;home&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> If your Elasticsearch is protected with basic authentication, these settings provide</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the username and password that the Kibana server uses to perform maintenance on the Kibana</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> index at startup. Your Kibana users still need to authenticate with Elasticsearch, <span class="built_in">which</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> is proxied through the Kibana server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.username: <span class="string">&quot;kibana_system&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.password: <span class="string">&quot;pass&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Kibana can also authenticate to Elasticsearch via <span class="string">&quot;service account tokens&quot;</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> If may use this token instead of a username/password.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> elasticsearch.serviceAccountToken: <span class="string">&quot;my_token&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enables SSL and paths to the PEM-format SSL certificate and SSL key files, respectively.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> These settings <span class="built_in">enable</span> SSL <span class="keyword">for</span> outgoing requests from the Kibana server to the browser.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.ssl.enabled: <span class="literal">false</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.ssl.certificate: /path/to/your/server.crt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server.ssl.key: /path/to/your/server.key</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Optional settings that provide the paths to the PEM-format SSL certificate and key files.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> These files are used to verify the identity of Kibana to Elasticsearch and are required when</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> xpack.security.http.ssl.client_authentication <span class="keyword">in</span> Elasticsearch is <span class="built_in">set</span> to required.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.certificate: /path/to/your/client.crt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.key: /path/to/your/client.key</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Optional setting that enables you to specify a path to the PEM file <span class="keyword">for</span> the certificate</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> authority <span class="keyword">for</span> your Elasticsearch instance.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.certificateAuthorities: [ <span class="string">&quot;/path/to/your/CA.pem&quot;</span> ]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> To disregard the validity of SSL certificates, change this setting<span class="string">&#x27;s value to &#x27;</span>none<span class="string">&#x27;.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.ssl.verificationMode: full</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Time <span class="keyword">in</span> milliseconds to <span class="built_in">wait</span> <span class="keyword">for</span> Elasticsearch to respond to pings. Defaults to the value of</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the elasticsearch.requestTimeout setting.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.pingTimeout: 1500</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Time <span class="keyword">in</span> milliseconds to <span class="built_in">wait</span> <span class="keyword">for</span> responses from the back end or Elasticsearch. This value</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> must be a positive <span class="built_in">integer</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.requestTimeout: 30000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> List of Kibana client-side headers to send to Elasticsearch. To send *no* client-side</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> headers, <span class="built_in">set</span> this value to [] (an empty list).</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.requestHeadersWhitelist: [ authorization ]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Header names and values that are sent to Elasticsearch. Any custom headers cannot be overwritten</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> by client-side headers, regardless of the elasticsearch.requestHeadersWhitelist configuration.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.customHeaders: &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Time <span class="keyword">in</span> milliseconds <span class="keyword">for</span> Elasticsearch to <span class="built_in">wait</span> <span class="keyword">for</span> responses from shards. Set to 0 to <span class="built_in">disable</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.shardTimeout: 30000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Logs queries sent to Elasticsearch. Requires logging.verbose <span class="built_in">set</span> to <span class="literal">true</span>.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elasticsearch.logQueries: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies the path <span class="built_in">where</span> Kibana creates the process ID file.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pid.file: /run/kibana/kibana.pid</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enables you to specify a file <span class="built_in">where</span> Kibana stores <span class="built_in">log</span> output.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.dest: stdout</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the value of this setting to <span class="literal">true</span> to suppress all logging output.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.silent: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the value of this setting to <span class="literal">true</span> to suppress all logging output other than error messages.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.quiet: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the value of this setting to <span class="literal">true</span> to <span class="built_in">log</span> all events, including system usage information</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> and all requests.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">logging.verbose: <span class="literal">false</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set the interval <span class="keyword">in</span> milliseconds to sample system and process performance</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> metrics. Minimum is 100ms. Defaults to 5000.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ops.interval: 5000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Specifies locale to be used <span class="keyword">for</span> all localizable strings, dates and number formats.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Supported languages are the following: English - en , by default , Chinese - zh-CN .</span></span><br><span class="line">i18n.locale: &quot;zh-CN&quot;</span><br></pre></td></tr></table></figure>
<p>启动kibana </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# cd /usr/local/ELK/kibana-7.15.1-linux-x86_64/bin</span><br><span class="line">[root@lwdCSCDN bin]# ./kibana</span><br><span class="line">启动报错，提示缺失文件</span><br><span class="line">![kibana启动报错](/images/elasticsearch/es_20211009_005.png)</span><br><span class="line">glibc版本升级到glibc-2.17</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">cd</span>到该路径下</span></span><br><span class="line">cd /usr/local</span><br><span class="line"><span class="meta">#</span><span class="bash">下载</span></span><br><span class="line">wget https://ftp.gnu.org/gnu/glibc/glibc-2.17.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">解压</span></span><br><span class="line">tar -zxvf glibc-2.17.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash">进入到解压文件中</span></span><br><span class="line"><span class="meta">#</span><span class="bash">创建路径</span></span><br><span class="line">mkdir build  </span><br><span class="line"><span class="meta">#</span><span class="bash">进入到build路径下</span></span><br><span class="line">../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/bin</span><br><span class="line"><span class="meta">#</span><span class="bash">安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>验证</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN lib64stdc]# strings /lib64/libc.so.6|grep GLIBC</span><br><span class="line">GLIBC_2.2.5</span><br><span class="line">GLIBC_2.2.6</span><br><span class="line">GLIBC_2.3</span><br><span class="line">GLIBC_2.3.2</span><br><span class="line">GLIBC_2.3.3</span><br><span class="line">GLIBC_2.3.4</span><br><span class="line">GLIBC_2.4</span><br><span class="line">GLIBC_2.5</span><br><span class="line">GLIBC_2.6</span><br><span class="line">GLIBC_2.7</span><br><span class="line">GLIBC_2.8</span><br><span class="line">GLIBC_2.9</span><br><span class="line">GLIBC_2.10</span><br><span class="line">GLIBC_2.11</span><br><span class="line">GLIBC_2.12</span><br><span class="line">GLIBC_2.13</span><br><span class="line">GLIBC_2.14</span><br><span class="line">GLIBC_2.15</span><br><span class="line">GLIBC_2.16</span><br><span class="line">GLIBC_2.17</span><br><span class="line">GLIBC_PRIVATE</span><br></pre></td></tr></table></figure>
<p>lib64stdc++升级到gcc4.8<br><a id="download" href="http://ftp.de.debian.org/debian/pool/main/g/gcc-4.8/"><i class="fa fa-download"></i><span>gcc4.8下载地址</span> </a><br>服务器创建临时目录lib64stdc，上传压缩包解压</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">[root@lwdCSCDN lib64stdc]# ar -x lib64stdc++6-4.8-dbg_4.8.4-1_i386.deb</span><br><span class="line">[root@lwdCSCDN lib64stdc]# tar xvf data.tar.xz </span><br><span class="line">[root@lwdCSCDN lib64stdc]# cd usr/lib64/debug/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 覆盖/usr/lib、/usr/lib64对应库文件</span></span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so /usr/lib</span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so /usr/lib64</span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so.6 /usr/lib</span><br><span class="line">[root@lwdCSCDN debug]# cp libstdc++.so.6 /usr/lib64</span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证</span></span><br><span class="line">[root@lwdCSCDN debug]# strings /usr/lib/libstdc++.so.6 | grep GLIBCXX</span><br><span class="line">GLIBCXX_3.4</span><br><span class="line">GLIBCXX_3.4.1</span><br><span class="line">GLIBCXX_3.4.2</span><br><span class="line">GLIBCXX_3.4.3</span><br><span class="line">GLIBCXX_3.4.4</span><br><span class="line">GLIBCXX_3.4.5</span><br><span class="line">GLIBCXX_3.4.6</span><br><span class="line">GLIBCXX_3.4.7</span><br><span class="line">GLIBCXX_3.4.8</span><br><span class="line">GLIBCXX_3.4.9</span><br><span class="line">GLIBCXX_3.4.10</span><br><span class="line">GLIBCXX_3.4.11</span><br><span class="line">GLIBCXX_3.4.12</span><br><span class="line">GLIBCXX_3.4.13</span><br><span class="line">GLIBCXX_3.4.14</span><br><span class="line">GLIBCXX_3.4.15</span><br><span class="line">GLIBCXX_3.4.16</span><br><span class="line">GLIBCXX_3.4.17</span><br><span class="line">GLIBCXX_3.4.18</span><br><span class="line">GLIBCXX_3.4.19</span><br><span class="line">GLIBCXX_DEBUG_MESSAGE_LENGTH</span><br></pre></td></tr></table></figure>
<p>重新启动成功</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN bin]# ./kibana --allow-root</span><br><span class="line">  log   [10:25:07.263] [info][plugins-service] Plugin &quot;metricsEntities&quot; is disabled.</span><br><span class="line">  log   [10:25:07.508] [info][server][Preboot][http] http server running at http://0.0.0.0:5601</span><br><span class="line">  log   [10:25:07.788] [warning][config][deprecation] plugins.scanDirs is deprecated and is no longer used</span><br><span class="line">  log   [10:25:07.789] [warning][config][deprecation] &quot;kibana.index&quot; is deprecated. Multitenancy by changing &quot;kibana.index&quot; will not be supported starting in 8.0. See https://ela.st/kbn-remove-legacy-multitenancy for more details</span><br><span class="line">  log   [10:25:07.789] [warning][config][deprecation] kibana.defaultAppId is deprecated and will be removed in 8.0. Please use the `defaultRoute` advanced setting instead</span><br><span class="line">  log   [10:25:07.790] [warning][config][deprecation] Config key [monitoring.cluster_alerts.email_notifications.email_address] will be required for email notifications to work in 8.0.&quot;</span><br><span class="line">  log   [10:25:07.790] [warning][config][deprecation] &quot;xpack.reporting.roles&quot; is deprecated. Granting reporting privilege through a &quot;reporting_user&quot; role will not be supported starting in 8.0. Please set &quot;xpack.reporting.roles.enabled&quot; to &quot;false&quot; and grant reporting privileges to users using Kibana application privileges **Management &gt; Security &gt; Roles**.</span><br><span class="line">  log   [10:25:07.790] [warning][config][deprecation] Session idle timeout (&quot;xpack.security.session.idleTimeout&quot;) will be set to 1 hour by default in the next major version (8.0).</span><br></pre></td></tr></table></figure>
<p>访问kibana主页<br><a href="http://10.9.216.12:5601/app/home#/">http://10.9.216.12:5601/app/home#/</a></p>
<p><img src="/images/elasticsearch/es_20211009_006.png" alt="kibana启动报错"></p>
]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
        <tag>Logstash</tag>
        <tag>Kibana</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown流程图</title>
    <url>/Markdown/blogs/Markdown%E6%B5%81%E7%A8%8B%E5%9B%BE/</url>
    <content><![CDATA[<h1><span id="语法"><span id="inline-blue">语法</span></span></h1><ol>
<li>定义元素<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">元素ID-&gt;元素类型: 描述</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>元素类型<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#冒号后跟空格</span><br><span class="line">startID&#x3D;&gt;start: 开始</span><br><span class="line">inputoutputID&#x3D;&gt;inputoutput: 输入输出描述</span><br><span class="line">conditionID&#x3D;&gt;condition: 条件描述</span><br><span class="line">subroutineID&#x3D;&gt;subroutine: 子流程描述</span><br><span class="line">endID&#x3D;&gt;end: 结束</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>条件判断<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">condition(yes)-&gt;inputoutput</span><br><span class="line">#条件判断控制方向,left、right、bottom、top</span><br><span class="line">condition(yes,left)-&gt;inputoutputID</span><br><span class="line">condition(no,top)-&gt;subroutineID</span><br></pre></td></tr></table></figure></li>
<li>元素连接<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#方式1</span><br><span class="line">startID-&gt;inputoutputID-&gt;conditionID-&gt;subroutineID-&gt;endID</span><br><span class="line"></span><br><span class="line">#方式2</span><br><span class="line">startID-&gt;inputoutputID</span><br><span class="line">inputoutputID-&gt;conditionID</span><br><span class="line">conditionID-&gt;subroutineID</span><br><span class="line">subroutineID-&gt;endID</span><br><span class="line">以上两种连接方式均可</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1><span id="示例"><span id="inline-blue">示例</span></span></h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">startID&#x3D;&gt;start: 开始</span><br><span class="line">inputoutputID1&#x3D;&gt;inputoutput: 输入X</span><br><span class="line">conditionID&#x3D;&gt;condition: x&gt;0</span><br><span class="line">inputoutputID2&#x3D;&gt;inputoutput: x是一个正数</span><br><span class="line">inputoutputID3&#x3D;&gt;inputoutput: x是一个负数</span><br><span class="line">endID&#x3D;&gt;end: 结束</span><br><span class="line"></span><br><span class="line">startID-&gt;inputoutputID1</span><br><span class="line">inputoutputID1-&gt;conditionID</span><br><span class="line">conditionID(yes,left)-&gt;inputoutputID2</span><br><span class="line">conditionID(no,right)-&gt;inputoutputID3</span><br><span class="line">inputoutputID2-&gt;endID</span><br><span class="line">inputoutputID3-&gt;endID</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Eclipse安装Jetty插件</title>
    <url>/Eclipse/blogs/Eclipse%E5%AE%89%E8%A3%85Jetty%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h1><span id="插件下载地址连接失败解决办法"><span id="inline-blue">插件下载地址连接失败解决办法</span></span></h1><ol>
<li><p>访问<a href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com/</a> 查找到github公网IP地址<br><img src="/images/intelliJ/intelliJ_2021_04_29_001.png" alt="查找结果"></p>
</li>
<li><p>将github网站IP地址映射添加到C:\Windows\System32\drivers\etc目录下的hosts文件中，文件末尾添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">140.82.114.4 github.com</span><br></pre></td></tr></table></figure></li>
<li><p>刷新本地DNS缓存<br>cmd命令模式下执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ipconfig /flushdns</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1><span id="在线安装"><span id="inline-blue">在线安装</span></span></h1><p>eclipse菜单栏依次点击  Help&gt;eclipse Marketplace<br>安装版本选择第一项(可以切换不同的版本),安装之后重启eclispe,jetty插件才能生效<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_001.png" alt="安装步骤1"><br>选中项目可直接右键jetty启动<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_002.png" alt="安装步骤2"><br>配置jetty启动选项<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_003.png" alt="安装步骤3"><br>设置项目启动端口、jetty版本、访问项目名称<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_004.png" alt="安装步骤4"><br>配置jvm启动参数,项目对应启动配置文件所在位置、jrebel插件参数配置<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_005.png" alt="安装步骤5"><br>配置项目部署class文件以及依赖jar包,主要解决子项目依赖导致jar包冲突<br><img src="/images/eclipse/eclipse_jetty_2021_08_31_006.png" alt="安装步骤6"></p>
]]></content>
      <categories>
        <category>Eclipse</category>
      </categories>
      <tags>
        <tag>Eclipse</tag>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ推送Git失败</title>
    <url>/IntelliJ/blogs/Intellij%E6%8E%A8%E9%80%81git%E5%A4%B1%E8%B4%A5/</url>
    <content><![CDATA[<h1><span id="现象"><span id="inline-blue">现象</span></span></h1><p>Push failed<br>            Fatal: HttpRequestException encountered.<br>            unable to access ‘<a href="https://github.com/vanishke/DataStructure-Algorithm.git/&#39;">https://github.com/vanishke/DataStructure-Algorithm.git/&#39;</a>: Unknown SSL protocol error in connection to github.com:443</p>
<h1><span id="解决办法"><span id="inline-blue">解决办法</span></span></h1><ol>
<li><p>访问<a href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com/</a> 查找到github公网IP地址<br><img src="/images/intelliJ/intelliJ_2021_04_29_001.png" alt="查找结果"></p>
</li>
<li><p>将github网站IP地址映射添加到C:\Windows\System32\drivers\etc目录下的hosts文件中，文件末尾添加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">140.82.114.4 github.com</span><br></pre></td></tr></table></figure></li>
<li><p>刷新本地DNS缓存<br>cmd命令模式下执行以下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ipconfig /flushdns</span><br></pre></td></tr></table></figure>






</li>
</ol>
]]></content>
      <categories>
        <category>IntelliJ</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>IntelliJ</tag>
      </tags>
  </entry>
  <entry>
    <title>Jetty修改端口号</title>
    <url>/Jetty/blogs/Jetty%E4%BF%AE%E6%94%B9%E7%AB%AF%E5%8F%A3/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><p>文件名称：start.ini<br>文件路径：jetty安装目录下（/usr/local/jetty_home）<br>#文件内搜索对应标识jetty.port</p>
<p><img src="/images/jetty/jetty_2021_06_10_001.png" alt="jetty变更端口号"></p>
]]></content>
      <categories>
        <category>Jetty</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows环境Docker拉取MySQL镜像</title>
    <url>/Docker/blogs/Window%E7%8E%AF%E5%A2%83Docker%E6%8B%89%E5%8F%96MySQL%E9%95%9C%E5%83%8F/</url>
    <content><![CDATA[<h1><span id="拉取镜像">拉取镜像</span></h1><p><img src="/images/docker/docker_2021_06_07_015.png" alt="docker拉取mysql镜像01"></p>
<h1><span id="镜像参数设置">镜像参数设置</span></h1><h2><span id="密码参数">密码参数</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">MYSQL_ROOT_PASSWORD=coship</span><br></pre></td></tr></table></figure>
<p><img src="/images/docker/docker_2021_06_07_016.png" alt="docker拉取mysql镜像02"></p>
<h1><span id="镜像运行">镜像运行</span></h1><p><img src="/images/docker/docker_2021_06_07_017.png" alt="docker拉取mysql镜像03"></p>
<h2><span id="远程连接权限设置">远程连接权限设置</span></h2><p><img src="/images/docker/docker_2021_06_07_018.png" alt="docker拉取mysql镜像04"><br>镜像运行成功后生成MySQL端口和IP地址映射192.168.99.100:32772<br>点击EXEC按钮生成mysql命令行窗口,登陆mysql并赋予远程登陆权限</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">	mysql -uroot -pcoship;</span><br><span class="line">	GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;coship&#x27; WITH GRA</span><br><span class="line">NT OPTION;</span><br></pre></td></tr></table></figure>
<h2><span id="navicate连接">navicate连接</span></h2><p>设置对应参数测试连接<br><img src="/images/docker/docker_2021_06_07_019.png" alt="docker拉取mysql镜像05"></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx代理</title>
    <url>/Nginx/blogs/Nginx%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E4%BB%A3%E7%90%86%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84span"><span id="inline-blue">代理访问路径</span></a></li>
<li><a href="#span-idinline-blue%E9%85%8D%E7%BD%AE%E8%AF%A6%E6%83%85span"><span id="inline-blue">配置详情</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="代理访问路径"><span id="inline-blue">代理访问路径</span></span></h2><p>图片真实访问地址：<a href="http://10.9.216.12:8070/upload.war/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png">http://10.9.216.12:8070/upload.war/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</a></p>
<p>代理访问地址：<a href="http://10.9.216.12:8888/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png">http://10.9.216.12:8888/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</a></p>
<h2><span id="配置详情"><span id="inline-blue">配置详情</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       8888; //代理访问的端口</span><br><span class="line">        server_name  10.9.216.12;//代理访问的IP地址</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location /upload &#123;</span><br><span class="line">            proxy_pass http://10.9.216.12:8070/upload.war/; //代理访问路径</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">		//proxy_pass参数路径分隔符作用</span><br><span class="line">		//访问/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</span><br><span class="line">		//代理以&quot;/&quot;结束</span><br><span class="line">		//将匹配到的/upload去掉之后拼接到代理访问路径的后面，访问效果http://10.9.216.12:8070/upload.war/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</span><br><span class="line">		//代理不以&quot;/&quot;结束</span><br><span class="line">		//将匹配到的访问路径直接拼接到代理路径的后面，访问效果http://10.9.216.12:8070/upload.war/upload/homepage/641bcaac4ebbccbd22ebd12fe798e95e.png</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ插件Lombok离线安装</title>
    <url>/IntelliJ/blogs/Intelij%E6%8F%92%E4%BB%B6Lombok%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h1><span id="官网下载地址"><span id="inline-blue">官网下载地址</span></span></h1><p><a href="http://plugins.jetbrains.com/plugin/6317-lombok-plugin">http://plugins.jetbrains.com/plugin/6317-lombok-plugin</a><br><img src="/images/intelliJ/inteliJ_2021_03_25_001.png" alt="下载地址"><br><img src="/images/intelliJ/inteliJ_2021_03_25_002.png" alt="版本选择"><br>自行根据Intelij版本下载对应的安装包，intelij版本和lombok保持一致即可。</p>
<p>提供Intelij2018.2.1版本对应的离线安装包<br><a href="https://pan.baidu.com/s/1kBg_t-75859dIOnRLYe_jg">https://pan.baidu.com/s/1kBg_t-75859dIOnRLYe_jg</a> 提取码：0hn4</p>
<h1><span id="离线安装"><span id="inline-blue">离线安装</span></span></h1><p><img src="/images/intelliJ/inteliJ_2021_03_25_003.png" alt="lombok离线安装"><br>加载对应版本的zip格式的安装包，重启intelij生效</p>
]]></content>
      <categories>
        <category>IntelliJ</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
        <tag>Lombok</tag>
      </tags>
  </entry>
  <entry>
    <title>微信公众号爬虫工具</title>
    <url>/%E5%B7%A5%E5%85%B7/blogs/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E7%88%AC%E8%99%AB%E5%B7%A5%E5%85%B7/</url>
    <content><![CDATA[<h1><span id="功能说明"><span id="inline-blue">功能说明</span></span></h1><p>批量下载微信公众号里面的历史文章</p>
<h1><span id="下载地址"><span id="inline-blue">下载地址</span></span></h1><p><a href="https://pan.baidu.com/s/1AfG-ell55NVScfTJhUam3g">https://pan.baidu.com/s/1AfG-ell55NVScfTJhUam3g</a> 提取码：hq6v</p>
<h1><span id="使用教程"><span id="inline-blue">使用教程</span></span></h1><ul>
<li>解压工具压缩包，运行工具<br><img src="/images/tools/tools_2021_03_24_001.png" alt="工具目录"></li>
<li>设置文件保存方式，可选下载文章的时间范围<br><img src="/images/tools/tools_2021_03_24_002.png" alt="下载设置"></li>
<li>微信电脑端访问公众号，等待文章下载完成。<br><img src="/images/tools/tools_2021_03_24_003.png" alt="下载详情"></li>
</ul>
<p><img src="/images/tools/tools_2021_03_24_004.png" alt="文件下载预览"></p>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>Git仓库初始化导入</title>
    <url>/Git/blogs/Git%E4%BB%93%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%BC%E5%85%A5/</url>
    <content><![CDATA[<h1><span id="创建本地仓库"><span id="inline-blue">创建本地仓库</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git init  //当前目录初始化版本库</span><br><span class="line"></span><br><span class="line">git add . //将当前路径下的所有文件添加到版本库</span><br><span class="line"></span><br><span class="line">git commit -m &quot;first commit&quot; //文件提交到版本库，并添加备注</span><br></pre></td></tr></table></figure>
<h1><span id="远程仓库推送"><span id="inline-blue">远程仓库推送</span></span></h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git remote add origin &quot;远程仓库地址&quot; //关联远程仓库</span><br><span class="line"></span><br><span class="line"> git add -u origin master //首次推送需要加-u参数，其他情况不需要</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="推送报错解决"><span id="inline-blue">推送报错解决</span></span></h1><p>推送报错信息如下：<br>git push error: failed to push some refs to</p>
<p>问题原因： 远程仓库增加了README.md文件在本地仓库下不存在，需要先将远程仓库的内容更新下来，在执行推送</p>
<p>解决方案：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git pull --rebase origin master</span><br></pre></td></tr></table></figure>
<p>再次提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue项目实战</title>
    <url>/Vue/blogs/Vue%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/</url>
    <content><![CDATA[<h1><span id="vue项目实战movieserver"><span id="inline-blue">Vue项目实战movieServer</span></span></h1><h2><span id="项目环境"><span id="inline-blue">项目环境</span></span></h2><p>vue 2.9.6<br>node 12.18.3<br>npm 6.14.6<br>MongoDB 4.0.10</p>
<h2><span id></span></h2><h2><span id="说明"><span id="inline-blue">说明</span></span></h2><p>book_service 后台接口</p>
<p>book_view 前端页面</p>
<p>项目地址：<a href="https://github.com/vanishke/movieServer.git">https://github.com/vanishke/movieServer.git</a></p>
<h2><span id="后端启动"><span id="inline-blue">后端启动</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd book_service </span><br><span class="line">set DEBUG=book_service &amp; npm start</span><br></pre></td></tr></table></figure>
<h2><span id="mongodb安装包下载"><span id="inline-blue">mongoDB安装包下载</span></span></h2><p>下载地址：<a href="https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg">https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg</a><br>提取码：zs5e<br>安装包说明：<br>mongodb-win32-x86_64-2008plus-ssl-4.0.10-signed.msi MongoDB安装包<br>mongodb-compass-1.19.12-win32-x64.msi MongoDB可视化工具</p>
<h2><span id="接口测试工具"><span id="inline-blue">接口测试工具</span></span></h2><p>下载地址：<a href="https://pan.baidu.com/s/1JmO94M6iCLpeNDIjtxxi-Q">https://pan.baidu.com/s/1JmO94M6iCLpeNDIjtxxi-Q</a> 提取码：zi8w<br>Insomnia.Core-2021.1.0.exe ：目前使用的最新版本<br>xdowns.com_Insomnia_Setup_4.2.5.exe： 历史版本<br>Insomnia_2021-03-11.json: 接口测试数据样例</p>
<h3><span id="导入接口样例"><span id="inline-blue">导入接口样例</span></span></h3><p><img src="/images/vue/vue_20210311_001.gif" alt="导入"></p>
<h2><span id="前端启动"><span id="inline-blue">前端启动</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd book_view</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h2><span id="访问"><span id="inline-blue">访问</span></span></h2><p><a href="http://localhost:8000/#/">http://localhost:8000/#/</a><br><img src="/images/vue/vue_20210311_002.png" alt="首页"></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDB安装</title>
    <url>/MongoDB/blogs/MongoDB%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h2><span id="安装环境"><span id="inline-blue">安装环境</span></span></h2><p>windows7 64位<br>MongoDB 4.0.10</p>
<h2><span id="安装包下载"><span id="inline-blue">安装包下载</span></span></h2><p>下载地址：<a href="https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg">https://pan.baidu.com/s/1ivw4tmwJUPZLQtqzxCFlLg</a><br>提取码：zs5e</p>
<p>安装包说明：<br>mongodb-win32-x86_64-2008plus-ssl-4.0.10-signed.msi MongoDB安装包<br>mongodb-compass-1.19.12-win32-x64.msi MongoDB可视化工具</p>
<h2><span id="路径配置"><span id="inline-blue">路径配置</span></span></h2><p>选择”custom”自定义模式下安装，指定安装路径<br><img src="/images/mongoDB/mongoDB_2021_02_20_001.png" alt="安装路径"></p>
<p>取消可视化工具安装，后面单独安装<br><img src="/images/mongoDB/mongoDB_2021_02_20_002.png" alt="安装路径"></p>
<h2><span id="安装mongodb可视化工具"><span id="inline-blue">安装mongoDB可视化工具</span></span></h2><p><img src="/images/mongoDB/mongoDB_2021_02_20_003.png" alt="可视化工具安装配置"><br>设置安装路径，安装完成。</p>
<h2><span id="mongodb配置"><span id="inline-blue">mongoDB配置</span></span></h2><p>mongoDB安装路径下手动创建data、log目录<br><img src="/images/mongoDB/mongoDB_2021_02_20_004.png" alt="目录设置"><br>更改默认IP设置，解决远程连接问题<br>路径：D:\mongoDB\bin\mongod.cfg<br><img src="/images/mongoDB/mongoDB_2021_02_20_005.png" alt="安装路径"></p>
<h2><span id="设置mongodb环境配置"><span id="inline-blue">设置mongoDB环境配置</span></span></h2><p>MONGODB_HOME：D:\mongoDB<br><img src="/images/mongoDB/mongoDB_2021_02_20_006.png" alt="环境变量MONGODB_HOME设置"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Path: %JAVA_HOME%\bin;%JRE_HOME%\jre\bin;C:\Program Files (x86)\Common Files\NetSarang;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;E:\st-android\android-sdk\platform-tools;%ANT_HOME%\bin;%MAVEN_HOME%/bin;%MySQL_HOME%/bin;D:\sqlite-tools;D:\redis_3.2.100\Redis-x64-3.2.100;D:\ffmpeg\bin;D:\nodeJs\;H:\Git\bin;%MONGODB_HOME%\bin;</span><br></pre></td></tr></table></figure>
<p><img src="/images/mongoDB/mongoDB_2021_02_20_007.png" alt="环境变量PATH设置"></p>
<h2><span id="注册mongodb服务"><span id="inline-blue">注册mongoDB服务</span></span></h2><p>安装过程中将mongoDB注册为windows服务失败，手动注册<br>修改mongoDB配置文件，将以下内容注释掉。<br><img src="/images/mongoDB/mongoDB_2021_02_20_008.png" alt="mongoDB服务注册"></p>
<p>管理员模式下执行cmd命令模式，执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mongod --install -f &quot;D:\mongoDB\bin\mongod.cfg&quot;</span><br></pre></td></tr></table></figure>
<p><img src="/images/mongoDB/mongoDB_2021_02_20_009.png" alt="mongoDB服务注册"><br>mongoDB 配置文件位置自行修改。</p>
<h2><span id="连接异常处理"><span id="inline-blue">连接异常处理</span></span></h2><p>mongoDB服务确认启动的情况下，cmd命令下连接异常，提示以下信息<br><img src="/images/mongoDB/mongoDB_2021_02_20_010.png" alt="mongoDB连接异常"></p>
<p>修改配置文件监听IP地址，本地环回地址127.0.0.1改为0.0.0.0(监听所有IP请求)<br>修改前：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># network interfaces</span><br><span class="line">net:</span><br><span class="line">  port: 27017 </span><br><span class="line">  bindIp: 127.0.0.1</span><br></pre></td></tr></table></figure>
<p>修改后</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># network interfaces</span><br><span class="line">net:</span><br><span class="line">  port: 27017 </span><br><span class="line">  bindIp: 0.0.0.0</span><br></pre></td></tr></table></figure>

<h2><span id="服务验证"><span id="inline-blue">服务验证</span></span></h2><p><img src="/images/mongoDB/mongoDB_2021_02_20_011.png" alt="mongoDB服务验证"></p>
<h2><span id="mongodb-compass验证"><span id="inline-blue">mongoDB compass验证</span></span></h2><p>compass安装目录下，双击MongoDBCompass.exe运行<br>连接信息配置如下：<br><img src="/images/mongoDB/mongoDB_2021_02_20_012.png" alt="compass连接配置"></p>
<p>连接成功：<br><img src="/images/mongoDB/mongoDB_2021_02_20_013.png" alt="compass测试"></p>
]]></content>
      <categories>
        <category>MongoDB</category>
      </categories>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>Chrome加载JSONView插件</title>
    <url>/Plugins/blogs/Chrome%E5%8A%A0%E8%BD%BDJSONView%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="安装环境"><span id="inline-blue">安装环境</span></span></h2><p>windows7 64</p>
<h2><span id="下载插件"><span id="inline-blue">下载插件</span></span></h2><p><a href="https://pan.baidu.com/s/1S7LpYl2kWuermDK1aZ6_Ag">https://pan.baidu.com/s/1S7LpYl2kWuermDK1aZ6_Ag</a><br>提取码：4lt1</p>
<h2><span id="加载插件"><span id="inline-blue">加载插件</span></span></h2><p>chrome地址栏访问chrome://extensions/,打开chrome扩展程序<br><img src="/images/chrome/chrome_2021_02_22_001.png" alt="扩展程序"></p>
<p>解压下载的插件压缩包，开启开发者模式，加载JSONView插件文件夹WebContent<br>插件加载路径示例</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">D:\谷歌浏览器jsonView插件\JSONView-for-Chrome-master\WebContent</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>插件加载成功，菜单栏显示如下：<br><img src="/images/chrome/chrome_jsonview_2021_02_22_001.png" alt="验证"><br>请求接口样例：<a href="https://jsonview.com/example.json">https://jsonview.com/example.json</a><br><img src="/images/chrome/chrome_jsonview_2021_02_22_002.png" alt="验证"></p>
]]></content>
      <categories>
        <category>Plugins</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
        <tag>JSONView</tag>
      </tags>
  </entry>
  <entry>
    <title>Chrome加载Postman插件</title>
    <url>/Plugins/blogs/Chrome%E5%8A%A0%E8%BD%BDPostman%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="安装环境"><span id="inline-blue">安装环境</span></span></h2><p>windows7 64</p>
<h2><span id="下载插件"><span id="inline-blue">下载插件</span></span></h2><p><a href="https://pan.baidu.com/s/1R_KgYR3-QK3e8tufvBlcNQ">https://pan.baidu.com/s/1R_KgYR3-QK3e8tufvBlcNQ</a><br>提取码：pvc4</p>
<h2><span id="加载插件"><span id="inline-blue">加载插件</span></span></h2><p>chrome地址栏访问chrome://extensions/,打开chrome扩展程序<br><img src="/images/chrome/chrome_2021_02_22_001.png" alt="扩展程序"></p>
<p>解压下载的插件压缩包，开启开发者模式，加载Postman_v4.1.3插件文件夹<br><img src="/images/chrome/chrome_2021_02_22_002.png" alt="扩展程序"></p>
<p>加载之后，提示报错，报错信息如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Ignored insecure CSP value &quot;https://ssl.google-analytics.com/ga.js&quot; in directive &#x27;script-src&#x27;.</span><br></pre></td></tr></table></figure>
<p>找到插件解压后根目录下的manifest.json文件，打开找到sandbox节点<br>修改前：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;sandbox&quot;: &#123;</span><br><span class="line">      &quot;pages&quot;: [&quot;html/tester_sandbox.html&quot;, &quot;snippet_sandbox.html&quot;],</span><br><span class="line">      &quot;content_security_policy&quot;: &quot;sandbox allow-scripts allow-popups; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; https://ssl.google-analytics.com/ga.js;&quot;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>修改后</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&quot;sandbox&quot;: &#123;</span><br><span class="line">     &quot;pages&quot;: [&quot;html/tester_sandbox.html&quot;, &quot;snippet_sandbox.html&quot;],</span><br><span class="line">     &quot;content_security_policy&quot;: &quot;sandbox allow-scripts allow-popups; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; &quot;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>加载<a href="https://ssl.google-analytics.com/ga.js%E6%8A%A5%E9%94%99%EF%BC%8C%E5%8E%BB%E6%8E%89%E5%B0%B1%E5%8F%AF%E4%BB%A5">https://ssl.google-analytics.com/ga.js报错，去掉就可以</a></p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>chrome左上角点击应用，找到postman插件点击运行，成功运行如下图<br><img src="/images/chrome/chrome_2021_02_22_003.png" alt="验证"><br><img src="/images/chrome/chrome_2021_02_22_004.png" alt="验证"></p>
]]></content>
      <categories>
        <category>Plugins</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
        <tag>Postman</tag>
      </tags>
  </entry>
  <entry>
    <title>空字符&#39;&#39;和0比较问题</title>
    <url>/Js/blogs/%E7%A9%BA%E5%AD%97%E7%AC%A6&#39;&#39;%E4%B8%8E0%E7%9A%84%E6%AF%94%E8%BE%83%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2><span id="实例"><span id="inline-blue">实例</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var a&#x3D;&#39;0&#39;,b&#x3D;&#39;&#39;;</span><br><span class="line">console.log(a,b.a&#x3D;&#x3D;b);</span><br><span class="line">var c&#x3D;0,d&#x3D;&#39;&#39;;</span><br><span class="line">console.log(c,d,c&#x3D;&#x3D;d);</span><br></pre></td></tr></table></figure>
<p>输出结果<br><img src="/images/js/js_2021_02_01_001.png" alt="比较结果"></p>
<h2><span id="问题分析"><span id="inline-blue">问题分析</span></span></h2><ul>
<li>当a,b都是string类型时，比较a,b字符序列、长度是否一致，显然’0’ != ‘’</li>
<li>当a,b有一个是number类型时，先将另外一个转换为number，空字符串转换为number = 0，故 0=0成立</li>
</ul>
<h2><span id="解决方案"><span id="inline-blue">解决方案</span></span></h2><p>采用隐式转换，将数字转换成字符再进行比较。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var a&#x3D;&#39;0&#39;,b&#x3D;&#39;&#39;;</span><br><span class="line">console.log(a,b,&#39;&#39;+a&#x3D;&#x3D;b+&#39;&#39;);</span><br><span class="line">var c&#x3D;0,d&#x3D;&#39;&#39;;</span><br><span class="line">console.log(c,d,c+&#39;&#39;&#x3D;&#x3D;d+&#39;&#39;);</span><br></pre></td></tr></table></figure>
<p>输出结果<br><img src="/images/js/js_2021_02_01_002.png" alt="比较结果"></p>
<h2><span id="实践"><span id="inline-blue">实践</span></span></h2><p>下拉框状态回显</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;select id=<span class="string">&quot;serverStatus&quot;</span> name=<span class="string">&quot;serverStatus&quot;</span> value=<span class="string">&quot;$&#123;serverStatus&#125;&quot;</span>  &gt;</span><br><span class="line">	&lt;option value=&quot;&quot; &gt;全部&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;0&quot; &lt;s:if test=&quot;%&#123;serverStatus+&#x27; &#x27; == 0+&#x27; &#x27;&#125;&quot;&gt;selected&lt;/s:if&gt; &gt;不可服务&lt;/option&gt;</span><br><span class="line">	&lt;option value=&quot;1&quot; &lt;s:if test=&quot;%&#123;serverStatus == 1&#125;&quot;&gt;selected&lt;/s:if&gt;&gt;可服务&lt;/option&gt;   </span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Js</category>
      </categories>
      <tags>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ项目文件同步</title>
    <url>/IntelliJ/blogs/IntelliJ%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5/</url>
    <content><![CDATA[<h2><span id="文件同步"><span id="inline-blue">文件同步</span></span></h2><p>选中项目需要同步的文件，File工具栏选择synchronize同步操作<br><img src="/images/intelliJ/intelliJ_2021_02_18_001.png" alt="同步"></p>
]]></content>
      <categories>
        <category>IntelliJ</category>
      </categories>
      <tags>
        <tag>IntelliJ</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo集成Gitalk</title>
    <url>/Hexo/blogs/Hexo%E9%9B%86%E6%88%90Gitalk/</url>
    <content><![CDATA[<h2><span id="注册应用"><span id="inline-blue">注册应用<span></span></span></span></h2><p>注册地址：<a href="https://github.com/settings/applications/new">https://github.com/settings/applications/new</a><br><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_001.png" alt="应用注册"></p>
<p>参数说明：<br>Application name //应用名称，随便填<br>Homepage URL //可以填自己的博客地址<br>Application description //应用描述<br>Authorization callback URL //填自己要使用Gitalk的博客地址</p>
<p>应用注册成功后会生成Client ID和Client Secret，记下这两个参数值，后面配置文件会用到。</p>
<h2><span id="创建仓库"><span id="inline-blue">创建仓库<span></span></span></span></h2><p>github创建一个仓库用于保存评论<br><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_002.png" alt="评论仓库设置"></p>
<h2><span id="集成gitalk"><span id="inline-blue"> 集成gitalk<span></span></span></span></h2><ol>
<li>新建gitalk.swig</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 文件目录：themes\next\layout_third-party\comments</span><br><span class="line"># 内容如下：</span><br><span class="line">&#123;% if page.comments &amp;&amp; theme.gitalk.enable %&#125;</span><br><span class="line"></span><br><span class="line">  &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;gitalk&#x2F;dist&#x2F;gitalk.css&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;gitalk&#x2F;dist&#x2F;gitalk.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">   &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">        var gitalk &#x3D; new Gitalk(&#123;</span><br><span class="line">          clientID: &#39;&#123;&#123; theme.gitalk.ClientID &#125;&#125;&#39;,</span><br><span class="line">          clientSecret: &#39;&#123;&#123; theme.gitalk.ClientSecret &#125;&#125;&#39;,</span><br><span class="line">          repo: &#39;&#123;&#123; theme.gitalk.repo &#125;&#125;&#39;,</span><br><span class="line">          owner: &#39;&#123;&#123; theme.gitalk.owner &#125;&#125;&#39;,</span><br><span class="line">          admin: &#123;&#123; theme.gitalk.adminUser &#125;&#125;,</span><br><span class="line">          id: &#123;&#123; theme.gitalk.ID &#125;&#125;,</span><br><span class="line">          labels: &#123;&#123; theme.gitalk.labels &#125;&#125;,</span><br><span class="line">          perPage: &#123;&#123; theme.gitalk.perPage &#125;&#125;,</span><br><span class="line">          pagerDirection: &#39;&#123;&#123; theme.gitalk.pagerDirection &#125;&#125;&#39;,</span><br><span class="line">          createIssueManually: &#123;&#123; theme.gitalk.createIssueManually &#125;&#125;,</span><br><span class="line">          distractionFreeMode: &#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        gitalk.render(&#39;gitalk-container&#39;)           </span><br><span class="line">       &lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在gitalk.swig的同级目录下找到index.swig，在文件末尾添加<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% include &#39;gitalk.swig&#39; %&#125;</span><br></pre></td></tr></table></figure></li>
<li>打开\hexo\themes\next\layout\_partials\comments.swig,添加以下内容，图中所示位置<br><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_003.png" alt="gitalk评论设置"></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class="line">&lt;div id&#x3D;&quot;gitalk-container&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改hexo根目录_config.xml配置文件<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"># 以下内容配置时注释需要去掉，否则会引起报错</span><br><span class="line">gitalk:</span><br><span class="line">enable: true #是否开启Gitalk</span><br><span class="line">  ClientID: xxxxxx #创建应用生成的Client ID </span><br><span class="line">  ClientSecret: xxxxxxxxxxxx #创建应用生成的Client Secret</span><br><span class="line">  repo: gitalk #创建的评论仓库</span><br><span class="line">  owner: iosite #这个项目名的拥有者（GitHub账号或组织）</span><br><span class="line">  adminUser: &quot;[&#x27;iosite&#x27;]&quot; #管理员用户</span><br><span class="line">  ID: location.pathname #页面ID，不知道默认就行</span><br><span class="line">  labels: &quot;[&#x27;Gitalk&#x27;]&quot; #GitHub issues的标签</span><br><span class="line">  perPage: 15 #每页多少个评论</span><br><span class="line">  pagerDirection: last #排序方式是从旧到新（first）还是从新到旧（last）</span><br><span class="line">  createIssueManually: true #如果当前页面没有相应的 isssue ，且登录的用户属于 admin，则会自动创建 issue。如果设置为 true，则显示一个初始化页面，创建 issue 需要点击 init 按钮。</span><br><span class="line">  distractionFreeMode: false #是否启用快捷键(cmd|ctrl + enter) 提交评论.</span><br></pre></td></tr></table></figure>
<h2><span id="验证"><span id="inline-blue">验证<span></span></span></span></h2><img src="/images/hexo/gitalk/hexo_gitalk_2021_01-19_004.png" alt="gitalk评论验证"></li>
</ol>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
        <tag>Gitalk</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo添加分享功能</title>
    <url>/Hexo/blogs/Hexo%E6%B7%BB%E5%8A%A0%E5%88%86%E4%BA%AB%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><p>hexo站点根目录目录下执行</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/theme-next/theme-next-needmoreshare2 themes/next/source/lib/needsharebutton</span><br></pre></td></tr></table></figure>

<h2><span id="修改next主题配置文件"><span id="inline-blue">修改Next主题配置文件</span></span></h2><p>打开themes/next/_config.yml 搜索关键字needmoreshare2 修改为下面设置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">needmoreshare2:</span><br><span class="line">  enable: true</span><br><span class="line">  postbottom:</span><br><span class="line">    enable: true #开启底部分享按钮</span><br><span class="line">    options:</span><br><span class="line">      iconStyle: box</span><br><span class="line">      boxForm: horizontal</span><br><span class="line">      position: bottom</span><br><span class="line">      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span><br><span class="line">  float:</span><br><span class="line">    enable: false #左侧分享不开启</span><br><span class="line">    options:</span><br><span class="line">      iconStyle: box</span><br><span class="line">      boxForm: horizontal</span><br><span class="line">      position: Left</span><br><span class="line">      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span><br></pre></td></tr></table></figure>

<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/hexo/next/hexo_next_2021_01_19_001.png" alt="分享"></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo添加hexo-neat插件</title>
    <url>/Hexo/blogs/Hexo%E6%B7%BB%E5%8A%A0hexo-neat%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<h2><span id="安装插件"><span id="inline-blue">安装插件</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-neat --save</span><br></pre></td></tr></table></figure>
<h2><span id="站点配置"><span id="inline-blue">站点配置</span></span></h2><p>hexo _config.yml文件添加</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> hexo-neat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 博文压缩</span></span><br><span class="line">neat_enable: true</span><br><span class="line"><span class="meta">#</span><span class="bash"> 压缩html</span></span><br><span class="line">neat_html:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line"><span class="meta">#</span><span class="bash"> 压缩css</span>  </span><br><span class="line">neat_css:</span><br><span class="line">  enable: true</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;**/*.min.css&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 压缩js</span></span><br><span class="line">neat_js:</span><br><span class="line">  enable: true</span><br><span class="line">  mangle: true</span><br><span class="line">  output:</span><br><span class="line">  compress:</span><br><span class="line">  exclude:</span><br><span class="line">    - &#x27;**/*.min.js&#x27;</span><br><span class="line">	- &#x27;**/*.min.css&#x27;</span><br><span class="line">    - &#x27;**/jquery.fancybox.pack.js&#x27;</span><br><span class="line">    - &#x27;**/index.js&#x27;</span><br><span class="line">	- &#x27;**/comments.gitalk.js&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>Vercel托管Hexo博客</title>
    <url>/Hexo/blogs/Vercel%E6%89%98%E7%AE%A1Hexo%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h2><span id="背景"><span id="inline-blue">背景<span></span></span></span></h2><p>hexo发布的静态文件推送到了github pages，直接访问页面非常慢，使用vercel代理github pages，访问页面加载速度有明显提升。</p>
<h2><span id="注册vercel"><span id="inline-blue">注册vercel<span></span></span></span></h2><p><a href="https://vercel.com/">vercel官网地址</a></p>
<p>绑定github账号：<br><img src="/images/hexo/vercel/hexo_vercel_20210115_001.png" alt="账号绑定"><br>注意github用户验证的邮箱账号，qq邮箱验证无法通过，网易邮箱亲测可行。</p>
<h2><span id="导入仓库"><span id="inline-blue">导入仓库<span></span></span></span></h2><p><img src="/images/hexo/vercel/hexo_vercel_20210115_002.png" alt="导入仓库"><br>这里导入的是hexo通过hexo d 部署同步到github pages上的public文件夹下的静态文件。<br>找到github pages上hexo博客，切换到setting选项，找到github pages 选项。<br><img src="/images/hexo/vercel/hexo_vercel_20210115_003.png" alt="博客代理设置"><br><img src="/images/hexo/vercel/hexo_vercel_20210115_004.png" alt="博客代理设置"></p>
<h2><span id="验证"><span id="inline-blue">验证<span></span></span></span></h2><p><img src="/images/hexo/vercel/hexo_vercel_20210115_005.png" alt="验证"><br><img src="/images/hexo/vercel/hexo_vercel_20210115_006.png" alt="验证"></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo设置图片懒加载</title>
    <url>/Hexo/blogs/Hexo%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/</url>
    <content><![CDATA[<h2><span id="下载样式"><span id="inline-blue">下载样式</span></span></h2><p>在主题文件夹下的scripts文件夹里,新增一个js文件，名字可以任意。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>); </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyloadImg</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> LZ= cheerio.load(source, &#123;</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//遍历所有 img 标签，添加data-original属性</span></span><br><span class="line">    LZ(<span class="string">&#x27;img&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index, element</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> oldsrc = LZ(element).attr(<span class="string">&#x27;src&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (oldsrc) &#123;</span><br><span class="line">            LZ(element).removeAttr(<span class="string">&#x27;src&#x27;</span>);</span><br><span class="line">            LZ(element).attr(&#123;</span><br><span class="line">                </span><br><span class="line">                 <span class="string">&#x27;data-original&#x27;</span>: oldsrc</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> LZ.html();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在渲染之前，更改 img 标签</span></span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_render:html&#x27;</span>, lazyloadImg);</span><br></pre></td></tr></table></figure>

<p>打开themes/next/source/js/src/utils.js文件,找到lazyLoadPostsImages函数对应位置，将函数内容替换为以下内容。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">lazyLoadPostsImages: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).lazyload(&#123;</span><br><span class="line">	   <span class="comment">//设置懒加载你默认占位图,自己下载一张加载图片放在hexo/themes/next/source/images路径下，名称//为loading.gif</span></span><br><span class="line">         placeholder: <span class="string">&#x27;/images/loading.gif&#x27;</span>,</span><br><span class="line">		 <span class="comment">// 加载效果</span></span><br><span class="line">        effect: <span class="string">&#x27;fadeIn&#x27;</span>,</span><br><span class="line">        threshold : <span class="number">100</span>, <span class="comment">//设置图片在距离屏幕200px时提前加载</span></span><br><span class="line">        failure_limit : <span class="number">20</span>,<span class="comment">//将 failurelimit 设为 20 ，当插件找到 20 //个不在可见区域的图片时停止搜索 </span></span><br><span class="line">        skip_invisible : <span class="literal">false</span> <span class="comment">// 加载隐藏图片</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客源文档备份</title>
    <url>/Hexo/blogs/Hexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<h2><span id="实现原理"><span id="inline-blue">实现原理</span></span></h2><p>通过监听hexo事件完成博客源码备份，hexo主要事件如下表</p>
<table>
<thead>
<tr>
<th align="center">事件名称</th>
<th align="center">时间发生时间</th>
</tr>
</thead>
<tbody><tr>
<td align="center">deployBefore</td>
<td align="center">在部署完成前发布</td>
</tr>
<tr>
<td align="center">deployAfter</td>
<td align="center">在部署成功后发布</td>
</tr>
<tr>
<td align="center">exit</td>
<td align="center">在 Hexo 结束前发布</td>
</tr>
<tr>
<td align="center">generateBefore</td>
<td align="center">在静态文档生成前发布</td>
</tr>
<tr>
<td align="center">generateAfter</td>
<td align="center">在静态文档生成后发布</td>
</tr>
<tr>
<td align="center">new</td>
<td align="center">在文章文档建立后发布</td>
</tr>
</tbody></table>
<p>监听deployAfter事件，hexo上传文件到github之后自动运行git备份命令，完成博客备份。</p>
<h2><span id="hexo源码添加git仓库"><span id="inline-blue">hexo源码添加Git仓库</span></span></h2><ol>
<li><p>github仓库新建repository,命名为hexoBackup</p>
</li>
<li><p>进入本地hexo目录，执行以下命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure></li>
<li><p>设置远程仓库地址，并更新。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:XXX/hexoBackup.git //设置需要同步的远程仓库地址</span><br><span class="line">git pull origin master //将本地代码上传到远程仓库</span><br></pre></td></tr></table></figure></li>
<li><p>修改 .gitignore文档（如果没有请手动创建一个），在里面加入*.log(同步日志) 和 public/ (hexo生成的html文件)以及.deploy*/。因为每次执行hexo generate命令时，上述目录都会被重写更新。因此忽略这两个目录下的文档更新，加快 push速度。</p>
</li>
<li><p>执行以下命令，完成本地源码提交。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add . // 提交当前路径下的源码</span><br><span class="line">git commit -m &quot;添加hexo源码文档作为备份&quot; // 提交日志</span><br></pre></td></tr></table></figure></li>
<li><p>推送到远程仓库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<h2><span id="安装shelljs模块"><span id="inline-blue">安装shelljs模块</span></span></h2></li>
<li><p>要实现这个自动备份功能，需要依赖 Node.js的一个 shelljs 模块,该模块重新包装了child_process,调用系统命令更加的方便。该模块需要安装后使用。</p>
<p>在命令中键入以下命令，完成shelljs模块的安装：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install --save shelljs</span><br></pre></td></tr></table></figure></li>
<li><p>编写自动备份脚本<br>待到模块安装完成，在Hexo根目录的scripts文档夹下新建一个js文档，文档名随意取。<br>然后在脚本中，写入以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;shelljs/global&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    hexo.on(<span class="string">&#x27;deployAfter&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        run();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;产生了一个错误&lt;(￣3￣)&gt; !，错误详情为：&quot;</span> + e.toString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!which(<span class="string">&#x27;git&#x27;</span>)) &#123;</span><br><span class="line">        echo(<span class="string">&#x27;Sorry, this script requires git&#x27;</span>);</span><br><span class="line">        exit(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        echo(<span class="string">&quot;======================Auto Backup Begin===========================&quot;</span>);</span><br><span class="line">        cd(<span class="string">&#x27;H:/hexo&#x27;</span>);    </span><br><span class="line">        <span class="keyword">if</span> (exec(<span class="string">&#x27;git add --all&#x27;</span>).code !== <span class="number">0</span>) &#123;</span><br><span class="line">            echo(<span class="string">&#x27;Error: Git add failed&#x27;</span>);</span><br><span class="line">            exit(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (exec(<span class="string">&#x27;git commit -am &quot;Form auto backup script&#x27;</span>s commit<span class="string">&quot;&#x27;).code !== 0) &#123;</span></span><br><span class="line"><span class="string">            echo(&#x27;Error: Git commit failed&#x27;);</span></span><br><span class="line"><span class="string">            exit(1);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        if (exec(&#x27;git push origin master&#x27;).code !== 0) &#123;</span></span><br><span class="line"><span class="string">            echo(&#x27;Error: Git push failed&#x27;);</span></span><br><span class="line"><span class="string">            exit(1);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        echo(&quot;</span>==================Auto Backup Complete============================<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>修改脚本中路径，替换为对应源码路径，注意仓库分支是否为master,保存脚本并退出。</p>
<p>，</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p>执行 hexo d 命令，执行结果如下:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo d</span></span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying files from public folder...</span><br><span class="line">INFO  Copying files from extend dirs...</span><br><span class="line">[master 383dcf1] Site updated: 2021-01-14 16:43:22</span><br><span class="line"> 110 files changed, 3704 insertions(+), 32 deletions(-)</span><br><span class="line">Fatal: HttpRequestException encountered.</span><br><span class="line">Username for &#x27;https://github.com&#x27;: vanishke</span><br><span class="line">Counting objects: 253, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (137/137), done.</span><br><span class="line">Writing objects: 100% (253/253), 84.53 KiB | 0 bytes/s, done.</span><br><span class="line">Total 253 (delta 109), reused 0 (delta 0)</span><br><span class="line">remote: Resolving deltas: 100% (109/109), completed with 38 local objects.</span><br><span class="line">To https://github.com/vanishke/hexo.git</span><br><span class="line">   55364f0..383dcf1  HEAD -&gt; master</span><br><span class="line">Branch master set up to track remote branch master from https://github.com/vanishke/hexo.git.</span><br><span class="line">INFO  Deploy done: git</span><br><span class="line">======================Auto Backup Begin===========================</span><br><span class="line">[master 9f9c64d] blog auto backup script&#x27;s commit</span><br><span class="line"> 36 files changed, 1133 insertions(+), 11 deletions(-)</span><br><span class="line">To git@github.com:vanishke/hexoBackup.git</span><br><span class="line">   b6ccffd..9f9c64d  master -&gt; master</span><br><span class="line">==================Auto Backup Complete============================</span><br><span class="line"></span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo使用Next主题异常</title>
    <url>/Hexo/blogs/Hexo%E4%BD%BF%E7%94%A8Next%E4%B8%BB%E9%A2%98%E5%BC%82%E5%B8%B8/</url>
    <content><![CDATA[<h2><span id="问题描述"><span id="inline-blue">问题描述<span></span></span></span></h2><p>访问hexo ,出现以下提示</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;% extends &#x27;_layout.swig&#x27; %&#125; &#123;% import &#x27;_macro/post.swig&#x27; as post_template %&#125; &#123;% import &#x27;_macro/sidebar.swig&#x27; as sidebar_template %&#125; &#123;% block title %&#125;&#123;&#123; config.title &#125;&#125;&#123;% if theme.index_with_subtitle and config.subtitle %&#125; - &#123;&#123;config.subtitle &#125;&#125;&#123;% endif %&#125;&#123;% endblock %&#125; &#123;% block page_class %&#125; &#123;% if is_home() %&#125;page-home&#123;% endif -%&#125; &#123;% endblock %&#125; &#123;% block content %&#125;</span><br><span class="line">&#123;% for post in page<span class="selector-class">.posts</span> %&#125; &#123;&#123; post_template<span class="selector-class">.render</span>(post, true) &#125;&#125; &#123;% endfor %&#125;</span><br><span class="line">&#123;% include &#x27;_partials/pagination.swig&#x27; %&#125; &#123;% endblock %&#125; &#123;% block sidebar %&#125; &#123;&#123; sidebar_template.render(false) &#125;&#125; &#123;% endblock %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2><span id="问题原因"><span id="inline-blue">问题原因</span></span></h2><p>hexo在5.0之后把swig给删除了需要自己手动安装</p>
<h2><span id="解决办法">解决办法</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i hexo-renderer-swig</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo归档页优化</title>
    <url>/Hexo/blogs/Hexo%E5%BD%92%E6%A1%A3%E9%A1%B5%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h2><span id="hexo归档页优化"><span id="inline-blue">hexo归档页优化<span></span></span></span></h2><p>修改/themes/next/layout/_macro/post-collapse.swig后的代码如下：</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo设置下载样式</title>
    <url>/Hexo/blogs/Hexo%E6%B7%BB%E5%8A%A0%E4%B8%8B%E8%BD%BD%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="下载样式">下载样式</span></h2><p>打开themes/next/source/css/_custom 下的 custom.styl 文件,添加属性样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-id">#download</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: inline-block;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">background</span>: transparent;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line"><span class="attribute">transition</span>: all .<span class="number">5s</span> ease;</span><br><span class="line"><span class="attribute">font-weight</span>: bold;</span><br><span class="line">&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在你需要编辑的文章地方。放置如下代码</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;a id=&quot;download&quot; href=&quot;http://mirrors.aliyun.com/docker-toolbox/windows/docker-toolbox/?spm=5176.8351553.0.0.4bc61991tQpsnV&quot;&gt;&lt;i class=&quot;fa fa-download&quot;&gt;&lt;/i&gt;&lt;span&gt; 阿里云Docker镜像&lt;/span&gt; &lt;/a&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows实现Nginx反向代理</title>
    <url>/Nginx/blogs/Windows%E5%AE%9E%E7%8E%B0nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE"><span id="inline-blue">nginx代理设置</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">nginx下载</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">nginx代理设置</span></a></li>
<li><a href="#span-idinline-blue%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E9%AA%8C%E8%AF%81span"><span id="inline-blue">反向代理验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><h1><span id="nginx代理设置"><span id="inline-blue">nginx代理设置</span></span></h1><p>windows 7<br>nginx-1.16.1</p>
<h1><span id="nginx下载"><span id="inline-blue">nginx下载</span></span></h1><p><a href="http://nginx.org/en/download.html">官方下载地址</a><br>笔者使用的nginx-1.16.1版本</p>
<a id="more"></a>

<h1><span id="nginx代理设置"><span id="inline-blue">nginx代理设置</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &lt;span id=&quot;inline-blue&quot;&gt;http下server子节点设置&lt;/span&gt;</span></span><br><span class="line">server &#123;</span><br><span class="line">        listen       8089; <span class="comment">#nginx监听访问端口号</span></span><br><span class="line">        server_name  10.9.212.55; <span class="comment">#监听访问IP</span></span><br><span class="line"></span><br><span class="line">        charset gbk,utf-8; <span class="comment">#编码设置</span></span><br><span class="line"></span><br><span class="line">        access_log  logs/host.access.log ; <span class="comment">#访问日志存放位置</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">			charset gbk,utf-8;</span><br><span class="line">			autoindex on; <span class="comment">#开启目录浏览功能</span></span><br><span class="line">            root  H:/home/report_cd/; <span class="comment">#代理本地FTP用户访问路径</span></span><br><span class="line">			proxy_connect_timeout 1;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h1><span id="反向代理验证"><span id="inline-blue">反向代理验证</span></span></h1><p><img src="/images/nginx/nginx_20210107_05.png" alt="nginx反向代理验证"></p>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Elasticsearch导入导出</title>
    <url>/Elasticsearch/blogs/Elasticsearch%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<h2><span id="环境"><span id="inline-blue">环境</span></span></h2><p>linux </p>
<h2><span id="部署"><span id="inline-blue">部署</span></span></h2><p>下载工具压缩包<br>下载地址：<a href="https://pan.baidu.com/s/1V3If_94FJZRx-004ycLIaQ">https://pan.baidu.com/s/1V3If_94FJZRx-004ycLIaQ</a><br>提取码：qlpg</p>
<p>EsToolNew.zip上传服务器,解压</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demo_mdn EsToolNew]#unzip EsToolNew.zip</span><br></pre></td></tr></table></figure>

<p><img src="/images/elasticsearch/es_20210226_001.png" alt="部署目录"></p>
<p>config:配置需要访问的elasticsearch实际地址<br>start.sh: 启动脚本<br>stop.sh: 停止脚本<br>json: 需要导入的数据脚本<br>默认访问端口：8056</p>
<h3><span id="启动方式"><span id="inline-blue">启动方式</span></span></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@demo_mdn EsToolNew]# sh start.sh</span><br></pre></td></tr></table></figure>
<h2><span id="访问"><span id="inline-blue">访问</span></span></h2><p><img src="/images/elasticsearch/es_20210226_002.png" alt="访问"></p>
<h2><span id="导入"><span id="inline-blue">导入</span></span></h2><p><img src="/images/elasticsearch/es_20210226_003.png" alt="导入"></p>
<h2><span id="导入"><span id="inline-blue">导入</span></span></h2><p><img src="/images/elasticsearch/es_20210226_004.png" alt="导出"></p>
]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title>windows注册Elasticsearch服务</title>
    <url>/Elasticsearch/blogs/Windows%E6%B3%A8%E5%86%8CElasticsearch%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">elasticsearch下载</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E6%B3%A8%E5%86%8Cspan"><span id="inline-blue">elasticsearch注册</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">elasticsearch服务自启动设置</span></a></li>
<li><a href="#span-idinline-blueelasticsearch%E6%9C%8D%E5%8A%A1%E9%AA%8C%E8%AF%81span"><span id="inline-blue">elasticsearch服务验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>windows 7<br>elasticsearch-2.4.4</p>
<h1><span id="elasticsearch下载"><span id="inline-blue">elasticsearch下载</span></span></h1><p><a href="https://www.elastic.co/cn/downloads/past-releases/elasticsearch-2-4-4">官方下载地址</a><br>笔者使用的elasticsearch-2.4.4版本</p>
<h1><span id="elasticsearch注册"><span id="inline-blue">elasticsearch注册</span></span></h1><p>1.运行windows cmd命令，进入nginx安装目录D:\ElasticSearch.2.4.4\elasticsearch-2.4.4\elasticsearch-2.4.4\bin</p>
<p>2.执行注册服务命令 elasticsearch.bat install</p>
<p>3.如果需要卸载elasticsearch服务，执行elasticsearch.bat uninstall</p>
<h1><span id="elasticsearch服务自启动设置"><span id="inline-blue">elasticsearch服务自启动设置</span></span></h1><p><img src="/images/elasticsearch/es_20201231_01.png" alt="elasticsearch服务设置"><br><img src="/images/elasticsearch/es_20201231_02.png" alt="elasticsearch服务设置"></p>
<h1><span id="elasticsearch服务验证"><span id="inline-blue">elasticsearch服务验证</span></span></h1><p><img src="/images/elasticsearch/es_20201231_03.png" alt="elasticsearch服务验证"></p>
]]></content>
      <categories>
        <category>Elasticsearch</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows注册Nginx服务</title>
    <url>/Nginx/blogs/Windows%E6%B3%A8%E5%86%8CNginx%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-bluenginx%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">nginx下载</span></a></li>
<li><a href="#span-idinline-blue%E6%B3%A8%E5%86%8C%E5%B7%A5%E5%85%B7span"><span id="inline-blue">注册工具</span></a></li>
<li><a href="#span-idinline-bluenginx%E6%B3%A8%E5%86%8Cspan"><span id="inline-blue">nginx注册</span></a></li>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83%E8%B0%83%E8%AF%95span"><span id="inline-blue">环境调试</span></a></li>
<li><a href="#span-idinline-bluenginx%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">nginx服务自启动设置</span></a></li>
<li><a href="#span-idinline-bluenginx%E6%9C%8D%E5%8A%A1%E9%AA%8C%E8%AF%81span"><span id="inline-blue">nginx服务验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>windows 7<br>nginx-1.16.1<br>winsw-2.0.2-bin.exe</p>
<h1><span id="nginx下载"><span id="inline-blue">nginx下载</span></span></h1><p><a href="http://nginx.org/en/download.html">官方下载地址</a><br>笔者使用的nginx-1.16.1版本</p>
<h1><span id="注册工具"><span id="inline-blue">注册工具</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">官方下载地址：http://repo.jenkins-ci.org/releases/com/sun/winsw/winsw/</span><br><span class="line">笔者使用的2.0.2版本</span><br></pre></td></tr></table></figure>
<h1><span id="nginx注册"><span id="inline-blue">nginx注册</span></span></h1><p>1.将nginx解压至指定安装位置,D:\nginx-1.16.1\nginx-1.16.1<br><img src="/images/nginx/nginx_20201231_01.png" alt="nginx安装目录"></p>
<p>2.将winsw-2.0.2-bin.exe复制到nginx目录：D:\nginx-1.16.1\nginx-1.16.1,并将其改成nginx-service.exe </p>
<p>3.新建一个xml文件nginx-service.xml,内容如下,注意里面目录对应关系</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>nginx<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nginx Service<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>High Performance Nginx Service<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">logpath</span>&gt;</span>D:\nginx-1.16.1\nginx-1.16.1\logs<span class="tag">&lt;/<span class="name">logpath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">log</span> <span class="attr">mode</span>=<span class="string">&quot;roll-by-size&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sizeThreshold</span>&gt;</span>10240<span class="tag">&lt;/<span class="name">sizeThreshold</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">keepFiles</span>&gt;</span>8<span class="tag">&lt;/<span class="name">keepFiles</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">log</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executable</span>&gt;</span>D:\nginx-1.16.1\nginx-1.16.1\nginx.exe<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">startarguments</span>&gt;</span>-p D:\nginx-1.16.1\nginx-1.16.1\Nginx<span class="tag">&lt;/<span class="name">startarguments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stopexecutable</span>&gt;</span>D:\nginx-1.16.1\nginx-1.16.1\nginx.exe<span class="tag">&lt;/<span class="name">stopexecutable</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stoparguments</span>&gt;</span>-p D:\nginx-1.16.1\nginx-1.16.1\Nginx -s stop<span class="tag">&lt;/<span class="name">stoparguments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>4.运行windows cmd命令，进入nginx安装目录，执行nginx注册服务命令nginx-service.exe install，如果注册没有成功需要执行nginx卸载命令：nginx-service.exe uninstall</p>
<h1><span id="环境调试"><span id="inline-blue">环境调试</span></span></h1><p>1.如果nginx启动没有成功，需要根据nginx启动日志定位错误信息，日志文件所在位置D:\nginx-1.16.1\nginx-1.16.1\logs,大部分情况下是端口和配置文件目录设置问题。</p>
<h1><span id="nginx服务自启动设置"><span id="inline-blue">nginx服务自启动设置</span></span></h1><p>运行windows cmd命令，找到nginx服务，右键属性可配置nginx启动方式。<br><img src="/images/nginx/nginx_20201231_02.png" alt="nginx服务验证"><br><img src="/images/nginx/nginx_20201231_03.png" alt="nginx服务验证"></p>
<h1><span id="nginx服务验证"><span id="inline-blue">nginx服务验证</span></span></h1><p><img src="/images/nginx/nginx_20201231_04.png" alt="nginx服务验证"></p>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>windows注册Redis服务</title>
    <url>/Redis/blogs/Windows%E6%B3%A8%E5%86%8CRedis%E6%9C%8D%E5%8A%A1/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E7%8E%AF%E5%A2%83span"><span id="inline-blue">环境</span></a></li>
<li><a href="#span-idinline-blueredis%E4%B8%8B%E8%BD%BDspan"><span id="inline-blue">Redis下载</span></a></li>
<li><a href="#span-idinline-blueredis%E6%B3%A8%E5%86%8Cspan"><span id="inline-blue">Redis注册</span></a></li>
<li><a href="#span-idinline-blueredis%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%90%AF%E5%8A%A8%E8%AE%BE%E7%BD%AEspan"><span id="inline-blue">Redis服务自启动设置</span></a></li>
<li><a href="#span-idinline-blueredis%E6%9C%8D%E5%8A%A1%E9%AA%8C%E8%AF%81span"><span id="inline-blue">Redis服务验证</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="环境"><span id="inline-blue">环境</span></span></h1><p>windows 7<br>Redis-x64-3.2.100</p>
<h1><span id="redis下载"><span id="inline-blue">Redis下载</span></span></h1><p><a href="https://github.com/microsoftarchive/redis/releases">下载地址</a><br>笔者使用的Redis-x64-3.2.100版本</p>
<h1><span id="redis注册"><span id="inline-blue">Redis注册</span></span></h1><p>1.运行windows cmd命令，进入Redis安装目录D:\redis_3.2.100\Redis-x64-3.2.100</p>
<p>2.执行注册服务命令 redis-server –service-install redis.windows-service.conf </p>
<p>3.如果需要卸载Redis服务，执行redis-server –service-uninstall</p>
<h1><span id="redis服务自启动设置"><span id="inline-blue">Redis服务自启动设置</span></span></h1><p><img src="/images/redis/20210104_01.png" alt="Redis服务设置"></p>
<h1><span id="redis服务验证"><span id="inline-blue">Redis服务验证</span></span></h1><p><img src="/images/redis/20210104_02.png" alt="Redis服务验证"></p>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux创建FTP</title>
    <url>/FTP/blogs/Linux%E5%88%9B%E5%BB%BAFTP/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp%E7%94%A8%E6%88%B7%E7%BB%84span"><span id="inline-blue">创建FTP用户组</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp%E7%94%A8%E6%88%B7span"><span id="inline-blue">创建FTP用户</span></a></li>
<li><a href="#span-idinline-bluevsftpd%E5%8F%82%E6%95%B0%E5%8F%8A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8Espan"><span id="inline-blue">vsftpd参数及配置文件说明</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81span"><span id="inline-blue">验证</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="创建ftp用户组"><span id="inline-blue">创建FTP用户组</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">添加ftp用户组</span></span><br><span class="line">groupadd ftp</span><br></pre></td></tr></table></figure>
<h2><span id="创建ftp用户"><span id="inline-blue">创建FTP用户</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">useradd -G ftp -d /home/oracle -s /sbin/nologin  oracle</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -G 指定用户所在用户组</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 指定用户工作目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -s  /sbin/nologin 不允许用户xshell方式登陆</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> oracle 创建FTP用户名</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">设置用户密码</span></span><br><span class="line">passwd oracle</span><br></pre></td></tr></table></figure>
<h2><span id="vsftpd参数及配置文件说明"><span id="inline-blue">vsftpd参数及配置文件说明</span></span></h2><p>ftpusers: 用户黑名单<br>user_list: 用户是否受到限制只能访问主目录，与参数chroot_local_user配合使用，chroot_local_user=yes,表示user_list里面的用户不受限制，chroot_local_user=NO,表示user_list里面的用户受限制，只能访问主目录<br>chroot_list：表示FTP用户只能访问自己的工作目录，与参数chroot_list_enable和chroot_list_file配合使用</p>
<h2><span id="验证"><span id="inline-blue">验证</span></span></h2><p><img src="/images/linux/ftp_20211118_001.png" alt="FTP验证"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>FTP</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx基本命令</title>
    <url>/Nginx/blogs/Nginx%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0nginx%E8%87%AA%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6span"><span id="inline-blue">添加nginx自启动文件</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90span"><span id="inline-blue">添加文件可执行权限</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E5%BC%80%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8span"><span id="inline-blue">设置开启自启动</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E6%98%AF%E5%90%A6%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9Fspan"><span id="inline-blue">验证服务是否添加成功</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E8%AF%A2nginx%E6%98%AF%E5%90%A6%E5%90%AF%E5%8A%A8span"><span id="inline-blue">查询nginx是否启动</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BDnginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6span"><span id="inline-blue">重新加载nginx配置文件</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2nginx%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">停止nginx服务</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="添加nginx自启动文件"><span id="inline-blue">添加nginx自启动文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#文件内容参考nginx官网设置,https://www.nginx.com/resources/wiki/start/topics/examples/redhatnginxinit/ ,注意修改其中nginx可执行文件路径和指定配置文件路径</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># vim /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="添加文件可执行权限"><span id="inline-blue">添加文件可执行权限</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chmod a+x /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="设置开启自启动"><span id="inline-blue">设置开启自启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig --add /etc/init.d/nginx</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig nginx on</span></span><br></pre></td></tr></table></figure>

<h2><span id="验证服务是否添加成功"><span id="inline-blue">验证服务是否添加成功</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx start;</span></span><br><span class="line">正在启动 nginx：                                           [确定]</span><br></pre></td></tr></table></figure>

<h2><span id="查询nginx是否启动"><span id="inline-blue">查询nginx是否启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># ps -ef | grep nginx</span></span><br><span class="line">root     19139     1  0 17:58 ?        00:00:00 nginx: master process /usr/<span class="built_in">local</span>/nginx/sbin/nginx -c /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line">root     19140 19139  0 17:58 ?        00:00:00 nginx: worker process                                          </span><br><span class="line">root     19226 15760  0 17:59 pts/0    00:00:00 grep nginx</span><br></pre></td></tr></table></figure>


<h2><span id="重新加载nginx配置文件"><span id="inline-blue">重新加载nginx配置文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx reload</span></span><br><span class="line">nginx: the configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line">重新载入 nginx：                                           [确定]</span><br><span class="line">You have new mail <span class="keyword">in</span> /var/spool/mail/root</span><br></pre></td></tr></table></figure>

<h2><span id="停止nginx服务"><span id="inline-blue">停止nginx服务</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx stop</span></span><br><span class="line">停止 nginx：                                               [确定]</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx常用启动命令</title>
    <url>/Nginx/blogs/Nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%90%AF%E5%8A%A8span"><span id="inline-blue">启动</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2span"><span id="inline-blue">停止</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BDspan"><span id="inline-blue">重新加载</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="启动"><span id="inline-blue">启动</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./nginx </span><br><span class="line">./nginx -c dir(指定配置文件所在路径)</span><br></pre></td></tr></table></figure>

<h1><span id="停止"><span id="inline-blue">停止</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./nginx -s quit /nginx处理完任务后停止</span><br><span class="line">./nginx -s stop /强制停止nginx进程</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1><span id="重新加载"><span id="inline-blue">重新加载</span></span></h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./nginx -s reload /重新加载nginx.cnf配置文件</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx开机自启动</title>
    <url>/Nginx/blogs/Nginx%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0nginx%E8%87%AA%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6span"><span id="inline-blue">添加nginx自启动文件</span></a></li>
<li><a href="#span-idinline-blue%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90span"><span id="inline-blue">添加文件可执行权限</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E5%BC%80%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8span"><span id="inline-blue">设置开启自启动</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E6%98%AF%E5%90%A6%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9Fspan"><span id="inline-blue">验证服务是否添加成功</span></a></li>
<li><a href="#span-idinline-blue%E6%9F%A5%E8%AF%A2nginx%E6%98%AF%E5%90%A6%E5%90%AF%E5%8A%A8span"><span id="inline-blue">查询nginx是否启动</span></a></li>
<li><a href="#span-idinline-blue%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BDnginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6span"><span id="inline-blue">重新加载nginx配置文件</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2nginx%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">停止nginx服务</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="添加nginx自启动文件"><span id="inline-blue">添加nginx自启动文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#文件内容参考nginx官网设置,https://www.nginx.com/resources/wiki/start/topics/examples/redhatnginxinit/ ,注意修改其中nginx可执行文件路径和指定配置文件路径</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># vim /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="添加文件可执行权限"><span id="inline-blue">添加文件可执行权限</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chmod a+x /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure>

<h2><span id="设置开启自启动"><span id="inline-blue">设置开启自启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig --add /etc/init.d/nginx</span></span><br><span class="line">[root@lwdCSCDN init.d]<span class="comment"># chkconfig nginx on</span></span><br></pre></td></tr></table></figure>

<h2><span id="验证服务是否添加成功"><span id="inline-blue">验证服务是否添加成功</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx start;</span></span><br><span class="line">正在启动 nginx：                                           [确定]</span><br></pre></td></tr></table></figure>

<h2><span id="查询nginx是否启动"><span id="inline-blue">查询nginx是否启动</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># ps -ef | grep nginx</span></span><br><span class="line">root     19139     1  0 17:58 ?        00:00:00 nginx: master process /usr/<span class="built_in">local</span>/nginx/sbin/nginx -c /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line">root     19140 19139  0 17:58 ?        00:00:00 nginx: worker process                                          </span><br><span class="line">root     19226 15760  0 17:59 pts/0    00:00:00 grep nginx</span><br></pre></td></tr></table></figure>


<h2><span id="重新加载nginx配置文件"><span id="inline-blue">重新加载nginx配置文件</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx reload</span></span><br><span class="line">nginx: the configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line">重新载入 nginx：                                           [确定]</span><br><span class="line">You have new mail <span class="keyword">in</span> /var/spool/mail/root</span><br></pre></td></tr></table></figure>

<h2><span id="停止nginx服务"><span id="inline-blue">停止nginx服务</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@lwdCSCDN init.d]<span class="comment"># service nginx stop</span></span><br><span class="line">停止 nginx：                                               [确定]</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows创建FTP</title>
    <url>/FTP/blogs/Windows%E5%88%9B%E5%BB%BAFTP/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp%E7%94%A8%E6%88%B7span"><span id="inline-blue">创建FTP用户</span></a></li>
<li><a href="#span-idinline-blue%E5%BC%80%E5%90%AFftp%E6%9C%8D%E5%8A%A1span"><span id="inline-blue">开启FTP服务</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BAftp_server%E7%BD%91%E7%AB%99span"><span id="inline-blue">创建FTP_SERVER网站</span></a></li>
<li><a href="#span-idinline-blueftp_server%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0ftp%E7%AB%99%E7%82%B9span"><span id="inline-blue">FTP_SERVER网站添加FTP站点</span></a></li>
<li><a href="#span-idinline-blue%E8%AE%BE%E7%BD%AE%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%E5%85%B1%E4%BA%ABspan"><span id="inline-blue">设置访问路径共享</span></a></li>
<li><a href="#span-idinline-blue%E9%AA%8C%E8%AF%81ftp%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AEspan"><span id="inline-blue">验证FTP用户访问</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="创建ftp用户"><span id="inline-blue">创建FTP用户</span></span></h2><ol>
<li>打开计算机管理，依次打开本地用户和组-&gt;用户，右键新增用户，用户和密码自行定义即可，选项设置用户不可更改密码和密码永不过期</li>
</ol>
<p><img src="/images/Windows/FTP/WF_20201230_01.png" alt="新建用户"><br><img src="/images/Windows/FTP/WF_20201230_02.png" alt="用户信息"></p>
<ol start="2">
<li>创建FTP用户report_cd对应的目录H:\home\report_cd</li>
</ol>
<p><img src="/images/Windows/FTP/WF_20201230_04.png" alt="用户工作目录"></p>
<h2><span id="开启ftp服务"><span id="inline-blue">开启FTP服务</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_03.png" alt="开启FTP服务"></p>
<h2><span id="创建ftp_server网站"><span id="inline-blue">创建FTP_SERVER网站</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_05.png" alt="创建FTP_SERVER"></p>
<h2><span id="ftp_server网站添加ftp站点"><span id="inline-blue">FTP_SERVER网站添加FTP站点</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_06.png" alt="创建FTP_SERVER"><br><img src="/images/Windows/FTP/WF_20201230_07.png" alt="创建FTP_SERVER"></p>
<h2><span id="设置访问路径共享"><span id="inline-blue">设置访问路径共享</span></span></h2><p><img src="/images/Windows/FTP/WF_20201230_08.png" alt="创建FTP_SERVER"></p>
<h2><span id="验证ftp用户访问"><span id="inline-blue">验证FTP用户访问</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ftp://report_cd:report_cd@10.9.212.55:21</span><br></pre></td></tr></table></figure>

<p><img src="/images/Windows/FTP/WF_20201230_09.png" alt="验证"></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>FTP</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker阿里云镜像</title>
    <url>/Docker/blogs/Window7%E5%AE%89%E8%A3%85Docker/</url>
    <content><![CDATA[<p><a id="download" href="http://mirrors.aliyun.com/docker-toolbox/windows/docker-toolbox/?spm=5176.8351553.0.0.4bc61991tQpsnV"><i class="fa fa-download"></i><span>阿里云Docker镜像</span> </a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo阅读全文配置</title>
    <url>/Hexo/blogs/Hexo%E9%98%85%E8%AF%BB%E5%85%A8%E6%96%87%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2><span id="修改阅读全文前显示文字数量"><span id="inline-blue">修改[阅读全文]前显示文字数量</span></span></h2><p>第一种方式：<br>打开 themes/next/_config.yml，搜索关键字 auto_excerpt，开启配置项； 修改length即可修改阅读全文前显示文字数量</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Automatically Excerpt. Not recommend.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Please use &lt;!-- more --&gt; <span class="keyword">in</span> the post to control excerpt accurately.</span></span><br><span class="line">auto_excerpt:</span><br><span class="line">  enable: true</span><br><span class="line">  length: 150</span><br></pre></td></tr></table></figure>

<p>第二种方式：<br>文章任意位置添加</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&lt;!-- more --&gt;</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 导入导出</title>
    <url>/MySQL/blogs/MySQL%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8span"><span id="inline-blue">导出数据库中的表</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E4%BA%8B%E5%8A%A1span"><span id="inline-blue">导出数据库中的存储过程和事务</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BB%93%E6%9E%84%E5%92%8C%E6%95%B0%E6%8D%AEspan"><span id="inline-blue">导入数据库表结构和数据</span></a></li>
</ul>
<!-- tocstop -->

<h1><span id="导出数据库中的表"><span id="inline-blue">导出数据库中的表</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p report_hrb140 <span class="operator">&gt;</span> report_hrb140.sql;</span><br></pre></td></tr></table></figure>



<h1><span id="导出数据库中的存储过程和事务"><span id="inline-blue">导出数据库中的存储过程和事务</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>pcoship <span class="operator">-</span>ntd <span class="operator">-</span>R report_hrb121<span class="operator">&gt;</span> report_hrb121_FP.sql;</span><br><span class="line"></span><br><span class="line">其中<span class="operator">-</span>ntd代表导入存储过程。<span class="operator">-</span>R代表导入功能函数。</span><br></pre></td></tr></table></figure>



<h1><span id="导入数据库表结构和数据"><span id="inline-blue">导入数据库表结构和数据</span></span></h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line">password:<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">mysql<span class="operator">&gt;</span>use 数据库(数据库的名称)</span><br><span class="line">然后使用source命令,后面参数为脚本文件(report_hrb140.sql)</span><br><span class="line">mysql<span class="operator">&gt;</span>source report_hrb140.sql;</span><br><span class="line">导入存储过程及事务的<span class="keyword">SQL</span>命令：</span><br><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line">password:<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">mysql<span class="operator">&gt;</span>use 数据库(数据库的名称)</span><br><span class="line">然后使用source命令,后面参数为脚本文件(report_hrb121_FP.sql)</span><br><span class="line">mysql<span class="operator">&gt;</span>source report_hrb121_FP.sql;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle清理系统僵死SQl进程</title>
    <url>/Oracle/blogs/Oracle%E6%B8%85%E7%90%86%E7%B3%BB%E7%BB%9F%E5%83%B5%E6%AD%BBSQL%E8%BF%9B%E7%A8%8B/</url>
    <content><![CDATA[<h2><span id="清理"><span id="inline-blue">清理</span></span></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> l.session_id sid,  </span><br><span class="line">       s.serial#,  </span><br><span class="line">       l.locked_mode 锁模式,  </span><br><span class="line">       l.oracle_username 登录用户,  </span><br><span class="line">       l.os_user_name 登录机器用户名,  </span><br><span class="line">       s.machine 机器名,  </span><br><span class="line">       s.terminal 终端用户名,  </span><br><span class="line">       o.object_name 被锁对象名,  </span><br><span class="line">       s.logon_time 登录数据库时间  </span><br><span class="line"><span class="keyword">FROM</span> v$locked_object l, all_objects o, v$session s  </span><br><span class="line"><span class="keyword">WHERE</span> l.object_id <span class="operator">=</span> o.object_id  </span><br><span class="line">   <span class="keyword">AND</span> l.session_id <span class="operator">=</span> s.sid  </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sid, s.serial#; </span><br><span class="line"></span><br><span class="line">kill掉当前的锁对象</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> kill session sid,serial<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure>



<p>​</p>
]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle启动与停止</title>
    <url>/Oracle/blogs/Oracle%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%81%9C%E6%AD%A2/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#span-idinline-blue%E5%90%AF%E5%8A%A8span"><span id="inline-blue">启动</span></a></li>
<li><a href="#span-idinline-blue%E5%81%9C%E6%AD%A2span"><span id="inline-blue">停止</span></a></li>
</ul>
<!-- tocstop -->

<h2><span id="启动"><span id="inline-blue">启动</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> su – oracle</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> sqlplus /nolog</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> conn / as sysdba</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> startup (一般不需要加参数，只要设置好环境变量）</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> quit (退出sql模式)</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl start (启动监听器）关闭oracle</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl status</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> lsnrctl stop(关闭监听器，在这之前，应该先关闭应用程序）</span> </span><br></pre></td></tr></table></figure>



<p>​    </p>
<h2><span id="停止"><span id="inline-blue">停止</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">su - oracle</span><br><span class="line"><span class="meta">$</span><span class="bash">lsnrctl stop;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sqlplus /nolog</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> conn / as sysdba</span> </span><br><span class="line"><span class="meta">sql&gt;</span><span class="bash"> shutdown immediate</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle查看表空间使用情况</title>
    <url>/Oracle/blogs/Oracle%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%A9%BA%E9%97%B4%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/</url>
    <content><![CDATA[<h2><span id="统计"><span id="inline-blue">统计</span></span></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.tablespace_name &quot;表空间名&quot;,</span><br><span class="line">a.bytes <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> &quot;表空间大小(M)&quot;,</span><br><span class="line">(a.bytes <span class="operator">-</span> b.bytes) <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> &quot;已使用空间(M)&quot;,</span><br><span class="line">b.bytes <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> &quot;空闲空间(M)&quot;,</span><br><span class="line">round(((a.bytes <span class="operator">-</span> b.bytes) <span class="operator">/</span> a.bytes) <span class="operator">*</span> <span class="number">100</span>, <span class="number">2</span>) &quot;使用比&quot;</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> tablespace_name, <span class="built_in">sum</span>(bytes) bytes</span><br><span class="line"><span class="keyword">FROM</span> dba_data_files</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> tablespace_name) a,</span><br><span class="line">(<span class="keyword">SELECT</span> tablespace_name, <span class="built_in">sum</span>(bytes) bytes, <span class="built_in">max</span>(bytes) largest</span><br><span class="line"><span class="keyword">FROM</span> dba_free_space</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> tablespace_name) b</span><br><span class="line"><span class="keyword">WHERE</span> a.tablespace_name <span class="operator">=</span> b.tablespace_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ((a.bytes <span class="operator">-</span> b.bytes) <span class="operator">/</span> a.bytes) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>



<p>​</p>
]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcat 指定启动JDK版本</title>
    <url>/Tomcat/blogs/Tomcat%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8jdk%E7%89%88%E6%9C%AC/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">假设jdk版本7，目录为/home/user1/jdk</span><br><span class="line">进入到tomcat的bin目录下，修改setclasspath.sh文件，在文件首部添加两行代码</span><br><span class="line"></span><br><span class="line">export JAVA_HOME=/home/user/jdk</span><br><span class="line">export JRE_HOME=/home/user/jdk/jre</span><br></pre></td></tr></table></figure>



<h2><span id="windows"><span id="inline-blue">windows</span></span></h2><p>修改bin目录下的setclasspath.bat文件，注意linux的是sh，Windows的是bat。将上述两行代码的export换成set填入该文件首部保存（注意实际路径的替换）</p>
]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>Jetty 指定启动JDK版本</title>
    <url>/Jetty/blogs/Jetty%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8jdk%E7%89%88%E6%9C%AC/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">文件名称：setenv.sh 文件路径：/usr/<span class="built_in">local</span>/</span><br><span class="line">文件头部添加以下内容：</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.6.0_21</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=/usr/java/jdk1.6.0_21/jre</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Jetty</category>
      </categories>
      <tags>
        <tag>Jetty</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL运算符对NULL值处理</title>
    <url>/MySQL/blogs/MySQL%E8%BF%90%E7%AE%97%E7%AC%A6%E5%AF%B9null%E5%80%BC%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<ol>
<li><p>A,B,C作为列名时</p>
<p>​    任意一项为null 则A+B+C为null;</p>
</li>
<li><p>count对于null值处理;</p>
<p>​    count(*)包含null项；count(具体列名)忽略null项;count(null)为0</p>
</li>
<li><p>avg,max,min,sum对于null值处理</p>
<p>​    计算时全部忽略null项;对于avg(null),max(null),min(null),sum(null)为null</p>
</li>
<li><p>group by对于null值处理</p>
<p>​    将其单独作为一项置于首位</p>
<p>​    distinct对于null值处理与group by类似</p>
</li>
</ol>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo主题代码块自定义样式</title>
    <url>/Hexo/blogs/Hexo%E4%B8%BB%E9%A2%98%E4%BB%A3%E7%A0%81%E5%9D%97%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h2><span id="代码块自定义样式"><span id="inline-blue">代码块自定义样式</span></span></h2><p>打开themes/next/source/css/_custom/下的custom.styl,向里面加代码(颜色可以自己定义)</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ff7600</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fbf7f8</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 边框的自定义样式</span><br><span class="line"><span class="selector-class">.highlight</span>, pre &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span>, <span class="selector-tag">code</span>, pre &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d6d6d6</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Jboss 指定启动JDK版本</title>
    <url>/Jboss/blogs/Jboss%E6%8C%87%E5%AE%9A%E5%90%AF%E5%8A%A8jdk%E7%89%88%E6%9C%AC/</url>
    <content><![CDATA[<h2><span id="linux环境"><span id="inline-blue">linux环境</span></span></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">文件名称：run.conf  文件路径：/usr/<span class="built_in">local</span>/jboss-5.1.0.GA/bin</span><br><span class="line">文件头部添加以下内容：</span><br><span class="line">JAVA_HOME=<span class="string">&quot;/usr/java/jdk1.6.0&quot;</span></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Jboss</category>
      </categories>
      <tags>
        <tag>Jboss</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle导入导出</title>
    <url>/Oracle/blogs/Oracle%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<!-- toc -->

<ul>
<li><a href="#%E5%AF%BC%E5%85%A5">导入</a><ul>
<li><a href="#span-idinline-blue%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E8%A1%A8%E7%A9%BA%E9%97%B4span"><span id="inline-blue">查看所有用户表空间</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%92%8C%E7%B4%A2%E5%BC%95%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95span"><span id="inline-blue">创建数据和索引存储文件目录</span></a></li>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%94%A8%E6%88%B7%E5%B9%B6%E8%B5%8B%E4%BA%88%E6%9D%83%E9%99%90span"><span id="inline-blue">创建对应用户并赋予权限</span></a></li>
<li><a href="#span-idinline-blue%E5%AF%BC%E5%85%A5%E5%91%BD%E4%BB%A4span"><span id="inline-blue">导入命令</span></a></li>
</ul>
</li>
<li><a href="#%E5%AF%BC%E5%87%BA">导出</a><ul>
<li><a href="#span-idinline-blue%E5%88%9B%E5%BB%BA%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95span"><span id="inline-blue">创建导出数据文件目录</span></a></li>
<li><a href="#span-idinline-blue%E6%89%A7%E8%A1%8C%E5%AF%BC%E5%87%BA%E5%91%BD%E4%BB%A4span"><span id="inline-blue">执行导出命令</span></a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h1><span id="导入">导入</span></h1><h2><span id="查看所有用户表空间"><span id="inline-blue">查看所有用户表空间</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM DBA_USERS  &#x2F;*查看用户及其表空间信息 *&#x2F;</span><br><span class="line"></span><br><span class="line">drop user SDP_CMS_HRB cascade; &#x2F;* 级联删除用户信息*&#x2F;</span><br><span class="line"></span><br><span class="line">DROP TABLESPACE SDP_CMS_HRB_DATA including contents and datafiles cascade constraint; &#x2F;* 删除用户所在的表空间*&#x2F;</span><br></pre></td></tr></table></figure>

<p>​    </p>
<h2><span id="创建数据和索引存储文件目录"><span id="inline-blue">创建数据和索引存储文件目录</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create tablespace SDP_CMS_HRB_DATA datafile &#39;$ORACLE_BASE&#x2F;oradata&#x2F;SDP_CMS_HRB_DATA.dbf&#39; size 500M autoextend on next 12M maxsize unlimited;</span><br><span class="line">create tablespace SDP_CMS_HRB_IDX datafile &#39;$ORACLE_BASE&#x2F;oradata&#x2F;SDP_CMS_HRB_IDX.dbf&#39; size 500M autoextend on next 12M maxsize unlimited;</span><br></pre></td></tr></table></figure>



<h2><span id="创建对应用户并赋予权限"><span id="inline-blue">创建对应用户并赋予权限</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create user SDP_CMS_HRB identified by SDP_CMS_HRB default tablespace SDP_CMS_HRB_DATA temporary tablespace TEMP profile DEFAULT;</span><br><span class="line"></span><br><span class="line">grant connect,resource to SDP_CMS_HRB; </span><br><span class="line">grant create any sequence to SDP_CMS_HRB; </span><br><span class="line">grant create any table to SDP_CMS_HRB; </span><br><span class="line">grant delete any table to SDP_CMS_HRB; </span><br><span class="line">grant insert any table to SDP_CMS_HRB; </span><br><span class="line">grant select any table to SDP_CMS_HRB; </span><br><span class="line">grant unlimited tablespace to SDP_CMS_HRB; </span><br><span class="line">grant execute any procedure to SDP_CMS_HRB; </span><br><span class="line">grant update any table to SDP_CMS_HRB; </span><br><span class="line">grant create any view to SDP_CMS_HRB; </span><br><span class="line">grant dba to SDP_CMS_HRB;</span><br></pre></td></tr></table></figure>



<h2><span id="导入命令"><span id="inline-blue">导入命令</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">impdp  SDP_CMS_HRB&#x2F;SDP_CMS_HRB  DIRECTORY&#x3D;IMPDIR  DUMPFILE&#x3D;SDP_CMS _2020081010.dmp remap_schema&#x3D;SDP_CMS:SDP_CMS_HRB remap_tablespace&#x3D;SDP_CMS_DATA:SDP_CMS_HRB_DATA,SDP_CMS_DATA:SDP_CMS_HRB_IDX</span><br></pre></td></tr></table></figure>

<p>​    remap_schema:利用remap_schema可以把源数据库下SDP_CMS用户的数据迁移到目标数据库的SDP_CMS_HRB用户下。</p>
<p>​    remap_tablespace:将导出SDP_CMS _2020081010.dmp 文件中的SDP_CMS_DATA表空间 导入到目标库的 SDP_CMS_HRB_DATA中指定表空间(包含数据文件和索引文件)，导入命令执行之前必须确保引用脚本存在。</p>
<p>查看Oracle 用户对应目录命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM DBA_Directories &#x2F;* 查看用户相关的目录信息 *&#x2F;</span><br></pre></td></tr></table></figure>

<p><img src="/images/oracle/oracle_20201118.png" alt="oracle数据库目录信息"></p>
<h1><span id="导出">导出</span></h1><h2><span id="创建导出数据文件目录"><span id="inline-blue">创建导出数据文件目录</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create directory DATA_EXPDP_DIR as &#39;&#x2F;tmp&#39;; </span><br></pre></td></tr></table></figure>

<h2><span id="执行导出命令"><span id="inline-blue">执行导出命令</span></span></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">expdp \&#39;&#x2F; as sysdba\&#39; schemas&#x3D;SDP_CMS_HRB DIRECTORY&#x3D;DATA_EXPDP_DIR DUMPFILE&#x3D;SDP_CMS_HRBBAK_20200607.DMP LOGFILE&#x3D;SDP_CMS_HRBBAK_20200607.LOG</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Tomcat 启动配置优化</title>
    <url>/Tomcat/blogs/Tomcat%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h2><span id="内存优化"><span id="inline-blue">内存优化</span></span></h2><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">文件名称：catalina.sh </span><br><span class="line">文件路径：/usr/local/guangdong/ERMproxy/apache-tomcat-6.0.13/bin</span><br><span class="line">JAVA_OPTS=&quot;-Djava.awt.headless=true -Xms1024m -Xmx2048m -XX:PermSize=256M -XX:MaxNewSize=256m -XX:MaxPermSize=256m -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+HeapDumpOnOutOfMemoryError&quot;</span><br></pre></td></tr></table></figure>



<h2><span id="连接数优化"><span id="inline-blue">连接数优化</span></span></h2><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">文件名称：server.xml  </span><br><span class="line">文件路径：/usr/local/guangdong/ERMproxy/apache-tomcat-6.0.13/conf</span><br><span class="line">&lt;Connector connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; maxThreads=&quot;2000&quot; minSpareThreads=&quot;100&quot; maxSpareThreads=&quot;1000&quot; minProcessors=&quot;100&quot; maxProcessors=&quot;1000&quot; compression=&quot;on&quot; compressionMinSize=&quot;2048&quot; compressableMimeType=&quot;text/html,text/xml,text/javascript,text/css,text/plain&quot;  redirectPort=&quot;8443&quot;/&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2><span id="启动参数优化"><span id="inline-blue">启动参数优化</span></span></h2><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">文件名称：catalina.properties </span><br><span class="line">文件路径：/usr/local/guangdong/ERMproxy/apache-tomcat-6.0.13/conf</span><br><span class="line"></span><br><span class="line">1.找到代码tomcat.util.scan.StandardJarScanFilter.jarsToScan=\</span><br><span class="line">2.这行代码下面的jar包的都是需要扫描的，这也是导致tomcat启动过慢的元凶，所以删除下面的jar包即可</span><br><span class="line">3.将tomcat.util.scan.StandardJarScanFilter.jarsToScan=\修改为tomcat.util.scan.StandardJarScanFilter.jarsToSkip=*.jar</span><br><span class="line">4.修改完之后保存回到eclipse删除以前的tomcat配置，并重新配置</span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo主题next翻页不正常</title>
    <url>/Hexo/blogs/Hexo%E4%B8%BB%E9%A2%98Next%E7%BF%BB%E9%A1%B5%E4%B8%8D%E6%AD%A3%E5%B8%B8/</url>
    <content><![CDATA[<h2><span id="修改文件"><span id="inline-blue">修改文件</span></span></h2><p>themes\next\layout_partials\pagination.swig</p>
<p>修改前</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;% if page<span class="selector-class">.prev</span> or page<span class="selector-class">.next</span> %&#125;</span><br><span class="line">  &amp;lt;nav class=&amp;quot;pagination&amp;quot;&amp;gt;</span><br><span class="line">    &#123;&#123;</span><br><span class="line">      paginator(&#123;</span><br><span class="line">        prev_text: &amp;#x27;&amp;lt;i class=&amp;quot;fa fa-angle-left&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;#x27;,</span><br><span class="line">        next_text: &amp;#x27;&amp;lt;i class=&amp;quot;fa fa-angle-right&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;#x27;,</span><br><span class="line">        mid_size: <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &amp;lt;/<span class="selector-tag">nav</span>&amp;gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>修改后</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&#123;% if page<span class="selector-class">.prev</span> or page<span class="selector-class">.next</span> %&#125;</span><br><span class="line">  &amp;lt;nav class=&amp;quot;pagination&amp;quot;&amp;gt;</span><br><span class="line">    &#123;&#123;</span><br><span class="line">      paginator(&#123;</span><br><span class="line">        prev_text: &amp;#x27;&amp;lt;&amp;<span class="selector-id">#x27</span>;,</span><br><span class="line">        next_text: &amp;#x27;&amp;gt;&amp;<span class="selector-id">#x27</span>;,</span><br><span class="line">        mid_size: <span class="number">1</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line">  &amp;lt;/<span class="selector-tag">nav</span>&amp;gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo修改主题文章底部标签</title>
    <url>/Hexo/blogs/Hexo%E4%B8%BB%E9%A2%98Next%E4%BF%AE%E6%94%B9%E6%96%87%E7%AB%A0%E6%A0%87%E7%AD%BE/</url>
    <content><![CDATA[<h2><span id="修改模板"><span id="inline-blue">修改模板</span></span></h2><p>/themes/next/layout/_macro/post.swig</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">搜索 rel=“tag”&gt;#，将 # 换成&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</span><br></pre></td></tr></table></figure>

<p>效果如图：</p>
<p><img src="/images/hexo/next/hexo_next_2021_01_10_001.png" alt="hexo修改文章底部标签"></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
